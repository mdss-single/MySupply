{"version":3,"sources":["fancybox.js","formstyler.js","input-mask.js","input-width.js","range-slider.js","spinner.js","sticky.js"],"names":["window","document","$","undefined","fn","fancybox","console","log","div","defaults","loop","margin","gutter","keyboard","arrows","infobar","toolbar","buttons","idleTime","smallBtn","protect","modal","image","preload","ajax","settings","data","iframe","tpl","css","attr","scrolling","defaultType","animationEffect","animationDuration","zoomOpacity","transitionEffect","transitionDuration","slideClass","baseClass","baseTpl","spinnerTpl","errorTpl","btnTpl","download","zoom","close","arrowLeft","arrowRight","parentEl","autoFocus","backFocus","trapFocus","fullScreen","autoStart","touch","vertical","momentum","hash","media","slideShow","speed","thumbs","hideOnClose","axis","wheel","onInit","noop","beforeLoad","afterLoad","beforeShow","afterShow","beforeClose","afterClose","onActivate","onDeactivate","clickContent","current","event","type","clickSlide","clickOutside","dblclickContent","dblclickSlide","dblclickOutside","mobile","lang","i18n","en","CLOSE","NEXT","PREV","ERROR","PLAY_START","PLAY_STOP","FULL_SCREEN","THUMBS","DOWNLOAD","SHARE","ZOOM","de","$W","$D","called","requestAFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","callback","setTimeout","transitionEnd","t","el","createElement","transitions","transition","OTransition","MozTransition","WebkitTransition","style","forceRedraw","$el","length","offsetHeight","FancyBox","content","opts","index","self","this","extend","isMobile","isArray","id","group","currIndex","parseInt","prevIndex","prevPos","currPos","firstRun","createGroup","$lastFocus","activeElement","blur","slides","init","prototype","$scrollDiv","$container","buttonStr","firstItem","firstItemOpts","scrollbarWidth","scrollTop","scrollLeft","getInstance","addClass","test","navigator","userAgent","MSStream","body","scrollHeight","innerHeight","appendTo","offsetWidth","clientWidth","remove","append","each","value","translate","replace","$refs","container","forEach","item","find","trigger","activate","jumpTo","obj","str","arr","match","n","items","makeArray","i","$item","found","src","srcParts","isPlainObject","options","$orig","videoFormat","charAt","$thumb","caption","apply","split","shift","filter","inArray","push","addEvents","removeEvents","on","e","stopPropagation","preventDefault","previous","next","isScaledDown","originalEvent","update","stage","hide","show","instance","isClosing","target","hasClass","is","has","focus","keycode","keyCode","which","idleSecondsCounter","isIdle","showControls","idleInterval","setInterval","isDragging","hideControls","off","clearInterval","duration","pos","slide","canvasWidth","currentPos","transitionProps","groupLen","isAnimating","createSlide","updateControls","getTranslate","$slide","isMoved","left","top","forcedDuration","isNumeric","removeClass","loadSlide","stop","Math","round","width","animate","removeAttr","complete","children","isLoaded","revealContent","isComplete","updateSlide","scaleToActual","x","y","imgPos","posX","posY","scaleX","scaleY","$what","$content","canvasHeight","height","newImgWidth","newImgHeight","hasError","updateCursor","SlideShow","isActive","scaleToFit","end","getFitPos","minRatio","imgWidth","imgHeight","min","floor","key","setTranslate","centerSlide","opacity","nextWidth","nextHeight","isZoomable","fitPos","isFunction","rez","canPan","abs","ajaxLoad","isLoading","setImage","setIframe","setContent","setError","showLoading","url","success","textStatus","error","jqXHR","one","abort","temp","pxRatio","windowWidth","srcset","devicePixelRatio","innerWidth","map","ret","trim","substring","postfix","sort","a","b","j","thumb","$ghost","setBigImage","$img","$image","clearTimeout","timouts","naturalWidth","naturalHeight","hideLoading","max","readyState","$iframe","Date","getTime","isReady","scrollWidth","$body","$wrap","frameWidth","frameHeight","contents","ignore","contentWindow","documentElement","ceil","outerWidth","outerHeight","prepend","empty","hasOwnProperty","parent","$placeholder","insertAfter","nodeType","html","after","$smallBtn","$spinner","first","button","effect","effectClassName","start","getThumbPos","slidePos","thumbPos","offset","ownerDocument","element","elementRect","getBoundingClientRect","parentRects","parentElement","every","parentRect","visiblePixelX","right","visiblePixelY","bottom","isElementVisible","parseFloat","siblings","prev","isVisible","d","done","cleanUp","name","args","Array","slice","call","arguments","unshift","force","$caption","isHiddenControls","prop","toggleClass","toggleControls","version","command","open","all","destroy","createTouch","use3d","getComputedStyle","getPropertyValue","documentMode","matrix","eq","indexOf","transRez","exec","props","position","transform","to","leaveAnimationName","propertyName","selector","_run","$target","currentTarget","isDefaultPrevented","jQuery","format","params","param","youtube","matcher","autoplay","autohide","fs","rel","hd","wmode","enablejsapi","html5","paramPlace","vimeo","show_title","show_byline","show_portrait","fullscreen","api","metacafe","dailymotion","additionalInfos","vine","instagram","gmap_place","gmap_search","urlParams","paramObj","provider","providerName","providerOpts","m","p","decodeURIComponent","contentProvider","cancelAFrame","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","pointers","result","touches","changedTouches","pageX","pageY","clientX","clientY","distance","point2","point1","what","sqrt","pow","isClickable","get","onclick","atts","attributes","nodeName","substr","isScrollable","overflowY","overflowX","horizontal","clientHeight","Guestures","$bg","bg","$stage","proxy","ontouchstart","isTouchDevice","realPoints","startPoints","startEvent","canTap","isPanning","isSwiping","isZooming","isScrolling","sliderStartPos","sliderLastPos","contentStartPos","contentLastPos","startTime","distanceX","distanceY","addEventListener","onscroll","centerPointStartX","centerPointStartY","percentageOfImageAtPinchPointX","percentageOfImageAtPinchPointY","startDistanceBetweenFingers","ontouchmove","newPoints","onSwipe","onPan","onZoom","angle","swiping","requestId","atan2","PI","inTransition","limitMovement","minTranslateX","minTranslateY","maxTranslateX","maxTranslateY","newOffsetX","newOffsetY","currentOffsetX","currentOffsetY","currentWidth","currentHeight","limitPosition","newWidth","newHeight","pinchRatio","translateFromZoomingX","translateFromZoomingY","centerPointEndX","centerPointEndY","translateFromTranslatingX","newPos","ontouchend","dMs","panning","zooming","endPoints","removeEventListener","onTap","velocityX","velocityY","speedX","endPanning","endZooming","endSwiping","len","reset","where","tapX","tapY","process","prefix","action","addBack","tapped","timer","$button","toggle","set","clear","onInit.fb","beforeShow.fb","afterShow.fb","afterKeydown.fb","keypress","beforeClose.fb onDeactivate.fb","hidden","val","fnMap","FullScreen","request","elem","requestFullscreen","ALLOW_KEYBOARD_INPUT","exit","exitFullscreen","isFullscreen","Boolean","fullscreenElement","enabled","fullscreenEnabled","beforeClose.fb","fullscreenchange","FancyThumbs","$grid","$list","Thumbs","second","create","list","widthRatio","heightRatio","$parent","thumbWidth","thumbHeight","margin-top","margin-left","share","string","entityMap","f","location","encodeURIComponent","&","<",">","\"","'","/","`","=","String","s","text","click","href","escapeSelector","sel","ch","asCodePoint","charCodeAt","toString","shouldCreateHistory","currentHash","timerID","parseUrl","pop","gallery","join","triggerFromUrl","getGalleryID","origHash","history","title","pathname","search","replaceState","prevTime","currTime","deltaY","deltaX","wheelDelta","detail","factory","define","amd","exports","module","require","pluginName","idSuffix","filePlaceholder","fileBrowse","fileNumber","selectPlaceholder","selectSearch","selectSearchLimit","selectSearchNotFound","selectSearchPlaceholder","selectVisibleOptions","selectSmartPositioning","locale","locales","onSelectOpened","onSelectClosed","onFormStyled","Plugin","onDocumentClick","parents","selectbox","dropdown","keyup","opt","iOS","Android","Attributes","classes","checkboxOutput","att","checkbox","prependTo","triggerHandler","change","closest","add","before","radioOutput","radio","commonParents","cachedThis","commonParent","inputName","fileOutput","placeholder","browse","file","files","number","numberOutput","wrap","step","timeout","interval","Number","changeValue","spin","newValue","decimals","multiplier","selectboxOutput","preventScrolling","scrollDiff","option","makeList","op","li","liClass","liClasses","dataList","optionClass","optgroupClass","dataJqfsClass","k","ul","size","ulHeight","liHeight","clkd","ctrlKey","metaKey","shiftKey","prevAll","nextAll","not","arrIndexes","doMultipleSelect","searchHTML","selectzIndex","divSelect","divText","optionSelected","notFound","liWidthInner","liWidth","display","l","selClone","clone","selCloneWidth","selectHeight","searchHeight","isMaxHeight","liSelected","liOuterHeight","win","topOffset","bottomOffset","visible","minHeight","dropDown","maxHeightBottom","maxHeightTop","dropUp","zIndex","query","RegExp","hover","liText","mouseout","selectedIndex","registered","doSelect","removeData","returns","promise","Zepto","Mask","mask","invalid","getCaret","ctrl","dSel","selection","cSelStart","selectionStart","appVersion","createRange","moveStart","setCaret","range","setSelectionRange","createTextRange","collapse","moveEnd","select","events","maskDigitPosMapOld","maskDigitPosMap","jMaskGlobals","useInput","behaviour","keydown","oldValue","selectOnFocus","clearIfNotMatch","regexMask","getRegexMask","translation","pattern","optional","recursive","oRecursive","r","maskChunks","jMask","digit","destroyEvents","v","method","calculateCaretPosition","oldVal","newVal","getMasked","caretPosNew","caretPosOld","newValL","oldValL","maskDigitsBeforeCaret","maskDigitsAfterCaret","maskDigitsBeforeCaretAll","maskDigitsBeforeCaretAllOld","caretPos","byPassKeys","keyStrokeCompensation","callbacks","skipMaskChars","lastMaskChar","check","lastUntranslatedMaskChar","buf","maskLen","valLen","addMethod","resetPos","maskDigitCount","maskDigitPosArr","reverse","maskDigit","valDigit","fallback","lastMaskCharDigit","mapMaskdigitPositions","maskDiff","changed","defaultArgs","criteria","caret","getCleanVal","getMaskedVal","onlyMask","maxlength","maskWatchers","HTMLAttributes","input","notSameMaskObject","field","maskObject","stringify","JSON","globals","watchInterval","watchInputs","maskFunction","masked","unmask","dataMask","cleanVal","applyDataMask","maskElements","dataMaskAttr","eventName","isSupported","setAttribute","watchDataMask","0","9","#","A","S","textWidth","font","fakeEl","jRange","onstatechange","ondragend","onbarclicked","isRange","showLabels","showScale","theme","disable","snap","template","node","inputNode","from","domNode","onChange","lowPointer","highPointer","last","labels","lowLabel","highLabel","scale","bar","clickableBar","render","isSingle","attachEvents","renderScale","setValue","barClicked","onDragStart","bind","pointer","onDrag","onDragEnd","setPosition","firstLeft","firstHalfWidth","lastLeft","lastHalfWidth","leftSide","rightSide","isPx","leftPos","lowPos","highPos","circleWidth","prcToPx","expPos","correctPositionForSnap","w","showPointerValue","isReadonly","currentValue","positionToValue","diff","expectedPosition","values","prc","valuesToPrc","marginLeft","getBarWidth","label","setInputValue","isDecimal","final","getValue","getOptions","getRange","enable","toggleDisable","updateRange","$this","resize","spinner","oldval","stick_in_parent","doc","elm","enable_bottoming","inner_scrolling","manual_spacer","offset_top","parent_selector","recalc_every","sticky_class","spacer","bottoming","padding_bottom","parent_top","parent_height","el_float","detached","bottomed","detach","fixed","last_pos","last_scroll_height","recalc","recalc_and_tick","recalc_counter","tick","border_top","padding_top","restore","vertical-align","float","delta","recalced","scroll","will_bottom","win_height"],"mappings":"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","file":"plugins.js","sourcesContent":["// ==================================================\r\n// fancyBox v3.2.10\r\n//\r\n// Licensed GPLv3 for open source use\r\n// or fancyBox Commercial License for commercial use\r\n//\r\n// http://fancyapps.com/fancybox/\r\n// Copyright 2017 fancyApps\r\n//\r\n// ==================================================\r\n;(function (window, document, $, undefined) {\r\n    'use strict';\r\n\r\n    // If there's no jQuery, fancyBox can't work\r\n    // =========================================\r\n\r\n    if ( !$ ) {\r\n        return;\r\n    }\r\n\r\n    // Check if fancyBox is already initialized\r\n    // ========================================\r\n\r\n    if ( $.fn.fancybox ) {\r\n\r\n        if ( 'console' in window ) {\r\n            console.log( 'fancyBox already initialized' );\r\n        }\r\n\r\n        return;\r\n    }\r\n\r\n    // Private default settings\r\n    // ========================\r\n\r\n    var defaults = {\r\n\r\n        // Enable infinite gallery navigation\r\n        loop : false,\r\n\r\n        // Space around image, ignored if zoomed-in or viewport width is smaller than 800px\r\n        margin : [44, 0],\r\n\r\n        // Horizontal space between slides\r\n        gutter : 50,\r\n\r\n        // Enable keyboard navigation\r\n        keyboard : true,\r\n\r\n        // Should display navigation arrows at the screen edges\r\n        arrows : true,\r\n\r\n        // Should display infobar (counter and arrows at the top)\r\n        infobar : true,\r\n\r\n        // Should display toolbar (buttons at the top)\r\n        toolbar : true,\r\n\r\n        // What buttons should appear in the top right corner.\r\n        // Buttons will be created using templates from `btnTpl` option\r\n        // and they will be placed into toolbar (class=\"fancybox-toolbar\"` element)\r\n        buttons : [\r\n            'slideShow',\r\n            'fullScreen',\r\n            'thumbs',\r\n            'share',\r\n            //'download',\r\n            //'zoom',\r\n            'close'\r\n        ],\r\n\r\n        // Detect \"idle\" time in seconds\r\n        idleTime : 3,\r\n\r\n        // Should display buttons at top right corner of the content\r\n        // If 'auto' - they will be created for content having type 'html', 'inline' or 'ajax'\r\n        // Use template from `btnTpl.smallBtn` for customization\r\n        smallBtn : 'auto',\r\n\r\n        // Disable right-click and use simple image protection for images\r\n        protect : false,\r\n\r\n        // Shortcut to make content \"modal\" - disable keyboard navigtion, hide buttons, etc\r\n        modal : false,\r\n\r\n        image : {\r\n\r\n            // Wait for images to load before displaying\r\n            // Requires predefined image dimensions\r\n            // If 'auto' - will zoom in thumbnail if 'width' and 'height' attributes are found\r\n            preload : \"auto\"\r\n\r\n        },\r\n\r\n        ajax : {\r\n\r\n            // Object containing settings for ajax request\r\n            settings : {\r\n\r\n                // This helps to indicate that request comes from the modal\r\n                // Feel free to change naming\r\n                data : {\r\n                    fancybox : true\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        iframe : {\r\n\r\n            // Iframe template\r\n            tpl : '<iframe id=\"fancybox-frame{rnd}\" name=\"fancybox-frame{rnd}\" class=\"fancybox-iframe\" frameborder=\"0\" vspace=\"0\" hspace=\"0\" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency=\"true\" src=\"\"></iframe>',\r\n\r\n            // Preload iframe before displaying it\r\n            // This allows to calculate iframe content width and height\r\n            // (note: Due to \"Same Origin Policy\", you can't get cross domain data).\r\n            preload : true,\r\n\r\n            // Custom CSS styling for iframe wrapping element\r\n            // You can use this to set custom iframe dimensions\r\n            css : {},\r\n\r\n            // Iframe tag attributes\r\n            attr : {\r\n                scrolling : 'auto'\r\n            }\r\n\r\n        },\r\n\r\n        // Default content type if cannot be detected automatically\r\n        defaultType : 'image',\r\n\r\n        // Open/close animation type\r\n        // Possible values:\r\n        //   false            - disable\r\n        //   \"zoom\"           - zoom images from/to thumbnail\r\n        //   \"fade\"\r\n        //   \"zoom-in-out\"\r\n        //\r\n        animationEffect : \"zoom\",\r\n\r\n        // Duration in ms for open/close animation\r\n        animationDuration : 500,\r\n\r\n        // Should image change opacity while zooming\r\n        // If opacity is \"auto\", then opacity will be changed if image and thumbnail have different aspect ratios\r\n        zoomOpacity : \"auto\",\r\n\r\n        // Transition effect between slides\r\n        //\r\n        // Possible values:\r\n        //   false            - disable\r\n        //   \"fade'\r\n        //   \"slide'\r\n        //   \"circular'\r\n        //   \"tube'\r\n        //   \"zoom-in-out'\r\n        //   \"rotate'\r\n        //\r\n        transitionEffect : \"fade\",\r\n\r\n        // Duration in ms for transition animation\r\n        transitionDuration : 366,\r\n\r\n        // Custom CSS class for slide element\r\n        slideClass : '',\r\n\r\n        // Custom CSS class for layout\r\n        baseClass : '',\r\n\r\n        // Base template for layout\r\n        baseTpl\t:\r\n            '<div class=\"fancybox-container\" role=\"dialog\" tabindex=\"-1\">' +\r\n                '<div class=\"fancybox-bg\"></div>' +\r\n                '<div class=\"fancybox-inner\">' +\r\n                    '<div class=\"fancybox-infobar\">' +\r\n                        '<span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span>' +\r\n                    '</div>' +\r\n                    '<div class=\"fancybox-toolbar\">{{buttons}}</div>' +\r\n                    '<div class=\"fancybox-navigation\">{{arrows}}</div>' +\r\n                    '<div class=\"fancybox-stage\"></div>' +\r\n                    '<div class=\"fancybox-caption-wrap\"><div class=\"fancybox-caption\"></div></div>' +\r\n                '</div>' +\r\n            '</div>',\r\n\r\n        // Loading indicator template\r\n        spinnerTpl : '<div class=\"fancybox-loading\"></div>',\r\n\r\n        // Error message template\r\n        errorTpl : '<div class=\"fancybox-error\"><p>{{ERROR}}<p></div>',\r\n\r\n        btnTpl : {\r\n\r\n            download : '<a download data-fancybox-download class=\"fancybox-button fancybox-button--download\" title=\"{{DOWNLOAD}}\">' +\r\n                        '<svg viewBox=\"0 0 40 40\">' +\r\n                            '<path d=\"M20,23 L20,8 L20,23 L13,16 L20,23 L27,16 L20,23 M26,28 L13,28 L27,28 L14,28\" />' +\r\n                        '</svg>' +\r\n                    '</a>',\r\n\r\n            zoom : '<button data-fancybox-zoom class=\"fancybox-button fancybox-button--zoom\" title=\"{{ZOOM}}\">' +\r\n                        '<svg viewBox=\"0 0 40 40\">' +\r\n                            '<path d=\"M 18,17 m-8,0 a 8,8 0 1,0 16,0 a 8,8 0 1,0 -16,0 M25,23 L31,29 L25,23\" />' +\r\n                        '</svg>' +\r\n                    '</button>',\r\n\r\n            close : '<button data-fancybox-close class=\"fancybox-button fancybox-button--close\" title=\"{{CLOSE}}\">' +\r\n                        '<svg viewBox=\"0 0 40 40\">' +\r\n                            '<path d=\"M10,10 L30,30 M30,10 L10,30\" />' +\r\n                        '</svg>' +\r\n                    '</button>',\r\n\r\n            // This small close button will be appended to your html/inline/ajax content by default,\r\n            // if \"smallBtn\" option is not set to false\r\n            smallBtn   : '<button data-fancybox-close class=\"fancybox-close-small\" title=\"{{CLOSE}}\"></button>',\r\n\r\n            // Arrows\r\n            arrowLeft : '<button data-fancybox-prev class=\"fancybox-button fancybox-button--arrow_left\" title=\"{{PREV}}\">' +\r\n                            '<svg viewBox=\"0 0 40 40\">' +\r\n                              '<path d=\"M10,20 L30,20 L10,20 L18,28 L10,20 L18,12 L10,20\"></path>' +\r\n                            '</svg>' +\r\n                          '</button>',\r\n\r\n            arrowRight : '<button data-fancybox-next class=\"fancybox-button fancybox-button--arrow_right\" title=\"{{NEXT}}\">' +\r\n                          '<svg viewBox=\"0 0 40 40\">' +\r\n                            '<path d=\"M30,20 L10,20 L30,20 L22,28 L30,20 L22,12 L30,20\"></path>' +\r\n                          '</svg>' +\r\n                        '</button>'\r\n        },\r\n\r\n        // Container is injected into this element\r\n        parentEl : 'body',\r\n\r\n\r\n        // Focus handling\r\n        // ==============\r\n\r\n        // Try to focus on the first focusable element after opening\r\n        autoFocus : false,\r\n\r\n        // Put focus back to active element after closing\r\n        backFocus : true,\r\n\r\n        // Do not let user to focus on element outside modal content\r\n        trapFocus : true,\r\n\r\n\r\n        // Module specific options\r\n        // =======================\r\n\r\n        fullScreen : {\r\n            autoStart : false,\r\n        },\r\n\r\n        // Set `touch: false` to disable dragging/swiping\r\n        touch : {\r\n            vertical : true,  // Allow to drag content vertically\r\n            momentum : true   // Continue movement after releasing mouse/touch when panning\r\n        },\r\n\r\n        // Hash value when initializing manually,\r\n        // set `false` to disable hash change\r\n        hash : null,\r\n\r\n        // Customize or add new media types\r\n        // Example:\r\n        /*\r\n        media : {\r\n            youtube : {\r\n                params : {\r\n                    autoplay : 0\r\n                }\r\n            }\r\n        }\r\n        */\r\n        media : {},\r\n\r\n        slideShow : {\r\n            autoStart : false,\r\n            speed     : 4000\r\n        },\r\n\r\n        thumbs : {\r\n\t\t\tautoStart   : false,                  // Display thumbnails on opening\r\n\t\t\thideOnClose : true,                   // Hide thumbnail grid when closing animation starts\r\n\t\t\tparentEl    : '.fancybox-container',  // Container is injected into this element\r\n\t\t\taxis        : 'y'                     // Vertical (y) or horizontal (x) scrolling\r\n\t\t},\r\n\r\n        // Use mousewheel to navigate gallery\r\n        // If 'auto' - enabled for images only\r\n        wheel : 'auto',\r\n\r\n        // Callbacks\r\n        //==========\r\n\r\n        // See Documentation/API/Events for more information\r\n        // Example:\r\n        /*\r\n            afterShow: function( instance, current ) {\r\n                 console.info( 'Clicked element:' );\r\n                 console.info( current.opts.$orig );\r\n            }\r\n        */\r\n\r\n        onInit       : $.noop,  // When instance has been initialized\r\n\r\n        beforeLoad   : $.noop,  // Before the content of a slide is being loaded\r\n        afterLoad    : $.noop,  // When the content of a slide is done loading\r\n\r\n        beforeShow   : $.noop,  // Before open animation starts\r\n        afterShow    : $.noop,  // When content is done loading and animating\r\n\r\n        beforeClose  : $.noop,  // Before the instance attempts to close. Return false to cancel the close.\r\n        afterClose   : $.noop,  // After instance has been closed\r\n\r\n        onActivate   : $.noop,  // When instance is brought to front\r\n        onDeactivate : $.noop,  // When other instance has been activated\r\n\r\n\r\n        // Interaction\r\n        // ===========\r\n\r\n        // Use options below to customize taken action when user clicks or double clicks on the fancyBox area,\r\n        // each option can be string or method that returns value.\r\n        //\r\n        // Possible values:\r\n        //   \"close\"           - close instance\r\n        //   \"next\"            - move to next gallery item\r\n        //   \"nextOrClose\"     - move to next gallery item or close if gallery has only one item\r\n        //   \"toggleControls\"  - show/hide controls\r\n        //   \"zoom\"            - zoom image (if loaded)\r\n        //   false             - do nothing\r\n\r\n        // Clicked on the content\r\n        clickContent : function( current, event ) {\r\n            return current.type === 'image' ? 'zoom' : false;\r\n        },\r\n\r\n        // Clicked on the slide\r\n        clickSlide : 'close',\r\n\r\n        // Clicked on the background (backdrop) element\r\n        clickOutside : 'close',\r\n\r\n        // Same as previous two, but for double click\r\n        dblclickContent : false,\r\n        dblclickSlide   : false,\r\n        dblclickOutside : false,\r\n\r\n\r\n        // Custom options when mobile device is detected\r\n        // =============================================\r\n\r\n        mobile : {\r\n            idleTime : false,\r\n            margin   : 0,\r\n\r\n            clickContent : function( current, event ) {\r\n                return current.type === 'image' ? 'toggleControls' : false;\r\n            },\r\n            clickSlide : function( current, event ) {\r\n                return current.type === 'image' ? 'toggleControls' : 'close';\r\n            },\r\n            dblclickContent : function( current, event ) {\r\n                return current.type === 'image' ? 'zoom' : false;\r\n            },\r\n            dblclickSlide : function( current, event ) {\r\n                return current.type === 'image' ? 'zoom' : false;\r\n            }\r\n        },\r\n\r\n\r\n        // Internationalization\r\n        // ============\r\n\r\n        lang : 'en',\r\n        i18n : {\r\n            'en' : {\r\n                CLOSE       : 'Close',\r\n                NEXT        : 'Next',\r\n                PREV        : 'Previous',\r\n                ERROR       : 'The requested content cannot be loaded. <br/> Please try again later.',\r\n                PLAY_START  : 'Start slideshow',\r\n                PLAY_STOP   : 'Pause slideshow',\r\n                FULL_SCREEN : 'Full screen',\r\n                THUMBS      : 'Thumbnails',\r\n                DOWNLOAD    : 'Download',\r\n                SHARE       : 'Share',\r\n                ZOOM        : 'Zoom'\r\n            },\r\n            'de' : {\r\n                CLOSE       : 'Schliessen',\r\n                NEXT        : 'Weiter',\r\n                PREV        : 'Zurück',\r\n                ERROR       : 'Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es später nochmal.',\r\n                PLAY_START  : 'Diaschau starten',\r\n                PLAY_STOP   : 'Diaschau beenden',\r\n                FULL_SCREEN : 'Vollbild',\r\n                THUMBS      : 'Vorschaubilder',\r\n                DOWNLOAD    : 'Herunterladen',\r\n                SHARE       : 'Teilen',\r\n                ZOOM        : 'Maßstab'\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    // Few useful variables and methods\r\n    // ================================\r\n\r\n    var $W = $(window);\r\n    var $D = $(document);\r\n\r\n    var called = 0;\r\n\r\n\r\n    // Check if an object is a jQuery object and not a native JavaScript object\r\n    // ========================================================================\r\n\r\n    var isQuery = function ( obj ) {\r\n        return obj && obj.hasOwnProperty && obj instanceof $;\r\n    };\r\n\r\n\r\n    // Handle multiple browsers for \"requestAnimationFrame\" and \"cancelAnimationFrame\"\r\n    // ===============================================================================\r\n\r\n    var requestAFrame = (function () {\r\n        return window.requestAnimationFrame ||\r\n                window.webkitRequestAnimationFrame ||\r\n                window.mozRequestAnimationFrame ||\r\n                window.oRequestAnimationFrame ||\r\n                // if all else fails, use setTimeout\r\n                function (callback) {\r\n                    return window.setTimeout(callback, 1000 / 60);\r\n                };\r\n    })();\r\n\r\n\r\n    // Detect the supported transition-end event property name\r\n    // =======================================================\r\n\r\n    var transitionEnd = (function () {\r\n        var t, el = document.createElement(\"fakeelement\");\r\n\r\n        var transitions = {\r\n            \"transition\"      : \"transitionend\",\r\n            \"OTransition\"     : \"oTransitionEnd\",\r\n            \"MozTransition\"   : \"transitionend\",\r\n            \"WebkitTransition\": \"webkitTransitionEnd\"\r\n        };\r\n\r\n        for (t in transitions) {\r\n            if (el.style[t] !== undefined){\r\n                return transitions[t];\r\n            }\r\n        }\r\n\r\n        return 'transitionend';\r\n    })();\r\n\r\n\r\n    // Force redraw on an element.\r\n    // This helps in cases where the browser doesn't redraw an updated element properly.\r\n    // =================================================================================\r\n\r\n    var forceRedraw = function( $el ) {\r\n        return ( $el && $el.length && $el[0].offsetHeight );\r\n    };\r\n\r\n\r\n    // Class definition\r\n    // ================\r\n\r\n    var FancyBox = function( content, opts, index ) {\r\n        var self = this;\r\n\r\n        self.opts = $.extend( true, { index : index }, $.fancybox.defaults, opts || {} );\r\n\r\n        if ( $.fancybox.isMobile ) {\r\n            self.opts = $.extend( true, {}, self.opts, self.opts.mobile );\r\n        }\r\n\r\n        // Exclude buttons option from deep merging\r\n        if ( opts && $.isArray( opts.buttons ) ) {\r\n            self.opts.buttons = opts.buttons;\r\n        }\r\n\r\n        self.id    = self.opts.id || ++called;\r\n        self.group = [];\r\n\r\n        self.currIndex = parseInt( self.opts.index, 10 ) || 0;\r\n        self.prevIndex = null;\r\n\r\n        self.prevPos = null;\r\n        self.currPos = 0;\r\n\r\n        self.firstRun = null;\r\n\r\n        // Create group elements from original item collection\r\n        self.createGroup( content );\r\n\r\n        if ( !self.group.length ) {\r\n            return;\r\n        }\r\n\r\n        // Save last active element and current scroll position\r\n        self.$lastFocus = $(document.activeElement).blur();\r\n\r\n        // Collection of gallery objects\r\n        self.slides = {};\r\n\r\n        self.init();\r\n    };\r\n\r\n    $.extend(FancyBox.prototype, {\r\n\r\n        // Create DOM structure\r\n        // ====================\r\n\r\n        init : function() {\r\n            var self = this,\r\n                firstItem      = self.group[ self.currIndex ],\r\n                firstItemOpts  = firstItem.opts,\r\n                scrollbarWidth = $.fancybox.scrollbarWidth,\r\n                $scrollDiv,\r\n                $container,\r\n                buttonStr;\r\n\r\n            self.scrollTop  = $D.scrollTop();\r\n            self.scrollLeft = $D.scrollLeft();\r\n\r\n\r\n            // Hide scrollbars\r\n            // ===============\r\n\r\n            if ( !$.fancybox.getInstance() ) {\r\n\r\n                $( 'body' ).addClass( 'fancybox-active' );\r\n\r\n                // iOS hack\r\n                if ( /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream ) {\r\n\r\n                    // iOS has problems for input elements inside fixed containers,\r\n                    // the workaround is to apply `position: fixed` to `<body>` element,\r\n                    // unfortunately, this makes it lose the scrollbars and forces address bar to appear.\r\n\r\n                    if ( firstItem.type !== 'image' ) {\r\n                        $( 'body' ).css( 'top', $( 'body' ).scrollTop() * -1 ).addClass( 'fancybox-iosfix' );\r\n                    }\r\n\r\n                } else if ( !$.fancybox.isMobile && document.body.scrollHeight > window.innerHeight ) {\r\n\r\n                    if ( scrollbarWidth === undefined ) {\r\n                        $scrollDiv = $('<div style=\"width:50px;height:50px;overflow:scroll;\" />').appendTo( 'body' );\r\n\r\n                        scrollbarWidth = $.fancybox.scrollbarWidth = $scrollDiv[0].offsetWidth - $scrollDiv[0].clientWidth;\r\n\r\n                        $scrollDiv.remove();\r\n                    }\r\n\r\n                    $( 'head' ).append( '<style id=\"fancybox-style-noscroll\" type=\"text/css\">.compensate-for-scrollbar { margin-right: ' + scrollbarWidth + 'px; }</style>' );\r\n                    $( 'body' ).addClass( 'compensate-for-scrollbar' );\r\n                }\r\n            }\r\n\r\n\r\n            // Build html markup and set references\r\n            // ====================================\r\n\r\n            // Build html code for buttons and insert into main template\r\n            buttonStr = '';\r\n\r\n            $.each( firstItemOpts.buttons, function( index, value ) {\r\n                buttonStr += ( firstItemOpts.btnTpl[ value ] || '' );\r\n            });\r\n\r\n            // Create markup from base template, it will be initially hidden to\r\n            // avoid unnecessary work like painting while initializing is not complete\r\n            $container = $(\r\n                self.translate( self,\r\n                    firstItemOpts.baseTpl\r\n                        .replace( '\\{\\{buttons\\}\\}', buttonStr )\r\n                        .replace( '\\{\\{arrows\\}\\}', firstItemOpts.btnTpl.arrowLeft + firstItemOpts.btnTpl.arrowRight )\r\n                )\r\n            )\r\n                .attr( 'id', 'fancybox-container-' + self.id )\r\n                .addClass( 'fancybox-is-hidden' )\r\n                .addClass( firstItemOpts.baseClass )\r\n                .data( 'FancyBox', self )\r\n                .appendTo( firstItemOpts.parentEl );\r\n\r\n            // Create object holding references to jQuery wrapped nodes\r\n            self.$refs = {\r\n                container : $container\r\n            };\r\n\r\n            [ 'bg', 'inner', 'infobar', 'toolbar', 'stage', 'caption', 'navigation' ].forEach(function(item) {\r\n                self.$refs[ item ] = $container.find( '.fancybox-' + item );\r\n            });\r\n\r\n            self.trigger( 'onInit' );\r\n\r\n            // Enable events, deactive previous instances\r\n            self.activate();\r\n\r\n            // Build slides, load and reveal content\r\n            self.jumpTo( self.currIndex );\r\n        },\r\n\r\n\r\n        // Simple i18n support - replaces object keys found in template\r\n        // with corresponding values\r\n        // ============================================================\r\n\r\n        translate : function( obj, str ) {\r\n            var arr = obj.opts.i18n[ obj.opts.lang ];\r\n\r\n            return str.replace(/\\{\\{(\\w+)\\}\\}/g, function(match, n) {\r\n                var value = arr[n];\r\n\r\n                if ( value === undefined ) {\r\n                    return match;\r\n                }\r\n\r\n                return value;\r\n            });\r\n        },\r\n\r\n        // Create array of gally item objects\r\n        // Check if each object has valid type and content\r\n        // ===============================================\r\n\r\n        createGroup : function ( content ) {\r\n            var self  = this;\r\n            var items = $.makeArray( content );\r\n\r\n            $.each(items, function( i, item ) {\r\n                var obj  = {},\r\n                    opts = {},\r\n                    $item,\r\n                    type,\r\n                    found,\r\n                    src,\r\n                    srcParts;\r\n\r\n                // Step 1 - Make sure we have an object\r\n                // ====================================\r\n\r\n                if ( $.isPlainObject( item ) ) {\r\n\r\n                    // We probably have manual usage here, something like\r\n                    // $.fancybox.open( [ { src : \"image.jpg\", type : \"image\" } ] )\r\n\r\n                    obj  = item;\r\n                    opts = item.opts || item;\r\n\r\n                } else if ( $.type( item ) === 'object' && $( item ).length ) {\r\n\r\n                    // Here we probably have jQuery collection returned by some selector\r\n                    $item = $( item );\r\n\r\n                    opts = $item.data();\r\n                    opts = $.extend( {}, opts, opts.options || {} );\r\n\r\n                    // Here we store clicked element\r\n                    opts.$orig = $item;\r\n\r\n                    obj.src = opts.src || $item.attr( 'href' );\r\n\r\n                    // Assume that simple syntax is used, for example:\r\n                    //   `$.fancybox.open( $(\"#test\"), {} );`\r\n                    if ( !obj.type && !obj.src ) {\r\n                        obj.type = 'inline';\r\n                        obj.src  = item;\r\n                    }\r\n\r\n                } else {\r\n\r\n                    // Assume we have a simple html code, for example:\r\n                    //   $.fancybox.open( '<div><h1>Hi!</h1></div>' );\r\n\r\n                    obj = {\r\n                        type : 'html',\r\n                        src  : item + ''\r\n                    };\r\n\r\n                }\r\n\r\n                // Each gallery object has full collection of options\r\n                obj.opts = $.extend( true, {}, self.opts, opts );\r\n\r\n                // Do not merge buttons array\r\n                if ( $.isArray( opts.buttons ) ) {\r\n                    obj.opts.buttons = opts.buttons;\r\n                }\r\n\r\n\r\n                // Step 2 - Make sure we have content type, if not - try to guess\r\n                // ==============================================================\r\n\r\n                type = obj.type || obj.opts.type;\r\n                src  = obj.src || '';\r\n\r\n                if ( !type && src ) {\r\n                    if ( src.match(/(^data:image\\/[a-z0-9+\\/=]*,)|(\\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\\?|#).*)?$)/i) ) {\r\n                        type = 'image';\r\n\r\n                    } else if ( src.match(/\\.(pdf)((\\?|#).*)?$/i) ) {\r\n                        type = 'pdf';\r\n\r\n                    } else if ( found = src.match(/\\.(mp4|mov|ogv)((\\?|#).*)?$/i) ) {\r\n                        type = 'video';\r\n\r\n                        if ( !obj.opts.videoFormat ) {\r\n                            obj.opts.videoFormat = 'video/' + ( found[1] === 'ogv' ? 'ogg' : found[1] );\r\n                        }\r\n\r\n                    } else if ( src.charAt(0) === '#' ) {\r\n                        type = 'inline';\r\n                    }\r\n                }\r\n\r\n                if ( type ) {\r\n                    obj.type = type;\r\n\r\n                } else {\r\n                    self.trigger( 'objectNeedsType', obj );\r\n                }\r\n\r\n\r\n                // Step 3 - Some adjustments\r\n                // =========================\r\n\r\n                obj.index = self.group.length;\r\n\r\n                // Check if $orig and $thumb objects exist\r\n                if ( obj.opts.$orig && !obj.opts.$orig.length ) {\r\n                    delete obj.opts.$orig;\r\n                }\r\n\r\n                if ( !obj.opts.$thumb && obj.opts.$orig ) {\r\n                    obj.opts.$thumb = obj.opts.$orig.find( 'img:first' );\r\n                }\r\n\r\n                if ( obj.opts.$thumb && !obj.opts.$thumb.length ) {\r\n                    delete obj.opts.$thumb;\r\n                }\r\n\r\n                // \"caption\" is a \"special\" option, it can be used to customize caption per gallery item ..\r\n                if ( $.type( obj.opts.caption ) === 'function' ) {\r\n                    obj.opts.caption = obj.opts.caption.apply( item, [ self, obj ] );\r\n                }\r\n\r\n                if ( $.type( self.opts.caption ) === 'function' ) {\r\n                    obj.opts.caption = self.opts.caption.apply( item, [ self, obj ] );\r\n                }\r\n\r\n                // Make sure we have caption as a string or jQuery object\r\n                if ( !( obj.opts.caption instanceof $ ) ) {\r\n                    obj.opts.caption = obj.opts.caption === undefined ? '' : obj.opts.caption + '';\r\n                }\r\n\r\n                // Check if url contains \"filter\" used to filter the content\r\n                // Example: \"ajax.html #something\"\r\n                if ( type === 'ajax' ) {\r\n                    srcParts = src.split(/\\s+/, 2);\r\n\r\n                    if ( srcParts.length > 1 ) {\r\n                        obj.src = srcParts.shift();\r\n\r\n                        obj.opts.filter = srcParts.shift();\r\n                    }\r\n                }\r\n\r\n                if ( obj.opts.smallBtn == 'auto' ) {\r\n\r\n                    if ( $.inArray( type, ['html', 'inline', 'ajax'] ) > -1 ) {\r\n                        obj.opts.toolbar  = false;\r\n                        obj.opts.smallBtn = true;\r\n\r\n                    } else {\r\n                        obj.opts.smallBtn = false;\r\n                    }\r\n\r\n                }\r\n\r\n                // If the type is \"pdf\", then simply load file into iframe\r\n                if ( type === 'pdf' ) {\r\n                    obj.type = 'iframe';\r\n\r\n                    obj.opts.iframe.preload = false;\r\n                }\r\n\r\n                // Hide all buttons and disable interactivity for modal items\r\n                if ( obj.opts.modal ) {\r\n\r\n                    obj.opts = $.extend(true, obj.opts, {\r\n                        // Remove buttons\r\n                        infobar : 0,\r\n                        toolbar : 0,\r\n\r\n                        smallBtn : 0,\r\n\r\n                        // Disable keyboard navigation\r\n                        keyboard : 0,\r\n\r\n                        // Disable some modules\r\n                        slideShow  : 0,\r\n                        fullScreen : 0,\r\n                        thumbs     : 0,\r\n                        touch      : 0,\r\n\r\n                        // Disable click event handlers\r\n                        clickContent    : false,\r\n                        clickSlide      : false,\r\n                        clickOutside    : false,\r\n                        dblclickContent : false,\r\n                        dblclickSlide   : false,\r\n                        dblclickOutside : false\r\n                    });\r\n\r\n                }\r\n\r\n                // Step 4 - Add processed object to group\r\n                // ======================================\r\n\r\n                self.group.push( obj );\r\n\r\n            });\r\n\r\n        },\r\n\r\n\r\n        // Attach an event handler functions for:\r\n        //   - navigation buttons\r\n        //   - browser scrolling, resizing;\r\n        //   - focusing\r\n        //   - keyboard\r\n        //   - detect idle\r\n        // ======================================\r\n\r\n        addEvents : function() {\r\n            var self = this;\r\n\r\n            self.removeEvents();\r\n\r\n            // Make navigation elements clickable\r\n            self.$refs.container.on('click.fb-close', '[data-fancybox-close]', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                self.close( e );\r\n\r\n            }).on( 'click.fb-prev touchend.fb-prev', '[data-fancybox-prev]', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                self.previous();\r\n\r\n            }).on( 'click.fb-next touchend.fb-next', '[data-fancybox-next]', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                self.next();\r\n\r\n            }).on( 'click.fb', '[data-fancybox-zoom]', function(e) {\r\n                // Click handler for zoom button\r\n                self[ self.isScaledDown() ? 'scaleToActual' : 'scaleToFit' ]();\r\n            });\r\n\r\n\r\n            // Handle page scrolling and browser resizing\r\n            $W.on('orientationchange.fb resize.fb', function(e) {\r\n\r\n                if ( e && e.originalEvent && e.originalEvent.type === \"resize\" ) {\r\n\r\n                    requestAFrame(function() {\r\n                        self.update();\r\n                    });\r\n\r\n                } else {\r\n\r\n                    self.$refs.stage.hide();\r\n\r\n                    setTimeout(function() {\r\n                        self.$refs.stage.show();\r\n\r\n                        self.update();\r\n                    }, 600);\r\n\r\n                }\r\n\r\n            });\r\n\r\n            // Trap keyboard focus inside of the modal, so the user does not accidentally tab outside of the modal\r\n            // (a.k.a. \"escaping the modal\")\r\n            $D.on('focusin.fb', function(e) {\r\n                var instance = $.fancybox ? $.fancybox.getInstance() : null;\r\n\r\n                if ( instance.isClosing || !instance.current || !instance.current.opts.trapFocus || $( e.target ).hasClass( 'fancybox-container' ) || $( e.target ).is( document ) ) {\r\n                    return;\r\n                }\r\n\r\n                if ( instance && $( e.target ).css( 'position' ) !== 'fixed' && !instance.$refs.container.has( e.target ).length ) {\r\n                    e.stopPropagation();\r\n\r\n                    instance.focus();\r\n\r\n                    // Sometimes page gets scrolled, set it back\r\n                    $W.scrollTop( self.scrollTop ).scrollLeft( self.scrollLeft );\r\n                }\r\n            });\r\n\r\n\r\n            // Enable keyboard navigation\r\n            $D.on('keydown.fb', function (e) {\r\n                var current = self.current,\r\n                    keycode = e.keyCode || e.which;\r\n\r\n                if ( !current || !current.opts.keyboard ) {\r\n                    return;\r\n                }\r\n\r\n                if ( $(e.target).is('input') || $(e.target).is('textarea') ) {\r\n                    return;\r\n                }\r\n\r\n                // Backspace and Esc keys\r\n                if ( keycode === 8 || keycode === 27 ) {\r\n                    e.preventDefault();\r\n\r\n                    self.close( e );\r\n\r\n                    return;\r\n                }\r\n\r\n                // Left arrow and Up arrow\r\n                if ( keycode === 37 || keycode === 38 ) {\r\n                    e.preventDefault();\r\n\r\n                    self.previous();\r\n\r\n                    return;\r\n                }\r\n\r\n                // Righ arrow and Down arrow\r\n                if ( keycode === 39 || keycode === 40 ) {\r\n                    e.preventDefault();\r\n\r\n                    self.next();\r\n\r\n                    return;\r\n                }\r\n\r\n                self.trigger('afterKeydown', e, keycode);\r\n            });\r\n\r\n\r\n            // Hide controls after some inactivity period\r\n            if ( self.group[ self.currIndex ].opts.idleTime ) {\r\n                self.idleSecondsCounter = 0;\r\n\r\n                $D.on('mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle', function(e) {\r\n                    self.idleSecondsCounter = 0;\r\n\r\n                    if ( self.isIdle ) {\r\n                        self.showControls();\r\n                    }\r\n\r\n                    self.isIdle = false;\r\n                });\r\n\r\n                self.idleInterval = window.setInterval(function() {\r\n                    self.idleSecondsCounter++;\r\n\r\n                    if ( self.idleSecondsCounter >= self.group[ self.currIndex ].opts.idleTime && !self.isDragging ) {\r\n                        self.isIdle = true;\r\n                        self.idleSecondsCounter = 0;\r\n\r\n                        self.hideControls();\r\n                    }\r\n\r\n                }, 1000);\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Remove events added by the core\r\n        // ===============================\r\n\r\n        removeEvents : function() {\r\n            var self = this;\r\n\r\n            $W.off( 'orientationchange.fb resize.fb' );\r\n            $D.off( 'focusin.fb keydown.fb .fb-idle' );\r\n\r\n            this.$refs.container.off( '.fb-close .fb-prev .fb-next' );\r\n\r\n            if ( self.idleInterval ) {\r\n                window.clearInterval( self.idleInterval );\r\n\r\n                self.idleInterval = null;\r\n            }\r\n        },\r\n\r\n\r\n        // Change to previous gallery item\r\n        // ===============================\r\n\r\n        previous : function( duration ) {\r\n            return this.jumpTo( this.currPos - 1, duration );\r\n        },\r\n\r\n\r\n        // Change to next gallery item\r\n        // ===========================\r\n\r\n        next : function( duration ) {\r\n            return this.jumpTo( this.currPos + 1, duration );\r\n        },\r\n\r\n\r\n        // Switch to selected gallery item\r\n        // ===============================\r\n\r\n        jumpTo : function ( pos, duration, slide ) {\r\n            var self = this,\r\n                firstRun,\r\n                loop,\r\n                current,\r\n                previous,\r\n                canvasWidth,\r\n                currentPos,\r\n                transitionProps;\r\n\r\n            var groupLen = self.group.length;\r\n\r\n            if ( self.isDragging || self.isClosing || ( self.isAnimating && self.firstRun ) ) {\r\n                return;\r\n            }\r\n\r\n            pos  = parseInt( pos, 10 );\r\n            loop = self.current ? self.current.opts.loop : self.opts.loop;\r\n\r\n            if ( !loop && ( pos < 0 || pos >= groupLen ) ) {\r\n                return false;\r\n            }\r\n\r\n            firstRun = self.firstRun = ( self.firstRun === null );\r\n\r\n            if ( groupLen < 2 && !firstRun && !!self.isDragging ) {\r\n                return;\r\n            }\r\n\r\n            previous = self.current;\r\n\r\n            self.prevIndex = self.currIndex;\r\n            self.prevPos   = self.currPos;\r\n\r\n            // Create slides\r\n            current = self.createSlide( pos );\r\n\r\n            if ( groupLen > 1 ) {\r\n                if ( loop || current.index > 0 ) {\r\n                    self.createSlide( pos - 1 );\r\n                }\r\n\r\n                if ( loop || current.index < groupLen - 1 ) {\r\n                    self.createSlide( pos + 1 );\r\n                }\r\n            }\r\n\r\n            self.current   = current;\r\n            self.currIndex = current.index;\r\n            self.currPos   = current.pos;\r\n\r\n            self.trigger( 'beforeShow', firstRun );\r\n\r\n            self.updateControls();\r\n\r\n            currentPos = $.fancybox.getTranslate( current.$slide );\r\n\r\n            current.isMoved        = ( currentPos.left !== 0 || currentPos.top !== 0 ) && !current.$slide.hasClass( 'fancybox-animated' );\r\n            current.forcedDuration = undefined;\r\n\r\n            if ( $.isNumeric( duration ) ) {\r\n                current.forcedDuration = duration;\r\n            } else {\r\n                duration = current.opts[ firstRun ? 'animationDuration' : 'transitionDuration' ];\r\n            }\r\n\r\n            duration = parseInt( duration, 10 );\r\n\r\n            // Fresh start - reveal container, current slide and start loading content\r\n            if ( firstRun ) {\r\n\r\n                if ( current.opts.animationEffect && duration ) {\r\n                    self.$refs.container.css( 'transition-duration', duration + 'ms' );\r\n                }\r\n\r\n                self.$refs.container.removeClass( 'fancybox-is-hidden' );\r\n\r\n                forceRedraw( self.$refs.container );\r\n\r\n                self.$refs.container.addClass( 'fancybox-is-open' );\r\n\r\n                // Make first slide visible (to display loading icon, if needed)\r\n                current.$slide.addClass( 'fancybox-slide--current' );\r\n\r\n                self.loadSlide( current );\r\n\r\n                self.preload( 'image' );\r\n\r\n                return;\r\n            }\r\n\r\n            // Clean up\r\n            $.each(self.slides, function( index, slide ) {\r\n                $.fancybox.stop( slide.$slide );\r\n            });\r\n\r\n            // Make current that slide is visible even if content is still loading\r\n            current.$slide.removeClass( 'fancybox-slide--next fancybox-slide--previous' ).addClass( 'fancybox-slide--current' );\r\n\r\n            // If slides have been dragged, animate them to correct position\r\n            if ( current.isMoved ) {\r\n                canvasWidth = Math.round( current.$slide.width() );\r\n\r\n                $.each(self.slides, function( index, slide ) {\r\n                    var pos = slide.pos - current.pos;\r\n\r\n                    $.fancybox.animate( slide.$slide, {\r\n                        top  : 0,\r\n                        left : ( pos * canvasWidth ) + ( pos * slide.opts.gutter )\r\n                    }, duration, function() {\r\n\r\n                        slide.$slide.removeAttr('style').removeClass( 'fancybox-slide--next fancybox-slide--previous' );\r\n\r\n                        if ( slide.pos === self.currPos ) {\r\n                            current.isMoved = false;\r\n\r\n                            self.complete();\r\n                        }\r\n                    });\r\n                });\r\n\r\n            } else {\r\n                self.$refs.stage.children().removeAttr( 'style' );\r\n            }\r\n\r\n            // Start transition that reveals current content\r\n            // or wait when it will be loaded\r\n\r\n            if ( current.isLoaded ) {\r\n                self.revealContent( current );\r\n\r\n            } else {\r\n                self.loadSlide( current );\r\n            }\r\n\r\n            self.preload( 'image' );\r\n\r\n            if ( previous.pos === current.pos ) {\r\n                return;\r\n            }\r\n\r\n            // Handle previous slide\r\n            // =====================\r\n\r\n            transitionProps = 'fancybox-slide--' + ( previous.pos > current.pos ? 'next' : 'previous' );\r\n\r\n            previous.$slide.removeClass( 'fancybox-slide--complete fancybox-slide--current fancybox-slide--next fancybox-slide--previous' );\r\n\r\n            previous.isComplete = false;\r\n\r\n            if ( !duration || ( !current.isMoved && !current.opts.transitionEffect ) ) {\r\n                return;\r\n            }\r\n\r\n            if ( current.isMoved ) {\r\n                previous.$slide.addClass( transitionProps );\r\n\r\n            } else {\r\n\r\n                transitionProps = 'fancybox-animated ' + transitionProps + ' fancybox-fx-' + current.opts.transitionEffect;\r\n\r\n                $.fancybox.animate( previous.$slide, transitionProps, duration, function() {\r\n                    previous.$slide.removeClass( transitionProps ).removeAttr( 'style' );\r\n                });\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Create new \"slide\" element\r\n        // These are gallery items  that are actually added to DOM\r\n        // =======================================================\r\n\r\n        createSlide : function( pos ) {\r\n\r\n            var self = this;\r\n            var $slide;\r\n            var index;\r\n\r\n            index = pos % self.group.length;\r\n            index = index < 0 ? self.group.length + index : index;\r\n\r\n            if ( !self.slides[ pos ] && self.group[ index ] ) {\r\n                $slide = $('<div class=\"fancybox-slide\"></div>').appendTo( self.$refs.stage );\r\n\r\n                self.slides[ pos ] = $.extend( true, {}, self.group[ index ], {\r\n                    pos      : pos,\r\n                    $slide   : $slide,\r\n                    isLoaded : false,\r\n                });\r\n\r\n                self.updateSlide( self.slides[ pos ] );\r\n            }\r\n\r\n            return self.slides[ pos ];\r\n        },\r\n\r\n\r\n        // Scale image to the actual size of the image\r\n        // ===========================================\r\n\r\n        scaleToActual : function( x, y, duration ) {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n\r\n            var imgPos, posX, posY, scaleX, scaleY;\r\n\r\n            var canvasWidth  = parseInt( current.$slide.width(), 10 );\r\n            var canvasHeight = parseInt( current.$slide.height(), 10 );\r\n\r\n            var newImgWidth  = current.width;\r\n            var newImgHeight = current.height;\r\n\r\n            if ( !( current.type == 'image' && !current.hasError) || !$what || self.isAnimating ) {\r\n                return;\r\n            }\r\n\r\n            $.fancybox.stop( $what );\r\n\r\n            self.isAnimating = true;\r\n\r\n            x = x === undefined ? canvasWidth  * 0.5  : x;\r\n            y = y === undefined ? canvasHeight * 0.5  : y;\r\n\r\n            imgPos = $.fancybox.getTranslate( $what );\r\n\r\n            scaleX  = newImgWidth  / imgPos.width;\r\n            scaleY  = newImgHeight / imgPos.height;\r\n\r\n            // Get center position for original image\r\n            posX = ( canvasWidth * 0.5  - newImgWidth * 0.5 );\r\n            posY = ( canvasHeight * 0.5 - newImgHeight * 0.5 );\r\n\r\n            // Make sure image does not move away from edges\r\n            if ( newImgWidth > canvasWidth ) {\r\n                posX = imgPos.left * scaleX - ( ( x * scaleX ) - x );\r\n\r\n                if ( posX > 0 ) {\r\n                    posX = 0;\r\n                }\r\n\r\n                if ( posX <  canvasWidth - newImgWidth ) {\r\n                    posX = canvasWidth - newImgWidth;\r\n                }\r\n            }\r\n\r\n            if ( newImgHeight > canvasHeight) {\r\n                posY = imgPos.top  * scaleY - ( ( y * scaleY ) - y );\r\n\r\n                if ( posY > 0 ) {\r\n                    posY = 0;\r\n                }\r\n\r\n                if ( posY <  canvasHeight - newImgHeight ) {\r\n                    posY = canvasHeight - newImgHeight;\r\n                }\r\n            }\r\n\r\n            self.updateCursor( newImgWidth, newImgHeight );\r\n\r\n            $.fancybox.animate( $what, {\r\n                top    : posY,\r\n                left   : posX,\r\n                scaleX : scaleX,\r\n                scaleY : scaleY\r\n            }, duration || 330, function() {\r\n                self.isAnimating = false;\r\n            });\r\n\r\n            // Stop slideshow\r\n            if ( self.SlideShow && self.SlideShow.isActive ) {\r\n                self.SlideShow.stop();\r\n            }\r\n        },\r\n\r\n\r\n        // Scale image to fit inside parent element\r\n        // ========================================\r\n\r\n        scaleToFit : function( duration ) {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n            var end;\r\n\r\n            if ( !( current.type == 'image' && !current.hasError) || !$what || self.isAnimating ) {\r\n                return;\r\n            }\r\n\r\n            $.fancybox.stop( $what );\r\n\r\n            self.isAnimating = true;\r\n\r\n            end = self.getFitPos( current );\r\n\r\n            self.updateCursor( end.width, end.height );\r\n\r\n            $.fancybox.animate( $what, {\r\n                top    : end.top,\r\n                left   : end.left,\r\n                scaleX : end.width  / $what.width(),\r\n                scaleY : end.height / $what.height()\r\n            }, duration || 330, function() {\r\n                self.isAnimating = false;\r\n            });\r\n\r\n        },\r\n\r\n        // Calculate image size to fit inside viewport\r\n        // ===========================================\r\n\r\n        getFitPos : function( slide ) {\r\n            var self  = this;\r\n            var $what = slide.$content;\r\n\r\n            var imgWidth  = slide.width;\r\n            var imgHeight = slide.height;\r\n\r\n            var margin = slide.opts.margin;\r\n\r\n            var canvasWidth, canvasHeight, minRatio, width, height;\r\n\r\n            if ( !$what || !$what.length || ( !imgWidth && !imgHeight) ) {\r\n                return false;\r\n            }\r\n\r\n            // Convert \"margin to CSS style: [ top, right, bottom, left ]\r\n            if ( $.type( margin ) === \"number\" ) {\r\n                margin = [ margin, margin ];\r\n            }\r\n\r\n            if ( margin.length == 2 ) {\r\n                margin = [ margin[0], margin[1], margin[0], margin[1] ];\r\n            }\r\n\r\n            // We can not use $slide width here, because it can have different diemensions while in transiton\r\n            canvasWidth  = parseInt( self.$refs.stage.width(), 10 )  - ( margin[ 1 ] + margin[ 3 ] );\r\n            canvasHeight = parseInt( self.$refs.stage.height(), 10 ) - ( margin[ 0 ] + margin[ 2 ] );\r\n\r\n            minRatio = Math.min(1, canvasWidth / imgWidth, canvasHeight / imgHeight );\r\n\r\n            width  = Math.floor( minRatio * imgWidth );\r\n            height = Math.floor( minRatio * imgHeight );\r\n\r\n            // Use floor rounding to make sure it really fits\r\n            return {\r\n                top    : Math.floor( ( canvasHeight - height ) * 0.5 ) + margin[ 0 ],\r\n                left   : Math.floor( ( canvasWidth  - width )  * 0.5 ) + margin[ 3 ],\r\n                width  : width,\r\n                height : height\r\n            };\r\n\r\n        },\r\n\r\n\r\n        // Update content size and position for all slides\r\n        // ==============================================\r\n\r\n        update : function() {\r\n            var self = this;\r\n\r\n            $.each( self.slides, function( key, slide ) {\r\n                self.updateSlide( slide );\r\n            });\r\n        },\r\n\r\n\r\n        // Update slide content position and size\r\n        // ======================================\r\n\r\n        updateSlide : function( slide, duration ) {\r\n            var self  = this,\r\n                $what = slide && slide.$content;\r\n\r\n            if ( $what && ( slide.width || slide.height ) ) {\r\n                self.isAnimating = false;\r\n\r\n                $.fancybox.stop( $what );\r\n\r\n                $.fancybox.setTranslate( $what, self.getFitPos( slide ) );\r\n\r\n                if ( slide.pos === self.currPos ) {\r\n                    self.updateCursor();\r\n                }\r\n            }\r\n\r\n            slide.$slide.trigger( 'refresh' );\r\n\r\n            self.trigger( 'onUpdate', slide );\r\n\r\n        },\r\n\r\n\r\n        // Horizontally center slide\r\n        // =========================\r\n\r\n        centerSlide : function( slide, duration ) {\r\n            var self  = this, canvasWidth, pos;\r\n\r\n            if ( self.current ) {\r\n                canvasWidth = Math.round( slide.$slide.width() );\r\n                pos = slide.pos - self.current.pos;\r\n\r\n                $.fancybox.animate( slide.$slide, {\r\n                    top  : 0,\r\n                    left : ( pos * canvasWidth ) + ( pos * slide.opts.gutter ),\r\n                    opacity : 1\r\n                }, duration === undefined ? 0 : duration, null, false);\r\n            }\r\n        },\r\n\r\n\r\n        // Update cursor style depending if content can be zoomed\r\n        // ======================================================\r\n\r\n        updateCursor : function( nextWidth, nextHeight ) {\r\n\r\n            var self = this;\r\n            var isScaledDown;\r\n\r\n            var $container = self.$refs.container.removeClass( 'fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-drag fancybox-can-zoomOut' );\r\n\r\n            if ( !self.current || self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            if ( self.isZoomable() ) {\r\n\r\n                $container.addClass( 'fancybox-is-zoomable' );\r\n\r\n                if ( nextWidth !== undefined && nextHeight !== undefined ) {\r\n                    isScaledDown = nextWidth < self.current.width && nextHeight < self.current.height;\r\n\r\n                } else {\r\n                    isScaledDown = self.isScaledDown();\r\n                }\r\n\r\n                if ( isScaledDown ) {\r\n\r\n                    // If image is scaled down, then, obviously, it can be zoomed to full size\r\n                    $container.addClass( 'fancybox-can-zoomIn' );\r\n\r\n                } else {\r\n\r\n                    if ( self.current.opts.touch ) {\r\n\r\n                        // If image size ir largen than available available and touch module is not disable,\r\n                        // then user can do panning\r\n                        $container.addClass( 'fancybox-can-drag' );\r\n\r\n                    } else {\r\n                        $container.addClass( 'fancybox-can-zoomOut' );\r\n                    }\r\n\r\n                }\r\n\r\n            } else if ( self.current.opts.touch ) {\r\n                $container.addClass( 'fancybox-can-drag' );\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Check if current slide is zoomable\r\n        // ==================================\r\n\r\n        isZoomable : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var fitPos;\r\n\r\n            if ( !current || self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            // Assume that slide is zoomable if\r\n            //   - image is loaded successfuly\r\n            //   - click action is \"zoom\"\r\n            //   - actual size of the image is smaller than available area\r\n            if ( current.type === 'image' && current.isLoaded && !current.hasError &&\r\n                ( current.opts.clickContent === 'zoom' || ( $.isFunction( current.opts.clickContent ) && current.opts.clickContent( current ) ===  \"zoom\" ) )\r\n            ) {\r\n\r\n                fitPos = self.getFitPos( current );\r\n\r\n                if ( current.width > fitPos.width || current.height > fitPos.height ) {\r\n                    return true;\r\n                }\r\n\r\n            }\r\n\r\n            return false;\r\n\r\n        },\r\n\r\n\r\n        // Check if current image dimensions are smaller than actual\r\n        // =========================================================\r\n\r\n        isScaledDown : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n\r\n            var rez = false;\r\n\r\n            if ( $what ) {\r\n                rez = $.fancybox.getTranslate( $what );\r\n                rez = rez.width < current.width || rez.height < current.height;\r\n            }\r\n\r\n            return rez;\r\n\r\n        },\r\n\r\n\r\n        // Check if image dimensions exceed parent element\r\n        // ===============================================\r\n\r\n        canPan : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n\r\n            var rez = false;\r\n\r\n            if ( $what ) {\r\n                rez = self.getFitPos( current );\r\n                rez = Math.abs( $what.width() - rez.width ) > 1  || Math.abs( $what.height() - rez.height ) > 1;\r\n            }\r\n\r\n            return rez;\r\n\r\n        },\r\n\r\n\r\n        // Load content into the slide\r\n        // ===========================\r\n\r\n        loadSlide : function( slide ) {\r\n\r\n            var self = this, type, $slide;\r\n            var ajaxLoad;\r\n\r\n            if ( slide.isLoading ) {\r\n                return;\r\n            }\r\n\r\n            if ( slide.isLoaded ) {\r\n                return;\r\n            }\r\n\r\n            slide.isLoading = true;\r\n\r\n            self.trigger( 'beforeLoad', slide );\r\n\r\n            type   = slide.type;\r\n            $slide = slide.$slide;\r\n\r\n            $slide\r\n                .off( 'refresh' )\r\n                .trigger( 'onReset' )\r\n                .addClass( 'fancybox-slide--' + ( type || 'unknown' ) )\r\n                .addClass( slide.opts.slideClass );\r\n\r\n            // Create content depending on the type\r\n\r\n            switch ( type ) {\r\n\r\n                case 'image':\r\n\r\n                    self.setImage( slide );\r\n\r\n                break;\r\n\r\n                case 'iframe':\r\n\r\n                    self.setIframe( slide );\r\n\r\n                break;\r\n\r\n                case 'html':\r\n\r\n                    self.setContent( slide, slide.src || slide.content );\r\n\r\n                break;\r\n\r\n                case 'inline':\r\n\r\n                    if ( $( slide.src ).length ) {\r\n                        self.setContent( slide, $( slide.src ) );\r\n\r\n                    } else {\r\n                        self.setError( slide );\r\n                    }\r\n\r\n                break;\r\n\r\n                case 'ajax':\r\n\r\n                    self.showLoading( slide );\r\n\r\n                    ajaxLoad = $.ajax( $.extend( {}, slide.opts.ajax.settings, {\r\n                        url : slide.src,\r\n                        success : function ( data, textStatus ) {\r\n\r\n                            if ( textStatus === 'success' ) {\r\n                                self.setContent( slide, data );\r\n                            }\r\n\r\n                        },\r\n                        error : function ( jqXHR, textStatus ) {\r\n\r\n                            if ( jqXHR && textStatus !== 'abort' ) {\r\n                                self.setError( slide );\r\n                            }\r\n\r\n                        }\r\n                    }));\r\n\r\n                    $slide.one( 'onReset', function () {\r\n                        ajaxLoad.abort();\r\n                    });\r\n\r\n                break;\r\n\r\n                case 'video' :\r\n\r\n                    self.setContent( slide,\r\n                        '<video controls>' +\r\n                          '<source src=\"' + slide.src + '\" type=\"' + slide.opts.videoFormat + '\">' +\r\n                            'Your browser doesn\\'t support HTML5 video' +\r\n                        '</video>'\r\n                    );\r\n\r\n                break;\r\n\r\n                default:\r\n\r\n                    self.setError( slide );\r\n\r\n                break;\r\n\r\n            }\r\n\r\n            return true;\r\n\r\n        },\r\n\r\n\r\n        // Use thumbnail image, if possible\r\n        // ================================\r\n\r\n        setImage : function( slide ) {\r\n\r\n            var self   = this;\r\n            var srcset = slide.opts.srcset || slide.opts.image.srcset;\r\n\r\n            var found, temp, pxRatio, windowWidth;\r\n\r\n            // If we have \"srcset\", then we need to find matching \"src\" value.\r\n            // This is necessary, because when you set an src attribute, the browser will preload the image\r\n            // before any javascript or even CSS is applied.\r\n            if ( srcset ) {\r\n                pxRatio     = window.devicePixelRatio || 1;\r\n                windowWidth = window.innerWidth  * pxRatio;\r\n\r\n                temp = srcset.split(',').map(function ( el ) {\r\n            \t\tvar ret = {};\r\n\r\n            \t\tel.trim().split(/\\s+/).forEach(function ( el, i ) {\r\n                        var value = parseInt( el.substring(0, el.length - 1), 10 );\r\n\r\n            \t\t\tif ( i === 0 ) {\r\n            \t\t\t\treturn ( ret.url = el );\r\n            \t\t\t}\r\n\r\n                        if ( value ) {\r\n                            ret.value   = value;\r\n                            ret.postfix = el[ el.length - 1 ];\r\n                        }\r\n\r\n            \t\t});\r\n\r\n            \t\treturn ret;\r\n            \t});\r\n\r\n                // Sort by value\r\n                temp.sort(function (a, b) {\r\n                  return a.value - b.value;\r\n                });\r\n\r\n                // Ok, now we have an array of all srcset values\r\n                for ( var j = 0; j < temp.length; j++ ) {\r\n                    var el = temp[ j ];\r\n\r\n                    if ( ( el.postfix === 'w' && el.value >= windowWidth ) || ( el.postfix === 'x' && el.value >= pxRatio ) ) {\r\n                        found = el;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // If not found, take the last one\r\n                if ( !found && temp.length ) {\r\n                    found = temp[ temp.length - 1 ];\r\n                }\r\n\r\n                if ( found ) {\r\n                    slide.src = found.url;\r\n\r\n                    // If we have default width/height values, we can calculate height for matching source\r\n                    if ( slide.width && slide.height && found.postfix == 'w' ) {\r\n                        slide.height = ( slide.width / slide.height ) * found.value;\r\n                        slide.width  = found.value;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // This will be wrapper containing both ghost and actual image\r\n            slide.$content = $('<div class=\"fancybox-image-wrap\"></div>')\r\n                .addClass( 'fancybox-is-hidden' )\r\n                .appendTo( slide.$slide );\r\n\r\n\r\n            // If we have a thumbnail, we can display it while actual image is loading\r\n            // Users will not stare at black screen and actual image will appear gradually\r\n            if ( slide.opts.preload !== false && slide.opts.width && slide.opts.height && ( slide.opts.thumb || slide.opts.$thumb ) ) {\r\n\r\n                slide.width  = slide.opts.width;\r\n                slide.height = slide.opts.height;\r\n\r\n                slide.$ghost = $('<img />')\r\n                    .one('error', function() {\r\n\r\n                        $(this).remove();\r\n\r\n                        slide.$ghost = null;\r\n\r\n                        self.setBigImage( slide );\r\n\r\n                    })\r\n                    .one('load', function() {\r\n\r\n                        self.afterLoad( slide );\r\n\r\n                        self.setBigImage( slide );\r\n\r\n                    })\r\n                    .addClass( 'fancybox-image' )\r\n                    .appendTo( slide.$content )\r\n                    .attr( 'src', slide.opts.thumb || slide.opts.$thumb.attr( 'src' ) );\r\n\r\n            } else {\r\n\r\n                self.setBigImage( slide );\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Create full-size image\r\n        // ======================\r\n\r\n        setBigImage : function ( slide ) {\r\n            var self = this;\r\n            var $img = $('<img />');\r\n\r\n            slide.$image = $img\r\n                .one('error', function() {\r\n\r\n                    self.setError( slide );\r\n\r\n                })\r\n                .one('load', function() {\r\n\r\n                    // Clear timeout that checks if loading icon needs to be displayed\r\n                    clearTimeout( slide.timouts );\r\n\r\n                    slide.timouts = null;\r\n\r\n                    if ( self.isClosing ) {\r\n                        return;\r\n                    }\r\n\r\n                    slide.width  = slide.opts.width  || this.naturalWidth;\r\n                    slide.height = slide.opts.height || this.naturalHeight;\r\n\r\n                    if ( slide.opts.image.srcset ) {\r\n                        $img.attr( 'sizes', '100vw' ).attr( 'srcset', slide.opts.image.srcset );\r\n                    }\r\n\r\n                    self.hideLoading( slide );\r\n\r\n                    if ( slide.$ghost ) {\r\n\r\n                        slide.timouts = setTimeout(function() {\r\n                            slide.timouts = null;\r\n\r\n                            slide.$ghost.hide();\r\n\r\n                        }, Math.min( 300, Math.max( 1000, slide.height / 1600 ) ) );\r\n\r\n                    } else {\r\n                        self.afterLoad( slide );\r\n                    }\r\n\r\n                })\r\n                .addClass( 'fancybox-image' )\r\n                .attr('src', slide.src)\r\n                .appendTo( slide.$content );\r\n\r\n            if ( ( $img[0].complete || $img[0].readyState == \"complete\" ) && $img[0].naturalWidth && $img[0].naturalHeight ) {\r\n                  $img.trigger( 'load' );\r\n\r\n            } else if( $img[0].error ) {\r\n                 $img.trigger( 'error' );\r\n\r\n            } else {\r\n\r\n                slide.timouts = setTimeout(function() {\r\n                    if ( !$img[0].complete && !slide.hasError ) {\r\n                        self.showLoading( slide );\r\n                    }\r\n\r\n                }, 100);\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Create iframe wrapper, iframe and bindings\r\n        // ==========================================\r\n\r\n        setIframe : function( slide ) {\r\n            var self\t= this,\r\n                opts    = slide.opts.iframe,\r\n                $slide\t= slide.$slide,\r\n                $iframe;\r\n\r\n            slide.$content = $('<div class=\"fancybox-content' + ( opts.preload ? ' fancybox-is-hidden' : '' ) + '\"></div>')\r\n                .css( opts.css )\r\n                .appendTo( $slide );\r\n\r\n            $iframe = $( opts.tpl.replace(/\\{rnd\\}/g, new Date().getTime()) )\r\n                .attr( opts.attr )\r\n                .appendTo( slide.$content );\r\n\r\n            if ( opts.preload ) {\r\n\r\n                self.showLoading( slide );\r\n\r\n                // Unfortunately, it is not always possible to determine if iframe is successfully loaded\r\n                // (due to browser security policy)\r\n\r\n                $iframe.on('load.fb error.fb', function(e) {\r\n                    this.isReady = 1;\r\n\r\n                    slide.$slide.trigger( 'refresh' );\r\n\r\n                    self.afterLoad( slide );\r\n                });\r\n\r\n                // Recalculate iframe content size\r\n                // ===============================\r\n\r\n                $slide.on('refresh.fb', function() {\r\n                    var $wrap = slide.$content,\r\n                        frameWidth  = opts.css.width,\r\n                        frameHeight = opts.css.height,\r\n                        scrollWidth,\r\n                        $contents,\r\n                        $body;\r\n\r\n                    if ( $iframe[0].isReady !== 1 ) {\r\n                        return;\r\n                    }\r\n\r\n                    // Check if content is accessible,\r\n                    // it will fail if frame is not with the same origin\r\n\r\n                    try {\r\n                        $contents = $iframe.contents();\r\n                        $body     = $contents.find('body');\r\n\r\n                    } catch (ignore) {}\r\n\r\n                    // Calculate dimensions for the wrapper\r\n                    if ( $body && $body.length ) {\r\n\r\n                        if ( frameWidth === undefined ) {\r\n                            scrollWidth = $iframe[0].contentWindow.document.documentElement.scrollWidth;\r\n\r\n                            frameWidth = Math.ceil( $body.outerWidth(true) + ( $wrap.width() - scrollWidth ) );\r\n                            frameWidth += $wrap.outerWidth() - $wrap.innerWidth();\r\n                        }\r\n\r\n                        if ( frameHeight === undefined ) {\r\n                            frameHeight = Math.ceil( $body.outerHeight(true) );\r\n                            frameHeight += $wrap.outerHeight() - $wrap.innerHeight();\r\n                        }\r\n\r\n                        // Resize wrapper to fit iframe content\r\n                        if ( frameWidth ) {\r\n                            $wrap.width( frameWidth );\r\n                        }\r\n\r\n                        if ( frameHeight ) {\r\n                            $wrap.height( frameHeight );\r\n                        }\r\n                    }\r\n\r\n                    $wrap.removeClass( 'fancybox-is-hidden' );\r\n\r\n                });\r\n\r\n            } else {\r\n\r\n                this.afterLoad( slide );\r\n\r\n            }\r\n\r\n            $iframe.attr( 'src', slide.src );\r\n\r\n            if ( slide.opts.smallBtn === true ) {\r\n                slide.$content.prepend( self.translate( slide, slide.opts.btnTpl.smallBtn ) );\r\n            }\r\n\r\n            // Remove iframe if closing or changing gallery item\r\n            $slide.one( 'onReset', function () {\r\n\r\n                // This helps IE not to throw errors when closing\r\n                try {\r\n\r\n                    $( this ).find( 'iframe' ).hide().attr( 'src', '//about:blank' );\r\n\r\n                } catch ( ignore ) {}\r\n\r\n                $( this ).empty();\r\n\r\n                slide.isLoaded = false;\r\n\r\n            });\r\n\r\n        },\r\n\r\n\r\n        // Wrap and append content to the slide\r\n        // ======================================\r\n\r\n        setContent : function ( slide, content ) {\r\n\r\n            var self = this;\r\n\r\n            if ( self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            self.hideLoading( slide );\r\n\r\n            slide.$slide.empty();\r\n\r\n            if ( isQuery( content ) && content.parent().length ) {\r\n\r\n                // If content is a jQuery object, then it will be moved to the slide.\r\n                // The placeholder is created so we will know where to put it back.\r\n                // If user is navigating gallery fast, then the content might be already inside fancyBox\r\n                // =====================================================================================\r\n\r\n                // Make sure content is not already moved to fancyBox\r\n                content.parent( '.fancybox-slide--inline' ).trigger( 'onReset' );\r\n\r\n                // Create temporary element marking original place of the content\r\n                slide.$placeholder = $( '<div></div>' ).hide().insertAfter( content );\r\n\r\n                // Make sure content is visible\r\n                content.css('display', 'inline-block');\r\n\r\n            } else if ( !slide.hasError ) {\r\n\r\n                // If content is just a plain text, try to convert it to html\r\n                if ( $.type( content ) === 'string' ) {\r\n                    content = $('<div>').append( $.trim( content ) ).contents();\r\n\r\n                    // If we have text node, then add wrapping element to make vertical alignment work\r\n                    if ( content[0].nodeType === 3 ) {\r\n                        content = $('<div>').html( content );\r\n                    }\r\n                }\r\n\r\n                // If \"filter\" option is provided, then filter content\r\n                if ( slide.opts.filter ) {\r\n                    content = $('<div>').html( content ).find( slide.opts.filter );\r\n                }\r\n\r\n            }\r\n\r\n            slide.$slide.one('onReset', function () {\r\n\r\n                // Pause all html5 video/audio\r\n                $( this ).find( 'video,audio' ).trigger( 'pause' );\r\n\r\n                // Put content back\r\n                if ( slide.$placeholder ) {\r\n                    slide.$placeholder.after( content.hide() ).remove();\r\n\r\n                    slide.$placeholder = null;\r\n                }\r\n\r\n                // Remove custom close button\r\n                if ( slide.$smallBtn ) {\r\n                    slide.$smallBtn.remove();\r\n\r\n                    slide.$smallBtn = null;\r\n                }\r\n\r\n                // Remove content and mark slide as not loaded\r\n                if ( !slide.hasError ) {\r\n                    $(this).empty();\r\n\r\n                    slide.isLoaded = false;\r\n                }\r\n\r\n            });\r\n\r\n            slide.$content = $( content ).appendTo( slide.$slide );\r\n\r\n            this.afterLoad( slide );\r\n        },\r\n\r\n        // Display error message\r\n        // =====================\r\n\r\n        setError : function ( slide ) {\r\n\r\n            slide.hasError = true;\r\n\r\n            slide.$slide.removeClass( 'fancybox-slide--' + slide.type );\r\n\r\n            this.setContent( slide, this.translate( slide, slide.opts.errorTpl ) );\r\n\r\n        },\r\n\r\n\r\n        // Show loading icon inside the slide\r\n        // ==================================\r\n\r\n        showLoading : function( slide ) {\r\n\r\n            var self = this;\r\n\r\n            slide = slide || self.current;\r\n\r\n            if ( slide && !slide.$spinner ) {\r\n                slide.$spinner = $( self.opts.spinnerTpl ).appendTo( slide.$slide );\r\n            }\r\n\r\n        },\r\n\r\n        // Remove loading icon from the slide\r\n        // ==================================\r\n\r\n        hideLoading : function( slide ) {\r\n\r\n            var self = this;\r\n\r\n            slide = slide || self.current;\r\n\r\n            if ( slide && slide.$spinner ) {\r\n                slide.$spinner.remove();\r\n\r\n                delete slide.$spinner;\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Adjustments after slide content has been loaded\r\n        // ===============================================\r\n\r\n        afterLoad : function( slide ) {\r\n\r\n            var self = this;\r\n\r\n            if ( self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            slide.isLoading = false;\r\n            slide.isLoaded  = true;\r\n\r\n            self.trigger( 'afterLoad', slide );\r\n\r\n            self.hideLoading( slide );\r\n\r\n            if ( slide.opts.smallBtn && !slide.$smallBtn ) {\r\n                slide.$smallBtn = $( self.translate( slide, slide.opts.btnTpl.smallBtn ) ).appendTo( slide.$content.filter('div,form').first() );\r\n            }\r\n\r\n            if ( slide.opts.protect && slide.$content && !slide.hasError ) {\r\n\r\n                // Disable right click\r\n                slide.$content.on( 'contextmenu.fb', function( e ) {\r\n                     if ( e.button == 2 ) {\r\n                         e.preventDefault();\r\n                     }\r\n\r\n                    return true;\r\n                });\r\n\r\n                // Add fake element on top of the image\r\n                // This makes a bit harder for user to select image\r\n                if ( slide.type === 'image' ) {\r\n                    $( '<div class=\"fancybox-spaceball\"></div>' ).appendTo( slide.$content );\r\n                }\r\n\r\n            }\r\n\r\n            self.revealContent( slide );\r\n\r\n        },\r\n\r\n\r\n        // Make content visible\r\n        // This method is called right after content has been loaded or\r\n        // user navigates gallery and transition should start\r\n        // ============================================================\r\n\r\n        revealContent : function( slide ) {\r\n\r\n            var self   = this;\r\n            var $slide = slide.$slide;\r\n\r\n            var effect, effectClassName, duration, opacity, end, start = false;\r\n\r\n            effect   = slide.opts[ self.firstRun ? 'animationEffect'   : 'transitionEffect' ];\r\n            duration = slide.opts[ self.firstRun ? 'animationDuration' : 'transitionDuration' ];\r\n\r\n            duration = parseInt( slide.forcedDuration === undefined ? duration : slide.forcedDuration, 10 );\r\n\r\n            if ( slide.isMoved || slide.pos !== self.currPos || !duration ) {\r\n                effect = false;\r\n            }\r\n\r\n            // Check if can zoom\r\n            if ( effect === 'zoom' && !( slide.pos === self.currPos && duration && slide.type === 'image' && !slide.hasError && ( start = self.getThumbPos( slide ) ) ) ) {\r\n                effect = 'fade';\r\n            }\r\n\r\n            // Zoom animation\r\n            // ==============\r\n\r\n            if ( effect === 'zoom' ) {\r\n                end = self.getFitPos( slide );\r\n\r\n                end.scaleX = end.width  / start.width;\r\n                end.scaleY = end.height / start.height;\r\n\r\n                delete end.width;\r\n                delete end.height;\r\n\r\n                // Check if we need to animate opacity\r\n                opacity = slide.opts.zoomOpacity;\r\n\r\n                if ( opacity == 'auto' ) {\r\n                    opacity = Math.abs( slide.width / slide.height - start.width / start.height ) > 0.1;\r\n                }\r\n\r\n                if ( opacity ) {\r\n                    start.opacity = 0.1;\r\n                    end.opacity   = 1;\r\n                }\r\n\r\n                // Draw image at start position\r\n                $.fancybox.setTranslate( slide.$content.removeClass( 'fancybox-is-hidden' ), start );\r\n\r\n                forceRedraw( slide.$content );\r\n\r\n                // Start animation\r\n                $.fancybox.animate( slide.$content, end, duration, function() {\r\n                    self.complete();\r\n                });\r\n\r\n                return;\r\n            }\r\n\r\n            self.updateSlide( slide );\r\n\r\n\r\n            // Simply show content\r\n            // ===================\r\n\r\n            if ( !effect ) {\r\n                forceRedraw( $slide );\r\n\r\n                slide.$content.removeClass( 'fancybox-is-hidden' );\r\n\r\n                if ( slide.pos === self.currPos ) {\r\n                    self.complete();\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            $.fancybox.stop( $slide );\r\n\r\n            effectClassName = 'fancybox-animated fancybox-slide--' + ( slide.pos >= self.prevPos ? 'next' : 'previous' ) + ' fancybox-fx-' + effect;\r\n\r\n            $slide.removeAttr( 'style' ).removeClass( 'fancybox-slide--current fancybox-slide--next fancybox-slide--previous' ).addClass( effectClassName );\r\n\r\n            slide.$content.removeClass( 'fancybox-is-hidden' );\r\n\r\n            //Force reflow for CSS3 transitions\r\n            forceRedraw( $slide );\r\n\r\n            $.fancybox.animate( $slide, 'fancybox-slide--current', duration, function(e) {\r\n                $slide.removeClass( effectClassName ).removeAttr( 'style' );\r\n\r\n                if ( slide.pos === self.currPos ) {\r\n                    self.complete();\r\n                }\r\n\r\n            }, true);\r\n\r\n        },\r\n\r\n\r\n        // Check if we can and have to zoom from thumbnail\r\n        //================================================\r\n\r\n        getThumbPos : function( slide ) {\r\n\r\n            var self = this;\r\n            var rez  = false;\r\n\r\n            // Check if element is inside the viewport by at least 1 pixel\r\n            var isElementVisible = function( $el ) {\r\n                var element = $el[0];\r\n\r\n                var elementRect = element.getBoundingClientRect();\r\n                var parentRects = [];\r\n\r\n                var visibleInAllParents;\r\n\r\n                while ( element.parentElement !== null ) {\r\n                    if ( $(element.parentElement).css('overflow') === 'hidden'  || $(element.parentElement).css('overflow') === 'auto' ) {\r\n                        parentRects.push(element.parentElement.getBoundingClientRect());\r\n                    }\r\n\r\n                    element = element.parentElement;\r\n                }\r\n\r\n                visibleInAllParents = parentRects.every(function(parentRect){\r\n                    var visiblePixelX = Math.min(elementRect.right, parentRect.right) - Math.max(elementRect.left, parentRect.left);\r\n                    var visiblePixelY = Math.min(elementRect.bottom, parentRect.bottom) - Math.max(elementRect.top, parentRect.top);\r\n\r\n                    return visiblePixelX > 0 && visiblePixelY > 0;\r\n                });\r\n\r\n                return visibleInAllParents &&\r\n                    elementRect.bottom > 0 && elementRect.right > 0 &&\r\n                    elementRect.left < $(window).width() && elementRect.top < $(window).height();\r\n            };\r\n\r\n            var $thumb   = slide.opts.$thumb;\r\n            var thumbPos = $thumb ? $thumb.offset() : 0;\r\n            var slidePos;\r\n\r\n            if ( thumbPos && $thumb[0].ownerDocument === document && isElementVisible( $thumb ) ) {\r\n                slidePos = self.$refs.stage.offset();\r\n\r\n                rez = {\r\n                    top    : thumbPos.top  - slidePos.top  + parseFloat( $thumb.css( \"border-top-width\" ) || 0 ),\r\n                    left   : thumbPos.left - slidePos.left + parseFloat( $thumb.css( \"border-left-width\" ) || 0 ),\r\n                    width  : $thumb.width(),\r\n                    height : $thumb.height(),\r\n                    scaleX : 1,\r\n                    scaleY : 1\r\n                };\r\n            }\r\n\r\n            return rez;\r\n        },\r\n\r\n\r\n        // Final adjustments after current gallery item is moved to position\r\n        // and it`s content is loaded\r\n        // ==================================================================\r\n\r\n        complete : function() {\r\n            var self = this,\r\n                current = self.current,\r\n                slides  = {},\r\n                promise;\r\n\r\n            if ( current.isMoved || !current.isLoaded || current.isComplete ) {\r\n                return;\r\n            }\r\n\r\n            current.isComplete = true;\r\n\r\n            current.$slide.siblings().trigger( 'onReset' );\r\n\r\n            self.preload( 'inline' );\r\n\r\n            // Trigger any CSS3 transiton inside the slide\r\n            forceRedraw( current.$slide );\r\n\r\n            current.$slide.addClass( 'fancybox-slide--complete' );\r\n\r\n            // Remove unnecessary slides\r\n            $.each( self.slides, function( key, slide ) {\r\n                if ( slide.pos >= self.currPos - 1 && slide.pos <= self.currPos + 1 ) {\r\n                    slides[ slide.pos ] = slide;\r\n\r\n                } else if ( slide ) {\r\n                    $.fancybox.stop( slide.$slide );\r\n\r\n                    slide.$slide.off().remove();\r\n                }\r\n            });\r\n\r\n            self.slides = slides;\r\n\r\n            self.updateCursor();\r\n\r\n            self.trigger( 'afterShow' );\r\n\r\n            // Play first html5 video/audio\r\n            current.$slide.find( 'video,audio' ).first().trigger( 'play' );\r\n\r\n            // Try to focus on the first focusable element\r\n            if ( $( document.activeElement ).is( '[disabled]' ) || ( current.opts.autoFocus && !( current.type == 'image' || current.type === 'iframe' ) ) ) {\r\n                self.focus();\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Preload next and previous slides\r\n        // ================================\r\n\r\n        preload : function( type ) {\r\n            var self = this,\r\n                next = self.slides[ self.currPos + 1 ],\r\n                prev = self.slides[ self.currPos - 1 ];\r\n\r\n            if ( next && next.type === type ) {\r\n                self.loadSlide( next );\r\n            }\r\n\r\n            if ( prev && prev.type === type ) {\r\n                self.loadSlide( prev );\r\n            }\r\n        },\r\n\r\n\r\n        // Try to find and focus on the first focusable element\r\n        // ====================================================\r\n\r\n        focus : function() {\r\n            var current = this.current;\r\n            var $el;\r\n\r\n            if ( this.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            if ( current && current.isComplete ) {\r\n\r\n                // Look for first input with autofocus attribute\r\n                $el = current.$slide.find('input[autofocus]:enabled:visible:first');\r\n\r\n                if ( !$el.length ) {\r\n                    $el = current.$slide.find('button,:input,[tabindex],a').filter(':enabled:visible:first');\r\n                }\r\n            }\r\n\r\n            $el = $el && $el.length ? $el : this.$refs.container;\r\n\r\n            $el.focus();\r\n        },\r\n\r\n\r\n        // Activates current instance - brings container to the front and enables keyboard,\r\n        // notifies other instances about deactivating\r\n        // =================================================================================\r\n\r\n        activate : function () {\r\n            var self = this;\r\n\r\n            // Deactivate all instances\r\n            $( '.fancybox-container' ).each(function () {\r\n                var instance = $(this).data( 'FancyBox' );\r\n\r\n                // Skip self and closing instances\r\n                if (instance && instance.id !== self.id && !instance.isClosing) {\r\n                    instance.trigger( 'onDeactivate' );\r\n\r\n                    instance.removeEvents();\r\n\r\n                    instance.isVisible = false;\r\n                }\r\n\r\n            });\r\n\r\n            self.isVisible = true;\r\n\r\n            if ( self.current || self.isIdle ) {\r\n                self.update();\r\n\r\n                self.updateControls();\r\n            }\r\n\r\n            self.trigger( 'onActivate' );\r\n\r\n            self.addEvents();\r\n        },\r\n\r\n\r\n        // Start closing procedure\r\n        // This will start \"zoom-out\" animation if needed and clean everything up afterwards\r\n        // =================================================================================\r\n\r\n        close : function( e, d ) {\r\n\r\n            var self    = this;\r\n            var current = self.current;\r\n\r\n            var effect, duration;\r\n            var $what, opacity, start, end;\r\n\r\n            var done = function() {\r\n                self.cleanUp( e );\r\n            };\r\n\r\n            if ( self.isClosing ) {\r\n                return false;\r\n            }\r\n\r\n            self.isClosing = true;\r\n\r\n            // If beforeClose callback prevents closing, make sure content is centered\r\n            if ( self.trigger( 'beforeClose', e ) === false ) {\r\n                self.isClosing = false;\r\n\r\n                requestAFrame(function() {\r\n                    self.update();\r\n                });\r\n\r\n                return false;\r\n            }\r\n\r\n            // Remove all events\r\n            // If there are multiple instances, they will be set again by \"activate\" method\r\n            self.removeEvents();\r\n\r\n            if ( current.timouts ) {\r\n                clearTimeout( current.timouts );\r\n            }\r\n\r\n            $what    = current.$content;\r\n            effect   = current.opts.animationEffect;\r\n            duration = $.isNumeric( d ) ? d : ( effect ? current.opts.animationDuration : 0 );\r\n\r\n            // Remove other slides\r\n            current.$slide.off( transitionEnd ).removeClass( 'fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated' );\r\n\r\n            current.$slide.siblings().trigger( 'onReset' ).remove();\r\n\r\n            // Trigger animations\r\n            if ( duration ) {\r\n                self.$refs.container.removeClass( 'fancybox-is-open' ).addClass( 'fancybox-is-closing' );\r\n            }\r\n\r\n            // Clean up\r\n            self.hideLoading( current );\r\n\r\n            self.hideControls();\r\n\r\n            self.updateCursor();\r\n\r\n            // Check if possible to zoom-out\r\n            if ( effect === 'zoom' && !( e !== true && $what && duration && current.type === 'image' && !current.hasError && ( end = self.getThumbPos( current ) ) ) ) {\r\n                effect = 'fade';\r\n            }\r\n\r\n            if ( effect === 'zoom' ) {\r\n                $.fancybox.stop( $what );\r\n\r\n                start = $.fancybox.getTranslate( $what );\r\n\r\n                start.width  = start.width  * start.scaleX;\r\n                start.height = start.height * start.scaleY;\r\n\r\n                // Check if we need to animate opacity\r\n                opacity = current.opts.zoomOpacity;\r\n\r\n                if ( opacity == 'auto' ) {\r\n                    opacity = Math.abs( current.width / current.height - end.width / end.height ) > 0.1;\r\n                }\r\n\r\n                if ( opacity ) {\r\n                    end.opacity = 0;\r\n                }\r\n\r\n                start.scaleX = start.width  / end.width;\r\n                start.scaleY = start.height / end.height;\r\n\r\n                start.width  = end.width;\r\n                start.height = end.height;\r\n\r\n                $.fancybox.setTranslate( current.$content, start );\r\n\r\n                forceRedraw( current.$content );\r\n\r\n                $.fancybox.animate( current.$content, end, duration, done );\r\n\r\n                return true;\r\n            }\r\n\r\n            if ( effect && duration ) {\r\n\r\n                // If skip animation\r\n                if ( e === true ) {\r\n                    setTimeout( done, duration );\r\n\r\n                } else {\r\n                    $.fancybox.animate( current.$slide.removeClass( 'fancybox-slide--current' ), 'fancybox-animated fancybox-slide--previous fancybox-fx-' + effect, duration, done );\r\n                }\r\n\r\n            } else {\r\n                done();\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n\r\n        // Final adjustments after removing the instance\r\n        // =============================================\r\n\r\n        cleanUp : function( e ) {\r\n            var self  = this,\r\n                $body = $( 'body' ),\r\n                instance,\r\n                offset;\r\n\r\n            self.current.$slide.trigger( 'onReset' );\r\n\r\n            self.$refs.container.empty().remove();\r\n\r\n            self.trigger( 'afterClose', e );\r\n\r\n            // Place back focus\r\n            if ( self.$lastFocus && !!self.current.opts.backFocus ) {\r\n                self.$lastFocus.focus();\r\n            }\r\n\r\n            self.current = null;\r\n\r\n            // Check if there are other instances\r\n            instance = $.fancybox.getInstance();\r\n\r\n            if ( instance ) {\r\n                instance.activate();\r\n\r\n            } else {\r\n\r\n                $W.scrollTop( self.scrollTop ).scrollLeft( self.scrollLeft );\r\n\r\n                $body.removeClass( 'fancybox-active compensate-for-scrollbar' );\r\n\r\n                if ( $body.hasClass( 'fancybox-iosfix' ) ) {\r\n                    offset = parseInt(document.body.style.top, 10);\r\n\r\n                    $body.removeClass( 'fancybox-iosfix' ).css( 'top', '' ).scrollTop( offset * -1 );\r\n                }\r\n\r\n                $( '#fancybox-style-noscroll' ).remove();\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Call callback and trigger an event\r\n        // ==================================\r\n\r\n        trigger : function( name, slide ) {\r\n            var args  = Array.prototype.slice.call(arguments, 1),\r\n                self  = this,\r\n                obj   = slide && slide.opts ? slide : self.current,\r\n                rez;\r\n\r\n            if ( obj ) {\r\n                args.unshift( obj );\r\n\r\n            } else {\r\n                obj = self;\r\n            }\r\n\r\n            args.unshift( self );\r\n\r\n            if ( $.isFunction( obj.opts[ name ] ) ) {\r\n                rez = obj.opts[ name ].apply( obj, args );\r\n            }\r\n\r\n            if ( rez === false ) {\r\n                return rez;\r\n            }\r\n\r\n            if ( name === 'afterClose' || !self.$refs ) {\r\n                $D.trigger( name + '.fb', args );\r\n\r\n            } else {\r\n                self.$refs.container.trigger( name + '.fb', args );\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Update infobar values, navigation button states and reveal caption\r\n        // ==================================================================\r\n\r\n        updateControls : function ( force ) {\r\n\r\n            var self = this;\r\n\r\n            var current  = self.current,\r\n                index    = current.index,\r\n                caption  = current.opts.caption,\r\n                $container = self.$refs.container,\r\n                $caption   = self.$refs.caption;\r\n\r\n            // Recalculate content dimensions\r\n            current.$slide.trigger( 'refresh' );\r\n\r\n            self.$caption = caption && caption.length ? $caption.html( caption ) : null;\r\n\r\n            if ( !self.isHiddenControls && !self.isIdle ) {\r\n                self.showControls();\r\n            }\r\n\r\n            // Update info and navigation elements\r\n            $container.find('[data-fancybox-count]').html( self.group.length );\r\n            $container.find('[data-fancybox-index]').html( index + 1 );\r\n\r\n            $container.find('[data-fancybox-prev]').prop( 'disabled', ( !current.opts.loop && index <= 0 ) );\r\n            $container.find('[data-fancybox-next]').prop( 'disabled', ( !current.opts.loop && index >= self.group.length - 1 ) );\r\n\r\n            if ( current.type === 'image' ) {\r\n\r\n                // Update download button source\r\n                $container.find('[data-fancybox-download]').attr( 'href', current.opts.image.src || current.src ).show();\r\n\r\n            } else {\r\n                $container.find('[data-fancybox-download],[data-fancybox-zoom]').hide();\r\n            }\r\n        },\r\n\r\n        // Hide toolbar and caption\r\n        // ========================\r\n\r\n        hideControls : function () {\r\n\r\n            this.isHiddenControls = true;\r\n\r\n            this.$refs.container.removeClass( 'fancybox-show-infobar fancybox-show-toolbar fancybox-show-caption fancybox-show-nav' );\r\n\r\n        },\r\n\r\n        showControls : function() {\r\n            var self = this;\r\n            var opts = self.current ? self.current.opts : self.opts;\r\n            var $container = self.$refs.container;\r\n\r\n            self.isHiddenControls   = false;\r\n            self.idleSecondsCounter = 0;\r\n\r\n            $container\r\n                .toggleClass( 'fancybox-show-toolbar', !!( opts.toolbar && opts.buttons ) )\r\n                .toggleClass( 'fancybox-show-infobar', !!( opts.infobar && self.group.length > 1 ) )\r\n                .toggleClass( 'fancybox-show-nav',     !!( opts.arrows && self.group.length > 1 ) )\r\n                .toggleClass( 'fancybox-is-modal',     !!opts.modal );\r\n\r\n            if ( self.$caption ) {\r\n                $container.addClass( 'fancybox-show-caption ');\r\n\r\n            } else {\r\n               $container.removeClass( 'fancybox-show-caption' );\r\n           }\r\n\r\n       },\r\n\r\n\r\n       // Toggle toolbar and caption\r\n       // ==========================\r\n\r\n       toggleControls : function() {\r\n           if ( this.isHiddenControls ) {\r\n               this.showControls();\r\n\r\n           } else {\r\n               this.hideControls();\r\n           }\r\n\r\n       },\r\n\r\n\r\n    });\r\n\r\n\r\n    $.fancybox = {\r\n\r\n        version  : \"3.2.10\",\r\n        defaults : defaults,\r\n\r\n\r\n        // Get current instance and execute a command.\r\n        //\r\n        // Examples of usage:\r\n        //\r\n        //   $instance = $.fancybox.getInstance();\r\n        //   $.fancybox.getInstance().jumpTo( 1 );\r\n        //   $.fancybox.getInstance( 'jumpTo', 1 );\r\n        //   $.fancybox.getInstance( function() {\r\n        //       console.info( this.currIndex );\r\n        //   });\r\n        // ======================================================\r\n\r\n        getInstance : function ( command ) {\r\n            var instance = $('.fancybox-container:not(\".fancybox-is-closing\"):last').data( 'FancyBox' );\r\n            var args     = Array.prototype.slice.call(arguments, 1);\r\n\r\n            if ( instance instanceof FancyBox ) {\r\n\r\n                if ( $.type( command ) === 'string' ) {\r\n                    instance[ command ].apply( instance, args );\r\n\r\n                } else if ( $.type( command ) === 'function' ) {\r\n                    command.apply( instance, args );\r\n                }\r\n\r\n                return instance;\r\n            }\r\n\r\n            return false;\r\n\r\n        },\r\n\r\n\r\n        // Create new instance\r\n        // ===================\r\n\r\n        open : function ( items, opts, index ) {\r\n            return new FancyBox( items, opts, index );\r\n        },\r\n\r\n\r\n        // Close current or all instances\r\n        // ==============================\r\n\r\n        close : function ( all ) {\r\n            var instance = this.getInstance();\r\n\r\n            if ( instance ) {\r\n                instance.close();\r\n\r\n                // Try to find and close next instance\r\n\r\n                if ( all === true ) {\r\n                    this.close();\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        // Close instances and unbind all events\r\n        // ==============================\r\n\r\n        destroy : function() {\r\n\r\n            this.close( true );\r\n\r\n            $D.off( 'click.fb-start' );\r\n\r\n        },\r\n\r\n\r\n        // Try to detect mobile devices\r\n        // ============================\r\n\r\n        isMobile : document.createTouch !== undefined && /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),\r\n\r\n\r\n        // Detect if 'translate3d' support is available\r\n        // ============================================\r\n\r\n        use3d : (function() {\r\n            var div = document.createElement('div');\r\n\r\n            return window.getComputedStyle && window.getComputedStyle( div ).getPropertyValue('transform') && !(document.documentMode && document.documentMode < 11);\r\n        }()),\r\n\r\n        // Helper function to get current visual state of an element\r\n        // returns array[ top, left, horizontal-scale, vertical-scale, opacity ]\r\n        // =====================================================================\r\n\r\n        getTranslate : function( $el ) {\r\n            var matrix;\r\n\r\n            if ( !$el || !$el.length ) {\r\n                return false;\r\n            }\r\n\r\n            matrix  = $el.eq( 0 ).css('transform');\r\n\r\n            if ( matrix && matrix.indexOf( 'matrix' ) !== -1 ) {\r\n                matrix = matrix.split('(')[1];\r\n                matrix = matrix.split(')')[0];\r\n                matrix = matrix.split(',');\r\n            } else {\r\n                matrix = [];\r\n            }\r\n\r\n            if ( matrix.length ) {\r\n\r\n                // If IE\r\n                if ( matrix.length > 10 ) {\r\n                    matrix = [ matrix[13], matrix[12], matrix[0], matrix[5] ];\r\n\r\n                } else {\r\n                    matrix = [ matrix[5], matrix[4], matrix[0], matrix[3]];\r\n                }\r\n\r\n                matrix = matrix.map(parseFloat);\r\n\r\n            } else {\r\n                matrix = [ 0, 0, 1, 1 ];\r\n\r\n                var transRegex = /\\.*translate\\((.*)px,(.*)px\\)/i;\r\n                var transRez = transRegex.exec( $el.eq( 0 ).attr('style') );\r\n\r\n                if ( transRez ) {\r\n                    matrix[ 0 ] = parseFloat( transRez[2] );\r\n                    matrix[ 1 ] = parseFloat( transRez[1] );\r\n                }\r\n            }\r\n\r\n            return {\r\n                top     : matrix[ 0 ],\r\n                left    : matrix[ 1 ],\r\n                scaleX  : matrix[ 2 ],\r\n                scaleY  : matrix[ 3 ],\r\n                opacity : parseFloat( $el.css('opacity') ),\r\n                width   : $el.width(),\r\n                height  : $el.height()\r\n            };\r\n\r\n        },\r\n\r\n\r\n        // Shortcut for setting \"translate3d\" properties for element\r\n        // Can set be used to set opacity, too\r\n        // ========================================================\r\n\r\n        setTranslate : function( $el, props ) {\r\n            var str  = '';\r\n            var css  = {};\r\n\r\n            if ( !$el || !props ) {\r\n                return;\r\n            }\r\n\r\n            if ( props.left !== undefined || props.top !== undefined ) {\r\n                str = ( props.left === undefined ? $el.position().left : props.left )  + 'px, ' + ( props.top === undefined ? $el.position().top : props.top ) + 'px';\r\n\r\n                if ( this.use3d ) {\r\n                    str = 'translate3d(' + str + ', 0px)';\r\n\r\n                } else {\r\n                    str = 'translate(' + str + ')';\r\n                }\r\n            }\r\n\r\n            if ( props.scaleX !== undefined && props.scaleY !== undefined ) {\r\n                str = (str.length ? str + ' ' : '') + 'scale(' + props.scaleX + ', ' + props.scaleY + ')';\r\n            }\r\n\r\n            if ( str.length ) {\r\n                css.transform = str;\r\n            }\r\n\r\n            if ( props.opacity !== undefined ) {\r\n                css.opacity = props.opacity;\r\n            }\r\n\r\n            if ( props.width !== undefined ) {\r\n                css.width = props.width;\r\n            }\r\n\r\n            if ( props.height !== undefined ) {\r\n                css.height = props.height;\r\n            }\r\n\r\n            return $el.css( css );\r\n        },\r\n\r\n\r\n        // Simple CSS transition handler\r\n        // =============================\r\n\r\n        animate : function ( $el, to, duration, callback, leaveAnimationName ) {\r\n            if ( $.isFunction( duration ) ) {\r\n                callback = duration;\r\n                duration = null;\r\n            }\r\n\r\n            if ( !$.isPlainObject( to ) ) {\r\n                $el.removeAttr( 'style' );\r\n            }\r\n\r\n            $el.on( transitionEnd, function(e) {\r\n\r\n                // Skip events from child elements and z-index change\r\n                if ( e && e.originalEvent && ( !$el.is( e.originalEvent.target ) || e.originalEvent.propertyName == 'z-index' ) ) {\r\n                    return;\r\n                }\r\n\r\n                $.fancybox.stop( $el );\r\n\r\n                if ( $.isPlainObject( to ) ) {\r\n\r\n                    if ( to.scaleX !== undefined && to.scaleY !== undefined ) {\r\n                        $el.css( 'transition-duration', '' );\r\n\r\n                        to.width  = Math.round( $el.width()  * to.scaleX );\r\n                        to.height = Math.round( $el.height() * to.scaleY );\r\n\r\n                        to.scaleX = 1;\r\n                        to.scaleY = 1;\r\n\r\n                        $.fancybox.setTranslate( $el, to );\r\n                    }\r\n\r\n                    if ( leaveAnimationName === false ) {\r\n                        $el.removeAttr( 'style' );\r\n                    }\r\n\r\n                } else if ( leaveAnimationName !== true ) {\r\n                    $el.removeClass( to );\r\n                }\r\n\r\n                if ( $.isFunction( callback ) ) {\r\n                    callback( e );\r\n                }\r\n\r\n            });\r\n\r\n            if ( $.isNumeric( duration ) ) {\r\n                $el.css( 'transition-duration', duration + 'ms' );\r\n            }\r\n\r\n            if ( $.isPlainObject( to ) ) {\r\n                $.fancybox.setTranslate( $el, to );\r\n\r\n            } else {\r\n                $el.addClass( to );\r\n            }\r\n\r\n            if ( to.scaleX && $el.hasClass( 'fancybox-image-wrap' ) ) {\r\n                $el.parent().addClass( 'fancybox-is-scaling' );\r\n            }\r\n\r\n            // Make sure that `transitionend` callback gets fired\r\n            $el.data(\"timer\", setTimeout(function() {\r\n                $el.trigger( 'transitionend' );\r\n            }, duration + 16));\r\n\r\n        },\r\n\r\n        stop : function( $el ) {\r\n            clearTimeout( $el.data(\"timer\") );\r\n\r\n            $el.off( 'transitionend' ).css( 'transition-duration', '' );\r\n\r\n            if ( $el.hasClass( 'fancybox-image-wrap' ) ) {\r\n                $el.parent().removeClass( 'fancybox-is-scaling' );\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n\r\n    // Default click handler for \"fancyboxed\" links\r\n    // ============================================\r\n\r\n    function _run( e ) {\r\n        var $target\t= $( e.currentTarget ),\r\n            opts\t= e.data ? e.data.options : {},\r\n            value\t= $target.attr( 'data-fancybox' ) || '',\r\n            index\t= 0,\r\n            items   = [];\r\n\r\n        // Avoid opening multiple times\r\n        if ( e.isDefaultPrevented() ) {\r\n            return;\r\n        }\r\n\r\n        e.preventDefault();\r\n\r\n        // Get all related items and find index for clicked one\r\n        if ( value ) {\r\n            items = opts.selector ? $( opts.selector ) : ( e.data ? e.data.items : [] );\r\n            items = items.length ? items.filter( '[data-fancybox=\"' + value + '\"]' ) : $( '[data-fancybox=\"' + value + '\"]' );\r\n\r\n            index = items.index( $target );\r\n\r\n            // Sometimes current item can not be found\r\n            // (for example, when slider clones items)\r\n            if ( index < 0 ) {\r\n                index = 0;\r\n            }\r\n\r\n        } else {\r\n            items = [ $target ];\r\n        }\r\n\r\n        $.fancybox.open( items, opts, index );\r\n    }\r\n\r\n\r\n    // Create a jQuery plugin\r\n    // ======================\r\n\r\n    $.fn.fancybox = function (options) {\r\n        var selector;\r\n\r\n        options  = options || {};\r\n        selector = options.selector || false;\r\n\r\n        if ( selector ) {\r\n\r\n            $( 'body' ).off( 'click.fb-start', selector ).on( 'click.fb-start', selector, {\r\n                options : options\r\n            }, _run );\r\n\r\n        } else {\r\n\r\n            this.off( 'click.fb-start' ).on( 'click.fb-start', {\r\n                items   : this,\r\n                options : options\r\n            }, _run);\r\n\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n\r\n    // Self initializing plugin\r\n    // ========================\r\n\r\n    $D.on( 'click.fb-start', '[data-fancybox]', _run );\r\n\r\n}( window, document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// Media\r\n// Adds additional media type support\r\n//\r\n// ==========================================================================\r\n;(function ($) {\r\n\r\n\t'use strict';\r\n\r\n\t// Formats matching url to final form\r\n\r\n\tvar format = function (url, rez, params) {\r\n\t\tif ( !url ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tparams = params || '';\r\n\r\n\t\tif ( $.type(params) === \"object\" ) {\r\n\t\t\tparams = $.param(params, true);\r\n\t\t}\r\n\r\n\t\t$.each(rez, function (key, value) {\r\n\t\t\turl = url.replace('$' + key, value || '');\r\n\t\t});\r\n\r\n\t\tif (params.length) {\r\n\t\t\turl += (url.indexOf('?') > 0 ? '&' : '?') + params;\r\n\t\t}\r\n\r\n\t\treturn url;\r\n\t};\r\n\r\n\t// Object containing properties for each media type\r\n\r\n\tvar defaults = {\r\n\t\tyoutube : {\r\n\t\t\tmatcher : /(youtube\\.com|youtu\\.be|youtube\\-nocookie\\.com)\\/(watch\\?(.*&)?v=|v\\/|u\\/|embed\\/?)?(videoseries\\?list=(.*)|[\\w-]{11}|\\?listType=(.*)&list=(.*))(.*)/i,\r\n\t\t\tparams  : {\r\n\t\t\t\tautoplay : 1,\r\n\t\t\t\tautohide : 1,\r\n\t\t\t\tfs  : 1,\r\n\t\t\t\trel : 0,\r\n\t\t\t\thd  : 1,\r\n\t\t\t\twmode : 'transparent',\r\n\t\t\t\tenablejsapi : 1,\r\n\t\t\t\thtml5 : 1\r\n\t\t\t},\r\n\t\t\tparamPlace : 8,\r\n\t\t\ttype  : 'iframe',\r\n\t\t\turl   : '//www.youtube.com/embed/$4',\r\n\t\t\tthumb : '//img.youtube.com/vi/$4/hqdefault.jpg'\r\n\t\t},\r\n\r\n\t\tvimeo : {\r\n\t\t\tmatcher : /^.+vimeo.com\\/(.*\\/)?([\\d]+)(.*)?/,\r\n\t\t\tparams  : {\r\n\t\t\t\tautoplay : 1,\r\n\t\t\t\thd : 1,\r\n\t\t\t\tshow_title    : 1,\r\n\t\t\t\tshow_byline   : 1,\r\n\t\t\t\tshow_portrait : 0,\r\n\t\t\t\tfullscreen    : 1,\r\n\t\t\t\tapi : 1\r\n\t\t\t},\r\n\t\t\tparamPlace : 3,\r\n\t\t\ttype : 'iframe',\r\n\t\t\turl : '//player.vimeo.com/video/$2'\r\n\t\t},\r\n\r\n\t\tmetacafe : {\r\n\t\t\tmatcher : /metacafe.com\\/watch\\/(\\d+)\\/(.*)?/,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : '//www.metacafe.com/embed/$1/?ap=1'\r\n\t\t},\r\n\r\n\t\tdailymotion : {\r\n\t\t\tmatcher : /dailymotion.com\\/video\\/(.*)\\/?(.*)/,\r\n\t\t\tparams : {\r\n\t\t\t\tadditionalInfos : 0,\r\n\t\t\t\tautoStart : 1\r\n\t\t\t},\r\n\t\t\ttype : 'iframe',\r\n\t\t\turl  : '//www.dailymotion.com/embed/video/$1'\r\n\t\t},\r\n\r\n\t\tvine : {\r\n\t\t\tmatcher : /vine.co\\/v\\/([a-zA-Z0-9\\?\\=\\-]+)/,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : '//vine.co/v/$1/embed/simple'\r\n\t\t},\r\n\r\n\t\tinstagram : {\r\n\t\t\tmatcher : /(instagr\\.am|instagram\\.com)\\/p\\/([a-zA-Z0-9_\\-]+)\\/?/i,\r\n\t\t\ttype    : 'image',\r\n\t\t\turl     : '//$1/p/$2/media/?size=l'\r\n\t\t},\r\n\r\n\t\t// Examples:\r\n\t\t// http://maps.google.com/?ll=48.857995,2.294297&spn=0.007666,0.021136&t=m&z=16\r\n\t\t// https://www.google.com/maps/@37.7852006,-122.4146355,14.65z\r\n\t\t// https://www.google.com/maps/place/Googleplex/@37.4220041,-122.0833494,17z/data=!4m5!3m4!1s0x0:0x6c296c66619367e0!8m2!3d37.4219998!4d-122.0840572\r\n\t\tgmap_place : {\r\n\t\t\tmatcher : /(maps\\.)?google\\.([a-z]{2,3}(\\.[a-z]{2})?)\\/(((maps\\/(place\\/(.*)\\/)?\\@(.*),(\\d+.?\\d+?)z))|(\\?ll=))(.*)?/i,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : function (rez) {\r\n\t\t\t\treturn '//maps.google.' + rez[2] + '/?ll=' + ( rez[9] ? rez[9] + '&z=' + Math.floor(  rez[10]  ) + ( rez[12] ? rez[12].replace(/^\\//, \"&\") : '' )  : rez[12] ) + '&output=' + ( rez[12] && rez[12].indexOf('layer=c') > 0 ? 'svembed' : 'embed' );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Examples:\r\n\t\t// https://www.google.com/maps/search/Empire+State+Building/\r\n\t\t// https://www.google.com/maps/search/?api=1&query=centurylink+field\r\n\t\t// https://www.google.com/maps/search/?api=1&query=47.5951518,-122.3316393\r\n\t\tgmap_search : {\r\n\t\t\tmatcher : /(maps\\.)?google\\.([a-z]{2,3}(\\.[a-z]{2})?)\\/(maps\\/search\\/)(.*)/i,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : function (rez) {\r\n\t\t\t\treturn '//maps.google.' + rez[2] + '/maps?q=' + rez[5].replace('query=', 'q=').replace('api=1', '') + '&output=embed';\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t$(document).on('objectNeedsType.fb', function (e, instance, item) {\r\n\r\n\t\tvar url\t = item.src || '',\r\n\t\t\ttype = false,\r\n\t\t\tmedia,\r\n\t\t\tthumb,\r\n\t\t\trez,\r\n\t\t\tparams,\r\n\t\t\turlParams,\r\n\t\t\tparamObj,\r\n\t\t\tprovider;\r\n\r\n\t\tmedia = $.extend( true, {}, defaults, item.opts.media );\r\n\r\n\t\t// Look for any matching media type\r\n\t\t$.each(media, function ( providerName, providerOpts ) {\r\n\t\t\trez = url.match( providerOpts.matcher );\r\n\r\n\t\t\tif ( !rez ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\ttype     = providerOpts.type;\r\n\t\t\tparamObj = {};\r\n\r\n\t\t\tif ( providerOpts.paramPlace && rez[ providerOpts.paramPlace ] ) {\r\n\t\t\t\turlParams = rez[ providerOpts.paramPlace ];\r\n\r\n\t\t\t\tif ( urlParams[ 0 ] == '?' ) {\r\n\t\t\t\t\turlParams = urlParams.substring(1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\turlParams = urlParams.split('&');\r\n\r\n\t\t\t\tfor ( var m = 0; m < urlParams.length; ++m ) {\r\n\t\t\t\t\tvar p = urlParams[ m ].split('=', 2);\r\n\r\n\t\t\t\t\tif ( p.length == 2 ) {\r\n\t\t\t\t\t\tparamObj[ p[0] ] = decodeURIComponent( p[1].replace(/\\+/g, \" \") );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tparams = $.extend( true, {}, providerOpts.params, item.opts[ providerName ], paramObj );\r\n\r\n\t\t\turl   = $.type( providerOpts.url ) === \"function\" ? providerOpts.url.call( this, rez, params, item ) : format( providerOpts.url, rez, params );\r\n\t\t\tthumb = $.type( providerOpts.thumb ) === \"function\" ? providerOpts.thumb.call( this, rez, params, item ) : format( providerOpts.thumb, rez );\r\n\r\n\t\t\tif ( providerName === 'vimeo' ) {\r\n\t\t\t\turl = url.replace('&%23', '#');\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t// If it is found, then change content type and update the url\r\n\r\n\t\tif ( type ) {\r\n\t\t\titem.src  = url;\r\n\t\t\titem.type = type;\r\n\r\n\t\t\tif ( !item.opts.thumb && !( item.opts.$thumb && item.opts.$thumb.length ) ) {\r\n\t\t\t\titem.opts.thumb = thumb;\r\n\t\t\t}\r\n\r\n\t\t\tif ( type === 'iframe' ) {\r\n\t\t\t\t$.extend(true, item.opts, {\r\n\t\t\t\t\tiframe : {\r\n\t\t\t\t\t\tpreload : false,\r\n\t\t\t\t\t\tattr : {\r\n\t\t\t\t\t\t\tscrolling : \"no\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\titem.contentProvider = provider;\r\n\r\n\t\t\t\titem.opts.slideClass += ' fancybox-slide--' + ( provider == 'gmap_place' || provider == 'gmap_search' ? 'map' : 'video' );\r\n\t\t\t}\r\n\r\n\t\t} else if ( url ) {\r\n\t\t\titem.type = item.opts.defaultType;\r\n\t\t}\r\n\r\n\t});\r\n\r\n}( window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// Guestures\r\n// Adds touch guestures, handles click and tap events\r\n//\r\n// ==========================================================================\r\n;(function (window, document, $) {\r\n\t'use strict';\r\n\r\n\tvar requestAFrame = (function () {\r\n\t\treturn window.requestAnimationFrame ||\r\n\t\t\twindow.webkitRequestAnimationFrame ||\r\n\t\t\twindow.mozRequestAnimationFrame ||\r\n\t\t\twindow.oRequestAnimationFrame ||\r\n\t\t\t// if all else fails, use setTimeout\r\n\t\t\tfunction (callback) {\r\n\t\t\t\treturn window.setTimeout(callback, 1000 / 60);\r\n\t\t\t};\r\n\t})();\r\n\r\n\tvar cancelAFrame = (function () {\r\n\t\treturn window.cancelAnimationFrame ||\r\n\t\t\twindow.webkitCancelAnimationFrame ||\r\n\t\t\twindow.mozCancelAnimationFrame ||\r\n\t\t\twindow.oCancelAnimationFrame ||\r\n\t\t\tfunction (id) {\r\n\t\t\t\twindow.clearTimeout(id);\r\n\t\t\t};\r\n\t})();\r\n\r\n\tvar pointers = function( e ) {\r\n\t\tvar result = [];\r\n\r\n\t\te = e.originalEvent || e || window.e;\r\n\t\te = e.touches && e.touches.length ? e.touches : ( e.changedTouches && e.changedTouches.length ? e.changedTouches : [ e ] );\r\n\r\n\t\tfor ( var key in e ) {\r\n\r\n\t\t\tif ( e[ key ].pageX ) {\r\n\t\t\t\tresult.push( { x : e[ key ].pageX, y : e[ key ].pageY } );\r\n\r\n\t\t\t} else if ( e[ key ].clientX ) {\r\n\t\t\t\tresult.push( { x : e[ key ].clientX, y : e[ key ].clientY } );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t};\r\n\r\n\tvar distance = function( point2, point1, what ) {\r\n\t\tif ( !point1 || !point2 ) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tif ( what === 'x' ) {\r\n\t\t\treturn point2.x - point1.x;\r\n\r\n\t\t} else if ( what === 'y' ) {\r\n\t\t\treturn point2.y - point1.y;\r\n\t\t}\r\n\r\n\t\treturn Math.sqrt( Math.pow( point2.x - point1.x, 2 ) + Math.pow( point2.y - point1.y, 2 ) );\r\n\t};\r\n\r\n\tvar isClickable = function( $el ) {\r\n\t\tif ( $el.is('a,area,button,[role=\"button\"],input,label,select,summary,textarea') || $.isFunction( $el.get(0).onclick ) || $el.data('selectable') ) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// Check for attributes like data-fancybox-next or data-fancybox-close\r\n\t\tfor ( var i = 0, atts = $el[0].attributes, n = atts.length; i < n; i++ ) {\r\n\t\t\tif ( atts[i].nodeName.substr(0, 14) === 'data-fancybox-' ) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t \treturn false;\r\n\t};\r\n\r\n\tvar hasScrollbars = function( el ) {\r\n\t\tvar overflowY = window.getComputedStyle( el )['overflow-y'];\r\n\t\tvar overflowX = window.getComputedStyle( el )['overflow-x'];\r\n\r\n\t\tvar vertical   = (overflowY === 'scroll' || overflowY === 'auto') && el.scrollHeight > el.clientHeight;\r\n\t\tvar horizontal = (overflowX === 'scroll' || overflowX === 'auto') && el.scrollWidth > el.clientWidth;\r\n\r\n\t\treturn vertical || horizontal;\r\n\t};\r\n\r\n\tvar isScrollable = function ( $el ) {\r\n\t\tvar rez = false;\r\n\r\n\t\twhile ( true ) {\r\n\t\t\trez\t= hasScrollbars( $el.get(0) );\r\n\r\n\t\t\tif ( rez ) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\t$el = $el.parent();\r\n\r\n\t\t\tif ( !$el.length || $el.hasClass( 'fancybox-stage' ) || $el.is( 'body' ) ) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn rez;\r\n\t};\r\n\r\n\r\n\tvar Guestures = function ( instance ) {\r\n\t\tvar self = this;\r\n\r\n\t\tself.instance = instance;\r\n\r\n\t\tself.$bg        = instance.$refs.bg;\r\n\t\tself.$stage     = instance.$refs.stage;\r\n\t\tself.$container = instance.$refs.container;\r\n\r\n\t\tself.destroy();\r\n\r\n\t\tself.$container.on( 'touchstart.fb.touch mousedown.fb.touch', $.proxy(self, 'ontouchstart') );\r\n\t};\r\n\r\n\tGuestures.prototype.destroy = function() {\r\n\t\tthis.$container.off( '.fb.touch' );\r\n\t};\r\n\r\n\tGuestures.prototype.ontouchstart = function( e ) {\r\n\t\tvar self = this;\r\n\r\n\t\tvar $target  = $( e.target );\r\n\t\tvar instance = self.instance;\r\n\t\tvar current  = instance.current;\r\n\t\tvar $content = current.$content;\r\n\r\n\t\tvar isTouchDevice = ( e.type == 'touchstart' );\r\n\r\n\t\t// Do not respond to both (touch and mouse) events\r\n\t\tif ( isTouchDevice ) {\r\n\t\t\tself.$container.off( 'mousedown.fb.touch' );\r\n\t\t}\r\n\r\n\t\t// Ignore right click\r\n\t\tif ( e.originalEvent && e.originalEvent.button == 2 ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore taping on links, buttons, input elements\r\n\t\tif ( !$target.length || isClickable( $target ) || isClickable( $target.parent() ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore clicks on the scrollbar\r\n\t\tif ( !$target.is('img') && e.originalEvent.clientX > $target[0].clientWidth + $target.offset().left ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore clicks while zooming or closing\r\n\t\tif ( !current || self.instance.isAnimating || self.instance.isClosing ) {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tself.realPoints = self.startPoints = pointers( e );\r\n\r\n\t\tif ( !self.startPoints ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\te.stopPropagation();\r\n\r\n\t\tself.startEvent = e;\r\n\r\n\t\tself.canTap   = true;\r\n\t\tself.$target  = $target;\r\n\t\tself.$content = $content;\r\n\t\tself.opts     = current.opts.touch;\r\n\r\n\t\tself.isPanning   = false;\r\n\t\tself.isSwiping   = false;\r\n\t\tself.isZooming   = false;\r\n\t\tself.isScrolling = false;\r\n\r\n\t\tself.sliderStartPos  = self.sliderLastPos || { top: 0, left: 0 };\r\n\t\tself.contentStartPos = $.fancybox.getTranslate( self.$content );\r\n\t\tself.contentLastPos  = null;\r\n\r\n\t\tself.startTime = new Date().getTime();\r\n\t\tself.distanceX = self.distanceY = self.distance = 0;\r\n\r\n\t\tself.canvasWidth  = Math.round( current.$slide[0].clientWidth );\r\n\t\tself.canvasHeight = Math.round( current.$slide[0].clientHeight );\r\n\r\n\t\t$(document)\r\n\t\t\t.off( '.fb.touch' )\r\n\t\t\t.on( isTouchDevice ? 'touchend.fb.touch touchcancel.fb.touch' : 'mouseup.fb.touch mouseleave.fb.touch', $.proxy(self, \"ontouchend\"))\r\n\t\t\t.on( isTouchDevice ? 'touchmove.fb.touch' : 'mousemove.fb.touch', $.proxy(self, \"ontouchmove\"));\r\n\r\n\t\tif ( $.fancybox.isMobile ) {\r\n\t\t\tdocument.addEventListener('scroll', self.onscroll, true);\r\n\t\t}\r\n\r\n\t\tif ( !(self.opts || instance.canPan() ) || !( $target.is( self.$stage ) || self.$stage.find( $target ).length ) ) {\r\n\r\n\t\t\t// Prevent image ghosting while dragging\r\n\t\t\tif ( $target.is('img') ) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( !( $.fancybox.isMobile && ( isScrollable( $target ) || isScrollable( $target.parent() ) ) ) ) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tif ( self.startPoints.length === 1 ) {\r\n\t\t\tif ( current.type === 'image' && ( self.contentStartPos.width > self.canvasWidth + 1 || self.contentStartPos.height > self.canvasHeight + 1 ) ) {\r\n\t\t\t\t$.fancybox.stop( self.$content );\r\n\r\n\t\t\t\tself.$content.css( 'transition-duration', '' );\r\n\r\n\t\t\t\tself.isPanning = true;\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.isSwiping = true;\r\n\t\t\t}\r\n\r\n\t\t\tself.$container.addClass( 'fancybox-controls--isGrabbing' );\r\n\t\t}\r\n\r\n\t\tif ( self.startPoints.length === 2 && !instance.isAnimating && !current.hasError && current.type === 'image' && ( current.isLoaded || current.$ghost ) ) {\r\n\t\t\tself.canTap    = false;\r\n\t\t\tself.isSwiping = false;\r\n\t\t\tself.isPanning = false;\r\n\r\n\t\t\tself.isZooming = true;\r\n\r\n\t\t\t$.fancybox.stop( self.$content );\r\n\r\n\t\t\tself.$content.css( 'transition-duration', '' );\r\n\r\n\t\t\tself.centerPointStartX = ( ( self.startPoints[0].x + self.startPoints[1].x ) * 0.5 ) - $(window).scrollLeft();\r\n\t\t\tself.centerPointStartY = ( ( self.startPoints[0].y + self.startPoints[1].y ) * 0.5 ) - $(window).scrollTop();\r\n\r\n\t\t\tself.percentageOfImageAtPinchPointX = ( self.centerPointStartX - self.contentStartPos.left ) / self.contentStartPos.width;\r\n\t\t\tself.percentageOfImageAtPinchPointY = ( self.centerPointStartY - self.contentStartPos.top  ) / self.contentStartPos.height;\r\n\r\n\t\t\tself.startDistanceBetweenFingers = distance( self.startPoints[0], self.startPoints[1] );\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onscroll = function(e) {\r\n\t\tself.isScrolling = true;\r\n\t};\r\n\r\n\tGuestures.prototype.ontouchmove = function( e ) {\r\n\t\tvar self = this,\r\n\t\t\t$target = $(e.target);\r\n\r\n\t\tif ( self.isScrolling || !( $target.is( self.$stage ) || self.$stage.find( $target ).length ) ) {\r\n\t\t\tself.canTap = false;\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tself.newPoints = pointers( e );\r\n\r\n\t\tif ( !( self.opts || self.instance.canPan() ) || !self.newPoints || !self.newPoints.length ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( !(self.isSwiping && self.isSwiping === true) ) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tself.distanceX = distance( self.newPoints[0], self.startPoints[0], 'x' );\r\n\t\tself.distanceY = distance( self.newPoints[0], self.startPoints[0], 'y' );\r\n\r\n\t\tself.distance = distance( self.newPoints[0], self.startPoints[0] )\r\n\r\n\t\t// Skip false ontouchmove events (Chrome)\r\n\t\tif ( self.distance > 0 ) {\r\n\t\t\tif ( self.isSwiping ) {\r\n\t\t\t\tself.onSwipe(e);\r\n\r\n\t\t\t} else if ( self.isPanning ) {\r\n\t\t\t\tself.onPan();\r\n\r\n\t\t\t} else if ( self.isZooming ) {\r\n\t\t\t\tself.onZoom();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onSwipe = function(e) {\r\n\t\tvar self = this,\r\n\t\t\tswiping = self.isSwiping,\r\n\t\t\tleft    = self.sliderStartPos.left || 0,\r\n\t\t\tangle;\r\n\r\n\t\t// If direction is not yet determined\r\n\t\tif ( swiping === true ) {\r\n\r\n\t\t\t// We need at least 10px distance to correctly calculate an angle\r\n\t\t\tif ( Math.abs( self.distance ) > 10 ) {\r\n\t\t\t\tself.canTap = false;\r\n\r\n\t\t\t\tif ( self.instance.group.length < 2 && self.opts.vertical ) {\r\n\t\t\t\t\tself.isSwiping = 'y';\r\n\r\n\t\t\t\t} else if ( self.instance.isDragging || self.opts.vertical === false || ( self.opts.vertical === 'auto' && $( window ).width() > 800 ) ) {\r\n\t\t\t\t\tself.isSwiping = 'x';\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tangle = Math.abs( Math.atan2( self.distanceY, self.distanceX ) * 180 / Math.PI );\r\n\r\n\t\t\t\t\tself.isSwiping = ( angle > 45 && angle < 135 ) ? 'y' : 'x';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.canTap = false;\r\n\r\n\t\t\t\t if ( self.isSwiping === 'y' && $.fancybox.isMobile && ( isScrollable( self.$target ) || isScrollable( self.$target.parent() ) ) ) {\r\n\t\t\t\t\t self.isScrolling = true;\r\n\r\n\t\t\t\t\t return;\r\n\t\t\t\t }\r\n\r\n\t\t\t\tself.instance.isDragging = self.isSwiping;\r\n\r\n\t\t\t\t// Reset points to avoid jumping, because we dropped first swipes to calculate the angle\r\n\t\t\t\tself.startPoints = self.newPoints;\r\n\r\n\t\t\t\t$.each(self.instance.slides, function( index, slide ) {\r\n\t\t\t\t\t$.fancybox.stop( slide.$slide );\r\n\r\n\t\t\t\t\tslide.$slide.css( 'transition-duration', '' );\r\n\r\n\t\t\t\t\tslide.inTransition = false;\r\n\r\n\t\t\t\t\tif ( slide.pos === self.instance.current.pos ) {\r\n\t\t\t\t\t\tself.sliderStartPos.left = $.fancybox.getTranslate( slide.$slide ).left;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Stop slideshow\r\n\t\t\t\tif ( self.instance.SlideShow && self.instance.SlideShow.isActive ) {\r\n\t\t\t\t\tself.instance.SlideShow.stop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Sticky edges\r\n\t\tif ( swiping == 'x' ) {\r\n\t\t\tif ( self.distanceX > 0 && ( self.instance.group.length < 2 || ( self.instance.current.index === 0 && !self.instance.current.opts.loop ) ) ) {\r\n\t\t\t\tleft = left + Math.pow( self.distanceX, 0.8 );\r\n\r\n\t\t\t} else if ( self.distanceX < 0 && ( self.instance.group.length < 2 || ( self.instance.current.index === self.instance.group.length - 1 && !self.instance.current.opts.loop ) ) ) {\r\n\t\t\t\tleft = left - Math.pow( -self.distanceX, 0.8 );\r\n\r\n\t\t\t} else {\r\n\t\t\t\tleft = left + self.distanceX;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tself.sliderLastPos = {\r\n\t\t\ttop  : swiping == 'x' ? 0 : self.sliderStartPos.top + self.distanceY,\r\n\t\t\tleft : left\r\n\t\t};\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.requestId = requestAFrame(function() {\r\n\r\n\t\t\tif ( self.sliderLastPos ) {\r\n\t\t\t\t$.each(self.instance.slides, function( index, slide ) {\r\n\t\t\t\t\tvar pos = slide.pos - self.instance.currPos;\r\n\r\n\t\t\t\t\t$.fancybox.setTranslate( slide.$slide, {\r\n\t\t\t\t\t\ttop  : self.sliderLastPos.top,\r\n\t\t\t\t\t\tleft : self.sliderLastPos.left + ( pos * self.canvasWidth ) + ( pos * slide.opts.gutter )\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tself.$container.addClass( 'fancybox-is-sliding' );\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onPan = function() {\r\n\t\tvar self = this;\r\n\r\n\t\t// Sometimes, when tapping causally, image can move a bit and that breaks double tapping\r\n\t\tif ( distance( self.newPoints[0], self.realPoints[0] ) < ($.fancybox.isMobile ? 10 : 5) ) {\r\n\t\t\tself.startPoints = self.newPoints;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tself.canTap = false;\r\n\r\n\t\tself.contentLastPos = self.limitMovement();\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.requestId = requestAFrame(function() {\r\n\t\t\t$.fancybox.setTranslate( self.$content, self.contentLastPos );\r\n\t\t});\r\n\t};\r\n\r\n\t// Make panning sticky to the edges\r\n\tGuestures.prototype.limitMovement = function() {\r\n\t\tvar self = this;\r\n\r\n\t\tvar canvasWidth  = self.canvasWidth;\r\n\t\tvar canvasHeight = self.canvasHeight;\r\n\r\n\t\tvar distanceX = self.distanceX;\r\n\t\tvar distanceY = self.distanceY;\r\n\r\n\t\tvar contentStartPos = self.contentStartPos;\r\n\r\n\t\tvar currentOffsetX = contentStartPos.left;\r\n\t\tvar currentOffsetY = contentStartPos.top;\r\n\r\n\t\tvar currentWidth  = contentStartPos.width;\r\n\t\tvar currentHeight = contentStartPos.height;\r\n\r\n\t\tvar minTranslateX, minTranslateY,\r\n\t\t\tmaxTranslateX, maxTranslateY,\r\n\t\t\tnewOffsetX, newOffsetY;\r\n\r\n\t\tif ( currentWidth > canvasWidth ) {\r\n\t\t\tnewOffsetX = currentOffsetX + distanceX;\r\n\r\n\t\t} else {\r\n\t\t\tnewOffsetX = currentOffsetX;\r\n\t\t}\r\n\r\n\t\tnewOffsetY = currentOffsetY + distanceY;\r\n\r\n\t\t// Slow down proportionally to traveled distance\r\n\t\tminTranslateX = Math.max( 0, canvasWidth  * 0.5 - currentWidth  * 0.5 );\r\n\t\tminTranslateY = Math.max( 0, canvasHeight * 0.5 - currentHeight * 0.5 );\r\n\r\n\t\tmaxTranslateX = Math.min( canvasWidth  - currentWidth,  canvasWidth  * 0.5 - currentWidth  * 0.5 );\r\n\t\tmaxTranslateY = Math.min( canvasHeight - currentHeight, canvasHeight * 0.5 - currentHeight * 0.5 );\r\n\r\n\t\tif ( currentWidth > canvasWidth ) {\r\n\r\n\t\t\t//   ->\r\n\t\t\tif ( distanceX > 0 && newOffsetX > minTranslateX ) {\r\n\t\t\t\tnewOffsetX = minTranslateX - 1 + Math.pow( -minTranslateX + currentOffsetX + distanceX, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t\t//    <-\r\n\t\t\tif ( distanceX < 0 && newOffsetX < maxTranslateX ) {\r\n\t\t\t\tnewOffsetX = maxTranslateX + 1 - Math.pow( maxTranslateX - currentOffsetX - distanceX, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( currentHeight > canvasHeight ) {\r\n\r\n\t\t\t//   \\/\r\n\t\t\tif ( distanceY > 0 && newOffsetY > minTranslateY ) {\r\n\t\t\t\tnewOffsetY = minTranslateY - 1 + Math.pow(-minTranslateY + currentOffsetY + distanceY, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t\t//   /\\\r\n\t\t\tif ( distanceY < 0 && newOffsetY < maxTranslateY ) {\r\n\t\t\t\tnewOffsetY = maxTranslateY + 1 - Math.pow ( maxTranslateY - currentOffsetY - distanceY, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttop    : newOffsetY,\r\n\t\t\tleft   : newOffsetX,\r\n\t\t\tscaleX : contentStartPos.scaleX,\r\n\t\t\tscaleY : contentStartPos.scaleY\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.limitPosition = function( newOffsetX, newOffsetY, newWidth, newHeight ) {\r\n\t\tvar self = this;\r\n\r\n\t\tvar canvasWidth  = self.canvasWidth;\r\n\t\tvar canvasHeight = self.canvasHeight;\r\n\r\n\t\tif ( newWidth > canvasWidth ) {\r\n\t\t\tnewOffsetX = newOffsetX > 0 ? 0 : newOffsetX;\r\n\t\t\tnewOffsetX = newOffsetX < canvasWidth - newWidth ? canvasWidth - newWidth : newOffsetX;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Center horizontally\r\n\t\t\tnewOffsetX = Math.max( 0, canvasWidth / 2 - newWidth / 2 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( newHeight > canvasHeight ) {\r\n\t\t\tnewOffsetY = newOffsetY > 0 ? 0 : newOffsetY;\r\n\t\t\tnewOffsetY = newOffsetY < canvasHeight - newHeight ? canvasHeight - newHeight : newOffsetY;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Center vertically\r\n\t\t\tnewOffsetY = Math.max( 0, canvasHeight / 2 - newHeight / 2 );\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttop  : newOffsetY,\r\n\t\t\tleft : newOffsetX\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onZoom = function() {\r\n\t\tvar self = this;\r\n\r\n\t\t// Calculate current distance between points to get pinch ratio and new width and height\r\n\r\n\t\tvar currentWidth  = self.contentStartPos.width;\r\n\t\tvar currentHeight = self.contentStartPos.height;\r\n\r\n\t\tvar currentOffsetX = self.contentStartPos.left;\r\n\t\tvar currentOffsetY = self.contentStartPos.top;\r\n\r\n\t\tvar endDistanceBetweenFingers = distance( self.newPoints[0], self.newPoints[1] );\r\n\r\n\t\tvar pinchRatio = endDistanceBetweenFingers / self.startDistanceBetweenFingers;\r\n\r\n\t\tvar newWidth  = Math.floor( currentWidth  * pinchRatio );\r\n\t\tvar newHeight = Math.floor( currentHeight * pinchRatio );\r\n\r\n\t\t// This is the translation due to pinch-zooming\r\n\t\tvar translateFromZoomingX = (currentWidth  - newWidth)  * self.percentageOfImageAtPinchPointX;\r\n\t\tvar translateFromZoomingY = (currentHeight - newHeight) * self.percentageOfImageAtPinchPointY;\r\n\r\n\t\t//Point between the two touches\r\n\r\n\t\tvar centerPointEndX = ((self.newPoints[0].x + self.newPoints[1].x) / 2) - $(window).scrollLeft();\r\n\t\tvar centerPointEndY = ((self.newPoints[0].y + self.newPoints[1].y) / 2) - $(window).scrollTop();\r\n\r\n\t\t// And this is the translation due to translation of the centerpoint\r\n\t\t// between the two fingers\r\n\r\n\t\tvar translateFromTranslatingX = centerPointEndX - self.centerPointStartX;\r\n\t\tvar translateFromTranslatingY = centerPointEndY - self.centerPointStartY;\r\n\r\n\t\t// The new offset is the old/current one plus the total translation\r\n\r\n\t\tvar newOffsetX = currentOffsetX + ( translateFromZoomingX + translateFromTranslatingX );\r\n\t\tvar newOffsetY = currentOffsetY + ( translateFromZoomingY + translateFromTranslatingY );\r\n\r\n\t\tvar newPos = {\r\n\t\t\ttop    : newOffsetY,\r\n\t\t\tleft   : newOffsetX,\r\n\t\t\tscaleX : self.contentStartPos.scaleX * pinchRatio,\r\n\t\t\tscaleY : self.contentStartPos.scaleY * pinchRatio\r\n\t\t};\r\n\r\n\t\tself.canTap = false;\r\n\r\n\t\tself.newWidth  = newWidth;\r\n\t\tself.newHeight = newHeight;\r\n\r\n\t\tself.contentLastPos = newPos;\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.requestId = requestAFrame(function() {\r\n\t\t\t$.fancybox.setTranslate( self.$content, self.contentLastPos );\r\n\t\t});\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.ontouchend = function( e ) {\r\n\t\tvar self = this;\r\n\t\tvar dMs  = Math.max( (new Date().getTime() ) - self.startTime, 1);\r\n\r\n\t\tvar swiping   = self.isSwiping;\r\n\t\tvar panning   = self.isPanning;\r\n\t\tvar zooming   = self.isZooming;\r\n\t\tvar scrolling = self.isScrolling;\r\n\r\n\t\tself.endPoints = pointers( e );\r\n\r\n\t\tself.$container.removeClass( 'fancybox-controls--isGrabbing' );\r\n\r\n\t\t$(document).off( '.fb.touch' );\r\n\r\n\t\tdocument.removeEventListener('scroll', self.onscroll, true);\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.isSwiping   = false;\r\n\t\tself.isPanning   = false;\r\n\t\tself.isZooming   = false;\r\n\t\tself.isScrolling = false;\r\n\r\n\t\tself.instance.isDragging = false;\r\n\r\n\t\tif ( self.canTap ) {\r\n\t\t\treturn self.onTap( e );\r\n\t\t}\r\n\r\n\t\tself.speed = 366;\r\n\r\n\t\t// Speed in px/ms\r\n\t\tself.velocityX = self.distanceX / dMs * 0.5;\r\n\t\tself.velocityY = self.distanceY / dMs * 0.5;\r\n\r\n\t\tself.speedX = Math.max( self.speed * 0.5, Math.min( self.speed * 1.5, ( 1 / Math.abs( self.velocityX ) ) * self.speed ) );\r\n\r\n\t\tif ( panning ) {\r\n\t\t\tself.endPanning();\r\n\r\n\t\t} else if ( zooming ) {\r\n\t\t\tself.endZooming();\r\n\r\n\t\t} else {\r\n\t\t\tself.endSwiping( swiping, scrolling );\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t};\r\n\r\n\tGuestures.prototype.endSwiping = function( swiping, scrolling ) {\r\n\t\tvar self = this,\r\n\t\t\tret  = false,\r\n\t\t\tlen  = self.instance.group.length;\r\n\r\n\t\tself.sliderLastPos = null;\r\n\r\n\t\t// Close if swiped vertically / navigate if horizontally\r\n\t\tif ( swiping == 'y' && !scrolling && Math.abs( self.distanceY ) > 50 ) {\r\n\r\n\t\t\t// Continue vertical movement\r\n\t\t\t$.fancybox.animate( self.instance.current.$slide, {\r\n\t\t\t\ttop     : self.sliderStartPos.top + self.distanceY + ( self.velocityY * 150 ),\r\n\t\t\t\topacity : 0\r\n\t\t\t}, 150 );\r\n\r\n\t\t\tret = self.instance.close( true, 300 );\r\n\r\n\t\t} else if ( swiping == 'x' && self.distanceX > 50 && len > 1 ) {\r\n\t\t\tret = self.instance.previous( self.speedX );\r\n\r\n\t\t} else if ( swiping == 'x' && self.distanceX < -50 && len > 1 ) {\r\n\t\t\tret = self.instance.next( self.speedX );\r\n\t\t}\r\n\r\n\t\tif ( ret === false && ( swiping == 'x' || swiping == 'y' ) ) {\r\n\t\t\tif ( scrolling || len < 2 ) {\r\n\t\t\t\tself.instance.centerSlide( self.instance.current, 150 );\r\n\t\t\t} else {\r\n\t\t\t\tself.instance.jumpTo( self.instance.current.index );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tself.$container.removeClass( 'fancybox-is-sliding' );\r\n\r\n\t};\r\n\r\n\t// Limit panning from edges\r\n\t// ========================\r\n\r\n\tGuestures.prototype.endPanning = function() {\r\n\r\n\t\tvar self = this;\r\n\t\tvar newOffsetX, newOffsetY, newPos;\r\n\r\n\t\tif ( !self.contentLastPos ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( self.opts.momentum === false ) {\r\n\t\t\tnewOffsetX = self.contentLastPos.left;\r\n\t\t\tnewOffsetY = self.contentLastPos.top;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Continue movement\r\n\t\t\tnewOffsetX = self.contentLastPos.left + ( self.velocityX * self.speed );\r\n\t\t\tnewOffsetY = self.contentLastPos.top  + ( self.velocityY * self.speed );\r\n\t\t}\r\n\r\n\t\tnewPos = self.limitPosition( newOffsetX, newOffsetY, self.contentStartPos.width, self.contentStartPos.height );\r\n\r\n\t\t newPos.width  = self.contentStartPos.width;\r\n\t\t newPos.height = self.contentStartPos.height;\r\n\r\n\t\t$.fancybox.animate( self.$content, newPos, 330 );\r\n\t};\r\n\r\n\r\n\tGuestures.prototype.endZooming = function() {\r\n\t\tvar self = this;\r\n\r\n\t\tvar current = self.instance.current;\r\n\r\n\t\tvar newOffsetX, newOffsetY, newPos, reset;\r\n\r\n\t\tvar newWidth  = self.newWidth;\r\n\t\tvar newHeight = self.newHeight;\r\n\r\n\t\tif ( !self.contentLastPos ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tnewOffsetX = self.contentLastPos.left;\r\n\t\tnewOffsetY = self.contentLastPos.top;\r\n\r\n\t\treset = {\r\n\t\t\ttop    : newOffsetY,\r\n\t\t\tleft   : newOffsetX,\r\n\t\t\twidth  : newWidth,\r\n\t\t\theight : newHeight,\r\n\t\t\tscaleX : 1,\r\n\t\t\tscaleY : 1\r\n\t\t};\r\n\r\n\t\t// Reset scalex/scaleY values; this helps for perfomance and does not break animation\r\n\t\t$.fancybox.setTranslate( self.$content, reset );\r\n\r\n\t\tif ( newWidth < self.canvasWidth && newHeight < self.canvasHeight ) {\r\n\t\t\tself.instance.scaleToFit( 150 );\r\n\r\n\t\t} else if ( newWidth > current.width || newHeight > current.height ) {\r\n\t\t\tself.instance.scaleToActual( self.centerPointStartX, self.centerPointStartY, 150 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnewPos = self.limitPosition( newOffsetX, newOffsetY, newWidth, newHeight );\r\n\r\n\t\t\t// Switch from scale() to width/height or animation will not work correctly\r\n\t\t\t$.fancybox.setTranslate( self.content, $.fancybox.getTranslate( self.$content ) );\r\n\r\n\t\t\t$.fancybox.animate( self.$content, newPos, 150 );\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onTap = function(e) {\r\n\t\tvar self    = this;\r\n\t\tvar $target = $( e.target );\r\n\r\n\t\tvar instance = self.instance;\r\n\t\tvar current  = instance.current;\r\n\r\n\t\tvar endPoints = ( e && pointers( e ) ) || self.startPoints;\r\n\r\n\t\tvar tapX = endPoints[0] ? endPoints[0].x - self.$stage.offset().left : 0;\r\n\t\tvar tapY = endPoints[0] ? endPoints[0].y - self.$stage.offset().top  : 0;\r\n\r\n\t\tvar where;\r\n\r\n\t\tvar process = function ( prefix ) {\r\n\r\n\t\t\tvar action = current.opts[ prefix ];\r\n\r\n\t\t\tif ( $.isFunction( action ) ) {\r\n\t\t\t\taction = action.apply( instance, [ current, e ] );\r\n\t\t\t}\r\n\r\n\t\t\tif ( !action) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( action ) {\r\n\r\n\t\t\t\tcase \"close\" :\r\n\r\n\t\t\t\t\tinstance.close( self.startEvent );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"toggleControls\" :\r\n\r\n\t\t\t\t\tinstance.toggleControls( true );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"next\" :\r\n\r\n\t\t\t\t\tinstance.next();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"nextOrClose\" :\r\n\r\n\t\t\t\t\tif ( instance.group.length > 1 ) {\r\n\t\t\t\t\t\tinstance.next();\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tinstance.close( self.startEvent );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"zoom\" :\r\n\r\n\t\t\t\t\tif ( current.type == 'image' && ( current.isLoaded || current.$ghost ) ) {\r\n\r\n\t\t\t\t\t\tif ( instance.canPan() ) {\r\n\t\t\t\t\t\t\tinstance.scaleToFit();\r\n\r\n\t\t\t\t\t\t} else if ( instance.isScaledDown() ) {\r\n\t\t\t\t\t\t\tinstance.scaleToActual( tapX, tapY );\r\n\r\n\t\t\t\t\t\t} else if ( instance.group.length < 2 ) {\r\n\t\t\t\t\t\t\tinstance.close( self.startEvent );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\t// Ignore right click\r\n\t\tif ( e.originalEvent && e.originalEvent.button == 2 ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Skip if clicked on the scrollbar\r\n\t\tif ( !$target.is('img') && tapX > $target[0].clientWidth + $target.offset().left ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Check where is clicked\r\n\t\tif ( $target.is( '.fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container' ) ) {\r\n\t\t\twhere = 'Outside';\r\n\r\n\t\t} else if ( $target.is( '.fancybox-slide' ) ) {\r\n\t\t\twhere = 'Slide';\r\n\r\n\t\t} else if ( instance.current.$content && instance.current.$content.find( $target ).addBack().filter( $target ).length ) {\r\n\t\t \twhere = 'Content';\r\n\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Check if this is a double tap\r\n\t\tif ( self.tapped ) {\r\n\r\n\t\t\t// Stop previously created single tap\r\n\t\t\tclearTimeout( self.tapped );\r\n\t\t\tself.tapped = null;\r\n\r\n\t\t\t// Skip if distance between taps is too big\r\n\t\t\tif ( Math.abs( tapX - self.tapX ) > 50 || Math.abs( tapY - self.tapY ) > 50 ) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\r\n\t\t\t// OK, now we assume that this is a double-tap\r\n\t\t\tprocess( 'dblclick' + where );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Single tap will be processed if user has not clicked second time within 300ms\r\n\t\t\t// or there is no need to wait for double-tap\r\n\t\t\tself.tapX = tapX;\r\n\t\t\tself.tapY = tapY;\r\n\r\n\t\t\tif ( current.opts[ 'dblclick' + where ] && current.opts[ 'dblclick' + where ] !== current.opts[ 'click' + where ] ) {\r\n\r\n\t\t\t\tself.tapped = setTimeout(function() {\r\n\t\t\t\t\tself.tapped = null;\r\n\r\n\t\t\t\t\tprocess( 'click' + where );\r\n\r\n\t\t\t\t}, 500);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocess( 'click' + where );\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t};\r\n\r\n\t$(document).on('onActivate.fb', function (e, instance) {\r\n\t\tif ( instance && !instance.Guestures ) {\r\n\t\t\tinstance.Guestures = new Guestures( instance );\r\n\t\t}\r\n\t});\r\n\r\n}( window, document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// SlideShow\r\n// Enables slideshow functionality\r\n//\r\n// Example of usage:\r\n// $.fancybox.getInstance().SlideShow.start()\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\t$.extend(true, $.fancybox.defaults, {\r\n\t\tbtnTpl : {\r\n\t\t\tslideShow :\r\n\t\t\t\t'<button data-fancybox-play class=\"fancybox-button fancybox-button--play\" title=\"{{PLAY_START}}\">' +\r\n\t\t\t\t\t'<svg viewBox=\"0 0 40 40\">' +\r\n\t\t\t\t\t\t'<path d=\"M13,12 L27,20 L13,27 Z\" />' +\r\n\t\t\t\t\t\t'<path d=\"M15,10 v19 M23,10 v19\" />' +\r\n\t\t\t\t\t'</svg>' +\r\n\t\t\t\t'</button>'\r\n\t\t},\r\n\t\tslideShow : {\r\n\t\t\tautoStart : false,\r\n            speed     : 3000\r\n\t\t}\r\n\t});\r\n\r\n\tvar SlideShow = function( instance ) {\r\n\t\tthis.instance = instance;\r\n\t\tthis.init();\r\n\t};\r\n\r\n\t$.extend( SlideShow.prototype, {\r\n\t\ttimer    : null,\r\n\t\tisActive : false,\r\n\t\t$button  : null,\r\n\r\n\t\tinit : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tself.$button = self.instance.$refs.toolbar.find('[data-fancybox-play]').on('click', function() {\r\n\t\t\t\tself.toggle();\r\n\t\t\t});\r\n\r\n\t\t\tif ( self.instance.group.length < 2 || !self.instance.group[ self.instance.currIndex ].opts.slideShow ) {\r\n\t\t\t\tself.$button.hide();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tset : function( force ) {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\t// Check if reached last element\r\n\t\t\tif ( self.instance && self.instance.current && (force === true || self.instance.current.opts.loop || self.instance.currIndex < self.instance.group.length - 1 )) {\r\n\t\t\t\tself.timer = setTimeout(function() {\r\n\t\t\t\t\tif ( self.isActive ) {\r\n\t\t\t\t\t\tself.instance.jumpTo( (self.instance.currIndex + 1) % self.instance.group.length );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}, self.instance.current.opts.slideShow.speed);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.stop();\r\n\t\t\t\tself.instance.idleSecondsCounter = 0;\r\n\t\t\t\tself.instance.showControls();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclear : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tclearTimeout( self.timer );\r\n\r\n\t\t\tself.timer = null;\r\n\t\t},\r\n\r\n\t\tstart : function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar current = self.instance.current;\r\n\r\n\t\t\tif ( current ) {\r\n\t\t\t\tself.isActive = true;\r\n\r\n\t\t\t\tself.$button\r\n\t\t\t\t\t.attr( 'title', current.opts.i18n[ current.opts.lang ].PLAY_STOP )\r\n\t\t\t\t\t.removeClass( 'fancybox-button--play' )\r\n\t\t\t\t\t.addClass( 'fancybox-button--pause' );\r\n\r\n\t\t\t\t\tself.set( true );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tstop : function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar current = self.instance.current;\r\n\r\n\t\t\tself.clear();\r\n\r\n\t\t\tself.$button\r\n\t\t\t\t.attr( 'title', current.opts.i18n[ current.opts.lang ].PLAY_START )\r\n\t\t\t\t.removeClass( 'fancybox-button--pause' )\r\n\t\t\t\t.addClass( 'fancybox-button--play' );\r\n\r\n\t\t\tself.isActive = false;\r\n\t\t},\r\n\r\n\t\ttoggle : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tif ( self.isActive ) {\r\n\t\t\t\tself.stop();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.start();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(document).on({\r\n\t\t'onInit.fb' : function(e, instance) {\r\n\t\t\tif ( instance && !instance.SlideShow ) {\r\n\t\t\t\tinstance.SlideShow = new SlideShow( instance );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeShow.fb' : function(e, instance, current, firstRun) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\tif ( firstRun ) {\r\n\r\n\t\t\t\tif ( SlideShow && current.opts.slideShow.autoStart ) {\r\n\t\t\t\t\tSlideShow.start();\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( SlideShow && SlideShow.isActive )  {\r\n\t\t\t\tSlideShow.clear();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'afterShow.fb' : function(e, instance, current) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\tif ( SlideShow && SlideShow.isActive ) {\r\n\t\t\t\tSlideShow.set();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\t// \"P\" or Spacebar\r\n\t\t\tif ( SlideShow && current.opts.slideShow && ( keycode === 80 || keycode === 32 ) && !$(document.activeElement).is( 'button,a,input' ) ) {\r\n\t\t\t\tkeypress.preventDefault();\r\n\r\n\t\t\t\tSlideShow.toggle();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeClose.fb onDeactivate.fb' : function(e, instance) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\tif ( SlideShow ) {\r\n\t\t\t\tSlideShow.stop();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t// Page Visibility API to pause slideshow when window is not active\r\n\t$(document).on(\"visibilitychange\", function() {\r\n\t\tvar instance  = $.fancybox.getInstance();\r\n\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\tif ( SlideShow && SlideShow.isActive ) {\r\n\t\t\tif ( document.hidden ) {\r\n\t\t\t\tSlideShow.clear();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tSlideShow.set();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n}( document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// FullScreen\r\n// Adds fullscreen functionality\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\t// Collection of methods supported by user browser\r\n\tvar fn = (function () {\r\n\r\n\t\tvar fnMap = [\r\n\t\t\t[\r\n\t\t\t\t'requestFullscreen',\r\n\t\t\t\t'exitFullscreen',\r\n\t\t\t\t'fullscreenElement',\r\n\t\t\t\t'fullscreenEnabled',\r\n\t\t\t\t'fullscreenchange',\r\n\t\t\t\t'fullscreenerror'\r\n\t\t\t],\r\n\t\t\t// new WebKit\r\n\t\t\t[\r\n\t\t\t\t'webkitRequestFullscreen',\r\n\t\t\t\t'webkitExitFullscreen',\r\n\t\t\t\t'webkitFullscreenElement',\r\n\t\t\t\t'webkitFullscreenEnabled',\r\n\t\t\t\t'webkitfullscreenchange',\r\n\t\t\t\t'webkitfullscreenerror'\r\n\r\n\t\t\t],\r\n\t\t\t// old WebKit (Safari 5.1)\r\n\t\t\t[\r\n\t\t\t\t'webkitRequestFullScreen',\r\n\t\t\t\t'webkitCancelFullScreen',\r\n\t\t\t\t'webkitCurrentFullScreenElement',\r\n\t\t\t\t'webkitCancelFullScreen',\r\n\t\t\t\t'webkitfullscreenchange',\r\n\t\t\t\t'webkitfullscreenerror'\r\n\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t'mozRequestFullScreen',\r\n\t\t\t\t'mozCancelFullScreen',\r\n\t\t\t\t'mozFullScreenElement',\r\n\t\t\t\t'mozFullScreenEnabled',\r\n\t\t\t\t'mozfullscreenchange',\r\n\t\t\t\t'mozfullscreenerror'\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t'msRequestFullscreen',\r\n\t\t\t\t'msExitFullscreen',\r\n\t\t\t\t'msFullscreenElement',\r\n\t\t\t\t'msFullscreenEnabled',\r\n\t\t\t\t'MSFullscreenChange',\r\n\t\t\t\t'MSFullscreenError'\r\n\t\t\t]\r\n\t\t];\r\n\r\n\t\tvar val;\r\n\t\tvar ret = {};\r\n\t\tvar i, j;\r\n\r\n\t\tfor ( i = 0; i < fnMap.length; i++ ) {\r\n\t\t\tval = fnMap[ i ];\r\n\r\n\t\t\tif ( val && val[ 1 ] in document ) {\r\n\t\t\t\tfor ( j = 0; j < val.length; j++ ) {\r\n\t\t\t\t\tret[ fnMap[ 0 ][ j ] ] = val[ j ];\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn ret;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t})();\r\n\r\n\t// If browser does not have Full Screen API, then simply unset default button template and stop\r\n\tif ( !fn ) {\r\n\r\n\t\tif ( $ && $.fancybox ) {\r\n\t\t\t$.fancybox.defaults.btnTpl.fullScreen = false;\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar FullScreen = {\r\n\r\n\t\trequest : function ( elem ) {\r\n\r\n\t\t\telem = elem || document.documentElement;\r\n\r\n\t\t\telem[ fn.requestFullscreen ]( elem.ALLOW_KEYBOARD_INPUT );\r\n\r\n\t\t},\r\n\t\texit : function () {\r\n\r\n\t\t\tdocument[ fn.exitFullscreen ]();\r\n\r\n\t\t},\r\n\t\ttoggle : function ( elem ) {\r\n\r\n\t\t\telem = elem || document.documentElement;\r\n\r\n\t\t\tif ( this.isFullscreen() ) {\r\n\t\t\t\tthis.exit();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.request( elem );\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tisFullscreen : function()  {\r\n\r\n\t\t\treturn Boolean( document[ fn.fullscreenElement ] );\r\n\r\n\t\t},\r\n\t\tenabled : function()  {\r\n\r\n\t\t\treturn Boolean( document[ fn.fullscreenEnabled ] );\r\n\r\n\t\t}\r\n\t};\r\n\r\n\t$.extend(true, $.fancybox.defaults, {\r\n\t\tbtnTpl : {\r\n\t\t\tfullScreen :\r\n\t\t\t\t'<button data-fancybox-fullscreen class=\"fancybox-button fancybox-button--fullscreen\" title=\"{{FULL_SCREEN}}\">' +\r\n\t\t\t\t\t'<svg viewBox=\"0 0 40 40\">' +\r\n\t\t\t\t\t\t'<path d=\"M9,12 h22 v16 h-22 v-16 v16 h22 v-16 Z\" />' +\r\n\t\t\t\t\t'</svg>' +\r\n\t\t\t\t'</button>'\r\n\t\t},\r\n\t\tfullScreen : {\r\n\t\t\tautoStart : false\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).on({\r\n\t\t'onInit.fb' : function(e, instance) {\r\n\t\t\tvar $container;\r\n\r\n\t\t\tif ( instance && instance.group[ instance.currIndex ].opts.fullScreen ) {\r\n\t\t\t\t$container = instance.$refs.container;\r\n\r\n\t\t\t\t$container.on('click.fb-fullscreen', '[data-fancybox-fullscreen]', function(e) {\r\n\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tFullScreen.toggle( $container[ 0 ] );\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif ( instance.opts.fullScreen && instance.opts.fullScreen.autoStart === true ) {\r\n\t\t\t\t\tFullScreen.request( $container[ 0 ] );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Expose API\r\n\t\t\t\tinstance.FullScreen = FullScreen;\r\n\r\n\t\t\t} else if ( instance ) {\r\n\t\t\t\tinstance.$refs.toolbar.find('[data-fancybox-fullscreen]').hide();\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\r\n\r\n\t\t\t// \"P\" or Spacebar\r\n\t\t\tif ( instance && instance.FullScreen && keycode === 70 ) {\r\n\t\t\t\tkeypress.preventDefault();\r\n\r\n\t\t\t\tinstance.FullScreen.toggle( instance.$refs.container[ 0 ] );\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t'beforeClose.fb' : function( instance ) {\r\n\t\t\tif ( instance && instance.FullScreen ) {\r\n\t\t\t\tFullScreen.exit();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).on(fn.fullscreenchange, function() {\r\n\t\tvar isFullscreen = FullScreen.isFullscreen(),\r\n\t\t\tinstance = $.fancybox.getInstance();\r\n\r\n\t\tif ( instance ) {\r\n\r\n\t\t\t// If image is zooming, then force to stop and reposition properly\r\n\t\t\tif ( instance.current && instance.current.type === 'image' && instance.isAnimating ) {\r\n\t\t\t\tinstance.current.$content.css( 'transition', 'none' );\r\n\r\n\t\t\t\tinstance.isAnimating = false;\r\n\r\n\t\t\t\tinstance.update( true, true, 0 );\r\n\t\t\t}\r\n\r\n\t\t\tinstance.trigger( 'onFullscreenChange', isFullscreen );\r\n\r\n\t\t\tinstance.$refs.container.toggleClass( 'fancybox-is-fullscreen', isFullscreen );\r\n\t\t}\r\n\r\n\t});\r\n\r\n}( document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// Thumbs\r\n// Displays thumbnails in a grid\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\t// Make sure there are default values\r\n\t$.fancybox.defaults = $.extend(true, {\r\n\t\tbtnTpl : {\r\n\t\t\tthumbs :\r\n\t\t\t'<button data-fancybox-thumbs class=\"fancybox-button fancybox-button--thumbs\" title=\"{{THUMBS}}\">' +\r\n\t\t\t\t'<svg viewBox=\"0 0 120 120\">' +\r\n\t\t\t\t\t'<path d=\"M30,30 h14 v14 h-14 Z M50,30 h14 v14 h-14 Z M70,30 h14 v14 h-14 Z M30,50 h14 v14 h-14 Z M50,50 h14 v14 h-14 Z M70,50 h14 v14 h-14 Z M30,70 h14 v14 h-14 Z M50,70 h14 v14 h-14 Z M70,70 h14 v14 h-14 Z\" />' +\r\n\t\t\t\t'</svg>' +\r\n\t\t\t'</button>'\r\n\t\t},\r\n\t\tthumbs : {\r\n\t\t\tautoStart   : false,                  // Display thumbnails on opening\r\n\t\t\thideOnClose : true,                   // Hide thumbnail grid when closing animation starts\r\n\t\t\tparentEl    : '.fancybox-container',  // Container is injected into this element\r\n\t\t\taxis        : 'y'                     // Vertical (y) or horizontal (x) scrolling\r\n\t\t}\r\n\t}, $.fancybox.defaults);\r\n\r\n\tvar FancyThumbs = function( instance ) {\r\n\t\tthis.init( instance );\r\n\t};\r\n\r\n\t$.extend( FancyThumbs.prototype, {\r\n\r\n\t\t$button\t\t: null,\r\n\t\t$grid\t\t: null,\r\n\t\t$list\t\t: null,\r\n\t\tisVisible\t: false,\r\n\t\tisActive\t: false,\r\n\r\n\t\tinit : function( instance ) {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tself.instance = instance;\r\n\r\n\t\t\tinstance.Thumbs = self;\r\n\r\n\t\t\t// Enable thumbs if at least two group items have thumbnails\r\n\t\t\tvar first  = instance.group[0],\r\n\t\t\t\tsecond = instance.group[1];\r\n\r\n\t\t\tself.opts = instance.group[ instance.currIndex ].opts.thumbs;\r\n\r\n\t\t\tself.$button = instance.$refs.toolbar.find( '[data-fancybox-thumbs]' );\r\n\r\n\t\t\tif ( self.opts && first && second && (\r\n\t\t    \t\t( first.type == 'image'  || first.opts.thumb  || first.opts.$thumb ) &&\r\n\t\t    \t\t( second.type == 'image' || second.opts.thumb || second.opts.$thumb )\r\n\t\t\t)) {\r\n\r\n\t\t\t\tself.$button.show().on('click', function() {\r\n\t\t\t\t\tself.toggle();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tself.isActive = true;\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.$button.hide();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcreate : function() {\r\n\t\t\tvar self = this,\r\n\t\t\t\tinstance = self.instance,\r\n\t\t\t\tparentEl = self.opts.parentEl,\r\n\t\t\t\tlist,\r\n\t\t\t\tsrc;\r\n\r\n\t\t\tself.$grid = $('<div class=\"fancybox-thumbs fancybox-thumbs-' + self.opts.axis + '\"></div>').appendTo( instance.$refs.container.find( parentEl ).addBack().filter( parentEl ) );\r\n\r\n\t\t\t// Build list HTML\r\n\t\t\tlist = '<ul>';\r\n\r\n\t\t\t$.each(instance.group, function( i, item ) {\r\n\t\t\t\tsrc = item.opts.thumb || ( item.opts.$thumb ? item.opts.$thumb.attr( 'src' ) : null );\r\n\r\n\t\t\t\tif ( !src && item.type === 'image' ) {\r\n\t\t\t\t\tsrc = item.src;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( src && src.length ) {\r\n\t\t\t\t\tlist += '<li data-index=\"' + i + '\"  tabindex=\"0\" class=\"fancybox-thumbs-loading\"><img data-src=\"' + src + '\" /></li>';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tlist += '</ul>';\r\n\r\n\t\t\tself.$list = $( list ).appendTo( self.$grid ).on('click', 'li', function() {\r\n\t\t\t\tinstance.jumpTo( $(this).data('index') );\r\n\t\t\t});\r\n\r\n\t\t\tself.$list.find( 'img' ).hide().one('load', function() {\r\n\t\t\t\tvar $parent\t\t= $(this).parent().removeClass( 'fancybox-thumbs-loading' ),\r\n\t\t\t\t\tthumbWidth\t= $parent.outerWidth(),\r\n\t\t\t\t\tthumbHeight\t= $parent.outerHeight(),\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight,\r\n\t\t\t\t\twidthRatio,\r\n\t\t\t\t\theightRatio;\r\n\r\n\t\t\t\twidth  = this.naturalWidth\t|| this.width;\r\n\t\t\t\theight = this.naturalHeight\t|| this.height;\r\n\r\n\t\t\t\t// Calculate thumbnail dimensions; center vertically and horizontally\r\n\t\t\t\twidthRatio  = width  / thumbWidth;\r\n\t\t\t\theightRatio = height / thumbHeight;\r\n\r\n\t\t\t\tif (widthRatio >= 1 && heightRatio >= 1) {\r\n\t\t\t\t\tif (widthRatio > heightRatio) {\r\n\t\t\t\t\t\twidth  = width / heightRatio;\r\n\t\t\t\t\t\theight = thumbHeight;\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twidth  = thumbWidth;\r\n\t\t\t\t\t\theight = height / widthRatio;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(this).css({\r\n\t\t\t\t\twidth         : Math.floor(width),\r\n\t\t\t\t\theight        : Math.floor(height),\r\n\t\t\t\t\t'margin-top'  : height > thumbHeight ? ( Math.floor(thumbHeight * 0.3 - height * 0.3 ) ) : Math.floor(thumbHeight * 0.5 - height * 0.5 ),\r\n\t\t\t\t\t'margin-left' : Math.floor(thumbWidth * 0.5 - width * 0.5 )\r\n\t\t\t\t}).show();\r\n\r\n\t\t\t})\r\n\t\t\t.each(function() {\r\n\t\t\t\tthis.src = $( this ).data( 'src' );\r\n\t\t\t});\r\n\r\n\t\t\tif ( self.opts.axis === 'x' ) {\r\n\t\t\t\tself.$list.width( parseInt( self.$grid.css(\"padding-right\") ) + ( instance.group.length * self.$list.children().eq(0).outerWidth(true) ) + 'px' );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfocus : function( duration ) {\r\n\t\t\tvar self = this,\r\n\t\t\t\t$list = self.$list,\r\n\t\t\t\tthumb,\r\n\t\t\t\tthumbPos;\r\n\r\n\t\t\tif ( self.instance.current ) {\r\n\t\t\t\tthumb = $list.children()\r\n\t\t\t\t\t.removeClass( 'fancybox-thumbs-active' )\r\n\t\t\t\t\t.filter('[data-index=\"' + self.instance.current.index  + '\"]')\r\n\t\t\t\t\t.addClass('fancybox-thumbs-active');\r\n\r\n\t\t\t\tthumbPos = thumb.position();\r\n\r\n\t\t\t\t// Check if need to scroll to make current thumb visible\r\n\t\t\t\tif ( self.opts.axis === 'y' && ( thumbPos.top < 0 || thumbPos.top > ( $list.height() - thumb.outerHeight() ) ) ) {\r\n\t\t\t\t\t$list.stop().animate({ 'scrollTop' : $list.scrollTop() + thumbPos.top }, duration);\r\n\r\n\t\t\t\t} else if ( self.opts.axis === 'x' && (\r\n\t\t\t\t\t\tthumbPos.left < $list.parent().scrollLeft() ||\r\n\t\t\t\t\t\tthumbPos.left > ( $list.parent().scrollLeft() + ( $list.parent().width() - thumb.outerWidth() ) )\r\n\t\t\t\t\t)\r\n\t\t\t\t) {\r\n\t\t\t\t\t$list.parent().stop().animate({ 'scrollLeft' : thumbPos.left }, duration);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tupdate : function() {\r\n\t\t\tthis.instance.$refs.container.toggleClass( 'fancybox-show-thumbs', this.isVisible );\r\n\r\n\t\t\tif ( this.isVisible ) {\r\n\t\t\t\tif ( !this.$grid ) {\r\n\t\t\t\t\tthis.create();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.instance.trigger( 'onThumbsShow' );\r\n\r\n\t\t\t\tthis.focus( 0 );\r\n\r\n\t\t\t} else if ( this.$grid ) {\r\n\t\t\t\tthis.instance.trigger( 'onThumbsHide' );\r\n\t\t\t}\r\n\r\n\t\t\t// Update content position\r\n\t\t\tthis.instance.update();\r\n\t\t},\r\n\r\n\t\thide : function() {\r\n\t\t\tthis.isVisible = false;\r\n\t\t\tthis.update();\r\n\t\t},\r\n\r\n\t\tshow : function() {\r\n\t\t\tthis.isVisible = true;\r\n\t\t\tthis.update();\r\n\t\t},\r\n\r\n\t\ttoggle : function() {\r\n\t\t\tthis.isVisible = !this.isVisible;\r\n\t\t\tthis.update();\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).on({\r\n\r\n\t\t'onInit.fb' : function(e, instance) {\r\n\t\t\tvar Thumbs;\r\n\r\n\t\t\tif ( instance && !instance.Thumbs ) {\r\n\t\t\t\tThumbs = new FancyThumbs( instance );\r\n\r\n\t\t\t\tif ( Thumbs.isActive && Thumbs.opts.autoStart === true ) {\r\n\t\t\t\t\tThumbs.show();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeShow.fb' : function(e, instance, item, firstRun) {\r\n\t\t\tvar Thumbs = instance && instance.Thumbs;\r\n\r\n\t\t\tif ( Thumbs && Thumbs.isVisible ) {\r\n\t\t\t\tThumbs.focus( firstRun ? 0 : 250 );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\r\n\t\t\tvar Thumbs = instance && instance.Thumbs;\r\n\r\n\t\t\t// \"G\"\r\n\t\t\tif ( Thumbs && Thumbs.isActive && keycode === 71 ) {\r\n\t\t\t\tkeypress.preventDefault();\r\n\r\n\t\t\t\tThumbs.toggle();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeClose.fb' : function( e, instance ) {\r\n\t\t\tvar Thumbs = instance && instance.Thumbs;\r\n\r\n\t\t\tif ( Thumbs && Thumbs.isVisible && Thumbs.opts.hideOnClose !== false ) {\r\n\t\t\t\tThumbs.$grid.hide();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n}(document, window.jQuery));\r\n\r\n//// ==========================================================================\r\n//\r\n// Share\r\n// Displays simple form for sharing current url\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\t$.extend(true, $.fancybox.defaults, {\r\n\t\tbtnTpl : {\r\n\t\t\tshare :\r\n\t\t\t\t'<button data-fancybox-share class=\"fancybox-button fancybox-button--share\" title=\"{{SHARE}}\">' +\r\n\t\t\t\t\t'<svg viewBox=\"0 0 40 40\">' +\r\n\t\t\t\t\t\t'<path d=\"M6,30 C8,18 19,16 23,16 L23,16 L23,10 L33,20 L23,29 L23,24 C19,24 8,27 6,30 Z\">' +\r\n\t\t\t\t\t'</svg>' +\r\n\t\t\t\t'</button>'\r\n\t\t},\r\n\t\tshare : {\r\n\t\t\ttpl :\r\n\t\t\t\t'<div class=\"fancybox-share\">' +\r\n\t\t\t\t\t'<h1>{{SHARE}}</h1>' +\r\n\t\t\t\t\t'<p class=\"fancybox-share__links\">' +\r\n\t\t\t\t\t\t'<a class=\"fancybox-share__button fancybox-share__button--fb\" href=\"https://www.facebook.com/sharer/sharer.php?u={{url}}\">' +\r\n\t\t\t\t\t\t\t'<svg viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m287 456v-299c0-21 6-35 35-35h38v-63c-7-1-29-3-55-3-54 0-91 33-91 94v306m143-254h-205v72h196\" /></svg>' +\r\n\t\t\t\t\t\t\t'<span>Facebook</span>' +\r\n\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t\t'<a class=\"fancybox-share__button fancybox-share__button--pt\" href=\"https://www.pinterest.com/pin/create/button/?url={{url}}&description={{descr}}&media={{media}}\">' +\r\n\t\t\t\t\t\t\t'<svg viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m265 56c-109 0-164 78-164 144 0 39 15 74 47 87 5 2 10 0 12-5l4-19c2-6 1-8-3-13-9-11-15-25-15-45 0-58 43-110 113-110 62 0 96 38 96 88 0 67-30 122-73 122-24 0-42-19-36-44 6-29 20-60 20-81 0-19-10-35-31-35-25 0-44 26-44 60 0 21 7 36 7 36l-30 125c-8 37-1 83 0 87 0 3 4 4 5 2 2-3 32-39 42-75l16-64c8 16 31 29 56 29 74 0 124-67 124-157 0-69-58-132-146-132z\" fill=\"#fff\"/></svg>' +\r\n\t\t\t\t\t\t\t'<span>Pinterest</span>' +\r\n\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t\t'<a class=\"fancybox-share__button fancybox-share__button--tw\" href=\"https://twitter.com/intent/tweet?url={{url}}&text={{descr}}\">' +\r\n\t\t\t\t\t\t\t'<svg viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m456 133c-14 7-31 11-47 13 17-10 30-27 37-46-15 10-34 16-52 20-61-62-157-7-141 75-68-3-129-35-169-85-22 37-11 86 26 109-13 0-26-4-37-9 0 39 28 72 65 80-12 3-25 4-37 2 10 33 41 57 77 57-42 30-77 38-122 34 170 111 378-32 359-208 16-11 30-25 41-42z\" /></svg>' +\r\n\t\t\t\t\t\t\t'<span>Twitter</span>' +\r\n\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t'</p>' +\r\n\t\t\t\t\t'<p><input class=\"fancybox-share__input\" type=\"text\" value=\"{{url_raw}}\" /></p>' +\r\n\t\t\t\t'</div>'\r\n\t\t}\r\n\t});\r\n\r\n\tfunction escapeHtml(string) {\r\n\t\tvar entityMap = {\r\n\t\t  '&': '&amp;',\r\n\t\t  '<': '&lt;',\r\n\t\t  '>': '&gt;',\r\n\t\t  '\"': '&quot;',\r\n\t\t  \"'\": '&#39;',\r\n\t\t  '/': '&#x2F;',\r\n\t\t  '`': '&#x60;',\r\n\t\t  '=': '&#x3D;'\r\n\t\t};\r\n\r\n\t\treturn String(string).replace(/[&<>\"'`=\\/]/g, function (s) {\r\n\t\t\treturn entityMap[s];\r\n\t\t});\r\n\t}\r\n\r\n\t$(document).on('click', '[data-fancybox-share]', function() {\r\n\t\tvar f = $.fancybox.getInstance(),\r\n\t\t\turl,\r\n\t\t\ttpl;\r\n\r\n\t\tif ( f ) {\r\n\t\t\turl = f.current.opts.hash === false ? f.current.src : window.location;\r\n\t\t\ttpl = f.current.opts.share.tpl\r\n\t\t\t\t\t.replace( /\\{\\{media\\}\\}/g, f.current.type === 'image' ? encodeURIComponent( f.current.src ) : '' )\r\n\t\t\t\t\t.replace( /\\{\\{url\\}\\}/g, encodeURIComponent( url ) )\r\n\t\t\t\t\t.replace( /\\{\\{url_raw\\}\\}/g, escapeHtml( url ) )\r\n\t\t\t\t\t.replace( /\\{\\{descr\\}\\}/g, f.$caption ? encodeURIComponent( f.$caption.text() ) : '' );\r\n\r\n\t\t\t$.fancybox.open({\r\n\t\t\t\tsrc  : f.translate( f, tpl ),\r\n\t\t\t\ttype : 'html',\r\n\t\t\t\topts : {\r\n\t\t\t\t\tanimationEffect   : \"fade\",\r\n\t\t\t\t\tanimationDuration : 250,\r\n\t\t\t\t\tafterLoad : function(instance, current) {\r\n\t\t\t\t\t\t// Opening links in a popup window\r\n\t\t\t\t\t\tcurrent.$content.find('.fancybox-share__links a').click(function() {\r\n\t\t\t\t\t        window.open(this.href, \"Share\", \"width=550, height=450\");\r\n\t\t\t\t\t        return false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t});\r\n\r\n}( document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// Hash\r\n// Enables linking to each modal\r\n//\r\n// ==========================================================================\r\n;(function (document, window, $) {\r\n\t'use strict';\r\n\r\n\t// Simple $.escapeSelector polyfill (for jQuery prior v3)\r\n\tif ( !$.escapeSelector ) {\r\n\t\t$.escapeSelector = function( sel ) {\r\n\t\t\tvar rcssescape = /([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\x80-\\uFFFF\\w-]/g;\r\n\t\t\tvar fcssescape = function( ch, asCodePoint ) {\r\n\t\t\t\tif ( asCodePoint ) {\r\n\t\t\t\t\t// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\r\n\t\t\t\t\tif ( ch === \"\\0\" ) {\r\n\t\t\t\t\t\treturn \"\\uFFFD\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Control characters and (dependent upon position) numbers get escaped as code points\r\n\t\t\t\t\treturn ch.slice( 0, -1 ) + \"\\\\\" + ch.charCodeAt( ch.length - 1 ).toString( 16 ) + \" \";\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Other potentially-special ASCII characters get backslash-escaped\r\n\t\t\t\treturn \"\\\\\" + ch;\r\n\t\t\t};\r\n\r\n\t\t\treturn ( sel + \"\" ).replace( rcssescape, fcssescape );\r\n\t\t};\r\n\t}\r\n\r\n\t// Create new history entry only once\r\n\tvar shouldCreateHistory = true;\r\n\r\n\t// Variable containing last hash value set by fancyBox\r\n\t// It will be used to determine if fancyBox needs to close after hash change is detected\r\n    var currentHash = null;\r\n\r\n\t// Throttling the history change\r\n\tvar timerID = null;\r\n\r\n\t// Get info about gallery name and current index from url\r\n    function parseUrl() {\r\n        var hash    = window.location.hash.substr( 1 );\r\n        var rez     = hash.split( '-' );\r\n        var index   = rez.length > 1 && /^\\+?\\d+$/.test( rez[ rez.length - 1 ] ) ? parseInt( rez.pop( -1 ), 10 ) || 1 : 1;\r\n        var gallery = rez.join( '-' );\r\n\r\n\t\t// Index is starting from 1\r\n\t\tif ( index < 1 ) {\r\n\t\t\tindex = 1;\r\n\t\t}\r\n\r\n        return {\r\n            hash    : hash,\r\n            index   : index,\r\n            gallery : gallery\r\n        };\r\n    }\r\n\r\n\t// Trigger click evnt on links to open new fancyBox instance\r\n\tfunction triggerFromUrl( url ) {\r\n\t\tvar $el;\r\n\r\n        if ( url.gallery !== '' ) {\r\n\r\n\t\t\t// If we can find element matching 'data-fancybox' atribute, then trigger click event for that ..\r\n\t\t\t$el = $( \"[data-fancybox='\" + $.escapeSelector( url.gallery ) + \"']\" ).eq( url.index - 1 );\r\n\r\n            if ( !$el.length ) {\r\n\t\t\t\t// .. if not, try finding element by ID\r\n\t\t\t\t$el = $( \"#\" + $.escapeSelector( url.gallery ) + \"\" );\r\n\t\t\t}\r\n\r\n\t\t\tif ( $el.length ) {\r\n\t\t\t\tshouldCreateHistory = false;\r\n\r\n\t\t\t\t$el.trigger( 'click' );\r\n\t\t\t}\r\n\r\n        }\r\n\t}\r\n\r\n\t// Get gallery name from current instance\r\n\tfunction getGalleryID( instance ) {\r\n\t\tvar opts;\r\n\r\n\t\tif ( !instance ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\topts = instance.current ? instance.current.opts : instance.opts;\r\n\r\n\t\treturn opts.hash || ( opts.$orig ? opts.$orig.data( 'fancybox' ) : ''  );\r\n\t}\r\n\r\n\t// Start when DOM becomes ready\r\n    $(function() {\r\n\r\n\t\t// Check if user has disabled this module\r\n\t\tif ( $.fancybox.defaults.hash === false ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Update hash when opening/closing fancyBox\r\n\t    $(document).on({\r\n\t\t\t'onInit.fb' : function( e, instance ) {\r\n\t\t\t\tvar url, gallery;\r\n\r\n\t\t\t\tif ( instance.group[ instance.currIndex ].opts.hash === false ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\turl     = parseUrl();\r\n\t\t\t\tgallery = getGalleryID( instance );\r\n\r\n\t\t\t\t// Make sure gallery start index matches index from hash\r\n\t\t\t\tif ( gallery && url.gallery && gallery == url.gallery ) {\r\n\t\t\t\t\tinstance.currIndex = url.index - 1;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t'beforeShow.fb' : function( e, instance, current ) {\r\n\t\t\t\tvar gallery;\r\n\r\n\t\t\t\tif ( !current || current.opts.hash === false ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t            gallery = getGalleryID( instance );\r\n\r\n\t            // Update window hash\r\n\t            if ( gallery && gallery !== '' ) {\r\n\r\n\t\t\t\t\tif ( window.location.hash.indexOf( gallery ) < 0 ) {\r\n\t\t                instance.opts.origHash = window.location.hash;\r\n\t\t            }\r\n\r\n\t\t\t\t\tcurrentHash = gallery + ( instance.group.length > 1 ? '-' + ( current.index + 1 ) : '' );\r\n\r\n\t\t\t\t\tif ( 'replaceState' in window.history ) {\r\n\t\t\t\t\t\tif ( timerID ) {\r\n\t\t\t\t\t\t\tclearTimeout( timerID );\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttimerID = setTimeout(function() {\r\n\t\t\t\t\t\t\twindow.history[ shouldCreateHistory ? 'pushState' : 'replaceState' ]( {} , document.title, window.location.pathname + window.location.search + '#' +  currentHash );\r\n\r\n\t\t\t\t\t\t\ttimerID = null;\r\n\r\n\t\t\t\t\t\t\tshouldCreateHistory = false;\r\n\r\n\t\t\t\t\t\t}, 300);\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twindow.location.hash = currentHash;\r\n\t\t\t\t\t}\r\n\r\n\t            }\r\n\r\n\t        },\r\n\r\n\t\t\t'beforeClose.fb' : function( e, instance, current ) {\r\n\t\t\t\tvar gallery, origHash;\r\n\r\n\t\t\t\tif ( timerID ) {\r\n\t\t\t\t\tclearTimeout( timerID );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( current.opts.hash === false ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgallery  = getGalleryID( instance );\r\n\t\t\t\torigHash = instance && instance.opts.origHash ? instance.opts.origHash : '';\r\n\r\n\t            // Remove hash from location bar\r\n\t            if ( gallery && gallery !== '' ) {\r\n\r\n\t                if ( 'replaceState' in history ) {\r\n\t\t\t\t\t\twindow.history.replaceState( {} , document.title, window.location.pathname + window.location.search + origHash );\r\n\r\n\t                } else {\r\n\t\t\t\t\t\twindow.location.hash = origHash;\r\n\r\n\t\t\t\t\t\t// Keep original scroll position\r\n\t\t\t\t\t\t$( window ).scrollTop( instance.scrollTop ).scrollLeft( instance.scrollLeft );\r\n\t                }\r\n\t            }\r\n\r\n\t\t\t\tcurrentHash = null;\r\n\t        }\r\n\t    });\r\n\r\n\t\t// Check if need to close after url has changed\r\n\t\t$(window).on('hashchange.fb', function() {\r\n\t\t\tvar url = parseUrl();\r\n\r\n\t\t\tif ( $.fancybox.getInstance() ) {\r\n\t\t\t\tif ( currentHash && currentHash !== url.gallery + '-' + url.index && !( url.index === 1 && currentHash == url.gallery ) ) {\r\n\t\t\t\t\tcurrentHash = null;\r\n\r\n\t\t\t\t\t$.fancybox.close();\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( url.gallery !== '' ) {\r\n\t\t\t\ttriggerFromUrl( url );\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Check current hash and trigger click event on matching element to start fancyBox, if needed\r\n\t\tsetTimeout(function() {\r\n\t\t\ttriggerFromUrl( parseUrl() );\r\n\t\t}, 50);\r\n    });\r\n\r\n}( document, window, window.jQuery || jQuery ));\r\n\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\tvar prevTime = new Date().getTime();\r\n\r\n    $(document).on({\r\n        'onInit.fb' : function( e, instance, current ) {\r\n\t\t\tinstance.$refs.stage.on('mousewheel DOMMouseScroll wheel MozMousePixelScroll', function(e) {\r\n\t\t\t\tvar current  = instance.current,\r\n\t\t\t\t\tcurrTime = new Date().getTime();\r\n\r\n\t\t\t\tif ( instance.group.length < 1 || current.opts.wheel === false || ( current.opts.wheel === 'auto' && current.type !== 'image' ) ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\r\n\t\t\t\tif ( current.$slide.hasClass( 'fancybox-animated' ) ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\te = e.originalEvent || e;\r\n\r\n\t\t\t\tif ( currTime - prevTime < 250 ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tprevTime = currTime;\r\n\r\n\t\t\t\tinstance[ ( -e.deltaY || -e.deltaX || e.wheelDelta || -e.detail ) < 0 ? 'next' : 'previous' ]();\r\n\r\n\t\t\t});\r\n\t\t}\r\n    });\r\n\r\n}( document, window.jQuery || jQuery ));\r\n","/*\r\n * jQuery Form Styler v2.0.2\r\n * https://github.com/Dimox/jQueryFormStyler\r\n *\r\n * Copyright 2012-2017 Dimox (http://dimox.name/)\r\n * Released under the MIT license.\r\n *\r\n * Date: 2017.10.22\r\n *\r\n */\r\n\r\n;(function(factory) {\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\t// AMD\r\n\t\tdefine(['jquery'], factory);\r\n\t} else if (typeof exports === 'object') {\r\n\t\t// CommonJS\r\n\t\tmodule.exports = factory($ || require('jquery'));\r\n\t} else {\r\n\t\tfactory(jQuery);\r\n\t}\r\n}(function($) {\r\n\r\n\t'use strict';\r\n\r\n\tvar pluginName = 'styler',\r\n\t\t\tdefaults = {\r\n\t\t\t\tidSuffix: '-styler',\r\n\t\t\t\tfilePlaceholder: 'Файл не выбран',\r\n\t\t\t\tfileBrowse: 'Обзор...',\r\n\t\t\t\tfileNumber: 'Выбрано файлов: %s',\r\n\t\t\t\tselectPlaceholder: 'Выберите...',\r\n\t\t\t\tselectSearch: false,\r\n\t\t\t\tselectSearchLimit: 10,\r\n\t\t\t\tselectSearchNotFound: 'Совпадений не найдено',\r\n\t\t\t\tselectSearchPlaceholder: 'Поиск...',\r\n\t\t\t\tselectVisibleOptions: 0,\r\n\t\t\t\tselectSmartPositioning: true,\r\n\t\t\t\tlocale: 'ru',\r\n\t\t\t\tlocales: {\r\n\t\t\t\t\t'en': {\r\n\t\t\t\t\t\tfilePlaceholder: 'No file selected',\r\n\t\t\t\t\t\tfileBrowse: 'Browse...',\r\n\t\t\t\t\t\tfileNumber: 'Selected files: %s',\r\n\t\t\t\t\t\tselectPlaceholder: 'Select...',\r\n\t\t\t\t\t\tselectSearchNotFound: 'No matches found',\r\n\t\t\t\t\t\tselectSearchPlaceholder: 'Search...'\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tonSelectOpened: function() {},\r\n\t\t\t\tonSelectClosed: function() {},\r\n\t\t\t\tonFormStyled: function() {}\r\n\t\t\t};\r\n\r\n\tfunction Plugin(element, options) {\r\n\t\tthis.element = element;\r\n\t\tthis.options = $.extend({}, defaults, options);\r\n\t\tvar locale = this.options.locale;\r\n\t\tif (this.options.locales[locale] !== undefined) {\r\n\t\t\t$.extend(this.options, this.options.locales[locale]);\r\n\t\t}\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tPlugin.prototype = {\r\n\r\n\t\t// инициализация\r\n\t\tinit: function() {\r\n\r\n\t\t\tvar el = $(this.element);\r\n\t\t\tvar opt = this.options;\r\n\r\n\t\t\tvar iOS = (navigator.userAgent.match(/(iPad|iPhone|iPod)/i) && !navigator.userAgent.match(/(Windows\\sPhone)/i)) ? true : false;\r\n\t\t\tvar Android = (navigator.userAgent.match(/Android/i) && !navigator.userAgent.match(/(Windows\\sPhone)/i)) ? true : false;\r\n\r\n\t\t\tfunction Attributes() {\r\n\t\t\t\tif (el.attr('id') !== undefined && el.attr('id') !== '') {\r\n\t\t\t\t\tthis.id = el.attr('id') + opt.idSuffix;\r\n\t\t\t\t}\r\n\t\t\t\tthis.title = el.attr('title');\r\n\t\t\t\tthis.classes = el.attr('class');\r\n\t\t\t\tthis.data = el.data();\r\n\t\t\t}\r\n\r\n\t\t\t// checkbox\r\n\t\t\tif (el.is(':checkbox')) {\r\n\r\n\t\t\t\tvar checkboxOutput = function() {\r\n\r\n\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\tvar checkbox = $('<div class=\"jq-checkbox\"><div class=\"jq-checkbox__div\"></div></div>')\r\n\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t;\r\n\r\n\t\t\t\t\tel.after(checkbox).prependTo(checkbox);\r\n\t\t\t\t\tif (el.is(':checked')) checkbox.addClass('checked');\r\n\t\t\t\t\tif (el.is(':disabled')) checkbox.addClass('disabled');\r\n\r\n\t\t\t\t\t// клик на псевдочекбокс\r\n\t\t\t\t\tcheckbox.click(function(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tel.triggerHandler('click');\r\n\t\t\t\t\t\tif (!checkbox.is('.disabled')) {\r\n\t\t\t\t\t\t\tif (el.is(':checked')) {\r\n\t\t\t\t\t\t\t\tel.prop('checked', false);\r\n\t\t\t\t\t\t\t\tcheckbox.removeClass('checked');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tel.prop('checked', true);\r\n\t\t\t\t\t\t\t\tcheckbox.addClass('checked');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tel.focus().change();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// клик на label\r\n\t\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').on('click.styler', function(e) {\r\n\t\t\t\t\t\tif (!$(e.target).is('a') && !$(e.target).closest(checkbox).length) {\r\n\t\t\t\t\t\t\tcheckbox.triggerHandler('click');\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// переключение по Space или Enter\r\n\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\tif (el.is(':checked')) checkbox.addClass('checked');\r\n\t\t\t\t\t\telse checkbox.removeClass('checked');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// чтобы переключался чекбокс, который находится в теге label\r\n\t\t\t\t\t.on('keydown.styler', function(e) {\r\n\t\t\t\t\t\tif (e.which == 32) checkbox.click();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\tif (!checkbox.is('.disabled')) checkbox.addClass('focused');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\tcheckbox.removeClass('focused');\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}; // end checkboxOutput()\r\n\r\n\t\t\t\tcheckboxOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').off('.styler');\r\n\t\t\t\t\tel.off('.styler').parent().before(el).remove();\r\n\t\t\t\t\tcheckboxOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end checkbox\r\n\r\n\t\t\t// radio\r\n\t\t\t} else if (el.is(':radio')) {\r\n\r\n\t\t\t\tvar radioOutput = function() {\r\n\r\n\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\tvar radio = $('<div class=\"jq-radio\"><div class=\"jq-radio__div\"></div></div>')\r\n\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t;\r\n\r\n\t\t\t\t\tel.after(radio).prependTo(radio);\r\n\t\t\t\t\tif (el.is(':checked')) radio.addClass('checked');\r\n\t\t\t\t\tif (el.is(':disabled')) radio.addClass('disabled');\r\n\r\n\t\t\t\t\t// определяем общего родителя у радиокнопок с одинаковым name\r\n\t\t\t\t\t// http://stackoverflow.com/a/27733847\r\n\t\t\t\t\t$.fn.commonParents = function() {\r\n\t\t\t\t\t\tvar cachedThis = this;\r\n\t\t\t\t\t\treturn cachedThis.first().parents().filter(function() {\r\n\t\t\t\t\t\t\treturn $(this).find(cachedThis).length === cachedThis.length;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t\t$.fn.commonParent = function() {\r\n\t\t\t\t\t\treturn $(this).commonParents().first();\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// клик на псевдорадиокнопке\r\n\t\t\t\t\tradio.click(function(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tel.triggerHandler('click');\r\n\t\t\t\t\t\tif (!radio.is('.disabled')) {\r\n\t\t\t\t\t\t\tvar inputName = $('input[name=\"' + el.attr('name') + '\"]');\r\n\t\t\t\t\t\t\tinputName.commonParent().find(inputName).prop('checked', false).parent().removeClass('checked');\r\n\t\t\t\t\t\t\tel.prop('checked', true).parent().addClass('checked');\r\n\t\t\t\t\t\t\tel.focus().change();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// клик на label\r\n\t\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').on('click.styler', function(e) {\r\n\t\t\t\t\t\tif (!$(e.target).is('a') && !$(e.target).closest(radio).length) {\r\n\t\t\t\t\t\t\tradio.triggerHandler('click');\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// переключение стрелками\r\n\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\tel.parent().addClass('checked');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\tif (!radio.is('.disabled')) radio.addClass('focused');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\tradio.removeClass('focused');\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}; // end radioOutput()\r\n\r\n\t\t\t\tradioOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').off('.styler');\r\n\t\t\t\t\tel.off('.styler').parent().before(el).remove();\r\n\t\t\t\t\tradioOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end radio\r\n\r\n\t\t\t// file\r\n\t\t\t} else if (el.is(':file')) {\r\n\r\n\t\t\t\tvar fileOutput = function() {\r\n\r\n\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\tvar placeholder = el.data('placeholder');\r\n\t\t\t\t\tif (placeholder === undefined) placeholder = opt.filePlaceholder;\r\n\t\t\t\t\tvar browse = el.data('browse');\r\n\t\t\t\t\tif (browse === undefined || browse === '') browse = opt.fileBrowse;\r\n\r\n\t\t\t\t\tvar file =\r\n\t\t\t\t\t\t$('<div class=\"jq-file\">' +\r\n\t\t\t\t\t\t\t\t'<div class=\"jq-file__name\">' + placeholder + '</div>' +\r\n\t\t\t\t\t\t\t\t'<div class=\"jq-file__browse\">' + browse + '</div>' +\r\n\t\t\t\t\t\t\t'</div>')\r\n\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t;\r\n\r\n\t\t\t\t\tel.after(file).appendTo(file);\r\n\t\t\t\t\tif (el.is(':disabled')) file.addClass('disabled');\r\n\r\n\t\t\t\t\tvar value = el.val();\r\n\t\t\t\t\tvar name = $('div.jq-file__name', file);\r\n\r\n\t\t\t\t\t// чтобы при динамическом изменении имя файла не сбрасывалось\r\n\t\t\t\t\tif (value) name.text(value.replace(/.+[\\\\\\/]/, ''));\r\n\r\n\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\tvar value = el.val();\r\n\t\t\t\t\t\tif (el.is('[multiple]')) {\r\n\t\t\t\t\t\t\tvalue = '';\r\n\t\t\t\t\t\t\tvar files = el[0].files.length;\r\n\t\t\t\t\t\t\tif (files > 0) {\r\n\t\t\t\t\t\t\t\tvar number = el.data('number');\r\n\t\t\t\t\t\t\t\tif (number === undefined) number = opt.fileNumber;\r\n\t\t\t\t\t\t\t\tnumber = number.replace('%s', files);\r\n\t\t\t\t\t\t\t\tvalue = number;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tname.text(value.replace(/.+[\\\\\\/]/, ''));\r\n\t\t\t\t\t\tif (value === '') {\r\n\t\t\t\t\t\t\tname.text(placeholder);\r\n\t\t\t\t\t\t\tfile.removeClass('changed');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfile.addClass('changed');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\tfile.addClass('focused');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\tfile.removeClass('focused');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('click.styler', function() {\r\n\t\t\t\t\t\tfile.removeClass('focused');\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}; // end fileOutput()\r\n\r\n\t\t\t\tfileOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.off('.styler').parent().before(el).remove();\r\n\t\t\t\t\tfileOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end file\r\n\r\n\t\t\t// number\r\n\t\t\t} else if (el.is('input[type=\"number\"]')) {\r\n\r\n\t\t\t\tvar numberOutput = function() {\r\n\r\n\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\tvar number =\r\n\t\t\t\t\t\t$('<div class=\"jq-number\">' +\r\n\t\t\t\t\t\t\t\t'<div class=\"jq-number__spin minus\"></div>' +\r\n\t\t\t\t\t\t\t\t'<div class=\"jq-number__spin plus\"></div>' +\r\n\t\t\t\t\t\t\t'</div>')\r\n\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t;\r\n\r\n\t\t\t\t\tel.after(number).prependTo(number).wrap('<div class=\"jq-number__field\"></div>');\r\n\t\t\t\t\tif (el.is(':disabled')) number.addClass('disabled');\r\n\r\n\t\t\t\t\tvar min,\r\n\t\t\t\t\t\t\tmax,\r\n\t\t\t\t\t\t\tstep,\r\n\t\t\t\t\t\t\ttimeout = null,\r\n\t\t\t\t\t\t\tinterval = null;\r\n\t\t\t\t\tif (el.attr('min') !== undefined) min = el.attr('min');\r\n\t\t\t\t\tif (el.attr('max') !== undefined) max = el.attr('max');\r\n\t\t\t\t\tif (el.attr('step') !== undefined && $.isNumeric(el.attr('step')))\r\n\t\t\t\t\t\tstep = Number(el.attr('step'));\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tstep = Number(1);\r\n\r\n\t\t\t\t\tvar changeValue = function(spin) {\r\n\t\t\t\t\t\tvar value = el.val(),\r\n\t\t\t\t\t\t\t\tnewValue;\r\n\r\n\t\t\t\t\t\tif (!$.isNumeric(value)) {\r\n\t\t\t\t\t\t\tvalue = 0;\r\n\t\t\t\t\t\t\tel.val('0');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (spin.is('.minus')) {\r\n\t\t\t\t\t\t\tnewValue = Number(value) - step;\r\n\t\t\t\t\t\t} else if (spin.is('.plus')) {\r\n\t\t\t\t\t\t\tnewValue = Number(value) + step;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// определяем количество десятичных знаков после запятой в step\r\n\t\t\t\t\t\tvar decimals = (step.toString().split('.')[1] || []).length;\r\n\t\t\t\t\t\tif (decimals > 0) {\r\n\t\t\t\t\t\t\tvar multiplier = '1';\r\n\t\t\t\t\t\t\twhile (multiplier.length <= decimals) multiplier = multiplier + '0';\r\n\t\t\t\t\t\t\t// избегаем появления лишних знаков после запятой\r\n\t\t\t\t\t\t\tnewValue = Math.round(newValue * multiplier) / multiplier;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ($.isNumeric(min) && $.isNumeric(max)) {\r\n\t\t\t\t\t\t\tif (newValue >= min && newValue <= max) el.val(newValue);\r\n\t\t\t\t\t\t} else if ($.isNumeric(min) && !$.isNumeric(max)) {\r\n\t\t\t\t\t\t\tif (newValue >= min) el.val(newValue);\r\n\t\t\t\t\t\t} else if (!$.isNumeric(min) && $.isNumeric(max)) {\r\n\t\t\t\t\t\t\tif (newValue <= max) el.val(newValue);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tel.val(newValue);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (!number.is('.disabled')) {\r\n\t\t\t\t\t\tnumber.on('mousedown', 'div.jq-number__spin', function() {\r\n\t\t\t\t\t\t\tvar spin = $(this);\r\n\t\t\t\t\t\t\tchangeValue(spin);\r\n\t\t\t\t\t\t\ttimeout = setTimeout(function(){\r\n\t\t\t\t\t\t\t\tinterval = setInterval(function(){ changeValue(spin); }, 40);\r\n\t\t\t\t\t\t\t}, 350);\r\n\t\t\t\t\t\t}).on('mouseup mouseout', 'div.jq-number__spin', function() {\r\n\t\t\t\t\t\t\tclearTimeout(timeout);\r\n\t\t\t\t\t\t\tclearInterval(interval);\r\n\t\t\t\t\t\t}).on('mouseup', 'div.jq-number__spin', function() {\r\n\t\t\t\t\t\t\tel.change().trigger('input');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tel.on('focus.styler', function() {\r\n\t\t\t\t\t\t\tnumber.addClass('focused');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\t\tnumber.removeClass('focused');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}; // end numberOutput()\r\n\r\n\t\t\t\tnumberOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.off('.styler').closest('.jq-number').before(el).remove();\r\n\t\t\t\t\tnumberOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end number\r\n\r\n\t\t\t// select\r\n\t\t\t} else if (el.is('select')) {\r\n\r\n\t\t\t\tvar selectboxOutput = function() {\r\n\r\n\t\t\t\t\t// запрещаем прокрутку страницы при прокрутке селекта\r\n\t\t\t\t\tfunction preventScrolling(selector) {\r\n\r\n\t\t\t\t\t\tvar scrollDiff = selector.prop('scrollHeight') - selector.outerHeight(),\r\n\t\t\t\t\t\t\t\twheelDelta = null,\r\n\t\t\t\t\t\t\t\tscrollTop = null;\r\n\r\n\t\t\t\t\t\tselector.off('mousewheel DOMMouseScroll').on('mousewheel DOMMouseScroll', function(e) {\r\n\r\n\t\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t\t * нормализация направления прокрутки\r\n\t\t\t\t\t\t\t * (firefox < 0 || chrome etc... > 0)\r\n\t\t\t\t\t\t\t * (e.originalEvent.detail < 0 || e.originalEvent.wheelDelta > 0)\r\n\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\twheelDelta = (e.originalEvent.detail < 0 || e.originalEvent.wheelDelta > 0) ? 1 : -1; // направление прокрутки (-1 вниз, 1 вверх)\r\n\t\t\t\t\t\t\tscrollTop = selector.scrollTop(); // позиция скролла\r\n\r\n\t\t\t\t\t\t\tif ((scrollTop >= scrollDiff && wheelDelta < 0) || (scrollTop <= 0 && wheelDelta > 0)) {\r\n\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar option = $('option', el);\r\n\t\t\t\t\tvar list = '';\r\n\t\t\t\t\t// формируем список селекта\r\n\t\t\t\t\tfunction makeList() {\r\n\t\t\t\t\t\tfor (var i = 0; i < option.length; i++) {\r\n\t\t\t\t\t\t\tvar op = option.eq(i);\r\n\t\t\t\t\t\t\tvar li = '',\r\n\t\t\t\t\t\t\t\t\tliClass = '',\r\n\t\t\t\t\t\t\t\t\tliClasses = '',\r\n\t\t\t\t\t\t\t\t\tid = '',\r\n\t\t\t\t\t\t\t\t\ttitle = '',\r\n\t\t\t\t\t\t\t\t\tdataList = '',\r\n\t\t\t\t\t\t\t\t\toptionClass = '',\r\n\t\t\t\t\t\t\t\t\toptgroupClass = '',\r\n\t\t\t\t\t\t\t\t\tdataJqfsClass = '';\r\n\t\t\t\t\t\t\tvar disabled = 'disabled';\r\n\t\t\t\t\t\t\tvar selDis = 'selected sel disabled';\r\n\t\t\t\t\t\t\tif (op.prop('selected')) liClass = 'selected sel';\r\n\t\t\t\t\t\t\tif (op.is(':disabled')) liClass = disabled;\r\n\t\t\t\t\t\t\tif (op.is(':selected:disabled')) liClass = selDis;\r\n\t\t\t\t\t\t\tif (op.attr('id') !== undefined && op.attr('id') !== '') id = ' id=\"' + op.attr('id') + opt.idSuffix + '\"';\r\n\t\t\t\t\t\t\tif (op.attr('title') !== undefined && option.attr('title') !== '') title = ' title=\"' + op.attr('title') + '\"';\r\n\t\t\t\t\t\t\tif (op.attr('class') !== undefined) {\r\n\t\t\t\t\t\t\t\toptionClass = ' ' + op.attr('class');\r\n\t\t\t\t\t\t\t\tdataJqfsClass = ' data-jqfs-class=\"' + op.attr('class') + '\"';\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar data = op.data();\r\n\t\t\t\t\t\t\tfor (var k in data) {\r\n\t\t\t\t\t\t\t\tif (data[k] !== '') dataList += ' data-' + k + '=\"' + data[k] + '\"';\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( (liClass + optionClass) !== '' )   liClasses = ' class=\"' + liClass + optionClass + '\"';\r\n\t\t\t\t\t\t\tli = '<li' + dataJqfsClass + dataList + liClasses + title + id + '>'+ op.html() +'</li>';\r\n\r\n\t\t\t\t\t\t\t// если есть optgroup\r\n\t\t\t\t\t\t\tif (op.parent().is('optgroup')) {\r\n\t\t\t\t\t\t\t\tif (op.parent().attr('class') !== undefined) optgroupClass = ' ' + op.parent().attr('class');\r\n\t\t\t\t\t\t\t\tli = '<li' + dataJqfsClass + dataList + ' class=\"' + liClass + optionClass + ' option' + optgroupClass + '\"' + title + id + '>'+ op.html() +'</li>';\r\n\t\t\t\t\t\t\t\tif (op.is(':first-child')) {\r\n\t\t\t\t\t\t\t\t\tli = '<li class=\"optgroup' + optgroupClass + '\">' + op.parent().attr('label') + '</li>' + li;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tlist += li;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} // end makeList()\r\n\r\n\t\t\t\t\t// одиночный селект\r\n\t\t\t\t\tfunction doSelect() {\r\n\r\n\t\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\t\tvar searchHTML = '';\r\n\t\t\t\t\t\tvar selectPlaceholder = el.data('placeholder');\r\n\t\t\t\t\t\tvar selectSearch = el.data('search');\r\n\t\t\t\t\t\tvar selectSearchLimit = el.data('search-limit');\r\n\t\t\t\t\t\tvar selectSearchNotFound = el.data('search-not-found');\r\n\t\t\t\t\t\tvar selectSearchPlaceholder = el.data('search-placeholder');\r\n\t\t\t\t\t\tvar selectSmartPositioning = el.data('smart-positioning');\r\n\r\n\t\t\t\t\t\tif (selectPlaceholder === undefined) selectPlaceholder = opt.selectPlaceholder;\r\n\t\t\t\t\t\tif (selectSearch === undefined || selectSearch === '') selectSearch = opt.selectSearch;\r\n\t\t\t\t\t\tif (selectSearchLimit === undefined || selectSearchLimit === '') selectSearchLimit = opt.selectSearchLimit;\r\n\t\t\t\t\t\tif (selectSearchNotFound === undefined || selectSearchNotFound === '') selectSearchNotFound = opt.selectSearchNotFound;\r\n\t\t\t\t\t\tif (selectSearchPlaceholder === undefined) selectSearchPlaceholder = opt.selectSearchPlaceholder;\r\n\t\t\t\t\t\tif (selectSmartPositioning === undefined || selectSmartPositioning === '') selectSmartPositioning = opt.selectSmartPositioning;\r\n\r\n\t\t\t\t\t\tvar selectbox =\r\n\t\t\t\t\t\t\t$('<div class=\"jq-selectbox jqselect\">' +\r\n\t\t\t\t\t\t\t\t\t'<div class=\"jq-selectbox__select\">' +\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"jq-selectbox__select-text\"></div>' +\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"jq-selectbox__trigger\">' +\r\n\t\t\t\t\t\t\t\t\t\t\t'<div class=\"jq-selectbox__trigger-arrow\"></div></div>' +\r\n\t\t\t\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t\t\t\t'</div>')\r\n\t\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t\t;\r\n\r\n\t\t\t\t\t\tel.after(selectbox).prependTo(selectbox);\r\n\r\n\t\t\t\t\t\tvar selectzIndex = selectbox.css('z-index');\r\n\t\t\t\t\t\tselectzIndex = (selectzIndex > 0 ) ? selectzIndex : 1;\r\n\t\t\t\t\t\tvar divSelect = $('div.jq-selectbox__select', selectbox);\r\n\t\t\t\t\t\tvar divText = $('div.jq-selectbox__select-text', selectbox);\r\n\t\t\t\t\t\tvar optionSelected = option.filter(':selected');\r\n\r\n\t\t\t\t\t\tmakeList();\r\n\r\n\t\t\t\t\t\tif (selectSearch) searchHTML =\r\n\t\t\t\t\t\t\t'<div class=\"jq-selectbox__search\"><input type=\"search\" autocomplete=\"off\" placeholder=\"' + selectSearchPlaceholder + '\"></div>' +\r\n\t\t\t\t\t\t\t'<div class=\"jq-selectbox__not-found\">' + selectSearchNotFound + '</div>';\r\n\t\t\t\t\t\tvar dropdown =\r\n\t\t\t\t\t\t\t$('<div class=\"jq-selectbox__dropdown\">' +\r\n\t\t\t\t\t\t\t\t\tsearchHTML + '<ul>' + list + '</ul>' +\r\n\t\t\t\t\t\t\t\t'</div>');\r\n\t\t\t\t\t\tselectbox.append(dropdown);\r\n\t\t\t\t\t\tvar ul = $('ul', dropdown);\r\n\t\t\t\t\t\tvar li = $('li', dropdown);\r\n\t\t\t\t\t\tvar search = $('input', dropdown);\r\n\t\t\t\t\t\tvar notFound = $('div.jq-selectbox__not-found', dropdown).hide();\r\n\t\t\t\t\t\tif (li.length < selectSearchLimit) search.parent().hide();\r\n\r\n\t\t\t\t\t\t// показываем опцию по умолчанию\r\n\t\t\t\t\t\t// если у 1-й опции нет текста, она выбрана по умолчанию и параметр selectPlaceholder не false, то показываем плейсхолдер\r\n\t\t\t\t\t\tif (option.first().text() === '' && option.first().is(':selected') && selectPlaceholder !== false) {\r\n\t\t\t\t\t\t\tdivText.text(selectPlaceholder).addClass('placeholder');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdivText.text(optionSelected.text());\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// определяем самый широкий пункт селекта\r\n\t\t\t\t\t\tvar liWidthInner = 0,\r\n\t\t\t\t\t\t\t\tliWidth = 0;\r\n\t\t\t\t\t\tli.css({'display': 'inline-block'});\r\n\t\t\t\t\t\tli.each(function() {\r\n\t\t\t\t\t\t\tvar l = $(this);\r\n\t\t\t\t\t\t\tif (l.innerWidth() > liWidthInner) {\r\n\t\t\t\t\t\t\t\tliWidthInner = l.innerWidth();\r\n\t\t\t\t\t\t\t\tliWidth = l.width();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tli.css({'display': ''});\r\n\r\n\t\t\t\t\t\t// подстраиваем ширину свернутого селекта в зависимости\r\n\t\t\t\t\t\t// от ширины плейсхолдера или самого широкого пункта\r\n\t\t\t\t\t\tif (divText.is('.placeholder') && (divText.width() > liWidthInner)) {\r\n\t\t\t\t\t\t\tdivText.width(divText.width());\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar selClone = selectbox.clone().appendTo('body').width('auto');\r\n\t\t\t\t\t\t\tvar selCloneWidth = selClone.outerWidth();\r\n\t\t\t\t\t\t\tselClone.remove();\r\n\t\t\t\t\t\t\tif (selCloneWidth == selectbox.outerWidth()) {\r\n\t\t\t\t\t\t\t\tdivText.width(liWidth);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// подстраиваем ширину выпадающего списка в зависимости от самого широкого пункта\r\n\t\t\t\t\t\tif (liWidthInner > selectbox.width()) dropdown.width(liWidthInner);\r\n\r\n\t\t\t\t\t\t// прячем 1-ю пустую опцию, если она есть и если атрибут data-placeholder не пустой\r\n\t\t\t\t\t\t// если все же нужно, чтобы первая пустая опция отображалась, то указываем у селекта: data-placeholder=\"\"\r\n\t\t\t\t\t\tif (option.first().text() === '' && el.data('placeholder') !== '') {\r\n\t\t\t\t\t\t\tli.first().hide();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar selectHeight = selectbox.outerHeight(true);\r\n\t\t\t\t\t\tvar searchHeight = search.parent().outerHeight(true) || 0;\r\n\t\t\t\t\t\tvar isMaxHeight = ul.css('max-height');\r\n\t\t\t\t\t\tvar liSelected = li.filter('.selected');\r\n\t\t\t\t\t\tif (liSelected.length < 1) li.first().addClass('selected sel');\r\n\t\t\t\t\t\tif (li.data('li-height') === undefined) {\r\n\t\t\t\t\t\t\tvar liOuterHeight = li.outerHeight();\r\n\t\t\t\t\t\t\tif (selectPlaceholder !== false) liOuterHeight = li.eq(1).outerHeight();\r\n\t\t\t\t\t\t\tli.data('li-height', liOuterHeight);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar position = dropdown.css('top');\r\n\t\t\t\t\t\tif (dropdown.css('left') == 'auto') dropdown.css({left: 0});\r\n\t\t\t\t\t\tif (dropdown.css('top') == 'auto') {\r\n\t\t\t\t\t\t\tdropdown.css({top: selectHeight});\r\n\t\t\t\t\t\t\tposition = selectHeight;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdropdown.hide();\r\n\r\n\t\t\t\t\t\t// если выбран не дефолтный пункт\r\n\t\t\t\t\t\tif (liSelected.length) {\r\n\t\t\t\t\t\t\t// добавляем класс, показывающий изменение селекта\r\n\t\t\t\t\t\t\tif (option.first().text() != optionSelected.text()) {\r\n\t\t\t\t\t\t\t\tselectbox.addClass('changed');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// передаем селекту класс выбранного пункта\r\n\t\t\t\t\t\t\tselectbox.data('jqfs-class', liSelected.data('jqfs-class'));\r\n\t\t\t\t\t\t\tselectbox.addClass(liSelected.data('jqfs-class'));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// если селект неактивный\r\n\t\t\t\t\t\tif (el.is(':disabled')) {\r\n\t\t\t\t\t\t\tselectbox.addClass('disabled');\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// при клике на псевдоселекте\r\n\t\t\t\t\t\tdivSelect.click(function() {\r\n\r\n\t\t\t\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\t\t\t\tif ($('div.jq-selectbox').filter('.opened').length) {\r\n\t\t\t\t\t\t\t\topt.onSelectClosed.call($('div.jq-selectbox').filter('.opened'));\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tel.focus();\r\n\r\n\t\t\t\t\t\t\t// если iOS, то не показываем выпадающий список,\r\n\t\t\t\t\t\t\t// т.к. отображается нативный и неизвестно, как его спрятать\r\n\t\t\t\t\t\t\tif (iOS) return;\r\n\r\n\t\t\t\t\t\t\t// умное позиционирование\r\n\t\t\t\t\t\t\tvar win = $(window);\r\n\t\t\t\t\t\t\tvar liHeight = li.data('li-height');\r\n\t\t\t\t\t\t\tvar topOffset = selectbox.offset().top;\r\n\t\t\t\t\t\t\tvar bottomOffset = win.height() - selectHeight - (topOffset - win.scrollTop());\r\n\t\t\t\t\t\t\tvar visible = el.data('visible-options');\r\n\t\t\t\t\t\t\tif (visible === undefined || visible === '') visible = opt.selectVisibleOptions;\r\n\t\t\t\t\t\t\tvar minHeight = liHeight * 5;\r\n\t\t\t\t\t\t\tvar newHeight = liHeight * visible;\r\n\t\t\t\t\t\t\tif (visible > 0 && visible < 6) minHeight = newHeight;\r\n\t\t\t\t\t\t\tif (visible === 0) newHeight = 'auto';\r\n\r\n\t\t\t\t\t\t\tvar dropDown = function() {\r\n\t\t\t\t\t\t\t\tdropdown.height('auto').css({bottom: 'auto', top: position});\r\n\t\t\t\t\t\t\t\tvar maxHeightBottom = function() {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', Math.floor((bottomOffset - 20 - searchHeight) / liHeight) * liHeight);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tmaxHeightBottom();\r\n\t\t\t\t\t\t\t\tul.css('max-height', newHeight);\r\n\t\t\t\t\t\t\t\tif (isMaxHeight != 'none') {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', isMaxHeight);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (bottomOffset < (dropdown.outerHeight() + 20)) {\r\n\t\t\t\t\t\t\t\t\tmaxHeightBottom();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tvar dropUp = function() {\r\n\t\t\t\t\t\t\t\tdropdown.height('auto').css({top: 'auto', bottom: position});\r\n\t\t\t\t\t\t\t\tvar maxHeightTop = function() {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', Math.floor((topOffset - win.scrollTop() - 20 - searchHeight) / liHeight) * liHeight);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tmaxHeightTop();\r\n\t\t\t\t\t\t\t\tul.css('max-height', newHeight);\r\n\t\t\t\t\t\t\t\tif (isMaxHeight != 'none') {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', isMaxHeight);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif ((topOffset - win.scrollTop() - 20) < (dropdown.outerHeight() + 20)) {\r\n\t\t\t\t\t\t\t\t\tmaxHeightTop();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tif (selectSmartPositioning === true || selectSmartPositioning === 1) {\r\n\t\t\t\t\t\t\t\t// раскрытие вниз\r\n\t\t\t\t\t\t\t\tif (bottomOffset > (minHeight + searchHeight + 20)) {\r\n\t\t\t\t\t\t\t\t\tdropDown();\r\n\t\t\t\t\t\t\t\t\tselectbox.removeClass('dropup').addClass('dropdown');\r\n\t\t\t\t\t\t\t\t// раскрытие вверх\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tdropUp();\r\n\t\t\t\t\t\t\t\t\tselectbox.removeClass('dropdown').addClass('dropup');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (selectSmartPositioning === false || selectSmartPositioning === 0) {\r\n\t\t\t\t\t\t\t\t// раскрытие вниз\r\n\t\t\t\t\t\t\t\tif (bottomOffset > (minHeight + searchHeight + 20)) {\r\n\t\t\t\t\t\t\t\t\tdropDown();\r\n\t\t\t\t\t\t\t\t\tselectbox.removeClass('dropup').addClass('dropdown');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// если умное позиционирование отключено\r\n\t\t\t\t\t\t\t\tdropdown.height('auto').css({bottom: 'auto', top: position});\r\n\t\t\t\t\t\t\t\tul.css('max-height', newHeight);\r\n\t\t\t\t\t\t\t\tif (isMaxHeight != 'none') {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', isMaxHeight);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// если выпадающий список выходит за правый край окна браузера,\r\n\t\t\t\t\t\t\t// то меняем позиционирование с левого на правое\r\n\t\t\t\t\t\t\tif (selectbox.offset().left + dropdown.outerWidth() > win.width()) {\r\n\t\t\t\t\t\t\t\tdropdown.css({left: 'auto', right: 0});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// конец умного позиционирования\r\n\r\n\t\t\t\t\t\t\t$('div.jqselect').css({zIndex: (selectzIndex - 1)}).removeClass('opened');\r\n\t\t\t\t\t\t\tselectbox.css({zIndex: selectzIndex});\r\n\t\t\t\t\t\t\tif (dropdown.is(':hidden')) {\r\n\t\t\t\t\t\t\t\t$('div.jq-selectbox__dropdown:visible').hide();\r\n\t\t\t\t\t\t\t\tdropdown.show();\r\n\t\t\t\t\t\t\t\tselectbox.addClass('opened focused');\r\n\t\t\t\t\t\t\t\t// колбек при открытии селекта\r\n\t\t\t\t\t\t\t\topt.onSelectOpened.call(selectbox);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdropdown.hide();\r\n\t\t\t\t\t\t\t\tselectbox.removeClass('opened dropup dropdown');\r\n\t\t\t\t\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\t\t\t\t\tif ($('div.jq-selectbox').filter('.opened').length) {\r\n\t\t\t\t\t\t\t\t\topt.onSelectClosed.call(selectbox);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// поисковое поле\r\n\t\t\t\t\t\t\tif (search.length) {\r\n\t\t\t\t\t\t\t\tsearch.val('').keyup();\r\n\t\t\t\t\t\t\t\tnotFound.hide();\r\n\t\t\t\t\t\t\t\tsearch.keyup(function() {\r\n\t\t\t\t\t\t\t\t\tvar query = $(this).val();\r\n\t\t\t\t\t\t\t\t\tli.each(function() {\r\n\t\t\t\t\t\t\t\t\t\tif (!$(this).html().match(new RegExp('.*?' + query + '.*?', 'i'))) {\r\n\t\t\t\t\t\t\t\t\t\t\t$(this).hide();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t$(this).show();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t// прячем 1-ю пустую опцию\r\n\t\t\t\t\t\t\t\t\tif (option.first().text() === '' && el.data('placeholder') !== '') {\r\n\t\t\t\t\t\t\t\t\t\tli.first().hide();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (li.filter(':visible').length < 1) {\r\n\t\t\t\t\t\t\t\t\t\tnotFound.show();\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tnotFound.hide();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// прокручиваем до выбранного пункта при открытии списка\r\n\t\t\t\t\t\t\tif (li.filter('.selected').length) {\r\n\t\t\t\t\t\t\t\tif (el.val() === '') {\r\n\t\t\t\t\t\t\t\t\tul.scrollTop(0);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t// если нечетное количество видимых пунктов,\r\n\t\t\t\t\t\t\t\t\t// то высоту пункта делим пополам для последующего расчета\r\n\t\t\t\t\t\t\t\t\tif ( (ul.innerHeight() / liHeight) % 2 !== 0 ) liHeight = liHeight / 2;\r\n\t\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top - ul.innerHeight() / 2 + liHeight);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tpreventScrolling(ul);\r\n\r\n\t\t\t\t\t\t}); // end divSelect.click()\r\n\r\n\t\t\t\t\t\t// при наведении курсора на пункт списка\r\n\t\t\t\t\t\tli.hover(function() {\r\n\t\t\t\t\t\t\t$(this).siblings().removeClass('selected');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvar selectedText = li.filter('.selected').text();\r\n\r\n\t\t\t\t\t\t// при клике на пункт списка\r\n\t\t\t\t\t\tli.filter(':not(.disabled):not(.optgroup)').click(function() {\r\n\t\t\t\t\t\t\tel.focus();\r\n\t\t\t\t\t\t\tvar t = $(this);\r\n\t\t\t\t\t\t\tvar liText = t.text();\r\n\t\t\t\t\t\t\tif (!t.is('.selected')) {\r\n\t\t\t\t\t\t\t\tvar index = t.index();\r\n\t\t\t\t\t\t\t\tindex -= t.prevAll('.optgroup').length;\r\n\t\t\t\t\t\t\t\tt.addClass('selected sel').siblings().removeClass('selected sel');\r\n\t\t\t\t\t\t\t\toption.prop('selected', false).eq(index).prop('selected', true);\r\n\t\t\t\t\t\t\t\tselectedText = liText;\r\n\t\t\t\t\t\t\t\tdivText.text(liText);\r\n\r\n\t\t\t\t\t\t\t\t// передаем селекту класс выбранного пункта\r\n\t\t\t\t\t\t\t\tif (selectbox.data('jqfs-class')) selectbox.removeClass(selectbox.data('jqfs-class'));\r\n\t\t\t\t\t\t\t\tselectbox.data('jqfs-class', t.data('jqfs-class'));\r\n\t\t\t\t\t\t\t\tselectbox.addClass(t.data('jqfs-class'));\r\n\r\n\t\t\t\t\t\t\t\tel.change();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdropdown.hide();\r\n\t\t\t\t\t\t\tselectbox.removeClass('opened dropup dropdown');\r\n\t\t\t\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\t\t\t\topt.onSelectClosed.call(selectbox);\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tdropdown.mouseout(function() {\r\n\t\t\t\t\t\t\t$('li.sel', dropdown).addClass('selected');\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// изменение селекта\r\n\t\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\t\tdivText.text(option.filter(':selected').text()).removeClass('placeholder');\r\n\t\t\t\t\t\t\tli.removeClass('selected sel').not('.optgroup').eq(el[0].selectedIndex).addClass('selected sel');\r\n\t\t\t\t\t\t\t// добавляем класс, показывающий изменение селекта\r\n\t\t\t\t\t\t\tif (option.first().text() != li.filter('.selected').text()) {\r\n\t\t\t\t\t\t\t\tselectbox.addClass('changed');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tselectbox.removeClass('changed');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\t\tselectbox.addClass('focused');\r\n\t\t\t\t\t\t\t$('div.jqselect').not('.focused').removeClass('opened dropup dropdown').find('div.jq-selectbox__dropdown').hide();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\t\tselectbox.removeClass('focused');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// изменение селекта с клавиатуры\r\n\t\t\t\t\t\t.on('keydown.styler keyup.styler', function(e) {\r\n\t\t\t\t\t\t\tvar liHeight = li.data('li-height');\r\n\t\t\t\t\t\t\tif (el.val() === '') {\r\n\t\t\t\t\t\t\t\tdivText.text(selectPlaceholder).addClass('placeholder');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdivText.text(option.filter(':selected').text());\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tli.removeClass('selected sel').not('.optgroup').eq(el[0].selectedIndex).addClass('selected sel');\r\n\t\t\t\t\t\t\t// вверх, влево, Page Up, Home\r\n\t\t\t\t\t\t\tif (e.which == 38 || e.which == 37 || e.which == 33 || e.which == 36) {\r\n\t\t\t\t\t\t\t\tif (el.val() === '') {\r\n\t\t\t\t\t\t\t\t\tul.scrollTop(0);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// вниз, вправо, Page Down, End\r\n\t\t\t\t\t\t\tif (e.which == 40 || e.which == 39 || e.which == 34 || e.which == 35) {\r\n\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top - ul.innerHeight() + liHeight);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// закрываем выпадающий список при нажатии Enter\r\n\t\t\t\t\t\t\tif (e.which == 13) {\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tdropdown.hide();\r\n\t\t\t\t\t\t\t\tselectbox.removeClass('opened dropup dropdown');\r\n\t\t\t\t\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\t\t\t\t\topt.onSelectClosed.call(selectbox);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).on('keydown.styler', function(e) {\r\n\t\t\t\t\t\t\t// открываем выпадающий список при нажатии Space\r\n\t\t\t\t\t\t\tif (e.which == 32) {\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tdivSelect.click();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// прячем выпадающий список при клике за пределами селекта\r\n\t\t\t\t\t\tif (!onDocumentClick.registered) {\r\n\t\t\t\t\t\t\t$(document).on('click', onDocumentClick);\r\n\t\t\t\t\t\t\tonDocumentClick.registered = true;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} // end doSelect()\r\n\r\n\t\t\t\t\t// мультиселект\r\n\t\t\t\t\tfunction doMultipleSelect() {\r\n\r\n\t\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\t\tvar selectbox =\r\n\t\t\t\t\t\t\t$('<div class=\"jq-select-multiple jqselect\"></div>')\r\n\t\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t\t;\r\n\r\n\t\t\t\t\t\tel.after(selectbox);\r\n\r\n\t\t\t\t\t\tmakeList();\r\n\t\t\t\t\t\tselectbox.append('<ul>' + list + '</ul>');\r\n\t\t\t\t\t\tvar ul = $('ul', selectbox);\r\n\t\t\t\t\t\tvar li = $('li', selectbox);\r\n\t\t\t\t\t\tvar size = el.attr('size');\r\n\t\t\t\t\t\tvar ulHeight = ul.outerHeight();\r\n\t\t\t\t\t\tvar liHeight = li.outerHeight();\r\n\t\t\t\t\t\tif (size !== undefined && size > 0) {\r\n\t\t\t\t\t\t\tul.css({'height': liHeight * size});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tul.css({'height': liHeight * 4});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (ulHeight > selectbox.height()) {\r\n\t\t\t\t\t\t\tul.css('overflowY', 'scroll');\r\n\t\t\t\t\t\t\tpreventScrolling(ul);\r\n\t\t\t\t\t\t\t// прокручиваем до выбранного пункта\r\n\t\t\t\t\t\t\tif (li.filter('.selected').length) {\r\n\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// прячем оригинальный селект\r\n\t\t\t\t\t\tel.prependTo(selectbox);\r\n\r\n\t\t\t\t\t\t// если селект неактивный\r\n\t\t\t\t\t\tif (el.is(':disabled')) {\r\n\t\t\t\t\t\t\tselectbox.addClass('disabled');\r\n\t\t\t\t\t\t\toption.each(function() {\r\n\t\t\t\t\t\t\t\tif ($(this).is(':selected')) li.eq($(this).index()).addClass('selected');\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// если селект активный\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t// при клике на пункт списка\r\n\t\t\t\t\t\t\tli.filter(':not(.disabled):not(.optgroup)').click(function(e) {\r\n\t\t\t\t\t\t\t\tel.focus();\r\n\t\t\t\t\t\t\t\tvar clkd = $(this);\r\n\t\t\t\t\t\t\t\tif(!e.ctrlKey && !e.metaKey) clkd.addClass('selected');\r\n\t\t\t\t\t\t\t\tif(!e.shiftKey) clkd.addClass('first');\r\n\t\t\t\t\t\t\t\tif(!e.ctrlKey && !e.metaKey && !e.shiftKey) clkd.siblings().removeClass('selected first');\r\n\r\n\t\t\t\t\t\t\t\t// выделение пунктов при зажатом Ctrl\r\n\t\t\t\t\t\t\t\tif(e.ctrlKey || e.metaKey) {\r\n\t\t\t\t\t\t\t\t\tif (clkd.is('.selected')) clkd.removeClass('selected first');\r\n\t\t\t\t\t\t\t\t\t\telse clkd.addClass('selected first');\r\n\t\t\t\t\t\t\t\t\tclkd.siblings().removeClass('first');\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// выделение пунктов при зажатом Shift\r\n\t\t\t\t\t\t\t\tif(e.shiftKey) {\r\n\t\t\t\t\t\t\t\t\tvar prev = false,\r\n\t\t\t\t\t\t\t\t\t\t\tnext = false;\r\n\t\t\t\t\t\t\t\t\tclkd.siblings().removeClass('selected').siblings('.first').addClass('selected');\r\n\t\t\t\t\t\t\t\t\tclkd.prevAll().each(function() {\r\n\t\t\t\t\t\t\t\t\t\tif ($(this).is('.first')) prev = true;\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tclkd.nextAll().each(function() {\r\n\t\t\t\t\t\t\t\t\t\tif ($(this).is('.first')) next = true;\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tif (prev) {\r\n\t\t\t\t\t\t\t\t\t\tclkd.prevAll().each(function() {\r\n\t\t\t\t\t\t\t\t\t\t\tif ($(this).is('.selected')) return false;\r\n\t\t\t\t\t\t\t\t\t\t\t\telse $(this).not('.disabled, .optgroup').addClass('selected');\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (next) {\r\n\t\t\t\t\t\t\t\t\t\tclkd.nextAll().each(function() {\r\n\t\t\t\t\t\t\t\t\t\t\tif ($(this).is('.selected')) return false;\r\n\t\t\t\t\t\t\t\t\t\t\t\telse $(this).not('.disabled, .optgroup').addClass('selected');\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (li.filter('.selected').length == 1) clkd.addClass('first');\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// отмечаем выбранные мышью\r\n\t\t\t\t\t\t\t\toption.prop('selected', false);\r\n\t\t\t\t\t\t\t\tli.filter('.selected').each(function() {\r\n\t\t\t\t\t\t\t\t\tvar t = $(this);\r\n\t\t\t\t\t\t\t\t\tvar index = t.index();\r\n\t\t\t\t\t\t\t\t\tif (t.is('.option')) index -= t.prevAll('.optgroup').length;\r\n\t\t\t\t\t\t\t\t\toption.eq(index).prop('selected', true);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tel.change();\r\n\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t// отмечаем выбранные с клавиатуры\r\n\t\t\t\t\t\t\toption.each(function(i) {\r\n\t\t\t\t\t\t\t\t$(this).data('optionIndex', i);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\t\t\tli.removeClass('selected');\r\n\t\t\t\t\t\t\t\tvar arrIndexes = [];\r\n\t\t\t\t\t\t\t\toption.filter(':selected').each(function() {\r\n\t\t\t\t\t\t\t\t\tarrIndexes.push($(this).data('optionIndex'));\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tli.not('.optgroup').filter(function(i) {\r\n\t\t\t\t\t\t\t\t\treturn $.inArray(i, arrIndexes) > -1;\r\n\t\t\t\t\t\t\t\t}).addClass('selected');\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\t\t\tselectbox.addClass('focused');\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\t\t\tselectbox.removeClass('focused');\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t// прокручиваем с клавиатуры\r\n\t\t\t\t\t\t\tif (ulHeight > selectbox.height()) {\r\n\t\t\t\t\t\t\t\tel.on('keydown.styler', function(e) {\r\n\t\t\t\t\t\t\t\t\t// вверх, влево, PageUp\r\n\t\t\t\t\t\t\t\t\tif (e.which == 38 || e.which == 37 || e.which == 33) {\r\n\t\t\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top - liHeight);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t// вниз, вправо, PageDown\r\n\t\t\t\t\t\t\t\t\tif (e.which == 40 || e.which == 39 || e.which == 34) {\r\n\t\t\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected:last').position().top - ul.innerHeight() + liHeight * 2);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} // end doMultipleSelect()\r\n\r\n\t\t\t\t\tif (el.is('[multiple]')) {\r\n\r\n\t\t\t\t\t\t// если Android или iOS, то мультиселект не стилизуем\r\n\t\t\t\t\t\t// причина для Android - в стилизованном селекте нет возможности выбрать несколько пунктов\r\n\t\t\t\t\t\t// причина для iOS - в стилизованном селекте неправильно отображаются выбранные пункты\r\n\t\t\t\t\t\tif (Android || iOS) return;\r\n\r\n\t\t\t\t\t\tdoMultipleSelect();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdoSelect();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}; // end selectboxOutput()\r\n\r\n\t\t\t\tselectboxOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.off('.styler').parent().before(el).remove();\r\n\t\t\t\t\tselectboxOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end select\r\n\r\n\t\t\t// reset\r\n\t\t\t} else if (el.is(':reset')) {\r\n\t\t\t\tel.on('click', function() {\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tel.closest('form').find('input, select').trigger('refresh');\r\n\t\t\t\t\t}, 1);\r\n\t\t\t\t});\r\n\t\t\t} // end reset\r\n\r\n\t\t}, // init: function()\r\n\r\n\t\t// деструктор\r\n\t\tdestroy: function() {\r\n\r\n\t\t\tvar el = $(this.element);\r\n\r\n\t\t\tif (el.is(':checkbox') || el.is(':radio')) {\r\n\t\t\t\tel.removeData('_' + pluginName).off('.styler refresh').removeAttr('style').parent().before(el).remove();\r\n\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').off('.styler');\r\n\t\t\t} else if (el.is('input[type=\"number\"]')) {\r\n\t\t\t\tel.removeData('_' + pluginName).off('.styler refresh').closest('.jq-number').before(el).remove();\r\n\t\t\t} else if (el.is(':file') || el.is('select')) {\r\n\t\t\t\tel.removeData('_' + pluginName).off('.styler refresh').removeAttr('style').parent().before(el).remove();\r\n\t\t\t}\r\n\r\n\t\t} // destroy: function()\r\n\r\n\t}; // Plugin.prototype\r\n\r\n\t$.fn[pluginName] = function(options) {\r\n\t\tvar args = arguments;\r\n\t\tif (options === undefined || typeof options === 'object') {\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tif (!$.data(this, '_' + pluginName)) {\r\n\t\t\t\t\t$.data(this, '_' + pluginName, new Plugin(this, options));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// колбек после выполнения плагина\r\n\t\t\t.promise()\r\n\t\t\t.done(function() {\r\n\t\t\t\tvar opt = $(this[0]).data('_' + pluginName);\r\n\t\t\t\tif (opt) opt.options.onFormStyled.call();\r\n\t\t\t});\r\n\t\t\treturn this;\r\n\t\t} else if (typeof options === 'string' && options[0] !== '_' && options !== 'init') {\r\n\t\t\tvar returns;\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tvar instance = $.data(this, '_' + pluginName);\r\n\t\t\t\tif (instance instanceof Plugin && typeof instance[options] === 'function') {\r\n\t\t\t\t\treturns = instance[options].apply(instance, Array.prototype.slice.call(args, 1));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn returns !== undefined ? returns : this;\r\n\t\t}\r\n\t};\r\n\r\n\t// прячем выпадающий список при клике за пределами селекта\r\n\tfunction onDocumentClick(e) {\r\n\t\t// e.target.nodeName != 'OPTION' - добавлено для обхода бага в Opera на движке Presto\r\n\t\t// (при изменении селекта с клавиатуры срабатывает событие onclick)\r\n\t\tif (!$(e.target).parents().hasClass('jq-selectbox') && e.target.nodeName != 'OPTION') {\r\n\t\t\tif ($('div.jq-selectbox.opened').length) {\r\n\t\t\t\tvar selectbox = $('div.jq-selectbox.opened'),\r\n\t\t\t\t\t\tsearch = $('div.jq-selectbox__search input', selectbox),\r\n\t\t\t\t\t\tdropdown = $('div.jq-selectbox__dropdown', selectbox),\r\n\t\t\t\t\t\topt = selectbox.find('select').data('_' + pluginName).options;\r\n\r\n\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\topt.onSelectClosed.call(selectbox);\r\n\r\n\t\t\t\tif (search.length) search.val('').keyup();\r\n\t\t\t\tdropdown.hide().find('li.sel').addClass('selected');\r\n\t\t\t\tselectbox.removeClass('focused opened dropup dropdown');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tonDocumentClick.registered = false;\r\n\r\n}));","/**\r\n * jquery.mask.js\r\n * @version: v1.14.15\r\n * @author: Igor Escobar\r\n *\r\n * Created by Igor Escobar on 2012-03-10. Please report any bug at github.com/igorescobar/jQuery-Mask-Plugin\r\n *\r\n * Copyright (c) 2012 Igor Escobar http://igorescobar.com\r\n *\r\n * The MIT License (http://www.opensource.org/licenses/mit-license.php)\r\n *\r\n * Permission is hereby granted, free of charge, to any person\r\n * obtaining a copy of this software and associated documentation\r\n * files (the \"Software\"), to deal in the Software without\r\n * restriction, including without limitation the rights to use,\r\n * copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the\r\n * Software is furnished to do so, subject to the following\r\n * conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be\r\n * included in all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\r\n * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\r\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\r\n * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\r\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\r\n * OTHER DEALINGS IN THE SOFTWARE.\r\n */\r\n\r\n/* jshint laxbreak: true */\r\n/* jshint maxcomplexity:17 */\r\n/* global define */\r\n\r\n// UMD (Universal Module Definition) patterns for JavaScript modules that work everywhere.\r\n// https://github.com/umdjs/umd/blob/master/templates/jqueryPlugin.js\r\n(function (factory, jQuery, Zepto) {\r\n\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(['jquery'], factory);\r\n    } else if (typeof exports === 'object') {\r\n        module.exports = factory(require('jquery'));\r\n    } else {\r\n        factory(jQuery || Zepto);\r\n    }\r\n\r\n}(function ($) {\r\n    'use strict';\r\n\r\n    var Mask = function (el, mask, options) {\r\n\r\n        var p = {\r\n            invalid: [],\r\n            getCaret: function () {\r\n                try {\r\n                    var sel,\r\n                        pos = 0,\r\n                        ctrl = el.get(0),\r\n                        dSel = document.selection,\r\n                        cSelStart = ctrl.selectionStart;\r\n\r\n                    // IE Support\r\n                    if (dSel && navigator.appVersion.indexOf('MSIE 10') === -1) {\r\n                        sel = dSel.createRange();\r\n                        sel.moveStart('character', -p.val().length);\r\n                        pos = sel.text.length;\r\n                    }\r\n                    // Firefox support\r\n                    else if (cSelStart || cSelStart === '0') {\r\n                        pos = cSelStart;\r\n                    }\r\n\r\n                    return pos;\r\n                } catch (e) {}\r\n            },\r\n            setCaret: function(pos) {\r\n                try {\r\n                    if (el.is(':focus')) {\r\n                        var range, ctrl = el.get(0);\r\n\r\n                        // Firefox, WebKit, etc..\r\n                        if (ctrl.setSelectionRange) {\r\n                            ctrl.setSelectionRange(pos, pos);\r\n                        } else { // IE\r\n                            range = ctrl.createTextRange();\r\n                            range.collapse(true);\r\n                            range.moveEnd('character', pos);\r\n                            range.moveStart('character', pos);\r\n                            range.select();\r\n                        }\r\n                    }\r\n                } catch (e) {}\r\n            },\r\n            events: function() {\r\n                el\r\n                .on('keydown.mask', function(e) {\r\n                    el.data('mask-keycode', e.keyCode || e.which);\r\n                    el.data('mask-previus-value', el.val());\r\n                    el.data('mask-previus-caret-pos', p.getCaret());\r\n                    p.maskDigitPosMapOld = p.maskDigitPosMap;\r\n                })\r\n                .on($.jMaskGlobals.useInput ? 'input.mask' : 'keyup.mask', p.behaviour)\r\n                .on('paste.mask drop.mask', function() {\r\n                    setTimeout(function() {\r\n                        el.keydown().keyup();\r\n                    }, 100);\r\n                })\r\n                .on('change.mask', function(){\r\n                    el.data('changed', true);\r\n                })\r\n                .on('blur.mask', function(){\r\n                    if (oldValue !== p.val() && !el.data('changed')) {\r\n                        el.trigger('change');\r\n                    }\r\n                    el.data('changed', false);\r\n                })\r\n                // it's very important that this callback remains in this position\r\n                // otherwhise oldValue it's going to work buggy\r\n                .on('blur.mask', function() {\r\n                    oldValue = p.val();\r\n                })\r\n                // select all text on focus\r\n                .on('focus.mask', function (e) {\r\n                    if (options.selectOnFocus === true) {\r\n                        $(e.target).select();\r\n                    }\r\n                })\r\n                // clear the value if it not complete the mask\r\n                .on('focusout.mask', function() {\r\n                    if (options.clearIfNotMatch && !regexMask.test(p.val())) {\r\n                       p.val('');\r\n                   }\r\n                });\r\n            },\r\n            getRegexMask: function() {\r\n                var maskChunks = [], translation, pattern, optional, recursive, oRecursive, r;\r\n\r\n                for (var i = 0; i < mask.length; i++) {\r\n                    translation = jMask.translation[mask.charAt(i)];\r\n\r\n                    if (translation) {\r\n\r\n                        pattern = translation.pattern.toString().replace(/.{1}$|^.{1}/g, '');\r\n                        optional = translation.optional;\r\n                        recursive = translation.recursive;\r\n\r\n                        if (recursive) {\r\n                            maskChunks.push(mask.charAt(i));\r\n                            oRecursive = {digit: mask.charAt(i), pattern: pattern};\r\n                        } else {\r\n                            maskChunks.push(!optional && !recursive ? pattern : (pattern + '?'));\r\n                        }\r\n\r\n                    } else {\r\n                        maskChunks.push(mask.charAt(i).replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'));\r\n                    }\r\n                }\r\n\r\n                r = maskChunks.join('');\r\n\r\n                if (oRecursive) {\r\n                    r = r.replace(new RegExp('(' + oRecursive.digit + '(.*' + oRecursive.digit + ')?)'), '($1)?')\r\n                         .replace(new RegExp(oRecursive.digit, 'g'), oRecursive.pattern);\r\n                }\r\n\r\n                return new RegExp(r);\r\n            },\r\n            destroyEvents: function() {\r\n                el.off(['input', 'keydown', 'keyup', 'paste', 'drop', 'blur', 'focusout', ''].join('.mask '));\r\n            },\r\n            val: function(v) {\r\n                var isInput = el.is('input'),\r\n                    method = isInput ? 'val' : 'text',\r\n                    r;\r\n\r\n                if (arguments.length > 0) {\r\n                    if (el[method]() !== v) {\r\n                        el[method](v);\r\n                    }\r\n                    r = el;\r\n                } else {\r\n                    r = el[method]();\r\n                }\r\n\r\n                return r;\r\n            },\r\n            calculateCaretPosition: function() {\r\n                var oldVal = el.data('mask-previus-value') || '',\r\n                    newVal = p.getMasked(),\r\n                    caretPosNew = p.getCaret();\r\n                if (oldVal !== newVal) {\r\n                    var caretPosOld = el.data('mask-previus-caret-pos') || 0,\r\n                        newValL = newVal.length,\r\n                        oldValL = oldVal.length,\r\n                        maskDigitsBeforeCaret = 0,\r\n                        maskDigitsAfterCaret = 0,\r\n                        maskDigitsBeforeCaretAll = 0,\r\n                        maskDigitsBeforeCaretAllOld = 0,\r\n                        i = 0;\r\n\r\n                    for (i = caretPosNew; i < newValL; i++) {\r\n                        if (!p.maskDigitPosMap[i]) {\r\n                            break;\r\n                        }\r\n                        maskDigitsAfterCaret++;\r\n                    }\r\n\r\n                    for (i = caretPosNew - 1; i >= 0; i--) {\r\n                        if (!p.maskDigitPosMap[i]) {\r\n                            break;\r\n                        }\r\n                        maskDigitsBeforeCaret++;\r\n                    }\r\n\r\n                    for (i = caretPosNew - 1; i >= 0; i--) {\r\n                        if (p.maskDigitPosMap[i]) {\r\n                            maskDigitsBeforeCaretAll++;\r\n                        }\r\n                    }\r\n\r\n                    for (i = caretPosOld - 1; i >= 0; i--) {\r\n                        if (p.maskDigitPosMapOld[i]) {\r\n                            maskDigitsBeforeCaretAllOld++;\r\n                        }\r\n                    }\r\n\r\n                    // if the cursor is at the end keep it there\r\n                    if (caretPosNew > oldValL) {\r\n                      caretPosNew = newValL * 10;\r\n                    } else if (caretPosOld >= caretPosNew && caretPosOld !== oldValL) {\r\n                        if (!p.maskDigitPosMapOld[caretPosNew])  {\r\n                          var caretPos = caretPosNew;\r\n                          caretPosNew -= maskDigitsBeforeCaretAllOld - maskDigitsBeforeCaretAll;\r\n                          caretPosNew -= maskDigitsBeforeCaret;\r\n                          if (p.maskDigitPosMap[caretPosNew])  {\r\n                            caretPosNew = caretPos;\r\n                          }\r\n                        }\r\n                    }\r\n                    else if (caretPosNew > caretPosOld) {\r\n                        caretPosNew += maskDigitsBeforeCaretAll - maskDigitsBeforeCaretAllOld;\r\n                        caretPosNew += maskDigitsAfterCaret;\r\n                    }\r\n                }\r\n                return caretPosNew;\r\n            },\r\n            behaviour: function(e) {\r\n                e = e || window.event;\r\n                p.invalid = [];\r\n\r\n                var keyCode = el.data('mask-keycode');\r\n\r\n                if ($.inArray(keyCode, jMask.byPassKeys) === -1) {\r\n                    var newVal = p.getMasked(),\r\n                        caretPos = p.getCaret();\r\n\r\n                    // this is a compensation to devices/browsers that don't compensate\r\n                    // caret positioning the right way\r\n                    setTimeout(function() {\r\n                      p.setCaret(p.calculateCaretPosition());\r\n                    }, $.jMaskGlobals.keyStrokeCompensation);\r\n\r\n                    p.val(newVal);\r\n                    p.setCaret(caretPos);\r\n                    return p.callbacks(e);\r\n                }\r\n            },\r\n            getMasked: function(skipMaskChars, val) {\r\n                var buf = [],\r\n                    value = val === undefined ? p.val() : val + '',\r\n                    m = 0, maskLen = mask.length,\r\n                    v = 0, valLen = value.length,\r\n                    offset = 1, addMethod = 'push',\r\n                    resetPos = -1,\r\n                    maskDigitCount = 0,\r\n                    maskDigitPosArr = [],\r\n                    lastMaskChar,\r\n                    check;\r\n\r\n                if (options.reverse) {\r\n                    addMethod = 'unshift';\r\n                    offset = -1;\r\n                    lastMaskChar = 0;\r\n                    m = maskLen - 1;\r\n                    v = valLen - 1;\r\n                    check = function () {\r\n                        return m > -1 && v > -1;\r\n                    };\r\n                } else {\r\n                    lastMaskChar = maskLen - 1;\r\n                    check = function () {\r\n                        return m < maskLen && v < valLen;\r\n                    };\r\n                }\r\n\r\n                var lastUntranslatedMaskChar;\r\n                while (check()) {\r\n                    var maskDigit = mask.charAt(m),\r\n                        valDigit = value.charAt(v),\r\n                        translation = jMask.translation[maskDigit];\r\n\r\n                    if (translation) {\r\n                        if (valDigit.match(translation.pattern)) {\r\n                            buf[addMethod](valDigit);\r\n                             if (translation.recursive) {\r\n                                if (resetPos === -1) {\r\n                                    resetPos = m;\r\n                                } else if (m === lastMaskChar && m !== resetPos) {\r\n                                    m = resetPos - offset;\r\n                                }\r\n\r\n                                if (lastMaskChar === resetPos) {\r\n                                    m -= offset;\r\n                                }\r\n                            }\r\n                            m += offset;\r\n                        } else if (valDigit === lastUntranslatedMaskChar) {\r\n                            // matched the last untranslated (raw) mask character that we encountered\r\n                            // likely an insert offset the mask character from the last entry; fall\r\n                            // through and only increment v\r\n                            maskDigitCount--;\r\n                            lastUntranslatedMaskChar = undefined;\r\n                        } else if (translation.optional) {\r\n                            m += offset;\r\n                            v -= offset;\r\n                        } else if (translation.fallback) {\r\n                            buf[addMethod](translation.fallback);\r\n                            m += offset;\r\n                            v -= offset;\r\n                        } else {\r\n                          p.invalid.push({p: v, v: valDigit, e: translation.pattern});\r\n                        }\r\n                        v += offset;\r\n                    } else {\r\n                        if (!skipMaskChars) {\r\n                            buf[addMethod](maskDigit);\r\n                        }\r\n\r\n                        if (valDigit === maskDigit) {\r\n                            maskDigitPosArr.push(v);\r\n                            v += offset;\r\n                        } else {\r\n                            lastUntranslatedMaskChar = maskDigit;\r\n                            maskDigitPosArr.push(v + maskDigitCount);\r\n                            maskDigitCount++;\r\n                        }\r\n\r\n                        m += offset;\r\n                    }\r\n                }\r\n\r\n                var lastMaskCharDigit = mask.charAt(lastMaskChar);\r\n                if (maskLen === valLen + 1 && !jMask.translation[lastMaskCharDigit]) {\r\n                    buf.push(lastMaskCharDigit);\r\n                }\r\n\r\n                var newVal = buf.join('');\r\n                p.mapMaskdigitPositions(newVal, maskDigitPosArr, valLen);\r\n                return newVal;\r\n            },\r\n            mapMaskdigitPositions: function(newVal, maskDigitPosArr, valLen) {\r\n              var maskDiff = options.reverse ? newVal.length - valLen : 0;\r\n              p.maskDigitPosMap = {};\r\n              for (var i = 0; i < maskDigitPosArr.length; i++) {\r\n                p.maskDigitPosMap[maskDigitPosArr[i] + maskDiff] = 1;\r\n              }\r\n            },\r\n            callbacks: function (e) {\r\n                var val = p.val(),\r\n                    changed = val !== oldValue,\r\n                    defaultArgs = [val, e, el, options],\r\n                    callback = function(name, criteria, args) {\r\n                        if (typeof options[name] === 'function' && criteria) {\r\n                            options[name].apply(this, args);\r\n                        }\r\n                    };\r\n\r\n                callback('onChange', changed === true, defaultArgs);\r\n                callback('onKeyPress', changed === true, defaultArgs);\r\n                callback('onComplete', val.length === mask.length, defaultArgs);\r\n                callback('onInvalid', p.invalid.length > 0, [val, e, el, p.invalid, options]);\r\n            }\r\n        };\r\n\r\n        el = $(el);\r\n        var jMask = this, oldValue = p.val(), regexMask;\r\n\r\n        mask = typeof mask === 'function' ? mask(p.val(), undefined, el,  options) : mask;\r\n\r\n        // public methods\r\n        jMask.mask = mask;\r\n        jMask.options = options;\r\n        jMask.remove = function() {\r\n            var caret = p.getCaret();\r\n            if (jMask.options.placeholder) {\r\n                el.removeAttr('placeholder');\r\n            }\r\n            if (el.data('mask-maxlength')) {\r\n                el.removeAttr('maxlength');\r\n            }\r\n            p.destroyEvents();\r\n            p.val(jMask.getCleanVal());\r\n            p.setCaret(caret);\r\n            return el;\r\n        };\r\n\r\n        // get value without mask\r\n        jMask.getCleanVal = function() {\r\n           return p.getMasked(true);\r\n        };\r\n\r\n        // get masked value without the value being in the input or element\r\n        jMask.getMaskedVal = function(val) {\r\n           return p.getMasked(false, val);\r\n        };\r\n\r\n       jMask.init = function(onlyMask) {\r\n            onlyMask = onlyMask || false;\r\n            options = options || {};\r\n\r\n            jMask.clearIfNotMatch  = $.jMaskGlobals.clearIfNotMatch;\r\n            jMask.byPassKeys       = $.jMaskGlobals.byPassKeys;\r\n            jMask.translation      = $.extend({}, $.jMaskGlobals.translation, options.translation);\r\n\r\n            jMask = $.extend(true, {}, jMask, options);\r\n\r\n            regexMask = p.getRegexMask();\r\n\r\n            if (onlyMask) {\r\n                p.events();\r\n                p.val(p.getMasked());\r\n            } else {\r\n                if (options.placeholder) {\r\n                    el.attr('placeholder' , options.placeholder);\r\n                }\r\n\r\n                // this is necessary, otherwise if the user submit the form\r\n                // and then press the \"back\" button, the autocomplete will erase\r\n                // the data. Works fine on IE9+, FF, Opera, Safari.\r\n                if (el.data('mask')) {\r\n                  el.attr('autocomplete', 'off');\r\n                }\r\n\r\n                // detect if is necessary let the user type freely.\r\n                // for is a lot faster than forEach.\r\n                for (var i = 0, maxlength = true; i < mask.length; i++) {\r\n                    var translation = jMask.translation[mask.charAt(i)];\r\n                    if (translation && translation.recursive) {\r\n                        maxlength = false;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (maxlength) {\r\n                    el.attr('maxlength', mask.length).data('mask-maxlength', true);\r\n                }\r\n\r\n                p.destroyEvents();\r\n                p.events();\r\n\r\n                var caret = p.getCaret();\r\n                p.val(p.getMasked());\r\n                p.setCaret(caret);\r\n            }\r\n        };\r\n\r\n        jMask.init(!el.is('input'));\r\n    };\r\n\r\n    $.maskWatchers = {};\r\n    var HTMLAttributes = function () {\r\n        var input = $(this),\r\n            options = {},\r\n            prefix = 'data-mask-',\r\n            mask = input.attr('data-mask');\r\n\r\n        if (input.attr(prefix + 'reverse')) {\r\n            options.reverse = true;\r\n        }\r\n\r\n        if (input.attr(prefix + 'clearifnotmatch')) {\r\n            options.clearIfNotMatch = true;\r\n        }\r\n\r\n        if (input.attr(prefix + 'selectonfocus') === 'true') {\r\n           options.selectOnFocus = true;\r\n        }\r\n\r\n        if (notSameMaskObject(input, mask, options)) {\r\n            return input.data('mask', new Mask(this, mask, options));\r\n        }\r\n    },\r\n    notSameMaskObject = function(field, mask, options) {\r\n        options = options || {};\r\n        var maskObject = $(field).data('mask'),\r\n            stringify = JSON.stringify,\r\n            value = $(field).val() || $(field).text();\r\n        try {\r\n            if (typeof mask === 'function') {\r\n                mask = mask(value);\r\n            }\r\n            return typeof maskObject !== 'object' || stringify(maskObject.options) !== stringify(options) || maskObject.mask !== mask;\r\n        } catch (e) {}\r\n    },\r\n    eventSupported = function(eventName) {\r\n        var el = document.createElement('div'), isSupported;\r\n\r\n        eventName = 'on' + eventName;\r\n        isSupported = (eventName in el);\r\n\r\n        if ( !isSupported ) {\r\n            el.setAttribute(eventName, 'return;');\r\n            isSupported = typeof el[eventName] === 'function';\r\n        }\r\n        el = null;\r\n\r\n        return isSupported;\r\n    };\r\n\r\n    $.fn.mask = function(mask, options) {\r\n        options = options || {};\r\n        var selector = this.selector,\r\n            globals = $.jMaskGlobals,\r\n            interval = globals.watchInterval,\r\n            watchInputs = options.watchInputs || globals.watchInputs,\r\n            maskFunction = function() {\r\n                if (notSameMaskObject(this, mask, options)) {\r\n                    return $(this).data('mask', new Mask(this, mask, options));\r\n                }\r\n            };\r\n\r\n        $(this).each(maskFunction);\r\n\r\n        if (selector && selector !== '' && watchInputs) {\r\n            clearInterval($.maskWatchers[selector]);\r\n            $.maskWatchers[selector] = setInterval(function(){\r\n                $(document).find(selector).each(maskFunction);\r\n            }, interval);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    $.fn.masked = function(val) {\r\n        return this.data('mask').getMaskedVal(val);\r\n    };\r\n\r\n    $.fn.unmask = function() {\r\n        clearInterval($.maskWatchers[this.selector]);\r\n        delete $.maskWatchers[this.selector];\r\n        return this.each(function() {\r\n            var dataMask = $(this).data('mask');\r\n            if (dataMask) {\r\n                dataMask.remove().removeData('mask');\r\n            }\r\n        });\r\n    };\r\n\r\n    $.fn.cleanVal = function() {\r\n        return this.data('mask').getCleanVal();\r\n    };\r\n\r\n    $.applyDataMask = function(selector) {\r\n        selector = selector || $.jMaskGlobals.maskElements;\r\n        var $selector = (selector instanceof $) ? selector : $(selector);\r\n        $selector.filter($.jMaskGlobals.dataMaskAttr).each(HTMLAttributes);\r\n    };\r\n\r\n    var globals = {\r\n        maskElements: 'input,td,span,div',\r\n        dataMaskAttr: '*[data-mask]',\r\n        dataMask: true,\r\n        watchInterval: 300,\r\n        watchInputs: true,\r\n        keyStrokeCompensation: 10,\r\n        // old versions of chrome dont work great with input event\r\n        useInput: !/Chrome\\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent) && eventSupported('input'),\r\n        watchDataMask: false,\r\n        byPassKeys: [9, 16, 17, 18, 36, 37, 38, 39, 40, 91],\r\n        translation: {\r\n            '0': {pattern: /\\d/},\r\n            '9': {pattern: /\\d/, optional: true},\r\n            '#': {pattern: /\\d/, recursive: true},\r\n            'A': {pattern: /[a-zA-Z0-9]/},\r\n            'S': {pattern: /[a-zA-Z]/}\r\n        }\r\n    };\r\n\r\n    $.jMaskGlobals = $.jMaskGlobals || {};\r\n    globals = $.jMaskGlobals = $.extend(true, {}, globals, $.jMaskGlobals);\r\n\r\n    // looking for inputs with data-mask attribute\r\n    if (globals.dataMask) {\r\n        $.applyDataMask();\r\n    }\r\n\r\n    setInterval(function() {\r\n        if ($.jMaskGlobals.watchDataMask) {\r\n            $.applyDataMask();\r\n        }\r\n    }, globals.watchInterval);\r\n}, window.jQuery, window.Zepto));\r\n","$.fn.textWidth = function(text, font) {\r\n\tif (!$.fn.textWidth.fakeEl) $.fn.textWidth.fakeEl = $('<span>').hide().appendTo(document.body);\r\n\t$.fn.textWidth.fakeEl.text(text || this.val() || this.text() || this.attr('placeholder')).css('font', font || this.css('font'));\r\n\treturn $.fn.textWidth.fakeEl.width();\r\n};","/*jshint multistr:true, curly: false */\r\n/*global jQuery:false, define: false */\r\n/**\r\n * jRange - Awesome range control\r\n *\r\n * Written by\r\n * ----------\r\n * Nitin Hayaran (nitinhayaran@gmail.com)\r\n *\r\n * Licensed under the MIT (MIT-LICENSE.txt).\r\n *\r\n * @author Nitin Hayaran\r\n * @version 0.1-RELEASE\r\n *\r\n * Dependencies\r\n * ------------\r\n * jQuery (http://jquery.com)\r\n *\r\n **/\r\n;\r\n(function($, window, document, undefined) {\r\n\t'use strict';\r\n\r\n\tvar jRange = function() {\r\n\t\treturn this.init.apply(this, arguments);\r\n\t};\r\n\tjRange.prototype = {\r\n\t\tdefaults: {\r\n\t\t\tonstatechange: function() {},\r\n      ondragend: function() {},\r\n      onbarclicked: function() {},\r\n\t\t\tisRange: false,\r\n\t\t\tshowLabels: true,\r\n\t\t\tshowScale: true,\r\n\t\t\tstep: 1,\r\n\t\t\tformat: '%s',\r\n\t\t\ttheme: 'theme-green',\r\n\t\t\twidth: 300,\r\n\t\t\tdisable: false,\r\n\t\t\tsnap: false\r\n\t\t},\r\n\t\ttemplate: '<div class=\"slider-container\">\\\r\n\t\t\t<div class=\"back-bar\">\\\r\n                <div class=\"selected-bar\"></div>\\\r\n                <div class=\"pointer low\"></div><div class=\"pointer-label low\">123456</div>\\\r\n                <div class=\"pointer high\"></div><div class=\"pointer-label high\">456789</div>\\\r\n                <div class=\"clickable-dummy\"></div>\\\r\n            </div>\\\r\n            <div class=\"scale\"></div>\\\r\n\t\t</div>',\r\n\t\tinit: function(node, options) {\r\n\t\t\tthis.options       = $.extend({}, this.defaults, options);\r\n\t\t\tthis.inputNode     = $(node);\r\n\t\t\tthis.options.value = this.inputNode.val() || (this.options.isRange ? this.options.from + ',' + this.options.from : '' + this.options.from);\r\n\t\t\tthis.domNode       = $(this.template);\r\n\t\t\tthis.domNode.addClass(this.options.theme);\r\n\t\t\tthis.inputNode.after(this.domNode);\r\n\t\t\tthis.domNode.on('change', this.onChange);\r\n\t\t\tthis.pointers      = $('.pointer', this.domNode);\r\n\t\t\tthis.lowPointer    = this.pointers.first();\r\n\t\t\tthis.highPointer   = this.pointers.last();\r\n\t\t\tthis.labels        = $('.pointer-label', this.domNode);\r\n\t\t\tthis.lowLabel      = this.labels.first();\r\n\t\t\tthis.highLabel     = this.labels.last();\r\n\t\t\tthis.scale         = $('.scale', this.domNode);\r\n\t\t\tthis.bar           = $('.selected-bar', this.domNode);\r\n\t\t\tthis.clickableBar  = this.domNode.find('.clickable-dummy');\r\n\t\t\tthis.interval      = this.options.to - this.options.from;\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\trender: function() {\r\n\t\t\t// Check if inputNode is visible, and have some width, so that we can set slider width accordingly.\r\n\t\t\tif (this.inputNode.width() === 0 && !this.options.width) {\r\n\t\t\t\tconsole.log('jRange : no width found, returning');\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tthis.options.width = this.options.width || this.inputNode.width();\r\n\t\t\t\tthis.domNode.width(this.options.width);\r\n\t\t\t\tthis.inputNode.hide();\r\n\t\t\t}\r\n\r\n\t\t\tif (this.isSingle()) {\r\n\t\t\t\tthis.lowPointer.hide();\r\n\t\t\t\tthis.lowLabel.hide();\r\n\t\t\t}\r\n\t\t\tif (!this.options.showLabels) {\r\n\t\t\t\tthis.labels.hide();\r\n\t\t\t}\r\n\t\t\tthis.attachEvents();\r\n\t\t\tif (this.options.showScale) {\r\n\t\t\t\tthis.renderScale();\r\n\t\t\t}\r\n\t\t\tthis.setValue(this.options.value);\r\n\t\t},\r\n\t\tisSingle: function() {\r\n\t\t\tif (typeof(this.options.value) === 'number') {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn (this.options.value.indexOf(',') !== -1 || this.options.isRange) ?\r\n\t\t\t\tfalse : true;\r\n\t\t},\r\n\t\tattachEvents: function() {\r\n\t\t\tthis.clickableBar.click($.proxy(this.barClicked, this));\r\n\t\t\tthis.pointers.on('mousedown touchstart', $.proxy(this.onDragStart, this));\r\n\t\t\tthis.pointers.bind('dragstart', function(event) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t});\r\n\t\t},\r\n\t\tonDragStart: function(e) {\r\n\t\t\tif ( this.options.disable || (e.type === 'mousedown' && e.which !== 1)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tvar pointer = $(e.target);\r\n\t\t\tthis.pointers.removeClass('last-active');\r\n\t\t\tpointer.addClass('focused last-active');\r\n\t\t\tthis[(pointer.hasClass('low') ? 'low' : 'high') + 'Label'].addClass('focused');\r\n\t\t\t$(document).on('mousemove.slider touchmove.slider', $.proxy(this.onDrag, this, pointer));\r\n\t\t\t$(document).on('mouseup.slider touchend.slider touchcancel.slider', $.proxy(this.onDragEnd, this));\r\n\t\t},\r\n\t\tonDrag: function(pointer, e) {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tif (e.originalEvent.touches && e.originalEvent.touches.length) {\r\n\t\t\t\te = e.originalEvent.touches[0];\r\n\t\t\t} else if (e.originalEvent.changedTouches && e.originalEvent.changedTouches.length) {\r\n\t\t\t\te = e.originalEvent.changedTouches[0];\r\n\t\t\t}\r\n\r\n\t\t\tvar position = e.clientX - this.domNode.offset().left;\r\n\t\t\tthis.domNode.trigger('change', [this, pointer, position]);\r\n\t\t},\r\n\t\tonDragEnd: function(e) {\r\n\t\t\tthis.pointers.removeClass('focused')\r\n\t\t\t\t.trigger('rangeslideend');\r\n\t\t\tthis.labels.removeClass('focused');\r\n\t\t\t$(document).off('.slider');\r\n\t\t  this.options.ondragend.call(this, this.options.value);\r\n\t\t},\r\n\t\tbarClicked: function(e) {\r\n\t\t\tif(this.options.disable) return;\r\n\t\t\tvar x = e.pageX - this.clickableBar.offset().left;\r\n\t\t\tif (this.isSingle())\r\n\t\t\t\tthis.setPosition(this.pointers.last(), x, true, true);\r\n\t\t\telse {\r\n\t\t\t\tvar firstLeft      \t= Math.abs(parseFloat(this.pointers.first().css('left'), 10)),\r\n\t\t\t\t\t\tfirstHalfWidth \t= this.pointers.first().width() / 2,\r\n\t\t\t\t\t\tlastLeft \t\t\t \t= Math.abs(parseFloat(this.pointers.last().css('left'), 10)),\r\n\t\t\t\t\t\tlastHalfWidth  \t= this.pointers.first().width() / 2,\r\n\t\t\t\t\t\tleftSide        = Math.abs(firstLeft - x + firstHalfWidth),\r\n\t\t\t\t\t\trightSide       = Math.abs(lastLeft - x + lastHalfWidth),\r\n\t\t\t\t\t\tpointer;\r\n\r\n\t\t\t\tif(leftSide == rightSide) {\r\n\t\t\t\t\tpointer = x < firstLeft ? this.pointers.first() : this.pointers.last();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpointer = leftSide < rightSide ? this.pointers.first() : this.pointers.last();\r\n\t\t\t\t}\r\n\t\t\t\tthis.setPosition(pointer, x, true, true);\r\n\t\t\t}\r\n\t\t\tthis.options.onbarclicked.call(this, this.options.value);\r\n\t\t},\r\n\t\tonChange: function(e, self, pointer, position) {\r\n\t\t\tvar min, max;\r\n\t\t\tmin = 0;\r\n\t\t\tmax = self.domNode.width();\r\n\r\n\t\t\tif (!self.isSingle()) {\r\n\t\t\t\tmin = pointer.hasClass('high') ? parseFloat(self.lowPointer.css(\"left\")) + (self.lowPointer.width() / 2) : 0;\r\n\t\t\t\tmax = pointer.hasClass('low') ? parseFloat(self.highPointer.css(\"left\")) + (self.highPointer.width() / 2) : self.domNode.width();\r\n\t\t\t}\r\n\r\n\t\t\tvar value = Math.min(Math.max(position, min), max);\r\n\t\t\tself.setPosition(pointer, value, true);\r\n\t\t},\r\n\t\tsetPosition: function(pointer, position, isPx, animate) {\r\n\t\t\tvar leftPos, rightPos,\r\n\t\t\t\tlowPos = parseFloat(this.lowPointer.css(\"left\")),\r\n\t\t\t\thighPos = parseFloat(this.highPointer.css(\"left\")) || 0,\r\n\t\t\t\tcircleWidth = this.highPointer.width() / 2;\r\n\t\t\tif (!isPx) {\r\n\t\t\t\tposition = this.prcToPx(position);\r\n\t\t\t}\r\n\t\t\tif(this.options.snap){\r\n\t\t\t\tvar expPos = this.correctPositionForSnap(position);\r\n\t\t\t\tif(expPos === -1){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tposition = expPos;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (pointer[0] === this.highPointer[0]) {\r\n\t\t\t\thighPos = Math.round(position - circleWidth);\r\n\t\t\t} else {\r\n\t\t\t\tlowPos = Math.round(position - circleWidth);\r\n\t\t\t}\r\n\t\t\tpointer[animate ? 'animate' : 'css']({\r\n\t\t\t\t'left': Math.round(position - circleWidth)\r\n\t\t\t});\r\n\t\t\tif (this.isSingle()) {\r\n\t\t\t\tleftPos = 0;\r\n\t\t\t} else {\r\n\t\t\t\tleftPos = lowPos + circleWidth;\r\n\t\t\t\trightPos = highPos + circleWidth;\r\n\t\t\t}\r\n\t\t\tvar w = Math.round(highPos + circleWidth - leftPos);\r\n\t\t\tthis.bar[animate ? 'animate' : 'css']({\r\n\t\t\t\t'width': Math.abs(w),\r\n\t\t\t\t'left': (w>0) ? leftPos : leftPos + w\r\n\t\t\t});\r\n\t\t\tthis.showPointerValue(pointer, position, animate);\r\n\t\t\tthis.isReadonly();\r\n\t\t},\r\n\t\tcorrectPositionForSnap: function(position){\r\n\t\t\tvar currentValue = this.positionToValue(position) - this.options.from;\r\n\t\t\tvar diff = this.options.width / (this.interval / this.options.step),\r\n\t\t\t\texpectedPosition = (currentValue / this.options.step) * diff;\r\n\t\t\tif( position <= expectedPosition + diff / 2 && position >= expectedPosition - diff / 2){\r\n\t\t\t\treturn expectedPosition;\r\n\t\t\t}else{\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// will be called from outside\r\n\t\tsetValue: function(value) {\r\n\t\t\tvar values = value.toString().split(',');\r\n\t\t\tvalues[0] = Math.min(Math.max(values[0], this.options.from), this.options.to) + '';\r\n\t\t\tif (values.length > 1){\r\n\t\t\t\tvalues[1] = Math.min(Math.max(values[1], this.options.from), this.options.to) + '';\r\n\t\t\t}\r\n\t\t\tthis.options.value = value;\r\n\t\t\tvar prc = this.valuesToPrc(values.length === 2 ? values : [0, values[0]]);\r\n\t\t\tif (this.isSingle()) {\r\n\t\t\t\tthis.setPosition(this.highPointer, prc[1]);\r\n\t\t\t} else {\r\n\t\t\t\tthis.setPosition(this.lowPointer, prc[0]);\r\n\t\t\t\tthis.setPosition(this.highPointer, prc[1]);\r\n\t\t\t}\r\n\t\t},\r\n\t\trenderScale: function() {\r\n\t\t\tvar s = this.options.scale || [this.options.from, this.options.to];\r\n\t\t\tvar prc = Math.round((100 / (s.length - 1)) * 10) / 10;\r\n\t\t\tvar str = '';\r\n\t\t\tfor (var i = 0; i < s.length; i++) {\r\n\t\t\t\tstr += '<span style=\"left: ' + i * prc + '%\">' + (s[i] != '|' ? '<ins>' + s[i] + '</ins>' : '') + '</span>';\r\n\t\t\t}\r\n\t\t\tthis.scale.html(str);\r\n\r\n\t\t\t$('ins', this.scale).each(function() {\r\n\t\t\t\t$(this).css({\r\n\t\t\t\t\tmarginLeft: -$(this).outerWidth() / 2\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetBarWidth: function() {\r\n\t\t\tvar values = this.options.value.split(',');\r\n\t\t\tif (values.length > 1) {\r\n\t\t\t\treturn parseFloat(values[1]) - parseFloat(values[0]);\r\n\t\t\t} else {\r\n\t\t\t\treturn parseFloat(values[0]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tshowPointerValue: function(pointer, position, animate) {\r\n\t\t\tvar label = $('.pointer-label', this.domNode)[pointer.hasClass('low') ? 'first' : 'last']();\r\n\t\t\tvar text;\r\n\t\t\tvar value = this.positionToValue(position);\r\n\t\t\t// Is it higer or lower than it should be?\r\n\r\n\t\t\tif ($.isFunction(this.options.format)) {\r\n\t\t\t\tvar type = this.isSingle() ? undefined : (pointer.hasClass('low') ? 'low' : 'high');\r\n\t\t\t\ttext = this.options.format(value, type);\r\n\t\t\t} else {\r\n\t\t\t\ttext = this.options.format.replace('%s', value);\r\n\t\t\t}\r\n\r\n\t\t\tvar width = label.html(text).width(),\r\n\t\t\t\tleft = position - width / 2;\r\n\t\t\tleft = Math.min(Math.max(left, 0), this.options.width - width);\r\n\t\t\tlabel[animate ? 'animate' : 'css']({\r\n\t\t\t\tleft: left\r\n\t\t\t});\r\n\t\t\tthis.setInputValue(pointer, value);\r\n\t\t},\r\n\t\tvaluesToPrc: function(values) {\r\n\t\t\tvar lowPrc = ((parseFloat(values[0]) - parseFloat(this.options.from)) * 100 / this.interval),\r\n\t\t\t\thighPrc = ((parseFloat(values[1]) - parseFloat(this.options.from)) * 100 / this.interval);\r\n\t\t\treturn [lowPrc, highPrc];\r\n\t\t},\r\n\t\tprcToPx: function(prc) {\r\n\t\t\treturn (this.domNode.width() * prc) / 100;\r\n\t\t},\r\n\t\tisDecimal: function() {\r\n\t\t\treturn ((this.options.value + this.options.from + this.options.to).indexOf(\".\")===-1) ? false : true;\r\n\t\t},\r\n\t\tpositionToValue: function(pos) {\r\n\t\t\tvar value = (pos / this.domNode.width()) * this.interval;\r\n\t\t\tvalue = parseFloat(value, 10) + parseFloat(this.options.from, 10);\r\n\t\t\tif (this.isDecimal()) {\r\n\t\t\t\tvar final = Math.round(Math.round(value / this.options.step) * this.options.step *100)/100;\r\n\t\t\t\tif (final!==0.0) {\r\n\t\t\t\t\tfinal = '' + final;\r\n\t\t\t\t\tif (final.indexOf(\".\")===-1) {\r\n\t\t\t\t\t\tfinal = final + \".\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\twhile (final.length - final.indexOf('.')<3) {\r\n\t\t\t\t\t\tfinal = final + \"0\";\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfinal = \"0.00\";\r\n\t\t\t\t}\r\n\t\t\t\treturn final;\r\n\t\t\t} else {\r\n\t\t\t\treturn Math.round(value / this.options.step) * this.options.step;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetInputValue: function(pointer, v) {\r\n\t\t\t// if(!isChanged) return;\r\n\t\t\tif (this.isSingle()) {\r\n\t\t\t\tthis.options.value = v.toString();\r\n\t\t\t} else {\r\n\t\t\t\tvar values = this.options.value.split(',');\r\n\t\t\t\tif (pointer.hasClass('low')) {\r\n\t\t\t\t\tthis.options.value = v + ',' + values[1];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.options.value = values[0] + ',' + v;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.inputNode.val() !== this.options.value) {\r\n\t\t\t\tthis.inputNode.val(this.options.value)\r\n\t\t\t\t\t.trigger('change');\r\n\t\t\t\tthis.options.onstatechange.call(this, this.options.value);\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetValue: function() {\r\n\t\t\treturn this.options.value;\r\n\t\t},\r\n\t\tgetOptions: function() {\r\n\t\t\treturn this.options;\r\n\t\t},\r\n\t\tgetRange: function() {\r\n\t\t\treturn this.options.from + \",\" + this.options.to;\r\n\t\t},\r\n\t\tisReadonly: function(){\r\n\t\t\tthis.domNode.toggleClass('slider-readonly', this.options.disable);\r\n\t\t},\r\n\t\tdisable: function(){\r\n\t\t\tthis.options.disable = true;\r\n\t\t\tthis.isReadonly();\r\n\t\t},\r\n\t\tenable: function(){\r\n\t\t\tthis.options.disable = false;\r\n\t\t\tthis.isReadonly();\r\n\t\t},\r\n\t\ttoggleDisable: function(){\r\n\t\t\tthis.options.disable = !this.options.disable;\r\n\t\t\tthis.isReadonly();\r\n\t\t},\r\n\t\tupdateRange: function(range, value) {\r\n\t\t\tvar values = range.toString().split(',');\r\n\t\t\tthis.interval = parseInt(values[1]) - parseInt(values[0]);\r\n\t\t\tif(value){\r\n\t\t\t\tthis.setValue(value);\r\n\t\t\t}else{\r\n\t\t\t\tthis.setValue(this.getValue());\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar pluginName = 'jRange';\r\n\t// A really lightweight plugin wrapper around the constructor,\r\n\t// preventing against multiple instantiations\r\n\t$.fn[pluginName] = function(option) {\r\n\t\tvar args = arguments,\r\n\t\t\tresult;\r\n\r\n\t\tthis.each(function() {\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\tdata = $.data(this, 'plugin_' + pluginName),\r\n\t\t\t\toptions = typeof option === 'object' && option;\r\n\t\t\tif (!data) {\r\n\t\t\t\t$this.data('plugin_' + pluginName, (data = new jRange(this, options)));\r\n\t\t\t\t$(window).resize(function() {\r\n\t\t\t\t\tdata.setValue(data.getValue());\r\n\t\t\t\t}); // Update slider position when window is resized to keep it in sync with scale\r\n\t\t\t}\r\n\t\t\t// if first argument is a string, call silimarly named function\r\n\t\t\t// this gives flexibility to call functions of the plugin e.g.\r\n\t\t\t//   - $('.dial').plugin('destroy');\r\n\t\t\t//   - $('.dial').plugin('render', $('.new-child'));\r\n\t\t\tif (typeof option === 'string') {\r\n\t\t\t\tresult = data[option].apply(data, Array.prototype.slice.call(args, 1));\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// To enable plugin returns values\r\n\t\treturn result || this;\r\n\t};\r\n\r\n})(jQuery, window, document);\r\n","\t$.fn.spinner = function() {\r\n\t\tthis.each(function() {\r\n\t\t\tvar el = $(this);\r\n\t\t\tel.after('<a href=\"#\" class=\"category-product__toCart-plus js-category-product-spinner-plus\" role=\"button\"></a>');\r\n\t\t\tel.after('<a href=\"#\" class=\"category-product__toCart-minus js-category-product-spinner-minus\" role=\"button\"></a>');\r\n\t\t\tel.parent().on('click', '.js-category-product-spinner-minus', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tif (el.val() > parseInt(el.attr('min')))\r\n\t\t\t\t\tel.val( function(i, oldval) { return --oldval; });\r\n\t\t\t});\r\n\t\t\tel.parent().on('click', '.js-category-product-spinner-plus', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tif (el.val() < parseInt(el.attr('max')))\r\n\t\t\t\t\tel.val( function(i, oldval) { return ++oldval; });\r\n\t\t\t});\r\n\t\t\tel.on('focusout', function() {\r\n\t\t\t\tif (el.val() > parseInt(el.attr('max'))) {\r\n\t\t\t\t\tel.val(el.attr('max'));\r\n\t\t\t\t} else if (el.val() < parseInt(el.attr('min'))) {\r\n\t\t\t\t\tel.val(el.attr('min'));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t};","// Generated by CoffeeScript 1.9.2\r\n\r\n/**\r\n@license Sticky-kit v1.1.2 | WTFPL | Leaf Corcoran 2015 | http://leafo.net\r\n */\r\n\r\n(function() {\r\n  var $, win;\r\n\r\n  $ = this.jQuery || window.jQuery;\r\n\r\n  win = $(window);\r\n\r\n  $.fn.stick_in_parent = function(opts) {\r\n    var doc, elm, enable_bottoming, fn, i, inner_scrolling, len, manual_spacer, offset_top, parent_selector, recalc_every, sticky_class;\r\n    if (opts == null) {\r\n      opts = {};\r\n    }\r\n    sticky_class = opts.sticky_class, inner_scrolling = opts.inner_scrolling, recalc_every = opts.recalc_every, parent_selector = opts.parent, offset_top = opts.offset_top, manual_spacer = opts.spacer, enable_bottoming = opts.bottoming;\r\n    if (offset_top == null) {\r\n      offset_top = 0;\r\n    }\r\n    if (parent_selector == null) {\r\n      parent_selector = void 0;\r\n    }\r\n    if (inner_scrolling == null) {\r\n      inner_scrolling = true;\r\n    }\r\n    if (sticky_class == null) {\r\n      sticky_class = \"is_stuck\";\r\n    }\r\n    doc = $(document);\r\n    if (enable_bottoming == null) {\r\n      enable_bottoming = true;\r\n    }\r\n    fn = function(elm, padding_bottom, parent_top, parent_height, top, height, el_float, detached) {\r\n      var bottomed, detach, fixed, last_pos, last_scroll_height, offset, parent, recalc, recalc_and_tick, recalc_counter, spacer, tick;\r\n      if (elm.data(\"sticky_kit\")) {\r\n        return;\r\n      }\r\n      elm.data(\"sticky_kit\", true);\r\n      last_scroll_height = doc.height();\r\n      parent = elm.parent();\r\n      if (parent_selector != null) {\r\n        parent = parent.closest(parent_selector);\r\n      }\r\n      if (!parent.length) {\r\n        throw \"failed to find stick parent\";\r\n      }\r\n      fixed = false;\r\n      bottomed = false;\r\n      spacer = manual_spacer != null ? manual_spacer && elm.closest(manual_spacer) : $(\"<div />\");\r\n      if (spacer) {\r\n        spacer.css('position', elm.css('position'));\r\n      }\r\n      recalc = function() {\r\n        var border_top, padding_top, restore;\r\n        if (detached) {\r\n          return;\r\n        }\r\n        last_scroll_height = doc.height();\r\n        border_top = parseInt(parent.css(\"border-top-width\"), 10);\r\n        padding_top = parseInt(parent.css(\"padding-top\"), 10);\r\n        padding_bottom = parseInt(parent.css(\"padding-bottom\"), 10);\r\n        parent_top = parent.offset().top + border_top + padding_top;\r\n        parent_height = parent.height();\r\n        if (fixed) {\r\n          fixed = false;\r\n          bottomed = false;\r\n          if (manual_spacer == null) {\r\n            elm.insertAfter(spacer);\r\n            spacer.detach();\r\n          }\r\n          elm.css({\r\n            position: \"\",\r\n            top: \"\",\r\n            width: \"\",\r\n            bottom: \"\"\r\n          }).removeClass(sticky_class);\r\n          restore = true;\r\n        }\r\n        top = elm.offset().top - (parseInt(elm.css(\"margin-top\"), 10) || 0) - offset_top;\r\n        height = elm.outerHeight(true);\r\n        el_float = elm.css(\"float\");\r\n        if (spacer) {\r\n          spacer.css({\r\n            width: elm.outerWidth(true),\r\n            height: height,\r\n            display: elm.css(\"display\"),\r\n            \"vertical-align\": elm.css(\"vertical-align\"),\r\n            \"float\": el_float\r\n          });\r\n        }\r\n        if (restore) {\r\n          return tick();\r\n        }\r\n      };\r\n      recalc();\r\n      if (height === parent_height) {\r\n        return;\r\n      }\r\n      last_pos = void 0;\r\n      offset = offset_top;\r\n      recalc_counter = recalc_every;\r\n      tick = function() {\r\n        var css, delta, recalced, scroll, will_bottom, win_height;\r\n        if (detached) {\r\n          return;\r\n        }\r\n        recalced = false;\r\n        if (recalc_counter != null) {\r\n          recalc_counter -= 1;\r\n          if (recalc_counter <= 0) {\r\n            recalc_counter = recalc_every;\r\n            recalc();\r\n            recalced = true;\r\n          }\r\n        }\r\n        if (!recalced && doc.height() !== last_scroll_height) {\r\n          recalc();\r\n          recalced = true;\r\n        }\r\n        scroll = win.scrollTop();\r\n        if (last_pos != null) {\r\n          delta = scroll - last_pos;\r\n        }\r\n        last_pos = scroll;\r\n        if (fixed) {\r\n          if (enable_bottoming) {\r\n            will_bottom = scroll + height + offset > parent_height + parent_top;\r\n            if (bottomed && !will_bottom) {\r\n              bottomed = false;\r\n              elm.css({\r\n                position: \"fixed\",\r\n                bottom: \"\",\r\n                top: offset\r\n              }).trigger(\"sticky_kit:unbottom\");\r\n            }\r\n          }\r\n          if (scroll < top) {\r\n            fixed = false;\r\n            offset = offset_top;\r\n            if (manual_spacer == null) {\r\n              if (el_float === \"left\" || el_float === \"right\") {\r\n                elm.insertAfter(spacer);\r\n              }\r\n              spacer.detach();\r\n            }\r\n            css = {\r\n              position: \"\",\r\n              width: \"\",\r\n              top: \"\"\r\n            };\r\n            elm.css(css).removeClass(sticky_class).trigger(\"sticky_kit:unstick\");\r\n          }\r\n          if (inner_scrolling) {\r\n            win_height = win.height();\r\n            if (height + offset_top > win_height) {\r\n              if (!bottomed) {\r\n                offset -= delta;\r\n                offset = Math.max(win_height - height, offset);\r\n                offset = Math.min(offset_top, offset);\r\n                if (fixed) {\r\n                  elm.css({\r\n                    top: offset + \"px\"\r\n                  });\r\n                }\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          if (scroll > top) {\r\n            fixed = true;\r\n            css = {\r\n              position: \"fixed\",\r\n              top: offset\r\n            };\r\n            css.width = elm.css(\"box-sizing\") === \"border-box\" ? elm.outerWidth() + \"px\" : elm.width() + \"px\";\r\n            elm.css(css).addClass(sticky_class);\r\n            if (manual_spacer == null) {\r\n              elm.after(spacer);\r\n              if (el_float === \"left\" || el_float === \"right\") {\r\n                spacer.append(elm);\r\n              }\r\n            }\r\n            elm.trigger(\"sticky_kit:stick\");\r\n          }\r\n        }\r\n        if (fixed && enable_bottoming) {\r\n          if (will_bottom == null) {\r\n            will_bottom = scroll + height + offset > parent_height + parent_top;\r\n          }\r\n          if (!bottomed && will_bottom) {\r\n            bottomed = true;\r\n            if (parent.css(\"position\") === \"static\") {\r\n              parent.css({\r\n                position: \"relative\"\r\n              });\r\n            }\r\n            return elm.css({\r\n              position: \"absolute\",\r\n              bottom: padding_bottom,\r\n              top: \"auto\"\r\n            }).trigger(\"sticky_kit:bottom\");\r\n          }\r\n        }\r\n      };\r\n      recalc_and_tick = function() {\r\n        recalc();\r\n        return tick();\r\n      };\r\n      detach = function() {\r\n        detached = true;\r\n        win.off(\"touchmove\", tick);\r\n        win.off(\"scroll\", tick);\r\n        win.off(\"resize\", recalc_and_tick);\r\n        $(document.body).off(\"sticky_kit:recalc\", recalc_and_tick);\r\n        elm.off(\"sticky_kit:detach\", detach);\r\n        elm.removeData(\"sticky_kit\");\r\n        elm.css({\r\n          position: \"\",\r\n          bottom: \"\",\r\n          top: \"\",\r\n          width: \"\"\r\n        });\r\n        parent.position(\"position\", \"\");\r\n        if (fixed) {\r\n          if (manual_spacer == null) {\r\n            if (el_float === \"left\" || el_float === \"right\") {\r\n              elm.insertAfter(spacer);\r\n            }\r\n            spacer.remove();\r\n          }\r\n          return elm.removeClass(sticky_class);\r\n        }\r\n      };\r\n      win.on(\"touchmove\", tick);\r\n      win.on(\"scroll\", tick);\r\n      win.on(\"resize\", recalc_and_tick);\r\n      $(document.body).on(\"sticky_kit:recalc\", recalc_and_tick);\r\n      elm.on(\"sticky_kit:detach\", detach);\r\n      return setTimeout(tick, 0);\r\n    };\r\n    for (i = 0, len = this.length; i < len; i++) {\r\n      elm = this[i];\r\n      fn($(elm));\r\n    }\r\n    return this;\r\n  };\r\n\r\n}).call(this);\r\n"]}