{"version":3,"sources":["fancybox.js","flickity.js","formstyler.js","input-mask.js","input-width.js","range-slider.js","spinner.js","sticky.js"],"names":["window","document","$","undefined","fn","fancybox","console","log","div","defaults","loop","margin","gutter","keyboard","arrows","infobar","toolbar","buttons","idleTime","smallBtn","protect","modal","image","preload","ajax","settings","data","iframe","tpl","css","attr","scrolling","defaultType","animationEffect","animationDuration","zoomOpacity","transitionEffect","transitionDuration","slideClass","baseClass","baseTpl","spinnerTpl","errorTpl","btnTpl","download","zoom","close","arrowLeft","arrowRight","parentEl","autoFocus","backFocus","trapFocus","fullScreen","autoStart","touch","vertical","momentum","hash","media","slideShow","speed","thumbs","hideOnClose","axis","wheel","onInit","noop","beforeLoad","afterLoad","beforeShow","afterShow","beforeClose","afterClose","onActivate","onDeactivate","clickContent","current","event","type","clickSlide","clickOutside","dblclickContent","dblclickSlide","dblclickOutside","mobile","lang","i18n","en","CLOSE","NEXT","PREV","ERROR","PLAY_START","PLAY_STOP","FULL_SCREEN","THUMBS","DOWNLOAD","SHARE","ZOOM","de","$W","$D","called","requestAFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","callback","setTimeout","transitionEnd","t","el","createElement","transitions","transition","OTransition","MozTransition","WebkitTransition","style","forceRedraw","$el","length","offsetHeight","FancyBox","content","opts","index","self","this","extend","isMobile","isArray","id","group","currIndex","parseInt","prevIndex","prevPos","currPos","firstRun","createGroup","$lastFocus","activeElement","blur","slides","init","prototype","$scrollDiv","$container","buttonStr","firstItem","firstItemOpts","scrollbarWidth","scrollTop","scrollLeft","getInstance","addClass","test","navigator","userAgent","MSStream","body","scrollHeight","innerHeight","appendTo","offsetWidth","clientWidth","remove","append","each","value","translate","replace","$refs","container","forEach","item","find","trigger","activate","jumpTo","obj","str","arr","match","n","items","makeArray","i","$item","found","src","srcParts","isPlainObject","options","$orig","videoFormat","charAt","$thumb","caption","apply","split","shift","filter","inArray","push","addEvents","removeEvents","on","e","stopPropagation","preventDefault","previous","next","isScaledDown","originalEvent","update","stage","hide","show","instance","isClosing","target","hasClass","is","has","focus","keycode","keyCode","which","idleSecondsCounter","isIdle","showControls","idleInterval","setInterval","isDragging","hideControls","off","clearInterval","duration","pos","slide","canvasWidth","currentPos","transitionProps","groupLen","isAnimating","createSlide","updateControls","getTranslate","$slide","isMoved","left","top","forcedDuration","isNumeric","removeClass","loadSlide","stop","Math","round","width","animate","removeAttr","complete","children","isLoaded","revealContent","isComplete","updateSlide","scaleToActual","x","y","imgPos","posX","posY","scaleX","scaleY","$what","$content","canvasHeight","height","newImgWidth","newImgHeight","hasError","updateCursor","SlideShow","isActive","scaleToFit","end","getFitPos","minRatio","imgWidth","imgHeight","min","floor","key","setTranslate","centerSlide","opacity","nextWidth","nextHeight","isZoomable","fitPos","isFunction","rez","canPan","abs","ajaxLoad","isLoading","setImage","setIframe","setContent","setError","showLoading","url","success","textStatus","error","jqXHR","one","abort","temp","pxRatio","windowWidth","srcset","devicePixelRatio","innerWidth","map","ret","trim","substring","postfix","sort","a","b","j","thumb","$ghost","setBigImage","$img","$image","clearTimeout","timouts","naturalWidth","naturalHeight","hideLoading","max","readyState","$iframe","Date","getTime","isReady","scrollWidth","$body","$wrap","frameWidth","frameHeight","contents","ignore","contentWindow","documentElement","ceil","outerWidth","outerHeight","prepend","empty","hasOwnProperty","parent","$placeholder","insertAfter","nodeType","html","after","$smallBtn","$spinner","first","button","effect","effectClassName","start","getThumbPos","slidePos","thumbPos","offset","ownerDocument","element","elementRect","getBoundingClientRect","parentRects","parentElement","every","parentRect","visiblePixelX","right","visiblePixelY","bottom","isElementVisible","parseFloat","siblings","prev","isVisible","d","done","cleanUp","name","args","Array","slice","call","arguments","unshift","force","$caption","isHiddenControls","prop","toggleClass","toggleControls","version","command","open","all","destroy","createTouch","use3d","getComputedStyle","getPropertyValue","documentMode","matrix","eq","indexOf","transRez","exec","props","position","transform","to","leaveAnimationName","propertyName","selector","_run","$target","currentTarget","isDefaultPrevented","jQuery","format","params","param","youtube","matcher","autoplay","autohide","fs","rel","hd","wmode","enablejsapi","html5","paramPlace","vimeo","show_title","show_byline","show_portrait","fullscreen","api","metacafe","dailymotion","additionalInfos","vine","instagram","gmap_place","gmap_search","urlParams","paramObj","provider","providerName","providerOpts","m","p","decodeURIComponent","contentProvider","cancelAFrame","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","pointers","result","touches","changedTouches","pageX","pageY","clientX","clientY","distance","point2","point1","what","sqrt","pow","isClickable","get","onclick","atts","attributes","nodeName","substr","isScrollable","overflowY","overflowX","horizontal","clientHeight","Guestures","$bg","bg","$stage","proxy","ontouchstart","isTouchDevice","realPoints","startPoints","startEvent","canTap","isPanning","isSwiping","isZooming","isScrolling","sliderStartPos","sliderLastPos","contentStartPos","contentLastPos","startTime","distanceX","distanceY","addEventListener","onscroll","centerPointStartX","centerPointStartY","percentageOfImageAtPinchPointX","percentageOfImageAtPinchPointY","startDistanceBetweenFingers","ontouchmove","newPoints","onSwipe","onPan","onZoom","angle","swiping","requestId","atan2","PI","inTransition","limitMovement","minTranslateX","minTranslateY","maxTranslateX","maxTranslateY","newOffsetX","newOffsetY","currentOffsetX","currentOffsetY","currentWidth","currentHeight","limitPosition","newWidth","newHeight","pinchRatio","translateFromZoomingX","translateFromZoomingY","centerPointEndX","centerPointEndY","translateFromTranslatingX","newPos","ontouchend","dMs","panning","zooming","endPoints","removeEventListener","onTap","velocityX","velocityY","speedX","endPanning","endZooming","endSwiping","len","reset","where","tapX","tapY","process","prefix","action","addBack","tapped","timer","$button","toggle","set","clear","onInit.fb","beforeShow.fb","afterShow.fb","afterKeydown.fb","keypress","beforeClose.fb onDeactivate.fb","hidden","val","fnMap","FullScreen","request","elem","requestFullscreen","ALLOW_KEYBOARD_INPUT","exit","exitFullscreen","isFullscreen","Boolean","fullscreenElement","enabled","fullscreenEnabled","beforeClose.fb","fullscreenchange","FancyThumbs","$grid","$list","Thumbs","second","create","list","widthRatio","heightRatio","$parent","thumbWidth","thumbHeight","margin-top","margin-left","share","string","entityMap","f","location","encodeURIComponent","&","<",">","\"","'","/","`","=","String","s","text","click","href","escapeSelector","sel","ch","asCodePoint","charCodeAt","toString","shouldCreateHistory","currentHash","timerID","parseUrl","pop","gallery","join","triggerFromUrl","getGalleryID","origHash","history","title","pathname","search","replaceState","prevTime","currTime","deltaY","deltaX","wheelDelta","detail","factory","define","amd","module","exports","require","jQueryBridget","arraySlice","logError","message","namespace","PluginClass","option","arg0","pluginMethodStr","methodName","$elems","method","returnValue","_init","updateJQuery","bridget","global","EvEmitter","proto","eventName","listener","events","_events","listeners","once","onceEvents","_onceEvents","splice","emitEvent","onceListeners","allOff","getSize","getStyleSize","num","isNaN","measurements","measurementsLength","getStyle","isBoxSizeOuter","isSetup","padding","borderStyle","borderWidth","boxSizing","appendChild","removeChild","setup","querySelector","display","size","getZeroSize","isBorderBox","measurement","paddingWidth","paddingLeft","paddingRight","paddingHeight","paddingTop","paddingBottom","marginWidth","marginLeft","marginRight","marginHeight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderHeight","borderTopWidth","borderBottomWidth","isBorderBoxSizeOuter","styleWidth","styleHeight","matchesSelector","matchesMethod","ElemProto","Element","matches","prefixes","fizzyUIUtils","utils","modulo","removeFrom","ary","getParent","parentNode","getQueryElement","handleEvent","filterFindElements","elems","ffElems","HTMLElement","childElems","querySelectorAll","debounceMethod","_class","threshold","timeoutName","timeout","_this","docReady","toDashed","$1","$2","toLowerCase","htmlInit","WidgetClass","dashedNamespace","dataAttr","dataAttrElems","jsDashElems","concat","dataOptionsAttr","getAttribute","JSON","parse","className","Flickity","Cell","setAttribute","side","originSide","removeAttribute","setPosition","updateTarget","renderPosition","setDefaultTarget","marginProperty","cellAlign","getPositionValue","wrapShift","slideableWidth","Slide","isOriginLeft","cells","addCell","cell","beginMargin","firstMargin","endMargin","lastCell","getLastCell","lastMargin","slideWidth","select","changeSelected","unselect","isSelected","classMethod","classList","getCellElements","animatePrototype","lastTime","timeToCall","startAnimation","restingFrames","applyDragForce","applySelectedAttraction","previousX","integratePhysics","positionSlider","settle","transformProperty","wrapAround","shiftWrapCells","cursorPosition","rightToLeft","slider","firstSlide","positionX","progress","slidesWidth","dispatchEvent","positionSliderAtSelected","selectedSlide","velocity","percentPosition","isPointerDown","isFreeScrolling","selectedIndex","beforeGap","_shiftCells","beforeShiftCells","afterGap","afterShiftCells","gap","cellShift","_unshiftCells","getFrictionFactor","applyForce","getRestingPosition","isDraggable","dragForce","dragX","selectedAttraction","_Flickity","moveElements","toElem","GUID","instances","queryElement","flickityGUID","$element","constructor","_create","accessibility","freeScrollFriction","friction","namespaceJQueryEvents","resize","setGallerySize","createMethods","guid","viewport","_createSlider","watchCSS","add","_filterFindCellElements","reloadCells","tabIndex","initialIndex","isInitActivated","cellSelector","_makeCells","positionCells","_getWrapShiftCells","cellElem","getLastSlide","_sizeCells","_positionCells","maxCellHeight","cellX","startCell","updateSlides","_containSlides","nextMargin","canCellFit","_getCanCellFit","updateSelectedSlide","groupCells","number","percentMatch","percent","reposition","setCellAlign","cellAlignShorthands","center","shorthand","adaptiveHeight","gapX","cellIndex","_getGapCells","increment","contain","isRightToLeft","contentWidth","isContentSmaller","beginBound","endBound","emitArgs","$event","jQEvent","Event","isWrap","isInstant","_wrapSelect","wrapIndex","delta","backWrapDelta","forewardWrapDelta","isDragSelect","unselectSelectedSlide","selectedCells","selectedElements","selectedCell","selectedElement","selectCell","queryCell","getCellSlideIndex","getCell","getCells","getParentCell","getAdjacentCellElements","adjCount","cellElems","slideIndex","uiChange","childUIPointerDown","onresize","deactivate","onkeydown","isNotFocused","handler","keyboardHandlers","37","leftMethod","39","rightMethod","prevScrollY","pageYOffset","scrollTo","pageXOffset","removeData","setJQuery","jq","Unipointer","Object","bindStartEvent","_bindStartEvent","unbindStartEvent","isBind","bindMethod","PointerEvent","getTouch","identifier","pointerIdentifier","onmousedown","_pointerDown","onpointerdown","pointer","pointerId","pointerDown","_bindPostStartEvents","postStartEvents","mousedown","touchstart","pointerdown","_boundPointerEvents","_unbindPostStartEvents","onmousemove","_pointerMove","onpointermove","pointerMove","onmouseup","_pointerUp","onpointerup","_pointerDone","pointerUp","pointerDone","onpointercancel","_pointerCancel","ontouchcancel","pointerCancel","getPointerPoint","Unidragger","bindHandles","_bindHandles","unbindHandles","handles","handle","touchAction","_touchActionValue","_dragPointerDown","focused","pointerDownPoint","canPreventDefaultOnPointerDown","moveVector","_dragPointerMove","_dragMove","movePoint","hasDragStarted","_dragStart","_dragPointerUp","_dragEnd","_staticClick","dragStartPoint","isPreventingClicks","dragStart","dragMove","bind","dragEnd","isIgnoringMouseUp","staticClick","draggable","dragThreshold","isTouch","isTouchmoveScrollCanceled","_createDrag","onActivateDrag","_uiChangeDrag","_childUIPointerDownDrag","unbindDrag","updateDraggable","onDeactivateDrag","bindDrag","pointerDownFocus","cursorNodes","TEXTAREA","INPUT","OPTION","clickTypes","radio","checkbox","submit","file","pointerDownScroll","getScrollPosition","_pointerDownDefault","getCanPointerDown","focusNodes","SELECT","isTouchStart","isTouchPointer","pointerType","isFocusNode","canPointerDown","isTouchScrolling","dragStartPosition","previousDragX","direction","originBound","dragMoveTime","freeScroll","dragEndRestingSelect","restingX","dragEndBoostSelect","getSlideDistance","positiveResting","_getClosestResting","negativeResting","minDistance","Infinity","condition","md","isWrapAround","wrap","clickedCell","scroll","scrollMoveX","scrollMoveY","TapListener","bindTap","unbindTap","tapElement","pointerPoint","boundingRect","scrollX","scrollY","svgURI","PrevNextButton","isEnabled","isPrevious","leftDirection","isLeft","disable","svg","createSVG","createElementNS","path","pathMovements","shape","x0","x1","y1","x2","y2","x3","getArrowMovements","arrowShape","enable","disabled","lastIndex","boundIndex","prevNextButtons","_createPrevNextButtons","prevButton","nextButton","activatePrevNextButtons","deactivatePrevNextButtons","PageDots","holder","dots","setDots","addDots","removeDots","count","fragment","createDocumentFragment","newDots","dot","updateSelected","selectedDot","pageDots","_createPageDots","activatePageDots","updateSelectedPageDots","updatePageDots","deactivatePageDots","hiddenProperty","visibilityEvent","Player","state","onVisibilityChange","visibilityChange","onVisibilityPlay","visibilityPlay","play","isPageHidden","tick","time","autoPlay","pause","unpause","pauseAutoPlayOnHover","_createPlayer","player","activatePlayer","stopPlayer","deactivatePlayer","playPlayer","pausePlayer","unpausePlayer","onmouseenter","onmouseleave","insert","isAppend","insertCellElement","insertBefore","endCells","cellChange","minCellIndex","cellSizeChange","changedCellIndex","isPositioningSlider","prevSelectedElem","LazyLoader","img","flickity","load","_createLazyload","lazyLoad","lazyImages","lazyCellImages","lazyloadAttr","srcAttr","srcsetAttr","imgs","getCellLazyImages","onload","onerror","_createAsNavFor","activateAsNavFor","deactivateAsNavFor","destroyAsNavFor","asNavForOption","asNavFor","setNavCompanion","companion","navCompanion","onNavCompanionSelect","navCompanionSelect","onNavStaticClick","firstIndex","selectIndex","removeNavSelectedElements","navSelectedElements","changeNavSelectedClass","navElem","cellElement","imagesLoaded","ImagesLoaded","onAlways","queryElem","elements","getImages","jqDeferred","Deferred","check","images","addElementImages","addImage","background","addElementBackgroundImages","elementNodeTypes","childImgs","child","1","9","11","LoadingImage","Background","Image","reURL","backgroundImage","addBackground","loadingImage","onProgress","progressedCount","hasAnyBroken","notify","debug","jqMethod","getIsImageComplete","confirm","proxyImage","unbindEvents","makeJQueryPlugin","promise","_createImagesLoaded","pluginName","idSuffix","filePlaceholder","fileBrowse","fileNumber","selectPlaceholder","selectSearch","selectSearchLimit","selectSearchNotFound","selectSearchPlaceholder","selectVisibleOptions","selectSmartPositioning","locale","locales","onSelectOpened","onSelectClosed","onFormStyled","Plugin","onDocumentClick","parents","selectbox","dropdown","keyup","opt","iOS","Android","Attributes","classes","checkboxOutput","att","prependTo","triggerHandler","change","closest","before","radioOutput","commonParents","cachedThis","commonParent","inputName","fileOutput","placeholder","browse","files","numberOutput","step","interval","Number","changeValue","spin","newValue","decimals","multiplier","selectboxOutput","preventScrolling","scrollDiff","makeList","op","li","liClass","liClasses","dataList","optionClass","optgroupClass","dataJqfsClass","k","ul","ulHeight","liHeight","clkd","ctrlKey","metaKey","shiftKey","prevAll","nextAll","not","arrIndexes","doMultipleSelect","searchHTML","selectzIndex","divSelect","divText","optionSelected","notFound","liWidthInner","liWidth","l","selClone","clone","selCloneWidth","selectHeight","searchHeight","isMaxHeight","liSelected","liOuterHeight","win","topOffset","bottomOffset","visible","minHeight","dropDown","maxHeightBottom","maxHeightTop","dropUp","zIndex","query","RegExp","hover","liText","mouseout","registered","doSelect","returns","Zepto","Mask","mask","invalid","getCaret","ctrl","dSel","selection","cSelStart","selectionStart","appVersion","createRange","moveStart","setCaret","range","setSelectionRange","createTextRange","collapse","moveEnd","maskDigitPosMapOld","maskDigitPosMap","jMaskGlobals","useInput","behaviour","keydown","oldValue","selectOnFocus","clearIfNotMatch","regexMask","getRegexMask","translation","pattern","optional","recursive","oRecursive","r","maskChunks","jMask","digit","destroyEvents","v","calculateCaretPosition","oldVal","newVal","getMasked","caretPosNew","caretPosOld","newValL","oldValL","maskDigitsBeforeCaret","maskDigitsAfterCaret","maskDigitsBeforeCaretAll","maskDigitsBeforeCaretAllOld","caretPos","byPassKeys","keyStrokeCompensation","callbacks","skipMaskChars","lastMaskChar","lastUntranslatedMaskChar","buf","maskLen","valLen","addMethod","resetPos","maskDigitCount","maskDigitPosArr","reverse","maskDigit","valDigit","fallback","lastMaskCharDigit","mapMaskdigitPositions","maskDiff","changed","defaultArgs","criteria","caret","getCleanVal","getMaskedVal","onlyMask","maxlength","maskWatchers","HTMLAttributes","input","notSameMaskObject","field","maskObject","stringify","globals","watchInterval","watchInputs","maskFunction","masked","unmask","dataMask","cleanVal","applyDataMask","maskElements","dataMaskAttr","isSupported","watchDataMask","0","#","A","S","textWidth","font","fakeEl","jRange","onstatechange","ondragend","onbarclicked","isRange","showLabels","showScale","theme","snap","template","node","inputNode","from","domNode","onChange","lowPointer","highPointer","last","labels","lowLabel","highLabel","scale","bar","clickableBar","render","isSingle","attachEvents","renderScale","setValue","barClicked","onDragStart","onDrag","onDragEnd","firstLeft","firstHalfWidth","lastLeft","lastHalfWidth","leftSide","rightSide","isPx","leftPos","lowPos","highPos","circleWidth","prcToPx","expPos","correctPositionForSnap","w","showPointerValue","isReadonly","currentValue","positionToValue","diff","expectedPosition","values","prc","valuesToPrc","getBarWidth","label","setInputValue","isDecimal","final","getValue","getOptions","getRange","toggleDisable","updateRange","$this","spinner","oldval","stick_in_parent","doc","elm","enable_bottoming","inner_scrolling","manual_spacer","offset_top","parent_selector","recalc_every","sticky_class","spacer","bottoming","padding_bottom","parent_top","parent_height","el_float","detached","bottomed","detach","fixed","last_pos","last_scroll_height","recalc","recalc_and_tick","recalc_counter","border_top","padding_top","restore","vertical-align","float","recalced","will_bottom","win_height"],"mappings":"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","file":"plugins.js","sourcesContent":["// ==================================================\r\n// fancyBox v3.2.10\r\n//\r\n// Licensed GPLv3 for open source use\r\n// or fancyBox Commercial License for commercial use\r\n//\r\n// http://fancyapps.com/fancybox/\r\n// Copyright 2017 fancyApps\r\n//\r\n// ==================================================\r\n;(function (window, document, $, undefined) {\r\n    'use strict';\r\n\r\n    // If there's no jQuery, fancyBox can't work\r\n    // =========================================\r\n\r\n    if ( !$ ) {\r\n        return;\r\n    }\r\n\r\n    // Check if fancyBox is already initialized\r\n    // ========================================\r\n\r\n    if ( $.fn.fancybox ) {\r\n\r\n        if ( 'console' in window ) {\r\n            console.log( 'fancyBox already initialized' );\r\n        }\r\n\r\n        return;\r\n    }\r\n\r\n    // Private default settings\r\n    // ========================\r\n\r\n    var defaults = {\r\n\r\n        // Enable infinite gallery navigation\r\n        loop : false,\r\n\r\n        // Space around image, ignored if zoomed-in or viewport width is smaller than 800px\r\n        margin : [44, 0],\r\n\r\n        // Horizontal space between slides\r\n        gutter : 50,\r\n\r\n        // Enable keyboard navigation\r\n        keyboard : true,\r\n\r\n        // Should display navigation arrows at the screen edges\r\n        arrows : true,\r\n\r\n        // Should display infobar (counter and arrows at the top)\r\n        infobar : true,\r\n\r\n        // Should display toolbar (buttons at the top)\r\n        toolbar : true,\r\n\r\n        // What buttons should appear in the top right corner.\r\n        // Buttons will be created using templates from `btnTpl` option\r\n        // and they will be placed into toolbar (class=\"fancybox-toolbar\"` element)\r\n        buttons : [\r\n            'slideShow',\r\n            'fullScreen',\r\n            'thumbs',\r\n            'share',\r\n            //'download',\r\n            //'zoom',\r\n            'close'\r\n        ],\r\n\r\n        // Detect \"idle\" time in seconds\r\n        idleTime : 3,\r\n\r\n        // Should display buttons at top right corner of the content\r\n        // If 'auto' - they will be created for content having type 'html', 'inline' or 'ajax'\r\n        // Use template from `btnTpl.smallBtn` for customization\r\n        smallBtn : 'auto',\r\n\r\n        // Disable right-click and use simple image protection for images\r\n        protect : false,\r\n\r\n        // Shortcut to make content \"modal\" - disable keyboard navigtion, hide buttons, etc\r\n        modal : false,\r\n\r\n        image : {\r\n\r\n            // Wait for images to load before displaying\r\n            // Requires predefined image dimensions\r\n            // If 'auto' - will zoom in thumbnail if 'width' and 'height' attributes are found\r\n            preload : \"auto\"\r\n\r\n        },\r\n\r\n        ajax : {\r\n\r\n            // Object containing settings for ajax request\r\n            settings : {\r\n\r\n                // This helps to indicate that request comes from the modal\r\n                // Feel free to change naming\r\n                data : {\r\n                    fancybox : true\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        iframe : {\r\n\r\n            // Iframe template\r\n            tpl : '<iframe id=\"fancybox-frame{rnd}\" name=\"fancybox-frame{rnd}\" class=\"fancybox-iframe\" frameborder=\"0\" vspace=\"0\" hspace=\"0\" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency=\"true\" src=\"\"></iframe>',\r\n\r\n            // Preload iframe before displaying it\r\n            // This allows to calculate iframe content width and height\r\n            // (note: Due to \"Same Origin Policy\", you can't get cross domain data).\r\n            preload : true,\r\n\r\n            // Custom CSS styling for iframe wrapping element\r\n            // You can use this to set custom iframe dimensions\r\n            css : {},\r\n\r\n            // Iframe tag attributes\r\n            attr : {\r\n                scrolling : 'auto'\r\n            }\r\n\r\n        },\r\n\r\n        // Default content type if cannot be detected automatically\r\n        defaultType : 'image',\r\n\r\n        // Open/close animation type\r\n        // Possible values:\r\n        //   false            - disable\r\n        //   \"zoom\"           - zoom images from/to thumbnail\r\n        //   \"fade\"\r\n        //   \"zoom-in-out\"\r\n        //\r\n        animationEffect : \"zoom\",\r\n\r\n        // Duration in ms for open/close animation\r\n        animationDuration : 500,\r\n\r\n        // Should image change opacity while zooming\r\n        // If opacity is \"auto\", then opacity will be changed if image and thumbnail have different aspect ratios\r\n        zoomOpacity : \"auto\",\r\n\r\n        // Transition effect between slides\r\n        //\r\n        // Possible values:\r\n        //   false            - disable\r\n        //   \"fade'\r\n        //   \"slide'\r\n        //   \"circular'\r\n        //   \"tube'\r\n        //   \"zoom-in-out'\r\n        //   \"rotate'\r\n        //\r\n        transitionEffect : \"fade\",\r\n\r\n        // Duration in ms for transition animation\r\n        transitionDuration : 366,\r\n\r\n        // Custom CSS class for slide element\r\n        slideClass : '',\r\n\r\n        // Custom CSS class for layout\r\n        baseClass : '',\r\n\r\n        // Base template for layout\r\n        baseTpl\t:\r\n            '<div class=\"fancybox-container\" role=\"dialog\" tabindex=\"-1\">' +\r\n                '<div class=\"fancybox-bg\"></div>' +\r\n                '<div class=\"fancybox-inner\">' +\r\n                    '<div class=\"fancybox-infobar\">' +\r\n                        '<span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span>' +\r\n                    '</div>' +\r\n                    '<div class=\"fancybox-toolbar\">{{buttons}}</div>' +\r\n                    '<div class=\"fancybox-navigation\">{{arrows}}</div>' +\r\n                    '<div class=\"fancybox-stage\"></div>' +\r\n                    '<div class=\"fancybox-caption-wrap\"><div class=\"fancybox-caption\"></div></div>' +\r\n                '</div>' +\r\n            '</div>',\r\n\r\n        // Loading indicator template\r\n        spinnerTpl : '<div class=\"fancybox-loading\"></div>',\r\n\r\n        // Error message template\r\n        errorTpl : '<div class=\"fancybox-error\"><p>{{ERROR}}<p></div>',\r\n\r\n        btnTpl : {\r\n\r\n            download : '<a download data-fancybox-download class=\"fancybox-button fancybox-button--download\" title=\"{{DOWNLOAD}}\">' +\r\n                        '<svg viewBox=\"0 0 40 40\">' +\r\n                            '<path d=\"M20,23 L20,8 L20,23 L13,16 L20,23 L27,16 L20,23 M26,28 L13,28 L27,28 L14,28\" />' +\r\n                        '</svg>' +\r\n                    '</a>',\r\n\r\n            zoom : '<button data-fancybox-zoom class=\"fancybox-button fancybox-button--zoom\" title=\"{{ZOOM}}\">' +\r\n                        '<svg viewBox=\"0 0 40 40\">' +\r\n                            '<path d=\"M 18,17 m-8,0 a 8,8 0 1,0 16,0 a 8,8 0 1,0 -16,0 M25,23 L31,29 L25,23\" />' +\r\n                        '</svg>' +\r\n                    '</button>',\r\n\r\n            close : '<button data-fancybox-close class=\"fancybox-button fancybox-button--close\" title=\"{{CLOSE}}\">' +\r\n                        '<svg viewBox=\"0 0 40 40\">' +\r\n                            '<path d=\"M10,10 L30,30 M30,10 L10,30\" />' +\r\n                        '</svg>' +\r\n                    '</button>',\r\n\r\n            // This small close button will be appended to your html/inline/ajax content by default,\r\n            // if \"smallBtn\" option is not set to false\r\n            smallBtn   : '<button data-fancybox-close class=\"fancybox-close-small\" title=\"{{CLOSE}}\"></button>',\r\n\r\n            // Arrows\r\n            arrowLeft : '<button data-fancybox-prev class=\"fancybox-button fancybox-button--arrow_left\" title=\"{{PREV}}\">' +\r\n                            '<svg viewBox=\"0 0 40 40\">' +\r\n                              '<path d=\"M10,20 L30,20 L10,20 L18,28 L10,20 L18,12 L10,20\"></path>' +\r\n                            '</svg>' +\r\n                          '</button>',\r\n\r\n            arrowRight : '<button data-fancybox-next class=\"fancybox-button fancybox-button--arrow_right\" title=\"{{NEXT}}\">' +\r\n                          '<svg viewBox=\"0 0 40 40\">' +\r\n                            '<path d=\"M30,20 L10,20 L30,20 L22,28 L30,20 L22,12 L30,20\"></path>' +\r\n                          '</svg>' +\r\n                        '</button>'\r\n        },\r\n\r\n        // Container is injected into this element\r\n        parentEl : 'body',\r\n\r\n\r\n        // Focus handling\r\n        // ==============\r\n\r\n        // Try to focus on the first focusable element after opening\r\n        autoFocus : false,\r\n\r\n        // Put focus back to active element after closing\r\n        backFocus : true,\r\n\r\n        // Do not let user to focus on element outside modal content\r\n        trapFocus : true,\r\n\r\n\r\n        // Module specific options\r\n        // =======================\r\n\r\n        fullScreen : {\r\n            autoStart : false,\r\n        },\r\n\r\n        // Set `touch: false` to disable dragging/swiping\r\n        touch : {\r\n            vertical : true,  // Allow to drag content vertically\r\n            momentum : true   // Continue movement after releasing mouse/touch when panning\r\n        },\r\n\r\n        // Hash value when initializing manually,\r\n        // set `false` to disable hash change\r\n        hash : null,\r\n\r\n        // Customize or add new media types\r\n        // Example:\r\n        /*\r\n        media : {\r\n            youtube : {\r\n                params : {\r\n                    autoplay : 0\r\n                }\r\n            }\r\n        }\r\n        */\r\n        media : {},\r\n\r\n        slideShow : {\r\n            autoStart : false,\r\n            speed     : 4000\r\n        },\r\n\r\n        thumbs : {\r\n\t\t\tautoStart   : false,                  // Display thumbnails on opening\r\n\t\t\thideOnClose : true,                   // Hide thumbnail grid when closing animation starts\r\n\t\t\tparentEl    : '.fancybox-container',  // Container is injected into this element\r\n\t\t\taxis        : 'y'                     // Vertical (y) or horizontal (x) scrolling\r\n\t\t},\r\n\r\n        // Use mousewheel to navigate gallery\r\n        // If 'auto' - enabled for images only\r\n        wheel : 'auto',\r\n\r\n        // Callbacks\r\n        //==========\r\n\r\n        // See Documentation/API/Events for more information\r\n        // Example:\r\n        /*\r\n            afterShow: function( instance, current ) {\r\n                 console.info( 'Clicked element:' );\r\n                 console.info( current.opts.$orig );\r\n            }\r\n        */\r\n\r\n        onInit       : $.noop,  // When instance has been initialized\r\n\r\n        beforeLoad   : $.noop,  // Before the content of a slide is being loaded\r\n        afterLoad    : $.noop,  // When the content of a slide is done loading\r\n\r\n        beforeShow   : $.noop,  // Before open animation starts\r\n        afterShow    : $.noop,  // When content is done loading and animating\r\n\r\n        beforeClose  : $.noop,  // Before the instance attempts to close. Return false to cancel the close.\r\n        afterClose   : $.noop,  // After instance has been closed\r\n\r\n        onActivate   : $.noop,  // When instance is brought to front\r\n        onDeactivate : $.noop,  // When other instance has been activated\r\n\r\n\r\n        // Interaction\r\n        // ===========\r\n\r\n        // Use options below to customize taken action when user clicks or double clicks on the fancyBox area,\r\n        // each option can be string or method that returns value.\r\n        //\r\n        // Possible values:\r\n        //   \"close\"           - close instance\r\n        //   \"next\"            - move to next gallery item\r\n        //   \"nextOrClose\"     - move to next gallery item or close if gallery has only one item\r\n        //   \"toggleControls\"  - show/hide controls\r\n        //   \"zoom\"            - zoom image (if loaded)\r\n        //   false             - do nothing\r\n\r\n        // Clicked on the content\r\n        clickContent : function( current, event ) {\r\n            return current.type === 'image' ? 'zoom' : false;\r\n        },\r\n\r\n        // Clicked on the slide\r\n        clickSlide : 'close',\r\n\r\n        // Clicked on the background (backdrop) element\r\n        clickOutside : 'close',\r\n\r\n        // Same as previous two, but for double click\r\n        dblclickContent : false,\r\n        dblclickSlide   : false,\r\n        dblclickOutside : false,\r\n\r\n\r\n        // Custom options when mobile device is detected\r\n        // =============================================\r\n\r\n        mobile : {\r\n            idleTime : false,\r\n            margin   : 0,\r\n\r\n            clickContent : function( current, event ) {\r\n                return current.type === 'image' ? 'toggleControls' : false;\r\n            },\r\n            clickSlide : function( current, event ) {\r\n                return current.type === 'image' ? 'toggleControls' : 'close';\r\n            },\r\n            dblclickContent : function( current, event ) {\r\n                return current.type === 'image' ? 'zoom' : false;\r\n            },\r\n            dblclickSlide : function( current, event ) {\r\n                return current.type === 'image' ? 'zoom' : false;\r\n            }\r\n        },\r\n\r\n\r\n        // Internationalization\r\n        // ============\r\n\r\n        lang : 'en',\r\n        i18n : {\r\n            'en' : {\r\n                CLOSE       : 'Close',\r\n                NEXT        : 'Next',\r\n                PREV        : 'Previous',\r\n                ERROR       : 'The requested content cannot be loaded. <br/> Please try again later.',\r\n                PLAY_START  : 'Start slideshow',\r\n                PLAY_STOP   : 'Pause slideshow',\r\n                FULL_SCREEN : 'Full screen',\r\n                THUMBS      : 'Thumbnails',\r\n                DOWNLOAD    : 'Download',\r\n                SHARE       : 'Share',\r\n                ZOOM        : 'Zoom'\r\n            },\r\n            'de' : {\r\n                CLOSE       : 'Schliessen',\r\n                NEXT        : 'Weiter',\r\n                PREV        : 'Zurück',\r\n                ERROR       : 'Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es später nochmal.',\r\n                PLAY_START  : 'Diaschau starten',\r\n                PLAY_STOP   : 'Diaschau beenden',\r\n                FULL_SCREEN : 'Vollbild',\r\n                THUMBS      : 'Vorschaubilder',\r\n                DOWNLOAD    : 'Herunterladen',\r\n                SHARE       : 'Teilen',\r\n                ZOOM        : 'Maßstab'\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    // Few useful variables and methods\r\n    // ================================\r\n\r\n    var $W = $(window);\r\n    var $D = $(document);\r\n\r\n    var called = 0;\r\n\r\n\r\n    // Check if an object is a jQuery object and not a native JavaScript object\r\n    // ========================================================================\r\n\r\n    var isQuery = function ( obj ) {\r\n        return obj && obj.hasOwnProperty && obj instanceof $;\r\n    };\r\n\r\n\r\n    // Handle multiple browsers for \"requestAnimationFrame\" and \"cancelAnimationFrame\"\r\n    // ===============================================================================\r\n\r\n    var requestAFrame = (function () {\r\n        return window.requestAnimationFrame ||\r\n                window.webkitRequestAnimationFrame ||\r\n                window.mozRequestAnimationFrame ||\r\n                window.oRequestAnimationFrame ||\r\n                // if all else fails, use setTimeout\r\n                function (callback) {\r\n                    return window.setTimeout(callback, 1000 / 60);\r\n                };\r\n    })();\r\n\r\n\r\n    // Detect the supported transition-end event property name\r\n    // =======================================================\r\n\r\n    var transitionEnd = (function () {\r\n        var t, el = document.createElement(\"fakeelement\");\r\n\r\n        var transitions = {\r\n            \"transition\"      : \"transitionend\",\r\n            \"OTransition\"     : \"oTransitionEnd\",\r\n            \"MozTransition\"   : \"transitionend\",\r\n            \"WebkitTransition\": \"webkitTransitionEnd\"\r\n        };\r\n\r\n        for (t in transitions) {\r\n            if (el.style[t] !== undefined){\r\n                return transitions[t];\r\n            }\r\n        }\r\n\r\n        return 'transitionend';\r\n    })();\r\n\r\n\r\n    // Force redraw on an element.\r\n    // This helps in cases where the browser doesn't redraw an updated element properly.\r\n    // =================================================================================\r\n\r\n    var forceRedraw = function( $el ) {\r\n        return ( $el && $el.length && $el[0].offsetHeight );\r\n    };\r\n\r\n\r\n    // Class definition\r\n    // ================\r\n\r\n    var FancyBox = function( content, opts, index ) {\r\n        var self = this;\r\n\r\n        self.opts = $.extend( true, { index : index }, $.fancybox.defaults, opts || {} );\r\n\r\n        if ( $.fancybox.isMobile ) {\r\n            self.opts = $.extend( true, {}, self.opts, self.opts.mobile );\r\n        }\r\n\r\n        // Exclude buttons option from deep merging\r\n        if ( opts && $.isArray( opts.buttons ) ) {\r\n            self.opts.buttons = opts.buttons;\r\n        }\r\n\r\n        self.id    = self.opts.id || ++called;\r\n        self.group = [];\r\n\r\n        self.currIndex = parseInt( self.opts.index, 10 ) || 0;\r\n        self.prevIndex = null;\r\n\r\n        self.prevPos = null;\r\n        self.currPos = 0;\r\n\r\n        self.firstRun = null;\r\n\r\n        // Create group elements from original item collection\r\n        self.createGroup( content );\r\n\r\n        if ( !self.group.length ) {\r\n            return;\r\n        }\r\n\r\n        // Save last active element and current scroll position\r\n        self.$lastFocus = $(document.activeElement).blur();\r\n\r\n        // Collection of gallery objects\r\n        self.slides = {};\r\n\r\n        self.init();\r\n    };\r\n\r\n    $.extend(FancyBox.prototype, {\r\n\r\n        // Create DOM structure\r\n        // ====================\r\n\r\n        init : function() {\r\n            var self = this,\r\n                firstItem      = self.group[ self.currIndex ],\r\n                firstItemOpts  = firstItem.opts,\r\n                scrollbarWidth = $.fancybox.scrollbarWidth,\r\n                $scrollDiv,\r\n                $container,\r\n                buttonStr;\r\n\r\n            self.scrollTop  = $D.scrollTop();\r\n            self.scrollLeft = $D.scrollLeft();\r\n\r\n\r\n            // Hide scrollbars\r\n            // ===============\r\n\r\n            if ( !$.fancybox.getInstance() ) {\r\n\r\n                $( 'body' ).addClass( 'fancybox-active' );\r\n\r\n                // iOS hack\r\n                if ( /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream ) {\r\n\r\n                    // iOS has problems for input elements inside fixed containers,\r\n                    // the workaround is to apply `position: fixed` to `<body>` element,\r\n                    // unfortunately, this makes it lose the scrollbars and forces address bar to appear.\r\n\r\n                    if ( firstItem.type !== 'image' ) {\r\n                        $( 'body' ).css( 'top', $( 'body' ).scrollTop() * -1 ).addClass( 'fancybox-iosfix' );\r\n                    }\r\n\r\n                } else if ( !$.fancybox.isMobile && document.body.scrollHeight > window.innerHeight ) {\r\n\r\n                    if ( scrollbarWidth === undefined ) {\r\n                        $scrollDiv = $('<div style=\"width:50px;height:50px;overflow:scroll;\" />').appendTo( 'body' );\r\n\r\n                        scrollbarWidth = $.fancybox.scrollbarWidth = $scrollDiv[0].offsetWidth - $scrollDiv[0].clientWidth;\r\n\r\n                        $scrollDiv.remove();\r\n                    }\r\n\r\n                    $( 'head' ).append( '<style id=\"fancybox-style-noscroll\" type=\"text/css\">.compensate-for-scrollbar { margin-right: ' + scrollbarWidth + 'px; }</style>' );\r\n                    $( 'body' ).addClass( 'compensate-for-scrollbar' );\r\n                }\r\n            }\r\n\r\n\r\n            // Build html markup and set references\r\n            // ====================================\r\n\r\n            // Build html code for buttons and insert into main template\r\n            buttonStr = '';\r\n\r\n            $.each( firstItemOpts.buttons, function( index, value ) {\r\n                buttonStr += ( firstItemOpts.btnTpl[ value ] || '' );\r\n            });\r\n\r\n            // Create markup from base template, it will be initially hidden to\r\n            // avoid unnecessary work like painting while initializing is not complete\r\n            $container = $(\r\n                self.translate( self,\r\n                    firstItemOpts.baseTpl\r\n                        .replace( '\\{\\{buttons\\}\\}', buttonStr )\r\n                        .replace( '\\{\\{arrows\\}\\}', firstItemOpts.btnTpl.arrowLeft + firstItemOpts.btnTpl.arrowRight )\r\n                )\r\n            )\r\n                .attr( 'id', 'fancybox-container-' + self.id )\r\n                .addClass( 'fancybox-is-hidden' )\r\n                .addClass( firstItemOpts.baseClass )\r\n                .data( 'FancyBox', self )\r\n                .appendTo( firstItemOpts.parentEl );\r\n\r\n            // Create object holding references to jQuery wrapped nodes\r\n            self.$refs = {\r\n                container : $container\r\n            };\r\n\r\n            [ 'bg', 'inner', 'infobar', 'toolbar', 'stage', 'caption', 'navigation' ].forEach(function(item) {\r\n                self.$refs[ item ] = $container.find( '.fancybox-' + item );\r\n            });\r\n\r\n            self.trigger( 'onInit' );\r\n\r\n            // Enable events, deactive previous instances\r\n            self.activate();\r\n\r\n            // Build slides, load and reveal content\r\n            self.jumpTo( self.currIndex );\r\n        },\r\n\r\n\r\n        // Simple i18n support - replaces object keys found in template\r\n        // with corresponding values\r\n        // ============================================================\r\n\r\n        translate : function( obj, str ) {\r\n            var arr = obj.opts.i18n[ obj.opts.lang ];\r\n\r\n            return str.replace(/\\{\\{(\\w+)\\}\\}/g, function(match, n) {\r\n                var value = arr[n];\r\n\r\n                if ( value === undefined ) {\r\n                    return match;\r\n                }\r\n\r\n                return value;\r\n            });\r\n        },\r\n\r\n        // Create array of gally item objects\r\n        // Check if each object has valid type and content\r\n        // ===============================================\r\n\r\n        createGroup : function ( content ) {\r\n            var self  = this;\r\n            var items = $.makeArray( content );\r\n\r\n            $.each(items, function( i, item ) {\r\n                var obj  = {},\r\n                    opts = {},\r\n                    $item,\r\n                    type,\r\n                    found,\r\n                    src,\r\n                    srcParts;\r\n\r\n                // Step 1 - Make sure we have an object\r\n                // ====================================\r\n\r\n                if ( $.isPlainObject( item ) ) {\r\n\r\n                    // We probably have manual usage here, something like\r\n                    // $.fancybox.open( [ { src : \"image.jpg\", type : \"image\" } ] )\r\n\r\n                    obj  = item;\r\n                    opts = item.opts || item;\r\n\r\n                } else if ( $.type( item ) === 'object' && $( item ).length ) {\r\n\r\n                    // Here we probably have jQuery collection returned by some selector\r\n                    $item = $( item );\r\n\r\n                    opts = $item.data();\r\n                    opts = $.extend( {}, opts, opts.options || {} );\r\n\r\n                    // Here we store clicked element\r\n                    opts.$orig = $item;\r\n\r\n                    obj.src = opts.src || $item.attr( 'href' );\r\n\r\n                    // Assume that simple syntax is used, for example:\r\n                    //   `$.fancybox.open( $(\"#test\"), {} );`\r\n                    if ( !obj.type && !obj.src ) {\r\n                        obj.type = 'inline';\r\n                        obj.src  = item;\r\n                    }\r\n\r\n                } else {\r\n\r\n                    // Assume we have a simple html code, for example:\r\n                    //   $.fancybox.open( '<div><h1>Hi!</h1></div>' );\r\n\r\n                    obj = {\r\n                        type : 'html',\r\n                        src  : item + ''\r\n                    };\r\n\r\n                }\r\n\r\n                // Each gallery object has full collection of options\r\n                obj.opts = $.extend( true, {}, self.opts, opts );\r\n\r\n                // Do not merge buttons array\r\n                if ( $.isArray( opts.buttons ) ) {\r\n                    obj.opts.buttons = opts.buttons;\r\n                }\r\n\r\n\r\n                // Step 2 - Make sure we have content type, if not - try to guess\r\n                // ==============================================================\r\n\r\n                type = obj.type || obj.opts.type;\r\n                src  = obj.src || '';\r\n\r\n                if ( !type && src ) {\r\n                    if ( src.match(/(^data:image\\/[a-z0-9+\\/=]*,)|(\\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\\?|#).*)?$)/i) ) {\r\n                        type = 'image';\r\n\r\n                    } else if ( src.match(/\\.(pdf)((\\?|#).*)?$/i) ) {\r\n                        type = 'pdf';\r\n\r\n                    } else if ( found = src.match(/\\.(mp4|mov|ogv)((\\?|#).*)?$/i) ) {\r\n                        type = 'video';\r\n\r\n                        if ( !obj.opts.videoFormat ) {\r\n                            obj.opts.videoFormat = 'video/' + ( found[1] === 'ogv' ? 'ogg' : found[1] );\r\n                        }\r\n\r\n                    } else if ( src.charAt(0) === '#' ) {\r\n                        type = 'inline';\r\n                    }\r\n                }\r\n\r\n                if ( type ) {\r\n                    obj.type = type;\r\n\r\n                } else {\r\n                    self.trigger( 'objectNeedsType', obj );\r\n                }\r\n\r\n\r\n                // Step 3 - Some adjustments\r\n                // =========================\r\n\r\n                obj.index = self.group.length;\r\n\r\n                // Check if $orig and $thumb objects exist\r\n                if ( obj.opts.$orig && !obj.opts.$orig.length ) {\r\n                    delete obj.opts.$orig;\r\n                }\r\n\r\n                if ( !obj.opts.$thumb && obj.opts.$orig ) {\r\n                    obj.opts.$thumb = obj.opts.$orig.find( 'img:first' );\r\n                }\r\n\r\n                if ( obj.opts.$thumb && !obj.opts.$thumb.length ) {\r\n                    delete obj.opts.$thumb;\r\n                }\r\n\r\n                // \"caption\" is a \"special\" option, it can be used to customize caption per gallery item ..\r\n                if ( $.type( obj.opts.caption ) === 'function' ) {\r\n                    obj.opts.caption = obj.opts.caption.apply( item, [ self, obj ] );\r\n                }\r\n\r\n                if ( $.type( self.opts.caption ) === 'function' ) {\r\n                    obj.opts.caption = self.opts.caption.apply( item, [ self, obj ] );\r\n                }\r\n\r\n                // Make sure we have caption as a string or jQuery object\r\n                if ( !( obj.opts.caption instanceof $ ) ) {\r\n                    obj.opts.caption = obj.opts.caption === undefined ? '' : obj.opts.caption + '';\r\n                }\r\n\r\n                // Check if url contains \"filter\" used to filter the content\r\n                // Example: \"ajax.html #something\"\r\n                if ( type === 'ajax' ) {\r\n                    srcParts = src.split(/\\s+/, 2);\r\n\r\n                    if ( srcParts.length > 1 ) {\r\n                        obj.src = srcParts.shift();\r\n\r\n                        obj.opts.filter = srcParts.shift();\r\n                    }\r\n                }\r\n\r\n                if ( obj.opts.smallBtn == 'auto' ) {\r\n\r\n                    if ( $.inArray( type, ['html', 'inline', 'ajax'] ) > -1 ) {\r\n                        obj.opts.toolbar  = false;\r\n                        obj.opts.smallBtn = true;\r\n\r\n                    } else {\r\n                        obj.opts.smallBtn = false;\r\n                    }\r\n\r\n                }\r\n\r\n                // If the type is \"pdf\", then simply load file into iframe\r\n                if ( type === 'pdf' ) {\r\n                    obj.type = 'iframe';\r\n\r\n                    obj.opts.iframe.preload = false;\r\n                }\r\n\r\n                // Hide all buttons and disable interactivity for modal items\r\n                if ( obj.opts.modal ) {\r\n\r\n                    obj.opts = $.extend(true, obj.opts, {\r\n                        // Remove buttons\r\n                        infobar : 0,\r\n                        toolbar : 0,\r\n\r\n                        smallBtn : 0,\r\n\r\n                        // Disable keyboard navigation\r\n                        keyboard : 0,\r\n\r\n                        // Disable some modules\r\n                        slideShow  : 0,\r\n                        fullScreen : 0,\r\n                        thumbs     : 0,\r\n                        touch      : 0,\r\n\r\n                        // Disable click event handlers\r\n                        clickContent    : false,\r\n                        clickSlide      : false,\r\n                        clickOutside    : false,\r\n                        dblclickContent : false,\r\n                        dblclickSlide   : false,\r\n                        dblclickOutside : false\r\n                    });\r\n\r\n                }\r\n\r\n                // Step 4 - Add processed object to group\r\n                // ======================================\r\n\r\n                self.group.push( obj );\r\n\r\n            });\r\n\r\n        },\r\n\r\n\r\n        // Attach an event handler functions for:\r\n        //   - navigation buttons\r\n        //   - browser scrolling, resizing;\r\n        //   - focusing\r\n        //   - keyboard\r\n        //   - detect idle\r\n        // ======================================\r\n\r\n        addEvents : function() {\r\n            var self = this;\r\n\r\n            self.removeEvents();\r\n\r\n            // Make navigation elements clickable\r\n            self.$refs.container.on('click.fb-close', '[data-fancybox-close]', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                self.close( e );\r\n\r\n            }).on( 'click.fb-prev touchend.fb-prev', '[data-fancybox-prev]', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                self.previous();\r\n\r\n            }).on( 'click.fb-next touchend.fb-next', '[data-fancybox-next]', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                self.next();\r\n\r\n            }).on( 'click.fb', '[data-fancybox-zoom]', function(e) {\r\n                // Click handler for zoom button\r\n                self[ self.isScaledDown() ? 'scaleToActual' : 'scaleToFit' ]();\r\n            });\r\n\r\n\r\n            // Handle page scrolling and browser resizing\r\n            $W.on('orientationchange.fb resize.fb', function(e) {\r\n\r\n                if ( e && e.originalEvent && e.originalEvent.type === \"resize\" ) {\r\n\r\n                    requestAFrame(function() {\r\n                        self.update();\r\n                    });\r\n\r\n                } else {\r\n\r\n                    self.$refs.stage.hide();\r\n\r\n                    setTimeout(function() {\r\n                        self.$refs.stage.show();\r\n\r\n                        self.update();\r\n                    }, 600);\r\n\r\n                }\r\n\r\n            });\r\n\r\n            // Trap keyboard focus inside of the modal, so the user does not accidentally tab outside of the modal\r\n            // (a.k.a. \"escaping the modal\")\r\n            $D.on('focusin.fb', function(e) {\r\n                var instance = $.fancybox ? $.fancybox.getInstance() : null;\r\n\r\n                if ( instance.isClosing || !instance.current || !instance.current.opts.trapFocus || $( e.target ).hasClass( 'fancybox-container' ) || $( e.target ).is( document ) ) {\r\n                    return;\r\n                }\r\n\r\n                if ( instance && $( e.target ).css( 'position' ) !== 'fixed' && !instance.$refs.container.has( e.target ).length ) {\r\n                    e.stopPropagation();\r\n\r\n                    instance.focus();\r\n\r\n                    // Sometimes page gets scrolled, set it back\r\n                    $W.scrollTop( self.scrollTop ).scrollLeft( self.scrollLeft );\r\n                }\r\n            });\r\n\r\n\r\n            // Enable keyboard navigation\r\n            $D.on('keydown.fb', function (e) {\r\n                var current = self.current,\r\n                    keycode = e.keyCode || e.which;\r\n\r\n                if ( !current || !current.opts.keyboard ) {\r\n                    return;\r\n                }\r\n\r\n                if ( $(e.target).is('input') || $(e.target).is('textarea') ) {\r\n                    return;\r\n                }\r\n\r\n                // Backspace and Esc keys\r\n                if ( keycode === 8 || keycode === 27 ) {\r\n                    e.preventDefault();\r\n\r\n                    self.close( e );\r\n\r\n                    return;\r\n                }\r\n\r\n                // Left arrow and Up arrow\r\n                if ( keycode === 37 || keycode === 38 ) {\r\n                    e.preventDefault();\r\n\r\n                    self.previous();\r\n\r\n                    return;\r\n                }\r\n\r\n                // Righ arrow and Down arrow\r\n                if ( keycode === 39 || keycode === 40 ) {\r\n                    e.preventDefault();\r\n\r\n                    self.next();\r\n\r\n                    return;\r\n                }\r\n\r\n                self.trigger('afterKeydown', e, keycode);\r\n            });\r\n\r\n\r\n            // Hide controls after some inactivity period\r\n            if ( self.group[ self.currIndex ].opts.idleTime ) {\r\n                self.idleSecondsCounter = 0;\r\n\r\n                $D.on('mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle', function(e) {\r\n                    self.idleSecondsCounter = 0;\r\n\r\n                    if ( self.isIdle ) {\r\n                        self.showControls();\r\n                    }\r\n\r\n                    self.isIdle = false;\r\n                });\r\n\r\n                self.idleInterval = window.setInterval(function() {\r\n                    self.idleSecondsCounter++;\r\n\r\n                    if ( self.idleSecondsCounter >= self.group[ self.currIndex ].opts.idleTime && !self.isDragging ) {\r\n                        self.isIdle = true;\r\n                        self.idleSecondsCounter = 0;\r\n\r\n                        self.hideControls();\r\n                    }\r\n\r\n                }, 1000);\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Remove events added by the core\r\n        // ===============================\r\n\r\n        removeEvents : function() {\r\n            var self = this;\r\n\r\n            $W.off( 'orientationchange.fb resize.fb' );\r\n            $D.off( 'focusin.fb keydown.fb .fb-idle' );\r\n\r\n            this.$refs.container.off( '.fb-close .fb-prev .fb-next' );\r\n\r\n            if ( self.idleInterval ) {\r\n                window.clearInterval( self.idleInterval );\r\n\r\n                self.idleInterval = null;\r\n            }\r\n        },\r\n\r\n\r\n        // Change to previous gallery item\r\n        // ===============================\r\n\r\n        previous : function( duration ) {\r\n            return this.jumpTo( this.currPos - 1, duration );\r\n        },\r\n\r\n\r\n        // Change to next gallery item\r\n        // ===========================\r\n\r\n        next : function( duration ) {\r\n            return this.jumpTo( this.currPos + 1, duration );\r\n        },\r\n\r\n\r\n        // Switch to selected gallery item\r\n        // ===============================\r\n\r\n        jumpTo : function ( pos, duration, slide ) {\r\n            var self = this,\r\n                firstRun,\r\n                loop,\r\n                current,\r\n                previous,\r\n                canvasWidth,\r\n                currentPos,\r\n                transitionProps;\r\n\r\n            var groupLen = self.group.length;\r\n\r\n            if ( self.isDragging || self.isClosing || ( self.isAnimating && self.firstRun ) ) {\r\n                return;\r\n            }\r\n\r\n            pos  = parseInt( pos, 10 );\r\n            loop = self.current ? self.current.opts.loop : self.opts.loop;\r\n\r\n            if ( !loop && ( pos < 0 || pos >= groupLen ) ) {\r\n                return false;\r\n            }\r\n\r\n            firstRun = self.firstRun = ( self.firstRun === null );\r\n\r\n            if ( groupLen < 2 && !firstRun && !!self.isDragging ) {\r\n                return;\r\n            }\r\n\r\n            previous = self.current;\r\n\r\n            self.prevIndex = self.currIndex;\r\n            self.prevPos   = self.currPos;\r\n\r\n            // Create slides\r\n            current = self.createSlide( pos );\r\n\r\n            if ( groupLen > 1 ) {\r\n                if ( loop || current.index > 0 ) {\r\n                    self.createSlide( pos - 1 );\r\n                }\r\n\r\n                if ( loop || current.index < groupLen - 1 ) {\r\n                    self.createSlide( pos + 1 );\r\n                }\r\n            }\r\n\r\n            self.current   = current;\r\n            self.currIndex = current.index;\r\n            self.currPos   = current.pos;\r\n\r\n            self.trigger( 'beforeShow', firstRun );\r\n\r\n            self.updateControls();\r\n\r\n            currentPos = $.fancybox.getTranslate( current.$slide );\r\n\r\n            current.isMoved        = ( currentPos.left !== 0 || currentPos.top !== 0 ) && !current.$slide.hasClass( 'fancybox-animated' );\r\n            current.forcedDuration = undefined;\r\n\r\n            if ( $.isNumeric( duration ) ) {\r\n                current.forcedDuration = duration;\r\n            } else {\r\n                duration = current.opts[ firstRun ? 'animationDuration' : 'transitionDuration' ];\r\n            }\r\n\r\n            duration = parseInt( duration, 10 );\r\n\r\n            // Fresh start - reveal container, current slide and start loading content\r\n            if ( firstRun ) {\r\n\r\n                if ( current.opts.animationEffect && duration ) {\r\n                    self.$refs.container.css( 'transition-duration', duration + 'ms' );\r\n                }\r\n\r\n                self.$refs.container.removeClass( 'fancybox-is-hidden' );\r\n\r\n                forceRedraw( self.$refs.container );\r\n\r\n                self.$refs.container.addClass( 'fancybox-is-open' );\r\n\r\n                // Make first slide visible (to display loading icon, if needed)\r\n                current.$slide.addClass( 'fancybox-slide--current' );\r\n\r\n                self.loadSlide( current );\r\n\r\n                self.preload( 'image' );\r\n\r\n                return;\r\n            }\r\n\r\n            // Clean up\r\n            $.each(self.slides, function( index, slide ) {\r\n                $.fancybox.stop( slide.$slide );\r\n            });\r\n\r\n            // Make current that slide is visible even if content is still loading\r\n            current.$slide.removeClass( 'fancybox-slide--next fancybox-slide--previous' ).addClass( 'fancybox-slide--current' );\r\n\r\n            // If slides have been dragged, animate them to correct position\r\n            if ( current.isMoved ) {\r\n                canvasWidth = Math.round( current.$slide.width() );\r\n\r\n                $.each(self.slides, function( index, slide ) {\r\n                    var pos = slide.pos - current.pos;\r\n\r\n                    $.fancybox.animate( slide.$slide, {\r\n                        top  : 0,\r\n                        left : ( pos * canvasWidth ) + ( pos * slide.opts.gutter )\r\n                    }, duration, function() {\r\n\r\n                        slide.$slide.removeAttr('style').removeClass( 'fancybox-slide--next fancybox-slide--previous' );\r\n\r\n                        if ( slide.pos === self.currPos ) {\r\n                            current.isMoved = false;\r\n\r\n                            self.complete();\r\n                        }\r\n                    });\r\n                });\r\n\r\n            } else {\r\n                self.$refs.stage.children().removeAttr( 'style' );\r\n            }\r\n\r\n            // Start transition that reveals current content\r\n            // or wait when it will be loaded\r\n\r\n            if ( current.isLoaded ) {\r\n                self.revealContent( current );\r\n\r\n            } else {\r\n                self.loadSlide( current );\r\n            }\r\n\r\n            self.preload( 'image' );\r\n\r\n            if ( previous.pos === current.pos ) {\r\n                return;\r\n            }\r\n\r\n            // Handle previous slide\r\n            // =====================\r\n\r\n            transitionProps = 'fancybox-slide--' + ( previous.pos > current.pos ? 'next' : 'previous' );\r\n\r\n            previous.$slide.removeClass( 'fancybox-slide--complete fancybox-slide--current fancybox-slide--next fancybox-slide--previous' );\r\n\r\n            previous.isComplete = false;\r\n\r\n            if ( !duration || ( !current.isMoved && !current.opts.transitionEffect ) ) {\r\n                return;\r\n            }\r\n\r\n            if ( current.isMoved ) {\r\n                previous.$slide.addClass( transitionProps );\r\n\r\n            } else {\r\n\r\n                transitionProps = 'fancybox-animated ' + transitionProps + ' fancybox-fx-' + current.opts.transitionEffect;\r\n\r\n                $.fancybox.animate( previous.$slide, transitionProps, duration, function() {\r\n                    previous.$slide.removeClass( transitionProps ).removeAttr( 'style' );\r\n                });\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Create new \"slide\" element\r\n        // These are gallery items  that are actually added to DOM\r\n        // =======================================================\r\n\r\n        createSlide : function( pos ) {\r\n\r\n            var self = this;\r\n            var $slide;\r\n            var index;\r\n\r\n            index = pos % self.group.length;\r\n            index = index < 0 ? self.group.length + index : index;\r\n\r\n            if ( !self.slides[ pos ] && self.group[ index ] ) {\r\n                $slide = $('<div class=\"fancybox-slide\"></div>').appendTo( self.$refs.stage );\r\n\r\n                self.slides[ pos ] = $.extend( true, {}, self.group[ index ], {\r\n                    pos      : pos,\r\n                    $slide   : $slide,\r\n                    isLoaded : false,\r\n                });\r\n\r\n                self.updateSlide( self.slides[ pos ] );\r\n            }\r\n\r\n            return self.slides[ pos ];\r\n        },\r\n\r\n\r\n        // Scale image to the actual size of the image\r\n        // ===========================================\r\n\r\n        scaleToActual : function( x, y, duration ) {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n\r\n            var imgPos, posX, posY, scaleX, scaleY;\r\n\r\n            var canvasWidth  = parseInt( current.$slide.width(), 10 );\r\n            var canvasHeight = parseInt( current.$slide.height(), 10 );\r\n\r\n            var newImgWidth  = current.width;\r\n            var newImgHeight = current.height;\r\n\r\n            if ( !( current.type == 'image' && !current.hasError) || !$what || self.isAnimating ) {\r\n                return;\r\n            }\r\n\r\n            $.fancybox.stop( $what );\r\n\r\n            self.isAnimating = true;\r\n\r\n            x = x === undefined ? canvasWidth  * 0.5  : x;\r\n            y = y === undefined ? canvasHeight * 0.5  : y;\r\n\r\n            imgPos = $.fancybox.getTranslate( $what );\r\n\r\n            scaleX  = newImgWidth  / imgPos.width;\r\n            scaleY  = newImgHeight / imgPos.height;\r\n\r\n            // Get center position for original image\r\n            posX = ( canvasWidth * 0.5  - newImgWidth * 0.5 );\r\n            posY = ( canvasHeight * 0.5 - newImgHeight * 0.5 );\r\n\r\n            // Make sure image does not move away from edges\r\n            if ( newImgWidth > canvasWidth ) {\r\n                posX = imgPos.left * scaleX - ( ( x * scaleX ) - x );\r\n\r\n                if ( posX > 0 ) {\r\n                    posX = 0;\r\n                }\r\n\r\n                if ( posX <  canvasWidth - newImgWidth ) {\r\n                    posX = canvasWidth - newImgWidth;\r\n                }\r\n            }\r\n\r\n            if ( newImgHeight > canvasHeight) {\r\n                posY = imgPos.top  * scaleY - ( ( y * scaleY ) - y );\r\n\r\n                if ( posY > 0 ) {\r\n                    posY = 0;\r\n                }\r\n\r\n                if ( posY <  canvasHeight - newImgHeight ) {\r\n                    posY = canvasHeight - newImgHeight;\r\n                }\r\n            }\r\n\r\n            self.updateCursor( newImgWidth, newImgHeight );\r\n\r\n            $.fancybox.animate( $what, {\r\n                top    : posY,\r\n                left   : posX,\r\n                scaleX : scaleX,\r\n                scaleY : scaleY\r\n            }, duration || 330, function() {\r\n                self.isAnimating = false;\r\n            });\r\n\r\n            // Stop slideshow\r\n            if ( self.SlideShow && self.SlideShow.isActive ) {\r\n                self.SlideShow.stop();\r\n            }\r\n        },\r\n\r\n\r\n        // Scale image to fit inside parent element\r\n        // ========================================\r\n\r\n        scaleToFit : function( duration ) {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n            var end;\r\n\r\n            if ( !( current.type == 'image' && !current.hasError) || !$what || self.isAnimating ) {\r\n                return;\r\n            }\r\n\r\n            $.fancybox.stop( $what );\r\n\r\n            self.isAnimating = true;\r\n\r\n            end = self.getFitPos( current );\r\n\r\n            self.updateCursor( end.width, end.height );\r\n\r\n            $.fancybox.animate( $what, {\r\n                top    : end.top,\r\n                left   : end.left,\r\n                scaleX : end.width  / $what.width(),\r\n                scaleY : end.height / $what.height()\r\n            }, duration || 330, function() {\r\n                self.isAnimating = false;\r\n            });\r\n\r\n        },\r\n\r\n        // Calculate image size to fit inside viewport\r\n        // ===========================================\r\n\r\n        getFitPos : function( slide ) {\r\n            var self  = this;\r\n            var $what = slide.$content;\r\n\r\n            var imgWidth  = slide.width;\r\n            var imgHeight = slide.height;\r\n\r\n            var margin = slide.opts.margin;\r\n\r\n            var canvasWidth, canvasHeight, minRatio, width, height;\r\n\r\n            if ( !$what || !$what.length || ( !imgWidth && !imgHeight) ) {\r\n                return false;\r\n            }\r\n\r\n            // Convert \"margin to CSS style: [ top, right, bottom, left ]\r\n            if ( $.type( margin ) === \"number\" ) {\r\n                margin = [ margin, margin ];\r\n            }\r\n\r\n            if ( margin.length == 2 ) {\r\n                margin = [ margin[0], margin[1], margin[0], margin[1] ];\r\n            }\r\n\r\n            // We can not use $slide width here, because it can have different diemensions while in transiton\r\n            canvasWidth  = parseInt( self.$refs.stage.width(), 10 )  - ( margin[ 1 ] + margin[ 3 ] );\r\n            canvasHeight = parseInt( self.$refs.stage.height(), 10 ) - ( margin[ 0 ] + margin[ 2 ] );\r\n\r\n            minRatio = Math.min(1, canvasWidth / imgWidth, canvasHeight / imgHeight );\r\n\r\n            width  = Math.floor( minRatio * imgWidth );\r\n            height = Math.floor( minRatio * imgHeight );\r\n\r\n            // Use floor rounding to make sure it really fits\r\n            return {\r\n                top    : Math.floor( ( canvasHeight - height ) * 0.5 ) + margin[ 0 ],\r\n                left   : Math.floor( ( canvasWidth  - width )  * 0.5 ) + margin[ 3 ],\r\n                width  : width,\r\n                height : height\r\n            };\r\n\r\n        },\r\n\r\n\r\n        // Update content size and position for all slides\r\n        // ==============================================\r\n\r\n        update : function() {\r\n            var self = this;\r\n\r\n            $.each( self.slides, function( key, slide ) {\r\n                self.updateSlide( slide );\r\n            });\r\n        },\r\n\r\n\r\n        // Update slide content position and size\r\n        // ======================================\r\n\r\n        updateSlide : function( slide, duration ) {\r\n            var self  = this,\r\n                $what = slide && slide.$content;\r\n\r\n            if ( $what && ( slide.width || slide.height ) ) {\r\n                self.isAnimating = false;\r\n\r\n                $.fancybox.stop( $what );\r\n\r\n                $.fancybox.setTranslate( $what, self.getFitPos( slide ) );\r\n\r\n                if ( slide.pos === self.currPos ) {\r\n                    self.updateCursor();\r\n                }\r\n            }\r\n\r\n            slide.$slide.trigger( 'refresh' );\r\n\r\n            self.trigger( 'onUpdate', slide );\r\n\r\n        },\r\n\r\n\r\n        // Horizontally center slide\r\n        // =========================\r\n\r\n        centerSlide : function( slide, duration ) {\r\n            var self  = this, canvasWidth, pos;\r\n\r\n            if ( self.current ) {\r\n                canvasWidth = Math.round( slide.$slide.width() );\r\n                pos = slide.pos - self.current.pos;\r\n\r\n                $.fancybox.animate( slide.$slide, {\r\n                    top  : 0,\r\n                    left : ( pos * canvasWidth ) + ( pos * slide.opts.gutter ),\r\n                    opacity : 1\r\n                }, duration === undefined ? 0 : duration, null, false);\r\n            }\r\n        },\r\n\r\n\r\n        // Update cursor style depending if content can be zoomed\r\n        // ======================================================\r\n\r\n        updateCursor : function( nextWidth, nextHeight ) {\r\n\r\n            var self = this;\r\n            var isScaledDown;\r\n\r\n            var $container = self.$refs.container.removeClass( 'fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-drag fancybox-can-zoomOut' );\r\n\r\n            if ( !self.current || self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            if ( self.isZoomable() ) {\r\n\r\n                $container.addClass( 'fancybox-is-zoomable' );\r\n\r\n                if ( nextWidth !== undefined && nextHeight !== undefined ) {\r\n                    isScaledDown = nextWidth < self.current.width && nextHeight < self.current.height;\r\n\r\n                } else {\r\n                    isScaledDown = self.isScaledDown();\r\n                }\r\n\r\n                if ( isScaledDown ) {\r\n\r\n                    // If image is scaled down, then, obviously, it can be zoomed to full size\r\n                    $container.addClass( 'fancybox-can-zoomIn' );\r\n\r\n                } else {\r\n\r\n                    if ( self.current.opts.touch ) {\r\n\r\n                        // If image size ir largen than available available and touch module is not disable,\r\n                        // then user can do panning\r\n                        $container.addClass( 'fancybox-can-drag' );\r\n\r\n                    } else {\r\n                        $container.addClass( 'fancybox-can-zoomOut' );\r\n                    }\r\n\r\n                }\r\n\r\n            } else if ( self.current.opts.touch ) {\r\n                $container.addClass( 'fancybox-can-drag' );\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Check if current slide is zoomable\r\n        // ==================================\r\n\r\n        isZoomable : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var fitPos;\r\n\r\n            if ( !current || self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            // Assume that slide is zoomable if\r\n            //   - image is loaded successfuly\r\n            //   - click action is \"zoom\"\r\n            //   - actual size of the image is smaller than available area\r\n            if ( current.type === 'image' && current.isLoaded && !current.hasError &&\r\n                ( current.opts.clickContent === 'zoom' || ( $.isFunction( current.opts.clickContent ) && current.opts.clickContent( current ) ===  \"zoom\" ) )\r\n            ) {\r\n\r\n                fitPos = self.getFitPos( current );\r\n\r\n                if ( current.width > fitPos.width || current.height > fitPos.height ) {\r\n                    return true;\r\n                }\r\n\r\n            }\r\n\r\n            return false;\r\n\r\n        },\r\n\r\n\r\n        // Check if current image dimensions are smaller than actual\r\n        // =========================================================\r\n\r\n        isScaledDown : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n\r\n            var rez = false;\r\n\r\n            if ( $what ) {\r\n                rez = $.fancybox.getTranslate( $what );\r\n                rez = rez.width < current.width || rez.height < current.height;\r\n            }\r\n\r\n            return rez;\r\n\r\n        },\r\n\r\n\r\n        // Check if image dimensions exceed parent element\r\n        // ===============================================\r\n\r\n        canPan : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n\r\n            var rez = false;\r\n\r\n            if ( $what ) {\r\n                rez = self.getFitPos( current );\r\n                rez = Math.abs( $what.width() - rez.width ) > 1  || Math.abs( $what.height() - rez.height ) > 1;\r\n            }\r\n\r\n            return rez;\r\n\r\n        },\r\n\r\n\r\n        // Load content into the slide\r\n        // ===========================\r\n\r\n        loadSlide : function( slide ) {\r\n\r\n            var self = this, type, $slide;\r\n            var ajaxLoad;\r\n\r\n            if ( slide.isLoading ) {\r\n                return;\r\n            }\r\n\r\n            if ( slide.isLoaded ) {\r\n                return;\r\n            }\r\n\r\n            slide.isLoading = true;\r\n\r\n            self.trigger( 'beforeLoad', slide );\r\n\r\n            type   = slide.type;\r\n            $slide = slide.$slide;\r\n\r\n            $slide\r\n                .off( 'refresh' )\r\n                .trigger( 'onReset' )\r\n                .addClass( 'fancybox-slide--' + ( type || 'unknown' ) )\r\n                .addClass( slide.opts.slideClass );\r\n\r\n            // Create content depending on the type\r\n\r\n            switch ( type ) {\r\n\r\n                case 'image':\r\n\r\n                    self.setImage( slide );\r\n\r\n                break;\r\n\r\n                case 'iframe':\r\n\r\n                    self.setIframe( slide );\r\n\r\n                break;\r\n\r\n                case 'html':\r\n\r\n                    self.setContent( slide, slide.src || slide.content );\r\n\r\n                break;\r\n\r\n                case 'inline':\r\n\r\n                    if ( $( slide.src ).length ) {\r\n                        self.setContent( slide, $( slide.src ) );\r\n\r\n                    } else {\r\n                        self.setError( slide );\r\n                    }\r\n\r\n                break;\r\n\r\n                case 'ajax':\r\n\r\n                    self.showLoading( slide );\r\n\r\n                    ajaxLoad = $.ajax( $.extend( {}, slide.opts.ajax.settings, {\r\n                        url : slide.src,\r\n                        success : function ( data, textStatus ) {\r\n\r\n                            if ( textStatus === 'success' ) {\r\n                                self.setContent( slide, data );\r\n                            }\r\n\r\n                        },\r\n                        error : function ( jqXHR, textStatus ) {\r\n\r\n                            if ( jqXHR && textStatus !== 'abort' ) {\r\n                                self.setError( slide );\r\n                            }\r\n\r\n                        }\r\n                    }));\r\n\r\n                    $slide.one( 'onReset', function () {\r\n                        ajaxLoad.abort();\r\n                    });\r\n\r\n                break;\r\n\r\n                case 'video' :\r\n\r\n                    self.setContent( slide,\r\n                        '<video controls>' +\r\n                          '<source src=\"' + slide.src + '\" type=\"' + slide.opts.videoFormat + '\">' +\r\n                            'Your browser doesn\\'t support HTML5 video' +\r\n                        '</video>'\r\n                    );\r\n\r\n                break;\r\n\r\n                default:\r\n\r\n                    self.setError( slide );\r\n\r\n                break;\r\n\r\n            }\r\n\r\n            return true;\r\n\r\n        },\r\n\r\n\r\n        // Use thumbnail image, if possible\r\n        // ================================\r\n\r\n        setImage : function( slide ) {\r\n\r\n            var self   = this;\r\n            var srcset = slide.opts.srcset || slide.opts.image.srcset;\r\n\r\n            var found, temp, pxRatio, windowWidth;\r\n\r\n            // If we have \"srcset\", then we need to find matching \"src\" value.\r\n            // This is necessary, because when you set an src attribute, the browser will preload the image\r\n            // before any javascript or even CSS is applied.\r\n            if ( srcset ) {\r\n                pxRatio     = window.devicePixelRatio || 1;\r\n                windowWidth = window.innerWidth  * pxRatio;\r\n\r\n                temp = srcset.split(',').map(function ( el ) {\r\n            \t\tvar ret = {};\r\n\r\n            \t\tel.trim().split(/\\s+/).forEach(function ( el, i ) {\r\n                        var value = parseInt( el.substring(0, el.length - 1), 10 );\r\n\r\n            \t\t\tif ( i === 0 ) {\r\n            \t\t\t\treturn ( ret.url = el );\r\n            \t\t\t}\r\n\r\n                        if ( value ) {\r\n                            ret.value   = value;\r\n                            ret.postfix = el[ el.length - 1 ];\r\n                        }\r\n\r\n            \t\t});\r\n\r\n            \t\treturn ret;\r\n            \t});\r\n\r\n                // Sort by value\r\n                temp.sort(function (a, b) {\r\n                  return a.value - b.value;\r\n                });\r\n\r\n                // Ok, now we have an array of all srcset values\r\n                for ( var j = 0; j < temp.length; j++ ) {\r\n                    var el = temp[ j ];\r\n\r\n                    if ( ( el.postfix === 'w' && el.value >= windowWidth ) || ( el.postfix === 'x' && el.value >= pxRatio ) ) {\r\n                        found = el;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // If not found, take the last one\r\n                if ( !found && temp.length ) {\r\n                    found = temp[ temp.length - 1 ];\r\n                }\r\n\r\n                if ( found ) {\r\n                    slide.src = found.url;\r\n\r\n                    // If we have default width/height values, we can calculate height for matching source\r\n                    if ( slide.width && slide.height && found.postfix == 'w' ) {\r\n                        slide.height = ( slide.width / slide.height ) * found.value;\r\n                        slide.width  = found.value;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // This will be wrapper containing both ghost and actual image\r\n            slide.$content = $('<div class=\"fancybox-image-wrap\"></div>')\r\n                .addClass( 'fancybox-is-hidden' )\r\n                .appendTo( slide.$slide );\r\n\r\n\r\n            // If we have a thumbnail, we can display it while actual image is loading\r\n            // Users will not stare at black screen and actual image will appear gradually\r\n            if ( slide.opts.preload !== false && slide.opts.width && slide.opts.height && ( slide.opts.thumb || slide.opts.$thumb ) ) {\r\n\r\n                slide.width  = slide.opts.width;\r\n                slide.height = slide.opts.height;\r\n\r\n                slide.$ghost = $('<img />')\r\n                    .one('error', function() {\r\n\r\n                        $(this).remove();\r\n\r\n                        slide.$ghost = null;\r\n\r\n                        self.setBigImage( slide );\r\n\r\n                    })\r\n                    .one('load', function() {\r\n\r\n                        self.afterLoad( slide );\r\n\r\n                        self.setBigImage( slide );\r\n\r\n                    })\r\n                    .addClass( 'fancybox-image' )\r\n                    .appendTo( slide.$content )\r\n                    .attr( 'src', slide.opts.thumb || slide.opts.$thumb.attr( 'src' ) );\r\n\r\n            } else {\r\n\r\n                self.setBigImage( slide );\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Create full-size image\r\n        // ======================\r\n\r\n        setBigImage : function ( slide ) {\r\n            var self = this;\r\n            var $img = $('<img />');\r\n\r\n            slide.$image = $img\r\n                .one('error', function() {\r\n\r\n                    self.setError( slide );\r\n\r\n                })\r\n                .one('load', function() {\r\n\r\n                    // Clear timeout that checks if loading icon needs to be displayed\r\n                    clearTimeout( slide.timouts );\r\n\r\n                    slide.timouts = null;\r\n\r\n                    if ( self.isClosing ) {\r\n                        return;\r\n                    }\r\n\r\n                    slide.width  = slide.opts.width  || this.naturalWidth;\r\n                    slide.height = slide.opts.height || this.naturalHeight;\r\n\r\n                    if ( slide.opts.image.srcset ) {\r\n                        $img.attr( 'sizes', '100vw' ).attr( 'srcset', slide.opts.image.srcset );\r\n                    }\r\n\r\n                    self.hideLoading( slide );\r\n\r\n                    if ( slide.$ghost ) {\r\n\r\n                        slide.timouts = setTimeout(function() {\r\n                            slide.timouts = null;\r\n\r\n                            slide.$ghost.hide();\r\n\r\n                        }, Math.min( 300, Math.max( 1000, slide.height / 1600 ) ) );\r\n\r\n                    } else {\r\n                        self.afterLoad( slide );\r\n                    }\r\n\r\n                })\r\n                .addClass( 'fancybox-image' )\r\n                .attr('src', slide.src)\r\n                .appendTo( slide.$content );\r\n\r\n            if ( ( $img[0].complete || $img[0].readyState == \"complete\" ) && $img[0].naturalWidth && $img[0].naturalHeight ) {\r\n                  $img.trigger( 'load' );\r\n\r\n            } else if( $img[0].error ) {\r\n                 $img.trigger( 'error' );\r\n\r\n            } else {\r\n\r\n                slide.timouts = setTimeout(function() {\r\n                    if ( !$img[0].complete && !slide.hasError ) {\r\n                        self.showLoading( slide );\r\n                    }\r\n\r\n                }, 100);\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Create iframe wrapper, iframe and bindings\r\n        // ==========================================\r\n\r\n        setIframe : function( slide ) {\r\n            var self\t= this,\r\n                opts    = slide.opts.iframe,\r\n                $slide\t= slide.$slide,\r\n                $iframe;\r\n\r\n            slide.$content = $('<div class=\"fancybox-content' + ( opts.preload ? ' fancybox-is-hidden' : '' ) + '\"></div>')\r\n                .css( opts.css )\r\n                .appendTo( $slide );\r\n\r\n            $iframe = $( opts.tpl.replace(/\\{rnd\\}/g, new Date().getTime()) )\r\n                .attr( opts.attr )\r\n                .appendTo( slide.$content );\r\n\r\n            if ( opts.preload ) {\r\n\r\n                self.showLoading( slide );\r\n\r\n                // Unfortunately, it is not always possible to determine if iframe is successfully loaded\r\n                // (due to browser security policy)\r\n\r\n                $iframe.on('load.fb error.fb', function(e) {\r\n                    this.isReady = 1;\r\n\r\n                    slide.$slide.trigger( 'refresh' );\r\n\r\n                    self.afterLoad( slide );\r\n                });\r\n\r\n                // Recalculate iframe content size\r\n                // ===============================\r\n\r\n                $slide.on('refresh.fb', function() {\r\n                    var $wrap = slide.$content,\r\n                        frameWidth  = opts.css.width,\r\n                        frameHeight = opts.css.height,\r\n                        scrollWidth,\r\n                        $contents,\r\n                        $body;\r\n\r\n                    if ( $iframe[0].isReady !== 1 ) {\r\n                        return;\r\n                    }\r\n\r\n                    // Check if content is accessible,\r\n                    // it will fail if frame is not with the same origin\r\n\r\n                    try {\r\n                        $contents = $iframe.contents();\r\n                        $body     = $contents.find('body');\r\n\r\n                    } catch (ignore) {}\r\n\r\n                    // Calculate dimensions for the wrapper\r\n                    if ( $body && $body.length ) {\r\n\r\n                        if ( frameWidth === undefined ) {\r\n                            scrollWidth = $iframe[0].contentWindow.document.documentElement.scrollWidth;\r\n\r\n                            frameWidth = Math.ceil( $body.outerWidth(true) + ( $wrap.width() - scrollWidth ) );\r\n                            frameWidth += $wrap.outerWidth() - $wrap.innerWidth();\r\n                        }\r\n\r\n                        if ( frameHeight === undefined ) {\r\n                            frameHeight = Math.ceil( $body.outerHeight(true) );\r\n                            frameHeight += $wrap.outerHeight() - $wrap.innerHeight();\r\n                        }\r\n\r\n                        // Resize wrapper to fit iframe content\r\n                        if ( frameWidth ) {\r\n                            $wrap.width( frameWidth );\r\n                        }\r\n\r\n                        if ( frameHeight ) {\r\n                            $wrap.height( frameHeight );\r\n                        }\r\n                    }\r\n\r\n                    $wrap.removeClass( 'fancybox-is-hidden' );\r\n\r\n                });\r\n\r\n            } else {\r\n\r\n                this.afterLoad( slide );\r\n\r\n            }\r\n\r\n            $iframe.attr( 'src', slide.src );\r\n\r\n            if ( slide.opts.smallBtn === true ) {\r\n                slide.$content.prepend( self.translate( slide, slide.opts.btnTpl.smallBtn ) );\r\n            }\r\n\r\n            // Remove iframe if closing or changing gallery item\r\n            $slide.one( 'onReset', function () {\r\n\r\n                // This helps IE not to throw errors when closing\r\n                try {\r\n\r\n                    $( this ).find( 'iframe' ).hide().attr( 'src', '//about:blank' );\r\n\r\n                } catch ( ignore ) {}\r\n\r\n                $( this ).empty();\r\n\r\n                slide.isLoaded = false;\r\n\r\n            });\r\n\r\n        },\r\n\r\n\r\n        // Wrap and append content to the slide\r\n        // ======================================\r\n\r\n        setContent : function ( slide, content ) {\r\n\r\n            var self = this;\r\n\r\n            if ( self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            self.hideLoading( slide );\r\n\r\n            slide.$slide.empty();\r\n\r\n            if ( isQuery( content ) && content.parent().length ) {\r\n\r\n                // If content is a jQuery object, then it will be moved to the slide.\r\n                // The placeholder is created so we will know where to put it back.\r\n                // If user is navigating gallery fast, then the content might be already inside fancyBox\r\n                // =====================================================================================\r\n\r\n                // Make sure content is not already moved to fancyBox\r\n                content.parent( '.fancybox-slide--inline' ).trigger( 'onReset' );\r\n\r\n                // Create temporary element marking original place of the content\r\n                slide.$placeholder = $( '<div></div>' ).hide().insertAfter( content );\r\n\r\n                // Make sure content is visible\r\n                content.css('display', 'inline-block');\r\n\r\n            } else if ( !slide.hasError ) {\r\n\r\n                // If content is just a plain text, try to convert it to html\r\n                if ( $.type( content ) === 'string' ) {\r\n                    content = $('<div>').append( $.trim( content ) ).contents();\r\n\r\n                    // If we have text node, then add wrapping element to make vertical alignment work\r\n                    if ( content[0].nodeType === 3 ) {\r\n                        content = $('<div>').html( content );\r\n                    }\r\n                }\r\n\r\n                // If \"filter\" option is provided, then filter content\r\n                if ( slide.opts.filter ) {\r\n                    content = $('<div>').html( content ).find( slide.opts.filter );\r\n                }\r\n\r\n            }\r\n\r\n            slide.$slide.one('onReset', function () {\r\n\r\n                // Pause all html5 video/audio\r\n                $( this ).find( 'video,audio' ).trigger( 'pause' );\r\n\r\n                // Put content back\r\n                if ( slide.$placeholder ) {\r\n                    slide.$placeholder.after( content.hide() ).remove();\r\n\r\n                    slide.$placeholder = null;\r\n                }\r\n\r\n                // Remove custom close button\r\n                if ( slide.$smallBtn ) {\r\n                    slide.$smallBtn.remove();\r\n\r\n                    slide.$smallBtn = null;\r\n                }\r\n\r\n                // Remove content and mark slide as not loaded\r\n                if ( !slide.hasError ) {\r\n                    $(this).empty();\r\n\r\n                    slide.isLoaded = false;\r\n                }\r\n\r\n            });\r\n\r\n            slide.$content = $( content ).appendTo( slide.$slide );\r\n\r\n            this.afterLoad( slide );\r\n        },\r\n\r\n        // Display error message\r\n        // =====================\r\n\r\n        setError : function ( slide ) {\r\n\r\n            slide.hasError = true;\r\n\r\n            slide.$slide.removeClass( 'fancybox-slide--' + slide.type );\r\n\r\n            this.setContent( slide, this.translate( slide, slide.opts.errorTpl ) );\r\n\r\n        },\r\n\r\n\r\n        // Show loading icon inside the slide\r\n        // ==================================\r\n\r\n        showLoading : function( slide ) {\r\n\r\n            var self = this;\r\n\r\n            slide = slide || self.current;\r\n\r\n            if ( slide && !slide.$spinner ) {\r\n                slide.$spinner = $( self.opts.spinnerTpl ).appendTo( slide.$slide );\r\n            }\r\n\r\n        },\r\n\r\n        // Remove loading icon from the slide\r\n        // ==================================\r\n\r\n        hideLoading : function( slide ) {\r\n\r\n            var self = this;\r\n\r\n            slide = slide || self.current;\r\n\r\n            if ( slide && slide.$spinner ) {\r\n                slide.$spinner.remove();\r\n\r\n                delete slide.$spinner;\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Adjustments after slide content has been loaded\r\n        // ===============================================\r\n\r\n        afterLoad : function( slide ) {\r\n\r\n            var self = this;\r\n\r\n            if ( self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            slide.isLoading = false;\r\n            slide.isLoaded  = true;\r\n\r\n            self.trigger( 'afterLoad', slide );\r\n\r\n            self.hideLoading( slide );\r\n\r\n            if ( slide.opts.smallBtn && !slide.$smallBtn ) {\r\n                slide.$smallBtn = $( self.translate( slide, slide.opts.btnTpl.smallBtn ) ).appendTo( slide.$content.filter('div,form').first() );\r\n            }\r\n\r\n            if ( slide.opts.protect && slide.$content && !slide.hasError ) {\r\n\r\n                // Disable right click\r\n                slide.$content.on( 'contextmenu.fb', function( e ) {\r\n                     if ( e.button == 2 ) {\r\n                         e.preventDefault();\r\n                     }\r\n\r\n                    return true;\r\n                });\r\n\r\n                // Add fake element on top of the image\r\n                // This makes a bit harder for user to select image\r\n                if ( slide.type === 'image' ) {\r\n                    $( '<div class=\"fancybox-spaceball\"></div>' ).appendTo( slide.$content );\r\n                }\r\n\r\n            }\r\n\r\n            self.revealContent( slide );\r\n\r\n        },\r\n\r\n\r\n        // Make content visible\r\n        // This method is called right after content has been loaded or\r\n        // user navigates gallery and transition should start\r\n        // ============================================================\r\n\r\n        revealContent : function( slide ) {\r\n\r\n            var self   = this;\r\n            var $slide = slide.$slide;\r\n\r\n            var effect, effectClassName, duration, opacity, end, start = false;\r\n\r\n            effect   = slide.opts[ self.firstRun ? 'animationEffect'   : 'transitionEffect' ];\r\n            duration = slide.opts[ self.firstRun ? 'animationDuration' : 'transitionDuration' ];\r\n\r\n            duration = parseInt( slide.forcedDuration === undefined ? duration : slide.forcedDuration, 10 );\r\n\r\n            if ( slide.isMoved || slide.pos !== self.currPos || !duration ) {\r\n                effect = false;\r\n            }\r\n\r\n            // Check if can zoom\r\n            if ( effect === 'zoom' && !( slide.pos === self.currPos && duration && slide.type === 'image' && !slide.hasError && ( start = self.getThumbPos( slide ) ) ) ) {\r\n                effect = 'fade';\r\n            }\r\n\r\n            // Zoom animation\r\n            // ==============\r\n\r\n            if ( effect === 'zoom' ) {\r\n                end = self.getFitPos( slide );\r\n\r\n                end.scaleX = end.width  / start.width;\r\n                end.scaleY = end.height / start.height;\r\n\r\n                delete end.width;\r\n                delete end.height;\r\n\r\n                // Check if we need to animate opacity\r\n                opacity = slide.opts.zoomOpacity;\r\n\r\n                if ( opacity == 'auto' ) {\r\n                    opacity = Math.abs( slide.width / slide.height - start.width / start.height ) > 0.1;\r\n                }\r\n\r\n                if ( opacity ) {\r\n                    start.opacity = 0.1;\r\n                    end.opacity   = 1;\r\n                }\r\n\r\n                // Draw image at start position\r\n                $.fancybox.setTranslate( slide.$content.removeClass( 'fancybox-is-hidden' ), start );\r\n\r\n                forceRedraw( slide.$content );\r\n\r\n                // Start animation\r\n                $.fancybox.animate( slide.$content, end, duration, function() {\r\n                    self.complete();\r\n                });\r\n\r\n                return;\r\n            }\r\n\r\n            self.updateSlide( slide );\r\n\r\n\r\n            // Simply show content\r\n            // ===================\r\n\r\n            if ( !effect ) {\r\n                forceRedraw( $slide );\r\n\r\n                slide.$content.removeClass( 'fancybox-is-hidden' );\r\n\r\n                if ( slide.pos === self.currPos ) {\r\n                    self.complete();\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            $.fancybox.stop( $slide );\r\n\r\n            effectClassName = 'fancybox-animated fancybox-slide--' + ( slide.pos >= self.prevPos ? 'next' : 'previous' ) + ' fancybox-fx-' + effect;\r\n\r\n            $slide.removeAttr( 'style' ).removeClass( 'fancybox-slide--current fancybox-slide--next fancybox-slide--previous' ).addClass( effectClassName );\r\n\r\n            slide.$content.removeClass( 'fancybox-is-hidden' );\r\n\r\n            //Force reflow for CSS3 transitions\r\n            forceRedraw( $slide );\r\n\r\n            $.fancybox.animate( $slide, 'fancybox-slide--current', duration, function(e) {\r\n                $slide.removeClass( effectClassName ).removeAttr( 'style' );\r\n\r\n                if ( slide.pos === self.currPos ) {\r\n                    self.complete();\r\n                }\r\n\r\n            }, true);\r\n\r\n        },\r\n\r\n\r\n        // Check if we can and have to zoom from thumbnail\r\n        //================================================\r\n\r\n        getThumbPos : function( slide ) {\r\n\r\n            var self = this;\r\n            var rez  = false;\r\n\r\n            // Check if element is inside the viewport by at least 1 pixel\r\n            var isElementVisible = function( $el ) {\r\n                var element = $el[0];\r\n\r\n                var elementRect = element.getBoundingClientRect();\r\n                var parentRects = [];\r\n\r\n                var visibleInAllParents;\r\n\r\n                while ( element.parentElement !== null ) {\r\n                    if ( $(element.parentElement).css('overflow') === 'hidden'  || $(element.parentElement).css('overflow') === 'auto' ) {\r\n                        parentRects.push(element.parentElement.getBoundingClientRect());\r\n                    }\r\n\r\n                    element = element.parentElement;\r\n                }\r\n\r\n                visibleInAllParents = parentRects.every(function(parentRect){\r\n                    var visiblePixelX = Math.min(elementRect.right, parentRect.right) - Math.max(elementRect.left, parentRect.left);\r\n                    var visiblePixelY = Math.min(elementRect.bottom, parentRect.bottom) - Math.max(elementRect.top, parentRect.top);\r\n\r\n                    return visiblePixelX > 0 && visiblePixelY > 0;\r\n                });\r\n\r\n                return visibleInAllParents &&\r\n                    elementRect.bottom > 0 && elementRect.right > 0 &&\r\n                    elementRect.left < $(window).width() && elementRect.top < $(window).height();\r\n            };\r\n\r\n            var $thumb   = slide.opts.$thumb;\r\n            var thumbPos = $thumb ? $thumb.offset() : 0;\r\n            var slidePos;\r\n\r\n            if ( thumbPos && $thumb[0].ownerDocument === document && isElementVisible( $thumb ) ) {\r\n                slidePos = self.$refs.stage.offset();\r\n\r\n                rez = {\r\n                    top    : thumbPos.top  - slidePos.top  + parseFloat( $thumb.css( \"border-top-width\" ) || 0 ),\r\n                    left   : thumbPos.left - slidePos.left + parseFloat( $thumb.css( \"border-left-width\" ) || 0 ),\r\n                    width  : $thumb.width(),\r\n                    height : $thumb.height(),\r\n                    scaleX : 1,\r\n                    scaleY : 1\r\n                };\r\n            }\r\n\r\n            return rez;\r\n        },\r\n\r\n\r\n        // Final adjustments after current gallery item is moved to position\r\n        // and it`s content is loaded\r\n        // ==================================================================\r\n\r\n        complete : function() {\r\n            var self = this,\r\n                current = self.current,\r\n                slides  = {},\r\n                promise;\r\n\r\n            if ( current.isMoved || !current.isLoaded || current.isComplete ) {\r\n                return;\r\n            }\r\n\r\n            current.isComplete = true;\r\n\r\n            current.$slide.siblings().trigger( 'onReset' );\r\n\r\n            self.preload( 'inline' );\r\n\r\n            // Trigger any CSS3 transiton inside the slide\r\n            forceRedraw( current.$slide );\r\n\r\n            current.$slide.addClass( 'fancybox-slide--complete' );\r\n\r\n            // Remove unnecessary slides\r\n            $.each( self.slides, function( key, slide ) {\r\n                if ( slide.pos >= self.currPos - 1 && slide.pos <= self.currPos + 1 ) {\r\n                    slides[ slide.pos ] = slide;\r\n\r\n                } else if ( slide ) {\r\n                    $.fancybox.stop( slide.$slide );\r\n\r\n                    slide.$slide.off().remove();\r\n                }\r\n            });\r\n\r\n            self.slides = slides;\r\n\r\n            self.updateCursor();\r\n\r\n            self.trigger( 'afterShow' );\r\n\r\n            // Play first html5 video/audio\r\n            current.$slide.find( 'video,audio' ).first().trigger( 'play' );\r\n\r\n            // Try to focus on the first focusable element\r\n            if ( $( document.activeElement ).is( '[disabled]' ) || ( current.opts.autoFocus && !( current.type == 'image' || current.type === 'iframe' ) ) ) {\r\n                self.focus();\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Preload next and previous slides\r\n        // ================================\r\n\r\n        preload : function( type ) {\r\n            var self = this,\r\n                next = self.slides[ self.currPos + 1 ],\r\n                prev = self.slides[ self.currPos - 1 ];\r\n\r\n            if ( next && next.type === type ) {\r\n                self.loadSlide( next );\r\n            }\r\n\r\n            if ( prev && prev.type === type ) {\r\n                self.loadSlide( prev );\r\n            }\r\n        },\r\n\r\n\r\n        // Try to find and focus on the first focusable element\r\n        // ====================================================\r\n\r\n        focus : function() {\r\n            var current = this.current;\r\n            var $el;\r\n\r\n            if ( this.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            if ( current && current.isComplete ) {\r\n\r\n                // Look for first input with autofocus attribute\r\n                $el = current.$slide.find('input[autofocus]:enabled:visible:first');\r\n\r\n                if ( !$el.length ) {\r\n                    $el = current.$slide.find('button,:input,[tabindex],a').filter(':enabled:visible:first');\r\n                }\r\n            }\r\n\r\n            $el = $el && $el.length ? $el : this.$refs.container;\r\n\r\n            $el.focus();\r\n        },\r\n\r\n\r\n        // Activates current instance - brings container to the front and enables keyboard,\r\n        // notifies other instances about deactivating\r\n        // =================================================================================\r\n\r\n        activate : function () {\r\n            var self = this;\r\n\r\n            // Deactivate all instances\r\n            $( '.fancybox-container' ).each(function () {\r\n                var instance = $(this).data( 'FancyBox' );\r\n\r\n                // Skip self and closing instances\r\n                if (instance && instance.id !== self.id && !instance.isClosing) {\r\n                    instance.trigger( 'onDeactivate' );\r\n\r\n                    instance.removeEvents();\r\n\r\n                    instance.isVisible = false;\r\n                }\r\n\r\n            });\r\n\r\n            self.isVisible = true;\r\n\r\n            if ( self.current || self.isIdle ) {\r\n                self.update();\r\n\r\n                self.updateControls();\r\n            }\r\n\r\n            self.trigger( 'onActivate' );\r\n\r\n            self.addEvents();\r\n        },\r\n\r\n\r\n        // Start closing procedure\r\n        // This will start \"zoom-out\" animation if needed and clean everything up afterwards\r\n        // =================================================================================\r\n\r\n        close : function( e, d ) {\r\n\r\n            var self    = this;\r\n            var current = self.current;\r\n\r\n            var effect, duration;\r\n            var $what, opacity, start, end;\r\n\r\n            var done = function() {\r\n                self.cleanUp( e );\r\n            };\r\n\r\n            if ( self.isClosing ) {\r\n                return false;\r\n            }\r\n\r\n            self.isClosing = true;\r\n\r\n            // If beforeClose callback prevents closing, make sure content is centered\r\n            if ( self.trigger( 'beforeClose', e ) === false ) {\r\n                self.isClosing = false;\r\n\r\n                requestAFrame(function() {\r\n                    self.update();\r\n                });\r\n\r\n                return false;\r\n            }\r\n\r\n            // Remove all events\r\n            // If there are multiple instances, they will be set again by \"activate\" method\r\n            self.removeEvents();\r\n\r\n            if ( current.timouts ) {\r\n                clearTimeout( current.timouts );\r\n            }\r\n\r\n            $what    = current.$content;\r\n            effect   = current.opts.animationEffect;\r\n            duration = $.isNumeric( d ) ? d : ( effect ? current.opts.animationDuration : 0 );\r\n\r\n            // Remove other slides\r\n            current.$slide.off( transitionEnd ).removeClass( 'fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated' );\r\n\r\n            current.$slide.siblings().trigger( 'onReset' ).remove();\r\n\r\n            // Trigger animations\r\n            if ( duration ) {\r\n                self.$refs.container.removeClass( 'fancybox-is-open' ).addClass( 'fancybox-is-closing' );\r\n            }\r\n\r\n            // Clean up\r\n            self.hideLoading( current );\r\n\r\n            self.hideControls();\r\n\r\n            self.updateCursor();\r\n\r\n            // Check if possible to zoom-out\r\n            if ( effect === 'zoom' && !( e !== true && $what && duration && current.type === 'image' && !current.hasError && ( end = self.getThumbPos( current ) ) ) ) {\r\n                effect = 'fade';\r\n            }\r\n\r\n            if ( effect === 'zoom' ) {\r\n                $.fancybox.stop( $what );\r\n\r\n                start = $.fancybox.getTranslate( $what );\r\n\r\n                start.width  = start.width  * start.scaleX;\r\n                start.height = start.height * start.scaleY;\r\n\r\n                // Check if we need to animate opacity\r\n                opacity = current.opts.zoomOpacity;\r\n\r\n                if ( opacity == 'auto' ) {\r\n                    opacity = Math.abs( current.width / current.height - end.width / end.height ) > 0.1;\r\n                }\r\n\r\n                if ( opacity ) {\r\n                    end.opacity = 0;\r\n                }\r\n\r\n                start.scaleX = start.width  / end.width;\r\n                start.scaleY = start.height / end.height;\r\n\r\n                start.width  = end.width;\r\n                start.height = end.height;\r\n\r\n                $.fancybox.setTranslate( current.$content, start );\r\n\r\n                forceRedraw( current.$content );\r\n\r\n                $.fancybox.animate( current.$content, end, duration, done );\r\n\r\n                return true;\r\n            }\r\n\r\n            if ( effect && duration ) {\r\n\r\n                // If skip animation\r\n                if ( e === true ) {\r\n                    setTimeout( done, duration );\r\n\r\n                } else {\r\n                    $.fancybox.animate( current.$slide.removeClass( 'fancybox-slide--current' ), 'fancybox-animated fancybox-slide--previous fancybox-fx-' + effect, duration, done );\r\n                }\r\n\r\n            } else {\r\n                done();\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n\r\n        // Final adjustments after removing the instance\r\n        // =============================================\r\n\r\n        cleanUp : function( e ) {\r\n            var self  = this,\r\n                $body = $( 'body' ),\r\n                instance,\r\n                offset;\r\n\r\n            self.current.$slide.trigger( 'onReset' );\r\n\r\n            self.$refs.container.empty().remove();\r\n\r\n            self.trigger( 'afterClose', e );\r\n\r\n            // Place back focus\r\n            if ( self.$lastFocus && !!self.current.opts.backFocus ) {\r\n                self.$lastFocus.focus();\r\n            }\r\n\r\n            self.current = null;\r\n\r\n            // Check if there are other instances\r\n            instance = $.fancybox.getInstance();\r\n\r\n            if ( instance ) {\r\n                instance.activate();\r\n\r\n            } else {\r\n\r\n                $W.scrollTop( self.scrollTop ).scrollLeft( self.scrollLeft );\r\n\r\n                $body.removeClass( 'fancybox-active compensate-for-scrollbar' );\r\n\r\n                if ( $body.hasClass( 'fancybox-iosfix' ) ) {\r\n                    offset = parseInt(document.body.style.top, 10);\r\n\r\n                    $body.removeClass( 'fancybox-iosfix' ).css( 'top', '' ).scrollTop( offset * -1 );\r\n                }\r\n\r\n                $( '#fancybox-style-noscroll' ).remove();\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Call callback and trigger an event\r\n        // ==================================\r\n\r\n        trigger : function( name, slide ) {\r\n            var args  = Array.prototype.slice.call(arguments, 1),\r\n                self  = this,\r\n                obj   = slide && slide.opts ? slide : self.current,\r\n                rez;\r\n\r\n            if ( obj ) {\r\n                args.unshift( obj );\r\n\r\n            } else {\r\n                obj = self;\r\n            }\r\n\r\n            args.unshift( self );\r\n\r\n            if ( $.isFunction( obj.opts[ name ] ) ) {\r\n                rez = obj.opts[ name ].apply( obj, args );\r\n            }\r\n\r\n            if ( rez === false ) {\r\n                return rez;\r\n            }\r\n\r\n            if ( name === 'afterClose' || !self.$refs ) {\r\n                $D.trigger( name + '.fb', args );\r\n\r\n            } else {\r\n                self.$refs.container.trigger( name + '.fb', args );\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Update infobar values, navigation button states and reveal caption\r\n        // ==================================================================\r\n\r\n        updateControls : function ( force ) {\r\n\r\n            var self = this;\r\n\r\n            var current  = self.current,\r\n                index    = current.index,\r\n                caption  = current.opts.caption,\r\n                $container = self.$refs.container,\r\n                $caption   = self.$refs.caption;\r\n\r\n            // Recalculate content dimensions\r\n            current.$slide.trigger( 'refresh' );\r\n\r\n            self.$caption = caption && caption.length ? $caption.html( caption ) : null;\r\n\r\n            if ( !self.isHiddenControls && !self.isIdle ) {\r\n                self.showControls();\r\n            }\r\n\r\n            // Update info and navigation elements\r\n            $container.find('[data-fancybox-count]').html( self.group.length );\r\n            $container.find('[data-fancybox-index]').html( index + 1 );\r\n\r\n            $container.find('[data-fancybox-prev]').prop( 'disabled', ( !current.opts.loop && index <= 0 ) );\r\n            $container.find('[data-fancybox-next]').prop( 'disabled', ( !current.opts.loop && index >= self.group.length - 1 ) );\r\n\r\n            if ( current.type === 'image' ) {\r\n\r\n                // Update download button source\r\n                $container.find('[data-fancybox-download]').attr( 'href', current.opts.image.src || current.src ).show();\r\n\r\n            } else {\r\n                $container.find('[data-fancybox-download],[data-fancybox-zoom]').hide();\r\n            }\r\n        },\r\n\r\n        // Hide toolbar and caption\r\n        // ========================\r\n\r\n        hideControls : function () {\r\n\r\n            this.isHiddenControls = true;\r\n\r\n            this.$refs.container.removeClass( 'fancybox-show-infobar fancybox-show-toolbar fancybox-show-caption fancybox-show-nav' );\r\n\r\n        },\r\n\r\n        showControls : function() {\r\n            var self = this;\r\n            var opts = self.current ? self.current.opts : self.opts;\r\n            var $container = self.$refs.container;\r\n\r\n            self.isHiddenControls   = false;\r\n            self.idleSecondsCounter = 0;\r\n\r\n            $container\r\n                .toggleClass( 'fancybox-show-toolbar', !!( opts.toolbar && opts.buttons ) )\r\n                .toggleClass( 'fancybox-show-infobar', !!( opts.infobar && self.group.length > 1 ) )\r\n                .toggleClass( 'fancybox-show-nav',     !!( opts.arrows && self.group.length > 1 ) )\r\n                .toggleClass( 'fancybox-is-modal',     !!opts.modal );\r\n\r\n            if ( self.$caption ) {\r\n                $container.addClass( 'fancybox-show-caption ');\r\n\r\n            } else {\r\n               $container.removeClass( 'fancybox-show-caption' );\r\n           }\r\n\r\n       },\r\n\r\n\r\n       // Toggle toolbar and caption\r\n       // ==========================\r\n\r\n       toggleControls : function() {\r\n           if ( this.isHiddenControls ) {\r\n               this.showControls();\r\n\r\n           } else {\r\n               this.hideControls();\r\n           }\r\n\r\n       },\r\n\r\n\r\n    });\r\n\r\n\r\n    $.fancybox = {\r\n\r\n        version  : \"3.2.10\",\r\n        defaults : defaults,\r\n\r\n\r\n        // Get current instance and execute a command.\r\n        //\r\n        // Examples of usage:\r\n        //\r\n        //   $instance = $.fancybox.getInstance();\r\n        //   $.fancybox.getInstance().jumpTo( 1 );\r\n        //   $.fancybox.getInstance( 'jumpTo', 1 );\r\n        //   $.fancybox.getInstance( function() {\r\n        //       console.info( this.currIndex );\r\n        //   });\r\n        // ======================================================\r\n\r\n        getInstance : function ( command ) {\r\n            var instance = $('.fancybox-container:not(\".fancybox-is-closing\"):last').data( 'FancyBox' );\r\n            var args     = Array.prototype.slice.call(arguments, 1);\r\n\r\n            if ( instance instanceof FancyBox ) {\r\n\r\n                if ( $.type( command ) === 'string' ) {\r\n                    instance[ command ].apply( instance, args );\r\n\r\n                } else if ( $.type( command ) === 'function' ) {\r\n                    command.apply( instance, args );\r\n                }\r\n\r\n                return instance;\r\n            }\r\n\r\n            return false;\r\n\r\n        },\r\n\r\n\r\n        // Create new instance\r\n        // ===================\r\n\r\n        open : function ( items, opts, index ) {\r\n            return new FancyBox( items, opts, index );\r\n        },\r\n\r\n\r\n        // Close current or all instances\r\n        // ==============================\r\n\r\n        close : function ( all ) {\r\n            var instance = this.getInstance();\r\n\r\n            if ( instance ) {\r\n                instance.close();\r\n\r\n                // Try to find and close next instance\r\n\r\n                if ( all === true ) {\r\n                    this.close();\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        // Close instances and unbind all events\r\n        // ==============================\r\n\r\n        destroy : function() {\r\n\r\n            this.close( true );\r\n\r\n            $D.off( 'click.fb-start' );\r\n\r\n        },\r\n\r\n\r\n        // Try to detect mobile devices\r\n        // ============================\r\n\r\n        isMobile : document.createTouch !== undefined && /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),\r\n\r\n\r\n        // Detect if 'translate3d' support is available\r\n        // ============================================\r\n\r\n        use3d : (function() {\r\n            var div = document.createElement('div');\r\n\r\n            return window.getComputedStyle && window.getComputedStyle( div ).getPropertyValue('transform') && !(document.documentMode && document.documentMode < 11);\r\n        }()),\r\n\r\n        // Helper function to get current visual state of an element\r\n        // returns array[ top, left, horizontal-scale, vertical-scale, opacity ]\r\n        // =====================================================================\r\n\r\n        getTranslate : function( $el ) {\r\n            var matrix;\r\n\r\n            if ( !$el || !$el.length ) {\r\n                return false;\r\n            }\r\n\r\n            matrix  = $el.eq( 0 ).css('transform');\r\n\r\n            if ( matrix && matrix.indexOf( 'matrix' ) !== -1 ) {\r\n                matrix = matrix.split('(')[1];\r\n                matrix = matrix.split(')')[0];\r\n                matrix = matrix.split(',');\r\n            } else {\r\n                matrix = [];\r\n            }\r\n\r\n            if ( matrix.length ) {\r\n\r\n                // If IE\r\n                if ( matrix.length > 10 ) {\r\n                    matrix = [ matrix[13], matrix[12], matrix[0], matrix[5] ];\r\n\r\n                } else {\r\n                    matrix = [ matrix[5], matrix[4], matrix[0], matrix[3]];\r\n                }\r\n\r\n                matrix = matrix.map(parseFloat);\r\n\r\n            } else {\r\n                matrix = [ 0, 0, 1, 1 ];\r\n\r\n                var transRegex = /\\.*translate\\((.*)px,(.*)px\\)/i;\r\n                var transRez = transRegex.exec( $el.eq( 0 ).attr('style') );\r\n\r\n                if ( transRez ) {\r\n                    matrix[ 0 ] = parseFloat( transRez[2] );\r\n                    matrix[ 1 ] = parseFloat( transRez[1] );\r\n                }\r\n            }\r\n\r\n            return {\r\n                top     : matrix[ 0 ],\r\n                left    : matrix[ 1 ],\r\n                scaleX  : matrix[ 2 ],\r\n                scaleY  : matrix[ 3 ],\r\n                opacity : parseFloat( $el.css('opacity') ),\r\n                width   : $el.width(),\r\n                height  : $el.height()\r\n            };\r\n\r\n        },\r\n\r\n\r\n        // Shortcut for setting \"translate3d\" properties for element\r\n        // Can set be used to set opacity, too\r\n        // ========================================================\r\n\r\n        setTranslate : function( $el, props ) {\r\n            var str  = '';\r\n            var css  = {};\r\n\r\n            if ( !$el || !props ) {\r\n                return;\r\n            }\r\n\r\n            if ( props.left !== undefined || props.top !== undefined ) {\r\n                str = ( props.left === undefined ? $el.position().left : props.left )  + 'px, ' + ( props.top === undefined ? $el.position().top : props.top ) + 'px';\r\n\r\n                if ( this.use3d ) {\r\n                    str = 'translate3d(' + str + ', 0px)';\r\n\r\n                } else {\r\n                    str = 'translate(' + str + ')';\r\n                }\r\n            }\r\n\r\n            if ( props.scaleX !== undefined && props.scaleY !== undefined ) {\r\n                str = (str.length ? str + ' ' : '') + 'scale(' + props.scaleX + ', ' + props.scaleY + ')';\r\n            }\r\n\r\n            if ( str.length ) {\r\n                css.transform = str;\r\n            }\r\n\r\n            if ( props.opacity !== undefined ) {\r\n                css.opacity = props.opacity;\r\n            }\r\n\r\n            if ( props.width !== undefined ) {\r\n                css.width = props.width;\r\n            }\r\n\r\n            if ( props.height !== undefined ) {\r\n                css.height = props.height;\r\n            }\r\n\r\n            return $el.css( css );\r\n        },\r\n\r\n\r\n        // Simple CSS transition handler\r\n        // =============================\r\n\r\n        animate : function ( $el, to, duration, callback, leaveAnimationName ) {\r\n            if ( $.isFunction( duration ) ) {\r\n                callback = duration;\r\n                duration = null;\r\n            }\r\n\r\n            if ( !$.isPlainObject( to ) ) {\r\n                $el.removeAttr( 'style' );\r\n            }\r\n\r\n            $el.on( transitionEnd, function(e) {\r\n\r\n                // Skip events from child elements and z-index change\r\n                if ( e && e.originalEvent && ( !$el.is( e.originalEvent.target ) || e.originalEvent.propertyName == 'z-index' ) ) {\r\n                    return;\r\n                }\r\n\r\n                $.fancybox.stop( $el );\r\n\r\n                if ( $.isPlainObject( to ) ) {\r\n\r\n                    if ( to.scaleX !== undefined && to.scaleY !== undefined ) {\r\n                        $el.css( 'transition-duration', '' );\r\n\r\n                        to.width  = Math.round( $el.width()  * to.scaleX );\r\n                        to.height = Math.round( $el.height() * to.scaleY );\r\n\r\n                        to.scaleX = 1;\r\n                        to.scaleY = 1;\r\n\r\n                        $.fancybox.setTranslate( $el, to );\r\n                    }\r\n\r\n                    if ( leaveAnimationName === false ) {\r\n                        $el.removeAttr( 'style' );\r\n                    }\r\n\r\n                } else if ( leaveAnimationName !== true ) {\r\n                    $el.removeClass( to );\r\n                }\r\n\r\n                if ( $.isFunction( callback ) ) {\r\n                    callback( e );\r\n                }\r\n\r\n            });\r\n\r\n            if ( $.isNumeric( duration ) ) {\r\n                $el.css( 'transition-duration', duration + 'ms' );\r\n            }\r\n\r\n            if ( $.isPlainObject( to ) ) {\r\n                $.fancybox.setTranslate( $el, to );\r\n\r\n            } else {\r\n                $el.addClass( to );\r\n            }\r\n\r\n            if ( to.scaleX && $el.hasClass( 'fancybox-image-wrap' ) ) {\r\n                $el.parent().addClass( 'fancybox-is-scaling' );\r\n            }\r\n\r\n            // Make sure that `transitionend` callback gets fired\r\n            $el.data(\"timer\", setTimeout(function() {\r\n                $el.trigger( 'transitionend' );\r\n            }, duration + 16));\r\n\r\n        },\r\n\r\n        stop : function( $el ) {\r\n            clearTimeout( $el.data(\"timer\") );\r\n\r\n            $el.off( 'transitionend' ).css( 'transition-duration', '' );\r\n\r\n            if ( $el.hasClass( 'fancybox-image-wrap' ) ) {\r\n                $el.parent().removeClass( 'fancybox-is-scaling' );\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n\r\n    // Default click handler for \"fancyboxed\" links\r\n    // ============================================\r\n\r\n    function _run( e ) {\r\n        var $target\t= $( e.currentTarget ),\r\n            opts\t= e.data ? e.data.options : {},\r\n            value\t= $target.attr( 'data-fancybox' ) || '',\r\n            index\t= 0,\r\n            items   = [];\r\n\r\n        // Avoid opening multiple times\r\n        if ( e.isDefaultPrevented() ) {\r\n            return;\r\n        }\r\n\r\n        e.preventDefault();\r\n\r\n        // Get all related items and find index for clicked one\r\n        if ( value ) {\r\n            items = opts.selector ? $( opts.selector ) : ( e.data ? e.data.items : [] );\r\n            items = items.length ? items.filter( '[data-fancybox=\"' + value + '\"]' ) : $( '[data-fancybox=\"' + value + '\"]' );\r\n\r\n            index = items.index( $target );\r\n\r\n            // Sometimes current item can not be found\r\n            // (for example, when slider clones items)\r\n            if ( index < 0 ) {\r\n                index = 0;\r\n            }\r\n\r\n        } else {\r\n            items = [ $target ];\r\n        }\r\n\r\n        $.fancybox.open( items, opts, index );\r\n    }\r\n\r\n\r\n    // Create a jQuery plugin\r\n    // ======================\r\n\r\n    $.fn.fancybox = function (options) {\r\n        var selector;\r\n\r\n        options  = options || {};\r\n        selector = options.selector || false;\r\n\r\n        if ( selector ) {\r\n\r\n            $( 'body' ).off( 'click.fb-start', selector ).on( 'click.fb-start', selector, {\r\n                options : options\r\n            }, _run );\r\n\r\n        } else {\r\n\r\n            this.off( 'click.fb-start' ).on( 'click.fb-start', {\r\n                items   : this,\r\n                options : options\r\n            }, _run);\r\n\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n\r\n    // Self initializing plugin\r\n    // ========================\r\n\r\n    $D.on( 'click.fb-start', '[data-fancybox]', _run );\r\n\r\n}( window, document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// Media\r\n// Adds additional media type support\r\n//\r\n// ==========================================================================\r\n;(function ($) {\r\n\r\n\t'use strict';\r\n\r\n\t// Formats matching url to final form\r\n\r\n\tvar format = function (url, rez, params) {\r\n\t\tif ( !url ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tparams = params || '';\r\n\r\n\t\tif ( $.type(params) === \"object\" ) {\r\n\t\t\tparams = $.param(params, true);\r\n\t\t}\r\n\r\n\t\t$.each(rez, function (key, value) {\r\n\t\t\turl = url.replace('$' + key, value || '');\r\n\t\t});\r\n\r\n\t\tif (params.length) {\r\n\t\t\turl += (url.indexOf('?') > 0 ? '&' : '?') + params;\r\n\t\t}\r\n\r\n\t\treturn url;\r\n\t};\r\n\r\n\t// Object containing properties for each media type\r\n\r\n\tvar defaults = {\r\n\t\tyoutube : {\r\n\t\t\tmatcher : /(youtube\\.com|youtu\\.be|youtube\\-nocookie\\.com)\\/(watch\\?(.*&)?v=|v\\/|u\\/|embed\\/?)?(videoseries\\?list=(.*)|[\\w-]{11}|\\?listType=(.*)&list=(.*))(.*)/i,\r\n\t\t\tparams  : {\r\n\t\t\t\tautoplay : 1,\r\n\t\t\t\tautohide : 1,\r\n\t\t\t\tfs  : 1,\r\n\t\t\t\trel : 0,\r\n\t\t\t\thd  : 1,\r\n\t\t\t\twmode : 'transparent',\r\n\t\t\t\tenablejsapi : 1,\r\n\t\t\t\thtml5 : 1\r\n\t\t\t},\r\n\t\t\tparamPlace : 8,\r\n\t\t\ttype  : 'iframe',\r\n\t\t\turl   : '//www.youtube.com/embed/$4',\r\n\t\t\tthumb : '//img.youtube.com/vi/$4/hqdefault.jpg'\r\n\t\t},\r\n\r\n\t\tvimeo : {\r\n\t\t\tmatcher : /^.+vimeo.com\\/(.*\\/)?([\\d]+)(.*)?/,\r\n\t\t\tparams  : {\r\n\t\t\t\tautoplay : 1,\r\n\t\t\t\thd : 1,\r\n\t\t\t\tshow_title    : 1,\r\n\t\t\t\tshow_byline   : 1,\r\n\t\t\t\tshow_portrait : 0,\r\n\t\t\t\tfullscreen    : 1,\r\n\t\t\t\tapi : 1\r\n\t\t\t},\r\n\t\t\tparamPlace : 3,\r\n\t\t\ttype : 'iframe',\r\n\t\t\turl : '//player.vimeo.com/video/$2'\r\n\t\t},\r\n\r\n\t\tmetacafe : {\r\n\t\t\tmatcher : /metacafe.com\\/watch\\/(\\d+)\\/(.*)?/,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : '//www.metacafe.com/embed/$1/?ap=1'\r\n\t\t},\r\n\r\n\t\tdailymotion : {\r\n\t\t\tmatcher : /dailymotion.com\\/video\\/(.*)\\/?(.*)/,\r\n\t\t\tparams : {\r\n\t\t\t\tadditionalInfos : 0,\r\n\t\t\t\tautoStart : 1\r\n\t\t\t},\r\n\t\t\ttype : 'iframe',\r\n\t\t\turl  : '//www.dailymotion.com/embed/video/$1'\r\n\t\t},\r\n\r\n\t\tvine : {\r\n\t\t\tmatcher : /vine.co\\/v\\/([a-zA-Z0-9\\?\\=\\-]+)/,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : '//vine.co/v/$1/embed/simple'\r\n\t\t},\r\n\r\n\t\tinstagram : {\r\n\t\t\tmatcher : /(instagr\\.am|instagram\\.com)\\/p\\/([a-zA-Z0-9_\\-]+)\\/?/i,\r\n\t\t\ttype    : 'image',\r\n\t\t\turl     : '//$1/p/$2/media/?size=l'\r\n\t\t},\r\n\r\n\t\t// Examples:\r\n\t\t// http://maps.google.com/?ll=48.857995,2.294297&spn=0.007666,0.021136&t=m&z=16\r\n\t\t// https://www.google.com/maps/@37.7852006,-122.4146355,14.65z\r\n\t\t// https://www.google.com/maps/place/Googleplex/@37.4220041,-122.0833494,17z/data=!4m5!3m4!1s0x0:0x6c296c66619367e0!8m2!3d37.4219998!4d-122.0840572\r\n\t\tgmap_place : {\r\n\t\t\tmatcher : /(maps\\.)?google\\.([a-z]{2,3}(\\.[a-z]{2})?)\\/(((maps\\/(place\\/(.*)\\/)?\\@(.*),(\\d+.?\\d+?)z))|(\\?ll=))(.*)?/i,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : function (rez) {\r\n\t\t\t\treturn '//maps.google.' + rez[2] + '/?ll=' + ( rez[9] ? rez[9] + '&z=' + Math.floor(  rez[10]  ) + ( rez[12] ? rez[12].replace(/^\\//, \"&\") : '' )  : rez[12] ) + '&output=' + ( rez[12] && rez[12].indexOf('layer=c') > 0 ? 'svembed' : 'embed' );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Examples:\r\n\t\t// https://www.google.com/maps/search/Empire+State+Building/\r\n\t\t// https://www.google.com/maps/search/?api=1&query=centurylink+field\r\n\t\t// https://www.google.com/maps/search/?api=1&query=47.5951518,-122.3316393\r\n\t\tgmap_search : {\r\n\t\t\tmatcher : /(maps\\.)?google\\.([a-z]{2,3}(\\.[a-z]{2})?)\\/(maps\\/search\\/)(.*)/i,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : function (rez) {\r\n\t\t\t\treturn '//maps.google.' + rez[2] + '/maps?q=' + rez[5].replace('query=', 'q=').replace('api=1', '') + '&output=embed';\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t$(document).on('objectNeedsType.fb', function (e, instance, item) {\r\n\r\n\t\tvar url\t = item.src || '',\r\n\t\t\ttype = false,\r\n\t\t\tmedia,\r\n\t\t\tthumb,\r\n\t\t\trez,\r\n\t\t\tparams,\r\n\t\t\turlParams,\r\n\t\t\tparamObj,\r\n\t\t\tprovider;\r\n\r\n\t\tmedia = $.extend( true, {}, defaults, item.opts.media );\r\n\r\n\t\t// Look for any matching media type\r\n\t\t$.each(media, function ( providerName, providerOpts ) {\r\n\t\t\trez = url.match( providerOpts.matcher );\r\n\r\n\t\t\tif ( !rez ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\ttype     = providerOpts.type;\r\n\t\t\tparamObj = {};\r\n\r\n\t\t\tif ( providerOpts.paramPlace && rez[ providerOpts.paramPlace ] ) {\r\n\t\t\t\turlParams = rez[ providerOpts.paramPlace ];\r\n\r\n\t\t\t\tif ( urlParams[ 0 ] == '?' ) {\r\n\t\t\t\t\turlParams = urlParams.substring(1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\turlParams = urlParams.split('&');\r\n\r\n\t\t\t\tfor ( var m = 0; m < urlParams.length; ++m ) {\r\n\t\t\t\t\tvar p = urlParams[ m ].split('=', 2);\r\n\r\n\t\t\t\t\tif ( p.length == 2 ) {\r\n\t\t\t\t\t\tparamObj[ p[0] ] = decodeURIComponent( p[1].replace(/\\+/g, \" \") );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tparams = $.extend( true, {}, providerOpts.params, item.opts[ providerName ], paramObj );\r\n\r\n\t\t\turl   = $.type( providerOpts.url ) === \"function\" ? providerOpts.url.call( this, rez, params, item ) : format( providerOpts.url, rez, params );\r\n\t\t\tthumb = $.type( providerOpts.thumb ) === \"function\" ? providerOpts.thumb.call( this, rez, params, item ) : format( providerOpts.thumb, rez );\r\n\r\n\t\t\tif ( providerName === 'vimeo' ) {\r\n\t\t\t\turl = url.replace('&%23', '#');\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t// If it is found, then change content type and update the url\r\n\r\n\t\tif ( type ) {\r\n\t\t\titem.src  = url;\r\n\t\t\titem.type = type;\r\n\r\n\t\t\tif ( !item.opts.thumb && !( item.opts.$thumb && item.opts.$thumb.length ) ) {\r\n\t\t\t\titem.opts.thumb = thumb;\r\n\t\t\t}\r\n\r\n\t\t\tif ( type === 'iframe' ) {\r\n\t\t\t\t$.extend(true, item.opts, {\r\n\t\t\t\t\tiframe : {\r\n\t\t\t\t\t\tpreload : false,\r\n\t\t\t\t\t\tattr : {\r\n\t\t\t\t\t\t\tscrolling : \"no\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\titem.contentProvider = provider;\r\n\r\n\t\t\t\titem.opts.slideClass += ' fancybox-slide--' + ( provider == 'gmap_place' || provider == 'gmap_search' ? 'map' : 'video' );\r\n\t\t\t}\r\n\r\n\t\t} else if ( url ) {\r\n\t\t\titem.type = item.opts.defaultType;\r\n\t\t}\r\n\r\n\t});\r\n\r\n}( window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// Guestures\r\n// Adds touch guestures, handles click and tap events\r\n//\r\n// ==========================================================================\r\n;(function (window, document, $) {\r\n\t'use strict';\r\n\r\n\tvar requestAFrame = (function () {\r\n\t\treturn window.requestAnimationFrame ||\r\n\t\t\twindow.webkitRequestAnimationFrame ||\r\n\t\t\twindow.mozRequestAnimationFrame ||\r\n\t\t\twindow.oRequestAnimationFrame ||\r\n\t\t\t// if all else fails, use setTimeout\r\n\t\t\tfunction (callback) {\r\n\t\t\t\treturn window.setTimeout(callback, 1000 / 60);\r\n\t\t\t};\r\n\t})();\r\n\r\n\tvar cancelAFrame = (function () {\r\n\t\treturn window.cancelAnimationFrame ||\r\n\t\t\twindow.webkitCancelAnimationFrame ||\r\n\t\t\twindow.mozCancelAnimationFrame ||\r\n\t\t\twindow.oCancelAnimationFrame ||\r\n\t\t\tfunction (id) {\r\n\t\t\t\twindow.clearTimeout(id);\r\n\t\t\t};\r\n\t})();\r\n\r\n\tvar pointers = function( e ) {\r\n\t\tvar result = [];\r\n\r\n\t\te = e.originalEvent || e || window.e;\r\n\t\te = e.touches && e.touches.length ? e.touches : ( e.changedTouches && e.changedTouches.length ? e.changedTouches : [ e ] );\r\n\r\n\t\tfor ( var key in e ) {\r\n\r\n\t\t\tif ( e[ key ].pageX ) {\r\n\t\t\t\tresult.push( { x : e[ key ].pageX, y : e[ key ].pageY } );\r\n\r\n\t\t\t} else if ( e[ key ].clientX ) {\r\n\t\t\t\tresult.push( { x : e[ key ].clientX, y : e[ key ].clientY } );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t};\r\n\r\n\tvar distance = function( point2, point1, what ) {\r\n\t\tif ( !point1 || !point2 ) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tif ( what === 'x' ) {\r\n\t\t\treturn point2.x - point1.x;\r\n\r\n\t\t} else if ( what === 'y' ) {\r\n\t\t\treturn point2.y - point1.y;\r\n\t\t}\r\n\r\n\t\treturn Math.sqrt( Math.pow( point2.x - point1.x, 2 ) + Math.pow( point2.y - point1.y, 2 ) );\r\n\t};\r\n\r\n\tvar isClickable = function( $el ) {\r\n\t\tif ( $el.is('a,area,button,[role=\"button\"],input,label,select,summary,textarea') || $.isFunction( $el.get(0).onclick ) || $el.data('selectable') ) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// Check for attributes like data-fancybox-next or data-fancybox-close\r\n\t\tfor ( var i = 0, atts = $el[0].attributes, n = atts.length; i < n; i++ ) {\r\n\t\t\tif ( atts[i].nodeName.substr(0, 14) === 'data-fancybox-' ) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t \treturn false;\r\n\t};\r\n\r\n\tvar hasScrollbars = function( el ) {\r\n\t\tvar overflowY = window.getComputedStyle( el )['overflow-y'];\r\n\t\tvar overflowX = window.getComputedStyle( el )['overflow-x'];\r\n\r\n\t\tvar vertical   = (overflowY === 'scroll' || overflowY === 'auto') && el.scrollHeight > el.clientHeight;\r\n\t\tvar horizontal = (overflowX === 'scroll' || overflowX === 'auto') && el.scrollWidth > el.clientWidth;\r\n\r\n\t\treturn vertical || horizontal;\r\n\t};\r\n\r\n\tvar isScrollable = function ( $el ) {\r\n\t\tvar rez = false;\r\n\r\n\t\twhile ( true ) {\r\n\t\t\trez\t= hasScrollbars( $el.get(0) );\r\n\r\n\t\t\tif ( rez ) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\t$el = $el.parent();\r\n\r\n\t\t\tif ( !$el.length || $el.hasClass( 'fancybox-stage' ) || $el.is( 'body' ) ) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn rez;\r\n\t};\r\n\r\n\r\n\tvar Guestures = function ( instance ) {\r\n\t\tvar self = this;\r\n\r\n\t\tself.instance = instance;\r\n\r\n\t\tself.$bg        = instance.$refs.bg;\r\n\t\tself.$stage     = instance.$refs.stage;\r\n\t\tself.$container = instance.$refs.container;\r\n\r\n\t\tself.destroy();\r\n\r\n\t\tself.$container.on( 'touchstart.fb.touch mousedown.fb.touch', $.proxy(self, 'ontouchstart') );\r\n\t};\r\n\r\n\tGuestures.prototype.destroy = function() {\r\n\t\tthis.$container.off( '.fb.touch' );\r\n\t};\r\n\r\n\tGuestures.prototype.ontouchstart = function( e ) {\r\n\t\tvar self = this;\r\n\r\n\t\tvar $target  = $( e.target );\r\n\t\tvar instance = self.instance;\r\n\t\tvar current  = instance.current;\r\n\t\tvar $content = current.$content;\r\n\r\n\t\tvar isTouchDevice = ( e.type == 'touchstart' );\r\n\r\n\t\t// Do not respond to both (touch and mouse) events\r\n\t\tif ( isTouchDevice ) {\r\n\t\t\tself.$container.off( 'mousedown.fb.touch' );\r\n\t\t}\r\n\r\n\t\t// Ignore right click\r\n\t\tif ( e.originalEvent && e.originalEvent.button == 2 ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore taping on links, buttons, input elements\r\n\t\tif ( !$target.length || isClickable( $target ) || isClickable( $target.parent() ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore clicks on the scrollbar\r\n\t\tif ( !$target.is('img') && e.originalEvent.clientX > $target[0].clientWidth + $target.offset().left ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore clicks while zooming or closing\r\n\t\tif ( !current || self.instance.isAnimating || self.instance.isClosing ) {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tself.realPoints = self.startPoints = pointers( e );\r\n\r\n\t\tif ( !self.startPoints ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\te.stopPropagation();\r\n\r\n\t\tself.startEvent = e;\r\n\r\n\t\tself.canTap   = true;\r\n\t\tself.$target  = $target;\r\n\t\tself.$content = $content;\r\n\t\tself.opts     = current.opts.touch;\r\n\r\n\t\tself.isPanning   = false;\r\n\t\tself.isSwiping   = false;\r\n\t\tself.isZooming   = false;\r\n\t\tself.isScrolling = false;\r\n\r\n\t\tself.sliderStartPos  = self.sliderLastPos || { top: 0, left: 0 };\r\n\t\tself.contentStartPos = $.fancybox.getTranslate( self.$content );\r\n\t\tself.contentLastPos  = null;\r\n\r\n\t\tself.startTime = new Date().getTime();\r\n\t\tself.distanceX = self.distanceY = self.distance = 0;\r\n\r\n\t\tself.canvasWidth  = Math.round( current.$slide[0].clientWidth );\r\n\t\tself.canvasHeight = Math.round( current.$slide[0].clientHeight );\r\n\r\n\t\t$(document)\r\n\t\t\t.off( '.fb.touch' )\r\n\t\t\t.on( isTouchDevice ? 'touchend.fb.touch touchcancel.fb.touch' : 'mouseup.fb.touch mouseleave.fb.touch', $.proxy(self, \"ontouchend\"))\r\n\t\t\t.on( isTouchDevice ? 'touchmove.fb.touch' : 'mousemove.fb.touch', $.proxy(self, \"ontouchmove\"));\r\n\r\n\t\tif ( $.fancybox.isMobile ) {\r\n\t\t\tdocument.addEventListener('scroll', self.onscroll, true);\r\n\t\t}\r\n\r\n\t\tif ( !(self.opts || instance.canPan() ) || !( $target.is( self.$stage ) || self.$stage.find( $target ).length ) ) {\r\n\r\n\t\t\t// Prevent image ghosting while dragging\r\n\t\t\tif ( $target.is('img') ) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( !( $.fancybox.isMobile && ( isScrollable( $target ) || isScrollable( $target.parent() ) ) ) ) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tif ( self.startPoints.length === 1 ) {\r\n\t\t\tif ( current.type === 'image' && ( self.contentStartPos.width > self.canvasWidth + 1 || self.contentStartPos.height > self.canvasHeight + 1 ) ) {\r\n\t\t\t\t$.fancybox.stop( self.$content );\r\n\r\n\t\t\t\tself.$content.css( 'transition-duration', '' );\r\n\r\n\t\t\t\tself.isPanning = true;\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.isSwiping = true;\r\n\t\t\t}\r\n\r\n\t\t\tself.$container.addClass( 'fancybox-controls--isGrabbing' );\r\n\t\t}\r\n\r\n\t\tif ( self.startPoints.length === 2 && !instance.isAnimating && !current.hasError && current.type === 'image' && ( current.isLoaded || current.$ghost ) ) {\r\n\t\t\tself.canTap    = false;\r\n\t\t\tself.isSwiping = false;\r\n\t\t\tself.isPanning = false;\r\n\r\n\t\t\tself.isZooming = true;\r\n\r\n\t\t\t$.fancybox.stop( self.$content );\r\n\r\n\t\t\tself.$content.css( 'transition-duration', '' );\r\n\r\n\t\t\tself.centerPointStartX = ( ( self.startPoints[0].x + self.startPoints[1].x ) * 0.5 ) - $(window).scrollLeft();\r\n\t\t\tself.centerPointStartY = ( ( self.startPoints[0].y + self.startPoints[1].y ) * 0.5 ) - $(window).scrollTop();\r\n\r\n\t\t\tself.percentageOfImageAtPinchPointX = ( self.centerPointStartX - self.contentStartPos.left ) / self.contentStartPos.width;\r\n\t\t\tself.percentageOfImageAtPinchPointY = ( self.centerPointStartY - self.contentStartPos.top  ) / self.contentStartPos.height;\r\n\r\n\t\t\tself.startDistanceBetweenFingers = distance( self.startPoints[0], self.startPoints[1] );\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onscroll = function(e) {\r\n\t\tself.isScrolling = true;\r\n\t};\r\n\r\n\tGuestures.prototype.ontouchmove = function( e ) {\r\n\t\tvar self = this,\r\n\t\t\t$target = $(e.target);\r\n\r\n\t\tif ( self.isScrolling || !( $target.is( self.$stage ) || self.$stage.find( $target ).length ) ) {\r\n\t\t\tself.canTap = false;\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tself.newPoints = pointers( e );\r\n\r\n\t\tif ( !( self.opts || self.instance.canPan() ) || !self.newPoints || !self.newPoints.length ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( !(self.isSwiping && self.isSwiping === true) ) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tself.distanceX = distance( self.newPoints[0], self.startPoints[0], 'x' );\r\n\t\tself.distanceY = distance( self.newPoints[0], self.startPoints[0], 'y' );\r\n\r\n\t\tself.distance = distance( self.newPoints[0], self.startPoints[0] )\r\n\r\n\t\t// Skip false ontouchmove events (Chrome)\r\n\t\tif ( self.distance > 0 ) {\r\n\t\t\tif ( self.isSwiping ) {\r\n\t\t\t\tself.onSwipe(e);\r\n\r\n\t\t\t} else if ( self.isPanning ) {\r\n\t\t\t\tself.onPan();\r\n\r\n\t\t\t} else if ( self.isZooming ) {\r\n\t\t\t\tself.onZoom();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onSwipe = function(e) {\r\n\t\tvar self = this,\r\n\t\t\tswiping = self.isSwiping,\r\n\t\t\tleft    = self.sliderStartPos.left || 0,\r\n\t\t\tangle;\r\n\r\n\t\t// If direction is not yet determined\r\n\t\tif ( swiping === true ) {\r\n\r\n\t\t\t// We need at least 10px distance to correctly calculate an angle\r\n\t\t\tif ( Math.abs( self.distance ) > 10 ) {\r\n\t\t\t\tself.canTap = false;\r\n\r\n\t\t\t\tif ( self.instance.group.length < 2 && self.opts.vertical ) {\r\n\t\t\t\t\tself.isSwiping = 'y';\r\n\r\n\t\t\t\t} else if ( self.instance.isDragging || self.opts.vertical === false || ( self.opts.vertical === 'auto' && $( window ).width() > 800 ) ) {\r\n\t\t\t\t\tself.isSwiping = 'x';\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tangle = Math.abs( Math.atan2( self.distanceY, self.distanceX ) * 180 / Math.PI );\r\n\r\n\t\t\t\t\tself.isSwiping = ( angle > 45 && angle < 135 ) ? 'y' : 'x';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.canTap = false;\r\n\r\n\t\t\t\t if ( self.isSwiping === 'y' && $.fancybox.isMobile && ( isScrollable( self.$target ) || isScrollable( self.$target.parent() ) ) ) {\r\n\t\t\t\t\t self.isScrolling = true;\r\n\r\n\t\t\t\t\t return;\r\n\t\t\t\t }\r\n\r\n\t\t\t\tself.instance.isDragging = self.isSwiping;\r\n\r\n\t\t\t\t// Reset points to avoid jumping, because we dropped first swipes to calculate the angle\r\n\t\t\t\tself.startPoints = self.newPoints;\r\n\r\n\t\t\t\t$.each(self.instance.slides, function( index, slide ) {\r\n\t\t\t\t\t$.fancybox.stop( slide.$slide );\r\n\r\n\t\t\t\t\tslide.$slide.css( 'transition-duration', '' );\r\n\r\n\t\t\t\t\tslide.inTransition = false;\r\n\r\n\t\t\t\t\tif ( slide.pos === self.instance.current.pos ) {\r\n\t\t\t\t\t\tself.sliderStartPos.left = $.fancybox.getTranslate( slide.$slide ).left;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Stop slideshow\r\n\t\t\t\tif ( self.instance.SlideShow && self.instance.SlideShow.isActive ) {\r\n\t\t\t\t\tself.instance.SlideShow.stop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Sticky edges\r\n\t\tif ( swiping == 'x' ) {\r\n\t\t\tif ( self.distanceX > 0 && ( self.instance.group.length < 2 || ( self.instance.current.index === 0 && !self.instance.current.opts.loop ) ) ) {\r\n\t\t\t\tleft = left + Math.pow( self.distanceX, 0.8 );\r\n\r\n\t\t\t} else if ( self.distanceX < 0 && ( self.instance.group.length < 2 || ( self.instance.current.index === self.instance.group.length - 1 && !self.instance.current.opts.loop ) ) ) {\r\n\t\t\t\tleft = left - Math.pow( -self.distanceX, 0.8 );\r\n\r\n\t\t\t} else {\r\n\t\t\t\tleft = left + self.distanceX;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tself.sliderLastPos = {\r\n\t\t\ttop  : swiping == 'x' ? 0 : self.sliderStartPos.top + self.distanceY,\r\n\t\t\tleft : left\r\n\t\t};\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.requestId = requestAFrame(function() {\r\n\r\n\t\t\tif ( self.sliderLastPos ) {\r\n\t\t\t\t$.each(self.instance.slides, function( index, slide ) {\r\n\t\t\t\t\tvar pos = slide.pos - self.instance.currPos;\r\n\r\n\t\t\t\t\t$.fancybox.setTranslate( slide.$slide, {\r\n\t\t\t\t\t\ttop  : self.sliderLastPos.top,\r\n\t\t\t\t\t\tleft : self.sliderLastPos.left + ( pos * self.canvasWidth ) + ( pos * slide.opts.gutter )\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tself.$container.addClass( 'fancybox-is-sliding' );\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onPan = function() {\r\n\t\tvar self = this;\r\n\r\n\t\t// Sometimes, when tapping causally, image can move a bit and that breaks double tapping\r\n\t\tif ( distance( self.newPoints[0], self.realPoints[0] ) < ($.fancybox.isMobile ? 10 : 5) ) {\r\n\t\t\tself.startPoints = self.newPoints;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tself.canTap = false;\r\n\r\n\t\tself.contentLastPos = self.limitMovement();\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.requestId = requestAFrame(function() {\r\n\t\t\t$.fancybox.setTranslate( self.$content, self.contentLastPos );\r\n\t\t});\r\n\t};\r\n\r\n\t// Make panning sticky to the edges\r\n\tGuestures.prototype.limitMovement = function() {\r\n\t\tvar self = this;\r\n\r\n\t\tvar canvasWidth  = self.canvasWidth;\r\n\t\tvar canvasHeight = self.canvasHeight;\r\n\r\n\t\tvar distanceX = self.distanceX;\r\n\t\tvar distanceY = self.distanceY;\r\n\r\n\t\tvar contentStartPos = self.contentStartPos;\r\n\r\n\t\tvar currentOffsetX = contentStartPos.left;\r\n\t\tvar currentOffsetY = contentStartPos.top;\r\n\r\n\t\tvar currentWidth  = contentStartPos.width;\r\n\t\tvar currentHeight = contentStartPos.height;\r\n\r\n\t\tvar minTranslateX, minTranslateY,\r\n\t\t\tmaxTranslateX, maxTranslateY,\r\n\t\t\tnewOffsetX, newOffsetY;\r\n\r\n\t\tif ( currentWidth > canvasWidth ) {\r\n\t\t\tnewOffsetX = currentOffsetX + distanceX;\r\n\r\n\t\t} else {\r\n\t\t\tnewOffsetX = currentOffsetX;\r\n\t\t}\r\n\r\n\t\tnewOffsetY = currentOffsetY + distanceY;\r\n\r\n\t\t// Slow down proportionally to traveled distance\r\n\t\tminTranslateX = Math.max( 0, canvasWidth  * 0.5 - currentWidth  * 0.5 );\r\n\t\tminTranslateY = Math.max( 0, canvasHeight * 0.5 - currentHeight * 0.5 );\r\n\r\n\t\tmaxTranslateX = Math.min( canvasWidth  - currentWidth,  canvasWidth  * 0.5 - currentWidth  * 0.5 );\r\n\t\tmaxTranslateY = Math.min( canvasHeight - currentHeight, canvasHeight * 0.5 - currentHeight * 0.5 );\r\n\r\n\t\tif ( currentWidth > canvasWidth ) {\r\n\r\n\t\t\t//   ->\r\n\t\t\tif ( distanceX > 0 && newOffsetX > minTranslateX ) {\r\n\t\t\t\tnewOffsetX = minTranslateX - 1 + Math.pow( -minTranslateX + currentOffsetX + distanceX, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t\t//    <-\r\n\t\t\tif ( distanceX < 0 && newOffsetX < maxTranslateX ) {\r\n\t\t\t\tnewOffsetX = maxTranslateX + 1 - Math.pow( maxTranslateX - currentOffsetX - distanceX, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( currentHeight > canvasHeight ) {\r\n\r\n\t\t\t//   \\/\r\n\t\t\tif ( distanceY > 0 && newOffsetY > minTranslateY ) {\r\n\t\t\t\tnewOffsetY = minTranslateY - 1 + Math.pow(-minTranslateY + currentOffsetY + distanceY, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t\t//   /\\\r\n\t\t\tif ( distanceY < 0 && newOffsetY < maxTranslateY ) {\r\n\t\t\t\tnewOffsetY = maxTranslateY + 1 - Math.pow ( maxTranslateY - currentOffsetY - distanceY, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttop    : newOffsetY,\r\n\t\t\tleft   : newOffsetX,\r\n\t\t\tscaleX : contentStartPos.scaleX,\r\n\t\t\tscaleY : contentStartPos.scaleY\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.limitPosition = function( newOffsetX, newOffsetY, newWidth, newHeight ) {\r\n\t\tvar self = this;\r\n\r\n\t\tvar canvasWidth  = self.canvasWidth;\r\n\t\tvar canvasHeight = self.canvasHeight;\r\n\r\n\t\tif ( newWidth > canvasWidth ) {\r\n\t\t\tnewOffsetX = newOffsetX > 0 ? 0 : newOffsetX;\r\n\t\t\tnewOffsetX = newOffsetX < canvasWidth - newWidth ? canvasWidth - newWidth : newOffsetX;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Center horizontally\r\n\t\t\tnewOffsetX = Math.max( 0, canvasWidth / 2 - newWidth / 2 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( newHeight > canvasHeight ) {\r\n\t\t\tnewOffsetY = newOffsetY > 0 ? 0 : newOffsetY;\r\n\t\t\tnewOffsetY = newOffsetY < canvasHeight - newHeight ? canvasHeight - newHeight : newOffsetY;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Center vertically\r\n\t\t\tnewOffsetY = Math.max( 0, canvasHeight / 2 - newHeight / 2 );\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttop  : newOffsetY,\r\n\t\t\tleft : newOffsetX\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onZoom = function() {\r\n\t\tvar self = this;\r\n\r\n\t\t// Calculate current distance between points to get pinch ratio and new width and height\r\n\r\n\t\tvar currentWidth  = self.contentStartPos.width;\r\n\t\tvar currentHeight = self.contentStartPos.height;\r\n\r\n\t\tvar currentOffsetX = self.contentStartPos.left;\r\n\t\tvar currentOffsetY = self.contentStartPos.top;\r\n\r\n\t\tvar endDistanceBetweenFingers = distance( self.newPoints[0], self.newPoints[1] );\r\n\r\n\t\tvar pinchRatio = endDistanceBetweenFingers / self.startDistanceBetweenFingers;\r\n\r\n\t\tvar newWidth  = Math.floor( currentWidth  * pinchRatio );\r\n\t\tvar newHeight = Math.floor( currentHeight * pinchRatio );\r\n\r\n\t\t// This is the translation due to pinch-zooming\r\n\t\tvar translateFromZoomingX = (currentWidth  - newWidth)  * self.percentageOfImageAtPinchPointX;\r\n\t\tvar translateFromZoomingY = (currentHeight - newHeight) * self.percentageOfImageAtPinchPointY;\r\n\r\n\t\t//Point between the two touches\r\n\r\n\t\tvar centerPointEndX = ((self.newPoints[0].x + self.newPoints[1].x) / 2) - $(window).scrollLeft();\r\n\t\tvar centerPointEndY = ((self.newPoints[0].y + self.newPoints[1].y) / 2) - $(window).scrollTop();\r\n\r\n\t\t// And this is the translation due to translation of the centerpoint\r\n\t\t// between the two fingers\r\n\r\n\t\tvar translateFromTranslatingX = centerPointEndX - self.centerPointStartX;\r\n\t\tvar translateFromTranslatingY = centerPointEndY - self.centerPointStartY;\r\n\r\n\t\t// The new offset is the old/current one plus the total translation\r\n\r\n\t\tvar newOffsetX = currentOffsetX + ( translateFromZoomingX + translateFromTranslatingX );\r\n\t\tvar newOffsetY = currentOffsetY + ( translateFromZoomingY + translateFromTranslatingY );\r\n\r\n\t\tvar newPos = {\r\n\t\t\ttop    : newOffsetY,\r\n\t\t\tleft   : newOffsetX,\r\n\t\t\tscaleX : self.contentStartPos.scaleX * pinchRatio,\r\n\t\t\tscaleY : self.contentStartPos.scaleY * pinchRatio\r\n\t\t};\r\n\r\n\t\tself.canTap = false;\r\n\r\n\t\tself.newWidth  = newWidth;\r\n\t\tself.newHeight = newHeight;\r\n\r\n\t\tself.contentLastPos = newPos;\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.requestId = requestAFrame(function() {\r\n\t\t\t$.fancybox.setTranslate( self.$content, self.contentLastPos );\r\n\t\t});\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.ontouchend = function( e ) {\r\n\t\tvar self = this;\r\n\t\tvar dMs  = Math.max( (new Date().getTime() ) - self.startTime, 1);\r\n\r\n\t\tvar swiping   = self.isSwiping;\r\n\t\tvar panning   = self.isPanning;\r\n\t\tvar zooming   = self.isZooming;\r\n\t\tvar scrolling = self.isScrolling;\r\n\r\n\t\tself.endPoints = pointers( e );\r\n\r\n\t\tself.$container.removeClass( 'fancybox-controls--isGrabbing' );\r\n\r\n\t\t$(document).off( '.fb.touch' );\r\n\r\n\t\tdocument.removeEventListener('scroll', self.onscroll, true);\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.isSwiping   = false;\r\n\t\tself.isPanning   = false;\r\n\t\tself.isZooming   = false;\r\n\t\tself.isScrolling = false;\r\n\r\n\t\tself.instance.isDragging = false;\r\n\r\n\t\tif ( self.canTap ) {\r\n\t\t\treturn self.onTap( e );\r\n\t\t}\r\n\r\n\t\tself.speed = 366;\r\n\r\n\t\t// Speed in px/ms\r\n\t\tself.velocityX = self.distanceX / dMs * 0.5;\r\n\t\tself.velocityY = self.distanceY / dMs * 0.5;\r\n\r\n\t\tself.speedX = Math.max( self.speed * 0.5, Math.min( self.speed * 1.5, ( 1 / Math.abs( self.velocityX ) ) * self.speed ) );\r\n\r\n\t\tif ( panning ) {\r\n\t\t\tself.endPanning();\r\n\r\n\t\t} else if ( zooming ) {\r\n\t\t\tself.endZooming();\r\n\r\n\t\t} else {\r\n\t\t\tself.endSwiping( swiping, scrolling );\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t};\r\n\r\n\tGuestures.prototype.endSwiping = function( swiping, scrolling ) {\r\n\t\tvar self = this,\r\n\t\t\tret  = false,\r\n\t\t\tlen  = self.instance.group.length;\r\n\r\n\t\tself.sliderLastPos = null;\r\n\r\n\t\t// Close if swiped vertically / navigate if horizontally\r\n\t\tif ( swiping == 'y' && !scrolling && Math.abs( self.distanceY ) > 50 ) {\r\n\r\n\t\t\t// Continue vertical movement\r\n\t\t\t$.fancybox.animate( self.instance.current.$slide, {\r\n\t\t\t\ttop     : self.sliderStartPos.top + self.distanceY + ( self.velocityY * 150 ),\r\n\t\t\t\topacity : 0\r\n\t\t\t}, 150 );\r\n\r\n\t\t\tret = self.instance.close( true, 300 );\r\n\r\n\t\t} else if ( swiping == 'x' && self.distanceX > 50 && len > 1 ) {\r\n\t\t\tret = self.instance.previous( self.speedX );\r\n\r\n\t\t} else if ( swiping == 'x' && self.distanceX < -50 && len > 1 ) {\r\n\t\t\tret = self.instance.next( self.speedX );\r\n\t\t}\r\n\r\n\t\tif ( ret === false && ( swiping == 'x' || swiping == 'y' ) ) {\r\n\t\t\tif ( scrolling || len < 2 ) {\r\n\t\t\t\tself.instance.centerSlide( self.instance.current, 150 );\r\n\t\t\t} else {\r\n\t\t\t\tself.instance.jumpTo( self.instance.current.index );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tself.$container.removeClass( 'fancybox-is-sliding' );\r\n\r\n\t};\r\n\r\n\t// Limit panning from edges\r\n\t// ========================\r\n\r\n\tGuestures.prototype.endPanning = function() {\r\n\r\n\t\tvar self = this;\r\n\t\tvar newOffsetX, newOffsetY, newPos;\r\n\r\n\t\tif ( !self.contentLastPos ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( self.opts.momentum === false ) {\r\n\t\t\tnewOffsetX = self.contentLastPos.left;\r\n\t\t\tnewOffsetY = self.contentLastPos.top;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Continue movement\r\n\t\t\tnewOffsetX = self.contentLastPos.left + ( self.velocityX * self.speed );\r\n\t\t\tnewOffsetY = self.contentLastPos.top  + ( self.velocityY * self.speed );\r\n\t\t}\r\n\r\n\t\tnewPos = self.limitPosition( newOffsetX, newOffsetY, self.contentStartPos.width, self.contentStartPos.height );\r\n\r\n\t\t newPos.width  = self.contentStartPos.width;\r\n\t\t newPos.height = self.contentStartPos.height;\r\n\r\n\t\t$.fancybox.animate( self.$content, newPos, 330 );\r\n\t};\r\n\r\n\r\n\tGuestures.prototype.endZooming = function() {\r\n\t\tvar self = this;\r\n\r\n\t\tvar current = self.instance.current;\r\n\r\n\t\tvar newOffsetX, newOffsetY, newPos, reset;\r\n\r\n\t\tvar newWidth  = self.newWidth;\r\n\t\tvar newHeight = self.newHeight;\r\n\r\n\t\tif ( !self.contentLastPos ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tnewOffsetX = self.contentLastPos.left;\r\n\t\tnewOffsetY = self.contentLastPos.top;\r\n\r\n\t\treset = {\r\n\t\t\ttop    : newOffsetY,\r\n\t\t\tleft   : newOffsetX,\r\n\t\t\twidth  : newWidth,\r\n\t\t\theight : newHeight,\r\n\t\t\tscaleX : 1,\r\n\t\t\tscaleY : 1\r\n\t\t};\r\n\r\n\t\t// Reset scalex/scaleY values; this helps for perfomance and does not break animation\r\n\t\t$.fancybox.setTranslate( self.$content, reset );\r\n\r\n\t\tif ( newWidth < self.canvasWidth && newHeight < self.canvasHeight ) {\r\n\t\t\tself.instance.scaleToFit( 150 );\r\n\r\n\t\t} else if ( newWidth > current.width || newHeight > current.height ) {\r\n\t\t\tself.instance.scaleToActual( self.centerPointStartX, self.centerPointStartY, 150 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnewPos = self.limitPosition( newOffsetX, newOffsetY, newWidth, newHeight );\r\n\r\n\t\t\t// Switch from scale() to width/height or animation will not work correctly\r\n\t\t\t$.fancybox.setTranslate( self.content, $.fancybox.getTranslate( self.$content ) );\r\n\r\n\t\t\t$.fancybox.animate( self.$content, newPos, 150 );\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onTap = function(e) {\r\n\t\tvar self    = this;\r\n\t\tvar $target = $( e.target );\r\n\r\n\t\tvar instance = self.instance;\r\n\t\tvar current  = instance.current;\r\n\r\n\t\tvar endPoints = ( e && pointers( e ) ) || self.startPoints;\r\n\r\n\t\tvar tapX = endPoints[0] ? endPoints[0].x - self.$stage.offset().left : 0;\r\n\t\tvar tapY = endPoints[0] ? endPoints[0].y - self.$stage.offset().top  : 0;\r\n\r\n\t\tvar where;\r\n\r\n\t\tvar process = function ( prefix ) {\r\n\r\n\t\t\tvar action = current.opts[ prefix ];\r\n\r\n\t\t\tif ( $.isFunction( action ) ) {\r\n\t\t\t\taction = action.apply( instance, [ current, e ] );\r\n\t\t\t}\r\n\r\n\t\t\tif ( !action) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( action ) {\r\n\r\n\t\t\t\tcase \"close\" :\r\n\r\n\t\t\t\t\tinstance.close( self.startEvent );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"toggleControls\" :\r\n\r\n\t\t\t\t\tinstance.toggleControls( true );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"next\" :\r\n\r\n\t\t\t\t\tinstance.next();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"nextOrClose\" :\r\n\r\n\t\t\t\t\tif ( instance.group.length > 1 ) {\r\n\t\t\t\t\t\tinstance.next();\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tinstance.close( self.startEvent );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"zoom\" :\r\n\r\n\t\t\t\t\tif ( current.type == 'image' && ( current.isLoaded || current.$ghost ) ) {\r\n\r\n\t\t\t\t\t\tif ( instance.canPan() ) {\r\n\t\t\t\t\t\t\tinstance.scaleToFit();\r\n\r\n\t\t\t\t\t\t} else if ( instance.isScaledDown() ) {\r\n\t\t\t\t\t\t\tinstance.scaleToActual( tapX, tapY );\r\n\r\n\t\t\t\t\t\t} else if ( instance.group.length < 2 ) {\r\n\t\t\t\t\t\t\tinstance.close( self.startEvent );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\t// Ignore right click\r\n\t\tif ( e.originalEvent && e.originalEvent.button == 2 ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Skip if clicked on the scrollbar\r\n\t\tif ( !$target.is('img') && tapX > $target[0].clientWidth + $target.offset().left ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Check where is clicked\r\n\t\tif ( $target.is( '.fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container' ) ) {\r\n\t\t\twhere = 'Outside';\r\n\r\n\t\t} else if ( $target.is( '.fancybox-slide' ) ) {\r\n\t\t\twhere = 'Slide';\r\n\r\n\t\t} else if ( instance.current.$content && instance.current.$content.find( $target ).addBack().filter( $target ).length ) {\r\n\t\t \twhere = 'Content';\r\n\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Check if this is a double tap\r\n\t\tif ( self.tapped ) {\r\n\r\n\t\t\t// Stop previously created single tap\r\n\t\t\tclearTimeout( self.tapped );\r\n\t\t\tself.tapped = null;\r\n\r\n\t\t\t// Skip if distance between taps is too big\r\n\t\t\tif ( Math.abs( tapX - self.tapX ) > 50 || Math.abs( tapY - self.tapY ) > 50 ) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\r\n\t\t\t// OK, now we assume that this is a double-tap\r\n\t\t\tprocess( 'dblclick' + where );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Single tap will be processed if user has not clicked second time within 300ms\r\n\t\t\t// or there is no need to wait for double-tap\r\n\t\t\tself.tapX = tapX;\r\n\t\t\tself.tapY = tapY;\r\n\r\n\t\t\tif ( current.opts[ 'dblclick' + where ] && current.opts[ 'dblclick' + where ] !== current.opts[ 'click' + where ] ) {\r\n\r\n\t\t\t\tself.tapped = setTimeout(function() {\r\n\t\t\t\t\tself.tapped = null;\r\n\r\n\t\t\t\t\tprocess( 'click' + where );\r\n\r\n\t\t\t\t}, 500);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocess( 'click' + where );\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t};\r\n\r\n\t$(document).on('onActivate.fb', function (e, instance) {\r\n\t\tif ( instance && !instance.Guestures ) {\r\n\t\t\tinstance.Guestures = new Guestures( instance );\r\n\t\t}\r\n\t});\r\n\r\n}( window, document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// SlideShow\r\n// Enables slideshow functionality\r\n//\r\n// Example of usage:\r\n// $.fancybox.getInstance().SlideShow.start()\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\t$.extend(true, $.fancybox.defaults, {\r\n\t\tbtnTpl : {\r\n\t\t\tslideShow :\r\n\t\t\t\t'<button data-fancybox-play class=\"fancybox-button fancybox-button--play\" title=\"{{PLAY_START}}\">' +\r\n\t\t\t\t\t'<svg viewBox=\"0 0 40 40\">' +\r\n\t\t\t\t\t\t'<path d=\"M13,12 L27,20 L13,27 Z\" />' +\r\n\t\t\t\t\t\t'<path d=\"M15,10 v19 M23,10 v19\" />' +\r\n\t\t\t\t\t'</svg>' +\r\n\t\t\t\t'</button>'\r\n\t\t},\r\n\t\tslideShow : {\r\n\t\t\tautoStart : false,\r\n            speed     : 3000\r\n\t\t}\r\n\t});\r\n\r\n\tvar SlideShow = function( instance ) {\r\n\t\tthis.instance = instance;\r\n\t\tthis.init();\r\n\t};\r\n\r\n\t$.extend( SlideShow.prototype, {\r\n\t\ttimer    : null,\r\n\t\tisActive : false,\r\n\t\t$button  : null,\r\n\r\n\t\tinit : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tself.$button = self.instance.$refs.toolbar.find('[data-fancybox-play]').on('click', function() {\r\n\t\t\t\tself.toggle();\r\n\t\t\t});\r\n\r\n\t\t\tif ( self.instance.group.length < 2 || !self.instance.group[ self.instance.currIndex ].opts.slideShow ) {\r\n\t\t\t\tself.$button.hide();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tset : function( force ) {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\t// Check if reached last element\r\n\t\t\tif ( self.instance && self.instance.current && (force === true || self.instance.current.opts.loop || self.instance.currIndex < self.instance.group.length - 1 )) {\r\n\t\t\t\tself.timer = setTimeout(function() {\r\n\t\t\t\t\tif ( self.isActive ) {\r\n\t\t\t\t\t\tself.instance.jumpTo( (self.instance.currIndex + 1) % self.instance.group.length );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}, self.instance.current.opts.slideShow.speed);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.stop();\r\n\t\t\t\tself.instance.idleSecondsCounter = 0;\r\n\t\t\t\tself.instance.showControls();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclear : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tclearTimeout( self.timer );\r\n\r\n\t\t\tself.timer = null;\r\n\t\t},\r\n\r\n\t\tstart : function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar current = self.instance.current;\r\n\r\n\t\t\tif ( current ) {\r\n\t\t\t\tself.isActive = true;\r\n\r\n\t\t\t\tself.$button\r\n\t\t\t\t\t.attr( 'title', current.opts.i18n[ current.opts.lang ].PLAY_STOP )\r\n\t\t\t\t\t.removeClass( 'fancybox-button--play' )\r\n\t\t\t\t\t.addClass( 'fancybox-button--pause' );\r\n\r\n\t\t\t\t\tself.set( true );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tstop : function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar current = self.instance.current;\r\n\r\n\t\t\tself.clear();\r\n\r\n\t\t\tself.$button\r\n\t\t\t\t.attr( 'title', current.opts.i18n[ current.opts.lang ].PLAY_START )\r\n\t\t\t\t.removeClass( 'fancybox-button--pause' )\r\n\t\t\t\t.addClass( 'fancybox-button--play' );\r\n\r\n\t\t\tself.isActive = false;\r\n\t\t},\r\n\r\n\t\ttoggle : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tif ( self.isActive ) {\r\n\t\t\t\tself.stop();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.start();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(document).on({\r\n\t\t'onInit.fb' : function(e, instance) {\r\n\t\t\tif ( instance && !instance.SlideShow ) {\r\n\t\t\t\tinstance.SlideShow = new SlideShow( instance );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeShow.fb' : function(e, instance, current, firstRun) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\tif ( firstRun ) {\r\n\r\n\t\t\t\tif ( SlideShow && current.opts.slideShow.autoStart ) {\r\n\t\t\t\t\tSlideShow.start();\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( SlideShow && SlideShow.isActive )  {\r\n\t\t\t\tSlideShow.clear();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'afterShow.fb' : function(e, instance, current) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\tif ( SlideShow && SlideShow.isActive ) {\r\n\t\t\t\tSlideShow.set();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\t// \"P\" or Spacebar\r\n\t\t\tif ( SlideShow && current.opts.slideShow && ( keycode === 80 || keycode === 32 ) && !$(document.activeElement).is( 'button,a,input' ) ) {\r\n\t\t\t\tkeypress.preventDefault();\r\n\r\n\t\t\t\tSlideShow.toggle();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeClose.fb onDeactivate.fb' : function(e, instance) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\tif ( SlideShow ) {\r\n\t\t\t\tSlideShow.stop();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t// Page Visibility API to pause slideshow when window is not active\r\n\t$(document).on(\"visibilitychange\", function() {\r\n\t\tvar instance  = $.fancybox.getInstance();\r\n\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\tif ( SlideShow && SlideShow.isActive ) {\r\n\t\t\tif ( document.hidden ) {\r\n\t\t\t\tSlideShow.clear();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tSlideShow.set();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n}( document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// FullScreen\r\n// Adds fullscreen functionality\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\t// Collection of methods supported by user browser\r\n\tvar fn = (function () {\r\n\r\n\t\tvar fnMap = [\r\n\t\t\t[\r\n\t\t\t\t'requestFullscreen',\r\n\t\t\t\t'exitFullscreen',\r\n\t\t\t\t'fullscreenElement',\r\n\t\t\t\t'fullscreenEnabled',\r\n\t\t\t\t'fullscreenchange',\r\n\t\t\t\t'fullscreenerror'\r\n\t\t\t],\r\n\t\t\t// new WebKit\r\n\t\t\t[\r\n\t\t\t\t'webkitRequestFullscreen',\r\n\t\t\t\t'webkitExitFullscreen',\r\n\t\t\t\t'webkitFullscreenElement',\r\n\t\t\t\t'webkitFullscreenEnabled',\r\n\t\t\t\t'webkitfullscreenchange',\r\n\t\t\t\t'webkitfullscreenerror'\r\n\r\n\t\t\t],\r\n\t\t\t// old WebKit (Safari 5.1)\r\n\t\t\t[\r\n\t\t\t\t'webkitRequestFullScreen',\r\n\t\t\t\t'webkitCancelFullScreen',\r\n\t\t\t\t'webkitCurrentFullScreenElement',\r\n\t\t\t\t'webkitCancelFullScreen',\r\n\t\t\t\t'webkitfullscreenchange',\r\n\t\t\t\t'webkitfullscreenerror'\r\n\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t'mozRequestFullScreen',\r\n\t\t\t\t'mozCancelFullScreen',\r\n\t\t\t\t'mozFullScreenElement',\r\n\t\t\t\t'mozFullScreenEnabled',\r\n\t\t\t\t'mozfullscreenchange',\r\n\t\t\t\t'mozfullscreenerror'\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t'msRequestFullscreen',\r\n\t\t\t\t'msExitFullscreen',\r\n\t\t\t\t'msFullscreenElement',\r\n\t\t\t\t'msFullscreenEnabled',\r\n\t\t\t\t'MSFullscreenChange',\r\n\t\t\t\t'MSFullscreenError'\r\n\t\t\t]\r\n\t\t];\r\n\r\n\t\tvar val;\r\n\t\tvar ret = {};\r\n\t\tvar i, j;\r\n\r\n\t\tfor ( i = 0; i < fnMap.length; i++ ) {\r\n\t\t\tval = fnMap[ i ];\r\n\r\n\t\t\tif ( val && val[ 1 ] in document ) {\r\n\t\t\t\tfor ( j = 0; j < val.length; j++ ) {\r\n\t\t\t\t\tret[ fnMap[ 0 ][ j ] ] = val[ j ];\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn ret;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t})();\r\n\r\n\t// If browser does not have Full Screen API, then simply unset default button template and stop\r\n\tif ( !fn ) {\r\n\r\n\t\tif ( $ && $.fancybox ) {\r\n\t\t\t$.fancybox.defaults.btnTpl.fullScreen = false;\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar FullScreen = {\r\n\r\n\t\trequest : function ( elem ) {\r\n\r\n\t\t\telem = elem || document.documentElement;\r\n\r\n\t\t\telem[ fn.requestFullscreen ]( elem.ALLOW_KEYBOARD_INPUT );\r\n\r\n\t\t},\r\n\t\texit : function () {\r\n\r\n\t\t\tdocument[ fn.exitFullscreen ]();\r\n\r\n\t\t},\r\n\t\ttoggle : function ( elem ) {\r\n\r\n\t\t\telem = elem || document.documentElement;\r\n\r\n\t\t\tif ( this.isFullscreen() ) {\r\n\t\t\t\tthis.exit();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.request( elem );\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tisFullscreen : function()  {\r\n\r\n\t\t\treturn Boolean( document[ fn.fullscreenElement ] );\r\n\r\n\t\t},\r\n\t\tenabled : function()  {\r\n\r\n\t\t\treturn Boolean( document[ fn.fullscreenEnabled ] );\r\n\r\n\t\t}\r\n\t};\r\n\r\n\t$.extend(true, $.fancybox.defaults, {\r\n\t\tbtnTpl : {\r\n\t\t\tfullScreen :\r\n\t\t\t\t'<button data-fancybox-fullscreen class=\"fancybox-button fancybox-button--fullscreen\" title=\"{{FULL_SCREEN}}\">' +\r\n\t\t\t\t\t'<svg viewBox=\"0 0 40 40\">' +\r\n\t\t\t\t\t\t'<path d=\"M9,12 h22 v16 h-22 v-16 v16 h22 v-16 Z\" />' +\r\n\t\t\t\t\t'</svg>' +\r\n\t\t\t\t'</button>'\r\n\t\t},\r\n\t\tfullScreen : {\r\n\t\t\tautoStart : false\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).on({\r\n\t\t'onInit.fb' : function(e, instance) {\r\n\t\t\tvar $container;\r\n\r\n\t\t\tif ( instance && instance.group[ instance.currIndex ].opts.fullScreen ) {\r\n\t\t\t\t$container = instance.$refs.container;\r\n\r\n\t\t\t\t$container.on('click.fb-fullscreen', '[data-fancybox-fullscreen]', function(e) {\r\n\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tFullScreen.toggle( $container[ 0 ] );\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif ( instance.opts.fullScreen && instance.opts.fullScreen.autoStart === true ) {\r\n\t\t\t\t\tFullScreen.request( $container[ 0 ] );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Expose API\r\n\t\t\t\tinstance.FullScreen = FullScreen;\r\n\r\n\t\t\t} else if ( instance ) {\r\n\t\t\t\tinstance.$refs.toolbar.find('[data-fancybox-fullscreen]').hide();\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\r\n\r\n\t\t\t// \"P\" or Spacebar\r\n\t\t\tif ( instance && instance.FullScreen && keycode === 70 ) {\r\n\t\t\t\tkeypress.preventDefault();\r\n\r\n\t\t\t\tinstance.FullScreen.toggle( instance.$refs.container[ 0 ] );\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t'beforeClose.fb' : function( instance ) {\r\n\t\t\tif ( instance && instance.FullScreen ) {\r\n\t\t\t\tFullScreen.exit();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).on(fn.fullscreenchange, function() {\r\n\t\tvar isFullscreen = FullScreen.isFullscreen(),\r\n\t\t\tinstance = $.fancybox.getInstance();\r\n\r\n\t\tif ( instance ) {\r\n\r\n\t\t\t// If image is zooming, then force to stop and reposition properly\r\n\t\t\tif ( instance.current && instance.current.type === 'image' && instance.isAnimating ) {\r\n\t\t\t\tinstance.current.$content.css( 'transition', 'none' );\r\n\r\n\t\t\t\tinstance.isAnimating = false;\r\n\r\n\t\t\t\tinstance.update( true, true, 0 );\r\n\t\t\t}\r\n\r\n\t\t\tinstance.trigger( 'onFullscreenChange', isFullscreen );\r\n\r\n\t\t\tinstance.$refs.container.toggleClass( 'fancybox-is-fullscreen', isFullscreen );\r\n\t\t}\r\n\r\n\t});\r\n\r\n}( document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// Thumbs\r\n// Displays thumbnails in a grid\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\t// Make sure there are default values\r\n\t$.fancybox.defaults = $.extend(true, {\r\n\t\tbtnTpl : {\r\n\t\t\tthumbs :\r\n\t\t\t'<button data-fancybox-thumbs class=\"fancybox-button fancybox-button--thumbs\" title=\"{{THUMBS}}\">' +\r\n\t\t\t\t'<svg viewBox=\"0 0 120 120\">' +\r\n\t\t\t\t\t'<path d=\"M30,30 h14 v14 h-14 Z M50,30 h14 v14 h-14 Z M70,30 h14 v14 h-14 Z M30,50 h14 v14 h-14 Z M50,50 h14 v14 h-14 Z M70,50 h14 v14 h-14 Z M30,70 h14 v14 h-14 Z M50,70 h14 v14 h-14 Z M70,70 h14 v14 h-14 Z\" />' +\r\n\t\t\t\t'</svg>' +\r\n\t\t\t'</button>'\r\n\t\t},\r\n\t\tthumbs : {\r\n\t\t\tautoStart   : false,                  // Display thumbnails on opening\r\n\t\t\thideOnClose : true,                   // Hide thumbnail grid when closing animation starts\r\n\t\t\tparentEl    : '.fancybox-container',  // Container is injected into this element\r\n\t\t\taxis        : 'y'                     // Vertical (y) or horizontal (x) scrolling\r\n\t\t}\r\n\t}, $.fancybox.defaults);\r\n\r\n\tvar FancyThumbs = function( instance ) {\r\n\t\tthis.init( instance );\r\n\t};\r\n\r\n\t$.extend( FancyThumbs.prototype, {\r\n\r\n\t\t$button\t\t: null,\r\n\t\t$grid\t\t: null,\r\n\t\t$list\t\t: null,\r\n\t\tisVisible\t: false,\r\n\t\tisActive\t: false,\r\n\r\n\t\tinit : function( instance ) {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tself.instance = instance;\r\n\r\n\t\t\tinstance.Thumbs = self;\r\n\r\n\t\t\t// Enable thumbs if at least two group items have thumbnails\r\n\t\t\tvar first  = instance.group[0],\r\n\t\t\t\tsecond = instance.group[1];\r\n\r\n\t\t\tself.opts = instance.group[ instance.currIndex ].opts.thumbs;\r\n\r\n\t\t\tself.$button = instance.$refs.toolbar.find( '[data-fancybox-thumbs]' );\r\n\r\n\t\t\tif ( self.opts && first && second && (\r\n\t\t    \t\t( first.type == 'image'  || first.opts.thumb  || first.opts.$thumb ) &&\r\n\t\t    \t\t( second.type == 'image' || second.opts.thumb || second.opts.$thumb )\r\n\t\t\t)) {\r\n\r\n\t\t\t\tself.$button.show().on('click', function() {\r\n\t\t\t\t\tself.toggle();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tself.isActive = true;\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.$button.hide();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcreate : function() {\r\n\t\t\tvar self = this,\r\n\t\t\t\tinstance = self.instance,\r\n\t\t\t\tparentEl = self.opts.parentEl,\r\n\t\t\t\tlist,\r\n\t\t\t\tsrc;\r\n\r\n\t\t\tself.$grid = $('<div class=\"fancybox-thumbs fancybox-thumbs-' + self.opts.axis + '\"></div>').appendTo( instance.$refs.container.find( parentEl ).addBack().filter( parentEl ) );\r\n\r\n\t\t\t// Build list HTML\r\n\t\t\tlist = '<ul>';\r\n\r\n\t\t\t$.each(instance.group, function( i, item ) {\r\n\t\t\t\tsrc = item.opts.thumb || ( item.opts.$thumb ? item.opts.$thumb.attr( 'src' ) : null );\r\n\r\n\t\t\t\tif ( !src && item.type === 'image' ) {\r\n\t\t\t\t\tsrc = item.src;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( src && src.length ) {\r\n\t\t\t\t\tlist += '<li data-index=\"' + i + '\"  tabindex=\"0\" class=\"fancybox-thumbs-loading\"><img data-src=\"' + src + '\" /></li>';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tlist += '</ul>';\r\n\r\n\t\t\tself.$list = $( list ).appendTo( self.$grid ).on('click', 'li', function() {\r\n\t\t\t\tinstance.jumpTo( $(this).data('index') );\r\n\t\t\t});\r\n\r\n\t\t\tself.$list.find( 'img' ).hide().one('load', function() {\r\n\t\t\t\tvar $parent\t\t= $(this).parent().removeClass( 'fancybox-thumbs-loading' ),\r\n\t\t\t\t\tthumbWidth\t= $parent.outerWidth(),\r\n\t\t\t\t\tthumbHeight\t= $parent.outerHeight(),\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight,\r\n\t\t\t\t\twidthRatio,\r\n\t\t\t\t\theightRatio;\r\n\r\n\t\t\t\twidth  = this.naturalWidth\t|| this.width;\r\n\t\t\t\theight = this.naturalHeight\t|| this.height;\r\n\r\n\t\t\t\t// Calculate thumbnail dimensions; center vertically and horizontally\r\n\t\t\t\twidthRatio  = width  / thumbWidth;\r\n\t\t\t\theightRatio = height / thumbHeight;\r\n\r\n\t\t\t\tif (widthRatio >= 1 && heightRatio >= 1) {\r\n\t\t\t\t\tif (widthRatio > heightRatio) {\r\n\t\t\t\t\t\twidth  = width / heightRatio;\r\n\t\t\t\t\t\theight = thumbHeight;\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twidth  = thumbWidth;\r\n\t\t\t\t\t\theight = height / widthRatio;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(this).css({\r\n\t\t\t\t\twidth         : Math.floor(width),\r\n\t\t\t\t\theight        : Math.floor(height),\r\n\t\t\t\t\t'margin-top'  : height > thumbHeight ? ( Math.floor(thumbHeight * 0.3 - height * 0.3 ) ) : Math.floor(thumbHeight * 0.5 - height * 0.5 ),\r\n\t\t\t\t\t'margin-left' : Math.floor(thumbWidth * 0.5 - width * 0.5 )\r\n\t\t\t\t}).show();\r\n\r\n\t\t\t})\r\n\t\t\t.each(function() {\r\n\t\t\t\tthis.src = $( this ).data( 'src' );\r\n\t\t\t});\r\n\r\n\t\t\tif ( self.opts.axis === 'x' ) {\r\n\t\t\t\tself.$list.width( parseInt( self.$grid.css(\"padding-right\") ) + ( instance.group.length * self.$list.children().eq(0).outerWidth(true) ) + 'px' );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfocus : function( duration ) {\r\n\t\t\tvar self = this,\r\n\t\t\t\t$list = self.$list,\r\n\t\t\t\tthumb,\r\n\t\t\t\tthumbPos;\r\n\r\n\t\t\tif ( self.instance.current ) {\r\n\t\t\t\tthumb = $list.children()\r\n\t\t\t\t\t.removeClass( 'fancybox-thumbs-active' )\r\n\t\t\t\t\t.filter('[data-index=\"' + self.instance.current.index  + '\"]')\r\n\t\t\t\t\t.addClass('fancybox-thumbs-active');\r\n\r\n\t\t\t\tthumbPos = thumb.position();\r\n\r\n\t\t\t\t// Check if need to scroll to make current thumb visible\r\n\t\t\t\tif ( self.opts.axis === 'y' && ( thumbPos.top < 0 || thumbPos.top > ( $list.height() - thumb.outerHeight() ) ) ) {\r\n\t\t\t\t\t$list.stop().animate({ 'scrollTop' : $list.scrollTop() + thumbPos.top }, duration);\r\n\r\n\t\t\t\t} else if ( self.opts.axis === 'x' && (\r\n\t\t\t\t\t\tthumbPos.left < $list.parent().scrollLeft() ||\r\n\t\t\t\t\t\tthumbPos.left > ( $list.parent().scrollLeft() + ( $list.parent().width() - thumb.outerWidth() ) )\r\n\t\t\t\t\t)\r\n\t\t\t\t) {\r\n\t\t\t\t\t$list.parent().stop().animate({ 'scrollLeft' : thumbPos.left }, duration);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tupdate : function() {\r\n\t\t\tthis.instance.$refs.container.toggleClass( 'fancybox-show-thumbs', this.isVisible );\r\n\r\n\t\t\tif ( this.isVisible ) {\r\n\t\t\t\tif ( !this.$grid ) {\r\n\t\t\t\t\tthis.create();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.instance.trigger( 'onThumbsShow' );\r\n\r\n\t\t\t\tthis.focus( 0 );\r\n\r\n\t\t\t} else if ( this.$grid ) {\r\n\t\t\t\tthis.instance.trigger( 'onThumbsHide' );\r\n\t\t\t}\r\n\r\n\t\t\t// Update content position\r\n\t\t\tthis.instance.update();\r\n\t\t},\r\n\r\n\t\thide : function() {\r\n\t\t\tthis.isVisible = false;\r\n\t\t\tthis.update();\r\n\t\t},\r\n\r\n\t\tshow : function() {\r\n\t\t\tthis.isVisible = true;\r\n\t\t\tthis.update();\r\n\t\t},\r\n\r\n\t\ttoggle : function() {\r\n\t\t\tthis.isVisible = !this.isVisible;\r\n\t\t\tthis.update();\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).on({\r\n\r\n\t\t'onInit.fb' : function(e, instance) {\r\n\t\t\tvar Thumbs;\r\n\r\n\t\t\tif ( instance && !instance.Thumbs ) {\r\n\t\t\t\tThumbs = new FancyThumbs( instance );\r\n\r\n\t\t\t\tif ( Thumbs.isActive && Thumbs.opts.autoStart === true ) {\r\n\t\t\t\t\tThumbs.show();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeShow.fb' : function(e, instance, item, firstRun) {\r\n\t\t\tvar Thumbs = instance && instance.Thumbs;\r\n\r\n\t\t\tif ( Thumbs && Thumbs.isVisible ) {\r\n\t\t\t\tThumbs.focus( firstRun ? 0 : 250 );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\r\n\t\t\tvar Thumbs = instance && instance.Thumbs;\r\n\r\n\t\t\t// \"G\"\r\n\t\t\tif ( Thumbs && Thumbs.isActive && keycode === 71 ) {\r\n\t\t\t\tkeypress.preventDefault();\r\n\r\n\t\t\t\tThumbs.toggle();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeClose.fb' : function( e, instance ) {\r\n\t\t\tvar Thumbs = instance && instance.Thumbs;\r\n\r\n\t\t\tif ( Thumbs && Thumbs.isVisible && Thumbs.opts.hideOnClose !== false ) {\r\n\t\t\t\tThumbs.$grid.hide();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n}(document, window.jQuery));\r\n\r\n//// ==========================================================================\r\n//\r\n// Share\r\n// Displays simple form for sharing current url\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\t$.extend(true, $.fancybox.defaults, {\r\n\t\tbtnTpl : {\r\n\t\t\tshare :\r\n\t\t\t\t'<button data-fancybox-share class=\"fancybox-button fancybox-button--share\" title=\"{{SHARE}}\">' +\r\n\t\t\t\t\t'<svg viewBox=\"0 0 40 40\">' +\r\n\t\t\t\t\t\t'<path d=\"M6,30 C8,18 19,16 23,16 L23,16 L23,10 L33,20 L23,29 L23,24 C19,24 8,27 6,30 Z\">' +\r\n\t\t\t\t\t'</svg>' +\r\n\t\t\t\t'</button>'\r\n\t\t},\r\n\t\tshare : {\r\n\t\t\ttpl :\r\n\t\t\t\t'<div class=\"fancybox-share\">' +\r\n\t\t\t\t\t'<h1>{{SHARE}}</h1>' +\r\n\t\t\t\t\t'<p class=\"fancybox-share__links\">' +\r\n\t\t\t\t\t\t'<a class=\"fancybox-share__button fancybox-share__button--fb\" href=\"https://www.facebook.com/sharer/sharer.php?u={{url}}\">' +\r\n\t\t\t\t\t\t\t'<svg viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m287 456v-299c0-21 6-35 35-35h38v-63c-7-1-29-3-55-3-54 0-91 33-91 94v306m143-254h-205v72h196\" /></svg>' +\r\n\t\t\t\t\t\t\t'<span>Facebook</span>' +\r\n\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t\t'<a class=\"fancybox-share__button fancybox-share__button--pt\" href=\"https://www.pinterest.com/pin/create/button/?url={{url}}&description={{descr}}&media={{media}}\">' +\r\n\t\t\t\t\t\t\t'<svg viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m265 56c-109 0-164 78-164 144 0 39 15 74 47 87 5 2 10 0 12-5l4-19c2-6 1-8-3-13-9-11-15-25-15-45 0-58 43-110 113-110 62 0 96 38 96 88 0 67-30 122-73 122-24 0-42-19-36-44 6-29 20-60 20-81 0-19-10-35-31-35-25 0-44 26-44 60 0 21 7 36 7 36l-30 125c-8 37-1 83 0 87 0 3 4 4 5 2 2-3 32-39 42-75l16-64c8 16 31 29 56 29 74 0 124-67 124-157 0-69-58-132-146-132z\" fill=\"#fff\"/></svg>' +\r\n\t\t\t\t\t\t\t'<span>Pinterest</span>' +\r\n\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t\t'<a class=\"fancybox-share__button fancybox-share__button--tw\" href=\"https://twitter.com/intent/tweet?url={{url}}&text={{descr}}\">' +\r\n\t\t\t\t\t\t\t'<svg viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m456 133c-14 7-31 11-47 13 17-10 30-27 37-46-15 10-34 16-52 20-61-62-157-7-141 75-68-3-129-35-169-85-22 37-11 86 26 109-13 0-26-4-37-9 0 39 28 72 65 80-12 3-25 4-37 2 10 33 41 57 77 57-42 30-77 38-122 34 170 111 378-32 359-208 16-11 30-25 41-42z\" /></svg>' +\r\n\t\t\t\t\t\t\t'<span>Twitter</span>' +\r\n\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t'</p>' +\r\n\t\t\t\t\t'<p><input class=\"fancybox-share__input\" type=\"text\" value=\"{{url_raw}}\" /></p>' +\r\n\t\t\t\t'</div>'\r\n\t\t}\r\n\t});\r\n\r\n\tfunction escapeHtml(string) {\r\n\t\tvar entityMap = {\r\n\t\t  '&': '&amp;',\r\n\t\t  '<': '&lt;',\r\n\t\t  '>': '&gt;',\r\n\t\t  '\"': '&quot;',\r\n\t\t  \"'\": '&#39;',\r\n\t\t  '/': '&#x2F;',\r\n\t\t  '`': '&#x60;',\r\n\t\t  '=': '&#x3D;'\r\n\t\t};\r\n\r\n\t\treturn String(string).replace(/[&<>\"'`=\\/]/g, function (s) {\r\n\t\t\treturn entityMap[s];\r\n\t\t});\r\n\t}\r\n\r\n\t$(document).on('click', '[data-fancybox-share]', function() {\r\n\t\tvar f = $.fancybox.getInstance(),\r\n\t\t\turl,\r\n\t\t\ttpl;\r\n\r\n\t\tif ( f ) {\r\n\t\t\turl = f.current.opts.hash === false ? f.current.src : window.location;\r\n\t\t\ttpl = f.current.opts.share.tpl\r\n\t\t\t\t\t.replace( /\\{\\{media\\}\\}/g, f.current.type === 'image' ? encodeURIComponent( f.current.src ) : '' )\r\n\t\t\t\t\t.replace( /\\{\\{url\\}\\}/g, encodeURIComponent( url ) )\r\n\t\t\t\t\t.replace( /\\{\\{url_raw\\}\\}/g, escapeHtml( url ) )\r\n\t\t\t\t\t.replace( /\\{\\{descr\\}\\}/g, f.$caption ? encodeURIComponent( f.$caption.text() ) : '' );\r\n\r\n\t\t\t$.fancybox.open({\r\n\t\t\t\tsrc  : f.translate( f, tpl ),\r\n\t\t\t\ttype : 'html',\r\n\t\t\t\topts : {\r\n\t\t\t\t\tanimationEffect   : \"fade\",\r\n\t\t\t\t\tanimationDuration : 250,\r\n\t\t\t\t\tafterLoad : function(instance, current) {\r\n\t\t\t\t\t\t// Opening links in a popup window\r\n\t\t\t\t\t\tcurrent.$content.find('.fancybox-share__links a').click(function() {\r\n\t\t\t\t\t        window.open(this.href, \"Share\", \"width=550, height=450\");\r\n\t\t\t\t\t        return false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t});\r\n\r\n}( document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// Hash\r\n// Enables linking to each modal\r\n//\r\n// ==========================================================================\r\n;(function (document, window, $) {\r\n\t'use strict';\r\n\r\n\t// Simple $.escapeSelector polyfill (for jQuery prior v3)\r\n\tif ( !$.escapeSelector ) {\r\n\t\t$.escapeSelector = function( sel ) {\r\n\t\t\tvar rcssescape = /([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\x80-\\uFFFF\\w-]/g;\r\n\t\t\tvar fcssescape = function( ch, asCodePoint ) {\r\n\t\t\t\tif ( asCodePoint ) {\r\n\t\t\t\t\t// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\r\n\t\t\t\t\tif ( ch === \"\\0\" ) {\r\n\t\t\t\t\t\treturn \"\\uFFFD\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Control characters and (dependent upon position) numbers get escaped as code points\r\n\t\t\t\t\treturn ch.slice( 0, -1 ) + \"\\\\\" + ch.charCodeAt( ch.length - 1 ).toString( 16 ) + \" \";\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Other potentially-special ASCII characters get backslash-escaped\r\n\t\t\t\treturn \"\\\\\" + ch;\r\n\t\t\t};\r\n\r\n\t\t\treturn ( sel + \"\" ).replace( rcssescape, fcssescape );\r\n\t\t};\r\n\t}\r\n\r\n\t// Create new history entry only once\r\n\tvar shouldCreateHistory = true;\r\n\r\n\t// Variable containing last hash value set by fancyBox\r\n\t// It will be used to determine if fancyBox needs to close after hash change is detected\r\n    var currentHash = null;\r\n\r\n\t// Throttling the history change\r\n\tvar timerID = null;\r\n\r\n\t// Get info about gallery name and current index from url\r\n    function parseUrl() {\r\n        var hash    = window.location.hash.substr( 1 );\r\n        var rez     = hash.split( '-' );\r\n        var index   = rez.length > 1 && /^\\+?\\d+$/.test( rez[ rez.length - 1 ] ) ? parseInt( rez.pop( -1 ), 10 ) || 1 : 1;\r\n        var gallery = rez.join( '-' );\r\n\r\n\t\t// Index is starting from 1\r\n\t\tif ( index < 1 ) {\r\n\t\t\tindex = 1;\r\n\t\t}\r\n\r\n        return {\r\n            hash    : hash,\r\n            index   : index,\r\n            gallery : gallery\r\n        };\r\n    }\r\n\r\n\t// Trigger click evnt on links to open new fancyBox instance\r\n\tfunction triggerFromUrl( url ) {\r\n\t\tvar $el;\r\n\r\n        if ( url.gallery !== '' ) {\r\n\r\n\t\t\t// If we can find element matching 'data-fancybox' atribute, then trigger click event for that ..\r\n\t\t\t$el = $( \"[data-fancybox='\" + $.escapeSelector( url.gallery ) + \"']\" ).eq( url.index - 1 );\r\n\r\n            if ( !$el.length ) {\r\n\t\t\t\t// .. if not, try finding element by ID\r\n\t\t\t\t$el = $( \"#\" + $.escapeSelector( url.gallery ) + \"\" );\r\n\t\t\t}\r\n\r\n\t\t\tif ( $el.length ) {\r\n\t\t\t\tshouldCreateHistory = false;\r\n\r\n\t\t\t\t$el.trigger( 'click' );\r\n\t\t\t}\r\n\r\n        }\r\n\t}\r\n\r\n\t// Get gallery name from current instance\r\n\tfunction getGalleryID( instance ) {\r\n\t\tvar opts;\r\n\r\n\t\tif ( !instance ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\topts = instance.current ? instance.current.opts : instance.opts;\r\n\r\n\t\treturn opts.hash || ( opts.$orig ? opts.$orig.data( 'fancybox' ) : ''  );\r\n\t}\r\n\r\n\t// Start when DOM becomes ready\r\n    $(function() {\r\n\r\n\t\t// Check if user has disabled this module\r\n\t\tif ( $.fancybox.defaults.hash === false ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Update hash when opening/closing fancyBox\r\n\t    $(document).on({\r\n\t\t\t'onInit.fb' : function( e, instance ) {\r\n\t\t\t\tvar url, gallery;\r\n\r\n\t\t\t\tif ( instance.group[ instance.currIndex ].opts.hash === false ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\turl     = parseUrl();\r\n\t\t\t\tgallery = getGalleryID( instance );\r\n\r\n\t\t\t\t// Make sure gallery start index matches index from hash\r\n\t\t\t\tif ( gallery && url.gallery && gallery == url.gallery ) {\r\n\t\t\t\t\tinstance.currIndex = url.index - 1;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t'beforeShow.fb' : function( e, instance, current ) {\r\n\t\t\t\tvar gallery;\r\n\r\n\t\t\t\tif ( !current || current.opts.hash === false ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t            gallery = getGalleryID( instance );\r\n\r\n\t            // Update window hash\r\n\t            if ( gallery && gallery !== '' ) {\r\n\r\n\t\t\t\t\tif ( window.location.hash.indexOf( gallery ) < 0 ) {\r\n\t\t                instance.opts.origHash = window.location.hash;\r\n\t\t            }\r\n\r\n\t\t\t\t\tcurrentHash = gallery + ( instance.group.length > 1 ? '-' + ( current.index + 1 ) : '' );\r\n\r\n\t\t\t\t\tif ( 'replaceState' in window.history ) {\r\n\t\t\t\t\t\tif ( timerID ) {\r\n\t\t\t\t\t\t\tclearTimeout( timerID );\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttimerID = setTimeout(function() {\r\n\t\t\t\t\t\t\twindow.history[ shouldCreateHistory ? 'pushState' : 'replaceState' ]( {} , document.title, window.location.pathname + window.location.search + '#' +  currentHash );\r\n\r\n\t\t\t\t\t\t\ttimerID = null;\r\n\r\n\t\t\t\t\t\t\tshouldCreateHistory = false;\r\n\r\n\t\t\t\t\t\t}, 300);\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twindow.location.hash = currentHash;\r\n\t\t\t\t\t}\r\n\r\n\t            }\r\n\r\n\t        },\r\n\r\n\t\t\t'beforeClose.fb' : function( e, instance, current ) {\r\n\t\t\t\tvar gallery, origHash;\r\n\r\n\t\t\t\tif ( timerID ) {\r\n\t\t\t\t\tclearTimeout( timerID );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( current.opts.hash === false ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgallery  = getGalleryID( instance );\r\n\t\t\t\torigHash = instance && instance.opts.origHash ? instance.opts.origHash : '';\r\n\r\n\t            // Remove hash from location bar\r\n\t            if ( gallery && gallery !== '' ) {\r\n\r\n\t                if ( 'replaceState' in history ) {\r\n\t\t\t\t\t\twindow.history.replaceState( {} , document.title, window.location.pathname + window.location.search + origHash );\r\n\r\n\t                } else {\r\n\t\t\t\t\t\twindow.location.hash = origHash;\r\n\r\n\t\t\t\t\t\t// Keep original scroll position\r\n\t\t\t\t\t\t$( window ).scrollTop( instance.scrollTop ).scrollLeft( instance.scrollLeft );\r\n\t                }\r\n\t            }\r\n\r\n\t\t\t\tcurrentHash = null;\r\n\t        }\r\n\t    });\r\n\r\n\t\t// Check if need to close after url has changed\r\n\t\t$(window).on('hashchange.fb', function() {\r\n\t\t\tvar url = parseUrl();\r\n\r\n\t\t\tif ( $.fancybox.getInstance() ) {\r\n\t\t\t\tif ( currentHash && currentHash !== url.gallery + '-' + url.index && !( url.index === 1 && currentHash == url.gallery ) ) {\r\n\t\t\t\t\tcurrentHash = null;\r\n\r\n\t\t\t\t\t$.fancybox.close();\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( url.gallery !== '' ) {\r\n\t\t\t\ttriggerFromUrl( url );\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Check current hash and trigger click event on matching element to start fancyBox, if needed\r\n\t\tsetTimeout(function() {\r\n\t\t\ttriggerFromUrl( parseUrl() );\r\n\t\t}, 50);\r\n    });\r\n\r\n}( document, window, window.jQuery || jQuery ));\r\n\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\tvar prevTime = new Date().getTime();\r\n\r\n    $(document).on({\r\n        'onInit.fb' : function( e, instance, current ) {\r\n\t\t\tinstance.$refs.stage.on('mousewheel DOMMouseScroll wheel MozMousePixelScroll', function(e) {\r\n\t\t\t\tvar current  = instance.current,\r\n\t\t\t\t\tcurrTime = new Date().getTime();\r\n\r\n\t\t\t\tif ( instance.group.length < 1 || current.opts.wheel === false || ( current.opts.wheel === 'auto' && current.type !== 'image' ) ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\r\n\t\t\t\tif ( current.$slide.hasClass( 'fancybox-animated' ) ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\te = e.originalEvent || e;\r\n\r\n\t\t\t\tif ( currTime - prevTime < 250 ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tprevTime = currTime;\r\n\r\n\t\t\t\tinstance[ ( -e.deltaY || -e.deltaX || e.wheelDelta || -e.detail ) < 0 ? 'next' : 'previous' ]();\r\n\r\n\t\t\t});\r\n\t\t}\r\n    });\r\n\r\n}( document, window.jQuery || jQuery ));\r\n","/*!\r\n * Flickity PACKAGED v2.1.0\r\n * Touch, responsive, flickable carousels\r\n *\r\n * Licensed GPLv3 for open source use\r\n * or Flickity Commercial License for commercial use\r\n *\r\n * https://flickity.metafizzy.co\r\n * Copyright 2015-2018 Metafizzy\r\n */\r\n\r\n/**\r\n * Bridget makes jQuery widgets\r\n * v2.0.1\r\n * MIT license\r\n */\r\n\r\n/* jshint browser: true, strict: true, undef: true, unused: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /* globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'jquery-bridget/jquery-bridget',[ 'jquery' ], function( jQuery ) {\r\n      return factory( window, jQuery );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('jquery')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.jQueryBridget = factory(\r\n      window,\r\n      window.jQuery\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, jQuery ) {\r\n'use strict';\r\n\r\n// ----- utils ----- //\r\n\r\nvar arraySlice = Array.prototype.slice;\r\n\r\n// helper function for logging errors\r\n// $.error breaks jQuery chaining\r\nvar console = window.console;\r\nvar logError = typeof console == 'undefined' ? function() {} :\r\n  function( message ) {\r\n    console.error( message );\r\n  };\r\n\r\n// ----- jQueryBridget ----- //\r\n\r\nfunction jQueryBridget( namespace, PluginClass, $ ) {\r\n  $ = $ || jQuery || window.jQuery;\r\n  if ( !$ ) {\r\n    return;\r\n  }\r\n\r\n  // add option method -> $().plugin('option', {...})\r\n  if ( !PluginClass.prototype.option ) {\r\n    // option setter\r\n    PluginClass.prototype.option = function( opts ) {\r\n      // bail out if not an object\r\n      if ( !$.isPlainObject( opts ) ){\r\n        return;\r\n      }\r\n      this.options = $.extend( true, this.options, opts );\r\n    };\r\n  }\r\n\r\n  // make jQuery plugin\r\n  $.fn[ namespace ] = function( arg0 /*, arg1 */ ) {\r\n    if ( typeof arg0 == 'string' ) {\r\n      // method call $().plugin( 'methodName', { options } )\r\n      // shift arguments by 1\r\n      var args = arraySlice.call( arguments, 1 );\r\n      return methodCall( this, arg0, args );\r\n    }\r\n    // just $().plugin({ options })\r\n    plainCall( this, arg0 );\r\n    return this;\r\n  };\r\n\r\n  // $().plugin('methodName')\r\n  function methodCall( $elems, methodName, args ) {\r\n    var returnValue;\r\n    var pluginMethodStr = '$().' + namespace + '(\"' + methodName + '\")';\r\n\r\n    $elems.each( function( i, elem ) {\r\n      // get instance\r\n      var instance = $.data( elem, namespace );\r\n      if ( !instance ) {\r\n        logError( namespace + ' not initialized. Cannot call methods, i.e. ' +\r\n          pluginMethodStr );\r\n        return;\r\n      }\r\n\r\n      var method = instance[ methodName ];\r\n      if ( !method || methodName.charAt(0) == '_' ) {\r\n        logError( pluginMethodStr + ' is not a valid method' );\r\n        return;\r\n      }\r\n\r\n      // apply method, get return value\r\n      var value = method.apply( instance, args );\r\n      // set return value if value is returned, use only first value\r\n      returnValue = returnValue === undefined ? value : returnValue;\r\n    });\r\n\r\n    return returnValue !== undefined ? returnValue : $elems;\r\n  }\r\n\r\n  function plainCall( $elems, options ) {\r\n    $elems.each( function( i, elem ) {\r\n      var instance = $.data( elem, namespace );\r\n      if ( instance ) {\r\n        // set options & init\r\n        instance.option( options );\r\n        instance._init();\r\n      } else {\r\n        // initialize new instance\r\n        instance = new PluginClass( elem, options );\r\n        $.data( elem, namespace, instance );\r\n      }\r\n    });\r\n  }\r\n\r\n  updateJQuery( $ );\r\n\r\n}\r\n\r\n// ----- updateJQuery ----- //\r\n\r\n// set $.bridget for v1 backwards compatibility\r\nfunction updateJQuery( $ ) {\r\n  if ( !$ || ( $ && $.bridget ) ) {\r\n    return;\r\n  }\r\n  $.bridget = jQueryBridget;\r\n}\r\n\r\nupdateJQuery( jQuery || window.jQuery );\r\n\r\n// -----  ----- //\r\n\r\nreturn jQueryBridget;\r\n\r\n}));\r\n\r\n/**\r\n * EvEmitter v1.1.0\r\n * Lil' event emitter\r\n * MIT License\r\n */\r\n\r\n/* jshint unused: true, undef: true, strict: true */\r\n\r\n( function( global, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /* globals define, module, window */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD - RequireJS\r\n    define( 'ev-emitter/ev-emitter',factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS - Browserify, Webpack\r\n    module.exports = factory();\r\n  } else {\r\n    // Browser globals\r\n    global.EvEmitter = factory();\r\n  }\r\n\r\n}( typeof window != 'undefined' ? window : this, function() {\r\n\r\n\r\n\r\nfunction EvEmitter() {}\r\n\r\nvar proto = EvEmitter.prototype;\r\n\r\nproto.on = function( eventName, listener ) {\r\n  if ( !eventName || !listener ) {\r\n    return;\r\n  }\r\n  // set events hash\r\n  var events = this._events = this._events || {};\r\n  // set listeners array\r\n  var listeners = events[ eventName ] = events[ eventName ] || [];\r\n  // only add once\r\n  if ( listeners.indexOf( listener ) == -1 ) {\r\n    listeners.push( listener );\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nproto.once = function( eventName, listener ) {\r\n  if ( !eventName || !listener ) {\r\n    return;\r\n  }\r\n  // add event\r\n  this.on( eventName, listener );\r\n  // set once flag\r\n  // set onceEvents hash\r\n  var onceEvents = this._onceEvents = this._onceEvents || {};\r\n  // set onceListeners object\r\n  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\r\n  // set flag\r\n  onceListeners[ listener ] = true;\r\n\r\n  return this;\r\n};\r\n\r\nproto.off = function( eventName, listener ) {\r\n  var listeners = this._events && this._events[ eventName ];\r\n  if ( !listeners || !listeners.length ) {\r\n    return;\r\n  }\r\n  var index = listeners.indexOf( listener );\r\n  if ( index != -1 ) {\r\n    listeners.splice( index, 1 );\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nproto.emitEvent = function( eventName, args ) {\r\n  var listeners = this._events && this._events[ eventName ];\r\n  if ( !listeners || !listeners.length ) {\r\n    return;\r\n  }\r\n  // copy over to avoid interference if .off() in listener\r\n  listeners = listeners.slice(0);\r\n  args = args || [];\r\n  // once stuff\r\n  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\r\n\r\n  for ( var i=0; i < listeners.length; i++ ) {\r\n    var listener = listeners[i]\r\n    var isOnce = onceListeners && onceListeners[ listener ];\r\n    if ( isOnce ) {\r\n      // remove listener\r\n      // remove before trigger to prevent recursion\r\n      this.off( eventName, listener );\r\n      // unset once flag\r\n      delete onceListeners[ listener ];\r\n    }\r\n    // trigger listener\r\n    listener.apply( this, args );\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nproto.allOff = function() {\r\n  delete this._events;\r\n  delete this._onceEvents;\r\n};\r\n\r\nreturn EvEmitter;\r\n\r\n}));\r\n\r\n/*!\r\n * getSize v2.0.2\r\n * measure size of elements\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, strict: true, undef: true, unused: true */\r\n/*global define: false, module: false, console: false */\r\n\r\n( function( window, factory ) {\r\n  'use strict';\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'get-size/get-size',[],function() {\r\n      return factory();\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory();\r\n  } else {\r\n    // browser global\r\n    window.getSize = factory();\r\n  }\r\n\r\n})( window, function factory() {\r\n'use strict';\r\n\r\n// -------------------------- helpers -------------------------- //\r\n\r\n// get a number from a string, not a percentage\r\nfunction getStyleSize( value ) {\r\n  var num = parseFloat( value );\r\n  // not a percent like '100%', and a number\r\n  var isValid = value.indexOf('%') == -1 && !isNaN( num );\r\n  return isValid && num;\r\n}\r\n\r\nfunction noop() {}\r\n\r\nvar logError = typeof console == 'undefined' ? noop :\r\n  function( message ) {\r\n    console.error( message );\r\n  };\r\n\r\n// -------------------------- measurements -------------------------- //\r\n\r\nvar measurements = [\r\n  'paddingLeft',\r\n  'paddingRight',\r\n  'paddingTop',\r\n  'paddingBottom',\r\n  'marginLeft',\r\n  'marginRight',\r\n  'marginTop',\r\n  'marginBottom',\r\n  'borderLeftWidth',\r\n  'borderRightWidth',\r\n  'borderTopWidth',\r\n  'borderBottomWidth'\r\n];\r\n\r\nvar measurementsLength = measurements.length;\r\n\r\nfunction getZeroSize() {\r\n  var size = {\r\n    width: 0,\r\n    height: 0,\r\n    innerWidth: 0,\r\n    innerHeight: 0,\r\n    outerWidth: 0,\r\n    outerHeight: 0\r\n  };\r\n  for ( var i=0; i < measurementsLength; i++ ) {\r\n    var measurement = measurements[i];\r\n    size[ measurement ] = 0;\r\n  }\r\n  return size;\r\n}\r\n\r\n// -------------------------- getStyle -------------------------- //\r\n\r\n/**\r\n * getStyle, get style of element, check for Firefox bug\r\n * https://bugzilla.mozilla.org/show_bug.cgi?id=548397\r\n */\r\nfunction getStyle( elem ) {\r\n  var style = getComputedStyle( elem );\r\n  if ( !style ) {\r\n    logError( 'Style returned ' + style +\r\n      '. Are you running this code in a hidden iframe on Firefox? ' +\r\n      'See http://bit.ly/getsizebug1' );\r\n  }\r\n  return style;\r\n}\r\n\r\n// -------------------------- setup -------------------------- //\r\n\r\nvar isSetup = false;\r\n\r\nvar isBoxSizeOuter;\r\n\r\n/**\r\n * setup\r\n * check isBoxSizerOuter\r\n * do on first getSize() rather than on page load for Firefox bug\r\n */\r\nfunction setup() {\r\n  // setup once\r\n  if ( isSetup ) {\r\n    return;\r\n  }\r\n  isSetup = true;\r\n\r\n  // -------------------------- box sizing -------------------------- //\r\n\r\n  /**\r\n   * WebKit measures the outer-width on style.width on border-box elems\r\n   * IE & Firefox<29 measures the inner-width\r\n   */\r\n  var div = document.createElement('div');\r\n  div.style.width = '200px';\r\n  div.style.padding = '1px 2px 3px 4px';\r\n  div.style.borderStyle = 'solid';\r\n  div.style.borderWidth = '1px 2px 3px 4px';\r\n  div.style.boxSizing = 'border-box';\r\n\r\n  var body = document.body || document.documentElement;\r\n  body.appendChild( div );\r\n  var style = getStyle( div );\r\n\r\n  getSize.isBoxSizeOuter = isBoxSizeOuter = getStyleSize( style.width ) == 200;\r\n  body.removeChild( div );\r\n\r\n}\r\n\r\n// -------------------------- getSize -------------------------- //\r\n\r\nfunction getSize( elem ) {\r\n  setup();\r\n\r\n  // use querySeletor if elem is string\r\n  if ( typeof elem == 'string' ) {\r\n    elem = document.querySelector( elem );\r\n  }\r\n\r\n  // do not proceed on non-objects\r\n  if ( !elem || typeof elem != 'object' || !elem.nodeType ) {\r\n    return;\r\n  }\r\n\r\n  var style = getStyle( elem );\r\n\r\n  // if hidden, everything is 0\r\n  if ( style.display == 'none' ) {\r\n    return getZeroSize();\r\n  }\r\n\r\n  var size = {};\r\n  size.width = elem.offsetWidth;\r\n  size.height = elem.offsetHeight;\r\n\r\n  var isBorderBox = size.isBorderBox = style.boxSizing == 'border-box';\r\n\r\n  // get all measurements\r\n  for ( var i=0; i < measurementsLength; i++ ) {\r\n    var measurement = measurements[i];\r\n    var value = style[ measurement ];\r\n    var num = parseFloat( value );\r\n    // any 'auto', 'medium' value will be 0\r\n    size[ measurement ] = !isNaN( num ) ? num : 0;\r\n  }\r\n\r\n  var paddingWidth = size.paddingLeft + size.paddingRight;\r\n  var paddingHeight = size.paddingTop + size.paddingBottom;\r\n  var marginWidth = size.marginLeft + size.marginRight;\r\n  var marginHeight = size.marginTop + size.marginBottom;\r\n  var borderWidth = size.borderLeftWidth + size.borderRightWidth;\r\n  var borderHeight = size.borderTopWidth + size.borderBottomWidth;\r\n\r\n  var isBorderBoxSizeOuter = isBorderBox && isBoxSizeOuter;\r\n\r\n  // overwrite width and height if we can get it from style\r\n  var styleWidth = getStyleSize( style.width );\r\n  if ( styleWidth !== false ) {\r\n    size.width = styleWidth +\r\n      // add padding and border unless it's already including it\r\n      ( isBorderBoxSizeOuter ? 0 : paddingWidth + borderWidth );\r\n  }\r\n\r\n  var styleHeight = getStyleSize( style.height );\r\n  if ( styleHeight !== false ) {\r\n    size.height = styleHeight +\r\n      // add padding and border unless it's already including it\r\n      ( isBorderBoxSizeOuter ? 0 : paddingHeight + borderHeight );\r\n  }\r\n\r\n  size.innerWidth = size.width - ( paddingWidth + borderWidth );\r\n  size.innerHeight = size.height - ( paddingHeight + borderHeight );\r\n\r\n  size.outerWidth = size.width + marginWidth;\r\n  size.outerHeight = size.height + marginHeight;\r\n\r\n  return size;\r\n}\r\n\r\nreturn getSize;\r\n\r\n});\r\n\r\n/**\r\n * matchesSelector v2.0.2\r\n * matchesSelector( element, '.selector' )\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, strict: true, undef: true, unused: true */\r\n\r\n( function( window, factory ) {\r\n  /*global define: false, module: false */\r\n  'use strict';\r\n  // universal module definition\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'desandro-matches-selector/matches-selector',factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory();\r\n  } else {\r\n    // browser global\r\n    window.matchesSelector = factory();\r\n  }\r\n\r\n}( window, function factory() {\r\n  'use strict';\r\n\r\n  var matchesMethod = ( function() {\r\n    var ElemProto = window.Element.prototype;\r\n    // check for the standard method name first\r\n    if ( ElemProto.matches ) {\r\n      return 'matches';\r\n    }\r\n    // check un-prefixed\r\n    if ( ElemProto.matchesSelector ) {\r\n      return 'matchesSelector';\r\n    }\r\n    // check vendor prefixes\r\n    var prefixes = [ 'webkit', 'moz', 'ms', 'o' ];\r\n\r\n    for ( var i=0; i < prefixes.length; i++ ) {\r\n      var prefix = prefixes[i];\r\n      var method = prefix + 'MatchesSelector';\r\n      if ( ElemProto[ method ] ) {\r\n        return method;\r\n      }\r\n    }\r\n  })();\r\n\r\n  return function matchesSelector( elem, selector ) {\r\n    return elem[ matchesMethod ]( selector );\r\n  };\r\n\r\n}));\r\n\r\n/**\r\n * Fizzy UI utils v2.0.7\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, undef: true, unused: true, strict: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /*globals define, module, require */\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'fizzy-ui-utils/utils',[\r\n      'desandro-matches-selector/matches-selector'\r\n    ], function( matchesSelector ) {\r\n      return factory( window, matchesSelector );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('desandro-matches-selector')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.fizzyUIUtils = factory(\r\n      window,\r\n      window.matchesSelector\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, matchesSelector ) {\r\n\r\n\r\n\r\nvar utils = {};\r\n\r\n// ----- extend ----- //\r\n\r\n// extends objects\r\nutils.extend = function( a, b ) {\r\n  for ( var prop in b ) {\r\n    a[ prop ] = b[ prop ];\r\n  }\r\n  return a;\r\n};\r\n\r\n// ----- modulo ----- //\r\n\r\nutils.modulo = function( num, div ) {\r\n  return ( ( num % div ) + div ) % div;\r\n};\r\n\r\n// ----- makeArray ----- //\r\n\r\nvar arraySlice = Array.prototype.slice;\r\n\r\n// turn element or nodeList into an array\r\nutils.makeArray = function( obj ) {\r\n  if ( Array.isArray( obj ) ) {\r\n    // use object if already an array\r\n    return obj;\r\n  }\r\n  // return empty array if undefined or null. #6\r\n  if ( obj === null || obj === undefined ) {\r\n    return [];\r\n  }\r\n\r\n  var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\r\n  if ( isArrayLike ) {\r\n    // convert nodeList to array\r\n    return arraySlice.call( obj );\r\n  }\r\n\r\n  // array of single index\r\n  return [ obj ];\r\n};\r\n\r\n// ----- removeFrom ----- //\r\n\r\nutils.removeFrom = function( ary, obj ) {\r\n  var index = ary.indexOf( obj );\r\n  if ( index != -1 ) {\r\n    ary.splice( index, 1 );\r\n  }\r\n};\r\n\r\n// ----- getParent ----- //\r\n\r\nutils.getParent = function( elem, selector ) {\r\n  while ( elem.parentNode && elem != document.body ) {\r\n    elem = elem.parentNode;\r\n    if ( matchesSelector( elem, selector ) ) {\r\n      return elem;\r\n    }\r\n  }\r\n};\r\n\r\n// ----- getQueryElement ----- //\r\n\r\n// use element as selector string\r\nutils.getQueryElement = function( elem ) {\r\n  if ( typeof elem == 'string' ) {\r\n    return document.querySelector( elem );\r\n  }\r\n  return elem;\r\n};\r\n\r\n// ----- handleEvent ----- //\r\n\r\n// enable .ontype to trigger from .addEventListener( elem, 'type' )\r\nutils.handleEvent = function( event ) {\r\n  var method = 'on' + event.type;\r\n  if ( this[ method ] ) {\r\n    this[ method ]( event );\r\n  }\r\n};\r\n\r\n// ----- filterFindElements ----- //\r\n\r\nutils.filterFindElements = function( elems, selector ) {\r\n  // make array of elems\r\n  elems = utils.makeArray( elems );\r\n  var ffElems = [];\r\n\r\n  elems.forEach( function( elem ) {\r\n    // check that elem is an actual element\r\n    if ( !( elem instanceof HTMLElement ) ) {\r\n      return;\r\n    }\r\n    // add elem if no selector\r\n    if ( !selector ) {\r\n      ffElems.push( elem );\r\n      return;\r\n    }\r\n    // filter & find items if we have a selector\r\n    // filter\r\n    if ( matchesSelector( elem, selector ) ) {\r\n      ffElems.push( elem );\r\n    }\r\n    // find children\r\n    var childElems = elem.querySelectorAll( selector );\r\n    // concat childElems to filterFound array\r\n    for ( var i=0; i < childElems.length; i++ ) {\r\n      ffElems.push( childElems[i] );\r\n    }\r\n  });\r\n\r\n  return ffElems;\r\n};\r\n\r\n// ----- debounceMethod ----- //\r\n\r\nutils.debounceMethod = function( _class, methodName, threshold ) {\r\n  threshold = threshold || 100;\r\n  // original method\r\n  var method = _class.prototype[ methodName ];\r\n  var timeoutName = methodName + 'Timeout';\r\n\r\n  _class.prototype[ methodName ] = function() {\r\n    var timeout = this[ timeoutName ];\r\n    clearTimeout( timeout );\r\n\r\n    var args = arguments;\r\n    var _this = this;\r\n    this[ timeoutName ] = setTimeout( function() {\r\n      method.apply( _this, args );\r\n      delete _this[ timeoutName ];\r\n    }, threshold );\r\n  };\r\n};\r\n\r\n// ----- docReady ----- //\r\n\r\nutils.docReady = function( callback ) {\r\n  var readyState = document.readyState;\r\n  if ( readyState == 'complete' || readyState == 'interactive' ) {\r\n    // do async to allow for other scripts to run. metafizzy/flickity#441\r\n    setTimeout( callback );\r\n  } else {\r\n    document.addEventListener( 'DOMContentLoaded', callback );\r\n  }\r\n};\r\n\r\n// ----- htmlInit ----- //\r\n\r\n// http://jamesroberts.name/blog/2010/02/22/string-functions-for-javascript-trim-to-camel-case-to-dashed-and-to-underscore/\r\nutils.toDashed = function( str ) {\r\n  return str.replace( /(.)([A-Z])/g, function( match, $1, $2 ) {\r\n    return $1 + '-' + $2;\r\n  }).toLowerCase();\r\n};\r\n\r\nvar console = window.console;\r\n/**\r\n * allow user to initialize classes via [data-namespace] or .js-namespace class\r\n * htmlInit( Widget, 'widgetName' )\r\n * options are parsed from data-namespace-options\r\n */\r\nutils.htmlInit = function( WidgetClass, namespace ) {\r\n  utils.docReady( function() {\r\n    var dashedNamespace = utils.toDashed( namespace );\r\n    var dataAttr = 'data-' + dashedNamespace;\r\n    var dataAttrElems = document.querySelectorAll( '[' + dataAttr + ']' );\r\n    var jsDashElems = document.querySelectorAll( '.js-' + dashedNamespace );\r\n    var elems = utils.makeArray( dataAttrElems )\r\n      .concat( utils.makeArray( jsDashElems ) );\r\n    var dataOptionsAttr = dataAttr + '-options';\r\n    var jQuery = window.jQuery;\r\n\r\n    elems.forEach( function( elem ) {\r\n      var attr = elem.getAttribute( dataAttr ) ||\r\n        elem.getAttribute( dataOptionsAttr );\r\n      var options;\r\n      try {\r\n        options = attr && JSON.parse( attr );\r\n      } catch ( error ) {\r\n        // log error, do not initialize\r\n        if ( console ) {\r\n          console.error( 'Error parsing ' + dataAttr + ' on ' + elem.className +\r\n          ': ' + error );\r\n        }\r\n        return;\r\n      }\r\n      // initialize\r\n      var instance = new WidgetClass( elem, options );\r\n      // make available via $().data('namespace')\r\n      if ( jQuery ) {\r\n        jQuery.data( elem, namespace, instance );\r\n      }\r\n    });\r\n\r\n  });\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn utils;\r\n\r\n}));\r\n\r\n// Flickity.Cell\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/cell',[\r\n      'get-size/get-size'\r\n    ], function( getSize ) {\r\n      return factory( window, getSize );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('get-size')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = window.Flickity || {};\r\n    window.Flickity.Cell = factory(\r\n      window,\r\n      window.getSize\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, getSize ) {\r\n\r\n\r\n\r\nfunction Cell( elem, parent ) {\r\n  this.element = elem;\r\n  this.parent = parent;\r\n\r\n  this.create();\r\n}\r\n\r\nvar proto = Cell.prototype;\r\n\r\nproto.create = function() {\r\n  this.element.style.position = 'absolute';\r\n  this.element.setAttribute( 'aria-selected', 'false' );\r\n  this.x = 0;\r\n  this.shift = 0;\r\n};\r\n\r\nproto.destroy = function() {\r\n  // reset style\r\n  this.element.style.position = '';\r\n  var side = this.parent.originSide;\r\n  this.element.removeAttribute('aria-selected');\r\n  this.element.style[ side ] = '';\r\n};\r\n\r\nproto.getSize = function() {\r\n  this.size = getSize( this.element );\r\n};\r\n\r\nproto.setPosition = function( x ) {\r\n  this.x = x;\r\n  this.updateTarget();\r\n  this.renderPosition( x );\r\n};\r\n\r\n// setDefaultTarget v1 method, backwards compatibility, remove in v3\r\nproto.updateTarget = proto.setDefaultTarget = function() {\r\n  var marginProperty = this.parent.originSide == 'left' ? 'marginLeft' : 'marginRight';\r\n  this.target = this.x + this.size[ marginProperty ] +\r\n    this.size.width * this.parent.cellAlign;\r\n};\r\n\r\nproto.renderPosition = function( x ) {\r\n  // render position of cell with in slider\r\n  var side = this.parent.originSide;\r\n  this.element.style[ side ] = this.parent.getPositionValue( x );\r\n};\r\n\r\n/**\r\n * @param {Integer} factor - 0, 1, or -1\r\n**/\r\nproto.wrapShift = function( shift ) {\r\n  this.shift = shift;\r\n  this.renderPosition( this.x + this.parent.slideableWidth * shift );\r\n};\r\n\r\nproto.remove = function() {\r\n  this.element.parentNode.removeChild( this.element );\r\n};\r\n\r\nreturn Cell;\r\n\r\n}));\r\n\r\n// slide\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/slide',factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory();\r\n  } else {\r\n    // browser global\r\n    window.Flickity = window.Flickity || {};\r\n    window.Flickity.Slide = factory();\r\n  }\r\n\r\n}( window, function factory() {\r\n'use strict';\r\n\r\nfunction Slide( parent ) {\r\n  this.parent = parent;\r\n  this.isOriginLeft = parent.originSide == 'left';\r\n  this.cells = [];\r\n  this.outerWidth = 0;\r\n  this.height = 0;\r\n}\r\n\r\nvar proto = Slide.prototype;\r\n\r\nproto.addCell = function( cell ) {\r\n  this.cells.push( cell );\r\n  this.outerWidth += cell.size.outerWidth;\r\n  this.height = Math.max( cell.size.outerHeight, this.height );\r\n  // first cell stuff\r\n  if ( this.cells.length == 1 ) {\r\n    this.x = cell.x; // x comes from first cell\r\n    var beginMargin = this.isOriginLeft ? 'marginLeft' : 'marginRight';\r\n    this.firstMargin = cell.size[ beginMargin ];\r\n  }\r\n};\r\n\r\nproto.updateTarget = function() {\r\n  var endMargin = this.isOriginLeft ? 'marginRight' : 'marginLeft';\r\n  var lastCell = this.getLastCell();\r\n  var lastMargin = lastCell ? lastCell.size[ endMargin ] : 0;\r\n  var slideWidth = this.outerWidth - ( this.firstMargin + lastMargin );\r\n  this.target = this.x + this.firstMargin + slideWidth * this.parent.cellAlign;\r\n};\r\n\r\nproto.getLastCell = function() {\r\n  return this.cells[ this.cells.length - 1 ];\r\n};\r\n\r\nproto.select = function() {\r\n  this.changeSelected( true );\r\n};\r\n\r\nproto.unselect = function() {\r\n  this.changeSelected( false );\r\n};\r\n\r\nproto.changeSelected = function( isSelected ) {\r\n  var classMethod = isSelected ? 'add' : 'remove';\r\n  this.cells.forEach( function( cell ) {\r\n    cell.element.classList[ classMethod ]('is-selected');\r\n    cell.element.setAttribute( 'aria-selected', isSelected.toString() );\r\n  });\r\n};\r\n\r\nproto.getCellElements = function() {\r\n  return this.cells.map( function( cell ) {\r\n    return cell.element;\r\n  });\r\n};\r\n\r\nreturn Slide;\r\n\r\n}));\r\n\r\n// animate\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/animate',[\r\n      'fizzy-ui-utils/utils'\r\n    ], function( utils ) {\r\n      return factory( window, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = window.Flickity || {};\r\n    window.Flickity.animatePrototype = factory(\r\n      window,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, utils ) {\r\n\r\n\r\n\r\n// -------------------------- requestAnimationFrame -------------------------- //\r\n\r\n// get rAF, prefixed, if present\r\nvar requestAnimationFrame = window.requestAnimationFrame ||\r\n  window.webkitRequestAnimationFrame;\r\n\r\n// fallback to setTimeout\r\nvar lastTime = 0;\r\nif ( !requestAnimationFrame )  {\r\n  requestAnimationFrame = function( callback ) {\r\n    var currTime = new Date().getTime();\r\n    var timeToCall = Math.max( 0, 16 - ( currTime - lastTime ) );\r\n    var id = setTimeout( callback, timeToCall );\r\n    lastTime = currTime + timeToCall;\r\n    return id;\r\n  };\r\n}\r\n\r\n// -------------------------- animate -------------------------- //\r\n\r\nvar proto = {};\r\n\r\nproto.startAnimation = function() {\r\n  if ( this.isAnimating ) {\r\n    return;\r\n  }\r\n\r\n  this.isAnimating = true;\r\n  this.restingFrames = 0;\r\n  this.animate();\r\n};\r\n\r\nproto.animate = function() {\r\n  this.applyDragForce();\r\n  this.applySelectedAttraction();\r\n\r\n  var previousX = this.x;\r\n\r\n  this.integratePhysics();\r\n  this.positionSlider();\r\n  this.settle( previousX );\r\n  // animate next frame\r\n  if ( this.isAnimating ) {\r\n    var _this = this;\r\n    requestAnimationFrame( function animateFrame() {\r\n      _this.animate();\r\n    });\r\n  }\r\n};\r\n\r\n\r\nvar transformProperty = ( function () {\r\n  var style = document.documentElement.style;\r\n  if ( typeof style.transform == 'string' ) {\r\n    return 'transform';\r\n  }\r\n  return 'WebkitTransform';\r\n})();\r\n\r\nproto.positionSlider = function() {\r\n  var x = this.x;\r\n  // wrap position around\r\n  if ( this.options.wrapAround && this.cells.length > 1 ) {\r\n    x = utils.modulo( x, this.slideableWidth );\r\n    x = x - this.slideableWidth;\r\n    this.shiftWrapCells( x );\r\n  }\r\n\r\n  x = x + this.cursorPosition;\r\n  // reverse if right-to-left and using transform\r\n  x = this.options.rightToLeft && transformProperty ? -x : x;\r\n  var value = this.getPositionValue( x );\r\n  // use 3D tranforms for hardware acceleration on iOS\r\n  // but use 2D when settled, for better font-rendering\r\n  this.slider.style[ transformProperty ] = this.isAnimating ?\r\n    'translate3d(' + value + ',0,0)' : 'translateX(' + value + ')';\r\n\r\n  // scroll event\r\n  var firstSlide = this.slides[0];\r\n  if ( firstSlide ) {\r\n    var positionX = -this.x - firstSlide.target;\r\n    var progress = positionX / this.slidesWidth;\r\n    this.dispatchEvent( 'scroll', null, [ progress, positionX ] );\r\n  }\r\n};\r\n\r\nproto.positionSliderAtSelected = function() {\r\n  if ( !this.cells.length ) {\r\n    return;\r\n  }\r\n  this.x = -this.selectedSlide.target;\r\n  this.velocity = 0; // stop wobble\r\n  this.positionSlider();\r\n};\r\n\r\nproto.getPositionValue = function( position ) {\r\n  if ( this.options.percentPosition ) {\r\n    // percent position, round to 2 digits, like 12.34%\r\n    return ( Math.round( ( position / this.size.innerWidth ) * 10000 ) * 0.01 )+ '%';\r\n  } else {\r\n    // pixel positioning\r\n    return Math.round( position ) + 'px';\r\n  }\r\n};\r\n\r\nproto.settle = function( previousX ) {\r\n  // keep track of frames where x hasn't moved\r\n  if ( !this.isPointerDown && Math.round( this.x * 100 ) == Math.round( previousX * 100 ) ) {\r\n    this.restingFrames++;\r\n  }\r\n  // stop animating if resting for 3 or more frames\r\n  if ( this.restingFrames > 2 ) {\r\n    this.isAnimating = false;\r\n    delete this.isFreeScrolling;\r\n    // render position with translateX when settled\r\n    this.positionSlider();\r\n    this.dispatchEvent( 'settle', null, [ this.selectedIndex ] );\r\n  }\r\n};\r\n\r\nproto.shiftWrapCells = function( x ) {\r\n  // shift before cells\r\n  var beforeGap = this.cursorPosition + x;\r\n  this._shiftCells( this.beforeShiftCells, beforeGap, -1 );\r\n  // shift after cells\r\n  var afterGap = this.size.innerWidth - ( x + this.slideableWidth + this.cursorPosition );\r\n  this._shiftCells( this.afterShiftCells, afterGap, 1 );\r\n};\r\n\r\nproto._shiftCells = function( cells, gap, shift ) {\r\n  for ( var i=0; i < cells.length; i++ ) {\r\n    var cell = cells[i];\r\n    var cellShift = gap > 0 ? shift : 0;\r\n    cell.wrapShift( cellShift );\r\n    gap -= cell.size.outerWidth;\r\n  }\r\n};\r\n\r\nproto._unshiftCells = function( cells ) {\r\n  if ( !cells || !cells.length ) {\r\n    return;\r\n  }\r\n  for ( var i=0; i < cells.length; i++ ) {\r\n    cells[i].wrapShift( 0 );\r\n  }\r\n};\r\n\r\n// -------------------------- physics -------------------------- //\r\n\r\nproto.integratePhysics = function() {\r\n  this.x += this.velocity;\r\n  this.velocity *= this.getFrictionFactor();\r\n};\r\n\r\nproto.applyForce = function( force ) {\r\n  this.velocity += force;\r\n};\r\n\r\nproto.getFrictionFactor = function() {\r\n  return 1 - this.options[ this.isFreeScrolling ? 'freeScrollFriction' : 'friction' ];\r\n};\r\n\r\nproto.getRestingPosition = function() {\r\n  // my thanks to Steven Wittens, who simplified this math greatly\r\n  return this.x + this.velocity / ( 1 - this.getFrictionFactor() );\r\n};\r\n\r\nproto.applyDragForce = function() {\r\n  if ( !this.isDraggable || !this.isPointerDown ) {\r\n    return;\r\n  }\r\n  // change the position to drag position by applying force\r\n  var dragVelocity = this.dragX - this.x;\r\n  var dragForce = dragVelocity - this.velocity;\r\n  this.applyForce( dragForce );\r\n};\r\n\r\nproto.applySelectedAttraction = function() {\r\n  // do not attract if pointer down or no slides\r\n  var dragDown = this.isDraggable && this.isPointerDown;\r\n  if ( dragDown || this.isFreeScrolling || !this.slides.length ) {\r\n    return;\r\n  }\r\n  var distance = this.selectedSlide.target * -1 - this.x;\r\n  var force = distance * this.options.selectedAttraction;\r\n  this.applyForce( force );\r\n};\r\n\r\nreturn proto;\r\n\r\n}));\r\n\r\n// Flickity main\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/flickity',[\r\n      'ev-emitter/ev-emitter',\r\n      'get-size/get-size',\r\n      'fizzy-ui-utils/utils',\r\n      './cell',\r\n      './slide',\r\n      './animate'\r\n    ], function( EvEmitter, getSize, utils, Cell, Slide, animatePrototype ) {\r\n      return factory( window, EvEmitter, getSize, utils, Cell, Slide, animatePrototype );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('ev-emitter'),\r\n      require('get-size'),\r\n      require('fizzy-ui-utils'),\r\n      require('./cell'),\r\n      require('./slide'),\r\n      require('./animate')\r\n    );\r\n  } else {\r\n    // browser global\r\n    var _Flickity = window.Flickity;\r\n\r\n    window.Flickity = factory(\r\n      window,\r\n      window.EvEmitter,\r\n      window.getSize,\r\n      window.fizzyUIUtils,\r\n      _Flickity.Cell,\r\n      _Flickity.Slide,\r\n      _Flickity.animatePrototype\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, EvEmitter, getSize,\r\n  utils, Cell, Slide, animatePrototype ) {\r\n\r\n\r\n\r\n// vars\r\nvar jQuery = window.jQuery;\r\nvar getComputedStyle = window.getComputedStyle;\r\nvar console = window.console;\r\n\r\nfunction moveElements( elems, toElem ) {\r\n  elems = utils.makeArray( elems );\r\n  while ( elems.length ) {\r\n    toElem.appendChild( elems.shift() );\r\n  }\r\n}\r\n\r\n// -------------------------- Flickity -------------------------- //\r\n\r\n// globally unique identifiers\r\nvar GUID = 0;\r\n// internal store of all Flickity intances\r\nvar instances = {};\r\n\r\nfunction Flickity( element, options ) {\r\n  var queryElement = utils.getQueryElement( element );\r\n  if ( !queryElement ) {\r\n    if ( console ) {\r\n      console.error( 'Bad element for Flickity: ' + ( queryElement || element ) );\r\n    }\r\n    return;\r\n  }\r\n  this.element = queryElement;\r\n  // do not initialize twice on same element\r\n  if ( this.element.flickityGUID ) {\r\n    var instance = instances[ this.element.flickityGUID ];\r\n    instance.option( options );\r\n    return instance;\r\n  }\r\n\r\n  // add jQuery\r\n  if ( jQuery ) {\r\n    this.$element = jQuery( this.element );\r\n  }\r\n  // options\r\n  this.options = utils.extend( {}, this.constructor.defaults );\r\n  this.option( options );\r\n\r\n  // kick things off\r\n  this._create();\r\n}\r\n\r\nFlickity.defaults = {\r\n  accessibility: true,\r\n  // adaptiveHeight: false,\r\n  cellAlign: 'center',\r\n  // cellSelector: undefined,\r\n  // contain: false,\r\n  freeScrollFriction: 0.075, // friction when free-scrolling\r\n  friction: 0.28, // friction when selecting\r\n  namespaceJQueryEvents: true,\r\n  // initialIndex: 0,\r\n  percentPosition: true,\r\n  resize: true,\r\n  selectedAttraction: 0.025,\r\n  setGallerySize: true\r\n  // watchCSS: false,\r\n  // wrapAround: false\r\n};\r\n\r\n// hash of methods triggered on _create()\r\nFlickity.createMethods = [];\r\n\r\nvar proto = Flickity.prototype;\r\n// inherit EventEmitter\r\nutils.extend( proto, EvEmitter.prototype );\r\n\r\nproto._create = function() {\r\n  // add id for Flickity.data\r\n  var id = this.guid = ++GUID;\r\n  this.element.flickityGUID = id; // expando\r\n  instances[ id ] = this; // associate via id\r\n  // initial properties\r\n  this.selectedIndex = 0;\r\n  // how many frames slider has been in same position\r\n  this.restingFrames = 0;\r\n  // initial physics properties\r\n  this.x = 0;\r\n  this.velocity = 0;\r\n  this.originSide = this.options.rightToLeft ? 'right' : 'left';\r\n  // create viewport & slider\r\n  this.viewport = document.createElement('div');\r\n  this.viewport.className = 'flickity-viewport';\r\n  this._createSlider();\r\n\r\n  if ( this.options.resize || this.options.watchCSS ) {\r\n    window.addEventListener( 'resize', this );\r\n  }\r\n\r\n  // add listeners from on option\r\n  for ( var eventName in this.options.on ) {\r\n    var listener = this.options.on[ eventName ];\r\n    this.on( eventName, listener );\r\n  }\r\n\r\n  Flickity.createMethods.forEach( function( method ) {\r\n    this[ method ]();\r\n  }, this );\r\n\r\n  if ( this.options.watchCSS ) {\r\n    this.watchCSS();\r\n  } else {\r\n    this.activate();\r\n  }\r\n\r\n};\r\n\r\n/**\r\n * set options\r\n * @param {Object} opts\r\n */\r\nproto.option = function( opts ) {\r\n  utils.extend( this.options, opts );\r\n};\r\n\r\nproto.activate = function() {\r\n  if ( this.isActive ) {\r\n    return;\r\n  }\r\n  this.isActive = true;\r\n  this.element.classList.add('flickity-enabled');\r\n  if ( this.options.rightToLeft ) {\r\n    this.element.classList.add('flickity-rtl');\r\n  }\r\n\r\n  this.getSize();\r\n  // move initial cell elements so they can be loaded as cells\r\n  var cellElems = this._filterFindCellElements( this.element.children );\r\n  moveElements( cellElems, this.slider );\r\n  this.viewport.appendChild( this.slider );\r\n  this.element.appendChild( this.viewport );\r\n  // get cells from children\r\n  this.reloadCells();\r\n\r\n  if ( this.options.accessibility ) {\r\n    // allow element to focusable\r\n    this.element.tabIndex = 0;\r\n    // listen for key presses\r\n    this.element.addEventListener( 'keydown', this );\r\n  }\r\n\r\n  this.emitEvent('activate');\r\n\r\n  var index;\r\n  var initialIndex = this.options.initialIndex;\r\n  if ( this.isInitActivated ) {\r\n    index = this.selectedIndex;\r\n  } else if ( initialIndex !== undefined ) {\r\n    index = this.cells[ initialIndex ] ? initialIndex : 0;\r\n  } else {\r\n    index = 0;\r\n  }\r\n  // select instantly\r\n  this.select( index, false, true );\r\n  // flag for initial activation, for using initialIndex\r\n  this.isInitActivated = true;\r\n  // ready event. #493\r\n  this.dispatchEvent('ready');\r\n};\r\n\r\n// slider positions the cells\r\nproto._createSlider = function() {\r\n  // slider element does all the positioning\r\n  var slider = document.createElement('div');\r\n  slider.className = 'flickity-slider';\r\n  slider.style[ this.originSide ] = 0;\r\n  this.slider = slider;\r\n};\r\n\r\nproto._filterFindCellElements = function( elems ) {\r\n  return utils.filterFindElements( elems, this.options.cellSelector );\r\n};\r\n\r\n// goes through all children\r\nproto.reloadCells = function() {\r\n  // collection of item elements\r\n  this.cells = this._makeCells( this.slider.children );\r\n  this.positionCells();\r\n  this._getWrapShiftCells();\r\n  this.setGallerySize();\r\n};\r\n\r\n/**\r\n * turn elements into Flickity.Cells\r\n * @param {Array or NodeList or HTMLElement} elems\r\n * @returns {Array} items - collection of new Flickity Cells\r\n */\r\nproto._makeCells = function( elems ) {\r\n  var cellElems = this._filterFindCellElements( elems );\r\n\r\n  // create new Flickity for collection\r\n  var cells = cellElems.map( function( cellElem ) {\r\n    return new Cell( cellElem, this );\r\n  }, this );\r\n\r\n  return cells;\r\n};\r\n\r\nproto.getLastCell = function() {\r\n  return this.cells[ this.cells.length - 1 ];\r\n};\r\n\r\nproto.getLastSlide = function() {\r\n  return this.slides[ this.slides.length - 1 ];\r\n};\r\n\r\n// positions all cells\r\nproto.positionCells = function() {\r\n  // size all cells\r\n  this._sizeCells( this.cells );\r\n  // position all cells\r\n  this._positionCells( 0 );\r\n};\r\n\r\n/**\r\n * position certain cells\r\n * @param {Integer} index - which cell to start with\r\n */\r\nproto._positionCells = function( index ) {\r\n  index = index || 0;\r\n  // also measure maxCellHeight\r\n  // start 0 if positioning all cells\r\n  this.maxCellHeight = index ? this.maxCellHeight || 0 : 0;\r\n  var cellX = 0;\r\n  // get cellX\r\n  if ( index > 0 ) {\r\n    var startCell = this.cells[ index - 1 ];\r\n    cellX = startCell.x + startCell.size.outerWidth;\r\n  }\r\n  var len = this.cells.length;\r\n  for ( var i=index; i < len; i++ ) {\r\n    var cell = this.cells[i];\r\n    cell.setPosition( cellX );\r\n    cellX += cell.size.outerWidth;\r\n    this.maxCellHeight = Math.max( cell.size.outerHeight, this.maxCellHeight );\r\n  }\r\n  // keep track of cellX for wrap-around\r\n  this.slideableWidth = cellX;\r\n  // slides\r\n  this.updateSlides();\r\n  // contain slides target\r\n  this._containSlides();\r\n  // update slidesWidth\r\n  this.slidesWidth = len ? this.getLastSlide().target - this.slides[0].target : 0;\r\n};\r\n\r\n/**\r\n * cell.getSize() on multiple cells\r\n * @param {Array} cells\r\n */\r\nproto._sizeCells = function( cells ) {\r\n  cells.forEach( function( cell ) {\r\n    cell.getSize();\r\n  });\r\n};\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nproto.updateSlides = function() {\r\n  this.slides = [];\r\n  if ( !this.cells.length ) {\r\n    return;\r\n  }\r\n\r\n  var slide = new Slide( this );\r\n  this.slides.push( slide );\r\n  var isOriginLeft = this.originSide == 'left';\r\n  var nextMargin = isOriginLeft ? 'marginRight' : 'marginLeft';\r\n\r\n  var canCellFit = this._getCanCellFit();\r\n\r\n  this.cells.forEach( function( cell, i ) {\r\n    // just add cell if first cell in slide\r\n    if ( !slide.cells.length ) {\r\n      slide.addCell( cell );\r\n      return;\r\n    }\r\n\r\n    var slideWidth = ( slide.outerWidth - slide.firstMargin ) +\r\n      ( cell.size.outerWidth - cell.size[ nextMargin ] );\r\n\r\n    if ( canCellFit.call( this, i, slideWidth ) ) {\r\n      slide.addCell( cell );\r\n    } else {\r\n      // doesn't fit, new slide\r\n      slide.updateTarget();\r\n\r\n      slide = new Slide( this );\r\n      this.slides.push( slide );\r\n      slide.addCell( cell );\r\n    }\r\n  }, this );\r\n  // last slide\r\n  slide.updateTarget();\r\n  // update .selectedSlide\r\n  this.updateSelectedSlide();\r\n};\r\n\r\nproto._getCanCellFit = function() {\r\n  var groupCells = this.options.groupCells;\r\n  if ( !groupCells ) {\r\n    return function() {\r\n      return false;\r\n    };\r\n  } else if ( typeof groupCells == 'number' ) {\r\n    // group by number. 3 -> [0,1,2], [3,4,5], ...\r\n    var number = parseInt( groupCells, 10 );\r\n    return function( i ) {\r\n      return ( i % number ) !== 0;\r\n    };\r\n  }\r\n  // default, group by width of slide\r\n  // parse '75%\r\n  var percentMatch = typeof groupCells == 'string' &&\r\n    groupCells.match(/^(\\d+)%$/);\r\n  var percent = percentMatch ? parseInt( percentMatch[1], 10 ) / 100 : 1;\r\n  return function( i, slideWidth ) {\r\n    return slideWidth <= ( this.size.innerWidth + 1 ) * percent;\r\n  };\r\n};\r\n\r\n// alias _init for jQuery plugin .flickity()\r\nproto._init =\r\nproto.reposition = function() {\r\n  this.positionCells();\r\n  this.positionSliderAtSelected();\r\n};\r\n\r\nproto.getSize = function() {\r\n  this.size = getSize( this.element );\r\n  this.setCellAlign();\r\n  this.cursorPosition = this.size.innerWidth * this.cellAlign;\r\n};\r\n\r\nvar cellAlignShorthands = {\r\n  // cell align, then based on origin side\r\n  center: {\r\n    left: 0.5,\r\n    right: 0.5\r\n  },\r\n  left: {\r\n    left: 0,\r\n    right: 1\r\n  },\r\n  right: {\r\n    right: 0,\r\n    left: 1\r\n  }\r\n};\r\n\r\nproto.setCellAlign = function() {\r\n  var shorthand = cellAlignShorthands[ this.options.cellAlign ];\r\n  this.cellAlign = shorthand ? shorthand[ this.originSide ] : this.options.cellAlign;\r\n};\r\n\r\nproto.setGallerySize = function() {\r\n  if ( this.options.setGallerySize ) {\r\n    var height = this.options.adaptiveHeight && this.selectedSlide ?\r\n      this.selectedSlide.height : this.maxCellHeight;\r\n    this.viewport.style.height = height + 'px';\r\n  }\r\n};\r\n\r\nproto._getWrapShiftCells = function() {\r\n  // only for wrap-around\r\n  if ( !this.options.wrapAround ) {\r\n    return;\r\n  }\r\n  // unshift previous cells\r\n  this._unshiftCells( this.beforeShiftCells );\r\n  this._unshiftCells( this.afterShiftCells );\r\n  // get before cells\r\n  // initial gap\r\n  var gapX = this.cursorPosition;\r\n  var cellIndex = this.cells.length - 1;\r\n  this.beforeShiftCells = this._getGapCells( gapX, cellIndex, -1 );\r\n  // get after cells\r\n  // ending gap between last cell and end of gallery viewport\r\n  gapX = this.size.innerWidth - this.cursorPosition;\r\n  // start cloning at first cell, working forwards\r\n  this.afterShiftCells = this._getGapCells( gapX, 0, 1 );\r\n};\r\n\r\nproto._getGapCells = function( gapX, cellIndex, increment ) {\r\n  // keep adding cells until the cover the initial gap\r\n  var cells = [];\r\n  while ( gapX > 0 ) {\r\n    var cell = this.cells[ cellIndex ];\r\n    if ( !cell ) {\r\n      break;\r\n    }\r\n    cells.push( cell );\r\n    cellIndex += increment;\r\n    gapX -= cell.size.outerWidth;\r\n  }\r\n  return cells;\r\n};\r\n\r\n// ----- contain ----- //\r\n\r\n// contain cell targets so no excess sliding\r\nproto._containSlides = function() {\r\n  if ( !this.options.contain || this.options.wrapAround || !this.cells.length ) {\r\n    return;\r\n  }\r\n  var isRightToLeft = this.options.rightToLeft;\r\n  var beginMargin = isRightToLeft ? 'marginRight' : 'marginLeft';\r\n  var endMargin = isRightToLeft ? 'marginLeft' : 'marginRight';\r\n  var contentWidth = this.slideableWidth - this.getLastCell().size[ endMargin ];\r\n  // content is less than gallery size\r\n  var isContentSmaller = contentWidth < this.size.innerWidth;\r\n  // bounds\r\n  var beginBound = this.cursorPosition + this.cells[0].size[ beginMargin ];\r\n  var endBound = contentWidth - this.size.innerWidth * ( 1 - this.cellAlign );\r\n  // contain each cell target\r\n  this.slides.forEach( function( slide ) {\r\n    if ( isContentSmaller ) {\r\n      // all cells fit inside gallery\r\n      slide.target = contentWidth * this.cellAlign;\r\n    } else {\r\n      // contain to bounds\r\n      slide.target = Math.max( slide.target, beginBound );\r\n      slide.target = Math.min( slide.target, endBound );\r\n    }\r\n  }, this );\r\n};\r\n\r\n// -----  ----- //\r\n\r\n/**\r\n * emits events via eventEmitter and jQuery events\r\n * @param {String} type - name of event\r\n * @param {Event} event - original event\r\n * @param {Array} args - extra arguments\r\n */\r\nproto.dispatchEvent = function( type, event, args ) {\r\n  var emitArgs = event ? [ event ].concat( args ) : args;\r\n  this.emitEvent( type, emitArgs );\r\n\r\n  if ( jQuery && this.$element ) {\r\n    // default trigger with type if no event\r\n    type += this.options.namespaceJQueryEvents ? '.flickity' : '';\r\n    var $event = type;\r\n    if ( event ) {\r\n      // create jQuery event\r\n      var jQEvent = jQuery.Event( event );\r\n      jQEvent.type = type;\r\n      $event = jQEvent;\r\n    }\r\n    this.$element.trigger( $event, args );\r\n  }\r\n};\r\n\r\n// -------------------------- select -------------------------- //\r\n\r\n/**\r\n * @param {Integer} index - index of the slide\r\n * @param {Boolean} isWrap - will wrap-around to last/first if at the end\r\n * @param {Boolean} isInstant - will immediately set position at selected cell\r\n */\r\nproto.select = function( index, isWrap, isInstant ) {\r\n  if ( !this.isActive ) {\r\n    return;\r\n  }\r\n  index = parseInt( index, 10 );\r\n  this._wrapSelect( index );\r\n\r\n  if ( this.options.wrapAround || isWrap ) {\r\n    index = utils.modulo( index, this.slides.length );\r\n  }\r\n  // bail if invalid index\r\n  if ( !this.slides[ index ] ) {\r\n    return;\r\n  }\r\n  var prevIndex = this.selectedIndex;\r\n  this.selectedIndex = index;\r\n  this.updateSelectedSlide();\r\n  if ( isInstant ) {\r\n    this.positionSliderAtSelected();\r\n  } else {\r\n    this.startAnimation();\r\n  }\r\n  if ( this.options.adaptiveHeight ) {\r\n    this.setGallerySize();\r\n  }\r\n  // events\r\n  this.dispatchEvent( 'select', null, [ index ] );\r\n  // change event if new index\r\n  if ( index != prevIndex ) {\r\n    this.dispatchEvent( 'change', null, [ index ] );\r\n  }\r\n  // old v1 event name, remove in v3\r\n  this.dispatchEvent('cellSelect');\r\n};\r\n\r\n// wraps position for wrapAround, to move to closest slide. #113\r\nproto._wrapSelect = function( index ) {\r\n  var len = this.slides.length;\r\n  var isWrapping = this.options.wrapAround && len > 1;\r\n  if ( !isWrapping ) {\r\n    return index;\r\n  }\r\n  var wrapIndex = utils.modulo( index, len );\r\n  // go to shortest\r\n  var delta = Math.abs( wrapIndex - this.selectedIndex );\r\n  var backWrapDelta = Math.abs( ( wrapIndex + len ) - this.selectedIndex );\r\n  var forewardWrapDelta = Math.abs( ( wrapIndex - len ) - this.selectedIndex );\r\n  if ( !this.isDragSelect && backWrapDelta < delta ) {\r\n    index += len;\r\n  } else if ( !this.isDragSelect && forewardWrapDelta < delta ) {\r\n    index -= len;\r\n  }\r\n  // wrap position so slider is within normal area\r\n  if ( index < 0 ) {\r\n    this.x -= this.slideableWidth;\r\n  } else if ( index >= len ) {\r\n    this.x += this.slideableWidth;\r\n  }\r\n};\r\n\r\nproto.previous = function( isWrap, isInstant ) {\r\n  this.select( this.selectedIndex - 1, isWrap, isInstant );\r\n};\r\n\r\nproto.next = function( isWrap, isInstant ) {\r\n  this.select( this.selectedIndex + 1, isWrap, isInstant );\r\n};\r\n\r\nproto.updateSelectedSlide = function() {\r\n  var slide = this.slides[ this.selectedIndex ];\r\n  // selectedIndex could be outside of slides, if triggered before resize()\r\n  if ( !slide ) {\r\n    return;\r\n  }\r\n  // unselect previous selected slide\r\n  this.unselectSelectedSlide();\r\n  // update new selected slide\r\n  this.selectedSlide = slide;\r\n  slide.select();\r\n  this.selectedCells = slide.cells;\r\n  this.selectedElements = slide.getCellElements();\r\n  // HACK: selectedCell & selectedElement is first cell in slide, backwards compatibility\r\n  // Remove in v3?\r\n  this.selectedCell = slide.cells[0];\r\n  this.selectedElement = this.selectedElements[0];\r\n};\r\n\r\nproto.unselectSelectedSlide = function() {\r\n  if ( this.selectedSlide ) {\r\n    this.selectedSlide.unselect();\r\n  }\r\n};\r\n\r\n/**\r\n * select slide from number or cell element\r\n * @param {Element or Number} elem\r\n */\r\nproto.selectCell = function( value, isWrap, isInstant ) {\r\n  // get cell\r\n  var cell = this.queryCell( value );\r\n  if ( !cell ) {\r\n    return;\r\n  }\r\n\r\n  var index = this.getCellSlideIndex( cell );\r\n  this.select( index, isWrap, isInstant );\r\n};\r\n\r\nproto.getCellSlideIndex = function( cell ) {\r\n  // get index of slides that has cell\r\n  for ( var i=0; i < this.slides.length; i++ ) {\r\n    var slide = this.slides[i];\r\n    var index = slide.cells.indexOf( cell );\r\n    if ( index != -1 ) {\r\n      return i;\r\n    }\r\n  }\r\n};\r\n\r\n// -------------------------- get cells -------------------------- //\r\n\r\n/**\r\n * get Flickity.Cell, given an Element\r\n * @param {Element} elem\r\n * @returns {Flickity.Cell} item\r\n */\r\nproto.getCell = function( elem ) {\r\n  // loop through cells to get the one that matches\r\n  for ( var i=0; i < this.cells.length; i++ ) {\r\n    var cell = this.cells[i];\r\n    if ( cell.element == elem ) {\r\n      return cell;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * get collection of Flickity.Cells, given Elements\r\n * @param {Element, Array, NodeList} elems\r\n * @returns {Array} cells - Flickity.Cells\r\n */\r\nproto.getCells = function( elems ) {\r\n  elems = utils.makeArray( elems );\r\n  var cells = [];\r\n  elems.forEach( function( elem ) {\r\n    var cell = this.getCell( elem );\r\n    if ( cell ) {\r\n      cells.push( cell );\r\n    }\r\n  }, this );\r\n  return cells;\r\n};\r\n\r\n/**\r\n * get cell elements\r\n * @returns {Array} cellElems\r\n */\r\nproto.getCellElements = function() {\r\n  return this.cells.map( function( cell ) {\r\n    return cell.element;\r\n  });\r\n};\r\n\r\n/**\r\n * get parent cell from an element\r\n * @param {Element} elem\r\n * @returns {Flickit.Cell} cell\r\n */\r\nproto.getParentCell = function( elem ) {\r\n  // first check if elem is cell\r\n  var cell = this.getCell( elem );\r\n  if ( cell ) {\r\n    return cell;\r\n  }\r\n  // try to get parent cell elem\r\n  elem = utils.getParent( elem, '.flickity-slider > *' );\r\n  return this.getCell( elem );\r\n};\r\n\r\n/**\r\n * get cells adjacent to a slide\r\n * @param {Integer} adjCount - number of adjacent slides\r\n * @param {Integer} index - index of slide to start\r\n * @returns {Array} cells - array of Flickity.Cells\r\n */\r\nproto.getAdjacentCellElements = function( adjCount, index ) {\r\n  if ( !adjCount ) {\r\n    return this.selectedSlide.getCellElements();\r\n  }\r\n  index = index === undefined ? this.selectedIndex : index;\r\n\r\n  var len = this.slides.length;\r\n  if ( 1 + ( adjCount * 2 ) >= len ) {\r\n    return this.getCellElements();\r\n  }\r\n\r\n  var cellElems = [];\r\n  for ( var i = index - adjCount; i <= index + adjCount ; i++ ) {\r\n    var slideIndex = this.options.wrapAround ? utils.modulo( i, len ) : i;\r\n    var slide = this.slides[ slideIndex ];\r\n    if ( slide ) {\r\n      cellElems = cellElems.concat( slide.getCellElements() );\r\n    }\r\n  }\r\n  return cellElems;\r\n};\r\n\r\n/**\r\n * select slide from number or cell element\r\n * @param {Element, Selector String, or Number} selector\r\n */\r\nproto.queryCell = function( selector ) {\r\n  if ( typeof selector == 'number' ) {\r\n    // use number as index\r\n    return this.cells[ selector ];\r\n  }\r\n  if ( typeof selector == 'string' ) {\r\n    // use string as selector, get element\r\n    selector = this.element.querySelector( selector );\r\n  }\r\n  // get cell from element\r\n  return this.getCell( selector );\r\n};\r\n\r\n// -------------------------- events -------------------------- //\r\n\r\nproto.uiChange = function() {\r\n  this.emitEvent('uiChange');\r\n};\r\n\r\nproto.childUIPointerDown = function( event ) {\r\n  this.emitEvent( 'childUIPointerDown', [ event ] );\r\n};\r\n\r\n// ----- resize ----- //\r\n\r\nproto.onresize = function() {\r\n  this.watchCSS();\r\n  this.resize();\r\n};\r\n\r\nutils.debounceMethod( Flickity, 'onresize', 150 );\r\n\r\nproto.resize = function() {\r\n  if ( !this.isActive ) {\r\n    return;\r\n  }\r\n  this.getSize();\r\n  // wrap values\r\n  if ( this.options.wrapAround ) {\r\n    this.x = utils.modulo( this.x, this.slideableWidth );\r\n  }\r\n  this.positionCells();\r\n  this._getWrapShiftCells();\r\n  this.setGallerySize();\r\n  this.emitEvent('resize');\r\n  // update selected index for group slides, instant\r\n  // TODO: position can be lost between groups of various numbers\r\n  var selectedElement = this.selectedElements && this.selectedElements[0];\r\n  this.selectCell( selectedElement, false, true );\r\n};\r\n\r\n// watches the :after property, activates/deactivates\r\nproto.watchCSS = function() {\r\n  var watchOption = this.options.watchCSS;\r\n  if ( !watchOption ) {\r\n    return;\r\n  }\r\n\r\n  var afterContent = getComputedStyle( this.element, ':after' ).content;\r\n  // activate if :after { content: 'flickity' }\r\n  if ( afterContent.indexOf('flickity') != -1 ) {\r\n    this.activate();\r\n  } else {\r\n    this.deactivate();\r\n  }\r\n};\r\n\r\n// ----- keydown ----- //\r\n\r\n// go previous/next if left/right keys pressed\r\nproto.onkeydown = function( event ) {\r\n  // only work if element is in focus\r\n  var isNotFocused = document.activeElement && document.activeElement != this.element;\r\n  if ( !this.options.accessibility ||isNotFocused ) {\r\n    return;\r\n  }\r\n\r\n  var handler = Flickity.keyboardHandlers[ event.keyCode ];\r\n  if ( handler ) {\r\n    handler.call( this );\r\n  }\r\n};\r\n\r\nFlickity.keyboardHandlers = {\r\n  // left arrow\r\n  37: function() {\r\n    var leftMethod = this.options.rightToLeft ? 'next' : 'previous';\r\n    this.uiChange();\r\n    this[ leftMethod ]();\r\n  },\r\n  // right arrow\r\n  39: function() {\r\n    var rightMethod = this.options.rightToLeft ? 'previous' : 'next';\r\n    this.uiChange();\r\n    this[ rightMethod ]();\r\n  },\r\n};\r\n\r\n// ----- focus ----- //\r\n\r\nproto.focus = function() {\r\n  var prevScrollY = window.pageYOffset;\r\n  this.element.focus();\r\n  // hack to fix scroll jump after focus, #76\r\n  if ( window.pageYOffset != prevScrollY ) {\r\n    window.scrollTo( window.pageXOffset, prevScrollY );\r\n  }\r\n};\r\n\r\n// -------------------------- destroy -------------------------- //\r\n\r\n// deactivate all Flickity functionality, but keep stuff available\r\nproto.deactivate = function() {\r\n  if ( !this.isActive ) {\r\n    return;\r\n  }\r\n  this.element.classList.remove('flickity-enabled');\r\n  this.element.classList.remove('flickity-rtl');\r\n  this.unselectSelectedSlide();\r\n  // destroy cells\r\n  this.cells.forEach( function( cell ) {\r\n    cell.destroy();\r\n  });\r\n  this.element.removeChild( this.viewport );\r\n  // move child elements back into element\r\n  moveElements( this.slider.children, this.element );\r\n  if ( this.options.accessibility ) {\r\n    this.element.removeAttribute('tabIndex');\r\n    this.element.removeEventListener( 'keydown', this );\r\n  }\r\n  // set flags\r\n  this.isActive = false;\r\n  this.emitEvent('deactivate');\r\n};\r\n\r\nproto.destroy = function() {\r\n  this.deactivate();\r\n  window.removeEventListener( 'resize', this );\r\n  this.emitEvent('destroy');\r\n  if ( jQuery && this.$element ) {\r\n    jQuery.removeData( this.element, 'flickity' );\r\n  }\r\n  delete this.element.flickityGUID;\r\n  delete instances[ this.guid ];\r\n};\r\n\r\n// -------------------------- prototype -------------------------- //\r\n\r\nutils.extend( proto, animatePrototype );\r\n\r\n// -------------------------- extras -------------------------- //\r\n\r\n/**\r\n * get Flickity instance from element\r\n * @param {Element} elem\r\n * @returns {Flickity}\r\n */\r\nFlickity.data = function( elem ) {\r\n  elem = utils.getQueryElement( elem );\r\n  var id = elem && elem.flickityGUID;\r\n  return id && instances[ id ];\r\n};\r\n\r\nutils.htmlInit( Flickity, 'flickity' );\r\n\r\nif ( jQuery && jQuery.bridget ) {\r\n  jQuery.bridget( 'flickity', Flickity );\r\n}\r\n\r\n// set internal jQuery, for Webpack + jQuery v3, #478\r\nFlickity.setJQuery = function( jq ) {\r\n  jQuery = jq;\r\n};\r\n\r\nFlickity.Cell = Cell;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n/*!\r\n * Unipointer v2.2.1\r\n * base class for doing one thing with pointer event\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, undef: true, unused: true, strict: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /*global define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'unipointer/unipointer',[\r\n      'ev-emitter/ev-emitter'\r\n    ], function( EvEmitter ) {\r\n      return factory( window, EvEmitter );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('ev-emitter')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Unipointer = factory(\r\n      window,\r\n      window.EvEmitter\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, EvEmitter ) {\r\n\r\n\r\n\r\nfunction noop() {}\r\n\r\nfunction Unipointer() {}\r\n\r\n// inherit EvEmitter\r\nvar proto = Unipointer.prototype = Object.create( EvEmitter.prototype );\r\n\r\nproto.bindStartEvent = function( elem ) {\r\n  this._bindStartEvent( elem, true );\r\n};\r\n\r\nproto.unbindStartEvent = function( elem ) {\r\n  this._bindStartEvent( elem, false );\r\n};\r\n\r\n/**\r\n * works as unbinder, as you can ._bindStart( false ) to unbind\r\n * @param {Boolean} isBind - will unbind if falsey\r\n */\r\nproto._bindStartEvent = function( elem, isBind ) {\r\n  // munge isBind, default to true\r\n  isBind = isBind === undefined ? true : !!isBind;\r\n  var bindMethod = isBind ? 'addEventListener' : 'removeEventListener';\r\n\r\n  if ( window.PointerEvent ) {\r\n    // Pointer Events. Chrome 55, IE11, Edge 14\r\n    elem[ bindMethod ]( 'pointerdown', this );\r\n  } else {\r\n    // listen for both, for devices like Chrome Pixel\r\n    elem[ bindMethod ]( 'mousedown', this );\r\n    elem[ bindMethod ]( 'touchstart', this );\r\n  }\r\n};\r\n\r\n// trigger handler methods for events\r\nproto.handleEvent = function( event ) {\r\n  var method = 'on' + event.type;\r\n  if ( this[ method ] ) {\r\n    this[ method ]( event );\r\n  }\r\n};\r\n\r\n// returns the touch that we're keeping track of\r\nproto.getTouch = function( touches ) {\r\n  for ( var i=0; i < touches.length; i++ ) {\r\n    var touch = touches[i];\r\n    if ( touch.identifier == this.pointerIdentifier ) {\r\n      return touch;\r\n    }\r\n  }\r\n};\r\n\r\n// ----- start event ----- //\r\n\r\nproto.onmousedown = function( event ) {\r\n  // dismiss clicks from right or middle buttons\r\n  var button = event.button;\r\n  if ( button && ( button !== 0 && button !== 1 ) ) {\r\n    return;\r\n  }\r\n  this._pointerDown( event, event );\r\n};\r\n\r\nproto.ontouchstart = function( event ) {\r\n  this._pointerDown( event, event.changedTouches[0] );\r\n};\r\n\r\nproto.onpointerdown = function( event ) {\r\n  this._pointerDown( event, event );\r\n};\r\n\r\n/**\r\n * pointer start\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto._pointerDown = function( event, pointer ) {\r\n  // dismiss right click and other pointers\r\n  // button = 0 is okay, 1-4 not\r\n  if ( event.button || this.isPointerDown ) {\r\n    return;\r\n  }\r\n\r\n  this.isPointerDown = true;\r\n  // save pointer identifier to match up touch events\r\n  this.pointerIdentifier = pointer.pointerId !== undefined ?\r\n    // pointerId for pointer events, touch.indentifier for touch events\r\n    pointer.pointerId : pointer.identifier;\r\n\r\n  this.pointerDown( event, pointer );\r\n};\r\n\r\nproto.pointerDown = function( event, pointer ) {\r\n  this._bindPostStartEvents( event );\r\n  this.emitEvent( 'pointerDown', [ event, pointer ] );\r\n};\r\n\r\n// hash of events to be bound after start event\r\nvar postStartEvents = {\r\n  mousedown: [ 'mousemove', 'mouseup' ],\r\n  touchstart: [ 'touchmove', 'touchend', 'touchcancel' ],\r\n  pointerdown: [ 'pointermove', 'pointerup', 'pointercancel' ],\r\n};\r\n\r\nproto._bindPostStartEvents = function( event ) {\r\n  if ( !event ) {\r\n    return;\r\n  }\r\n  // get proper events to match start event\r\n  var events = postStartEvents[ event.type ];\r\n  // bind events to node\r\n  events.forEach( function( eventName ) {\r\n    window.addEventListener( eventName, this );\r\n  }, this );\r\n  // save these arguments\r\n  this._boundPointerEvents = events;\r\n};\r\n\r\nproto._unbindPostStartEvents = function() {\r\n  // check for _boundEvents, in case dragEnd triggered twice (old IE8 bug)\r\n  if ( !this._boundPointerEvents ) {\r\n    return;\r\n  }\r\n  this._boundPointerEvents.forEach( function( eventName ) {\r\n    window.removeEventListener( eventName, this );\r\n  }, this );\r\n\r\n  delete this._boundPointerEvents;\r\n};\r\n\r\n// ----- move event ----- //\r\n\r\nproto.onmousemove = function( event ) {\r\n  this._pointerMove( event, event );\r\n};\r\n\r\nproto.onpointermove = function( event ) {\r\n  if ( event.pointerId == this.pointerIdentifier ) {\r\n    this._pointerMove( event, event );\r\n  }\r\n};\r\n\r\nproto.ontouchmove = function( event ) {\r\n  var touch = this.getTouch( event.changedTouches );\r\n  if ( touch ) {\r\n    this._pointerMove( event, touch );\r\n  }\r\n};\r\n\r\n/**\r\n * pointer move\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n * @private\r\n */\r\nproto._pointerMove = function( event, pointer ) {\r\n  this.pointerMove( event, pointer );\r\n};\r\n\r\n// public\r\nproto.pointerMove = function( event, pointer ) {\r\n  this.emitEvent( 'pointerMove', [ event, pointer ] );\r\n};\r\n\r\n// ----- end event ----- //\r\n\r\n\r\nproto.onmouseup = function( event ) {\r\n  this._pointerUp( event, event );\r\n};\r\n\r\nproto.onpointerup = function( event ) {\r\n  if ( event.pointerId == this.pointerIdentifier ) {\r\n    this._pointerUp( event, event );\r\n  }\r\n};\r\n\r\nproto.ontouchend = function( event ) {\r\n  var touch = this.getTouch( event.changedTouches );\r\n  if ( touch ) {\r\n    this._pointerUp( event, touch );\r\n  }\r\n};\r\n\r\n/**\r\n * pointer up\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n * @private\r\n */\r\nproto._pointerUp = function( event, pointer ) {\r\n  this._pointerDone();\r\n  this.pointerUp( event, pointer );\r\n};\r\n\r\n// public\r\nproto.pointerUp = function( event, pointer ) {\r\n  this.emitEvent( 'pointerUp', [ event, pointer ] );\r\n};\r\n\r\n// ----- pointer done ----- //\r\n\r\n// triggered on pointer up & pointer cancel\r\nproto._pointerDone = function() {\r\n  // reset properties\r\n  this.isPointerDown = false;\r\n  delete this.pointerIdentifier;\r\n  // remove events\r\n  this._unbindPostStartEvents();\r\n  this.pointerDone();\r\n};\r\n\r\nproto.pointerDone = noop;\r\n\r\n// ----- pointer cancel ----- //\r\n\r\nproto.onpointercancel = function( event ) {\r\n  if ( event.pointerId == this.pointerIdentifier ) {\r\n    this._pointerCancel( event, event );\r\n  }\r\n};\r\n\r\nproto.ontouchcancel = function( event ) {\r\n  var touch = this.getTouch( event.changedTouches );\r\n  if ( touch ) {\r\n    this._pointerCancel( event, touch );\r\n  }\r\n};\r\n\r\n/**\r\n * pointer cancel\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n * @private\r\n */\r\nproto._pointerCancel = function( event, pointer ) {\r\n  this._pointerDone();\r\n  this.pointerCancel( event, pointer );\r\n};\r\n\r\n// public\r\nproto.pointerCancel = function( event, pointer ) {\r\n  this.emitEvent( 'pointerCancel', [ event, pointer ] );\r\n};\r\n\r\n// -----  ----- //\r\n\r\n// utility function for getting x/y coords from event\r\nUnipointer.getPointerPoint = function( pointer ) {\r\n  return {\r\n    x: pointer.pageX,\r\n    y: pointer.pageY\r\n  };\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn Unipointer;\r\n\r\n}));\r\n\r\n/*!\r\n * Unidragger v2.2.3\r\n * Draggable base class\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, unused: true, undef: true, strict: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /*globals define, module, require */\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'unidragger/unidragger',[\r\n      'unipointer/unipointer'\r\n    ], function( Unipointer ) {\r\n      return factory( window, Unipointer );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('unipointer')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Unidragger = factory(\r\n      window,\r\n      window.Unipointer\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Unipointer ) {\r\n\r\n\r\n\r\n// -------------------------- Unidragger -------------------------- //\r\n\r\nfunction Unidragger() {}\r\n\r\n// inherit Unipointer & EvEmitter\r\nvar proto = Unidragger.prototype = Object.create( Unipointer.prototype );\r\n\r\n// ----- bind start ----- //\r\n\r\nproto.bindHandles = function() {\r\n  this._bindHandles( true );\r\n};\r\n\r\nproto.unbindHandles = function() {\r\n  this._bindHandles( false );\r\n};\r\n\r\n/**\r\n * works as unbinder, as you can .bindHandles( false ) to unbind\r\n * @param {Boolean} isBind - will unbind if falsey\r\n */\r\nproto._bindHandles = function( isBind ) {\r\n  // munge isBind, default to true\r\n  isBind = isBind === undefined ? true : !!isBind;\r\n  // bind each handle\r\n  var bindMethod = isBind ? 'addEventListener' : 'removeEventListener';\r\n  for ( var i=0; i < this.handles.length; i++ ) {\r\n    var handle = this.handles[i];\r\n    this._bindStartEvent( handle, isBind );\r\n    handle[ bindMethod ]( 'click', this );\r\n    // touch-action: none to override browser touch gestures\r\n    // metafizzy/flickity#540\r\n    if ( window.PointerEvent ) {\r\n      handle.style.touchAction = isBind ? this._touchActionValue : '';\r\n    }\r\n  }\r\n};\r\n\r\n// prototype so it can be overwriteable by Flickity\r\nproto._touchActionValue = 'none';\r\n\r\n// ----- start event ----- //\r\n\r\n/**\r\n * pointer start\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto.pointerDown = function( event, pointer ) {\r\n  // dismiss range sliders\r\n  if ( event.target.nodeName == 'INPUT' && event.target.type == 'range' ) {\r\n    // reset pointerDown logic\r\n    this.isPointerDown = false;\r\n    delete this.pointerIdentifier;\r\n    return;\r\n  }\r\n\r\n  this._dragPointerDown( event, pointer );\r\n  // kludge to blur focused inputs in dragger\r\n  var focused = document.activeElement;\r\n  if ( focused && focused.blur ) {\r\n    focused.blur();\r\n  }\r\n  // bind move and end events\r\n  this._bindPostStartEvents( event );\r\n  this.emitEvent( 'pointerDown', [ event, pointer ] );\r\n};\r\n\r\n// base pointer down logic\r\nproto._dragPointerDown = function( event, pointer ) {\r\n  // track to see when dragging starts\r\n  this.pointerDownPoint = Unipointer.getPointerPoint( pointer );\r\n\r\n  var canPreventDefault = this.canPreventDefaultOnPointerDown( event, pointer );\r\n  if ( canPreventDefault ) {\r\n    event.preventDefault();\r\n  }\r\n};\r\n\r\n// overwriteable method so Flickity can prevent for scrolling\r\nproto.canPreventDefaultOnPointerDown = function( event ) {\r\n  // prevent default, unless touchstart or <select>\r\n  return event.target.nodeName != 'SELECT';\r\n};\r\n\r\n// ----- move event ----- //\r\n\r\n/**\r\n * drag move\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto.pointerMove = function( event, pointer ) {\r\n  var moveVector = this._dragPointerMove( event, pointer );\r\n  this.emitEvent( 'pointerMove', [ event, pointer, moveVector ] );\r\n  this._dragMove( event, pointer, moveVector );\r\n};\r\n\r\n// base pointer move logic\r\nproto._dragPointerMove = function( event, pointer ) {\r\n  var movePoint = Unipointer.getPointerPoint( pointer );\r\n  var moveVector = {\r\n    x: movePoint.x - this.pointerDownPoint.x,\r\n    y: movePoint.y - this.pointerDownPoint.y\r\n  };\r\n  // start drag if pointer has moved far enough to start drag\r\n  if ( !this.isDragging && this.hasDragStarted( moveVector ) ) {\r\n    this._dragStart( event, pointer );\r\n  }\r\n  return moveVector;\r\n};\r\n\r\n// condition if pointer has moved far enough to start drag\r\nproto.hasDragStarted = function( moveVector ) {\r\n  return Math.abs( moveVector.x ) > 3 || Math.abs( moveVector.y ) > 3;\r\n};\r\n\r\n\r\n// ----- end event ----- //\r\n\r\n/**\r\n * pointer up\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto.pointerUp = function( event, pointer ) {\r\n  this.emitEvent( 'pointerUp', [ event, pointer ] );\r\n  this._dragPointerUp( event, pointer );\r\n};\r\n\r\nproto._dragPointerUp = function( event, pointer ) {\r\n  if ( this.isDragging ) {\r\n    this._dragEnd( event, pointer );\r\n  } else {\r\n    // pointer didn't move enough for drag to start\r\n    this._staticClick( event, pointer );\r\n  }\r\n};\r\n\r\n// -------------------------- drag -------------------------- //\r\n\r\n// dragStart\r\nproto._dragStart = function( event, pointer ) {\r\n  this.isDragging = true;\r\n  this.dragStartPoint = Unipointer.getPointerPoint( pointer );\r\n  // prevent clicks\r\n  this.isPreventingClicks = true;\r\n\r\n  this.dragStart( event, pointer );\r\n};\r\n\r\nproto.dragStart = function( event, pointer ) {\r\n  this.emitEvent( 'dragStart', [ event, pointer ] );\r\n};\r\n\r\n// dragMove\r\nproto._dragMove = function( event, pointer, moveVector ) {\r\n  // do not drag if not dragging yet\r\n  if ( !this.isDragging ) {\r\n    return;\r\n  }\r\n\r\n  this.dragMove( event, pointer, moveVector );\r\n};\r\n\r\nproto.dragMove = function( event, pointer, moveVector ) {\r\n  event.preventDefault();\r\n  this.emitEvent( 'dragMove', [ event, pointer, moveVector ] );\r\n};\r\n\r\n// dragEnd\r\nproto._dragEnd = function( event, pointer ) {\r\n  // set flags\r\n  this.isDragging = false;\r\n  // re-enable clicking async\r\n  setTimeout( function() {\r\n    delete this.isPreventingClicks;\r\n  }.bind( this ) );\r\n\r\n  this.dragEnd( event, pointer );\r\n};\r\n\r\nproto.dragEnd = function( event, pointer ) {\r\n  this.emitEvent( 'dragEnd', [ event, pointer ] );\r\n};\r\n\r\n// ----- onclick ----- //\r\n\r\n// handle all clicks and prevent clicks when dragging\r\nproto.onclick = function( event ) {\r\n  if ( this.isPreventingClicks ) {\r\n    event.preventDefault();\r\n  }\r\n};\r\n\r\n// ----- staticClick ----- //\r\n\r\n// triggered after pointer down & up with no/tiny movement\r\nproto._staticClick = function( event, pointer ) {\r\n  // ignore emulated mouse up clicks\r\n  if ( this.isIgnoringMouseUp && event.type == 'mouseup' ) {\r\n    return;\r\n  }\r\n\r\n  // allow click in <input>s and <textarea>s\r\n  var nodeName = event.target.nodeName;\r\n  if ( nodeName == 'INPUT' || nodeName == 'TEXTAREA' ) {\r\n    event.target.focus();\r\n  }\r\n  this.staticClick( event, pointer );\r\n\r\n  // set flag for emulated clicks 300ms after touchend\r\n  if ( event.type != 'mouseup' ) {\r\n    this.isIgnoringMouseUp = true;\r\n    // reset flag after 300ms\r\n    setTimeout( function() {\r\n      delete this.isIgnoringMouseUp;\r\n    }.bind( this ), 400 );\r\n  }\r\n};\r\n\r\nproto.staticClick = function( event, pointer ) {\r\n  this.emitEvent( 'staticClick', [ event, pointer ] );\r\n};\r\n\r\n// ----- utils ----- //\r\n\r\nUnidragger.getPointerPoint = Unipointer.getPointerPoint;\r\n\r\n// -----  ----- //\r\n\r\nreturn Unidragger;\r\n\r\n}));\r\n\r\n// drag\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/drag',[\r\n      './flickity',\r\n      'unidragger/unidragger',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, Unidragger, utils ) {\r\n      return factory( window, Flickity, Unidragger, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('unidragger'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = factory(\r\n      window,\r\n      window.Flickity,\r\n      window.Unidragger,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, Unidragger, utils ) {\r\n\r\n\r\n\r\n// ----- defaults ----- //\r\n\r\nutils.extend( Flickity.defaults, {\r\n  draggable: '>1',\r\n  dragThreshold: 3,\r\n});\r\n\r\n// ----- create ----- //\r\n\r\nFlickity.createMethods.push('_createDrag');\r\n\r\n// -------------------------- drag prototype -------------------------- //\r\n\r\nvar proto = Flickity.prototype;\r\nutils.extend( proto, Unidragger.prototype );\r\nproto._touchActionValue = 'pan-y';\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nvar isTouch = 'createTouch' in document;\r\nvar isTouchmoveScrollCanceled = false;\r\n\r\nproto._createDrag = function() {\r\n  this.on( 'activate', this.onActivateDrag );\r\n  this.on( 'uiChange', this._uiChangeDrag );\r\n  this.on( 'childUIPointerDown', this._childUIPointerDownDrag );\r\n  this.on( 'deactivate', this.unbindDrag );\r\n  this.on( 'cellChange', this.updateDraggable );\r\n  // TODO updateDraggable on resize? if groupCells & slides change\r\n  // HACK - add seemingly innocuous handler to fix iOS 10 scroll behavior\r\n  // #457, RubaXa/Sortable#973\r\n  if ( isTouch && !isTouchmoveScrollCanceled ) {\r\n    window.addEventListener( 'touchmove', function() {});\r\n    isTouchmoveScrollCanceled = true;\r\n  }\r\n};\r\n\r\nproto.onActivateDrag = function() {\r\n  this.handles = [ this.viewport ];\r\n  this.bindHandles();\r\n  this.updateDraggable();\r\n};\r\n\r\nproto.onDeactivateDrag = function() {\r\n  this.unbindHandles();\r\n  this.element.classList.remove('is-draggable');\r\n};\r\n\r\nproto.updateDraggable = function() {\r\n  // disable dragging if less than 2 slides. #278\r\n  if ( this.options.draggable == '>1' ) {\r\n    this.isDraggable = this.slides.length > 1;\r\n  } else {\r\n    this.isDraggable = this.options.draggable;\r\n  }\r\n  if ( this.isDraggable ) {\r\n    this.element.classList.add('is-draggable');\r\n  } else {\r\n    this.element.classList.remove('is-draggable');\r\n  }\r\n};\r\n\r\n// backwards compatibility\r\nproto.bindDrag = function() {\r\n  this.options.draggable = true;\r\n  this.updateDraggable();\r\n};\r\n\r\nproto.unbindDrag = function() {\r\n  this.options.draggable = false;\r\n  this.updateDraggable();\r\n};\r\n\r\nproto._uiChangeDrag = function() {\r\n  delete this.isFreeScrolling;\r\n};\r\n\r\nproto._childUIPointerDownDrag = function( event ) {\r\n  if ( !this.isDraggable ) {\r\n    return;\r\n  }\r\n  event.preventDefault();\r\n  this.pointerDownFocus( event );\r\n};\r\n\r\n// -------------------------- pointer events -------------------------- //\r\n\r\n// nodes that have text fields\r\nvar cursorNodes = {\r\n  TEXTAREA: true,\r\n  INPUT: true,\r\n  OPTION: true,\r\n};\r\n\r\n// input types that do not have text fields\r\nvar clickTypes = {\r\n  radio: true,\r\n  checkbox: true,\r\n  button: true,\r\n  submit: true,\r\n  image: true,\r\n  file: true,\r\n};\r\n\r\nproto.pointerDown = function( event, pointer ) {\r\n  if ( !this.isDraggable ) {\r\n    this._pointerDownDefault( event, pointer );\r\n    return;\r\n  }\r\n  // dismiss inputs with text fields. #403, #404\r\n  var isCursorInput = cursorNodes[ event.target.nodeName ] &&\r\n    !clickTypes[ event.target.type ];\r\n  if ( isCursorInput ) {\r\n    // reset pointerDown logic\r\n    this.isPointerDown = false;\r\n    delete this.pointerIdentifier;\r\n    return;\r\n  }\r\n\r\n  // kludge to blur focused inputs in dragger\r\n  var focused = document.activeElement;\r\n  var canBlur = focused && focused.blur && focused != this.element &&\r\n    // do not blur body for IE9 & 10, #117\r\n    focused != document.body;\r\n  if ( canBlur ) {\r\n    focused.blur();\r\n  }\r\n  this.pointerDownFocus( event );\r\n  // stop if it was moving\r\n  this.dragX = this.x;\r\n  this.viewport.classList.add('is-pointer-down');\r\n  // track scrolling\r\n  this.pointerDownScroll = getScrollPosition();\r\n  window.addEventListener( 'scroll', this );\r\n\r\n  this._pointerDownDefault( event, pointer );\r\n};\r\n\r\nproto._pointerDownDefault = function( event, pointer ) {\r\n  this._dragPointerDown( event, pointer );\r\n  // bind move and end events\r\n  this._bindPostStartEvents( event );\r\n  this.dispatchEvent( 'pointerDown', event, [ pointer ] );\r\n};\r\n\r\nproto.pointerDownFocus = function( event ) {\r\n  // focus element, if not touch, and its not an input or select\r\n  var canPointerDown = getCanPointerDown( event );\r\n  if ( !canPointerDown ) {\r\n    this.focus();\r\n  }\r\n};\r\n\r\nvar focusNodes = {\r\n  INPUT: true,\r\n  SELECT: true,\r\n};\r\n\r\nfunction getCanPointerDown( event ) {\r\n  var isTouchStart = event.type == 'touchstart';\r\n  var isTouchPointer = event.pointerType == 'touch';\r\n  var isFocusNode = focusNodes[ event.target.nodeName ];\r\n  return isTouchStart || isTouchPointer || isFocusNode;\r\n}\r\n\r\nproto.canPreventDefaultOnPointerDown = function( event ) {\r\n  // prevent default, unless touchstart or input\r\n  var canPointerDown = getCanPointerDown( event );\r\n  return this.isDraggable && !canPointerDown;\r\n};\r\n\r\n// ----- move ----- //\r\n\r\nproto.hasDragStarted = function( moveVector ) {\r\n  return Math.abs( moveVector.x ) > this.options.dragThreshold;\r\n};\r\n\r\n// ----- up ----- //\r\n\r\nproto.pointerUp = function( event, pointer ) {\r\n  delete this.isTouchScrolling;\r\n  this.viewport.classList.remove('is-pointer-down');\r\n  this.dispatchEvent( 'pointerUp', event, [ pointer ] );\r\n  this._dragPointerUp( event, pointer );\r\n};\r\n\r\nproto.pointerDone = function() {\r\n  window.removeEventListener( 'scroll', this );\r\n  delete this.pointerDownScroll;\r\n};\r\n\r\n// -------------------------- dragging -------------------------- //\r\n\r\nproto.dragStart = function( event, pointer ) {\r\n  if ( !this.isDraggable ) {\r\n    return;\r\n  }\r\n  this.dragStartPosition = this.x;\r\n  this.startAnimation();\r\n  window.removeEventListener( 'scroll', this );\r\n  this.dispatchEvent( 'dragStart', event, [ pointer ] );\r\n};\r\n\r\nproto.pointerMove = function( event, pointer ) {\r\n  var moveVector = this._dragPointerMove( event, pointer );\r\n  this.dispatchEvent( 'pointerMove', event, [ pointer, moveVector ] );\r\n  this._dragMove( event, pointer, moveVector );\r\n};\r\n\r\nproto.dragMove = function( event, pointer, moveVector ) {\r\n  if ( !this.isDraggable ) {\r\n    return;\r\n  }\r\n  event.preventDefault();\r\n\r\n  this.previousDragX = this.dragX;\r\n  // reverse if right-to-left\r\n  var direction = this.options.rightToLeft ? -1 : 1;\r\n  if ( this.options.wrapAround ) {\r\n    // wrap around move. #589\r\n    moveVector.x = moveVector.x % this.slideableWidth;\r\n  }\r\n  var dragX = this.dragStartPosition + moveVector.x * direction;\r\n\r\n  if ( !this.options.wrapAround && this.slides.length ) {\r\n    // slow drag\r\n    var originBound = Math.max( -this.slides[0].target, this.dragStartPosition );\r\n    dragX = dragX > originBound ? ( dragX + originBound ) * 0.5 : dragX;\r\n    var endBound = Math.min( -this.getLastSlide().target, this.dragStartPosition );\r\n    dragX = dragX < endBound ? ( dragX + endBound ) * 0.5 : dragX;\r\n  }\r\n\r\n  this.dragX = dragX;\r\n\r\n  this.dragMoveTime = new Date();\r\n  this.dispatchEvent( 'dragMove', event, [ pointer, moveVector ] );\r\n};\r\n\r\nproto.dragEnd = function( event, pointer ) {\r\n  if ( !this.isDraggable ) {\r\n    return;\r\n  }\r\n  if ( this.options.freeScroll ) {\r\n    this.isFreeScrolling = true;\r\n  }\r\n  // set selectedIndex based on where flick will end up\r\n  var index = this.dragEndRestingSelect();\r\n\r\n  if ( this.options.freeScroll && !this.options.wrapAround ) {\r\n    // if free-scroll & not wrap around\r\n    // do not free-scroll if going outside of bounding slides\r\n    // so bounding slides can attract slider, and keep it in bounds\r\n    var restingX = this.getRestingPosition();\r\n    this.isFreeScrolling = -restingX > this.slides[0].target &&\r\n      -restingX < this.getLastSlide().target;\r\n  } else if ( !this.options.freeScroll && index == this.selectedIndex ) {\r\n    // boost selection if selected index has not changed\r\n    index += this.dragEndBoostSelect();\r\n  }\r\n  delete this.previousDragX;\r\n  // apply selection\r\n  // TODO refactor this, selecting here feels weird\r\n  // HACK, set flag so dragging stays in correct direction\r\n  this.isDragSelect = this.options.wrapAround;\r\n  this.select( index );\r\n  delete this.isDragSelect;\r\n  this.dispatchEvent( 'dragEnd', event, [ pointer ] );\r\n};\r\n\r\nproto.dragEndRestingSelect = function() {\r\n  var restingX = this.getRestingPosition();\r\n  // how far away from selected slide\r\n  var distance = Math.abs( this.getSlideDistance( -restingX, this.selectedIndex ) );\r\n  // get closet resting going up and going down\r\n  var positiveResting = this._getClosestResting( restingX, distance, 1 );\r\n  var negativeResting = this._getClosestResting( restingX, distance, -1 );\r\n  // use closer resting for wrap-around\r\n  var index = positiveResting.distance < negativeResting.distance ?\r\n    positiveResting.index : negativeResting.index;\r\n  return index;\r\n};\r\n\r\n/**\r\n * given resting X and distance to selected cell\r\n * get the distance and index of the closest cell\r\n * @param {Number} restingX - estimated post-flick resting position\r\n * @param {Number} distance - distance to selected cell\r\n * @param {Integer} increment - +1 or -1, going up or down\r\n * @returns {Object} - { distance: {Number}, index: {Integer} }\r\n */\r\nproto._getClosestResting = function( restingX, distance, increment ) {\r\n  var index = this.selectedIndex;\r\n  var minDistance = Infinity;\r\n  var condition = this.options.contain && !this.options.wrapAround ?\r\n    // if contain, keep going if distance is equal to minDistance\r\n    function( d, md ) { return d <= md; } : function( d, md ) { return d < md; };\r\n  while ( condition( distance, minDistance ) ) {\r\n    // measure distance to next cell\r\n    index += increment;\r\n    minDistance = distance;\r\n    distance = this.getSlideDistance( -restingX, index );\r\n    if ( distance === null ) {\r\n      break;\r\n    }\r\n    distance = Math.abs( distance );\r\n  }\r\n  return {\r\n    distance: minDistance,\r\n    // selected was previous index\r\n    index: index - increment\r\n  };\r\n};\r\n\r\n/**\r\n * measure distance between x and a slide target\r\n * @param {Number} x\r\n * @param {Integer} index - slide index\r\n */\r\nproto.getSlideDistance = function( x, index ) {\r\n  var len = this.slides.length;\r\n  // wrap around if at least 2 slides\r\n  var isWrapAround = this.options.wrapAround && len > 1;\r\n  var slideIndex = isWrapAround ? utils.modulo( index, len ) : index;\r\n  var slide = this.slides[ slideIndex ];\r\n  if ( !slide ) {\r\n    return null;\r\n  }\r\n  // add distance for wrap-around slides\r\n  var wrap = isWrapAround ? this.slideableWidth * Math.floor( index / len ) : 0;\r\n  return x - ( slide.target + wrap );\r\n};\r\n\r\nproto.dragEndBoostSelect = function() {\r\n  // do not boost if no previousDragX or dragMoveTime\r\n  if ( this.previousDragX === undefined || !this.dragMoveTime ||\r\n    // or if drag was held for 100 ms\r\n    new Date() - this.dragMoveTime > 100 ) {\r\n    return 0;\r\n  }\r\n\r\n  var distance = this.getSlideDistance( -this.dragX, this.selectedIndex );\r\n  var delta = this.previousDragX - this.dragX;\r\n  if ( distance > 0 && delta > 0 ) {\r\n    // boost to next if moving towards the right, and positive velocity\r\n    return 1;\r\n  } else if ( distance < 0 && delta < 0 ) {\r\n    // boost to previous if moving towards the left, and negative velocity\r\n    return -1;\r\n  }\r\n  return 0;\r\n};\r\n\r\n// ----- staticClick ----- //\r\n\r\nproto.staticClick = function( event, pointer ) {\r\n  // get clickedCell, if cell was clicked\r\n  var clickedCell = this.getParentCell( event.target );\r\n  var cellElem = clickedCell && clickedCell.element;\r\n  var cellIndex = clickedCell && this.cells.indexOf( clickedCell );\r\n  this.dispatchEvent( 'staticClick', event, [ pointer, cellElem, cellIndex ] );\r\n};\r\n\r\n// ----- scroll ----- //\r\n\r\nproto.onscroll = function() {\r\n  var scroll = getScrollPosition();\r\n  var scrollMoveX = this.pointerDownScroll.x - scroll.x;\r\n  var scrollMoveY = this.pointerDownScroll.y - scroll.y;\r\n  // cancel click/tap if scroll is too much\r\n  if ( Math.abs( scrollMoveX ) > 3 || Math.abs( scrollMoveY ) > 3 ) {\r\n    this._pointerDone();\r\n  }\r\n};\r\n\r\n// ----- utils ----- //\r\n\r\nfunction getScrollPosition() {\r\n  return {\r\n    x: window.pageXOffset,\r\n    y: window.pageYOffset\r\n  };\r\n}\r\n\r\n// -----  ----- //\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n/*!\r\n * Tap listener v2.0.0\r\n * listens to taps\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, unused: true, undef: true, strict: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false*/ /*globals define, module, require */\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'tap-listener/tap-listener',[\r\n      'unipointer/unipointer'\r\n    ], function( Unipointer ) {\r\n      return factory( window, Unipointer );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('unipointer')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.TapListener = factory(\r\n      window,\r\n      window.Unipointer\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Unipointer ) {\r\n\r\n\r\n\r\n// --------------------------  TapListener -------------------------- //\r\n\r\nfunction TapListener( elem ) {\r\n  this.bindTap( elem );\r\n}\r\n\r\n// inherit Unipointer & EventEmitter\r\nvar proto = TapListener.prototype = Object.create( Unipointer.prototype );\r\n\r\n/**\r\n * bind tap event to element\r\n * @param {Element} elem\r\n */\r\nproto.bindTap = function( elem ) {\r\n  if ( !elem ) {\r\n    return;\r\n  }\r\n  this.unbindTap();\r\n  this.tapElement = elem;\r\n  this._bindStartEvent( elem, true );\r\n};\r\n\r\nproto.unbindTap = function() {\r\n  if ( !this.tapElement ) {\r\n    return;\r\n  }\r\n  this._bindStartEvent( this.tapElement, true );\r\n  delete this.tapElement;\r\n};\r\n\r\n/**\r\n * pointer up\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto.pointerUp = function( event, pointer ) {\r\n  // ignore emulated mouse up clicks\r\n  if ( this.isIgnoringMouseUp && event.type == 'mouseup' ) {\r\n    return;\r\n  }\r\n\r\n  var pointerPoint = Unipointer.getPointerPoint( pointer );\r\n  var boundingRect = this.tapElement.getBoundingClientRect();\r\n  var scrollX = window.pageXOffset;\r\n  var scrollY = window.pageYOffset;\r\n  // calculate if pointer is inside tapElement\r\n  var isInside = pointerPoint.x >= boundingRect.left + scrollX &&\r\n    pointerPoint.x <= boundingRect.right + scrollX &&\r\n    pointerPoint.y >= boundingRect.top + scrollY &&\r\n    pointerPoint.y <= boundingRect.bottom + scrollY;\r\n  // trigger callback if pointer is inside element\r\n  if ( isInside ) {\r\n    this.emitEvent( 'tap', [ event, pointer ] );\r\n  }\r\n\r\n  // set flag for emulated clicks 300ms after touchend\r\n  if ( event.type != 'mouseup' ) {\r\n    this.isIgnoringMouseUp = true;\r\n    // reset flag after 300ms\r\n    var _this = this;\r\n    setTimeout( function() {\r\n      delete _this.isIgnoringMouseUp;\r\n    }, 400 );\r\n  }\r\n};\r\n\r\nproto.destroy = function() {\r\n  this.pointerDone();\r\n  this.unbindTap();\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn TapListener;\r\n\r\n}));\r\n\r\n// prev/next buttons\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/prev-next-button',[\r\n      './flickity',\r\n      'tap-listener/tap-listener',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, TapListener, utils ) {\r\n      return factory( window, Flickity, TapListener, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('tap-listener'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window,\r\n      window.Flickity,\r\n      window.TapListener,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, TapListener, utils ) {\r\n'use strict';\r\n\r\nvar svgURI = 'http://www.w3.org/2000/svg';\r\n\r\n// -------------------------- PrevNextButton -------------------------- //\r\n\r\nfunction PrevNextButton( direction, parent ) {\r\n  this.direction = direction;\r\n  this.parent = parent;\r\n  this._create();\r\n}\r\n\r\nPrevNextButton.prototype = Object.create( TapListener.prototype );\r\n\r\nPrevNextButton.prototype._create = function() {\r\n  // properties\r\n  this.isEnabled = true;\r\n  this.isPrevious = this.direction == -1;\r\n  var leftDirection = this.parent.options.rightToLeft ? 1 : -1;\r\n  this.isLeft = this.direction == leftDirection;\r\n\r\n  var element = this.element = document.createElement('button');\r\n  element.className = 'flickity-button flickity-prev-next-button';\r\n  element.className += this.isPrevious ? ' previous' : ' next';\r\n  // prevent button from submitting form http://stackoverflow.com/a/10836076/182183\r\n  element.setAttribute( 'type', 'button' );\r\n  // init as disabled\r\n  this.disable();\r\n\r\n  element.setAttribute( 'aria-label', this.isPrevious ? 'Previous' : 'Next' );\r\n\r\n  // create arrow\r\n  var svg = this.createSVG();\r\n  element.appendChild( svg );\r\n  // events\r\n  this.on( 'tap', this.onTap );\r\n  this.parent.on( 'select', this.update.bind( this ) );\r\n  this.on( 'pointerDown', this.parent.childUIPointerDown.bind( this.parent ) );\r\n};\r\n\r\nPrevNextButton.prototype.activate = function() {\r\n  this.bindTap( this.element );\r\n  // click events from keyboard\r\n  this.element.addEventListener( 'click', this );\r\n  // add to DOM\r\n  this.parent.element.appendChild( this.element );\r\n};\r\n\r\nPrevNextButton.prototype.deactivate = function() {\r\n  // remove from DOM\r\n  this.parent.element.removeChild( this.element );\r\n  // do regular TapListener destroy\r\n  TapListener.prototype.destroy.call( this );\r\n  // click events from keyboard\r\n  this.element.removeEventListener( 'click', this );\r\n};\r\n\r\nPrevNextButton.prototype.createSVG = function() {\r\n  var svg = document.createElementNS( svgURI, 'svg');\r\n  svg.setAttribute( 'class', 'flickity-button-icon' );\r\n  svg.setAttribute( 'viewBox', '0 0 100 100' );\r\n  var path = document.createElementNS( svgURI, 'path');\r\n  var pathMovements = getArrowMovements( this.parent.options.arrowShape );\r\n  path.setAttribute( 'd', pathMovements );\r\n  path.setAttribute( 'class', 'arrow' );\r\n  // rotate arrow\r\n  if ( !this.isLeft ) {\r\n    path.setAttribute( 'transform', 'translate(100, 100) rotate(180) ' );\r\n  }\r\n  svg.appendChild( path );\r\n  return svg;\r\n};\r\n\r\n// get SVG path movmement\r\nfunction getArrowMovements( shape ) {\r\n  // use shape as movement if string\r\n  if ( typeof shape == 'string' ) {\r\n    return shape;\r\n  }\r\n  // create movement string\r\n  return 'M ' + shape.x0 + ',50' +\r\n    ' L ' + shape.x1 + ',' + ( shape.y1 + 50 ) +\r\n    ' L ' + shape.x2 + ',' + ( shape.y2 + 50 ) +\r\n    ' L ' + shape.x3 + ',50 ' +\r\n    ' L ' + shape.x2 + ',' + ( 50 - shape.y2 ) +\r\n    ' L ' + shape.x1 + ',' + ( 50 - shape.y1 ) +\r\n    ' Z';\r\n}\r\n\r\nPrevNextButton.prototype.onTap = function() {\r\n  if ( !this.isEnabled ) {\r\n    return;\r\n  }\r\n  this.parent.uiChange();\r\n  var method = this.isPrevious ? 'previous' : 'next';\r\n  this.parent[ method ]();\r\n};\r\n\r\nPrevNextButton.prototype.handleEvent = utils.handleEvent;\r\n\r\nPrevNextButton.prototype.onclick = function() {\r\n  // only allow clicks from keyboard\r\n  var focused = document.activeElement;\r\n  if ( focused && focused == this.element ) {\r\n    this.onTap();\r\n  }\r\n};\r\n\r\n// -----  ----- //\r\n\r\nPrevNextButton.prototype.enable = function() {\r\n  if ( this.isEnabled ) {\r\n    return;\r\n  }\r\n  this.element.disabled = false;\r\n  this.isEnabled = true;\r\n};\r\n\r\nPrevNextButton.prototype.disable = function() {\r\n  if ( !this.isEnabled ) {\r\n    return;\r\n  }\r\n  this.element.disabled = true;\r\n  this.isEnabled = false;\r\n};\r\n\r\nPrevNextButton.prototype.update = function() {\r\n  // index of first or last slide, if previous or next\r\n  var slides = this.parent.slides;\r\n  // enable is wrapAround and at least 2 slides\r\n  if ( this.parent.options.wrapAround && slides.length > 1 ) {\r\n    this.enable();\r\n    return;\r\n  }\r\n  var lastIndex = slides.length ? slides.length - 1 : 0;\r\n  var boundIndex = this.isPrevious ? 0 : lastIndex;\r\n  var method = this.parent.selectedIndex == boundIndex ? 'disable' : 'enable';\r\n  this[ method ]();\r\n};\r\n\r\nPrevNextButton.prototype.destroy = function() {\r\n  this.deactivate();\r\n};\r\n\r\n// -------------------------- Flickity prototype -------------------------- //\r\n\r\nutils.extend( Flickity.defaults, {\r\n  prevNextButtons: true,\r\n  arrowShape: {\r\n    x0: 10,\r\n    x1: 60, y1: 50,\r\n    x2: 70, y2: 40,\r\n    x3: 30\r\n  }\r\n});\r\n\r\nFlickity.createMethods.push('_createPrevNextButtons');\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createPrevNextButtons = function() {\r\n  if ( !this.options.prevNextButtons ) {\r\n    return;\r\n  }\r\n\r\n  this.prevButton = new PrevNextButton( -1, this );\r\n  this.nextButton = new PrevNextButton( 1, this );\r\n\r\n  this.on( 'activate', this.activatePrevNextButtons );\r\n};\r\n\r\nproto.activatePrevNextButtons = function() {\r\n  this.prevButton.activate();\r\n  this.nextButton.activate();\r\n  this.on( 'deactivate', this.deactivatePrevNextButtons );\r\n};\r\n\r\nproto.deactivatePrevNextButtons = function() {\r\n  this.prevButton.deactivate();\r\n  this.nextButton.deactivate();\r\n  this.off( 'deactivate', this.deactivatePrevNextButtons );\r\n};\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nFlickity.PrevNextButton = PrevNextButton;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n// page dots\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/page-dots',[\r\n      './flickity',\r\n      'tap-listener/tap-listener',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, TapListener, utils ) {\r\n      return factory( window, Flickity, TapListener, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('tap-listener'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window,\r\n      window.Flickity,\r\n      window.TapListener,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, TapListener, utils ) {\r\n\r\n// -------------------------- PageDots -------------------------- //\r\n\r\n\r\n\r\nfunction PageDots( parent ) {\r\n  this.parent = parent;\r\n  this._create();\r\n}\r\n\r\nPageDots.prototype = new TapListener();\r\n\r\nPageDots.prototype._create = function() {\r\n  // create holder element\r\n  this.holder = document.createElement('ol');\r\n  this.holder.className = 'flickity-page-dots';\r\n  // create dots, array of elements\r\n  this.dots = [];\r\n  // events\r\n  this.on( 'tap', this.onTap );\r\n  this.on( 'pointerDown', this.parent.childUIPointerDown.bind( this.parent ) );\r\n};\r\n\r\nPageDots.prototype.activate = function() {\r\n  this.setDots();\r\n  this.bindTap( this.holder );\r\n  // add to DOM\r\n  this.parent.element.appendChild( this.holder );\r\n};\r\n\r\nPageDots.prototype.deactivate = function() {\r\n  // remove from DOM\r\n  this.parent.element.removeChild( this.holder );\r\n  TapListener.prototype.destroy.call( this );\r\n};\r\n\r\nPageDots.prototype.setDots = function() {\r\n  // get difference between number of slides and number of dots\r\n  var delta = this.parent.slides.length - this.dots.length;\r\n  if ( delta > 0 ) {\r\n    this.addDots( delta );\r\n  } else if ( delta < 0 ) {\r\n    this.removeDots( -delta );\r\n  }\r\n};\r\n\r\nPageDots.prototype.addDots = function( count ) {\r\n  var fragment = document.createDocumentFragment();\r\n  var newDots = [];\r\n  var length = this.dots.length;\r\n  var max = length + count;\r\n\r\n  for ( var i = length; i < max; i++ ) {\r\n    var dot = document.createElement('li');\r\n    dot.className = 'dot';\r\n    dot.setAttribute( 'aria-label', 'Page dot ' + ( i + 1 ) );\r\n    fragment.appendChild( dot );\r\n    newDots.push( dot );\r\n  }\r\n\r\n  this.holder.appendChild( fragment );\r\n  this.dots = this.dots.concat( newDots );\r\n};\r\n\r\nPageDots.prototype.removeDots = function( count ) {\r\n  // remove from this.dots collection\r\n  var removeDots = this.dots.splice( this.dots.length - count, count );\r\n  // remove from DOM\r\n  removeDots.forEach( function( dot ) {\r\n    this.holder.removeChild( dot );\r\n  }, this );\r\n};\r\n\r\nPageDots.prototype.updateSelected = function() {\r\n  // remove selected class on previous\r\n  if ( this.selectedDot ) {\r\n    this.selectedDot.className = 'dot';\r\n    this.selectedDot.removeAttribute('aria-current');\r\n  }\r\n  // don't proceed if no dots\r\n  if ( !this.dots.length ) {\r\n    return;\r\n  }\r\n  this.selectedDot = this.dots[ this.parent.selectedIndex ];\r\n  this.selectedDot.className = 'dot is-selected';\r\n  this.selectedDot.setAttribute( 'aria-current', 'step' );\r\n};\r\n\r\nPageDots.prototype.onTap = function( event ) {\r\n  var target = event.target;\r\n  // only care about dot clicks\r\n  if ( target.nodeName != 'LI' ) {\r\n    return;\r\n  }\r\n\r\n  this.parent.uiChange();\r\n  var index = this.dots.indexOf( target );\r\n  this.parent.select( index );\r\n};\r\n\r\nPageDots.prototype.destroy = function() {\r\n  this.deactivate();\r\n};\r\n\r\nFlickity.PageDots = PageDots;\r\n\r\n// -------------------------- Flickity -------------------------- //\r\n\r\nutils.extend( Flickity.defaults, {\r\n  pageDots: true\r\n});\r\n\r\nFlickity.createMethods.push('_createPageDots');\r\n\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createPageDots = function() {\r\n  if ( !this.options.pageDots ) {\r\n    return;\r\n  }\r\n  this.pageDots = new PageDots( this );\r\n  // events\r\n  this.on( 'activate', this.activatePageDots );\r\n  this.on( 'select', this.updateSelectedPageDots );\r\n  this.on( 'cellChange', this.updatePageDots );\r\n  this.on( 'resize', this.updatePageDots );\r\n  this.on( 'deactivate', this.deactivatePageDots );\r\n};\r\n\r\nproto.activatePageDots = function() {\r\n  this.pageDots.activate();\r\n};\r\n\r\nproto.updateSelectedPageDots = function() {\r\n  this.pageDots.updateSelected();\r\n};\r\n\r\nproto.updatePageDots = function() {\r\n  this.pageDots.setDots();\r\n};\r\n\r\nproto.deactivatePageDots = function() {\r\n  this.pageDots.deactivate();\r\n};\r\n\r\n// -----  ----- //\r\n\r\nFlickity.PageDots = PageDots;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n// player & autoPlay\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/player',[\r\n      'ev-emitter/ev-emitter',\r\n      'fizzy-ui-utils/utils',\r\n      './flickity'\r\n    ], function( EvEmitter, utils, Flickity ) {\r\n      return factory( EvEmitter, utils, Flickity );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      require('ev-emitter'),\r\n      require('fizzy-ui-utils'),\r\n      require('./flickity')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window.EvEmitter,\r\n      window.fizzyUIUtils,\r\n      window.Flickity\r\n    );\r\n  }\r\n\r\n}( window, function factory( EvEmitter, utils, Flickity ) {\r\n\r\n\r\n\r\n// -------------------------- Page Visibility -------------------------- //\r\n// https://developer.mozilla.org/en-US/docs/Web/Guide/User_experience/Using_the_Page_Visibility_API\r\n\r\nvar hiddenProperty, visibilityEvent;\r\nif ( 'hidden' in document ) {\r\n  hiddenProperty = 'hidden';\r\n  visibilityEvent = 'visibilitychange';\r\n} else if ( 'webkitHidden' in document ) {\r\n  hiddenProperty = 'webkitHidden';\r\n  visibilityEvent = 'webkitvisibilitychange';\r\n}\r\n\r\n// -------------------------- Player -------------------------- //\r\n\r\nfunction Player( parent ) {\r\n  this.parent = parent;\r\n  this.state = 'stopped';\r\n  // visibility change event handler\r\n  if ( visibilityEvent ) {\r\n    this.onVisibilityChange = function() {\r\n      this.visibilityChange();\r\n    }.bind( this );\r\n    this.onVisibilityPlay = function() {\r\n      this.visibilityPlay();\r\n    }.bind( this );\r\n  }\r\n}\r\n\r\nPlayer.prototype = Object.create( EvEmitter.prototype );\r\n\r\n// start play\r\nPlayer.prototype.play = function() {\r\n  if ( this.state == 'playing' ) {\r\n    return;\r\n  }\r\n  // do not play if page is hidden, start playing when page is visible\r\n  var isPageHidden = document[ hiddenProperty ];\r\n  if ( visibilityEvent && isPageHidden ) {\r\n    document.addEventListener( visibilityEvent, this.onVisibilityPlay );\r\n    return;\r\n  }\r\n\r\n  this.state = 'playing';\r\n  // listen to visibility change\r\n  if ( visibilityEvent ) {\r\n    document.addEventListener( visibilityEvent, this.onVisibilityChange );\r\n  }\r\n  // start ticking\r\n  this.tick();\r\n};\r\n\r\nPlayer.prototype.tick = function() {\r\n  // do not tick if not playing\r\n  if ( this.state != 'playing' ) {\r\n    return;\r\n  }\r\n\r\n  var time = this.parent.options.autoPlay;\r\n  // default to 3 seconds\r\n  time = typeof time == 'number' ? time : 3000;\r\n  var _this = this;\r\n  // HACK: reset ticks if stopped and started within interval\r\n  this.clear();\r\n  this.timeout = setTimeout( function() {\r\n    _this.parent.next( true );\r\n    _this.tick();\r\n  }, time );\r\n};\r\n\r\nPlayer.prototype.stop = function() {\r\n  this.state = 'stopped';\r\n  this.clear();\r\n  // remove visibility change event\r\n  if ( visibilityEvent ) {\r\n    document.removeEventListener( visibilityEvent, this.onVisibilityChange );\r\n  }\r\n};\r\n\r\nPlayer.prototype.clear = function() {\r\n  clearTimeout( this.timeout );\r\n};\r\n\r\nPlayer.prototype.pause = function() {\r\n  if ( this.state == 'playing' ) {\r\n    this.state = 'paused';\r\n    this.clear();\r\n  }\r\n};\r\n\r\nPlayer.prototype.unpause = function() {\r\n  // re-start play if paused\r\n  if ( this.state == 'paused' ) {\r\n    this.play();\r\n  }\r\n};\r\n\r\n// pause if page visibility is hidden, unpause if visible\r\nPlayer.prototype.visibilityChange = function() {\r\n  var isPageHidden = document[ hiddenProperty ];\r\n  this[ isPageHidden ? 'pause' : 'unpause' ]();\r\n};\r\n\r\nPlayer.prototype.visibilityPlay = function() {\r\n  this.play();\r\n  document.removeEventListener( visibilityEvent, this.onVisibilityPlay );\r\n};\r\n\r\n// -------------------------- Flickity -------------------------- //\r\n\r\nutils.extend( Flickity.defaults, {\r\n  pauseAutoPlayOnHover: true\r\n});\r\n\r\nFlickity.createMethods.push('_createPlayer');\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createPlayer = function() {\r\n  this.player = new Player( this );\r\n\r\n  this.on( 'activate', this.activatePlayer );\r\n  this.on( 'uiChange', this.stopPlayer );\r\n  this.on( 'pointerDown', this.stopPlayer );\r\n  this.on( 'deactivate', this.deactivatePlayer );\r\n};\r\n\r\nproto.activatePlayer = function() {\r\n  if ( !this.options.autoPlay ) {\r\n    return;\r\n  }\r\n  this.player.play();\r\n  this.element.addEventListener( 'mouseenter', this );\r\n};\r\n\r\n// Player API, don't hate the ... thanks I know where the door is\r\n\r\nproto.playPlayer = function() {\r\n  this.player.play();\r\n};\r\n\r\nproto.stopPlayer = function() {\r\n  this.player.stop();\r\n};\r\n\r\nproto.pausePlayer = function() {\r\n  this.player.pause();\r\n};\r\n\r\nproto.unpausePlayer = function() {\r\n  this.player.unpause();\r\n};\r\n\r\nproto.deactivatePlayer = function() {\r\n  this.player.stop();\r\n  this.element.removeEventListener( 'mouseenter', this );\r\n};\r\n\r\n// ----- mouseenter/leave ----- //\r\n\r\n// pause auto-play on hover\r\nproto.onmouseenter = function() {\r\n  if ( !this.options.pauseAutoPlayOnHover ) {\r\n    return;\r\n  }\r\n  this.player.pause();\r\n  this.element.addEventListener( 'mouseleave', this );\r\n};\r\n\r\n// resume auto-play on hover off\r\nproto.onmouseleave = function() {\r\n  this.player.unpause();\r\n  this.element.removeEventListener( 'mouseleave', this );\r\n};\r\n\r\n// -----  ----- //\r\n\r\nFlickity.Player = Player;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n// add, remove cell\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/add-remove-cell',[\r\n      './flickity',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, utils ) {\r\n      return factory( window, Flickity, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window,\r\n      window.Flickity,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, utils ) {\r\n\r\n\r\n\r\n// append cells to a document fragment\r\nfunction getCellsFragment( cells ) {\r\n  var fragment = document.createDocumentFragment();\r\n  cells.forEach( function( cell ) {\r\n    fragment.appendChild( cell.element );\r\n  });\r\n  return fragment;\r\n}\r\n\r\n// -------------------------- add/remove cell prototype -------------------------- //\r\n\r\nvar proto = Flickity.prototype;\r\n\r\n/**\r\n * Insert, prepend, or append cells\r\n * @param {Element, Array, NodeList} elems\r\n * @param {Integer} index\r\n */\r\nproto.insert = function( elems, index ) {\r\n  var cells = this._makeCells( elems );\r\n  if ( !cells || !cells.length ) {\r\n    return;\r\n  }\r\n  var len = this.cells.length;\r\n  // default to append\r\n  index = index === undefined ? len : index;\r\n  // add cells with document fragment\r\n  var fragment = getCellsFragment( cells );\r\n  // append to slider\r\n  var isAppend = index == len;\r\n  if ( isAppend ) {\r\n    this.slider.appendChild( fragment );\r\n  } else {\r\n    var insertCellElement = this.cells[ index ].element;\r\n    this.slider.insertBefore( fragment, insertCellElement );\r\n  }\r\n  // add to this.cells\r\n  if ( index === 0 ) {\r\n    // prepend, add to start\r\n    this.cells = cells.concat( this.cells );\r\n  } else if ( isAppend ) {\r\n    // append, add to end\r\n    this.cells = this.cells.concat( cells );\r\n  } else {\r\n    // insert in this.cells\r\n    var endCells = this.cells.splice( index, len - index );\r\n    this.cells = this.cells.concat( cells ).concat( endCells );\r\n  }\r\n\r\n  this._sizeCells( cells );\r\n  this.cellChange( index, true );\r\n};\r\n\r\nproto.append = function( elems ) {\r\n  this.insert( elems, this.cells.length );\r\n};\r\n\r\nproto.prepend = function( elems ) {\r\n  this.insert( elems, 0 );\r\n};\r\n\r\n/**\r\n * Remove cells\r\n * @param {Element, Array, NodeList} elems\r\n */\r\nproto.remove = function( elems ) {\r\n  var cells = this.getCells( elems );\r\n  if ( !cells || !cells.length ) {\r\n    return;\r\n  }\r\n\r\n  var minCellIndex = this.cells.length - 1;\r\n  // remove cells from collection & DOM\r\n  cells.forEach( function( cell ) {\r\n    cell.remove();\r\n    var index = this.cells.indexOf( cell );\r\n    minCellIndex = Math.min( index, minCellIndex );\r\n    utils.removeFrom( this.cells, cell );\r\n  }, this );\r\n\r\n  this.cellChange( minCellIndex, true );\r\n};\r\n\r\n/**\r\n * logic to be run after a cell's size changes\r\n * @param {Element} elem - cell's element\r\n */\r\nproto.cellSizeChange = function( elem ) {\r\n  var cell = this.getCell( elem );\r\n  if ( !cell ) {\r\n    return;\r\n  }\r\n  cell.getSize();\r\n\r\n  var index = this.cells.indexOf( cell );\r\n  this.cellChange( index );\r\n};\r\n\r\n/**\r\n * logic any time a cell is changed: added, removed, or size changed\r\n * @param {Integer} changedCellIndex - index of the changed cell, optional\r\n */\r\nproto.cellChange = function( changedCellIndex, isPositioningSlider ) {\r\n  var prevSelectedElem = this.selectedElement;\r\n  this._positionCells( changedCellIndex );\r\n  this._getWrapShiftCells();\r\n  this.setGallerySize();\r\n  // update selectedIndex\r\n  // try to maintain position & select previous selected element\r\n  var cell = this.getCell( prevSelectedElem );\r\n  if ( cell ) {\r\n    this.selectedIndex = this.getCellSlideIndex( cell );\r\n  }\r\n  this.selectedIndex = Math.min( this.slides.length - 1, this.selectedIndex );\r\n\r\n  this.emitEvent( 'cellChange', [ changedCellIndex ] );\r\n  // position slider\r\n  this.select( this.selectedIndex );\r\n  // do not position slider after lazy load\r\n  if ( isPositioningSlider ) {\r\n    this.positionSliderAtSelected();\r\n  }\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n// lazyload\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/lazyload',[\r\n      './flickity',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, utils ) {\r\n      return factory( window, Flickity, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window,\r\n      window.Flickity,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, utils ) {\r\n'use strict';\r\n\r\nFlickity.createMethods.push('_createLazyload');\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createLazyload = function() {\r\n  this.on( 'select', this.lazyLoad );\r\n};\r\n\r\nproto.lazyLoad = function() {\r\n  var lazyLoad = this.options.lazyLoad;\r\n  if ( !lazyLoad ) {\r\n    return;\r\n  }\r\n  // get adjacent cells, use lazyLoad option for adjacent count\r\n  var adjCount = typeof lazyLoad == 'number' ? lazyLoad : 0;\r\n  var cellElems = this.getAdjacentCellElements( adjCount );\r\n  // get lazy images in those cells\r\n  var lazyImages = [];\r\n  cellElems.forEach( function( cellElem ) {\r\n    var lazyCellImages = getCellLazyImages( cellElem );\r\n    lazyImages = lazyImages.concat( lazyCellImages );\r\n  });\r\n  // load lazy images\r\n  lazyImages.forEach( function( img ) {\r\n    new LazyLoader( img, this );\r\n  }, this );\r\n};\r\n\r\nfunction getCellLazyImages( cellElem ) {\r\n  // check if cell element is lazy image\r\n  if ( cellElem.nodeName == 'IMG' ) {\r\n    var lazyloadAttr = cellElem.getAttribute('data-flickity-lazyload');\r\n    var srcAttr = cellElem.getAttribute('data-flickity-lazyload-src');\r\n    var srcsetAttr = cellElem.getAttribute('data-flickity-lazyload-srcset');\r\n    if ( lazyloadAttr || srcAttr || srcsetAttr ) {\r\n      return [ cellElem ];\r\n    }\r\n  }\r\n  // select lazy images in cell\r\n  var lazySelector = 'img[data-flickity-lazyload], ' +\r\n    'img[data-flickity-lazyload-src], img[data-flickity-lazyload-srcset]';\r\n  var imgs = cellElem.querySelectorAll( lazySelector );\r\n  return utils.makeArray( imgs );\r\n}\r\n\r\n// -------------------------- LazyLoader -------------------------- //\r\n\r\n/**\r\n * class to handle loading images\r\n */\r\nfunction LazyLoader( img, flickity ) {\r\n  this.img = img;\r\n  this.flickity = flickity;\r\n  this.load();\r\n}\r\n\r\nLazyLoader.prototype.handleEvent = utils.handleEvent;\r\n\r\nLazyLoader.prototype.load = function() {\r\n  this.img.addEventListener( 'load', this );\r\n  this.img.addEventListener( 'error', this );\r\n  // get src & srcset\r\n  var src = this.img.getAttribute('data-flickity-lazyload') ||\r\n    this.img.getAttribute('data-flickity-lazyload-src');\r\n  var srcset = this.img.getAttribute('data-flickity-lazyload-srcset');\r\n  // set src & serset\r\n  this.img.src = src;\r\n  if ( srcset ) {\r\n    this.img.setAttribute( 'srcset', srcset );\r\n  }\r\n  // remove attr\r\n  this.img.removeAttribute('data-flickity-lazyload');\r\n  this.img.removeAttribute('data-flickity-lazyload-src');\r\n  this.img.removeAttribute('data-flickity-lazyload-srcset');\r\n};\r\n\r\nLazyLoader.prototype.onload = function( event ) {\r\n  this.complete( event, 'flickity-lazyloaded' );\r\n};\r\n\r\nLazyLoader.prototype.onerror = function( event ) {\r\n  this.complete( event, 'flickity-lazyerror' );\r\n};\r\n\r\nLazyLoader.prototype.complete = function( event, className ) {\r\n  // unbind events\r\n  this.img.removeEventListener( 'load', this );\r\n  this.img.removeEventListener( 'error', this );\r\n\r\n  var cell = this.flickity.getParentCell( this.img );\r\n  var cellElem = cell && cell.element;\r\n  this.flickity.cellSizeChange( cellElem );\r\n\r\n  this.img.classList.add( className );\r\n  this.flickity.dispatchEvent( 'lazyLoad', event, cellElem );\r\n};\r\n\r\n// -----  ----- //\r\n\r\nFlickity.LazyLoader = LazyLoader;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n/*!\r\n * Flickity v2.1.0\r\n * Touch, responsive, flickable carousels\r\n *\r\n * Licensed GPLv3 for open source use\r\n * or Flickity Commercial License for commercial use\r\n *\r\n * https://flickity.metafizzy.co\r\n * Copyright 2015-2018 Metafizzy\r\n */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/index',[\r\n      './flickity',\r\n      './drag',\r\n      './prev-next-button',\r\n      './page-dots',\r\n      './player',\r\n      './add-remove-cell',\r\n      './lazyload'\r\n    ], factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      require('./flickity'),\r\n      require('./drag'),\r\n      require('./prev-next-button'),\r\n      require('./page-dots'),\r\n      require('./player'),\r\n      require('./add-remove-cell'),\r\n      require('./lazyload')\r\n    );\r\n  }\r\n\r\n})( window, function factory( Flickity ) {\r\n  /*jshint strict: false*/\r\n  return Flickity;\r\n});\r\n\r\n/*!\r\n * Flickity asNavFor v2.0.1\r\n * enable asNavFor for Flickity\r\n */\r\n\r\n/*jshint browser: true, undef: true, unused: true, strict: true*/\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /*globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity-as-nav-for/as-nav-for',[\r\n      'flickity/js/index',\r\n      'fizzy-ui-utils/utils'\r\n    ], factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      require('flickity'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = factory(\r\n      window.Flickity,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( Flickity, utils ) {\r\n\r\n\r\n\r\n// -------------------------- asNavFor prototype -------------------------- //\r\n\r\n// Flickity.defaults.asNavFor = null;\r\n\r\nFlickity.createMethods.push('_createAsNavFor');\r\n\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createAsNavFor = function() {\r\n  this.on( 'activate', this.activateAsNavFor );\r\n  this.on( 'deactivate', this.deactivateAsNavFor );\r\n  this.on( 'destroy', this.destroyAsNavFor );\r\n\r\n  var asNavForOption = this.options.asNavFor;\r\n  if ( !asNavForOption ) {\r\n    return;\r\n  }\r\n  // HACK do async, give time for other flickity to be initalized\r\n  var _this = this;\r\n  setTimeout( function initNavCompanion() {\r\n    _this.setNavCompanion( asNavForOption );\r\n  });\r\n};\r\n\r\nproto.setNavCompanion = function( elem ) {\r\n  elem = utils.getQueryElement( elem );\r\n  var companion = Flickity.data( elem );\r\n  // stop if no companion or companion is self\r\n  if ( !companion || companion == this ) {\r\n    return;\r\n  }\r\n\r\n  this.navCompanion = companion;\r\n  // companion select\r\n  var _this = this;\r\n  this.onNavCompanionSelect = function() {\r\n    _this.navCompanionSelect();\r\n  };\r\n  companion.on( 'select', this.onNavCompanionSelect );\r\n  // click\r\n  this.on( 'staticClick', this.onNavStaticClick );\r\n\r\n  this.navCompanionSelect( true );\r\n};\r\n\r\nproto.navCompanionSelect = function( isInstant ) {\r\n  if ( !this.navCompanion ) {\r\n    return;\r\n  }\r\n  // select slide that matches first cell of slide\r\n  var selectedCell = this.navCompanion.selectedCells[0];\r\n  var firstIndex = this.navCompanion.cells.indexOf( selectedCell );\r\n  var lastIndex = firstIndex + this.navCompanion.selectedCells.length - 1;\r\n  var selectIndex = Math.floor( lerp( firstIndex, lastIndex,\r\n    this.navCompanion.cellAlign ) );\r\n  this.selectCell( selectIndex, false, isInstant );\r\n  // set nav selected class\r\n  this.removeNavSelectedElements();\r\n  // stop if companion has more cells than this one\r\n  if ( selectIndex >= this.cells.length ) {\r\n    return;\r\n  }\r\n\r\n  var selectedCells = this.cells.slice( firstIndex, lastIndex + 1 );\r\n  this.navSelectedElements = selectedCells.map( function( cell ) {\r\n    return cell.element;\r\n  });\r\n  this.changeNavSelectedClass('add');\r\n};\r\n\r\nfunction lerp( a, b, t ) {\r\n  return ( b - a ) * t + a;\r\n}\r\n\r\nproto.changeNavSelectedClass = function( method ) {\r\n  this.navSelectedElements.forEach( function( navElem ) {\r\n    navElem.classList[ method ]('is-nav-selected');\r\n  });\r\n};\r\n\r\nproto.activateAsNavFor = function() {\r\n  this.navCompanionSelect( true );\r\n};\r\n\r\nproto.removeNavSelectedElements = function() {\r\n  if ( !this.navSelectedElements ) {\r\n    return;\r\n  }\r\n  this.changeNavSelectedClass('remove');\r\n  delete this.navSelectedElements;\r\n};\r\n\r\nproto.onNavStaticClick = function( event, pointer, cellElement, cellIndex ) {\r\n  if ( typeof cellIndex == 'number' ) {\r\n    this.navCompanion.selectCell( cellIndex );\r\n  }\r\n};\r\n\r\nproto.deactivateAsNavFor = function() {\r\n  this.removeNavSelectedElements();\r\n};\r\n\r\nproto.destroyAsNavFor = function() {\r\n  if ( !this.navCompanion ) {\r\n    return;\r\n  }\r\n  this.navCompanion.off( 'select', this.onNavCompanionSelect );\r\n  this.off( 'staticClick', this.onNavStaticClick );\r\n  delete this.navCompanion;\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n/*!\r\n * imagesLoaded v4.1.4\r\n * JavaScript is all like \"You images are done yet or what?\"\r\n * MIT License\r\n */\r\n\r\n( function( window, factory ) { 'use strict';\r\n  // universal module definition\r\n\r\n  /*global define: false, module: false, require: false */\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'imagesloaded/imagesloaded',[\r\n      'ev-emitter/ev-emitter'\r\n    ], function( EvEmitter ) {\r\n      return factory( window, EvEmitter );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('ev-emitter')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.imagesLoaded = factory(\r\n      window,\r\n      window.EvEmitter\r\n    );\r\n  }\r\n\r\n})( typeof window !== 'undefined' ? window : this,\r\n\r\n// --------------------------  factory -------------------------- //\r\n\r\nfunction factory( window, EvEmitter ) {\r\n\r\n\r\n\r\nvar $ = window.jQuery;\r\nvar console = window.console;\r\n\r\n// -------------------------- helpers -------------------------- //\r\n\r\n// extend objects\r\nfunction extend( a, b ) {\r\n  for ( var prop in b ) {\r\n    a[ prop ] = b[ prop ];\r\n  }\r\n  return a;\r\n}\r\n\r\nvar arraySlice = Array.prototype.slice;\r\n\r\n// turn element or nodeList into an array\r\nfunction makeArray( obj ) {\r\n  if ( Array.isArray( obj ) ) {\r\n    // use object if already an array\r\n    return obj;\r\n  }\r\n\r\n  var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\r\n  if ( isArrayLike ) {\r\n    // convert nodeList to array\r\n    return arraySlice.call( obj );\r\n  }\r\n\r\n  // array of single index\r\n  return [ obj ];\r\n}\r\n\r\n// -------------------------- imagesLoaded -------------------------- //\r\n\r\n/**\r\n * @param {Array, Element, NodeList, String} elem\r\n * @param {Object or Function} options - if function, use as callback\r\n * @param {Function} onAlways - callback function\r\n */\r\nfunction ImagesLoaded( elem, options, onAlways ) {\r\n  // coerce ImagesLoaded() without new, to be new ImagesLoaded()\r\n  if ( !( this instanceof ImagesLoaded ) ) {\r\n    return new ImagesLoaded( elem, options, onAlways );\r\n  }\r\n  // use elem as selector string\r\n  var queryElem = elem;\r\n  if ( typeof elem == 'string' ) {\r\n    queryElem = document.querySelectorAll( elem );\r\n  }\r\n  // bail if bad element\r\n  if ( !queryElem ) {\r\n    console.error( 'Bad element for imagesLoaded ' + ( queryElem || elem ) );\r\n    return;\r\n  }\r\n\r\n  this.elements = makeArray( queryElem );\r\n  this.options = extend( {}, this.options );\r\n  // shift arguments if no options set\r\n  if ( typeof options == 'function' ) {\r\n    onAlways = options;\r\n  } else {\r\n    extend( this.options, options );\r\n  }\r\n\r\n  if ( onAlways ) {\r\n    this.on( 'always', onAlways );\r\n  }\r\n\r\n  this.getImages();\r\n\r\n  if ( $ ) {\r\n    // add jQuery Deferred object\r\n    this.jqDeferred = new $.Deferred();\r\n  }\r\n\r\n  // HACK check async to allow time to bind listeners\r\n  setTimeout( this.check.bind( this ) );\r\n}\r\n\r\nImagesLoaded.prototype = Object.create( EvEmitter.prototype );\r\n\r\nImagesLoaded.prototype.options = {};\r\n\r\nImagesLoaded.prototype.getImages = function() {\r\n  this.images = [];\r\n\r\n  // filter & find items if we have an item selector\r\n  this.elements.forEach( this.addElementImages, this );\r\n};\r\n\r\n/**\r\n * @param {Node} element\r\n */\r\nImagesLoaded.prototype.addElementImages = function( elem ) {\r\n  // filter siblings\r\n  if ( elem.nodeName == 'IMG' ) {\r\n    this.addImage( elem );\r\n  }\r\n  // get background image on element\r\n  if ( this.options.background === true ) {\r\n    this.addElementBackgroundImages( elem );\r\n  }\r\n\r\n  // find children\r\n  // no non-element nodes, #143\r\n  var nodeType = elem.nodeType;\r\n  if ( !nodeType || !elementNodeTypes[ nodeType ] ) {\r\n    return;\r\n  }\r\n  var childImgs = elem.querySelectorAll('img');\r\n  // concat childElems to filterFound array\r\n  for ( var i=0; i < childImgs.length; i++ ) {\r\n    var img = childImgs[i];\r\n    this.addImage( img );\r\n  }\r\n\r\n  // get child background images\r\n  if ( typeof this.options.background == 'string' ) {\r\n    var children = elem.querySelectorAll( this.options.background );\r\n    for ( i=0; i < children.length; i++ ) {\r\n      var child = children[i];\r\n      this.addElementBackgroundImages( child );\r\n    }\r\n  }\r\n};\r\n\r\nvar elementNodeTypes = {\r\n  1: true,\r\n  9: true,\r\n  11: true\r\n};\r\n\r\nImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\r\n  var style = getComputedStyle( elem );\r\n  if ( !style ) {\r\n    // Firefox returns null if in a hidden iframe https://bugzil.la/548397\r\n    return;\r\n  }\r\n  // get url inside url(\"...\")\r\n  var reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\r\n  var matches = reURL.exec( style.backgroundImage );\r\n  while ( matches !== null ) {\r\n    var url = matches && matches[2];\r\n    if ( url ) {\r\n      this.addBackground( url, elem );\r\n    }\r\n    matches = reURL.exec( style.backgroundImage );\r\n  }\r\n};\r\n\r\n/**\r\n * @param {Image} img\r\n */\r\nImagesLoaded.prototype.addImage = function( img ) {\r\n  var loadingImage = new LoadingImage( img );\r\n  this.images.push( loadingImage );\r\n};\r\n\r\nImagesLoaded.prototype.addBackground = function( url, elem ) {\r\n  var background = new Background( url, elem );\r\n  this.images.push( background );\r\n};\r\n\r\nImagesLoaded.prototype.check = function() {\r\n  var _this = this;\r\n  this.progressedCount = 0;\r\n  this.hasAnyBroken = false;\r\n  // complete if no images\r\n  if ( !this.images.length ) {\r\n    this.complete();\r\n    return;\r\n  }\r\n\r\n  function onProgress( image, elem, message ) {\r\n    // HACK - Chrome triggers event before object properties have changed. #83\r\n    setTimeout( function() {\r\n      _this.progress( image, elem, message );\r\n    });\r\n  }\r\n\r\n  this.images.forEach( function( loadingImage ) {\r\n    loadingImage.once( 'progress', onProgress );\r\n    loadingImage.check();\r\n  });\r\n};\r\n\r\nImagesLoaded.prototype.progress = function( image, elem, message ) {\r\n  this.progressedCount++;\r\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\r\n  // progress event\r\n  this.emitEvent( 'progress', [ this, image, elem ] );\r\n  if ( this.jqDeferred && this.jqDeferred.notify ) {\r\n    this.jqDeferred.notify( this, image );\r\n  }\r\n  // check if completed\r\n  if ( this.progressedCount == this.images.length ) {\r\n    this.complete();\r\n  }\r\n\r\n  if ( this.options.debug && console ) {\r\n    console.log( 'progress: ' + message, image, elem );\r\n  }\r\n};\r\n\r\nImagesLoaded.prototype.complete = function() {\r\n  var eventName = this.hasAnyBroken ? 'fail' : 'done';\r\n  this.isComplete = true;\r\n  this.emitEvent( eventName, [ this ] );\r\n  this.emitEvent( 'always', [ this ] );\r\n  if ( this.jqDeferred ) {\r\n    var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\r\n    this.jqDeferred[ jqMethod ]( this );\r\n  }\r\n};\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nfunction LoadingImage( img ) {\r\n  this.img = img;\r\n}\r\n\r\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\r\n\r\nLoadingImage.prototype.check = function() {\r\n  // If complete is true and browser supports natural sizes,\r\n  // try to check for image status manually.\r\n  var isComplete = this.getIsImageComplete();\r\n  if ( isComplete ) {\r\n    // report based on naturalWidth\r\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\r\n    return;\r\n  }\r\n\r\n  // If none of the checks above matched, simulate loading on detached element.\r\n  this.proxyImage = new Image();\r\n  this.proxyImage.addEventListener( 'load', this );\r\n  this.proxyImage.addEventListener( 'error', this );\r\n  // bind to image as well for Firefox. #191\r\n  this.img.addEventListener( 'load', this );\r\n  this.img.addEventListener( 'error', this );\r\n  this.proxyImage.src = this.img.src;\r\n};\r\n\r\nLoadingImage.prototype.getIsImageComplete = function() {\r\n  // check for non-zero, non-undefined naturalWidth\r\n  // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\r\n  return this.img.complete && this.img.naturalWidth;\r\n};\r\n\r\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\r\n  this.isLoaded = isLoaded;\r\n  this.emitEvent( 'progress', [ this, this.img, message ] );\r\n};\r\n\r\n// ----- events ----- //\r\n\r\n// trigger specified handler for event type\r\nLoadingImage.prototype.handleEvent = function( event ) {\r\n  var method = 'on' + event.type;\r\n  if ( this[ method ] ) {\r\n    this[ method ]( event );\r\n  }\r\n};\r\n\r\nLoadingImage.prototype.onload = function() {\r\n  this.confirm( true, 'onload' );\r\n  this.unbindEvents();\r\n};\r\n\r\nLoadingImage.prototype.onerror = function() {\r\n  this.confirm( false, 'onerror' );\r\n  this.unbindEvents();\r\n};\r\n\r\nLoadingImage.prototype.unbindEvents = function() {\r\n  this.proxyImage.removeEventListener( 'load', this );\r\n  this.proxyImage.removeEventListener( 'error', this );\r\n  this.img.removeEventListener( 'load', this );\r\n  this.img.removeEventListener( 'error', this );\r\n};\r\n\r\n// -------------------------- Background -------------------------- //\r\n\r\nfunction Background( url, element ) {\r\n  this.url = url;\r\n  this.element = element;\r\n  this.img = new Image();\r\n}\r\n\r\n// inherit LoadingImage prototype\r\nBackground.prototype = Object.create( LoadingImage.prototype );\r\n\r\nBackground.prototype.check = function() {\r\n  this.img.addEventListener( 'load', this );\r\n  this.img.addEventListener( 'error', this );\r\n  this.img.src = this.url;\r\n  // check if image is already complete\r\n  var isComplete = this.getIsImageComplete();\r\n  if ( isComplete ) {\r\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\r\n    this.unbindEvents();\r\n  }\r\n};\r\n\r\nBackground.prototype.unbindEvents = function() {\r\n  this.img.removeEventListener( 'load', this );\r\n  this.img.removeEventListener( 'error', this );\r\n};\r\n\r\nBackground.prototype.confirm = function( isLoaded, message ) {\r\n  this.isLoaded = isLoaded;\r\n  this.emitEvent( 'progress', [ this, this.element, message ] );\r\n};\r\n\r\n// -------------------------- jQuery -------------------------- //\r\n\r\nImagesLoaded.makeJQueryPlugin = function( jQuery ) {\r\n  jQuery = jQuery || window.jQuery;\r\n  if ( !jQuery ) {\r\n    return;\r\n  }\r\n  // set local variable\r\n  $ = jQuery;\r\n  // $().imagesLoaded()\r\n  $.fn.imagesLoaded = function( options, callback ) {\r\n    var instance = new ImagesLoaded( this, options, callback );\r\n    return instance.jqDeferred.promise( $(this) );\r\n  };\r\n};\r\n// try making plugin\r\nImagesLoaded.makeJQueryPlugin();\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nreturn ImagesLoaded;\r\n\r\n});\r\n\r\n/*!\r\n * Flickity imagesLoaded v2.0.0\r\n * enables imagesLoaded option for Flickity\r\n */\r\n\r\n/*jshint browser: true, strict: true, undef: true, unused: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /*globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( [\r\n      'flickity/js/index',\r\n      'imagesloaded/imagesloaded'\r\n    ], function( Flickity, imagesLoaded ) {\r\n      return factory( window, Flickity, imagesLoaded );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('flickity'),\r\n      require('imagesloaded')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = factory(\r\n      window,\r\n      window.Flickity,\r\n      window.imagesLoaded\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, imagesLoaded ) {\r\n'use strict';\r\n\r\nFlickity.createMethods.push('_createImagesLoaded');\r\n\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createImagesLoaded = function() {\r\n  this.on( 'activate', this.imagesLoaded );\r\n};\r\n\r\nproto.imagesLoaded = function() {\r\n  if ( !this.options.imagesLoaded ) {\r\n    return;\r\n  }\r\n  var _this = this;\r\n  function onImagesLoadedProgress( instance, image ) {\r\n    var cell = _this.getParentCell( image.img );\r\n    _this.cellSizeChange( cell && cell.element );\r\n    if ( !_this.options.freeScroll ) {\r\n      _this.positionSliderAtSelected();\r\n    }\r\n  }\r\n  imagesLoaded( this.slider ).on( 'progress', onImagesLoadedProgress );\r\n};\r\n\r\nreturn Flickity;\r\n\r\n}));","/*\r\n * jQuery Form Styler v2.0.2\r\n * https://github.com/Dimox/jQueryFormStyler\r\n *\r\n * Copyright 2012-2017 Dimox (http://dimox.name/)\r\n * Released under the MIT license.\r\n *\r\n * Date: 2017.10.22\r\n *\r\n */\r\n\r\n;(function(factory) {\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\t// AMD\r\n\t\tdefine(['jquery'], factory);\r\n\t} else if (typeof exports === 'object') {\r\n\t\t// CommonJS\r\n\t\tmodule.exports = factory($ || require('jquery'));\r\n\t} else {\r\n\t\tfactory(jQuery);\r\n\t}\r\n}(function($) {\r\n\r\n\t'use strict';\r\n\r\n\tvar pluginName = 'styler',\r\n\t\t\tdefaults = {\r\n\t\t\t\tidSuffix: '-styler',\r\n\t\t\t\tfilePlaceholder: 'Файл не выбран',\r\n\t\t\t\tfileBrowse: 'Обзор...',\r\n\t\t\t\tfileNumber: 'Выбрано файлов: %s',\r\n\t\t\t\tselectPlaceholder: 'Выберите...',\r\n\t\t\t\tselectSearch: false,\r\n\t\t\t\tselectSearchLimit: 10,\r\n\t\t\t\tselectSearchNotFound: 'Совпадений не найдено',\r\n\t\t\t\tselectSearchPlaceholder: 'Поиск...',\r\n\t\t\t\tselectVisibleOptions: 0,\r\n\t\t\t\tselectSmartPositioning: true,\r\n\t\t\t\tlocale: 'ru',\r\n\t\t\t\tlocales: {\r\n\t\t\t\t\t'en': {\r\n\t\t\t\t\t\tfilePlaceholder: 'No file selected',\r\n\t\t\t\t\t\tfileBrowse: 'Browse...',\r\n\t\t\t\t\t\tfileNumber: 'Selected files: %s',\r\n\t\t\t\t\t\tselectPlaceholder: 'Select...',\r\n\t\t\t\t\t\tselectSearchNotFound: 'No matches found',\r\n\t\t\t\t\t\tselectSearchPlaceholder: 'Search...'\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tonSelectOpened: function() {},\r\n\t\t\t\tonSelectClosed: function() {},\r\n\t\t\t\tonFormStyled: function() {}\r\n\t\t\t};\r\n\r\n\tfunction Plugin(element, options) {\r\n\t\tthis.element = element;\r\n\t\tthis.options = $.extend({}, defaults, options);\r\n\t\tvar locale = this.options.locale;\r\n\t\tif (this.options.locales[locale] !== undefined) {\r\n\t\t\t$.extend(this.options, this.options.locales[locale]);\r\n\t\t}\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tPlugin.prototype = {\r\n\r\n\t\t// инициализация\r\n\t\tinit: function() {\r\n\r\n\t\t\tvar el = $(this.element);\r\n\t\t\tvar opt = this.options;\r\n\r\n\t\t\tvar iOS = (navigator.userAgent.match(/(iPad|iPhone|iPod)/i) && !navigator.userAgent.match(/(Windows\\sPhone)/i)) ? true : false;\r\n\t\t\tvar Android = (navigator.userAgent.match(/Android/i) && !navigator.userAgent.match(/(Windows\\sPhone)/i)) ? true : false;\r\n\r\n\t\t\tfunction Attributes() {\r\n\t\t\t\tif (el.attr('id') !== undefined && el.attr('id') !== '') {\r\n\t\t\t\t\tthis.id = el.attr('id') + opt.idSuffix;\r\n\t\t\t\t}\r\n\t\t\t\tthis.title = el.attr('title');\r\n\t\t\t\tthis.classes = el.attr('class');\r\n\t\t\t\tthis.data = el.data();\r\n\t\t\t}\r\n\r\n\t\t\t// checkbox\r\n\t\t\tif (el.is(':checkbox')) {\r\n\r\n\t\t\t\tvar checkboxOutput = function() {\r\n\r\n\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\tvar checkbox = $('<div class=\"jq-checkbox\"><div class=\"jq-checkbox__div\"></div></div>')\r\n\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t;\r\n\r\n\t\t\t\t\tel.after(checkbox).prependTo(checkbox);\r\n\t\t\t\t\tif (el.is(':checked')) checkbox.addClass('checked');\r\n\t\t\t\t\tif (el.is(':disabled')) checkbox.addClass('disabled');\r\n\r\n\t\t\t\t\t// клик на псевдочекбокс\r\n\t\t\t\t\tcheckbox.click(function(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tel.triggerHandler('click');\r\n\t\t\t\t\t\tif (!checkbox.is('.disabled')) {\r\n\t\t\t\t\t\t\tif (el.is(':checked')) {\r\n\t\t\t\t\t\t\t\tel.prop('checked', false);\r\n\t\t\t\t\t\t\t\tcheckbox.removeClass('checked');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tel.prop('checked', true);\r\n\t\t\t\t\t\t\t\tcheckbox.addClass('checked');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tel.focus().change();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// клик на label\r\n\t\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').on('click.styler', function(e) {\r\n\t\t\t\t\t\tif (!$(e.target).is('a') && !$(e.target).closest(checkbox).length) {\r\n\t\t\t\t\t\t\tcheckbox.triggerHandler('click');\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// переключение по Space или Enter\r\n\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\tif (el.is(':checked')) checkbox.addClass('checked');\r\n\t\t\t\t\t\telse checkbox.removeClass('checked');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// чтобы переключался чекбокс, который находится в теге label\r\n\t\t\t\t\t.on('keydown.styler', function(e) {\r\n\t\t\t\t\t\tif (e.which == 32) checkbox.click();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\tif (!checkbox.is('.disabled')) checkbox.addClass('focused');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\tcheckbox.removeClass('focused');\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}; // end checkboxOutput()\r\n\r\n\t\t\t\tcheckboxOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').off('.styler');\r\n\t\t\t\t\tel.off('.styler').parent().before(el).remove();\r\n\t\t\t\t\tcheckboxOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end checkbox\r\n\r\n\t\t\t// radio\r\n\t\t\t} else if (el.is(':radio')) {\r\n\r\n\t\t\t\tvar radioOutput = function() {\r\n\r\n\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\tvar radio = $('<div class=\"jq-radio\"><div class=\"jq-radio__div\"></div></div>')\r\n\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t;\r\n\r\n\t\t\t\t\tel.after(radio).prependTo(radio);\r\n\t\t\t\t\tif (el.is(':checked')) radio.addClass('checked');\r\n\t\t\t\t\tif (el.is(':disabled')) radio.addClass('disabled');\r\n\r\n\t\t\t\t\t// определяем общего родителя у радиокнопок с одинаковым name\r\n\t\t\t\t\t// http://stackoverflow.com/a/27733847\r\n\t\t\t\t\t$.fn.commonParents = function() {\r\n\t\t\t\t\t\tvar cachedThis = this;\r\n\t\t\t\t\t\treturn cachedThis.first().parents().filter(function() {\r\n\t\t\t\t\t\t\treturn $(this).find(cachedThis).length === cachedThis.length;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t\t$.fn.commonParent = function() {\r\n\t\t\t\t\t\treturn $(this).commonParents().first();\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// клик на псевдорадиокнопке\r\n\t\t\t\t\tradio.click(function(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tel.triggerHandler('click');\r\n\t\t\t\t\t\tif (!radio.is('.disabled')) {\r\n\t\t\t\t\t\t\tvar inputName = $('input[name=\"' + el.attr('name') + '\"]');\r\n\t\t\t\t\t\t\tinputName.commonParent().find(inputName).prop('checked', false).parent().removeClass('checked');\r\n\t\t\t\t\t\t\tel.prop('checked', true).parent().addClass('checked');\r\n\t\t\t\t\t\t\tel.focus().change();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// клик на label\r\n\t\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').on('click.styler', function(e) {\r\n\t\t\t\t\t\tif (!$(e.target).is('a') && !$(e.target).closest(radio).length) {\r\n\t\t\t\t\t\t\tradio.triggerHandler('click');\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// переключение стрелками\r\n\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\tel.parent().addClass('checked');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\tif (!radio.is('.disabled')) radio.addClass('focused');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\tradio.removeClass('focused');\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}; // end radioOutput()\r\n\r\n\t\t\t\tradioOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').off('.styler');\r\n\t\t\t\t\tel.off('.styler').parent().before(el).remove();\r\n\t\t\t\t\tradioOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end radio\r\n\r\n\t\t\t// file\r\n\t\t\t} else if (el.is(':file')) {\r\n\r\n\t\t\t\tvar fileOutput = function() {\r\n\r\n\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\tvar placeholder = el.data('placeholder');\r\n\t\t\t\t\tif (placeholder === undefined) placeholder = opt.filePlaceholder;\r\n\t\t\t\t\tvar browse = el.data('browse');\r\n\t\t\t\t\tif (browse === undefined || browse === '') browse = opt.fileBrowse;\r\n\r\n\t\t\t\t\tvar file =\r\n\t\t\t\t\t\t$('<div class=\"jq-file\">' +\r\n\t\t\t\t\t\t\t\t'<div class=\"jq-file__name\">' + placeholder + '</div>' +\r\n\t\t\t\t\t\t\t\t'<div class=\"jq-file__browse\">' + browse + '</div>' +\r\n\t\t\t\t\t\t\t'</div>')\r\n\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t;\r\n\r\n\t\t\t\t\tel.after(file).appendTo(file);\r\n\t\t\t\t\tif (el.is(':disabled')) file.addClass('disabled');\r\n\r\n\t\t\t\t\tvar value = el.val();\r\n\t\t\t\t\tvar name = $('div.jq-file__name', file);\r\n\r\n\t\t\t\t\t// чтобы при динамическом изменении имя файла не сбрасывалось\r\n\t\t\t\t\tif (value) name.text(value.replace(/.+[\\\\\\/]/, ''));\r\n\r\n\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\tvar value = el.val();\r\n\t\t\t\t\t\tif (el.is('[multiple]')) {\r\n\t\t\t\t\t\t\tvalue = '';\r\n\t\t\t\t\t\t\tvar files = el[0].files.length;\r\n\t\t\t\t\t\t\tif (files > 0) {\r\n\t\t\t\t\t\t\t\tvar number = el.data('number');\r\n\t\t\t\t\t\t\t\tif (number === undefined) number = opt.fileNumber;\r\n\t\t\t\t\t\t\t\tnumber = number.replace('%s', files);\r\n\t\t\t\t\t\t\t\tvalue = number;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tname.text(value.replace(/.+[\\\\\\/]/, ''));\r\n\t\t\t\t\t\tif (value === '') {\r\n\t\t\t\t\t\t\tname.text(placeholder);\r\n\t\t\t\t\t\t\tfile.removeClass('changed');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfile.addClass('changed');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\tfile.addClass('focused');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\tfile.removeClass('focused');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('click.styler', function() {\r\n\t\t\t\t\t\tfile.removeClass('focused');\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}; // end fileOutput()\r\n\r\n\t\t\t\tfileOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.off('.styler').parent().before(el).remove();\r\n\t\t\t\t\tfileOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end file\r\n\r\n\t\t\t// number\r\n\t\t\t} else if (el.is('input[type=\"number\"]')) {\r\n\r\n\t\t\t\tvar numberOutput = function() {\r\n\r\n\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\tvar number =\r\n\t\t\t\t\t\t$('<div class=\"jq-number\">' +\r\n\t\t\t\t\t\t\t\t'<div class=\"jq-number__spin minus\"></div>' +\r\n\t\t\t\t\t\t\t\t'<div class=\"jq-number__spin plus\"></div>' +\r\n\t\t\t\t\t\t\t'</div>')\r\n\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t;\r\n\r\n\t\t\t\t\tel.after(number).prependTo(number).wrap('<div class=\"jq-number__field\"></div>');\r\n\t\t\t\t\tif (el.is(':disabled')) number.addClass('disabled');\r\n\r\n\t\t\t\t\tvar min,\r\n\t\t\t\t\t\t\tmax,\r\n\t\t\t\t\t\t\tstep,\r\n\t\t\t\t\t\t\ttimeout = null,\r\n\t\t\t\t\t\t\tinterval = null;\r\n\t\t\t\t\tif (el.attr('min') !== undefined) min = el.attr('min');\r\n\t\t\t\t\tif (el.attr('max') !== undefined) max = el.attr('max');\r\n\t\t\t\t\tif (el.attr('step') !== undefined && $.isNumeric(el.attr('step')))\r\n\t\t\t\t\t\tstep = Number(el.attr('step'));\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tstep = Number(1);\r\n\r\n\t\t\t\t\tvar changeValue = function(spin) {\r\n\t\t\t\t\t\tvar value = el.val(),\r\n\t\t\t\t\t\t\t\tnewValue;\r\n\r\n\t\t\t\t\t\tif (!$.isNumeric(value)) {\r\n\t\t\t\t\t\t\tvalue = 0;\r\n\t\t\t\t\t\t\tel.val('0');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (spin.is('.minus')) {\r\n\t\t\t\t\t\t\tnewValue = Number(value) - step;\r\n\t\t\t\t\t\t} else if (spin.is('.plus')) {\r\n\t\t\t\t\t\t\tnewValue = Number(value) + step;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// определяем количество десятичных знаков после запятой в step\r\n\t\t\t\t\t\tvar decimals = (step.toString().split('.')[1] || []).length;\r\n\t\t\t\t\t\tif (decimals > 0) {\r\n\t\t\t\t\t\t\tvar multiplier = '1';\r\n\t\t\t\t\t\t\twhile (multiplier.length <= decimals) multiplier = multiplier + '0';\r\n\t\t\t\t\t\t\t// избегаем появления лишних знаков после запятой\r\n\t\t\t\t\t\t\tnewValue = Math.round(newValue * multiplier) / multiplier;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ($.isNumeric(min) && $.isNumeric(max)) {\r\n\t\t\t\t\t\t\tif (newValue >= min && newValue <= max) el.val(newValue);\r\n\t\t\t\t\t\t} else if ($.isNumeric(min) && !$.isNumeric(max)) {\r\n\t\t\t\t\t\t\tif (newValue >= min) el.val(newValue);\r\n\t\t\t\t\t\t} else if (!$.isNumeric(min) && $.isNumeric(max)) {\r\n\t\t\t\t\t\t\tif (newValue <= max) el.val(newValue);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tel.val(newValue);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (!number.is('.disabled')) {\r\n\t\t\t\t\t\tnumber.on('mousedown', 'div.jq-number__spin', function() {\r\n\t\t\t\t\t\t\tvar spin = $(this);\r\n\t\t\t\t\t\t\tchangeValue(spin);\r\n\t\t\t\t\t\t\ttimeout = setTimeout(function(){\r\n\t\t\t\t\t\t\t\tinterval = setInterval(function(){ changeValue(spin); }, 40);\r\n\t\t\t\t\t\t\t}, 350);\r\n\t\t\t\t\t\t}).on('mouseup mouseout', 'div.jq-number__spin', function() {\r\n\t\t\t\t\t\t\tclearTimeout(timeout);\r\n\t\t\t\t\t\t\tclearInterval(interval);\r\n\t\t\t\t\t\t}).on('mouseup', 'div.jq-number__spin', function() {\r\n\t\t\t\t\t\t\tel.change().trigger('input');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tel.on('focus.styler', function() {\r\n\t\t\t\t\t\t\tnumber.addClass('focused');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\t\tnumber.removeClass('focused');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}; // end numberOutput()\r\n\r\n\t\t\t\tnumberOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.off('.styler').closest('.jq-number').before(el).remove();\r\n\t\t\t\t\tnumberOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end number\r\n\r\n\t\t\t// select\r\n\t\t\t} else if (el.is('select')) {\r\n\r\n\t\t\t\tvar selectboxOutput = function() {\r\n\r\n\t\t\t\t\t// запрещаем прокрутку страницы при прокрутке селекта\r\n\t\t\t\t\tfunction preventScrolling(selector) {\r\n\r\n\t\t\t\t\t\tvar scrollDiff = selector.prop('scrollHeight') - selector.outerHeight(),\r\n\t\t\t\t\t\t\t\twheelDelta = null,\r\n\t\t\t\t\t\t\t\tscrollTop = null;\r\n\r\n\t\t\t\t\t\tselector.off('mousewheel DOMMouseScroll').on('mousewheel DOMMouseScroll', function(e) {\r\n\r\n\t\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t\t * нормализация направления прокрутки\r\n\t\t\t\t\t\t\t * (firefox < 0 || chrome etc... > 0)\r\n\t\t\t\t\t\t\t * (e.originalEvent.detail < 0 || e.originalEvent.wheelDelta > 0)\r\n\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\twheelDelta = (e.originalEvent.detail < 0 || e.originalEvent.wheelDelta > 0) ? 1 : -1; // направление прокрутки (-1 вниз, 1 вверх)\r\n\t\t\t\t\t\t\tscrollTop = selector.scrollTop(); // позиция скролла\r\n\r\n\t\t\t\t\t\t\tif ((scrollTop >= scrollDiff && wheelDelta < 0) || (scrollTop <= 0 && wheelDelta > 0)) {\r\n\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar option = $('option', el);\r\n\t\t\t\t\tvar list = '';\r\n\t\t\t\t\t// формируем список селекта\r\n\t\t\t\t\tfunction makeList() {\r\n\t\t\t\t\t\tfor (var i = 0; i < option.length; i++) {\r\n\t\t\t\t\t\t\tvar op = option.eq(i);\r\n\t\t\t\t\t\t\tvar li = '',\r\n\t\t\t\t\t\t\t\t\tliClass = '',\r\n\t\t\t\t\t\t\t\t\tliClasses = '',\r\n\t\t\t\t\t\t\t\t\tid = '',\r\n\t\t\t\t\t\t\t\t\ttitle = '',\r\n\t\t\t\t\t\t\t\t\tdataList = '',\r\n\t\t\t\t\t\t\t\t\toptionClass = '',\r\n\t\t\t\t\t\t\t\t\toptgroupClass = '',\r\n\t\t\t\t\t\t\t\t\tdataJqfsClass = '';\r\n\t\t\t\t\t\t\tvar disabled = 'disabled';\r\n\t\t\t\t\t\t\tvar selDis = 'selected sel disabled';\r\n\t\t\t\t\t\t\tif (op.prop('selected')) liClass = 'selected sel';\r\n\t\t\t\t\t\t\tif (op.is(':disabled')) liClass = disabled;\r\n\t\t\t\t\t\t\tif (op.is(':selected:disabled')) liClass = selDis;\r\n\t\t\t\t\t\t\tif (op.attr('id') !== undefined && op.attr('id') !== '') id = ' id=\"' + op.attr('id') + opt.idSuffix + '\"';\r\n\t\t\t\t\t\t\tif (op.attr('title') !== undefined && option.attr('title') !== '') title = ' title=\"' + op.attr('title') + '\"';\r\n\t\t\t\t\t\t\tif (op.attr('class') !== undefined) {\r\n\t\t\t\t\t\t\t\toptionClass = ' ' + op.attr('class');\r\n\t\t\t\t\t\t\t\tdataJqfsClass = ' data-jqfs-class=\"' + op.attr('class') + '\"';\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar data = op.data();\r\n\t\t\t\t\t\t\tfor (var k in data) {\r\n\t\t\t\t\t\t\t\tif (data[k] !== '') dataList += ' data-' + k + '=\"' + data[k] + '\"';\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( (liClass + optionClass) !== '' )   liClasses = ' class=\"' + liClass + optionClass + '\"';\r\n\t\t\t\t\t\t\tli = '<li' + dataJqfsClass + dataList + liClasses + title + id + '>'+ op.html() +'</li>';\r\n\r\n\t\t\t\t\t\t\t// если есть optgroup\r\n\t\t\t\t\t\t\tif (op.parent().is('optgroup')) {\r\n\t\t\t\t\t\t\t\tif (op.parent().attr('class') !== undefined) optgroupClass = ' ' + op.parent().attr('class');\r\n\t\t\t\t\t\t\t\tli = '<li' + dataJqfsClass + dataList + ' class=\"' + liClass + optionClass + ' option' + optgroupClass + '\"' + title + id + '>'+ op.html() +'</li>';\r\n\t\t\t\t\t\t\t\tif (op.is(':first-child')) {\r\n\t\t\t\t\t\t\t\t\tli = '<li class=\"optgroup' + optgroupClass + '\">' + op.parent().attr('label') + '</li>' + li;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tlist += li;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} // end makeList()\r\n\r\n\t\t\t\t\t// одиночный селект\r\n\t\t\t\t\tfunction doSelect() {\r\n\r\n\t\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\t\tvar searchHTML = '';\r\n\t\t\t\t\t\tvar selectPlaceholder = el.data('placeholder');\r\n\t\t\t\t\t\tvar selectSearch = el.data('search');\r\n\t\t\t\t\t\tvar selectSearchLimit = el.data('search-limit');\r\n\t\t\t\t\t\tvar selectSearchNotFound = el.data('search-not-found');\r\n\t\t\t\t\t\tvar selectSearchPlaceholder = el.data('search-placeholder');\r\n\t\t\t\t\t\tvar selectSmartPositioning = el.data('smart-positioning');\r\n\r\n\t\t\t\t\t\tif (selectPlaceholder === undefined) selectPlaceholder = opt.selectPlaceholder;\r\n\t\t\t\t\t\tif (selectSearch === undefined || selectSearch === '') selectSearch = opt.selectSearch;\r\n\t\t\t\t\t\tif (selectSearchLimit === undefined || selectSearchLimit === '') selectSearchLimit = opt.selectSearchLimit;\r\n\t\t\t\t\t\tif (selectSearchNotFound === undefined || selectSearchNotFound === '') selectSearchNotFound = opt.selectSearchNotFound;\r\n\t\t\t\t\t\tif (selectSearchPlaceholder === undefined) selectSearchPlaceholder = opt.selectSearchPlaceholder;\r\n\t\t\t\t\t\tif (selectSmartPositioning === undefined || selectSmartPositioning === '') selectSmartPositioning = opt.selectSmartPositioning;\r\n\r\n\t\t\t\t\t\tvar selectbox =\r\n\t\t\t\t\t\t\t$('<div class=\"jq-selectbox jqselect\">' +\r\n\t\t\t\t\t\t\t\t\t'<div class=\"jq-selectbox__select\">' +\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"jq-selectbox__select-text\"></div>' +\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"jq-selectbox__trigger\">' +\r\n\t\t\t\t\t\t\t\t\t\t\t'<div class=\"jq-selectbox__trigger-arrow\"></div></div>' +\r\n\t\t\t\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t\t\t\t'</div>')\r\n\t\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t\t;\r\n\r\n\t\t\t\t\t\tel.after(selectbox).prependTo(selectbox);\r\n\r\n\t\t\t\t\t\tvar selectzIndex = selectbox.css('z-index');\r\n\t\t\t\t\t\tselectzIndex = (selectzIndex > 0 ) ? selectzIndex : 1;\r\n\t\t\t\t\t\tvar divSelect = $('div.jq-selectbox__select', selectbox);\r\n\t\t\t\t\t\tvar divText = $('div.jq-selectbox__select-text', selectbox);\r\n\t\t\t\t\t\tvar optionSelected = option.filter(':selected');\r\n\r\n\t\t\t\t\t\tmakeList();\r\n\r\n\t\t\t\t\t\tif (selectSearch) searchHTML =\r\n\t\t\t\t\t\t\t'<div class=\"jq-selectbox__search\"><input type=\"search\" autocomplete=\"off\" placeholder=\"' + selectSearchPlaceholder + '\"></div>' +\r\n\t\t\t\t\t\t\t'<div class=\"jq-selectbox__not-found\">' + selectSearchNotFound + '</div>';\r\n\t\t\t\t\t\tvar dropdown =\r\n\t\t\t\t\t\t\t$('<div class=\"jq-selectbox__dropdown\">' +\r\n\t\t\t\t\t\t\t\t\tsearchHTML + '<ul>' + list + '</ul>' +\r\n\t\t\t\t\t\t\t\t'</div>');\r\n\t\t\t\t\t\tselectbox.append(dropdown);\r\n\t\t\t\t\t\tvar ul = $('ul', dropdown);\r\n\t\t\t\t\t\tvar li = $('li', dropdown);\r\n\t\t\t\t\t\tvar search = $('input', dropdown);\r\n\t\t\t\t\t\tvar notFound = $('div.jq-selectbox__not-found', dropdown).hide();\r\n\t\t\t\t\t\tif (li.length < selectSearchLimit) search.parent().hide();\r\n\r\n\t\t\t\t\t\t// показываем опцию по умолчанию\r\n\t\t\t\t\t\t// если у 1-й опции нет текста, она выбрана по умолчанию и параметр selectPlaceholder не false, то показываем плейсхолдер\r\n\t\t\t\t\t\tif (option.first().text() === '' && option.first().is(':selected') && selectPlaceholder !== false) {\r\n\t\t\t\t\t\t\tdivText.text(selectPlaceholder).addClass('placeholder');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdivText.text(optionSelected.text());\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// определяем самый широкий пункт селекта\r\n\t\t\t\t\t\tvar liWidthInner = 0,\r\n\t\t\t\t\t\t\t\tliWidth = 0;\r\n\t\t\t\t\t\tli.css({'display': 'inline-block'});\r\n\t\t\t\t\t\tli.each(function() {\r\n\t\t\t\t\t\t\tvar l = $(this);\r\n\t\t\t\t\t\t\tif (l.innerWidth() > liWidthInner) {\r\n\t\t\t\t\t\t\t\tliWidthInner = l.innerWidth();\r\n\t\t\t\t\t\t\t\tliWidth = l.width();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tli.css({'display': ''});\r\n\r\n\t\t\t\t\t\t// подстраиваем ширину свернутого селекта в зависимости\r\n\t\t\t\t\t\t// от ширины плейсхолдера или самого широкого пункта\r\n\t\t\t\t\t\tif (divText.is('.placeholder') && (divText.width() > liWidthInner)) {\r\n\t\t\t\t\t\t\tdivText.width(divText.width());\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar selClone = selectbox.clone().appendTo('body').width('auto');\r\n\t\t\t\t\t\t\tvar selCloneWidth = selClone.outerWidth();\r\n\t\t\t\t\t\t\tselClone.remove();\r\n\t\t\t\t\t\t\tif (selCloneWidth == selectbox.outerWidth()) {\r\n\t\t\t\t\t\t\t\tdivText.width(liWidth);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// подстраиваем ширину выпадающего списка в зависимости от самого широкого пункта\r\n\t\t\t\t\t\tif (liWidthInner > selectbox.width()) dropdown.width(liWidthInner);\r\n\r\n\t\t\t\t\t\t// прячем 1-ю пустую опцию, если она есть и если атрибут data-placeholder не пустой\r\n\t\t\t\t\t\t// если все же нужно, чтобы первая пустая опция отображалась, то указываем у селекта: data-placeholder=\"\"\r\n\t\t\t\t\t\tif (option.first().text() === '' && el.data('placeholder') !== '') {\r\n\t\t\t\t\t\t\tli.first().hide();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar selectHeight = selectbox.outerHeight(true);\r\n\t\t\t\t\t\tvar searchHeight = search.parent().outerHeight(true) || 0;\r\n\t\t\t\t\t\tvar isMaxHeight = ul.css('max-height');\r\n\t\t\t\t\t\tvar liSelected = li.filter('.selected');\r\n\t\t\t\t\t\tif (liSelected.length < 1) li.first().addClass('selected sel');\r\n\t\t\t\t\t\tif (li.data('li-height') === undefined) {\r\n\t\t\t\t\t\t\tvar liOuterHeight = li.outerHeight();\r\n\t\t\t\t\t\t\tif (selectPlaceholder !== false) liOuterHeight = li.eq(1).outerHeight();\r\n\t\t\t\t\t\t\tli.data('li-height', liOuterHeight);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar position = dropdown.css('top');\r\n\t\t\t\t\t\tif (dropdown.css('left') == 'auto') dropdown.css({left: 0});\r\n\t\t\t\t\t\tif (dropdown.css('top') == 'auto') {\r\n\t\t\t\t\t\t\tdropdown.css({top: selectHeight});\r\n\t\t\t\t\t\t\tposition = selectHeight;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdropdown.hide();\r\n\r\n\t\t\t\t\t\t// если выбран не дефолтный пункт\r\n\t\t\t\t\t\tif (liSelected.length) {\r\n\t\t\t\t\t\t\t// добавляем класс, показывающий изменение селекта\r\n\t\t\t\t\t\t\tif (option.first().text() != optionSelected.text()) {\r\n\t\t\t\t\t\t\t\tselectbox.addClass('changed');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// передаем селекту класс выбранного пункта\r\n\t\t\t\t\t\t\tselectbox.data('jqfs-class', liSelected.data('jqfs-class'));\r\n\t\t\t\t\t\t\tselectbox.addClass(liSelected.data('jqfs-class'));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// если селект неактивный\r\n\t\t\t\t\t\tif (el.is(':disabled')) {\r\n\t\t\t\t\t\t\tselectbox.addClass('disabled');\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// при клике на псевдоселекте\r\n\t\t\t\t\t\tdivSelect.click(function() {\r\n\r\n\t\t\t\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\t\t\t\tif ($('div.jq-selectbox').filter('.opened').length) {\r\n\t\t\t\t\t\t\t\topt.onSelectClosed.call($('div.jq-selectbox').filter('.opened'));\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tel.focus();\r\n\r\n\t\t\t\t\t\t\t// если iOS, то не показываем выпадающий список,\r\n\t\t\t\t\t\t\t// т.к. отображается нативный и неизвестно, как его спрятать\r\n\t\t\t\t\t\t\tif (iOS) return;\r\n\r\n\t\t\t\t\t\t\t// умное позиционирование\r\n\t\t\t\t\t\t\tvar win = $(window);\r\n\t\t\t\t\t\t\tvar liHeight = li.data('li-height');\r\n\t\t\t\t\t\t\tvar topOffset = selectbox.offset().top;\r\n\t\t\t\t\t\t\tvar bottomOffset = win.height() - selectHeight - (topOffset - win.scrollTop());\r\n\t\t\t\t\t\t\tvar visible = el.data('visible-options');\r\n\t\t\t\t\t\t\tif (visible === undefined || visible === '') visible = opt.selectVisibleOptions;\r\n\t\t\t\t\t\t\tvar minHeight = liHeight * 5;\r\n\t\t\t\t\t\t\tvar newHeight = liHeight * visible;\r\n\t\t\t\t\t\t\tif (visible > 0 && visible < 6) minHeight = newHeight;\r\n\t\t\t\t\t\t\tif (visible === 0) newHeight = 'auto';\r\n\r\n\t\t\t\t\t\t\tvar dropDown = function() {\r\n\t\t\t\t\t\t\t\tdropdown.height('auto').css({bottom: 'auto', top: position});\r\n\t\t\t\t\t\t\t\tvar maxHeightBottom = function() {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', Math.floor((bottomOffset - 20 - searchHeight) / liHeight) * liHeight);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tmaxHeightBottom();\r\n\t\t\t\t\t\t\t\tul.css('max-height', newHeight);\r\n\t\t\t\t\t\t\t\tif (isMaxHeight != 'none') {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', isMaxHeight);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (bottomOffset < (dropdown.outerHeight() + 20)) {\r\n\t\t\t\t\t\t\t\t\tmaxHeightBottom();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tvar dropUp = function() {\r\n\t\t\t\t\t\t\t\tdropdown.height('auto').css({top: 'auto', bottom: position});\r\n\t\t\t\t\t\t\t\tvar maxHeightTop = function() {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', Math.floor((topOffset - win.scrollTop() - 20 - searchHeight) / liHeight) * liHeight);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tmaxHeightTop();\r\n\t\t\t\t\t\t\t\tul.css('max-height', newHeight);\r\n\t\t\t\t\t\t\t\tif (isMaxHeight != 'none') {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', isMaxHeight);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif ((topOffset - win.scrollTop() - 20) < (dropdown.outerHeight() + 20)) {\r\n\t\t\t\t\t\t\t\t\tmaxHeightTop();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tif (selectSmartPositioning === true || selectSmartPositioning === 1) {\r\n\t\t\t\t\t\t\t\t// раскрытие вниз\r\n\t\t\t\t\t\t\t\tif (bottomOffset > (minHeight + searchHeight + 20)) {\r\n\t\t\t\t\t\t\t\t\tdropDown();\r\n\t\t\t\t\t\t\t\t\tselectbox.removeClass('dropup').addClass('dropdown');\r\n\t\t\t\t\t\t\t\t// раскрытие вверх\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tdropUp();\r\n\t\t\t\t\t\t\t\t\tselectbox.removeClass('dropdown').addClass('dropup');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (selectSmartPositioning === false || selectSmartPositioning === 0) {\r\n\t\t\t\t\t\t\t\t// раскрытие вниз\r\n\t\t\t\t\t\t\t\tif (bottomOffset > (minHeight + searchHeight + 20)) {\r\n\t\t\t\t\t\t\t\t\tdropDown();\r\n\t\t\t\t\t\t\t\t\tselectbox.removeClass('dropup').addClass('dropdown');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// если умное позиционирование отключено\r\n\t\t\t\t\t\t\t\tdropdown.height('auto').css({bottom: 'auto', top: position});\r\n\t\t\t\t\t\t\t\tul.css('max-height', newHeight);\r\n\t\t\t\t\t\t\t\tif (isMaxHeight != 'none') {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', isMaxHeight);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// если выпадающий список выходит за правый край окна браузера,\r\n\t\t\t\t\t\t\t// то меняем позиционирование с левого на правое\r\n\t\t\t\t\t\t\tif (selectbox.offset().left + dropdown.outerWidth() > win.width()) {\r\n\t\t\t\t\t\t\t\tdropdown.css({left: 'auto', right: 0});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// конец умного позиционирования\r\n\r\n\t\t\t\t\t\t\t$('div.jqselect').css({zIndex: (selectzIndex - 1)}).removeClass('opened');\r\n\t\t\t\t\t\t\tselectbox.css({zIndex: selectzIndex});\r\n\t\t\t\t\t\t\tif (dropdown.is(':hidden')) {\r\n\t\t\t\t\t\t\t\t$('div.jq-selectbox__dropdown:visible').hide();\r\n\t\t\t\t\t\t\t\tdropdown.show();\r\n\t\t\t\t\t\t\t\tselectbox.addClass('opened focused');\r\n\t\t\t\t\t\t\t\t// колбек при открытии селекта\r\n\t\t\t\t\t\t\t\topt.onSelectOpened.call(selectbox);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdropdown.hide();\r\n\t\t\t\t\t\t\t\tselectbox.removeClass('opened dropup dropdown');\r\n\t\t\t\t\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\t\t\t\t\tif ($('div.jq-selectbox').filter('.opened').length) {\r\n\t\t\t\t\t\t\t\t\topt.onSelectClosed.call(selectbox);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// поисковое поле\r\n\t\t\t\t\t\t\tif (search.length) {\r\n\t\t\t\t\t\t\t\tsearch.val('').keyup();\r\n\t\t\t\t\t\t\t\tnotFound.hide();\r\n\t\t\t\t\t\t\t\tsearch.keyup(function() {\r\n\t\t\t\t\t\t\t\t\tvar query = $(this).val();\r\n\t\t\t\t\t\t\t\t\tli.each(function() {\r\n\t\t\t\t\t\t\t\t\t\tif (!$(this).html().match(new RegExp('.*?' + query + '.*?', 'i'))) {\r\n\t\t\t\t\t\t\t\t\t\t\t$(this).hide();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t$(this).show();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t// прячем 1-ю пустую опцию\r\n\t\t\t\t\t\t\t\t\tif (option.first().text() === '' && el.data('placeholder') !== '') {\r\n\t\t\t\t\t\t\t\t\t\tli.first().hide();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (li.filter(':visible').length < 1) {\r\n\t\t\t\t\t\t\t\t\t\tnotFound.show();\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tnotFound.hide();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// прокручиваем до выбранного пункта при открытии списка\r\n\t\t\t\t\t\t\tif (li.filter('.selected').length) {\r\n\t\t\t\t\t\t\t\tif (el.val() === '') {\r\n\t\t\t\t\t\t\t\t\tul.scrollTop(0);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t// если нечетное количество видимых пунктов,\r\n\t\t\t\t\t\t\t\t\t// то высоту пункта делим пополам для последующего расчета\r\n\t\t\t\t\t\t\t\t\tif ( (ul.innerHeight() / liHeight) % 2 !== 0 ) liHeight = liHeight / 2;\r\n\t\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top - ul.innerHeight() / 2 + liHeight);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tpreventScrolling(ul);\r\n\r\n\t\t\t\t\t\t}); // end divSelect.click()\r\n\r\n\t\t\t\t\t\t// при наведении курсора на пункт списка\r\n\t\t\t\t\t\tli.hover(function() {\r\n\t\t\t\t\t\t\t$(this).siblings().removeClass('selected');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvar selectedText = li.filter('.selected').text();\r\n\r\n\t\t\t\t\t\t// при клике на пункт списка\r\n\t\t\t\t\t\tli.filter(':not(.disabled):not(.optgroup)').click(function() {\r\n\t\t\t\t\t\t\tel.focus();\r\n\t\t\t\t\t\t\tvar t = $(this);\r\n\t\t\t\t\t\t\tvar liText = t.text();\r\n\t\t\t\t\t\t\tif (!t.is('.selected')) {\r\n\t\t\t\t\t\t\t\tvar index = t.index();\r\n\t\t\t\t\t\t\t\tindex -= t.prevAll('.optgroup').length;\r\n\t\t\t\t\t\t\t\tt.addClass('selected sel').siblings().removeClass('selected sel');\r\n\t\t\t\t\t\t\t\toption.prop('selected', false).eq(index).prop('selected', true);\r\n\t\t\t\t\t\t\t\tselectedText = liText;\r\n\t\t\t\t\t\t\t\tdivText.text(liText);\r\n\r\n\t\t\t\t\t\t\t\t// передаем селекту класс выбранного пункта\r\n\t\t\t\t\t\t\t\tif (selectbox.data('jqfs-class')) selectbox.removeClass(selectbox.data('jqfs-class'));\r\n\t\t\t\t\t\t\t\tselectbox.data('jqfs-class', t.data('jqfs-class'));\r\n\t\t\t\t\t\t\t\tselectbox.addClass(t.data('jqfs-class'));\r\n\r\n\t\t\t\t\t\t\t\tel.change();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdropdown.hide();\r\n\t\t\t\t\t\t\tselectbox.removeClass('opened dropup dropdown');\r\n\t\t\t\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\t\t\t\topt.onSelectClosed.call(selectbox);\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tdropdown.mouseout(function() {\r\n\t\t\t\t\t\t\t$('li.sel', dropdown).addClass('selected');\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// изменение селекта\r\n\t\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\t\tdivText.text(option.filter(':selected').text()).removeClass('placeholder');\r\n\t\t\t\t\t\t\tli.removeClass('selected sel').not('.optgroup').eq(el[0].selectedIndex).addClass('selected sel');\r\n\t\t\t\t\t\t\t// добавляем класс, показывающий изменение селекта\r\n\t\t\t\t\t\t\tif (option.first().text() != li.filter('.selected').text()) {\r\n\t\t\t\t\t\t\t\tselectbox.addClass('changed');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tselectbox.removeClass('changed');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\t\tselectbox.addClass('focused');\r\n\t\t\t\t\t\t\t$('div.jqselect').not('.focused').removeClass('opened dropup dropdown').find('div.jq-selectbox__dropdown').hide();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\t\tselectbox.removeClass('focused');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// изменение селекта с клавиатуры\r\n\t\t\t\t\t\t.on('keydown.styler keyup.styler', function(e) {\r\n\t\t\t\t\t\t\tvar liHeight = li.data('li-height');\r\n\t\t\t\t\t\t\tif (el.val() === '') {\r\n\t\t\t\t\t\t\t\tdivText.text(selectPlaceholder).addClass('placeholder');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdivText.text(option.filter(':selected').text());\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tli.removeClass('selected sel').not('.optgroup').eq(el[0].selectedIndex).addClass('selected sel');\r\n\t\t\t\t\t\t\t// вверх, влево, Page Up, Home\r\n\t\t\t\t\t\t\tif (e.which == 38 || e.which == 37 || e.which == 33 || e.which == 36) {\r\n\t\t\t\t\t\t\t\tif (el.val() === '') {\r\n\t\t\t\t\t\t\t\t\tul.scrollTop(0);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// вниз, вправо, Page Down, End\r\n\t\t\t\t\t\t\tif (e.which == 40 || e.which == 39 || e.which == 34 || e.which == 35) {\r\n\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top - ul.innerHeight() + liHeight);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// закрываем выпадающий список при нажатии Enter\r\n\t\t\t\t\t\t\tif (e.which == 13) {\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tdropdown.hide();\r\n\t\t\t\t\t\t\t\tselectbox.removeClass('opened dropup dropdown');\r\n\t\t\t\t\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\t\t\t\t\topt.onSelectClosed.call(selectbox);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).on('keydown.styler', function(e) {\r\n\t\t\t\t\t\t\t// открываем выпадающий список при нажатии Space\r\n\t\t\t\t\t\t\tif (e.which == 32) {\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tdivSelect.click();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// прячем выпадающий список при клике за пределами селекта\r\n\t\t\t\t\t\tif (!onDocumentClick.registered) {\r\n\t\t\t\t\t\t\t$(document).on('click', onDocumentClick);\r\n\t\t\t\t\t\t\tonDocumentClick.registered = true;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} // end doSelect()\r\n\r\n\t\t\t\t\t// мультиселект\r\n\t\t\t\t\tfunction doMultipleSelect() {\r\n\r\n\t\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\t\tvar selectbox =\r\n\t\t\t\t\t\t\t$('<div class=\"jq-select-multiple jqselect\"></div>')\r\n\t\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t\t;\r\n\r\n\t\t\t\t\t\tel.after(selectbox);\r\n\r\n\t\t\t\t\t\tmakeList();\r\n\t\t\t\t\t\tselectbox.append('<ul>' + list + '</ul>');\r\n\t\t\t\t\t\tvar ul = $('ul', selectbox);\r\n\t\t\t\t\t\tvar li = $('li', selectbox);\r\n\t\t\t\t\t\tvar size = el.attr('size');\r\n\t\t\t\t\t\tvar ulHeight = ul.outerHeight();\r\n\t\t\t\t\t\tvar liHeight = li.outerHeight();\r\n\t\t\t\t\t\tif (size !== undefined && size > 0) {\r\n\t\t\t\t\t\t\tul.css({'height': liHeight * size});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tul.css({'height': liHeight * 4});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (ulHeight > selectbox.height()) {\r\n\t\t\t\t\t\t\tul.css('overflowY', 'scroll');\r\n\t\t\t\t\t\t\tpreventScrolling(ul);\r\n\t\t\t\t\t\t\t// прокручиваем до выбранного пункта\r\n\t\t\t\t\t\t\tif (li.filter('.selected').length) {\r\n\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// прячем оригинальный селект\r\n\t\t\t\t\t\tel.prependTo(selectbox);\r\n\r\n\t\t\t\t\t\t// если селект неактивный\r\n\t\t\t\t\t\tif (el.is(':disabled')) {\r\n\t\t\t\t\t\t\tselectbox.addClass('disabled');\r\n\t\t\t\t\t\t\toption.each(function() {\r\n\t\t\t\t\t\t\t\tif ($(this).is(':selected')) li.eq($(this).index()).addClass('selected');\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// если селект активный\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t// при клике на пункт списка\r\n\t\t\t\t\t\t\tli.filter(':not(.disabled):not(.optgroup)').click(function(e) {\r\n\t\t\t\t\t\t\t\tel.focus();\r\n\t\t\t\t\t\t\t\tvar clkd = $(this);\r\n\t\t\t\t\t\t\t\tif(!e.ctrlKey && !e.metaKey) clkd.addClass('selected');\r\n\t\t\t\t\t\t\t\tif(!e.shiftKey) clkd.addClass('first');\r\n\t\t\t\t\t\t\t\tif(!e.ctrlKey && !e.metaKey && !e.shiftKey) clkd.siblings().removeClass('selected first');\r\n\r\n\t\t\t\t\t\t\t\t// выделение пунктов при зажатом Ctrl\r\n\t\t\t\t\t\t\t\tif(e.ctrlKey || e.metaKey) {\r\n\t\t\t\t\t\t\t\t\tif (clkd.is('.selected')) clkd.removeClass('selected first');\r\n\t\t\t\t\t\t\t\t\t\telse clkd.addClass('selected first');\r\n\t\t\t\t\t\t\t\t\tclkd.siblings().removeClass('first');\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// выделение пунктов при зажатом Shift\r\n\t\t\t\t\t\t\t\tif(e.shiftKey) {\r\n\t\t\t\t\t\t\t\t\tvar prev = false,\r\n\t\t\t\t\t\t\t\t\t\t\tnext = false;\r\n\t\t\t\t\t\t\t\t\tclkd.siblings().removeClass('selected').siblings('.first').addClass('selected');\r\n\t\t\t\t\t\t\t\t\tclkd.prevAll().each(function() {\r\n\t\t\t\t\t\t\t\t\t\tif ($(this).is('.first')) prev = true;\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tclkd.nextAll().each(function() {\r\n\t\t\t\t\t\t\t\t\t\tif ($(this).is('.first')) next = true;\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tif (prev) {\r\n\t\t\t\t\t\t\t\t\t\tclkd.prevAll().each(function() {\r\n\t\t\t\t\t\t\t\t\t\t\tif ($(this).is('.selected')) return false;\r\n\t\t\t\t\t\t\t\t\t\t\t\telse $(this).not('.disabled, .optgroup').addClass('selected');\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (next) {\r\n\t\t\t\t\t\t\t\t\t\tclkd.nextAll().each(function() {\r\n\t\t\t\t\t\t\t\t\t\t\tif ($(this).is('.selected')) return false;\r\n\t\t\t\t\t\t\t\t\t\t\t\telse $(this).not('.disabled, .optgroup').addClass('selected');\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (li.filter('.selected').length == 1) clkd.addClass('first');\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// отмечаем выбранные мышью\r\n\t\t\t\t\t\t\t\toption.prop('selected', false);\r\n\t\t\t\t\t\t\t\tli.filter('.selected').each(function() {\r\n\t\t\t\t\t\t\t\t\tvar t = $(this);\r\n\t\t\t\t\t\t\t\t\tvar index = t.index();\r\n\t\t\t\t\t\t\t\t\tif (t.is('.option')) index -= t.prevAll('.optgroup').length;\r\n\t\t\t\t\t\t\t\t\toption.eq(index).prop('selected', true);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tel.change();\r\n\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t// отмечаем выбранные с клавиатуры\r\n\t\t\t\t\t\t\toption.each(function(i) {\r\n\t\t\t\t\t\t\t\t$(this).data('optionIndex', i);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\t\t\tli.removeClass('selected');\r\n\t\t\t\t\t\t\t\tvar arrIndexes = [];\r\n\t\t\t\t\t\t\t\toption.filter(':selected').each(function() {\r\n\t\t\t\t\t\t\t\t\tarrIndexes.push($(this).data('optionIndex'));\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tli.not('.optgroup').filter(function(i) {\r\n\t\t\t\t\t\t\t\t\treturn $.inArray(i, arrIndexes) > -1;\r\n\t\t\t\t\t\t\t\t}).addClass('selected');\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\t\t\tselectbox.addClass('focused');\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\t\t\tselectbox.removeClass('focused');\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t// прокручиваем с клавиатуры\r\n\t\t\t\t\t\t\tif (ulHeight > selectbox.height()) {\r\n\t\t\t\t\t\t\t\tel.on('keydown.styler', function(e) {\r\n\t\t\t\t\t\t\t\t\t// вверх, влево, PageUp\r\n\t\t\t\t\t\t\t\t\tif (e.which == 38 || e.which == 37 || e.which == 33) {\r\n\t\t\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top - liHeight);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t// вниз, вправо, PageDown\r\n\t\t\t\t\t\t\t\t\tif (e.which == 40 || e.which == 39 || e.which == 34) {\r\n\t\t\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected:last').position().top - ul.innerHeight() + liHeight * 2);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} // end doMultipleSelect()\r\n\r\n\t\t\t\t\tif (el.is('[multiple]')) {\r\n\r\n\t\t\t\t\t\t// если Android или iOS, то мультиселект не стилизуем\r\n\t\t\t\t\t\t// причина для Android - в стилизованном селекте нет возможности выбрать несколько пунктов\r\n\t\t\t\t\t\t// причина для iOS - в стилизованном селекте неправильно отображаются выбранные пункты\r\n\t\t\t\t\t\tif (Android || iOS) return;\r\n\r\n\t\t\t\t\t\tdoMultipleSelect();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdoSelect();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}; // end selectboxOutput()\r\n\r\n\t\t\t\tselectboxOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.off('.styler').parent().before(el).remove();\r\n\t\t\t\t\tselectboxOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end select\r\n\r\n\t\t\t// reset\r\n\t\t\t} else if (el.is(':reset')) {\r\n\t\t\t\tel.on('click', function() {\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tel.closest('form').find('input, select').trigger('refresh');\r\n\t\t\t\t\t}, 1);\r\n\t\t\t\t});\r\n\t\t\t} // end reset\r\n\r\n\t\t}, // init: function()\r\n\r\n\t\t// деструктор\r\n\t\tdestroy: function() {\r\n\r\n\t\t\tvar el = $(this.element);\r\n\r\n\t\t\tif (el.is(':checkbox') || el.is(':radio')) {\r\n\t\t\t\tel.removeData('_' + pluginName).off('.styler refresh').removeAttr('style').parent().before(el).remove();\r\n\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').off('.styler');\r\n\t\t\t} else if (el.is('input[type=\"number\"]')) {\r\n\t\t\t\tel.removeData('_' + pluginName).off('.styler refresh').closest('.jq-number').before(el).remove();\r\n\t\t\t} else if (el.is(':file') || el.is('select')) {\r\n\t\t\t\tel.removeData('_' + pluginName).off('.styler refresh').removeAttr('style').parent().before(el).remove();\r\n\t\t\t}\r\n\r\n\t\t} // destroy: function()\r\n\r\n\t}; // Plugin.prototype\r\n\r\n\t$.fn[pluginName] = function(options) {\r\n\t\tvar args = arguments;\r\n\t\tif (options === undefined || typeof options === 'object') {\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tif (!$.data(this, '_' + pluginName)) {\r\n\t\t\t\t\t$.data(this, '_' + pluginName, new Plugin(this, options));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// колбек после выполнения плагина\r\n\t\t\t.promise()\r\n\t\t\t.done(function() {\r\n\t\t\t\tvar opt = $(this[0]).data('_' + pluginName);\r\n\t\t\t\tif (opt) opt.options.onFormStyled.call();\r\n\t\t\t});\r\n\t\t\treturn this;\r\n\t\t} else if (typeof options === 'string' && options[0] !== '_' && options !== 'init') {\r\n\t\t\tvar returns;\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tvar instance = $.data(this, '_' + pluginName);\r\n\t\t\t\tif (instance instanceof Plugin && typeof instance[options] === 'function') {\r\n\t\t\t\t\treturns = instance[options].apply(instance, Array.prototype.slice.call(args, 1));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn returns !== undefined ? returns : this;\r\n\t\t}\r\n\t};\r\n\r\n\t// прячем выпадающий список при клике за пределами селекта\r\n\tfunction onDocumentClick(e) {\r\n\t\t// e.target.nodeName != 'OPTION' - добавлено для обхода бага в Opera на движке Presto\r\n\t\t// (при изменении селекта с клавиатуры срабатывает событие onclick)\r\n\t\tif (!$(e.target).parents().hasClass('jq-selectbox') && e.target.nodeName != 'OPTION') {\r\n\t\t\tif ($('div.jq-selectbox.opened').length) {\r\n\t\t\t\tvar selectbox = $('div.jq-selectbox.opened'),\r\n\t\t\t\t\t\tsearch = $('div.jq-selectbox__search input', selectbox),\r\n\t\t\t\t\t\tdropdown = $('div.jq-selectbox__dropdown', selectbox),\r\n\t\t\t\t\t\topt = selectbox.find('select').data('_' + pluginName).options;\r\n\r\n\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\topt.onSelectClosed.call(selectbox);\r\n\r\n\t\t\t\tif (search.length) search.val('').keyup();\r\n\t\t\t\tdropdown.hide().find('li.sel').addClass('selected');\r\n\t\t\t\tselectbox.removeClass('focused opened dropup dropdown');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tonDocumentClick.registered = false;\r\n\r\n}));","/**\r\n * jquery.mask.js\r\n * @version: v1.14.15\r\n * @author: Igor Escobar\r\n *\r\n * Created by Igor Escobar on 2012-03-10. Please report any bug at github.com/igorescobar/jQuery-Mask-Plugin\r\n *\r\n * Copyright (c) 2012 Igor Escobar http://igorescobar.com\r\n *\r\n * The MIT License (http://www.opensource.org/licenses/mit-license.php)\r\n *\r\n * Permission is hereby granted, free of charge, to any person\r\n * obtaining a copy of this software and associated documentation\r\n * files (the \"Software\"), to deal in the Software without\r\n * restriction, including without limitation the rights to use,\r\n * copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the\r\n * Software is furnished to do so, subject to the following\r\n * conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be\r\n * included in all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\r\n * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\r\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\r\n * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\r\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\r\n * OTHER DEALINGS IN THE SOFTWARE.\r\n */\r\n\r\n/* jshint laxbreak: true */\r\n/* jshint maxcomplexity:17 */\r\n/* global define */\r\n\r\n// UMD (Universal Module Definition) patterns for JavaScript modules that work everywhere.\r\n// https://github.com/umdjs/umd/blob/master/templates/jqueryPlugin.js\r\n(function (factory, jQuery, Zepto) {\r\n\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(['jquery'], factory);\r\n    } else if (typeof exports === 'object') {\r\n        module.exports = factory(require('jquery'));\r\n    } else {\r\n        factory(jQuery || Zepto);\r\n    }\r\n\r\n}(function ($) {\r\n    'use strict';\r\n\r\n    var Mask = function (el, mask, options) {\r\n\r\n        var p = {\r\n            invalid: [],\r\n            getCaret: function () {\r\n                try {\r\n                    var sel,\r\n                        pos = 0,\r\n                        ctrl = el.get(0),\r\n                        dSel = document.selection,\r\n                        cSelStart = ctrl.selectionStart;\r\n\r\n                    // IE Support\r\n                    if (dSel && navigator.appVersion.indexOf('MSIE 10') === -1) {\r\n                        sel = dSel.createRange();\r\n                        sel.moveStart('character', -p.val().length);\r\n                        pos = sel.text.length;\r\n                    }\r\n                    // Firefox support\r\n                    else if (cSelStart || cSelStart === '0') {\r\n                        pos = cSelStart;\r\n                    }\r\n\r\n                    return pos;\r\n                } catch (e) {}\r\n            },\r\n            setCaret: function(pos) {\r\n                try {\r\n                    if (el.is(':focus')) {\r\n                        var range, ctrl = el.get(0);\r\n\r\n                        // Firefox, WebKit, etc..\r\n                        if (ctrl.setSelectionRange) {\r\n                            ctrl.setSelectionRange(pos, pos);\r\n                        } else { // IE\r\n                            range = ctrl.createTextRange();\r\n                            range.collapse(true);\r\n                            range.moveEnd('character', pos);\r\n                            range.moveStart('character', pos);\r\n                            range.select();\r\n                        }\r\n                    }\r\n                } catch (e) {}\r\n            },\r\n            events: function() {\r\n                el\r\n                .on('keydown.mask', function(e) {\r\n                    el.data('mask-keycode', e.keyCode || e.which);\r\n                    el.data('mask-previus-value', el.val());\r\n                    el.data('mask-previus-caret-pos', p.getCaret());\r\n                    p.maskDigitPosMapOld = p.maskDigitPosMap;\r\n                })\r\n                .on($.jMaskGlobals.useInput ? 'input.mask' : 'keyup.mask', p.behaviour)\r\n                .on('paste.mask drop.mask', function() {\r\n                    setTimeout(function() {\r\n                        el.keydown().keyup();\r\n                    }, 100);\r\n                })\r\n                .on('change.mask', function(){\r\n                    el.data('changed', true);\r\n                })\r\n                .on('blur.mask', function(){\r\n                    if (oldValue !== p.val() && !el.data('changed')) {\r\n                        el.trigger('change');\r\n                    }\r\n                    el.data('changed', false);\r\n                })\r\n                // it's very important that this callback remains in this position\r\n                // otherwhise oldValue it's going to work buggy\r\n                .on('blur.mask', function() {\r\n                    oldValue = p.val();\r\n                })\r\n                // select all text on focus\r\n                .on('focus.mask', function (e) {\r\n                    if (options.selectOnFocus === true) {\r\n                        $(e.target).select();\r\n                    }\r\n                })\r\n                // clear the value if it not complete the mask\r\n                .on('focusout.mask', function() {\r\n                    if (options.clearIfNotMatch && !regexMask.test(p.val())) {\r\n                       p.val('');\r\n                   }\r\n                });\r\n            },\r\n            getRegexMask: function() {\r\n                var maskChunks = [], translation, pattern, optional, recursive, oRecursive, r;\r\n\r\n                for (var i = 0; i < mask.length; i++) {\r\n                    translation = jMask.translation[mask.charAt(i)];\r\n\r\n                    if (translation) {\r\n\r\n                        pattern = translation.pattern.toString().replace(/.{1}$|^.{1}/g, '');\r\n                        optional = translation.optional;\r\n                        recursive = translation.recursive;\r\n\r\n                        if (recursive) {\r\n                            maskChunks.push(mask.charAt(i));\r\n                            oRecursive = {digit: mask.charAt(i), pattern: pattern};\r\n                        } else {\r\n                            maskChunks.push(!optional && !recursive ? pattern : (pattern + '?'));\r\n                        }\r\n\r\n                    } else {\r\n                        maskChunks.push(mask.charAt(i).replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'));\r\n                    }\r\n                }\r\n\r\n                r = maskChunks.join('');\r\n\r\n                if (oRecursive) {\r\n                    r = r.replace(new RegExp('(' + oRecursive.digit + '(.*' + oRecursive.digit + ')?)'), '($1)?')\r\n                         .replace(new RegExp(oRecursive.digit, 'g'), oRecursive.pattern);\r\n                }\r\n\r\n                return new RegExp(r);\r\n            },\r\n            destroyEvents: function() {\r\n                el.off(['input', 'keydown', 'keyup', 'paste', 'drop', 'blur', 'focusout', ''].join('.mask '));\r\n            },\r\n            val: function(v) {\r\n                var isInput = el.is('input'),\r\n                    method = isInput ? 'val' : 'text',\r\n                    r;\r\n\r\n                if (arguments.length > 0) {\r\n                    if (el[method]() !== v) {\r\n                        el[method](v);\r\n                    }\r\n                    r = el;\r\n                } else {\r\n                    r = el[method]();\r\n                }\r\n\r\n                return r;\r\n            },\r\n            calculateCaretPosition: function() {\r\n                var oldVal = el.data('mask-previus-value') || '',\r\n                    newVal = p.getMasked(),\r\n                    caretPosNew = p.getCaret();\r\n                if (oldVal !== newVal) {\r\n                    var caretPosOld = el.data('mask-previus-caret-pos') || 0,\r\n                        newValL = newVal.length,\r\n                        oldValL = oldVal.length,\r\n                        maskDigitsBeforeCaret = 0,\r\n                        maskDigitsAfterCaret = 0,\r\n                        maskDigitsBeforeCaretAll = 0,\r\n                        maskDigitsBeforeCaretAllOld = 0,\r\n                        i = 0;\r\n\r\n                    for (i = caretPosNew; i < newValL; i++) {\r\n                        if (!p.maskDigitPosMap[i]) {\r\n                            break;\r\n                        }\r\n                        maskDigitsAfterCaret++;\r\n                    }\r\n\r\n                    for (i = caretPosNew - 1; i >= 0; i--) {\r\n                        if (!p.maskDigitPosMap[i]) {\r\n                            break;\r\n                        }\r\n                        maskDigitsBeforeCaret++;\r\n                    }\r\n\r\n                    for (i = caretPosNew - 1; i >= 0; i--) {\r\n                        if (p.maskDigitPosMap[i]) {\r\n                            maskDigitsBeforeCaretAll++;\r\n                        }\r\n                    }\r\n\r\n                    for (i = caretPosOld - 1; i >= 0; i--) {\r\n                        if (p.maskDigitPosMapOld[i]) {\r\n                            maskDigitsBeforeCaretAllOld++;\r\n                        }\r\n                    }\r\n\r\n                    // if the cursor is at the end keep it there\r\n                    if (caretPosNew > oldValL) {\r\n                      caretPosNew = newValL * 10;\r\n                    } else if (caretPosOld >= caretPosNew && caretPosOld !== oldValL) {\r\n                        if (!p.maskDigitPosMapOld[caretPosNew])  {\r\n                          var caretPos = caretPosNew;\r\n                          caretPosNew -= maskDigitsBeforeCaretAllOld - maskDigitsBeforeCaretAll;\r\n                          caretPosNew -= maskDigitsBeforeCaret;\r\n                          if (p.maskDigitPosMap[caretPosNew])  {\r\n                            caretPosNew = caretPos;\r\n                          }\r\n                        }\r\n                    }\r\n                    else if (caretPosNew > caretPosOld) {\r\n                        caretPosNew += maskDigitsBeforeCaretAll - maskDigitsBeforeCaretAllOld;\r\n                        caretPosNew += maskDigitsAfterCaret;\r\n                    }\r\n                }\r\n                return caretPosNew;\r\n            },\r\n            behaviour: function(e) {\r\n                e = e || window.event;\r\n                p.invalid = [];\r\n\r\n                var keyCode = el.data('mask-keycode');\r\n\r\n                if ($.inArray(keyCode, jMask.byPassKeys) === -1) {\r\n                    var newVal = p.getMasked(),\r\n                        caretPos = p.getCaret();\r\n\r\n                    // this is a compensation to devices/browsers that don't compensate\r\n                    // caret positioning the right way\r\n                    setTimeout(function() {\r\n                      p.setCaret(p.calculateCaretPosition());\r\n                    }, $.jMaskGlobals.keyStrokeCompensation);\r\n\r\n                    p.val(newVal);\r\n                    p.setCaret(caretPos);\r\n                    return p.callbacks(e);\r\n                }\r\n            },\r\n            getMasked: function(skipMaskChars, val) {\r\n                var buf = [],\r\n                    value = val === undefined ? p.val() : val + '',\r\n                    m = 0, maskLen = mask.length,\r\n                    v = 0, valLen = value.length,\r\n                    offset = 1, addMethod = 'push',\r\n                    resetPos = -1,\r\n                    maskDigitCount = 0,\r\n                    maskDigitPosArr = [],\r\n                    lastMaskChar,\r\n                    check;\r\n\r\n                if (options.reverse) {\r\n                    addMethod = 'unshift';\r\n                    offset = -1;\r\n                    lastMaskChar = 0;\r\n                    m = maskLen - 1;\r\n                    v = valLen - 1;\r\n                    check = function () {\r\n                        return m > -1 && v > -1;\r\n                    };\r\n                } else {\r\n                    lastMaskChar = maskLen - 1;\r\n                    check = function () {\r\n                        return m < maskLen && v < valLen;\r\n                    };\r\n                }\r\n\r\n                var lastUntranslatedMaskChar;\r\n                while (check()) {\r\n                    var maskDigit = mask.charAt(m),\r\n                        valDigit = value.charAt(v),\r\n                        translation = jMask.translation[maskDigit];\r\n\r\n                    if (translation) {\r\n                        if (valDigit.match(translation.pattern)) {\r\n                            buf[addMethod](valDigit);\r\n                             if (translation.recursive) {\r\n                                if (resetPos === -1) {\r\n                                    resetPos = m;\r\n                                } else if (m === lastMaskChar && m !== resetPos) {\r\n                                    m = resetPos - offset;\r\n                                }\r\n\r\n                                if (lastMaskChar === resetPos) {\r\n                                    m -= offset;\r\n                                }\r\n                            }\r\n                            m += offset;\r\n                        } else if (valDigit === lastUntranslatedMaskChar) {\r\n                            // matched the last untranslated (raw) mask character that we encountered\r\n                            // likely an insert offset the mask character from the last entry; fall\r\n                            // through and only increment v\r\n                            maskDigitCount--;\r\n                            lastUntranslatedMaskChar = undefined;\r\n                        } else if (translation.optional) {\r\n                            m += offset;\r\n                            v -= offset;\r\n                        } else if (translation.fallback) {\r\n                            buf[addMethod](translation.fallback);\r\n                            m += offset;\r\n                            v -= offset;\r\n                        } else {\r\n                          p.invalid.push({p: v, v: valDigit, e: translation.pattern});\r\n                        }\r\n                        v += offset;\r\n                    } else {\r\n                        if (!skipMaskChars) {\r\n                            buf[addMethod](maskDigit);\r\n                        }\r\n\r\n                        if (valDigit === maskDigit) {\r\n                            maskDigitPosArr.push(v);\r\n                            v += offset;\r\n                        } else {\r\n                            lastUntranslatedMaskChar = maskDigit;\r\n                            maskDigitPosArr.push(v + maskDigitCount);\r\n                            maskDigitCount++;\r\n                        }\r\n\r\n                        m += offset;\r\n                    }\r\n                }\r\n\r\n                var lastMaskCharDigit = mask.charAt(lastMaskChar);\r\n                if (maskLen === valLen + 1 && !jMask.translation[lastMaskCharDigit]) {\r\n                    buf.push(lastMaskCharDigit);\r\n                }\r\n\r\n                var newVal = buf.join('');\r\n                p.mapMaskdigitPositions(newVal, maskDigitPosArr, valLen);\r\n                return newVal;\r\n            },\r\n            mapMaskdigitPositions: function(newVal, maskDigitPosArr, valLen) {\r\n              var maskDiff = options.reverse ? newVal.length - valLen : 0;\r\n              p.maskDigitPosMap = {};\r\n              for (var i = 0; i < maskDigitPosArr.length; i++) {\r\n                p.maskDigitPosMap[maskDigitPosArr[i] + maskDiff] = 1;\r\n              }\r\n            },\r\n            callbacks: function (e) {\r\n                var val = p.val(),\r\n                    changed = val !== oldValue,\r\n                    defaultArgs = [val, e, el, options],\r\n                    callback = function(name, criteria, args) {\r\n                        if (typeof options[name] === 'function' && criteria) {\r\n                            options[name].apply(this, args);\r\n                        }\r\n                    };\r\n\r\n                callback('onChange', changed === true, defaultArgs);\r\n                callback('onKeyPress', changed === true, defaultArgs);\r\n                callback('onComplete', val.length === mask.length, defaultArgs);\r\n                callback('onInvalid', p.invalid.length > 0, [val, e, el, p.invalid, options]);\r\n            }\r\n        };\r\n\r\n        el = $(el);\r\n        var jMask = this, oldValue = p.val(), regexMask;\r\n\r\n        mask = typeof mask === 'function' ? mask(p.val(), undefined, el,  options) : mask;\r\n\r\n        // public methods\r\n        jMask.mask = mask;\r\n        jMask.options = options;\r\n        jMask.remove = function() {\r\n            var caret = p.getCaret();\r\n            if (jMask.options.placeholder) {\r\n                el.removeAttr('placeholder');\r\n            }\r\n            if (el.data('mask-maxlength')) {\r\n                el.removeAttr('maxlength');\r\n            }\r\n            p.destroyEvents();\r\n            p.val(jMask.getCleanVal());\r\n            p.setCaret(caret);\r\n            return el;\r\n        };\r\n\r\n        // get value without mask\r\n        jMask.getCleanVal = function() {\r\n           return p.getMasked(true);\r\n        };\r\n\r\n        // get masked value without the value being in the input or element\r\n        jMask.getMaskedVal = function(val) {\r\n           return p.getMasked(false, val);\r\n        };\r\n\r\n       jMask.init = function(onlyMask) {\r\n            onlyMask = onlyMask || false;\r\n            options = options || {};\r\n\r\n            jMask.clearIfNotMatch  = $.jMaskGlobals.clearIfNotMatch;\r\n            jMask.byPassKeys       = $.jMaskGlobals.byPassKeys;\r\n            jMask.translation      = $.extend({}, $.jMaskGlobals.translation, options.translation);\r\n\r\n            jMask = $.extend(true, {}, jMask, options);\r\n\r\n            regexMask = p.getRegexMask();\r\n\r\n            if (onlyMask) {\r\n                p.events();\r\n                p.val(p.getMasked());\r\n            } else {\r\n                if (options.placeholder) {\r\n                    el.attr('placeholder' , options.placeholder);\r\n                }\r\n\r\n                // this is necessary, otherwise if the user submit the form\r\n                // and then press the \"back\" button, the autocomplete will erase\r\n                // the data. Works fine on IE9+, FF, Opera, Safari.\r\n                if (el.data('mask')) {\r\n                  el.attr('autocomplete', 'off');\r\n                }\r\n\r\n                // detect if is necessary let the user type freely.\r\n                // for is a lot faster than forEach.\r\n                for (var i = 0, maxlength = true; i < mask.length; i++) {\r\n                    var translation = jMask.translation[mask.charAt(i)];\r\n                    if (translation && translation.recursive) {\r\n                        maxlength = false;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (maxlength) {\r\n                    el.attr('maxlength', mask.length).data('mask-maxlength', true);\r\n                }\r\n\r\n                p.destroyEvents();\r\n                p.events();\r\n\r\n                var caret = p.getCaret();\r\n                p.val(p.getMasked());\r\n                p.setCaret(caret);\r\n            }\r\n        };\r\n\r\n        jMask.init(!el.is('input'));\r\n    };\r\n\r\n    $.maskWatchers = {};\r\n    var HTMLAttributes = function () {\r\n        var input = $(this),\r\n            options = {},\r\n            prefix = 'data-mask-',\r\n            mask = input.attr('data-mask');\r\n\r\n        if (input.attr(prefix + 'reverse')) {\r\n            options.reverse = true;\r\n        }\r\n\r\n        if (input.attr(prefix + 'clearifnotmatch')) {\r\n            options.clearIfNotMatch = true;\r\n        }\r\n\r\n        if (input.attr(prefix + 'selectonfocus') === 'true') {\r\n           options.selectOnFocus = true;\r\n        }\r\n\r\n        if (notSameMaskObject(input, mask, options)) {\r\n            return input.data('mask', new Mask(this, mask, options));\r\n        }\r\n    },\r\n    notSameMaskObject = function(field, mask, options) {\r\n        options = options || {};\r\n        var maskObject = $(field).data('mask'),\r\n            stringify = JSON.stringify,\r\n            value = $(field).val() || $(field).text();\r\n        try {\r\n            if (typeof mask === 'function') {\r\n                mask = mask(value);\r\n            }\r\n            return typeof maskObject !== 'object' || stringify(maskObject.options) !== stringify(options) || maskObject.mask !== mask;\r\n        } catch (e) {}\r\n    },\r\n    eventSupported = function(eventName) {\r\n        var el = document.createElement('div'), isSupported;\r\n\r\n        eventName = 'on' + eventName;\r\n        isSupported = (eventName in el);\r\n\r\n        if ( !isSupported ) {\r\n            el.setAttribute(eventName, 'return;');\r\n            isSupported = typeof el[eventName] === 'function';\r\n        }\r\n        el = null;\r\n\r\n        return isSupported;\r\n    };\r\n\r\n    $.fn.mask = function(mask, options) {\r\n        options = options || {};\r\n        var selector = this.selector,\r\n            globals = $.jMaskGlobals,\r\n            interval = globals.watchInterval,\r\n            watchInputs = options.watchInputs || globals.watchInputs,\r\n            maskFunction = function() {\r\n                if (notSameMaskObject(this, mask, options)) {\r\n                    return $(this).data('mask', new Mask(this, mask, options));\r\n                }\r\n            };\r\n\r\n        $(this).each(maskFunction);\r\n\r\n        if (selector && selector !== '' && watchInputs) {\r\n            clearInterval($.maskWatchers[selector]);\r\n            $.maskWatchers[selector] = setInterval(function(){\r\n                $(document).find(selector).each(maskFunction);\r\n            }, interval);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    $.fn.masked = function(val) {\r\n        return this.data('mask').getMaskedVal(val);\r\n    };\r\n\r\n    $.fn.unmask = function() {\r\n        clearInterval($.maskWatchers[this.selector]);\r\n        delete $.maskWatchers[this.selector];\r\n        return this.each(function() {\r\n            var dataMask = $(this).data('mask');\r\n            if (dataMask) {\r\n                dataMask.remove().removeData('mask');\r\n            }\r\n        });\r\n    };\r\n\r\n    $.fn.cleanVal = function() {\r\n        return this.data('mask').getCleanVal();\r\n    };\r\n\r\n    $.applyDataMask = function(selector) {\r\n        selector = selector || $.jMaskGlobals.maskElements;\r\n        var $selector = (selector instanceof $) ? selector : $(selector);\r\n        $selector.filter($.jMaskGlobals.dataMaskAttr).each(HTMLAttributes);\r\n    };\r\n\r\n    var globals = {\r\n        maskElements: 'input,td,span,div',\r\n        dataMaskAttr: '*[data-mask]',\r\n        dataMask: true,\r\n        watchInterval: 300,\r\n        watchInputs: true,\r\n        keyStrokeCompensation: 10,\r\n        // old versions of chrome dont work great with input event\r\n        useInput: !/Chrome\\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent) && eventSupported('input'),\r\n        watchDataMask: false,\r\n        byPassKeys: [9, 16, 17, 18, 36, 37, 38, 39, 40, 91],\r\n        translation: {\r\n            '0': {pattern: /\\d/},\r\n            '9': {pattern: /\\d/, optional: true},\r\n            '#': {pattern: /\\d/, recursive: true},\r\n            'A': {pattern: /[a-zA-Z0-9]/},\r\n            'S': {pattern: /[a-zA-Z]/}\r\n        }\r\n    };\r\n\r\n    $.jMaskGlobals = $.jMaskGlobals || {};\r\n    globals = $.jMaskGlobals = $.extend(true, {}, globals, $.jMaskGlobals);\r\n\r\n    // looking for inputs with data-mask attribute\r\n    if (globals.dataMask) {\r\n        $.applyDataMask();\r\n    }\r\n\r\n    setInterval(function() {\r\n        if ($.jMaskGlobals.watchDataMask) {\r\n            $.applyDataMask();\r\n        }\r\n    }, globals.watchInterval);\r\n}, window.jQuery, window.Zepto));\r\n","$.fn.textWidth = function(text, font) {\r\n\tif (!$.fn.textWidth.fakeEl) $.fn.textWidth.fakeEl = $('<span>').hide().appendTo(document.body);\r\n\t$.fn.textWidth.fakeEl.text(text || this.val() || this.text() || this.attr('placeholder')).css('font', font || this.css('font'));\r\n\treturn $.fn.textWidth.fakeEl.width();\r\n};","/*jshint multistr:true, curly: false */\r\n/*global jQuery:false, define: false */\r\n/**\r\n * jRange - Awesome range control\r\n *\r\n * Written by\r\n * ----------\r\n * Nitin Hayaran (nitinhayaran@gmail.com)\r\n *\r\n * Licensed under the MIT (MIT-LICENSE.txt).\r\n *\r\n * @author Nitin Hayaran\r\n * @version 0.1-RELEASE\r\n *\r\n * Dependencies\r\n * ------------\r\n * jQuery (http://jquery.com)\r\n *\r\n **/\r\n;\r\n(function($, window, document, undefined) {\r\n\t'use strict';\r\n\r\n\tvar jRange = function() {\r\n\t\treturn this.init.apply(this, arguments);\r\n\t};\r\n\tjRange.prototype = {\r\n\t\tdefaults: {\r\n\t\t\tonstatechange: function() {},\r\n      ondragend: function() {},\r\n      onbarclicked: function() {},\r\n\t\t\tisRange: false,\r\n\t\t\tshowLabels: true,\r\n\t\t\tshowScale: true,\r\n\t\t\tstep: 1,\r\n\t\t\tformat: '%s',\r\n\t\t\ttheme: 'theme-green',\r\n\t\t\twidth: 300,\r\n\t\t\tdisable: false,\r\n\t\t\tsnap: false\r\n\t\t},\r\n\t\ttemplate: '<div class=\"slider-container\">\\\r\n\t\t\t<div class=\"back-bar\">\\\r\n                <div class=\"selected-bar\"></div>\\\r\n                <div class=\"pointer low\"></div><div class=\"pointer-label low\">123456</div>\\\r\n                <div class=\"pointer high\"></div><div class=\"pointer-label high\">456789</div>\\\r\n                <div class=\"clickable-dummy\"></div>\\\r\n            </div>\\\r\n            <div class=\"scale\"></div>\\\r\n\t\t</div>',\r\n\t\tinit: function(node, options) {\r\n\t\t\tthis.options       = $.extend({}, this.defaults, options);\r\n\t\t\tthis.inputNode     = $(node);\r\n\t\t\tthis.options.value = this.inputNode.val() || (this.options.isRange ? this.options.from + ',' + this.options.from : '' + this.options.from);\r\n\t\t\tthis.domNode       = $(this.template);\r\n\t\t\tthis.domNode.addClass(this.options.theme);\r\n\t\t\tthis.inputNode.after(this.domNode);\r\n\t\t\tthis.domNode.on('change', this.onChange);\r\n\t\t\tthis.pointers      = $('.pointer', this.domNode);\r\n\t\t\tthis.lowPointer    = this.pointers.first();\r\n\t\t\tthis.highPointer   = this.pointers.last();\r\n\t\t\tthis.labels        = $('.pointer-label', this.domNode);\r\n\t\t\tthis.lowLabel      = this.labels.first();\r\n\t\t\tthis.highLabel     = this.labels.last();\r\n\t\t\tthis.scale         = $('.scale', this.domNode);\r\n\t\t\tthis.bar           = $('.selected-bar', this.domNode);\r\n\t\t\tthis.clickableBar  = this.domNode.find('.clickable-dummy');\r\n\t\t\tthis.interval      = this.options.to - this.options.from;\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\trender: function() {\r\n\t\t\t// Check if inputNode is visible, and have some width, so that we can set slider width accordingly.\r\n\t\t\tif (this.inputNode.width() === 0 && !this.options.width) {\r\n\t\t\t\tconsole.log('jRange : no width found, returning');\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tthis.options.width = this.options.width || this.inputNode.width();\r\n\t\t\t\tthis.domNode.width(this.options.width);\r\n\t\t\t\tthis.inputNode.hide();\r\n\t\t\t}\r\n\r\n\t\t\tif (this.isSingle()) {\r\n\t\t\t\tthis.lowPointer.hide();\r\n\t\t\t\tthis.lowLabel.hide();\r\n\t\t\t}\r\n\t\t\tif (!this.options.showLabels) {\r\n\t\t\t\tthis.labels.hide();\r\n\t\t\t}\r\n\t\t\tthis.attachEvents();\r\n\t\t\tif (this.options.showScale) {\r\n\t\t\t\tthis.renderScale();\r\n\t\t\t}\r\n\t\t\tthis.setValue(this.options.value);\r\n\t\t},\r\n\t\tisSingle: function() {\r\n\t\t\tif (typeof(this.options.value) === 'number') {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn (this.options.value.indexOf(',') !== -1 || this.options.isRange) ?\r\n\t\t\t\tfalse : true;\r\n\t\t},\r\n\t\tattachEvents: function() {\r\n\t\t\tthis.clickableBar.click($.proxy(this.barClicked, this));\r\n\t\t\tthis.pointers.on('mousedown touchstart', $.proxy(this.onDragStart, this));\r\n\t\t\tthis.pointers.bind('dragstart', function(event) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t});\r\n\t\t},\r\n\t\tonDragStart: function(e) {\r\n\t\t\tif ( this.options.disable || (e.type === 'mousedown' && e.which !== 1)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tvar pointer = $(e.target);\r\n\t\t\tthis.pointers.removeClass('last-active');\r\n\t\t\tpointer.addClass('focused last-active');\r\n\t\t\tthis[(pointer.hasClass('low') ? 'low' : 'high') + 'Label'].addClass('focused');\r\n\t\t\t$(document).on('mousemove.slider touchmove.slider', $.proxy(this.onDrag, this, pointer));\r\n\t\t\t$(document).on('mouseup.slider touchend.slider touchcancel.slider', $.proxy(this.onDragEnd, this));\r\n\t\t},\r\n\t\tonDrag: function(pointer, e) {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tif (e.originalEvent.touches && e.originalEvent.touches.length) {\r\n\t\t\t\te = e.originalEvent.touches[0];\r\n\t\t\t} else if (e.originalEvent.changedTouches && e.originalEvent.changedTouches.length) {\r\n\t\t\t\te = e.originalEvent.changedTouches[0];\r\n\t\t\t}\r\n\r\n\t\t\tvar position = e.clientX - this.domNode.offset().left;\r\n\t\t\tthis.domNode.trigger('change', [this, pointer, position]);\r\n\t\t},\r\n\t\tonDragEnd: function(e) {\r\n\t\t\tthis.pointers.removeClass('focused')\r\n\t\t\t\t.trigger('rangeslideend');\r\n\t\t\tthis.labels.removeClass('focused');\r\n\t\t\t$(document).off('.slider');\r\n\t\t  this.options.ondragend.call(this, this.options.value);\r\n\t\t},\r\n\t\tbarClicked: function(e) {\r\n\t\t\tif(this.options.disable) return;\r\n\t\t\tvar x = e.pageX - this.clickableBar.offset().left;\r\n\t\t\tif (this.isSingle())\r\n\t\t\t\tthis.setPosition(this.pointers.last(), x, true, true);\r\n\t\t\telse {\r\n\t\t\t\tvar firstLeft      \t= Math.abs(parseFloat(this.pointers.first().css('left'), 10)),\r\n\t\t\t\t\t\tfirstHalfWidth \t= this.pointers.first().width() / 2,\r\n\t\t\t\t\t\tlastLeft \t\t\t \t= Math.abs(parseFloat(this.pointers.last().css('left'), 10)),\r\n\t\t\t\t\t\tlastHalfWidth  \t= this.pointers.first().width() / 2,\r\n\t\t\t\t\t\tleftSide        = Math.abs(firstLeft - x + firstHalfWidth),\r\n\t\t\t\t\t\trightSide       = Math.abs(lastLeft - x + lastHalfWidth),\r\n\t\t\t\t\t\tpointer;\r\n\r\n\t\t\t\tif(leftSide == rightSide) {\r\n\t\t\t\t\tpointer = x < firstLeft ? this.pointers.first() : this.pointers.last();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpointer = leftSide < rightSide ? this.pointers.first() : this.pointers.last();\r\n\t\t\t\t}\r\n\t\t\t\tthis.setPosition(pointer, x, true, true);\r\n\t\t\t}\r\n\t\t\tthis.options.onbarclicked.call(this, this.options.value);\r\n\t\t},\r\n\t\tonChange: function(e, self, pointer, position) {\r\n\t\t\tvar min, max;\r\n\t\t\tmin = 0;\r\n\t\t\tmax = self.domNode.width();\r\n\r\n\t\t\tif (!self.isSingle()) {\r\n\t\t\t\tmin = pointer.hasClass('high') ? parseFloat(self.lowPointer.css(\"left\")) + (self.lowPointer.width() / 2) : 0;\r\n\t\t\t\tmax = pointer.hasClass('low') ? parseFloat(self.highPointer.css(\"left\")) + (self.highPointer.width() / 2) : self.domNode.width();\r\n\t\t\t}\r\n\r\n\t\t\tvar value = Math.min(Math.max(position, min), max);\r\n\t\t\tself.setPosition(pointer, value, true);\r\n\t\t},\r\n\t\tsetPosition: function(pointer, position, isPx, animate) {\r\n\t\t\tvar leftPos, rightPos,\r\n\t\t\t\tlowPos = parseFloat(this.lowPointer.css(\"left\")),\r\n\t\t\t\thighPos = parseFloat(this.highPointer.css(\"left\")) || 0,\r\n\t\t\t\tcircleWidth = this.highPointer.width() / 2;\r\n\t\t\tif (!isPx) {\r\n\t\t\t\tposition = this.prcToPx(position);\r\n\t\t\t}\r\n\t\t\tif(this.options.snap){\r\n\t\t\t\tvar expPos = this.correctPositionForSnap(position);\r\n\t\t\t\tif(expPos === -1){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tposition = expPos;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (pointer[0] === this.highPointer[0]) {\r\n\t\t\t\thighPos = Math.round(position - circleWidth);\r\n\t\t\t} else {\r\n\t\t\t\tlowPos = Math.round(position - circleWidth);\r\n\t\t\t}\r\n\t\t\tpointer[animate ? 'animate' : 'css']({\r\n\t\t\t\t'left': Math.round(position - circleWidth)\r\n\t\t\t});\r\n\t\t\tif (this.isSingle()) {\r\n\t\t\t\tleftPos = 0;\r\n\t\t\t} else {\r\n\t\t\t\tleftPos = lowPos + circleWidth;\r\n\t\t\t\trightPos = highPos + circleWidth;\r\n\t\t\t}\r\n\t\t\tvar w = Math.round(highPos + circleWidth - leftPos);\r\n\t\t\tthis.bar[animate ? 'animate' : 'css']({\r\n\t\t\t\t'width': Math.abs(w),\r\n\t\t\t\t'left': (w>0) ? leftPos : leftPos + w\r\n\t\t\t});\r\n\t\t\tthis.showPointerValue(pointer, position, animate);\r\n\t\t\tthis.isReadonly();\r\n\t\t},\r\n\t\tcorrectPositionForSnap: function(position){\r\n\t\t\tvar currentValue = this.positionToValue(position) - this.options.from;\r\n\t\t\tvar diff = this.options.width / (this.interval / this.options.step),\r\n\t\t\t\texpectedPosition = (currentValue / this.options.step) * diff;\r\n\t\t\tif( position <= expectedPosition + diff / 2 && position >= expectedPosition - diff / 2){\r\n\t\t\t\treturn expectedPosition;\r\n\t\t\t}else{\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// will be called from outside\r\n\t\tsetValue: function(value) {\r\n\t\t\tvar values = value.toString().split(',');\r\n\t\t\tvalues[0] = Math.min(Math.max(values[0], this.options.from), this.options.to) + '';\r\n\t\t\tif (values.length > 1){\r\n\t\t\t\tvalues[1] = Math.min(Math.max(values[1], this.options.from), this.options.to) + '';\r\n\t\t\t}\r\n\t\t\tthis.options.value = value;\r\n\t\t\tvar prc = this.valuesToPrc(values.length === 2 ? values : [0, values[0]]);\r\n\t\t\tif (this.isSingle()) {\r\n\t\t\t\tthis.setPosition(this.highPointer, prc[1]);\r\n\t\t\t} else {\r\n\t\t\t\tthis.setPosition(this.lowPointer, prc[0]);\r\n\t\t\t\tthis.setPosition(this.highPointer, prc[1]);\r\n\t\t\t}\r\n\t\t},\r\n\t\trenderScale: function() {\r\n\t\t\tvar s = this.options.scale || [this.options.from, this.options.to];\r\n\t\t\tvar prc = Math.round((100 / (s.length - 1)) * 10) / 10;\r\n\t\t\tvar str = '';\r\n\t\t\tfor (var i = 0; i < s.length; i++) {\r\n\t\t\t\tstr += '<span style=\"left: ' + i * prc + '%\">' + (s[i] != '|' ? '<ins>' + s[i] + '</ins>' : '') + '</span>';\r\n\t\t\t}\r\n\t\t\tthis.scale.html(str);\r\n\r\n\t\t\t$('ins', this.scale).each(function() {\r\n\t\t\t\t$(this).css({\r\n\t\t\t\t\tmarginLeft: -$(this).outerWidth() / 2\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetBarWidth: function() {\r\n\t\t\tvar values = this.options.value.split(',');\r\n\t\t\tif (values.length > 1) {\r\n\t\t\t\treturn parseFloat(values[1]) - parseFloat(values[0]);\r\n\t\t\t} else {\r\n\t\t\t\treturn parseFloat(values[0]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tshowPointerValue: function(pointer, position, animate) {\r\n\t\t\tvar label = $('.pointer-label', this.domNode)[pointer.hasClass('low') ? 'first' : 'last']();\r\n\t\t\tvar text;\r\n\t\t\tvar value = this.positionToValue(position);\r\n\t\t\t// Is it higer or lower than it should be?\r\n\r\n\t\t\tif ($.isFunction(this.options.format)) {\r\n\t\t\t\tvar type = this.isSingle() ? undefined : (pointer.hasClass('low') ? 'low' : 'high');\r\n\t\t\t\ttext = this.options.format(value, type);\r\n\t\t\t} else {\r\n\t\t\t\ttext = this.options.format.replace('%s', value);\r\n\t\t\t}\r\n\r\n\t\t\tvar width = label.html(text).width(),\r\n\t\t\t\tleft = position - width / 2;\r\n\t\t\tleft = Math.min(Math.max(left, 0), this.options.width - width);\r\n\t\t\tlabel[animate ? 'animate' : 'css']({\r\n\t\t\t\tleft: left\r\n\t\t\t});\r\n\t\t\tthis.setInputValue(pointer, value);\r\n\t\t},\r\n\t\tvaluesToPrc: function(values) {\r\n\t\t\tvar lowPrc = ((parseFloat(values[0]) - parseFloat(this.options.from)) * 100 / this.interval),\r\n\t\t\t\thighPrc = ((parseFloat(values[1]) - parseFloat(this.options.from)) * 100 / this.interval);\r\n\t\t\treturn [lowPrc, highPrc];\r\n\t\t},\r\n\t\tprcToPx: function(prc) {\r\n\t\t\treturn (this.domNode.width() * prc) / 100;\r\n\t\t},\r\n\t\tisDecimal: function() {\r\n\t\t\treturn ((this.options.value + this.options.from + this.options.to).indexOf(\".\")===-1) ? false : true;\r\n\t\t},\r\n\t\tpositionToValue: function(pos) {\r\n\t\t\tvar value = (pos / this.domNode.width()) * this.interval;\r\n\t\t\tvalue = parseFloat(value, 10) + parseFloat(this.options.from, 10);\r\n\t\t\tif (this.isDecimal()) {\r\n\t\t\t\tvar final = Math.round(Math.round(value / this.options.step) * this.options.step *100)/100;\r\n\t\t\t\tif (final!==0.0) {\r\n\t\t\t\t\tfinal = '' + final;\r\n\t\t\t\t\tif (final.indexOf(\".\")===-1) {\r\n\t\t\t\t\t\tfinal = final + \".\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\twhile (final.length - final.indexOf('.')<3) {\r\n\t\t\t\t\t\tfinal = final + \"0\";\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfinal = \"0.00\";\r\n\t\t\t\t}\r\n\t\t\t\treturn final;\r\n\t\t\t} else {\r\n\t\t\t\treturn Math.round(value / this.options.step) * this.options.step;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetInputValue: function(pointer, v) {\r\n\t\t\t// if(!isChanged) return;\r\n\t\t\tif (this.isSingle()) {\r\n\t\t\t\tthis.options.value = v.toString();\r\n\t\t\t} else {\r\n\t\t\t\tvar values = this.options.value.split(',');\r\n\t\t\t\tif (pointer.hasClass('low')) {\r\n\t\t\t\t\tthis.options.value = v + ',' + values[1];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.options.value = values[0] + ',' + v;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.inputNode.val() !== this.options.value) {\r\n\t\t\t\tthis.inputNode.val(this.options.value)\r\n\t\t\t\t\t.trigger('change');\r\n\t\t\t\tthis.options.onstatechange.call(this, this.options.value);\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetValue: function() {\r\n\t\t\treturn this.options.value;\r\n\t\t},\r\n\t\tgetOptions: function() {\r\n\t\t\treturn this.options;\r\n\t\t},\r\n\t\tgetRange: function() {\r\n\t\t\treturn this.options.from + \",\" + this.options.to;\r\n\t\t},\r\n\t\tisReadonly: function(){\r\n\t\t\tthis.domNode.toggleClass('slider-readonly', this.options.disable);\r\n\t\t},\r\n\t\tdisable: function(){\r\n\t\t\tthis.options.disable = true;\r\n\t\t\tthis.isReadonly();\r\n\t\t},\r\n\t\tenable: function(){\r\n\t\t\tthis.options.disable = false;\r\n\t\t\tthis.isReadonly();\r\n\t\t},\r\n\t\ttoggleDisable: function(){\r\n\t\t\tthis.options.disable = !this.options.disable;\r\n\t\t\tthis.isReadonly();\r\n\t\t},\r\n\t\tupdateRange: function(range, value) {\r\n\t\t\tvar values = range.toString().split(',');\r\n\t\t\tthis.interval = parseInt(values[1]) - parseInt(values[0]);\r\n\t\t\tif(value){\r\n\t\t\t\tthis.setValue(value);\r\n\t\t\t}else{\r\n\t\t\t\tthis.setValue(this.getValue());\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar pluginName = 'jRange';\r\n\t// A really lightweight plugin wrapper around the constructor,\r\n\t// preventing against multiple instantiations\r\n\t$.fn[pluginName] = function(option) {\r\n\t\tvar args = arguments,\r\n\t\t\tresult;\r\n\r\n\t\tthis.each(function() {\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\tdata = $.data(this, 'plugin_' + pluginName),\r\n\t\t\t\toptions = typeof option === 'object' && option;\r\n\t\t\tif (!data) {\r\n\t\t\t\t$this.data('plugin_' + pluginName, (data = new jRange(this, options)));\r\n\t\t\t\t$(window).resize(function() {\r\n\t\t\t\t\tdata.setValue(data.getValue());\r\n\t\t\t\t}); // Update slider position when window is resized to keep it in sync with scale\r\n\t\t\t}\r\n\t\t\t// if first argument is a string, call silimarly named function\r\n\t\t\t// this gives flexibility to call functions of the plugin e.g.\r\n\t\t\t//   - $('.dial').plugin('destroy');\r\n\t\t\t//   - $('.dial').plugin('render', $('.new-child'));\r\n\t\t\tif (typeof option === 'string') {\r\n\t\t\t\tresult = data[option].apply(data, Array.prototype.slice.call(args, 1));\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// To enable plugin returns values\r\n\t\treturn result || this;\r\n\t};\r\n\r\n})(jQuery, window, document);\r\n","\t$.fn.spinner = function() {\r\n\t\tthis.each(function() {\r\n\t\t\tvar el = $(this);\r\n\t\t\tel.after('<a href=\"#\" class=\"category-product__toCart-plus js-category-product-spinner-plus\" role=\"button\"></a>');\r\n\t\t\tel.after('<a href=\"#\" class=\"category-product__toCart-minus js-category-product-spinner-minus\" role=\"button\"></a>');\r\n\t\t\tel.parent().on('click', '.js-category-product-spinner-minus', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tif (el.val() > parseInt(el.attr('min')))\r\n\t\t\t\t\tel.val( function(i, oldval) { return --oldval; });\r\n\t\t\t});\r\n\t\t\tel.parent().on('click', '.js-category-product-spinner-plus', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tif (el.val() < parseInt(el.attr('max')))\r\n\t\t\t\t\tel.val( function(i, oldval) { return ++oldval; });\r\n\t\t\t});\r\n\t\t\tel.on('focusout', function() {\r\n\t\t\t\tif (el.val() > parseInt(el.attr('max'))) {\r\n\t\t\t\t\tel.val(el.attr('max'));\r\n\t\t\t\t} else if (el.val() < parseInt(el.attr('min'))) {\r\n\t\t\t\t\tel.val(el.attr('min'));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t};","// Generated by CoffeeScript 1.9.2\r\n\r\n/**\r\n@license Sticky-kit v1.1.2 | WTFPL | Leaf Corcoran 2015 | http://leafo.net\r\n */\r\n\r\n(function() {\r\n  var $, win;\r\n\r\n  $ = this.jQuery || window.jQuery;\r\n\r\n  win = $(window);\r\n\r\n  $.fn.stick_in_parent = function(opts) {\r\n    var doc, elm, enable_bottoming, fn, i, inner_scrolling, len, manual_spacer, offset_top, parent_selector, recalc_every, sticky_class;\r\n    if (opts == null) {\r\n      opts = {};\r\n    }\r\n    sticky_class = opts.sticky_class, inner_scrolling = opts.inner_scrolling, recalc_every = opts.recalc_every, parent_selector = opts.parent, offset_top = opts.offset_top, manual_spacer = opts.spacer, enable_bottoming = opts.bottoming;\r\n    if (offset_top == null) {\r\n      offset_top = 0;\r\n    }\r\n    if (parent_selector == null) {\r\n      parent_selector = void 0;\r\n    }\r\n    if (inner_scrolling == null) {\r\n      inner_scrolling = true;\r\n    }\r\n    if (sticky_class == null) {\r\n      sticky_class = \"is_stuck\";\r\n    }\r\n    doc = $(document);\r\n    if (enable_bottoming == null) {\r\n      enable_bottoming = true;\r\n    }\r\n    fn = function(elm, padding_bottom, parent_top, parent_height, top, height, el_float, detached) {\r\n      var bottomed, detach, fixed, last_pos, last_scroll_height, offset, parent, recalc, recalc_and_tick, recalc_counter, spacer, tick;\r\n      if (elm.data(\"sticky_kit\")) {\r\n        return;\r\n      }\r\n      elm.data(\"sticky_kit\", true);\r\n      last_scroll_height = doc.height();\r\n      parent = elm.parent();\r\n      if (parent_selector != null) {\r\n        parent = parent.closest(parent_selector);\r\n      }\r\n      if (!parent.length) {\r\n        throw \"failed to find stick parent\";\r\n      }\r\n      fixed = false;\r\n      bottomed = false;\r\n      spacer = manual_spacer != null ? manual_spacer && elm.closest(manual_spacer) : $(\"<div />\");\r\n      if (spacer) {\r\n        spacer.css('position', elm.css('position'));\r\n      }\r\n      recalc = function() {\r\n        var border_top, padding_top, restore;\r\n        if (detached) {\r\n          return;\r\n        }\r\n        last_scroll_height = doc.height();\r\n        border_top = parseInt(parent.css(\"border-top-width\"), 10);\r\n        padding_top = parseInt(parent.css(\"padding-top\"), 10);\r\n        padding_bottom = parseInt(parent.css(\"padding-bottom\"), 10);\r\n        parent_top = parent.offset().top + border_top + padding_top;\r\n        parent_height = parent.height();\r\n        if (fixed) {\r\n          fixed = false;\r\n          bottomed = false;\r\n          if (manual_spacer == null) {\r\n            elm.insertAfter(spacer);\r\n            spacer.detach();\r\n          }\r\n          elm.css({\r\n            position: \"\",\r\n            top: \"\",\r\n            width: \"\",\r\n            bottom: \"\"\r\n          }).removeClass(sticky_class);\r\n          restore = true;\r\n        }\r\n        top = elm.offset().top - (parseInt(elm.css(\"margin-top\"), 10) || 0) - offset_top;\r\n        height = elm.outerHeight(true);\r\n        el_float = elm.css(\"float\");\r\n        if (spacer) {\r\n          spacer.css({\r\n            width: elm.outerWidth(true),\r\n            height: height,\r\n            display: elm.css(\"display\"),\r\n            \"vertical-align\": elm.css(\"vertical-align\"),\r\n            \"float\": el_float\r\n          });\r\n        }\r\n        if (restore) {\r\n          return tick();\r\n        }\r\n      };\r\n      recalc();\r\n      if (height === parent_height) {\r\n        return;\r\n      }\r\n      last_pos = void 0;\r\n      offset = offset_top;\r\n      recalc_counter = recalc_every;\r\n      tick = function() {\r\n        var css, delta, recalced, scroll, will_bottom, win_height;\r\n        if (detached) {\r\n          return;\r\n        }\r\n        recalced = false;\r\n        if (recalc_counter != null) {\r\n          recalc_counter -= 1;\r\n          if (recalc_counter <= 0) {\r\n            recalc_counter = recalc_every;\r\n            recalc();\r\n            recalced = true;\r\n          }\r\n        }\r\n        if (!recalced && doc.height() !== last_scroll_height) {\r\n          recalc();\r\n          recalced = true;\r\n        }\r\n        scroll = win.scrollTop();\r\n        if (last_pos != null) {\r\n          delta = scroll - last_pos;\r\n        }\r\n        last_pos = scroll;\r\n        if (fixed) {\r\n          if (enable_bottoming) {\r\n            will_bottom = scroll + height + offset > parent_height + parent_top;\r\n            if (bottomed && !will_bottom) {\r\n              bottomed = false;\r\n              elm.css({\r\n                position: \"fixed\",\r\n                bottom: \"\",\r\n                top: offset\r\n              }).trigger(\"sticky_kit:unbottom\");\r\n            }\r\n          }\r\n          if (scroll < top) {\r\n            fixed = false;\r\n            offset = offset_top;\r\n            if (manual_spacer == null) {\r\n              if (el_float === \"left\" || el_float === \"right\") {\r\n                elm.insertAfter(spacer);\r\n              }\r\n              spacer.detach();\r\n            }\r\n            css = {\r\n              position: \"\",\r\n              width: \"\",\r\n              top: \"\"\r\n            };\r\n            elm.css(css).removeClass(sticky_class).trigger(\"sticky_kit:unstick\");\r\n          }\r\n          if (inner_scrolling) {\r\n            win_height = win.height();\r\n            if (height + offset_top > win_height) {\r\n              if (!bottomed) {\r\n                offset -= delta;\r\n                offset = Math.max(win_height - height, offset);\r\n                offset = Math.min(offset_top, offset);\r\n                if (fixed) {\r\n                  elm.css({\r\n                    top: offset + \"px\"\r\n                  });\r\n                }\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          if (scroll > top) {\r\n            fixed = true;\r\n            css = {\r\n              position: \"fixed\",\r\n              top: offset\r\n            };\r\n            css.width = elm.css(\"box-sizing\") === \"border-box\" ? elm.outerWidth() + \"px\" : elm.width() + \"px\";\r\n            elm.css(css).addClass(sticky_class);\r\n            if (manual_spacer == null) {\r\n              elm.after(spacer);\r\n              if (el_float === \"left\" || el_float === \"right\") {\r\n                spacer.append(elm);\r\n              }\r\n            }\r\n            elm.trigger(\"sticky_kit:stick\");\r\n          }\r\n        }\r\n        if (fixed && enable_bottoming) {\r\n          if (will_bottom == null) {\r\n            will_bottom = scroll + height + offset > parent_height + parent_top;\r\n          }\r\n          if (!bottomed && will_bottom) {\r\n            bottomed = true;\r\n            if (parent.css(\"position\") === \"static\") {\r\n              parent.css({\r\n                position: \"relative\"\r\n              });\r\n            }\r\n            return elm.css({\r\n              position: \"absolute\",\r\n              bottom: padding_bottom,\r\n              top: \"auto\"\r\n            }).trigger(\"sticky_kit:bottom\");\r\n          }\r\n        }\r\n      };\r\n      recalc_and_tick = function() {\r\n        recalc();\r\n        return tick();\r\n      };\r\n      detach = function() {\r\n        detached = true;\r\n        win.off(\"touchmove\", tick);\r\n        win.off(\"scroll\", tick);\r\n        win.off(\"resize\", recalc_and_tick);\r\n        $(document.body).off(\"sticky_kit:recalc\", recalc_and_tick);\r\n        elm.off(\"sticky_kit:detach\", detach);\r\n        elm.removeData(\"sticky_kit\");\r\n        elm.css({\r\n          position: \"\",\r\n          bottom: \"\",\r\n          top: \"\",\r\n          width: \"\"\r\n        });\r\n        parent.position(\"position\", \"\");\r\n        if (fixed) {\r\n          if (manual_spacer == null) {\r\n            if (el_float === \"left\" || el_float === \"right\") {\r\n              elm.insertAfter(spacer);\r\n            }\r\n            spacer.remove();\r\n          }\r\n          return elm.removeClass(sticky_class);\r\n        }\r\n      };\r\n      win.on(\"touchmove\", tick);\r\n      win.on(\"scroll\", tick);\r\n      win.on(\"resize\", recalc_and_tick);\r\n      $(document.body).on(\"sticky_kit:recalc\", recalc_and_tick);\r\n      elm.on(\"sticky_kit:detach\", detach);\r\n      return setTimeout(tick, 0);\r\n    };\r\n    for (i = 0, len = this.length; i < len; i++) {\r\n      elm = this[i];\r\n      fn($(elm));\r\n    }\r\n    return this;\r\n  };\r\n\r\n}).call(this);\r\n"]}