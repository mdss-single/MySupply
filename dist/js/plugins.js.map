{"version":3,"sources":["carousel.js","easyautocomplete.js","fancybox.js","flickity.js","formstyler.js","input-mask.js","range-slider.js","regionSearch.js","spinner.js","sticky.js","tags-input.js","toggleSidebarRows.js"],"names":["$","fn","productCarousel","this","each","$carousel","length","$carouselCells","find","navCellHeight","position","top","height","navHeight","on","event","preventDefault","currentTarget","index","thisBig","data","addClass","siblings","removeClass","attr","setTimeout","scrollY","scrollTop","animate","e","hasClass","prev","click","next","EasyAutocomplete","scope","main","$input","options","requestDelayTimeoutId","consts","Constans","config","Configuration","logger","Logger","template","Template","listBuilderService","ListBuilderService","proccess","checkParam","equals","$field","$container","elementsList","selectedElement","prepareField","$elements_container","highlight","string","phrase","get","escapedPhrase","replace","RegExp","parent","getValue","remove","unwrap","$wrapper","classes","getTemplateClass","wrap","fieldWidth","outerWidth","css","createWrapper","getContainerId","prepend","showAnimation","type","animationTime","time","callback","slideDown","fadeIn","show","onShowListEvent","hideAnimation","slideUp","fadeOut","hide","onHideListEvent","eq","onSelectItemEvent","listBuilders","$item","$listContainer","empty","detach","counter","builderIndex","listBuildersLength","listData","undefined","header","append","i","listDataLength","maxListSize","j","itemCounter","elementsValue","val","trigger","selectElement","onClickEvent","onChooseEvent","mouseover","onMouseOverEvent","mouseout","onMouseOutEvent","html","build","push","onLoadEvent","after","elementId","showContainer","hideContainer","loadElements","list","getConstants","getConfiguration","getContainer","getSelectedItemIndex","getItems","getItemData","getSelectedItemData","init","error","checkDataUrlProperties","checkRequiredProperties","bindKeyup","off","keyup","keyCode","inputPhrase","hideOnEmptyPhrase","clearTimeout","loadData","updateCategories","processData","settings","ajaxSettings","set","createAjaxSettings","url","dataType","ajax","done","convertXml","checkIfDataExists","fail","warning","always","focusout","fieldValue","match","caseSensitive","toLowerCase","evt","window","suppressKeypress","keydown","onKeyEnterEvent","focus","blur","bindAllEvents","bindEvents","eacHandles","getHandle","id","inputHasId","input","assignRandomId","fieldId","Math","floor","random","setHandle","handle","_cssClass","emptyStringFunction","buildMethod","_fields","genericTemplates","basic","method","element","cssClass","description","fields","iconLeft","icon","iconRight","iconSrc","links","link","custom","elementValue","listBuilder","sort","enabled","maxNumberOfElements","slice","reduceElementsInList","preparedList","findMatch","value","configuration","proccessResponseData","convertToListBuilder","category","builder","toUpperCase","listLocation","xmlElementName","convertXmlToListBuilder","convertDataToListBuilder","defaultsGetValue","convertXmlToList","simpleList","Array","constants","CONTAINER_CLASS","CONTAINER_ID","WRAPPER_CSS_CLASS","propertyName","message","console","log","defaults","autocompleteOff","placeholder","ajaxCallback","matchResponseProperty","a","b","search","highlightPhrase","theme","cssClasses","minCharNumber","requestDelay","adjustWidth","preparePostData","loggerEnabled","categoriesAssigned","categories","externalObjects","printPropertiesThatDoesntExist","consol","optionsToCheck","checkPropertiesIfExist","source","target","property","inArray","name","text","prepareDefaults","mergeObjects","mergedObject","defaultUrl","defaultlistLocation","processAfterMerge","easyAutocomplete","$this","eacHandle","inputId","jQuery","document","fancybox","div","loop","margin","gutter","keyboard","arrows","infobar","toolbar","buttons","idleTime","smallBtn","protect","modal","image","preload","iframe","tpl","scrolling","defaultType","animationEffect","animationDuration","zoomOpacity","transitionEffect","transitionDuration","slideClass","baseClass","baseTpl","spinnerTpl","errorTpl","btnTpl","download","zoom","close","arrowLeft","arrowRight","parentEl","autoFocus","backFocus","trapFocus","fullScreen","autoStart","touch","vertical","momentum","hash","media","slideShow","speed","thumbs","hideOnClose","axis","wheel","onInit","noop","beforeLoad","afterLoad","beforeShow","afterShow","beforeClose","afterClose","onActivate","onDeactivate","clickContent","current","clickSlide","clickOutside","dblclickContent","dblclickSlide","dblclickOutside","mobile","lang","i18n","en","CLOSE","NEXT","PREV","ERROR","PLAY_START","PLAY_STOP","FULL_SCREEN","THUMBS","DOWNLOAD","SHARE","ZOOM","de","$W","$D","called","requestAFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","transitionEnd","t","el","createElement","transitions","transition","OTransition","MozTransition","WebkitTransition","style","forceRedraw","$el","offsetHeight","FancyBox","content","opts","self","extend","isMobile","isArray","group","currIndex","parseInt","prevIndex","prevPos","currPos","firstRun","createGroup","$lastFocus","activeElement","slides","prototype","$scrollDiv","buttonStr","firstItem","firstItemOpts","scrollbarWidth","scrollLeft","getInstance","test","navigator","userAgent","MSStream","body","scrollHeight","innerHeight","appendTo","offsetWidth","clientWidth","translate","$refs","container","forEach","item","activate","jumpTo","obj","str","arr","n","items","makeArray","found","src","srcParts","isPlainObject","$orig","videoFormat","charAt","$thumb","caption","apply","split","shift","filter","addEvents","removeEvents","stopPropagation","previous","isScaledDown","originalEvent","update","stage","instance","isClosing","is","has","keycode","which","idleSecondsCounter","isIdle","showControls","idleInterval","setInterval","isDragging","hideControls","clearInterval","duration","pos","slide","canvasWidth","currentPos","transitionProps","groupLen","isAnimating","createSlide","updateControls","getTranslate","$slide","isMoved","left","forcedDuration","isNumeric","loadSlide","stop","round","width","removeAttr","complete","children","isLoaded","revealContent","isComplete","updateSlide","scaleToActual","x","y","imgPos","posX","posY","scaleX","scaleY","$what","$content","canvasHeight","newImgWidth","newImgHeight","hasError","updateCursor","SlideShow","isActive","scaleToFit","end","getFitPos","minRatio","imgWidth","imgHeight","min","key","setTranslate","centerSlide","opacity","nextWidth","nextHeight","isZoomable","fitPos","isFunction","rez","canPan","abs","ajaxLoad","isLoading","setImage","setIframe","setContent","setError","showLoading","success","textStatus","jqXHR","one","abort","temp","pxRatio","windowWidth","srcset","devicePixelRatio","innerWidth","map","ret","trim","substring","postfix","thumb","$ghost","setBigImage","$img","$image","timouts","naturalWidth","naturalHeight","hideLoading","max","readyState","$iframe","Date","getTime","isReady","scrollWidth","$body","$wrap","frameWidth","frameHeight","contents","ignore","contentWindow","documentElement","ceil","outerHeight","hasOwnProperty","$placeholder","insertAfter","nodeType","$smallBtn","$spinner","first","button","effect","effectClassName","start","getThumbPos","slidePos","thumbPos","offset","ownerDocument","elementRect","getBoundingClientRect","parentRects","parentElement","every","parentRect","visiblePixelX","right","visiblePixelY","bottom","isElementVisible","parseFloat","isVisible","d","cleanUp","args","call","arguments","unshift","force","$caption","isHiddenControls","prop","toggleClass","toggleControls","version","command","open","all","destroy","createTouch","use3d","getComputedStyle","getPropertyValue","documentMode","matrix","indexOf","transRez","exec","props","transform","to","leaveAnimationName","selector","_run","$target","isDefaultPrevented","format","params","param","youtube","matcher","autoplay","autohide","fs","rel","hd","wmode","enablejsapi","html5","paramPlace","vimeo","show_title","show_byline","show_portrait","fullscreen","api","metacafe","dailymotion","additionalInfos","vine","instagram","gmap_place","gmap_search","urlParams","paramObj","provider","providerName","providerOpts","m","p","decodeURIComponent","contentProvider","cancelAFrame","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","pointers","result","touches","changedTouches","pageX","pageY","clientX","clientY","distance","point2","point1","what","sqrt","pow","isClickable","onclick","atts","attributes","nodeName","substr","isScrollable","overflowY","overflowX","horizontal","clientHeight","Guestures","$bg","bg","$stage","proxy","ontouchstart","isTouchDevice","realPoints","startPoints","startEvent","canTap","isPanning","isSwiping","isZooming","isScrolling","sliderStartPos","sliderLastPos","contentStartPos","contentLastPos","startTime","distanceX","distanceY","addEventListener","onscroll","centerPointStartX","centerPointStartY","percentageOfImageAtPinchPointX","percentageOfImageAtPinchPointY","startDistanceBetweenFingers","ontouchmove","newPoints","onSwipe","onPan","onZoom","angle","swiping","requestId","atan2","PI","inTransition","limitMovement","minTranslateX","minTranslateY","maxTranslateX","maxTranslateY","newOffsetX","newOffsetY","currentOffsetX","currentOffsetY","currentWidth","currentHeight","limitPosition","newWidth","newHeight","pinchRatio","translateFromZoomingX","translateFromZoomingY","centerPointEndX","centerPointEndY","translateFromTranslatingX","newPos","ontouchend","dMs","panning","zooming","endPoints","removeEventListener","onTap","velocityX","velocityY","speedX","endPanning","endZooming","endSwiping","len","reset","where","tapX","tapY","process","prefix","action","addBack","tapped","timer","$button","toggle","clear","onInit.fb","beforeShow.fb","afterShow.fb","afterKeydown.fb","keypress","beforeClose.fb onDeactivate.fb","hidden","fnMap","FullScreen","request","elem","requestFullscreen","ALLOW_KEYBOARD_INPUT","exit","exitFullscreen","isFullscreen","Boolean","fullscreenElement","fullscreenEnabled","beforeClose.fb","fullscreenchange","FancyThumbs","$grid","$list","Thumbs","second","create","widthRatio","heightRatio","$parent","thumbWidth","thumbHeight","margin-top","margin-left","share","entityMap","f","location","encodeURIComponent","&","<",">","\"","'","/","`","=","String","s","href","escapeSelector","sel","ch","asCodePoint","charCodeAt","toString","shouldCreateHistory","currentHash","timerID","parseUrl","pop","gallery","join","triggerFromUrl","getGalleryID","origHash","history","title","pathname","replaceState","prevTime","currTime","deltaY","deltaX","wheelDelta","detail","factory","define","amd","module","exports","require","jQueryBridget","arraySlice","logError","namespace","PluginClass","option","arg0","pluginMethodStr","methodName","$elems","returnValue","_init","updateJQuery","bridget","global","EvEmitter","proto","eventName","listener","events","_events","listeners","once","onceEvents","_onceEvents","splice","emitEvent","onceListeners","allOff","getSize","getStyleSize","num","isNaN","measurements","measurementsLength","getStyle","isBoxSizeOuter","isSetup","padding","borderStyle","borderWidth","boxSizing","appendChild","removeChild","setup","querySelector","display","size","getZeroSize","isBorderBox","measurement","paddingWidth","paddingLeft","paddingRight","paddingHeight","paddingTop","paddingBottom","marginWidth","marginLeft","marginRight","marginHeight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderHeight","borderTopWidth","borderBottomWidth","isBorderBoxSizeOuter","styleWidth","styleHeight","matchesSelector","matchesMethod","ElemProto","Element","matches","prefixes","fizzyUIUtils","utils","modulo","removeFrom","ary","getParent","parentNode","getQueryElement","handleEvent","filterFindElements","elems","ffElems","HTMLElement","childElems","querySelectorAll","debounceMethod","_class","threshold","timeoutName","timeout","_this","docReady","toDashed","$1","$2","htmlInit","WidgetClass","dashedNamespace","dataAttr","dataAttrElems","jsDashElems","concat","dataOptionsAttr","getAttribute","JSON","parse","className","Flickity","Cell","setAttribute","side","originSide","removeAttribute","setPosition","updateTarget","renderPosition","setDefaultTarget","marginProperty","cellAlign","getPositionValue","wrapShift","slideableWidth","Slide","isOriginLeft","cells","addCell","cell","beginMargin","firstMargin","endMargin","lastCell","getLastCell","lastMargin","slideWidth","select","changeSelected","unselect","isSelected","classMethod","classList","getCellElements","animatePrototype","lastTime","timeToCall","startAnimation","restingFrames","applyDragForce","applySelectedAttraction","previousX","integratePhysics","positionSlider","settle","transformProperty","wrapAround","shiftWrapCells","cursorPosition","rightToLeft","slider","firstSlide","positionX","progress","slidesWidth","dispatchEvent","positionSliderAtSelected","selectedSlide","velocity","percentPosition","isPointerDown","isFreeScrolling","selectedIndex","beforeGap","_shiftCells","beforeShiftCells","afterGap","afterShiftCells","gap","cellShift","_unshiftCells","getFrictionFactor","applyForce","getRestingPosition","isDraggable","dragForce","dragX","selectedAttraction","_Flickity","moveElements","toElem","GUID","instances","queryElement","flickityGUID","$element","constructor","_create","accessibility","freeScrollFriction","friction","namespaceJQueryEvents","resize","setGallerySize","createMethods","guid","viewport","_createSlider","watchCSS","add","_filterFindCellElements","reloadCells","tabIndex","initialIndex","isInitActivated","cellSelector","_makeCells","positionCells","_getWrapShiftCells","cellElem","getLastSlide","_sizeCells","_positionCells","maxCellHeight","cellX","startCell","updateSlides","_containSlides","nextMargin","canCellFit","_getCanCellFit","updateSelectedSlide","groupCells","number","percentMatch","percent","reposition","setCellAlign","cellAlignShorthands","center","shorthand","adaptiveHeight","gapX","cellIndex","_getGapCells","increment","contain","isRightToLeft","contentWidth","isContentSmaller","beginBound","endBound","emitArgs","$event","jQEvent","Event","isWrap","isInstant","_wrapSelect","wrapIndex","delta","backWrapDelta","forewardWrapDelta","isDragSelect","unselectSelectedSlide","selectedCells","selectedElements","selectedCell","selectCell","queryCell","getCellSlideIndex","getCell","getCells","getParentCell","getAdjacentCellElements","adjCount","cellElems","slideIndex","uiChange","childUIPointerDown","onresize","deactivate","onkeydown","isNotFocused","handler","keyboardHandlers","37","leftMethod","39","rightMethod","prevScrollY","pageYOffset","scrollTo","pageXOffset","removeData","setJQuery","jq","Unipointer","Object","bindStartEvent","_bindStartEvent","unbindStartEvent","isBind","bindMethod","PointerEvent","getTouch","identifier","pointerIdentifier","onmousedown","_pointerDown","onpointerdown","pointer","pointerId","pointerDown","_bindPostStartEvents","postStartEvents","mousedown","touchstart","pointerdown","_boundPointerEvents","_unbindPostStartEvents","onmousemove","_pointerMove","onpointermove","pointerMove","onmouseup","_pointerUp","onpointerup","_pointerDone","pointerUp","pointerDone","onpointercancel","_pointerCancel","ontouchcancel","pointerCancel","getPointerPoint","Unidragger","bindHandles","_bindHandles","unbindHandles","handles","touchAction","_touchActionValue","_dragPointerDown","focused","pointerDownPoint","canPreventDefaultOnPointerDown","moveVector","_dragPointerMove","_dragMove","movePoint","hasDragStarted","_dragStart","_dragPointerUp","_dragEnd","_staticClick","dragStartPoint","isPreventingClicks","dragStart","dragMove","bind","dragEnd","isIgnoringMouseUp","staticClick","draggable","dragThreshold","isTouch","isTouchmoveScrollCanceled","_createDrag","onActivateDrag","_uiChangeDrag","_childUIPointerDownDrag","unbindDrag","updateDraggable","onDeactivateDrag","bindDrag","pointerDownFocus","cursorNodes","TEXTAREA","INPUT","OPTION","clickTypes","radio","checkbox","submit","file","pointerDownScroll","getScrollPosition","_pointerDownDefault","getCanPointerDown","focusNodes","SELECT","isTouchStart","isTouchPointer","pointerType","isFocusNode","canPointerDown","isTouchScrolling","dragStartPosition","previousDragX","direction","originBound","dragMoveTime","freeScroll","dragEndRestingSelect","restingX","dragEndBoostSelect","getSlideDistance","positiveResting","_getClosestResting","negativeResting","minDistance","Infinity","condition","md","isWrapAround","clickedCell","scroll","scrollMoveX","scrollMoveY","TapListener","bindTap","unbindTap","tapElement","pointerPoint","boundingRect","scrollX","svgURI","PrevNextButton","isEnabled","isPrevious","leftDirection","isLeft","disable","svg","createSVG","createElementNS","path","pathMovements","shape","x0","x1","y1","x2","y2","x3","getArrowMovements","arrowShape","enable","disabled","lastIndex","boundIndex","prevNextButtons","_createPrevNextButtons","prevButton","nextButton","activatePrevNextButtons","deactivatePrevNextButtons","PageDots","holder","dots","setDots","addDots","removeDots","count","fragment","createDocumentFragment","newDots","dot","updateSelected","selectedDot","pageDots","_createPageDots","activatePageDots","updateSelectedPageDots","updatePageDots","deactivatePageDots","hiddenProperty","visibilityEvent","Player","state","onVisibilityChange","visibilityChange","onVisibilityPlay","visibilityPlay","play","isPageHidden","tick","autoPlay","pause","unpause","pauseAutoPlayOnHover","_createPlayer","player","activatePlayer","stopPlayer","deactivatePlayer","playPlayer","pausePlayer","unpausePlayer","onmouseenter","onmouseleave","insert","isAppend","insertCellElement","insertBefore","endCells","cellChange","minCellIndex","cellSizeChange","changedCellIndex","isPositioningSlider","prevSelectedElem","LazyLoader","img","flickity","load","_createLazyload","lazyLoad","lazyImages","lazyCellImages","lazyloadAttr","srcAttr","srcsetAttr","imgs","getCellLazyImages","onload","onerror","_createAsNavFor","activateAsNavFor","deactivateAsNavFor","destroyAsNavFor","asNavForOption","asNavFor","setNavCompanion","companion","navCompanion","onNavCompanionSelect","navCompanionSelect","onNavStaticClick","firstIndex","selectIndex","removeNavSelectedElements","navSelectedElements","changeNavSelectedClass","navElem","cellElement","imagesLoaded","ImagesLoaded","onAlways","queryElem","elements","getImages","jqDeferred","Deferred","check","images","addElementImages","addImage","background","addElementBackgroundImages","elementNodeTypes","childImgs","child","1","9","11","LoadingImage","Background","Image","reURL","backgroundImage","addBackground","loadingImage","onProgress","progressedCount","hasAnyBroken","notify","debug","jqMethod","getIsImageComplete","confirm","proxyImage","unbindEvents","makeJQueryPlugin","promise","_createImagesLoaded","pluginName","idSuffix","filePlaceholder","fileBrowse","fileNumber","selectPlaceholder","selectSearch","selectSearchLimit","selectSearchNotFound","selectSearchPlaceholder","selectVisibleOptions","selectSmartPositioning","locale","locales","onSelectOpened","onSelectClosed","onFormStyled","Plugin","onDocumentClick","parents","selectbox","dropdown","opt","iOS","Android","Attributes","checkboxOutput","att","prependTo","triggerHandler","change","closest","before","radioOutput","commonParents","cachedThis","commonParent","inputName","fileOutput","browse","files","numberOutput","step","interval","Number","changeValue","spin","newValue","decimals","multiplier","selectboxOutput","preventScrolling","scrollDiff","makeList","op","li","liClass","liClasses","dataList","optionClass","optgroupClass","dataJqfsClass","k","ul","ulHeight","liHeight","clkd","ctrlKey","metaKey","shiftKey","prevAll","nextAll","not","arrIndexes","doMultipleSelect","searchHTML","selectzIndex","divSelect","divText","optionSelected","notFound","liWidthInner","liWidth","l","selClone","clone","selCloneWidth","selectHeight","searchHeight","isMaxHeight","liSelected","liOuterHeight","win","topOffset","bottomOffset","visible","minHeight","dropDown","maxHeightBottom","maxHeightTop","dropUp","zIndex","query","hover","liText","registered","doSelect","returns","Zepto","Mask","mask","invalid","getCaret","ctrl","dSel","selection","cSelStart","selectionStart","appVersion","createRange","moveStart","setCaret","range","setSelectionRange","createTextRange","collapse","moveEnd","maskDigitPosMapOld","maskDigitPosMap","jMaskGlobals","useInput","behaviour","oldValue","selectOnFocus","clearIfNotMatch","regexMask","getRegexMask","translation","pattern","optional","recursive","oRecursive","r","maskChunks","jMask","digit","destroyEvents","v","calculateCaretPosition","oldVal","newVal","getMasked","caretPosNew","caretPosOld","newValL","oldValL","maskDigitsBeforeCaret","maskDigitsAfterCaret","maskDigitsBeforeCaretAll","maskDigitsBeforeCaretAllOld","caretPos","byPassKeys","keyStrokeCompensation","callbacks","skipMaskChars","lastMaskChar","lastUntranslatedMaskChar","buf","maskLen","valLen","addMethod","resetPos","maskDigitCount","maskDigitPosArr","reverse","maskDigit","valDigit","fallback","lastMaskCharDigit","mapMaskdigitPositions","maskDiff","changed","defaultArgs","criteria","caret","getCleanVal","getMaskedVal","onlyMask","maxlength","maskWatchers","HTMLAttributes","notSameMaskObject","field","maskObject","stringify","globals","watchInterval","watchInputs","maskFunction","masked","unmask","dataMask","cleanVal","applyDataMask","maskElements","dataMaskAttr","isSupported","watchDataMask","0","#","A","S","jRange","onstatechange","ondragend","onbarclicked","isRange","showLabels","showScale","snap","node","inputNode","from","domNode","onChange","lowPointer","highPointer","last","labels","lowLabel","highLabel","scale","bar","clickableBar","render","isSingle","attachEvents","renderScale","setValue","barClicked","onDragStart","onDrag","onDragEnd","firstLeft","firstHalfWidth","lastLeft","lastHalfWidth","leftSide","rightSide","isPx","leftPos","lowPos","highPos","circleWidth","prcToPx","expPos","correctPositionForSnap","w","showPointerValue","isReadonly","currentValue","positionToValue","diff","expectedPosition","values","prc","valuesToPrc","getBarWidth","label","setInputValue","isDecimal","final","getOptions","getRange","toggleDisable","updateRange","regionSearch","fSearch","fSection","fItem","fNotFound","fQuery","spinner","oldval","stick_in_parent","doc","elm","enable_bottoming","inner_scrolling","manual_spacer","offset_top","parent_selector","recalc_every","sticky_class","spacer","bottoming","padding_bottom","parent_top","parent_height","el_float","detached","bottomed","fixed","last_pos","last_scroll_height","recalc","recalc_and_tick","recalc_counter","border_top","padding_top","restore","vertical-align","float","recalced","will_bottom","win_height","delimiter","tags_callbacks","doAutosize","o","minWidth","maxWidth","testSubject","escaped","testerWidth","comfortZone","resetAutosize","minInputWidth","maxInputWidth","inputPadding","fontSize","fontFamily","fontWeight","letterSpacing","whiteSpace","testerId","addTag","tagslist","unique","skipTag","tagExist","removeTag","escape","tagsInput","updateTagsField","unescape","old","importTags","interactive","defaultText","minChars","autocomplete","selectFirst","removeWithBackspace","placeholderColor","autosize","uniqueIdCounter","pid","real_input","input_wrapper","fake_input","onAddTag","onRemoveTag","markup","autocomplete_url","attrname","autocomplete_options","Autocompleter","formatted","ui","maxChars","_checkDelimiter","last_tag","fromCharCode","tags","toggleSidebarRows","rowCount","rowShowed","rowChildren","$thisToggle","$text"],"mappings":"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","file":"plugins.js","sourcesContent":["$.fn.productCarousel = function() {\r\n\tthis.each(function() {\r\n\t\tvar $carousel = $(this);\r\n\t\tif ($carousel.length) {\r\n\t\t\tvar $carouselCells = $carousel.find('.product-photos__thumbs-item');\r\n\t\t\tvar navTop  = $carousel.position().top;\r\n\t\t\tvar navCellHeight = $carouselCells.height();\r\n\t\t\tvar navHeight = $carousel.height();\r\n\t\t\t$carousel.on( 'click', '.product-photos__thumbs-item', function( event ) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tvar index = $( event.currentTarget ).index();\r\n\t\t\t\tvar thisBig = $(this).data('photo-big');\r\n\t\t\t\t$(this).addClass('product-photos__thumbs-item--active').siblings().removeClass('product-photos__thumbs-item--active');\r\n\t\t\t\t$('.js-product-photo-big').attr('href', thisBig).addClass('fadeIn');\r\n\t\t\t\t$('.js-product-photo-big img').attr('src', thisBig);\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t$('.js-product-photo-big').removeClass('fadeIn');\r\n\t\t\t\t}, 100);\r\n\t\t\t\t// scroll nav\r\n\t\t\t\tvar scrollY = $(this).position().top + $carousel.scrollTop() - ( navHeight + navCellHeight) / 2;\r\n\t\t\t\t$carousel.animate({\r\n\t\t\t\t\tscrollTop: scrollY\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t$('.js-product-gallery-arrow').on('click', function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tif ($(this).hasClass('product-photos__thumbs-arrow--up')) {\r\n\t\t\t\t\t$('.js-product-gallery').find('.product-photos__thumbs-item--active').prev().click();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$('.js-product-gallery').find('.product-photos__thumbs-item--active').next().click();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n}","/*\r\n * easy-autocomplete\r\n * jQuery plugin for autocompletion\r\n * \r\n * @author Łukasz Pawełczak (http://github.com/pawelczak)\r\n * @version 1.3.5\r\n * Copyright  License: \r\n */\r\n\r\n/*\r\n * EasyAutocomplete - Configuration \r\n */\r\nvar EasyAutocomplete = (function(scope){\r\n\r\n\tscope.Configuration = function Configuration(options) {\r\n\t\tvar defaults = {\r\n\t\t\tdata: \"list-required\",\r\n\t\t\turl: \"list-required\",\r\n\t\t\tdataType: \"json\",\r\n\r\n\t\t\tlistLocation: function(data) {\r\n\t\t\t\treturn data;\r\n\t\t\t},\r\n\r\n\t\t\txmlElementName: \"\",\r\n\r\n\t\t\tgetValue: function(element) {\r\n\t\t\t\treturn element;\r\n\t\t\t},\r\n\r\n\t\t\tautocompleteOff: true,\r\n\r\n\t\t\tplaceholder: false,\r\n\r\n\t\t\tajaxCallback: function() {},\r\n\r\n\t\t\tmatchResponseProperty: false,\r\n\r\n\t\t\tlist: {\r\n\t\t\t\tsort: {\r\n\t\t\t\t\tenabled: false,\r\n\t\t\t\t\tmethod: function(a, b) {\r\n\t\t\t\t\t\ta = defaults.getValue(a);\r\n\t\t\t\t\t\tb = defaults.getValue(b);\r\n\t\t\t\t\t\tif (a < b) {\r\n\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (a > b) {\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tmaxNumberOfElements: 6,\r\n\r\n\t\t\t\thideOnEmptyPhrase: true,\r\n\r\n\t\t\t\tmatch: {\r\n\t\t\t\t\tenabled: false,\r\n\t\t\t\t\tcaseSensitive: false,\r\n\t\t\t\t\tmethod: function(element, phrase) {\r\n\r\n\t\t\t\t\t\tif (element.search(phrase) > -1) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tshowAnimation: {\r\n\t\t\t\t\ttype: \"normal\", //normal|slide|fade\r\n\t\t\t\t\ttime: 400,\r\n\t\t\t\t\tcallback: function() {}\r\n\t\t\t\t},\r\n\r\n\t\t\t\thideAnimation: {\r\n\t\t\t\t\ttype: \"normal\",\r\n\t\t\t\t\ttime: 400,\r\n\t\t\t\t\tcallback: function() {}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t/* Events */\r\n\t\t\t\tonClickEvent: function() {},\r\n\t\t\t\tonSelectItemEvent: function() {},\r\n\t\t\t\tonLoadEvent: function() {},\r\n\t\t\t\tonChooseEvent: function() {},\r\n\t\t\t\tonKeyEnterEvent: function() {},\r\n\t\t\t\tonMouseOverEvent: function() {},\r\n\t\t\t\tonMouseOutEvent: function() {},\t\r\n\t\t\t\tonShowListEvent: function() {},\r\n\t\t\t\tonHideListEvent: function() {}\r\n\t\t\t},\r\n\r\n\t\t\thighlightPhrase: true,\r\n\r\n\t\t\ttheme: \"\",\r\n\r\n\t\t\tcssClasses: \"\",\r\n\r\n\t\t\tminCharNumber: 0,\r\n\r\n\t\t\trequestDelay: 0,\r\n\r\n\t\t\tadjustWidth: true,\r\n\r\n\t\t\tajaxSettings: {},\r\n\r\n\t\t\tpreparePostData: function(data, inputPhrase) {return data;},\r\n\r\n\t\t\tloggerEnabled: true,\r\n\r\n\t\t\ttemplate: \"\",\r\n\r\n\t\t\tcategoriesAssigned: false,\r\n\r\n\t\t\tcategories: [{\r\n\t\t\t\tmaxNumberOfElements: 4\r\n\t\t\t}]\r\n\r\n\t\t};\r\n\t\t\r\n\t\tvar externalObjects = [\"ajaxSettings\", \"template\"];\r\n\r\n\t\tthis.get = function(propertyName) {\r\n\t\t\treturn defaults[propertyName];\r\n\t\t};\r\n\r\n\t\tthis.equals = function(name, value) {\r\n\t\t\tif (isAssigned(name)) {\r\n\t\t\t\tif (defaults[name] === value) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t} \r\n\t\t\t\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\t\tthis.checkDataUrlProperties = function() {\r\n\t\t\tif (defaults.url === \"list-required\" && defaults.data === \"list-required\") {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t};\r\n\t\tthis.checkRequiredProperties = function() {\r\n\t\t\tfor (var propertyName in defaults) {\r\n\t\t\t\tif (defaults[propertyName] === \"required\") {\r\n\t\t\t\t\tlogger.error(\"Option \" + propertyName + \" must be defined\");\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\tthis.printPropertiesThatDoesntExist = function(consol, optionsToCheck) {\r\n\t\t\tprintPropertiesThatDoesntExist(consol, optionsToCheck);\r\n\t\t};\r\n\r\n\r\n\t\tprepareDefaults();\r\n\r\n\t\tmergeOptions();\r\n\r\n\t\tif (defaults.loggerEnabled === true) {\r\n\t\t\tprintPropertiesThatDoesntExist(console, options);\t\r\n\t\t}\r\n\r\n\t\taddAjaxSettings();\r\n\r\n\t\tprocessAfterMerge();\r\n\t\tfunction prepareDefaults() {\r\n\r\n\t\t\tif (options.dataType === \"xml\") {\r\n\t\t\t\t\r\n\t\t\t\tif (!options.getValue) {\r\n\r\n\t\t\t\t\toptions.getValue = function(element) {\r\n\t\t\t\t\t\treturn $(element).text();\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\r\n\t\t\t\tif (!options.list) {\r\n\r\n\t\t\t\t\toptions.list = {};\r\n\t\t\t\t} \r\n\r\n\t\t\t\tif (!options.list.sort) {\r\n\t\t\t\t\toptions.list.sort = {};\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\toptions.list.sort.method = function(a, b) {\r\n\t\t\t\t\ta = options.getValue(a);\r\n\t\t\t\t\tb = options.getValue(b);\r\n\t\t\t\t\tif (a < b) {\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (a > b) {\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (!options.list.match) {\r\n\t\t\t\t\toptions.list.match = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions.list.match.method = function(element, phrase) {\r\n\r\n\t\t\t\t\tif (element.search(phrase) > -1) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\t\t\tif (options.categories !== undefined && options.categories instanceof Array) {\r\n\r\n\t\t\t\tvar categories = [];\r\n\r\n\t\t\t\tfor (var i = 0, length = options.categories.length; i < length; i += 1) { \r\n\r\n\t\t\t\t\tvar category = options.categories[i];\r\n\r\n\t\t\t\t\tfor (var property in defaults.categories[0]) {\r\n\r\n\t\t\t\t\t\tif (category[property] === undefined) {\r\n\t\t\t\t\t\t\tcategory[property] = defaults.categories[0][property];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcategories.push(category);\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions.categories = categories;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction mergeOptions() {\r\n\r\n\t\t\tdefaults = mergeObjects(defaults, options);\r\n\r\n\t\t\tfunction mergeObjects(source, target) {\r\n\t\t\t\tvar mergedObject = source || {};\r\n\r\n\t\t\t\tfor (var propertyName in source) {\r\n\t\t\t\t\tif (target[propertyName] !== undefined && target[propertyName] !== null) {\r\n\r\n\t\t\t\t\t\tif (typeof target[propertyName] !== \"object\" || \r\n\t\t\t\t\t\t\t\ttarget[propertyName] instanceof Array) {\r\n\t\t\t\t\t\t\tmergedObject[propertyName] = target[propertyName];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmergeObjects(source[propertyName], target[propertyName]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t/* If data is an object */\r\n\t\t\t\tif (target.data !== undefined && target.data !== null && typeof target.data === \"object\") {\r\n\t\t\t\t\tmergedObject.data = target.data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn mergedObject;\r\n\t\t\t}\r\n\t\t}\t\r\n\r\n\r\n\t\tfunction processAfterMerge() {\r\n\t\t\t\r\n\t\t\tif (defaults.url !== \"list-required\" && typeof defaults.url !== \"function\") {\r\n\t\t\t\tvar defaultUrl = defaults.url;\r\n\t\t\t\tdefaults.url = function() {\r\n\t\t\t\t\treturn defaultUrl;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (defaults.ajaxSettings.url !== undefined && typeof defaults.ajaxSettings.url !== \"function\") {\r\n\t\t\t\tvar defaultUrl = defaults.ajaxSettings.url;\r\n\t\t\t\tdefaults.ajaxSettings.url = function() {\r\n\t\t\t\t\treturn defaultUrl;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof defaults.listLocation === \"string\") {\r\n\t\t\t\tvar defaultlistLocation = defaults.listLocation;\r\n\r\n\t\t\t\tif (defaults.dataType.toUpperCase() === \"XML\") {\r\n\t\t\t\t\tdefaults.listLocation = function(data) {\r\n\t\t\t\t\t\treturn $(data).find(defaultlistLocation);\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdefaults.listLocation = function(data) {\r\n\t\t\t\t\t\treturn data[defaultlistLocation];\r\n\t\t\t\t\t};\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof defaults.getValue === \"string\") {\r\n\t\t\t\tvar defaultsGetValue = defaults.getValue;\r\n\t\t\t\tdefaults.getValue = function(element) {\r\n\t\t\t\t\treturn element[defaultsGetValue];\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (options.categories !== undefined) {\r\n\t\t\t\tdefaults.categoriesAssigned = true;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction addAjaxSettings() {\r\n\r\n\t\t\tif (options.ajaxSettings !== undefined && typeof options.ajaxSettings === \"object\") {\r\n\t\t\t\tdefaults.ajaxSettings = options.ajaxSettings;\r\n\t\t\t} else {\r\n\t\t\t\tdefaults.ajaxSettings = {};\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tfunction isAssigned(name) {\r\n\t\t\tif (defaults[name] !== undefined && defaults[name] !== null) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction printPropertiesThatDoesntExist(consol, optionsToCheck) {\r\n\t\t\t\r\n\t\t\tcheckPropertiesIfExist(defaults, optionsToCheck);\r\n\r\n\t\t\tfunction checkPropertiesIfExist(source, target) {\r\n\t\t\t\tfor(var property in target) {\r\n\t\t\t\t\tif (source[property] === undefined) {\r\n\t\t\t\t\t\tconsol.log(\"Property '\" + property + \"' does not exist in EasyAutocomplete options API.\");\t\t\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (typeof source[property] === \"object\" && $.inArray(property, externalObjects) === -1) {\r\n\t\t\t\t\t\tcheckPropertiesIfExist(source[property], target[property]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n\r\n/*\r\n * EasyAutocomplete - Logger \r\n */\r\nvar EasyAutocomplete = (function(scope){\r\n\t\r\n\tscope.Logger = function Logger() {\r\n\r\n\t\tthis.error = function(message) {\r\n\t\t\tconsole.log(\"ERROR: \" + message);\r\n\t\t};\r\n\r\n\t\tthis.warning = function(message) {\r\n\t\t\tconsole.log(\"WARNING: \" + message);\r\n\t\t};\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\t\r\n\r\n/*\r\n * EasyAutocomplete - Constans\r\n */\r\nvar EasyAutocomplete = (function(scope){\t\r\n\t\r\n\tscope.Constans = function Constans() {\r\n\t\tvar constants = {\r\n\t\t\tCONTAINER_CLASS: \"easy-autocomplete-container\",\r\n\t\t\tCONTAINER_ID: \"eac-container-\",\r\n\r\n\t\t\tWRAPPER_CSS_CLASS: \"easy-autocomplete\"\r\n\t\t};\r\n\r\n\t\tthis.getValue = function(propertyName) {\r\n\t\t\treturn constants[propertyName];\r\n\t\t};\r\n\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n/*\r\n * EasyAutocomplete - ListBuilderService \r\n *\r\n * @author Łukasz Pawełczak \r\n *\r\n */\r\nvar EasyAutocomplete = (function(scope) {\r\n\r\n\tscope.ListBuilderService = function ListBuilderService(configuration, proccessResponseData) {\r\n\r\n\r\n\t\tthis.init = function(data) {\r\n\t\t\tvar listBuilder = [],\r\n\t\t\t\tbuilder = {};\r\n\r\n\t\t\tbuilder.data = configuration.get(\"listLocation\")(data);\r\n\t\t\tbuilder.getValue = configuration.get(\"getValue\");\r\n\t\t\tbuilder.maxListSize = configuration.get(\"list\").maxNumberOfElements;\r\n\r\n\t\t\t\t\r\n\t\t\tlistBuilder.push(builder);\r\n\r\n\t\t\treturn listBuilder;\r\n\t\t};\r\n\r\n\t\tthis.updateCategories = function(listBuilder, data) {\r\n\t\t\t\r\n\t\t\tif (configuration.get(\"categoriesAssigned\")) {\r\n\r\n\t\t\t\tlistBuilder = [];\r\n\r\n\t\t\t\tfor(var i = 0; i < configuration.get(\"categories\").length; i += 1) {\r\n\r\n\t\t\t\t\tvar builder = convertToListBuilder(configuration.get(\"categories\")[i], data);\r\n\r\n\t\t\t\t\tlistBuilder.push(builder);\r\n\t\t\t\t}\r\n\r\n\t\t\t} \r\n\r\n\t\t\treturn listBuilder;\r\n\t\t};\r\n\r\n\t\tthis.convertXml = function(listBuilder) {\r\n\t\t\tif(configuration.get(\"dataType\").toUpperCase() === \"XML\") {\r\n\r\n\t\t\t\tfor(var i = 0; i < listBuilder.length; i += 1) {\r\n\t\t\t\t\tlistBuilder[i].data = convertXmlToList(listBuilder[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn listBuilder;\r\n\t\t};\r\n\r\n\t\tthis.processData = function(listBuilder, inputPhrase) {\r\n\r\n\t\t\tfor(var i = 0, length = listBuilder.length; i < length; i+=1) {\r\n\t\t\t\tlistBuilder[i].data = proccessResponseData(configuration, listBuilder[i], inputPhrase);\r\n\t\t\t}\r\n\r\n\t\t\treturn listBuilder;\r\n\t\t};\r\n\r\n\t\tthis.checkIfDataExists = function(listBuilders) {\r\n\r\n\t\t\tfor(var i = 0, length = listBuilders.length; i < length; i += 1) {\r\n\r\n\t\t\t\tif (listBuilders[i].data !== undefined && listBuilders[i].data instanceof Array) {\r\n\t\t\t\t\tif (listBuilders[i].data.length > 0) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} \r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\r\n\t\tfunction convertToListBuilder(category, data) {\r\n\r\n\t\t\tvar builder = {};\r\n\r\n\t\t\tif(configuration.get(\"dataType\").toUpperCase() === \"XML\") {\r\n\r\n\t\t\t\tbuilder = convertXmlToListBuilder();\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbuilder = convertDataToListBuilder();\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\tif (category.header !== undefined) {\r\n\t\t\t\tbuilder.header = category.header;\r\n\t\t\t}\r\n\r\n\t\t\tif (category.maxNumberOfElements !== undefined) {\r\n\t\t\t\tbuilder.maxNumberOfElements = category.maxNumberOfElements;\r\n\t\t\t}\r\n\r\n\t\t\tif (configuration.get(\"list\").maxNumberOfElements !== undefined) {\r\n\r\n\t\t\t\tbuilder.maxListSize = configuration.get(\"list\").maxNumberOfElements;\r\n\t\t\t}\r\n\r\n\t\t\tif (category.getValue !== undefined) {\r\n\r\n\t\t\t\tif (typeof category.getValue === \"string\") {\r\n\t\t\t\t\tvar defaultsGetValue = category.getValue;\r\n\t\t\t\t\tbuilder.getValue = function(element) {\r\n\t\t\t\t\t\treturn element[defaultsGetValue];\r\n\t\t\t\t\t};\r\n\t\t\t\t} else if (typeof category.getValue === \"function\") {\r\n\t\t\t\t\tbuilder.getValue = category.getValue;\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tbuilder.getValue = configuration.get(\"getValue\");\t\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\treturn builder;\r\n\r\n\r\n\t\t\tfunction convertXmlToListBuilder() {\r\n\r\n\t\t\t\tvar builder = {},\r\n\t\t\t\t\tlistLocation;\r\n\r\n\t\t\t\tif (category.xmlElementName !== undefined) {\r\n\t\t\t\t\tbuilder.xmlElementName = category.xmlElementName;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (category.listLocation !== undefined) {\r\n\r\n\t\t\t\t\tlistLocation = category.listLocation;\r\n\t\t\t\t} else if (configuration.get(\"listLocation\") !== undefined) {\r\n\r\n\t\t\t\t\tlistLocation = configuration.get(\"listLocation\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (listLocation !== undefined) {\r\n\t\t\t\t\tif (typeof listLocation === \"string\") {\r\n\t\t\t\t\t\tbuilder.data = $(data).find(listLocation);\r\n\t\t\t\t\t} else if (typeof listLocation === \"function\") {\r\n\r\n\t\t\t\t\t\tbuilder.data = listLocation(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tbuilder.data = data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn builder;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfunction convertDataToListBuilder() {\r\n\r\n\t\t\t\tvar builder = {};\r\n\r\n\t\t\t\tif (category.listLocation !== undefined) {\r\n\r\n\t\t\t\t\tif (typeof category.listLocation === \"string\") {\r\n\t\t\t\t\t\tbuilder.data = data[category.listLocation];\r\n\t\t\t\t\t} else if (typeof category.listLocation === \"function\") {\r\n\t\t\t\t\t\tbuilder.data = category.listLocation(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbuilder.data = data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn builder;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction convertXmlToList(builder) {\r\n\t\t\tvar simpleList = [];\r\n\r\n\t\t\tif (builder.xmlElementName === undefined) {\r\n\t\t\t\tbuilder.xmlElementName = configuration.get(\"xmlElementName\");\r\n\t\t\t}\r\n\r\n\r\n\t\t\t$(builder.data).find(builder.xmlElementName).each(function() {\r\n\t\t\t\tsimpleList.push(this);\r\n\t\t\t});\r\n\r\n\t\t\treturn simpleList;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n\r\n/*\r\n * EasyAutocomplete - Data proccess module\r\n *\r\n * Process list to display:\r\n * - sort \r\n * - decrease number to specific number\r\n * - show only matching list\r\n *\r\n */\r\nvar EasyAutocomplete = (function(scope) {\r\n\r\n\tscope.proccess = function proccessData(config, listBuilder, phrase) {\r\n\r\n\t\tscope.proccess.match = match;\r\n\r\n\t\tvar list = listBuilder.data,\r\n\t\t\tinputPhrase = phrase;//TODO REFACTOR\r\n\r\n\t\tlist = findMatch(list, inputPhrase);\r\n\t\tlist = reduceElementsInList(list);\r\n\t\tlist = sort(list);\r\n\r\n\t\treturn list;\r\n\r\n\r\n\t\tfunction findMatch(list, phrase) {\r\n\t\t\tvar preparedList = [],\r\n\t\t\t\tvalue = \"\";\r\n\r\n\t\t\tif (config.get(\"list\").match.enabled) {\r\n\r\n\t\t\t\tfor(var i = 0, length = list.length; i < length; i += 1) {\r\n\r\n\t\t\t\t\tvalue = config.get(\"getValue\")(list[i]);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (match(value, phrase)) {\r\n\t\t\t\t\t\tpreparedList.push(list[i]);\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tpreparedList = list;\r\n\t\t\t}\r\n\r\n\t\t\treturn preparedList;\r\n\t\t}\r\n\r\n\t\tfunction match(value, phrase) {\r\n\r\n\t\t\tif (!config.get(\"list\").match.caseSensitive) {\r\n\r\n\t\t\t\tif (typeof value === \"string\") {\r\n\t\t\t\t\tvalue = value.toLowerCase();\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tphrase = phrase.toLowerCase();\r\n\t\t\t}\r\n\t\t\tif (config.get(\"list\").match.method(value, phrase)) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction reduceElementsInList(list) {\r\n\t\t\tif (listBuilder.maxNumberOfElements !== undefined && list.length > listBuilder.maxNumberOfElements) {\r\n\t\t\t\tlist = list.slice(0, listBuilder.maxNumberOfElements);\r\n\t\t\t}\r\n\r\n\t\t\treturn list;\r\n\t\t}\r\n\r\n\t\tfunction sort(list) {\r\n\t\t\tif (config.get(\"list\").sort.enabled) {\r\n\t\t\t\tlist.sort(config.get(\"list\").sort.method);\r\n\t\t\t}\r\n\r\n\t\t\treturn list;\r\n\t\t}\r\n\t\t\r\n\t};\r\n\r\n\r\n\treturn scope;\r\n\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n\r\n/*\r\n * EasyAutocomplete - Template \r\n *\r\n * \r\n *\r\n */\r\nvar EasyAutocomplete = (function(scope){\r\n\r\n\tscope.Template = function Template(options) {\r\n\r\n\r\n\t\tvar genericTemplates = {\r\n\t\t\tbasic: {\r\n\t\t\t\ttype: \"basic\",\r\n\t\t\t\tmethod: function(element) { return element; },\r\n\t\t\t\tcssClass: \"\"\r\n\t\t\t},\r\n\t\t\tdescription: {\r\n\t\t\t\ttype: \"description\",\r\n\t\t\t\tfields: {\r\n\t\t\t\t\tdescription: \"description\"\r\n\t\t\t\t},\r\n\t\t\t\tmethod: function(element) {\treturn element + \" - description\"; },\r\n\t\t\t\tcssClass: \"eac-description\"\r\n\t\t\t},\r\n\t\t\ticonLeft: {\r\n\t\t\t\ttype: \"iconLeft\",\r\n\t\t\t\tfields: {\r\n\t\t\t\t\ticon: \"\"\r\n\t\t\t\t},\r\n\t\t\t\tmethod: function(element) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t},\r\n\t\t\t\tcssClass: \"eac-icon-left\"\r\n\t\t\t},\r\n\t\t\ticonRight: {\r\n\t\t\t\ttype: \"iconRight\",\r\n\t\t\t\tfields: {\r\n\t\t\t\t\ticonSrc: \"\"\r\n\t\t\t\t},\r\n\t\t\t\tmethod: function(element) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t},\r\n\t\t\t\tcssClass: \"eac-icon-right\"\r\n\t\t\t},\r\n\t\t\tlinks: {\r\n\t\t\t\ttype: \"links\",\r\n\t\t\t\tfields: {\r\n\t\t\t\t\tlink: \"\"\r\n\t\t\t\t},\r\n\t\t\t\tmethod: function(element) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t},\r\n\t\t\t\tcssClass: \"\"\r\n\t\t\t},\r\n\t\t\tcustom: {\r\n\t\t\t\ttype: \"custom\",\r\n\t\t\t\tmethod: function() {},\r\n\t\t\t\tcssClass: \"\"\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\r\n\t\t/*\r\n\t\t * Converts method with {{text}} to function\r\n\t\t */\r\n\t\tconvertTemplateToMethod = function(template) {\r\n\r\n\r\n\t\t\tvar _fields = template.fields,\r\n\t\t\t\tbuildMethod;\r\n\r\n\t\t\tif (template.type === \"description\") {\r\n\r\n\t\t\t\tbuildMethod = genericTemplates.description.method; \r\n\r\n\t\t\t\tif (typeof _fields.description === \"string\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn elementValue + \" - <span>\" + element[_fields.description] + \"</span>\";\r\n\t\t\t\t\t};\t\t\t\t\t\r\n\t\t\t\t} else if (typeof _fields.description === \"function\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn elementValue + \" - <span>\" + _fields.description(element) + \"</span>\";\r\n\t\t\t\t\t};\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn buildMethod;\r\n\t\t\t}\r\n\r\n\t\t\tif (template.type === \"iconRight\") {\r\n\r\n\t\t\t\tif (typeof _fields.iconSrc === \"string\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn elementValue + \"<img class='eac-icon' src='\" + element[_fields.iconSrc] + \"' />\" ;\r\n\t\t\t\t\t};\t\t\t\t\t\r\n\t\t\t\t} else if (typeof _fields.iconSrc === \"function\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn elementValue + \"<img class='eac-icon' src='\" + _fields.iconSrc(element) + \"' />\" ;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn buildMethod;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (template.type === \"iconLeft\") {\r\n\r\n\t\t\t\tif (typeof _fields.iconSrc === \"string\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn \"<img class='eac-icon' src='\" + element[_fields.iconSrc] + \"' />\" + elementValue;\r\n\t\t\t\t\t};\t\t\t\t\t\r\n\t\t\t\t} else if (typeof _fields.iconSrc === \"function\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn \"<img class='eac-icon' src='\" + _fields.iconSrc(element) + \"' />\" + elementValue;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn buildMethod;\r\n\t\t\t}\r\n\r\n\t\t\tif(template.type === \"links\") {\r\n\r\n\t\t\t\tif (typeof _fields.link === \"string\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn \"<a href='\" + element[_fields.link] + \"' >\" + elementValue + \"</a>\";\r\n\t\t\t\t\t};\t\t\t\t\t\r\n\t\t\t\t} else if (typeof _fields.link === \"function\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn \"<a href='\" + _fields.link(element) + \"' >\" + elementValue + \"</a>\";\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn buildMethod;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (template.type === \"custom\") {\r\n\r\n\t\t\t\treturn template.method;\r\n\t\t\t}\r\n\r\n\t\t\treturn genericTemplates.basic.method;\r\n\r\n\t\t},\r\n\r\n\r\n\t\tprepareBuildMethod = function(options) {\r\n\t\t\tif (!options || !options.type) {\r\n\r\n\t\t\t\treturn genericTemplates.basic.method;\r\n\t\t\t}\r\n\r\n\t\t\tif (options.type && genericTemplates[options.type]) {\r\n\r\n\t\t\t\treturn convertTemplateToMethod(options);\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn genericTemplates.basic.method;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\ttemplateClass = function(options) {\r\n\t\t\tvar emptyStringFunction = function() {return \"\";};\r\n\r\n\t\t\tif (!options || !options.type) {\r\n\r\n\t\t\t\treturn emptyStringFunction;\r\n\t\t\t}\r\n\r\n\t\t\tif (options.type && genericTemplates[options.type]) {\r\n\t\t\t\treturn (function () { \r\n\t\t\t\t\tvar _cssClass = genericTemplates[options.type].cssClass;\r\n\t\t\t\t\treturn function() { return _cssClass;};\r\n\t\t\t\t})();\r\n\t\t\t} else {\r\n\t\t\t\treturn emptyStringFunction;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tthis.getTemplateClass = templateClass(options);\r\n\r\n\t\tthis.build = prepareBuildMethod(options);\r\n\r\n\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n\r\n/*\r\n * EasyAutocomplete - jQuery plugin for autocompletion\r\n *\r\n */\r\nvar EasyAutocomplete = (function(scope) {\r\n\r\n\t\r\n\tscope.main = function Core($input, options) {\r\n\t\t\t\t\r\n\t\tvar module = {\r\n\t\t\t\tname: \"EasyAutocomplete\",\r\n\t\t\t\tshortcut: \"eac\"\r\n\t\t\t};\r\n\r\n\t\tvar consts = new scope.Constans(),\r\n\t\t\tconfig = new scope.Configuration(options),\r\n\t\t\tlogger = new scope.Logger(),\r\n\t\t\ttemplate = new scope.Template(options.template),\r\n\t\t\tlistBuilderService = new scope.ListBuilderService(config, scope.proccess),\r\n\t\t\tcheckParam = config.equals,\r\n\r\n\t\t\t$field = $input, \r\n\t\t\t$container = \"\",\r\n\t\t\telementsList = [],\r\n\t\t\tselectedElement = -1,\r\n\t\t\trequestDelayTimeoutId;\r\n\r\n\t\tscope.consts = consts;\r\n\r\n\t\tthis.getConstants = function() {\r\n\t\t\treturn consts;\r\n\t\t};\r\n\r\n\t\tthis.getConfiguration = function() {\r\n\t\t\treturn config;\r\n\t\t};\r\n\r\n\t\tthis.getContainer = function() {\r\n\t\t\treturn $container;\r\n\t\t};\r\n\r\n\t\tthis.getSelectedItemIndex = function() {\r\n\t\t\treturn selectedElement;\r\n\t\t};\r\n\r\n\t\tthis.getItems = function () {\r\n\t\t\treturn elementsList;\r\n\t\t};\r\n\r\n\t\tthis.getItemData = function(index) {\r\n\r\n\t\t\tif (elementsList.length < index || elementsList[index] === undefined) {\r\n\t\t\t\treturn -1;\r\n\t\t\t} else {\r\n\t\t\t\treturn elementsList[index];\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.getSelectedItemData = function() {\r\n\t\t\treturn this.getItemData(selectedElement);\r\n\t\t};\r\n\r\n\t\tthis.build = function() {\r\n\t\t\tprepareField();\r\n\t\t};\r\n\r\n\t\tthis.init = function() {\r\n\t\t\tinit();\r\n\t\t};\r\n\t\tfunction init() {\r\n\r\n\t\t\tif ($field.length === 0) {\r\n\t\t\t\tlogger.error(\"Input field doesn't exist.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!config.checkDataUrlProperties()) {\r\n\t\t\t\tlogger.error(\"One of options variables 'data' or 'url' must be defined.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!config.checkRequiredProperties()) {\r\n\t\t\t\tlogger.error(\"Will not work without mentioned properties.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tprepareField();\r\n\t\t\tbindEvents();\t\r\n\r\n\t\t}\r\n\t\tfunction prepareField() {\r\n\r\n\t\t\t\t\r\n\t\t\tif ($field.parent().hasClass(consts.getValue(\"WRAPPER_CSS_CLASS\"))) {\r\n\t\t\t\tremoveContainer();\r\n\t\t\t\tremoveWrapper();\r\n\t\t\t} \r\n\t\t\t\r\n\t\t\tcreateWrapper();\r\n\t\t\tcreateContainer();\t\r\n\r\n\t\t\t$container = $(\"#\" + getContainerId());\r\n\t\t\tif (config.get(\"placeholder\")) {\r\n\t\t\t\t$field.attr(\"placeholder\", config.get(\"placeholder\"));\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfunction createWrapper() {\r\n\t\t\t\tvar $wrapper = $(\"<div>\"),\r\n\t\t\t\t\tclasses = consts.getValue(\"WRAPPER_CSS_CLASS\");\r\n\r\n\t\t\t\r\n\t\t\t\tif (config.get(\"theme\") && config.get(\"theme\") !== \"\") {\r\n\t\t\t\t\tclasses += \" eac-\" + config.get(\"theme\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (config.get(\"cssClasses\") && config.get(\"cssClasses\") !== \"\") {\r\n\t\t\t\t\tclasses += \" \" + config.get(\"cssClasses\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (template.getTemplateClass() !== \"\") {\r\n\t\t\t\t\tclasses += \" \" + template.getTemplateClass();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t\t$wrapper\r\n\t\t\t\t\t.addClass(classes);\r\n\t\t\t\t$field.wrap($wrapper);\r\n\r\n\r\n\t\t\t\tif (config.get(\"adjustWidth\") === true) {\r\n\t\t\t\t\tadjustWrapperWidth();\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction adjustWrapperWidth() {\r\n\t\t\t\tvar fieldWidth = $field.outerWidth();\r\n\r\n\t\t\t\t$field.parent().css(\"width\", fieldWidth);\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tfunction removeWrapper() {\r\n\t\t\t\t$field.unwrap();\r\n\t\t\t}\r\n\r\n\t\t\tfunction createContainer() {\r\n\t\t\t\tvar $elements_container = $(\"<div>\").addClass(consts.getValue(\"CONTAINER_CLASS\"));\r\n\r\n\t\t\t\t$elements_container\r\n\t\t\t\t\t\t.attr(\"id\", getContainerId())\r\n\t\t\t\t\t\t.prepend($(\"<ul>\"));\r\n\r\n\r\n\t\t\t\t(function() {\r\n\r\n\t\t\t\t\t$elements_container\r\n\t\t\t\t\t\t/* List show animation */\r\n\t\t\t\t\t\t.on(\"show.eac\", function() {\r\n\r\n\t\t\t\t\t\t\tswitch(config.get(\"list\").showAnimation.type) {\r\n\r\n\t\t\t\t\t\t\t\tcase \"slide\":\r\n\t\t\t\t\t\t\t\t\tvar animationTime = config.get(\"list\").showAnimation.time,\r\n\t\t\t\t\t\t\t\t\t\tcallback = config.get(\"list\").showAnimation.callback;\r\n\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").slideDown(animationTime, callback);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tcase \"fade\":\r\n\t\t\t\t\t\t\t\t\tvar animationTime = config.get(\"list\").showAnimation.time,\r\n\t\t\t\t\t\t\t\t\t\tcallback = config.get(\"list\").showAnimation.callback;\r\n\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").fadeIn(animationTime), callback;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").show();\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onShowListEvent();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t/* List hide animation */\r\n\t\t\t\t\t\t.on(\"hide.eac\", function() {\r\n\r\n\t\t\t\t\t\t\tswitch(config.get(\"list\").hideAnimation.type) {\r\n\r\n\t\t\t\t\t\t\t\tcase \"slide\":\r\n\t\t\t\t\t\t\t\t\tvar animationTime = config.get(\"list\").hideAnimation.time,\r\n\t\t\t\t\t\t\t\t\t\tcallback = config.get(\"list\").hideAnimation.callback;\r\n\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").slideUp(animationTime, callback);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tcase \"fade\":\r\n\t\t\t\t\t\t\t\t\tvar animationTime = config.get(\"list\").hideAnimation.time,\r\n\t\t\t\t\t\t\t\t\t\tcallback = config.get(\"list\").hideAnimation.callback;\r\n\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").fadeOut(animationTime, callback);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").hide();\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onHideListEvent();\r\n\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"selectElement.eac\", function() {\r\n\t\t\t\t\t\t\t$elements_container.find(\"ul li\").removeClass(\"selected\");\r\n\t\t\t\t\t\t\t$elements_container.find(\"ul li\").eq(selectedElement).addClass(\"selected\");\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onSelectItemEvent();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"loadElements.eac\", function(event, listBuilders, phrase) {\r\n\t\t\t\r\n\r\n\t\t\t\t\t\t\tvar $item = \"\",\r\n\t\t\t\t\t\t\t\t$listContainer = $elements_container.find(\"ul\");\r\n\r\n\t\t\t\t\t\t\t$listContainer\r\n\t\t\t\t\t\t\t\t.empty()\r\n\t\t\t\t\t\t\t\t.detach();\r\n\r\n\t\t\t\t\t\t\telementsList = [];\r\n\t\t\t\t\t\t\tvar counter = 0;\r\n\t\t\t\t\t\t\tfor(var builderIndex = 0, listBuildersLength = listBuilders.length; builderIndex < listBuildersLength; builderIndex += 1) {\r\n\r\n\t\t\t\t\t\t\t\tvar listData = listBuilders[builderIndex].data;\r\n\r\n\t\t\t\t\t\t\t\tif (listData.length === 0) {\r\n\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (listBuilders[builderIndex].header !== undefined && listBuilders[builderIndex].header.length > 0) {\r\n\t\t\t\t\t\t\t\t\t$listContainer.append(\"<div class='eac-category' >\" + listBuilders[builderIndex].header + \"</div>\");\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tfor(var i = 0, listDataLength = listData.length; i < listDataLength && counter < listBuilders[builderIndex].maxListSize; i += 1) {\r\n\t\t\t\t\t\t\t\t\t$item = $(\"<li><div class='eac-item'></div></li>\");\r\n\t\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\t\t(function() {\r\n\t\t\t\t\t\t\t\t\t\tvar j = i,\r\n\t\t\t\t\t\t\t\t\t\t\titemCounter = counter,\r\n\t\t\t\t\t\t\t\t\t\t\telementsValue = listBuilders[builderIndex].getValue(listData[j]);\r\n\r\n\t\t\t\t\t\t\t\t\t\t$item.find(\" > div\")\r\n\t\t\t\t\t\t\t\t\t\t\t.on(\"click\", function() {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t$field.val(elementsValue).trigger(\"change\");\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedElement = itemCounter;\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectElement(itemCounter);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfig.get(\"list\").onClickEvent();\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfig.get(\"list\").onChooseEvent();\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.mouseover(function() {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedElement = itemCounter;\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectElement(itemCounter);\t\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfig.get(\"list\").onMouseOverEvent();\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.mouseout(function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfig.get(\"list\").onMouseOutEvent();\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.html(template.build(highlight(elementsValue, phrase), listData[j]));\r\n\t\t\t\t\t\t\t\t\t})();\r\n\r\n\t\t\t\t\t\t\t\t\t$listContainer.append($item);\r\n\t\t\t\t\t\t\t\t\telementsList.push(listData[i]);\r\n\t\t\t\t\t\t\t\t\tcounter += 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t$elements_container.append($listContainer);\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onLoadEvent();\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t})();\r\n\r\n\t\t\t\t$field.after($elements_container);\r\n\t\t\t}\r\n\r\n\t\t\tfunction removeContainer() {\r\n\t\t\t\t$field.next(\".\" + consts.getValue(\"CONTAINER_CLASS\")).remove();\r\n\t\t\t}\r\n\r\n\t\t\tfunction highlight(string, phrase) {\r\n\r\n\t\t\t\tif(config.get(\"highlightPhrase\") && phrase !== \"\") {\r\n\t\t\t\t\treturn highlightPhrase(string, phrase);\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn string;\r\n\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tfunction escapeRegExp(str) {\r\n\t\t\t\treturn str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\r\n \t\t\t}\r\n\r\n\t\t\tfunction highlightPhrase(string, phrase) {\r\n\t\t\t\tvar escapedPhrase = escapeRegExp(phrase);\r\n\t\t\t\treturn (string + \"\").replace(new RegExp(\"(\" + escapedPhrase + \")\", \"gi\") , \"<b>$1</b>\");\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t}\r\n\t\tfunction getContainerId() {\r\n\t\t\t\r\n\t\t\tvar elementId = $field.attr(\"id\");\r\n\r\n\t\t\telementId = consts.getValue(\"CONTAINER_ID\") + elementId;\r\n\r\n\t\t\treturn elementId;\r\n\t\t}\r\n\t\tfunction bindEvents() {\r\n\r\n\t\t\tbindAllEvents();\r\n\t\t\t\r\n\r\n\t\t\tfunction bindAllEvents() {\r\n\t\t\t\tif (checkParam(\"autocompleteOff\", true)) {\r\n\t\t\t\t\tremoveAutocomplete();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbindFocusOut();\r\n\t\t\t\tbindKeyup();\r\n\t\t\t\tbindKeydown();\r\n\t\t\t\tbindKeypress();\r\n\t\t\t\tbindFocus();\r\n\t\t\t\tbindBlur();\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindFocusOut() {\r\n\t\t\t\t$field.focusout(function () {\r\n\r\n\t\t\t\t\tvar fieldValue = $field.val(),\r\n\t\t\t\t\t\tphrase;\r\n\r\n\t\t\t\t\tif (!config.get(\"list\").match.caseSensitive) {\r\n\t\t\t\t\t\tfieldValue = fieldValue.toLowerCase();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (var i = 0, length = elementsList.length; i < length; i += 1) {\r\n\r\n\t\t\t\t\t\tphrase = config.get(\"getValue\")(elementsList[i]);\r\n\t\t\t\t\t\tif (!config.get(\"list\").match.caseSensitive) {\r\n\t\t\t\t\t\t\tphrase = phrase.toLowerCase();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (phrase === fieldValue) {\r\n\t\t\t\t\t\t\tselectedElement = i;\r\n\t\t\t\t\t\t\tselectElement(selectedElement);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindKeyup() {\r\n\t\t\t\t$field\r\n\t\t\t\t.off(\"keyup\")\r\n\t\t\t\t.keyup(function(event) {\r\n\r\n\t\t\t\t\tswitch(event.keyCode) {\r\n\r\n\t\t\t\t\t\tcase 27:\r\n\r\n\t\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t\t\tloseFieldFocus();\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 38:\r\n\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\t\tif(elementsList.length > 0 && selectedElement > 0) {\r\n\r\n\t\t\t\t\t\t\t\tselectedElement -= 1;\r\n\r\n\t\t\t\t\t\t\t\t$field.val(config.get(\"getValue\")(elementsList[selectedElement]));\r\n\r\n\t\t\t\t\t\t\t\tselectElement(selectedElement);\r\n\r\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 40:\r\n\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\t\tif(elementsList.length > 0 && selectedElement < elementsList.length - 1) {\r\n\r\n\t\t\t\t\t\t\t\tselectedElement += 1;\r\n\r\n\t\t\t\t\t\t\t\t$field.val(config.get(\"getValue\")(elementsList[selectedElement]));\r\n\r\n\t\t\t\t\t\t\t\tselectElement(selectedElement);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\tif (event.keyCode > 40 || event.keyCode === 8) {\r\n\r\n\t\t\t\t\t\t\t\tvar inputPhrase = $field.val();\r\n\r\n\t\t\t\t\t\t\t\tif (!(config.get(\"list\").hideOnEmptyPhrase === true && event.keyCode === 8 && inputPhrase === \"\")) {\r\n\r\n\t\t\t\t\t\t\t\t\tif (config.get(\"requestDelay\") > 0) {\r\n\t\t\t\t\t\t\t\t\t\tif (requestDelayTimeoutId !== undefined) {\r\n\t\t\t\t\t\t\t\t\t\t\tclearTimeout(requestDelayTimeoutId);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\trequestDelayTimeoutId = setTimeout(function () { loadData(inputPhrase);}, config.get(\"requestDelay\"));\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tloadData(inputPhrase);\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t\t\tfunction loadData(inputPhrase) {\r\n\r\n\r\n\t\t\t\t\t\tif (inputPhrase.length < config.get(\"minCharNumber\")) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tif (config.get(\"data\") !== \"list-required\") {\r\n\r\n\t\t\t\t\t\t\tvar data = config.get(\"data\");\r\n\r\n\t\t\t\t\t\t\tvar listBuilders = listBuilderService.init(data);\r\n\r\n\t\t\t\t\t\t\tlistBuilders = listBuilderService.updateCategories(listBuilders, data);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlistBuilders = listBuilderService.processData(listBuilders, inputPhrase);\r\n\r\n\t\t\t\t\t\t\tloadElements(listBuilders, inputPhrase);\r\n\r\n\t\t\t\t\t\t\tif ($field.parent().find(\"li\").length > 0) {\r\n\t\t\t\t\t\t\t\tshowContainer();\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar settings = createAjaxSettings();\r\n\r\n\t\t\t\t\t\tif (settings.url === undefined || settings.url === \"\") {\r\n\t\t\t\t\t\t\tsettings.url = config.get(\"url\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (settings.dataType === undefined || settings.dataType === \"\") {\r\n\t\t\t\t\t\t\tsettings.dataType = config.get(\"dataType\");\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tif (settings.url !== undefined && settings.url !== \"list-required\") {\r\n\r\n\t\t\t\t\t\t\tsettings.url = settings.url(inputPhrase);\r\n\r\n\t\t\t\t\t\t\tsettings.data = config.get(\"preparePostData\")(settings.data, inputPhrase);\r\n\r\n\t\t\t\t\t\t\t$.ajax(settings) \r\n\t\t\t\t\t\t\t\t.done(function(data) {\r\n\r\n\t\t\t\t\t\t\t\t\tvar listBuilders = listBuilderService.init(data);\r\n\r\n\t\t\t\t\t\t\t\t\tlistBuilders = listBuilderService.updateCategories(listBuilders, data);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tlistBuilders = listBuilderService.convertXml(listBuilders);\r\n\t\t\t\t\t\t\t\t\tif (checkInputPhraseMatchResponse(inputPhrase, data)) {\r\n\r\n\t\t\t\t\t\t\t\t\t\tlistBuilders = listBuilderService.processData(listBuilders, inputPhrase);\r\n\r\n\t\t\t\t\t\t\t\t\t\tloadElements(listBuilders, inputPhrase);\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tif (listBuilderService.checkIfDataExists(listBuilders) && $field.parent().find(\"li\").length > 0) {\r\n\t\t\t\t\t\t\t\t\t\tshowContainer();\t\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tconfig.get(\"ajaxCallback\")();\r\n\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.fail(function() {\r\n\t\t\t\t\t\t\t\t\tlogger.warning(\"Fail to load response data\");\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.always(function() {\r\n\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\tfunction createAjaxSettings() {\r\n\r\n\t\t\t\t\t\t\tvar settings = {},\r\n\t\t\t\t\t\t\t\tajaxSettings = config.get(\"ajaxSettings\") || {};\r\n\r\n\t\t\t\t\t\t\tfor (var set in ajaxSettings) {\r\n\t\t\t\t\t\t\t\tsettings[set] = ajaxSettings[set];\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\treturn settings;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfunction checkInputPhraseMatchResponse(inputPhrase, data) {\r\n\r\n\t\t\t\t\t\t\tif (config.get(\"matchResponseProperty\") !== false) {\r\n\t\t\t\t\t\t\t\tif (typeof config.get(\"matchResponseProperty\") === \"string\") {\r\n\t\t\t\t\t\t\t\t\treturn (data[config.get(\"matchResponseProperty\")] === inputPhrase);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (typeof config.get(\"matchResponseProperty\") === \"function\") {\r\n\t\t\t\t\t\t\t\t\treturn (config.get(\"matchResponseProperty\")(data) === inputPhrase);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindKeydown() {\r\n\t\t\t\t$field\r\n\t\t\t\t\t.on(\"keydown\", function(evt) {\r\n\t        \t\t    evt = evt || window.event;\r\n\t        \t\t    var keyCode = evt.keyCode;\r\n\t        \t\t    if (keyCode === 38) {\r\n\t        \t\t        suppressKeypress = true; \r\n\t        \t\t        return false;\r\n\t        \t\t    }\r\n\t\t        \t})\r\n\t\t\t\t\t.keydown(function(event) {\r\n\r\n\t\t\t\t\t\tif (event.keyCode === 13 && selectedElement > -1) {\r\n\r\n\t\t\t\t\t\t\t$field.val(config.get(\"getValue\")(elementsList[selectedElement]));\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onKeyEnterEvent();\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onChooseEvent();\r\n\r\n\t\t\t\t\t\t\tselectedElement = -1;\r\n\t\t\t\t\t\t\thideContainer();\r\n\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindKeypress() {\r\n\t\t\t\t$field\r\n\t\t\t\t.off(\"keypress\");\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindFocus() {\r\n\t\t\t\t$field.focus(function() {\r\n\r\n\t\t\t\t\tif ($field.val() !== \"\" && elementsList.length > 0) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tselectedElement = -1;\r\n\t\t\t\t\t\tshowContainer();\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindBlur() {\r\n\t\t\t\t$field.blur(function() {\r\n\t\t\t\t\tsetTimeout(function() { \r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tselectedElement = -1;\r\n\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t}, 250);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction removeAutocomplete() {\r\n\t\t\t\t$field.attr(\"autocomplete\",\"off\");\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction showContainer() {\r\n\t\t\t$container.trigger(\"show.eac\");\r\n\t\t}\r\n\r\n\t\tfunction hideContainer() {\r\n\t\t\t$container.trigger(\"hide.eac\");\r\n\t\t}\r\n\r\n\t\tfunction selectElement(index) {\r\n\t\t\t\r\n\t\t\t$container.trigger(\"selectElement.eac\", index);\r\n\t\t}\r\n\r\n\t\tfunction loadElements(list, phrase) {\r\n\t\t\t$container.trigger(\"loadElements.eac\", [list, phrase]);\r\n\t\t}\r\n\r\n\t\tfunction loseFieldFocus() {\r\n\t\t\t$field.trigger(\"blur\");\r\n\t\t}\r\n\r\n\r\n\t};\r\n\tscope.eacHandles = [];\r\n\r\n\tscope.getHandle = function(id) {\r\n\t\treturn scope.eacHandles[id];\r\n\t};\r\n\r\n\tscope.inputHasId = function(input) {\r\n\r\n\t\tif($(input).attr(\"id\") !== undefined && $(input).attr(\"id\").length > 0) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tscope.assignRandomId = function(input) {\r\n\r\n\t\tvar fieldId = \"\";\r\n\r\n\t\tdo {\r\n\t\t\tfieldId = \"eac-\" + Math.floor(Math.random() * 10000);\t\t\r\n\t\t} while ($(\"#\" + fieldId).length !== 0);\r\n\t\t\r\n\t\telementId = scope.consts.getValue(\"CONTAINER_ID\") + fieldId;\r\n\r\n\t\t$(input).attr(\"id\", fieldId);\r\n \r\n\t};\r\n\r\n\tscope.setHandle = function(handle, id) {\r\n\t\tscope.eacHandles[id] = handle;\r\n\t};\r\n\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n(function($) {\r\n\r\n\t$.fn.easyAutocomplete = function(options) {\r\n\r\n\t\treturn this.each(function() {\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\teacHandle = new EasyAutocomplete.main($this, options);\r\n\r\n\t\t\tif (!EasyAutocomplete.inputHasId($this)) {\r\n\t\t\t\tEasyAutocomplete.assignRandomId($this);\r\n\t\t\t}\r\n\r\n\t\t\teacHandle.init();\r\n\r\n\t\t\tEasyAutocomplete.setHandle(eacHandle, $this.attr(\"id\"));\r\n\r\n\t\t});\r\n\t};\r\n\r\n\t$.fn.getSelectedItemIndex = function() {\r\n\r\n\t\tvar inputId = $(this).attr(\"id\");\r\n\r\n\t\tif (inputId !== undefined) {\r\n\t\t\treturn EasyAutocomplete.getHandle(inputId).getSelectedItemIndex();\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t};\r\n\r\n\t$.fn.getItems = function () {\r\n\r\n\t\tvar inputId = $(this).attr(\"id\");\r\n\r\n\t\tif (inputId !== undefined) {\r\n\t\t\treturn EasyAutocomplete.getHandle(inputId).getItems();\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t};\r\n\r\n\t$.fn.getItemData = function(index) {\r\n\r\n\t\tvar inputId = $(this).attr(\"id\");\r\n\r\n\t\tif (inputId !== undefined && index > -1) {\r\n\t\t\treturn EasyAutocomplete.getHandle(inputId).getItemData(index);\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t};\r\n\r\n\t$.fn.getSelectedItemData = function() {\r\n\r\n\t\tvar inputId = $(this).attr(\"id\");\r\n\r\n\t\tif (inputId !== undefined) {\r\n\t\t\treturn EasyAutocomplete.getHandle(inputId).getSelectedItemData();\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t};\r\n\r\n})(jQuery);\r\n","// ==================================================\r\n// fancyBox v3.2.10\r\n//\r\n// Licensed GPLv3 for open source use\r\n// or fancyBox Commercial License for commercial use\r\n//\r\n// http://fancyapps.com/fancybox/\r\n// Copyright 2017 fancyApps\r\n//\r\n// ==================================================\r\n;(function (window, document, $, undefined) {\r\n    'use strict';\r\n\r\n    // If there's no jQuery, fancyBox can't work\r\n    // =========================================\r\n\r\n    if ( !$ ) {\r\n        return;\r\n    }\r\n\r\n    // Check if fancyBox is already initialized\r\n    // ========================================\r\n\r\n    if ( $.fn.fancybox ) {\r\n\r\n        if ( 'console' in window ) {\r\n            console.log( 'fancyBox already initialized' );\r\n        }\r\n\r\n        return;\r\n    }\r\n\r\n    // Private default settings\r\n    // ========================\r\n\r\n    var defaults = {\r\n\r\n        // Enable infinite gallery navigation\r\n        loop : false,\r\n\r\n        // Space around image, ignored if zoomed-in or viewport width is smaller than 800px\r\n        margin : [44, 0],\r\n\r\n        // Horizontal space between slides\r\n        gutter : 50,\r\n\r\n        // Enable keyboard navigation\r\n        keyboard : true,\r\n\r\n        // Should display navigation arrows at the screen edges\r\n        arrows : true,\r\n\r\n        // Should display infobar (counter and arrows at the top)\r\n        infobar : true,\r\n\r\n        // Should display toolbar (buttons at the top)\r\n        toolbar : true,\r\n\r\n        // What buttons should appear in the top right corner.\r\n        // Buttons will be created using templates from `btnTpl` option\r\n        // and they will be placed into toolbar (class=\"fancybox-toolbar\"` element)\r\n        buttons : [\r\n            'slideShow',\r\n            'fullScreen',\r\n            'thumbs',\r\n            'share',\r\n            //'download',\r\n            //'zoom',\r\n            'close'\r\n        ],\r\n\r\n        // Detect \"idle\" time in seconds\r\n        idleTime : 3,\r\n\r\n        // Should display buttons at top right corner of the content\r\n        // If 'auto' - they will be created for content having type 'html', 'inline' or 'ajax'\r\n        // Use template from `btnTpl.smallBtn` for customization\r\n        smallBtn : 'auto',\r\n\r\n        // Disable right-click and use simple image protection for images\r\n        protect : false,\r\n\r\n        // Shortcut to make content \"modal\" - disable keyboard navigtion, hide buttons, etc\r\n        modal : false,\r\n\r\n        image : {\r\n\r\n            // Wait for images to load before displaying\r\n            // Requires predefined image dimensions\r\n            // If 'auto' - will zoom in thumbnail if 'width' and 'height' attributes are found\r\n            preload : \"auto\"\r\n\r\n        },\r\n\r\n        ajax : {\r\n\r\n            // Object containing settings for ajax request\r\n            settings : {\r\n\r\n                // This helps to indicate that request comes from the modal\r\n                // Feel free to change naming\r\n                data : {\r\n                    fancybox : true\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        iframe : {\r\n\r\n            // Iframe template\r\n            tpl : '<iframe id=\"fancybox-frame{rnd}\" name=\"fancybox-frame{rnd}\" class=\"fancybox-iframe\" frameborder=\"0\" vspace=\"0\" hspace=\"0\" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency=\"true\" src=\"\"></iframe>',\r\n\r\n            // Preload iframe before displaying it\r\n            // This allows to calculate iframe content width and height\r\n            // (note: Due to \"Same Origin Policy\", you can't get cross domain data).\r\n            preload : true,\r\n\r\n            // Custom CSS styling for iframe wrapping element\r\n            // You can use this to set custom iframe dimensions\r\n            css : {},\r\n\r\n            // Iframe tag attributes\r\n            attr : {\r\n                scrolling : 'auto'\r\n            }\r\n\r\n        },\r\n\r\n        // Default content type if cannot be detected automatically\r\n        defaultType : 'image',\r\n\r\n        // Open/close animation type\r\n        // Possible values:\r\n        //   false            - disable\r\n        //   \"zoom\"           - zoom images from/to thumbnail\r\n        //   \"fade\"\r\n        //   \"zoom-in-out\"\r\n        //\r\n        animationEffect : \"zoom\",\r\n\r\n        // Duration in ms for open/close animation\r\n        animationDuration : 500,\r\n\r\n        // Should image change opacity while zooming\r\n        // If opacity is \"auto\", then opacity will be changed if image and thumbnail have different aspect ratios\r\n        zoomOpacity : \"auto\",\r\n\r\n        // Transition effect between slides\r\n        //\r\n        // Possible values:\r\n        //   false            - disable\r\n        //   \"fade'\r\n        //   \"slide'\r\n        //   \"circular'\r\n        //   \"tube'\r\n        //   \"zoom-in-out'\r\n        //   \"rotate'\r\n        //\r\n        transitionEffect : \"fade\",\r\n\r\n        // Duration in ms for transition animation\r\n        transitionDuration : 366,\r\n\r\n        // Custom CSS class for slide element\r\n        slideClass : '',\r\n\r\n        // Custom CSS class for layout\r\n        baseClass : '',\r\n\r\n        // Base template for layout\r\n        baseTpl\t:\r\n            '<div class=\"fancybox-container\" role=\"dialog\" tabindex=\"-1\">' +\r\n                '<div class=\"fancybox-bg\"></div>' +\r\n                '<div class=\"fancybox-inner\">' +\r\n                    '<div class=\"fancybox-infobar\">' +\r\n                        '<span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span>' +\r\n                    '</div>' +\r\n                    '<div class=\"fancybox-toolbar\">{{buttons}}</div>' +\r\n                    '<div class=\"fancybox-navigation\">{{arrows}}</div>' +\r\n                    '<div class=\"fancybox-stage\"></div>' +\r\n                    '<div class=\"fancybox-caption-wrap\"><div class=\"fancybox-caption\"></div></div>' +\r\n                '</div>' +\r\n            '</div>',\r\n\r\n        // Loading indicator template\r\n        spinnerTpl : '<div class=\"fancybox-loading\"></div>',\r\n\r\n        // Error message template\r\n        errorTpl : '<div class=\"fancybox-error\"><p>{{ERROR}}<p></div>',\r\n\r\n        btnTpl : {\r\n\r\n            download : '<a download data-fancybox-download class=\"fancybox-button fancybox-button--download\" title=\"{{DOWNLOAD}}\">' +\r\n                        '<svg viewBox=\"0 0 40 40\">' +\r\n                            '<path d=\"M20,23 L20,8 L20,23 L13,16 L20,23 L27,16 L20,23 M26,28 L13,28 L27,28 L14,28\" />' +\r\n                        '</svg>' +\r\n                    '</a>',\r\n\r\n            zoom : '<button data-fancybox-zoom class=\"fancybox-button fancybox-button--zoom\" title=\"{{ZOOM}}\">' +\r\n                        '<svg viewBox=\"0 0 40 40\">' +\r\n                            '<path d=\"M 18,17 m-8,0 a 8,8 0 1,0 16,0 a 8,8 0 1,0 -16,0 M25,23 L31,29 L25,23\" />' +\r\n                        '</svg>' +\r\n                    '</button>',\r\n\r\n            close : '<button data-fancybox-close class=\"fancybox-button fancybox-button--close\" title=\"{{CLOSE}}\">' +\r\n                        '<svg viewBox=\"0 0 40 40\">' +\r\n                            '<path d=\"M10,10 L30,30 M30,10 L10,30\" />' +\r\n                        '</svg>' +\r\n                    '</button>',\r\n\r\n            // This small close button will be appended to your html/inline/ajax content by default,\r\n            // if \"smallBtn\" option is not set to false\r\n            smallBtn   : '<button data-fancybox-close class=\"fancybox-close-small\" title=\"{{CLOSE}}\"></button>',\r\n\r\n            // Arrows\r\n            arrowLeft : '<button data-fancybox-prev class=\"fancybox-button fancybox-button--arrow_left\" title=\"{{PREV}}\">' +\r\n                            '<svg viewBox=\"0 0 40 40\">' +\r\n                              '<path d=\"M10,20 L30,20 L10,20 L18,28 L10,20 L18,12 L10,20\"></path>' +\r\n                            '</svg>' +\r\n                          '</button>',\r\n\r\n            arrowRight : '<button data-fancybox-next class=\"fancybox-button fancybox-button--arrow_right\" title=\"{{NEXT}}\">' +\r\n                          '<svg viewBox=\"0 0 40 40\">' +\r\n                            '<path d=\"M30,20 L10,20 L30,20 L22,28 L30,20 L22,12 L30,20\"></path>' +\r\n                          '</svg>' +\r\n                        '</button>'\r\n        },\r\n\r\n        // Container is injected into this element\r\n        parentEl : 'body',\r\n\r\n\r\n        // Focus handling\r\n        // ==============\r\n\r\n        // Try to focus on the first focusable element after opening\r\n        autoFocus : false,\r\n\r\n        // Put focus back to active element after closing\r\n        backFocus : true,\r\n\r\n        // Do not let user to focus on element outside modal content\r\n        trapFocus : true,\r\n\r\n\r\n        // Module specific options\r\n        // =======================\r\n\r\n        fullScreen : {\r\n            autoStart : false,\r\n        },\r\n\r\n        // Set `touch: false` to disable dragging/swiping\r\n        touch : {\r\n            vertical : true,  // Allow to drag content vertically\r\n            momentum : true   // Continue movement after releasing mouse/touch when panning\r\n        },\r\n\r\n        // Hash value when initializing manually,\r\n        // set `false` to disable hash change\r\n        hash : null,\r\n\r\n        // Customize or add new media types\r\n        // Example:\r\n        /*\r\n        media : {\r\n            youtube : {\r\n                params : {\r\n                    autoplay : 0\r\n                }\r\n            }\r\n        }\r\n        */\r\n        media : {},\r\n\r\n        slideShow : {\r\n            autoStart : false,\r\n            speed     : 4000\r\n        },\r\n\r\n        thumbs : {\r\n\t\t\tautoStart   : false,                  // Display thumbnails on opening\r\n\t\t\thideOnClose : true,                   // Hide thumbnail grid when closing animation starts\r\n\t\t\tparentEl    : '.fancybox-container',  // Container is injected into this element\r\n\t\t\taxis        : 'y'                     // Vertical (y) or horizontal (x) scrolling\r\n\t\t},\r\n\r\n        // Use mousewheel to navigate gallery\r\n        // If 'auto' - enabled for images only\r\n        wheel : 'auto',\r\n\r\n        // Callbacks\r\n        //==========\r\n\r\n        // See Documentation/API/Events for more information\r\n        // Example:\r\n        /*\r\n            afterShow: function( instance, current ) {\r\n                 console.info( 'Clicked element:' );\r\n                 console.info( current.opts.$orig );\r\n            }\r\n        */\r\n\r\n        onInit       : $.noop,  // When instance has been initialized\r\n\r\n        beforeLoad   : $.noop,  // Before the content of a slide is being loaded\r\n        afterLoad    : $.noop,  // When the content of a slide is done loading\r\n\r\n        beforeShow   : $.noop,  // Before open animation starts\r\n        afterShow    : $.noop,  // When content is done loading and animating\r\n\r\n        beforeClose  : $.noop,  // Before the instance attempts to close. Return false to cancel the close.\r\n        afterClose   : $.noop,  // After instance has been closed\r\n\r\n        onActivate   : $.noop,  // When instance is brought to front\r\n        onDeactivate : $.noop,  // When other instance has been activated\r\n\r\n\r\n        // Interaction\r\n        // ===========\r\n\r\n        // Use options below to customize taken action when user clicks or double clicks on the fancyBox area,\r\n        // each option can be string or method that returns value.\r\n        //\r\n        // Possible values:\r\n        //   \"close\"           - close instance\r\n        //   \"next\"            - move to next gallery item\r\n        //   \"nextOrClose\"     - move to next gallery item or close if gallery has only one item\r\n        //   \"toggleControls\"  - show/hide controls\r\n        //   \"zoom\"            - zoom image (if loaded)\r\n        //   false             - do nothing\r\n\r\n        // Clicked on the content\r\n        clickContent : function( current, event ) {\r\n            return current.type === 'image' ? 'zoom' : false;\r\n        },\r\n\r\n        // Clicked on the slide\r\n        clickSlide : 'close',\r\n\r\n        // Clicked on the background (backdrop) element\r\n        clickOutside : 'close',\r\n\r\n        // Same as previous two, but for double click\r\n        dblclickContent : false,\r\n        dblclickSlide   : false,\r\n        dblclickOutside : false,\r\n\r\n\r\n        // Custom options when mobile device is detected\r\n        // =============================================\r\n\r\n        mobile : {\r\n            idleTime : false,\r\n            margin   : 0,\r\n\r\n            clickContent : function( current, event ) {\r\n                return current.type === 'image' ? 'toggleControls' : false;\r\n            },\r\n            clickSlide : function( current, event ) {\r\n                return current.type === 'image' ? 'toggleControls' : 'close';\r\n            },\r\n            dblclickContent : function( current, event ) {\r\n                return current.type === 'image' ? 'zoom' : false;\r\n            },\r\n            dblclickSlide : function( current, event ) {\r\n                return current.type === 'image' ? 'zoom' : false;\r\n            }\r\n        },\r\n\r\n\r\n        // Internationalization\r\n        // ============\r\n\r\n        lang : 'en',\r\n        i18n : {\r\n            'en' : {\r\n                CLOSE       : 'Close',\r\n                NEXT        : 'Next',\r\n                PREV        : 'Previous',\r\n                ERROR       : 'The requested content cannot be loaded. <br/> Please try again later.',\r\n                PLAY_START  : 'Start slideshow',\r\n                PLAY_STOP   : 'Pause slideshow',\r\n                FULL_SCREEN : 'Full screen',\r\n                THUMBS      : 'Thumbnails',\r\n                DOWNLOAD    : 'Download',\r\n                SHARE       : 'Share',\r\n                ZOOM        : 'Zoom'\r\n            },\r\n            'de' : {\r\n                CLOSE       : 'Schliessen',\r\n                NEXT        : 'Weiter',\r\n                PREV        : 'Zurück',\r\n                ERROR       : 'Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es später nochmal.',\r\n                PLAY_START  : 'Diaschau starten',\r\n                PLAY_STOP   : 'Diaschau beenden',\r\n                FULL_SCREEN : 'Vollbild',\r\n                THUMBS      : 'Vorschaubilder',\r\n                DOWNLOAD    : 'Herunterladen',\r\n                SHARE       : 'Teilen',\r\n                ZOOM        : 'Maßstab'\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    // Few useful variables and methods\r\n    // ================================\r\n\r\n    var $W = $(window);\r\n    var $D = $(document);\r\n\r\n    var called = 0;\r\n\r\n\r\n    // Check if an object is a jQuery object and not a native JavaScript object\r\n    // ========================================================================\r\n\r\n    var isQuery = function ( obj ) {\r\n        return obj && obj.hasOwnProperty && obj instanceof $;\r\n    };\r\n\r\n\r\n    // Handle multiple browsers for \"requestAnimationFrame\" and \"cancelAnimationFrame\"\r\n    // ===============================================================================\r\n\r\n    var requestAFrame = (function () {\r\n        return window.requestAnimationFrame ||\r\n                window.webkitRequestAnimationFrame ||\r\n                window.mozRequestAnimationFrame ||\r\n                window.oRequestAnimationFrame ||\r\n                // if all else fails, use setTimeout\r\n                function (callback) {\r\n                    return window.setTimeout(callback, 1000 / 60);\r\n                };\r\n    })();\r\n\r\n\r\n    // Detect the supported transition-end event property name\r\n    // =======================================================\r\n\r\n    var transitionEnd = (function () {\r\n        var t, el = document.createElement(\"fakeelement\");\r\n\r\n        var transitions = {\r\n            \"transition\"      : \"transitionend\",\r\n            \"OTransition\"     : \"oTransitionEnd\",\r\n            \"MozTransition\"   : \"transitionend\",\r\n            \"WebkitTransition\": \"webkitTransitionEnd\"\r\n        };\r\n\r\n        for (t in transitions) {\r\n            if (el.style[t] !== undefined){\r\n                return transitions[t];\r\n            }\r\n        }\r\n\r\n        return 'transitionend';\r\n    })();\r\n\r\n\r\n    // Force redraw on an element.\r\n    // This helps in cases where the browser doesn't redraw an updated element properly.\r\n    // =================================================================================\r\n\r\n    var forceRedraw = function( $el ) {\r\n        return ( $el && $el.length && $el[0].offsetHeight );\r\n    };\r\n\r\n\r\n    // Class definition\r\n    // ================\r\n\r\n    var FancyBox = function( content, opts, index ) {\r\n        var self = this;\r\n\r\n        self.opts = $.extend( true, { index : index }, $.fancybox.defaults, opts || {} );\r\n\r\n        if ( $.fancybox.isMobile ) {\r\n            self.opts = $.extend( true, {}, self.opts, self.opts.mobile );\r\n        }\r\n\r\n        // Exclude buttons option from deep merging\r\n        if ( opts && $.isArray( opts.buttons ) ) {\r\n            self.opts.buttons = opts.buttons;\r\n        }\r\n\r\n        self.id    = self.opts.id || ++called;\r\n        self.group = [];\r\n\r\n        self.currIndex = parseInt( self.opts.index, 10 ) || 0;\r\n        self.prevIndex = null;\r\n\r\n        self.prevPos = null;\r\n        self.currPos = 0;\r\n\r\n        self.firstRun = null;\r\n\r\n        // Create group elements from original item collection\r\n        self.createGroup( content );\r\n\r\n        if ( !self.group.length ) {\r\n            return;\r\n        }\r\n\r\n        // Save last active element and current scroll position\r\n        self.$lastFocus = $(document.activeElement).blur();\r\n\r\n        // Collection of gallery objects\r\n        self.slides = {};\r\n\r\n        self.init();\r\n    };\r\n\r\n    $.extend(FancyBox.prototype, {\r\n\r\n        // Create DOM structure\r\n        // ====================\r\n\r\n        init : function() {\r\n            var self = this,\r\n                firstItem      = self.group[ self.currIndex ],\r\n                firstItemOpts  = firstItem.opts,\r\n                scrollbarWidth = $.fancybox.scrollbarWidth,\r\n                $scrollDiv,\r\n                $container,\r\n                buttonStr;\r\n\r\n            self.scrollTop  = $D.scrollTop();\r\n            self.scrollLeft = $D.scrollLeft();\r\n\r\n\r\n            // Hide scrollbars\r\n            // ===============\r\n\r\n            if ( !$.fancybox.getInstance() ) {\r\n\r\n                $( 'body' ).addClass( 'fancybox-active' );\r\n\r\n                // iOS hack\r\n                if ( /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream ) {\r\n\r\n                    // iOS has problems for input elements inside fixed containers,\r\n                    // the workaround is to apply `position: fixed` to `<body>` element,\r\n                    // unfortunately, this makes it lose the scrollbars and forces address bar to appear.\r\n\r\n                    if ( firstItem.type !== 'image' ) {\r\n                        $( 'body' ).css( 'top', $( 'body' ).scrollTop() * -1 ).addClass( 'fancybox-iosfix' );\r\n                    }\r\n\r\n                } else if ( !$.fancybox.isMobile && document.body.scrollHeight > window.innerHeight ) {\r\n\r\n                    if ( scrollbarWidth === undefined ) {\r\n                        $scrollDiv = $('<div style=\"width:50px;height:50px;overflow:scroll;\" />').appendTo( 'body' );\r\n\r\n                        scrollbarWidth = $.fancybox.scrollbarWidth = $scrollDiv[0].offsetWidth - $scrollDiv[0].clientWidth;\r\n\r\n                        $scrollDiv.remove();\r\n                    }\r\n\r\n                    $( 'head' ).append( '<style id=\"fancybox-style-noscroll\" type=\"text/css\">.compensate-for-scrollbar { margin-right: ' + scrollbarWidth + 'px; }</style>' );\r\n                    $( 'body' ).addClass( 'compensate-for-scrollbar' );\r\n                }\r\n            }\r\n\r\n\r\n            // Build html markup and set references\r\n            // ====================================\r\n\r\n            // Build html code for buttons and insert into main template\r\n            buttonStr = '';\r\n\r\n            $.each( firstItemOpts.buttons, function( index, value ) {\r\n                buttonStr += ( firstItemOpts.btnTpl[ value ] || '' );\r\n            });\r\n\r\n            // Create markup from base template, it will be initially hidden to\r\n            // avoid unnecessary work like painting while initializing is not complete\r\n            $container = $(\r\n                self.translate( self,\r\n                    firstItemOpts.baseTpl\r\n                        .replace( '\\{\\{buttons\\}\\}', buttonStr )\r\n                        .replace( '\\{\\{arrows\\}\\}', firstItemOpts.btnTpl.arrowLeft + firstItemOpts.btnTpl.arrowRight )\r\n                )\r\n            )\r\n                .attr( 'id', 'fancybox-container-' + self.id )\r\n                .addClass( 'fancybox-is-hidden' )\r\n                .addClass( firstItemOpts.baseClass )\r\n                .data( 'FancyBox', self )\r\n                .appendTo( firstItemOpts.parentEl );\r\n\r\n            // Create object holding references to jQuery wrapped nodes\r\n            self.$refs = {\r\n                container : $container\r\n            };\r\n\r\n            [ 'bg', 'inner', 'infobar', 'toolbar', 'stage', 'caption', 'navigation' ].forEach(function(item) {\r\n                self.$refs[ item ] = $container.find( '.fancybox-' + item );\r\n            });\r\n\r\n            self.trigger( 'onInit' );\r\n\r\n            // Enable events, deactive previous instances\r\n            self.activate();\r\n\r\n            // Build slides, load and reveal content\r\n            self.jumpTo( self.currIndex );\r\n        },\r\n\r\n\r\n        // Simple i18n support - replaces object keys found in template\r\n        // with corresponding values\r\n        // ============================================================\r\n\r\n        translate : function( obj, str ) {\r\n            var arr = obj.opts.i18n[ obj.opts.lang ];\r\n\r\n            return str.replace(/\\{\\{(\\w+)\\}\\}/g, function(match, n) {\r\n                var value = arr[n];\r\n\r\n                if ( value === undefined ) {\r\n                    return match;\r\n                }\r\n\r\n                return value;\r\n            });\r\n        },\r\n\r\n        // Create array of gally item objects\r\n        // Check if each object has valid type and content\r\n        // ===============================================\r\n\r\n        createGroup : function ( content ) {\r\n            var self  = this;\r\n            var items = $.makeArray( content );\r\n\r\n            $.each(items, function( i, item ) {\r\n                var obj  = {},\r\n                    opts = {},\r\n                    $item,\r\n                    type,\r\n                    found,\r\n                    src,\r\n                    srcParts;\r\n\r\n                // Step 1 - Make sure we have an object\r\n                // ====================================\r\n\r\n                if ( $.isPlainObject( item ) ) {\r\n\r\n                    // We probably have manual usage here, something like\r\n                    // $.fancybox.open( [ { src : \"image.jpg\", type : \"image\" } ] )\r\n\r\n                    obj  = item;\r\n                    opts = item.opts || item;\r\n\r\n                } else if ( $.type( item ) === 'object' && $( item ).length ) {\r\n\r\n                    // Here we probably have jQuery collection returned by some selector\r\n                    $item = $( item );\r\n\r\n                    opts = $item.data();\r\n                    opts = $.extend( {}, opts, opts.options || {} );\r\n\r\n                    // Here we store clicked element\r\n                    opts.$orig = $item;\r\n\r\n                    obj.src = opts.src || $item.attr( 'href' );\r\n\r\n                    // Assume that simple syntax is used, for example:\r\n                    //   `$.fancybox.open( $(\"#test\"), {} );`\r\n                    if ( !obj.type && !obj.src ) {\r\n                        obj.type = 'inline';\r\n                        obj.src  = item;\r\n                    }\r\n\r\n                } else {\r\n\r\n                    // Assume we have a simple html code, for example:\r\n                    //   $.fancybox.open( '<div><h1>Hi!</h1></div>' );\r\n\r\n                    obj = {\r\n                        type : 'html',\r\n                        src  : item + ''\r\n                    };\r\n\r\n                }\r\n\r\n                // Each gallery object has full collection of options\r\n                obj.opts = $.extend( true, {}, self.opts, opts );\r\n\r\n                // Do not merge buttons array\r\n                if ( $.isArray( opts.buttons ) ) {\r\n                    obj.opts.buttons = opts.buttons;\r\n                }\r\n\r\n\r\n                // Step 2 - Make sure we have content type, if not - try to guess\r\n                // ==============================================================\r\n\r\n                type = obj.type || obj.opts.type;\r\n                src  = obj.src || '';\r\n\r\n                if ( !type && src ) {\r\n                    if ( src.match(/(^data:image\\/[a-z0-9+\\/=]*,)|(\\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\\?|#).*)?$)/i) ) {\r\n                        type = 'image';\r\n\r\n                    } else if ( src.match(/\\.(pdf)((\\?|#).*)?$/i) ) {\r\n                        type = 'pdf';\r\n\r\n                    } else if ( found = src.match(/\\.(mp4|mov|ogv)((\\?|#).*)?$/i) ) {\r\n                        type = 'video';\r\n\r\n                        if ( !obj.opts.videoFormat ) {\r\n                            obj.opts.videoFormat = 'video/' + ( found[1] === 'ogv' ? 'ogg' : found[1] );\r\n                        }\r\n\r\n                    } else if ( src.charAt(0) === '#' ) {\r\n                        type = 'inline';\r\n                    }\r\n                }\r\n\r\n                if ( type ) {\r\n                    obj.type = type;\r\n\r\n                } else {\r\n                    self.trigger( 'objectNeedsType', obj );\r\n                }\r\n\r\n\r\n                // Step 3 - Some adjustments\r\n                // =========================\r\n\r\n                obj.index = self.group.length;\r\n\r\n                // Check if $orig and $thumb objects exist\r\n                if ( obj.opts.$orig && !obj.opts.$orig.length ) {\r\n                    delete obj.opts.$orig;\r\n                }\r\n\r\n                if ( !obj.opts.$thumb && obj.opts.$orig ) {\r\n                    obj.opts.$thumb = obj.opts.$orig.find( 'img:first' );\r\n                }\r\n\r\n                if ( obj.opts.$thumb && !obj.opts.$thumb.length ) {\r\n                    delete obj.opts.$thumb;\r\n                }\r\n\r\n                // \"caption\" is a \"special\" option, it can be used to customize caption per gallery item ..\r\n                if ( $.type( obj.opts.caption ) === 'function' ) {\r\n                    obj.opts.caption = obj.opts.caption.apply( item, [ self, obj ] );\r\n                }\r\n\r\n                if ( $.type( self.opts.caption ) === 'function' ) {\r\n                    obj.opts.caption = self.opts.caption.apply( item, [ self, obj ] );\r\n                }\r\n\r\n                // Make sure we have caption as a string or jQuery object\r\n                if ( !( obj.opts.caption instanceof $ ) ) {\r\n                    obj.opts.caption = obj.opts.caption === undefined ? '' : obj.opts.caption + '';\r\n                }\r\n\r\n                // Check if url contains \"filter\" used to filter the content\r\n                // Example: \"ajax.html #something\"\r\n                if ( type === 'ajax' ) {\r\n                    srcParts = src.split(/\\s+/, 2);\r\n\r\n                    if ( srcParts.length > 1 ) {\r\n                        obj.src = srcParts.shift();\r\n\r\n                        obj.opts.filter = srcParts.shift();\r\n                    }\r\n                }\r\n\r\n                if ( obj.opts.smallBtn == 'auto' ) {\r\n\r\n                    if ( $.inArray( type, ['html', 'inline', 'ajax'] ) > -1 ) {\r\n                        obj.opts.toolbar  = false;\r\n                        obj.opts.smallBtn = true;\r\n\r\n                    } else {\r\n                        obj.opts.smallBtn = false;\r\n                    }\r\n\r\n                }\r\n\r\n                // If the type is \"pdf\", then simply load file into iframe\r\n                if ( type === 'pdf' ) {\r\n                    obj.type = 'iframe';\r\n\r\n                    obj.opts.iframe.preload = false;\r\n                }\r\n\r\n                // Hide all buttons and disable interactivity for modal items\r\n                if ( obj.opts.modal ) {\r\n\r\n                    obj.opts = $.extend(true, obj.opts, {\r\n                        // Remove buttons\r\n                        infobar : 0,\r\n                        toolbar : 0,\r\n\r\n                        smallBtn : 0,\r\n\r\n                        // Disable keyboard navigation\r\n                        keyboard : 0,\r\n\r\n                        // Disable some modules\r\n                        slideShow  : 0,\r\n                        fullScreen : 0,\r\n                        thumbs     : 0,\r\n                        touch      : 0,\r\n\r\n                        // Disable click event handlers\r\n                        clickContent    : false,\r\n                        clickSlide      : false,\r\n                        clickOutside    : false,\r\n                        dblclickContent : false,\r\n                        dblclickSlide   : false,\r\n                        dblclickOutside : false\r\n                    });\r\n\r\n                }\r\n\r\n                // Step 4 - Add processed object to group\r\n                // ======================================\r\n\r\n                self.group.push( obj );\r\n\r\n            });\r\n\r\n        },\r\n\r\n\r\n        // Attach an event handler functions for:\r\n        //   - navigation buttons\r\n        //   - browser scrolling, resizing;\r\n        //   - focusing\r\n        //   - keyboard\r\n        //   - detect idle\r\n        // ======================================\r\n\r\n        addEvents : function() {\r\n            var self = this;\r\n\r\n            self.removeEvents();\r\n\r\n            // Make navigation elements clickable\r\n            self.$refs.container.on('click.fb-close', '[data-fancybox-close]', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                self.close( e );\r\n\r\n            }).on( 'click.fb-prev touchend.fb-prev', '[data-fancybox-prev]', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                self.previous();\r\n\r\n            }).on( 'click.fb-next touchend.fb-next', '[data-fancybox-next]', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                self.next();\r\n\r\n            }).on( 'click.fb', '[data-fancybox-zoom]', function(e) {\r\n                // Click handler for zoom button\r\n                self[ self.isScaledDown() ? 'scaleToActual' : 'scaleToFit' ]();\r\n            });\r\n\r\n\r\n            // Handle page scrolling and browser resizing\r\n            $W.on('orientationchange.fb resize.fb', function(e) {\r\n\r\n                if ( e && e.originalEvent && e.originalEvent.type === \"resize\" ) {\r\n\r\n                    requestAFrame(function() {\r\n                        self.update();\r\n                    });\r\n\r\n                } else {\r\n\r\n                    self.$refs.stage.hide();\r\n\r\n                    setTimeout(function() {\r\n                        self.$refs.stage.show();\r\n\r\n                        self.update();\r\n                    }, 600);\r\n\r\n                }\r\n\r\n            });\r\n\r\n            // Trap keyboard focus inside of the modal, so the user does not accidentally tab outside of the modal\r\n            // (a.k.a. \"escaping the modal\")\r\n            $D.on('focusin.fb', function(e) {\r\n                var instance = $.fancybox ? $.fancybox.getInstance() : null;\r\n\r\n                if ( instance.isClosing || !instance.current || !instance.current.opts.trapFocus || $( e.target ).hasClass( 'fancybox-container' ) || $( e.target ).is( document ) ) {\r\n                    return;\r\n                }\r\n\r\n                if ( instance && $( e.target ).css( 'position' ) !== 'fixed' && !instance.$refs.container.has( e.target ).length ) {\r\n                    e.stopPropagation();\r\n\r\n                    instance.focus();\r\n\r\n                    // Sometimes page gets scrolled, set it back\r\n                    $W.scrollTop( self.scrollTop ).scrollLeft( self.scrollLeft );\r\n                }\r\n            });\r\n\r\n\r\n            // Enable keyboard navigation\r\n            $D.on('keydown.fb', function (e) {\r\n                var current = self.current,\r\n                    keycode = e.keyCode || e.which;\r\n\r\n                if ( !current || !current.opts.keyboard ) {\r\n                    return;\r\n                }\r\n\r\n                if ( $(e.target).is('input') || $(e.target).is('textarea') ) {\r\n                    return;\r\n                }\r\n\r\n                // Backspace and Esc keys\r\n                if ( keycode === 8 || keycode === 27 ) {\r\n                    e.preventDefault();\r\n\r\n                    self.close( e );\r\n\r\n                    return;\r\n                }\r\n\r\n                // Left arrow and Up arrow\r\n                if ( keycode === 37 || keycode === 38 ) {\r\n                    e.preventDefault();\r\n\r\n                    self.previous();\r\n\r\n                    return;\r\n                }\r\n\r\n                // Righ arrow and Down arrow\r\n                if ( keycode === 39 || keycode === 40 ) {\r\n                    e.preventDefault();\r\n\r\n                    self.next();\r\n\r\n                    return;\r\n                }\r\n\r\n                self.trigger('afterKeydown', e, keycode);\r\n            });\r\n\r\n\r\n            // Hide controls after some inactivity period\r\n            if ( self.group[ self.currIndex ].opts.idleTime ) {\r\n                self.idleSecondsCounter = 0;\r\n\r\n                $D.on('mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle', function(e) {\r\n                    self.idleSecondsCounter = 0;\r\n\r\n                    if ( self.isIdle ) {\r\n                        self.showControls();\r\n                    }\r\n\r\n                    self.isIdle = false;\r\n                });\r\n\r\n                self.idleInterval = window.setInterval(function() {\r\n                    self.idleSecondsCounter++;\r\n\r\n                    if ( self.idleSecondsCounter >= self.group[ self.currIndex ].opts.idleTime && !self.isDragging ) {\r\n                        self.isIdle = true;\r\n                        self.idleSecondsCounter = 0;\r\n\r\n                        self.hideControls();\r\n                    }\r\n\r\n                }, 1000);\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Remove events added by the core\r\n        // ===============================\r\n\r\n        removeEvents : function() {\r\n            var self = this;\r\n\r\n            $W.off( 'orientationchange.fb resize.fb' );\r\n            $D.off( 'focusin.fb keydown.fb .fb-idle' );\r\n\r\n            this.$refs.container.off( '.fb-close .fb-prev .fb-next' );\r\n\r\n            if ( self.idleInterval ) {\r\n                window.clearInterval( self.idleInterval );\r\n\r\n                self.idleInterval = null;\r\n            }\r\n        },\r\n\r\n\r\n        // Change to previous gallery item\r\n        // ===============================\r\n\r\n        previous : function( duration ) {\r\n            return this.jumpTo( this.currPos - 1, duration );\r\n        },\r\n\r\n\r\n        // Change to next gallery item\r\n        // ===========================\r\n\r\n        next : function( duration ) {\r\n            return this.jumpTo( this.currPos + 1, duration );\r\n        },\r\n\r\n\r\n        // Switch to selected gallery item\r\n        // ===============================\r\n\r\n        jumpTo : function ( pos, duration, slide ) {\r\n            var self = this,\r\n                firstRun,\r\n                loop,\r\n                current,\r\n                previous,\r\n                canvasWidth,\r\n                currentPos,\r\n                transitionProps;\r\n\r\n            var groupLen = self.group.length;\r\n\r\n            if ( self.isDragging || self.isClosing || ( self.isAnimating && self.firstRun ) ) {\r\n                return;\r\n            }\r\n\r\n            pos  = parseInt( pos, 10 );\r\n            loop = self.current ? self.current.opts.loop : self.opts.loop;\r\n\r\n            if ( !loop && ( pos < 0 || pos >= groupLen ) ) {\r\n                return false;\r\n            }\r\n\r\n            firstRun = self.firstRun = ( self.firstRun === null );\r\n\r\n            if ( groupLen < 2 && !firstRun && !!self.isDragging ) {\r\n                return;\r\n            }\r\n\r\n            previous = self.current;\r\n\r\n            self.prevIndex = self.currIndex;\r\n            self.prevPos   = self.currPos;\r\n\r\n            // Create slides\r\n            current = self.createSlide( pos );\r\n\r\n            if ( groupLen > 1 ) {\r\n                if ( loop || current.index > 0 ) {\r\n                    self.createSlide( pos - 1 );\r\n                }\r\n\r\n                if ( loop || current.index < groupLen - 1 ) {\r\n                    self.createSlide( pos + 1 );\r\n                }\r\n            }\r\n\r\n            self.current   = current;\r\n            self.currIndex = current.index;\r\n            self.currPos   = current.pos;\r\n\r\n            self.trigger( 'beforeShow', firstRun );\r\n\r\n            self.updateControls();\r\n\r\n            currentPos = $.fancybox.getTranslate( current.$slide );\r\n\r\n            current.isMoved        = ( currentPos.left !== 0 || currentPos.top !== 0 ) && !current.$slide.hasClass( 'fancybox-animated' );\r\n            current.forcedDuration = undefined;\r\n\r\n            if ( $.isNumeric( duration ) ) {\r\n                current.forcedDuration = duration;\r\n            } else {\r\n                duration = current.opts[ firstRun ? 'animationDuration' : 'transitionDuration' ];\r\n            }\r\n\r\n            duration = parseInt( duration, 10 );\r\n\r\n            // Fresh start - reveal container, current slide and start loading content\r\n            if ( firstRun ) {\r\n\r\n                if ( current.opts.animationEffect && duration ) {\r\n                    self.$refs.container.css( 'transition-duration', duration + 'ms' );\r\n                }\r\n\r\n                self.$refs.container.removeClass( 'fancybox-is-hidden' );\r\n\r\n                forceRedraw( self.$refs.container );\r\n\r\n                self.$refs.container.addClass( 'fancybox-is-open' );\r\n\r\n                // Make first slide visible (to display loading icon, if needed)\r\n                current.$slide.addClass( 'fancybox-slide--current' );\r\n\r\n                self.loadSlide( current );\r\n\r\n                self.preload( 'image' );\r\n\r\n                return;\r\n            }\r\n\r\n            // Clean up\r\n            $.each(self.slides, function( index, slide ) {\r\n                $.fancybox.stop( slide.$slide );\r\n            });\r\n\r\n            // Make current that slide is visible even if content is still loading\r\n            current.$slide.removeClass( 'fancybox-slide--next fancybox-slide--previous' ).addClass( 'fancybox-slide--current' );\r\n\r\n            // If slides have been dragged, animate them to correct position\r\n            if ( current.isMoved ) {\r\n                canvasWidth = Math.round( current.$slide.width() );\r\n\r\n                $.each(self.slides, function( index, slide ) {\r\n                    var pos = slide.pos - current.pos;\r\n\r\n                    $.fancybox.animate( slide.$slide, {\r\n                        top  : 0,\r\n                        left : ( pos * canvasWidth ) + ( pos * slide.opts.gutter )\r\n                    }, duration, function() {\r\n\r\n                        slide.$slide.removeAttr('style').removeClass( 'fancybox-slide--next fancybox-slide--previous' );\r\n\r\n                        if ( slide.pos === self.currPos ) {\r\n                            current.isMoved = false;\r\n\r\n                            self.complete();\r\n                        }\r\n                    });\r\n                });\r\n\r\n            } else {\r\n                self.$refs.stage.children().removeAttr( 'style' );\r\n            }\r\n\r\n            // Start transition that reveals current content\r\n            // or wait when it will be loaded\r\n\r\n            if ( current.isLoaded ) {\r\n                self.revealContent( current );\r\n\r\n            } else {\r\n                self.loadSlide( current );\r\n            }\r\n\r\n            self.preload( 'image' );\r\n\r\n            if ( previous.pos === current.pos ) {\r\n                return;\r\n            }\r\n\r\n            // Handle previous slide\r\n            // =====================\r\n\r\n            transitionProps = 'fancybox-slide--' + ( previous.pos > current.pos ? 'next' : 'previous' );\r\n\r\n            previous.$slide.removeClass( 'fancybox-slide--complete fancybox-slide--current fancybox-slide--next fancybox-slide--previous' );\r\n\r\n            previous.isComplete = false;\r\n\r\n            if ( !duration || ( !current.isMoved && !current.opts.transitionEffect ) ) {\r\n                return;\r\n            }\r\n\r\n            if ( current.isMoved ) {\r\n                previous.$slide.addClass( transitionProps );\r\n\r\n            } else {\r\n\r\n                transitionProps = 'fancybox-animated ' + transitionProps + ' fancybox-fx-' + current.opts.transitionEffect;\r\n\r\n                $.fancybox.animate( previous.$slide, transitionProps, duration, function() {\r\n                    previous.$slide.removeClass( transitionProps ).removeAttr( 'style' );\r\n                });\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Create new \"slide\" element\r\n        // These are gallery items  that are actually added to DOM\r\n        // =======================================================\r\n\r\n        createSlide : function( pos ) {\r\n\r\n            var self = this;\r\n            var $slide;\r\n            var index;\r\n\r\n            index = pos % self.group.length;\r\n            index = index < 0 ? self.group.length + index : index;\r\n\r\n            if ( !self.slides[ pos ] && self.group[ index ] ) {\r\n                $slide = $('<div class=\"fancybox-slide\"></div>').appendTo( self.$refs.stage );\r\n\r\n                self.slides[ pos ] = $.extend( true, {}, self.group[ index ], {\r\n                    pos      : pos,\r\n                    $slide   : $slide,\r\n                    isLoaded : false,\r\n                });\r\n\r\n                self.updateSlide( self.slides[ pos ] );\r\n            }\r\n\r\n            return self.slides[ pos ];\r\n        },\r\n\r\n\r\n        // Scale image to the actual size of the image\r\n        // ===========================================\r\n\r\n        scaleToActual : function( x, y, duration ) {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n\r\n            var imgPos, posX, posY, scaleX, scaleY;\r\n\r\n            var canvasWidth  = parseInt( current.$slide.width(), 10 );\r\n            var canvasHeight = parseInt( current.$slide.height(), 10 );\r\n\r\n            var newImgWidth  = current.width;\r\n            var newImgHeight = current.height;\r\n\r\n            if ( !( current.type == 'image' && !current.hasError) || !$what || self.isAnimating ) {\r\n                return;\r\n            }\r\n\r\n            $.fancybox.stop( $what );\r\n\r\n            self.isAnimating = true;\r\n\r\n            x = x === undefined ? canvasWidth  * 0.5  : x;\r\n            y = y === undefined ? canvasHeight * 0.5  : y;\r\n\r\n            imgPos = $.fancybox.getTranslate( $what );\r\n\r\n            scaleX  = newImgWidth  / imgPos.width;\r\n            scaleY  = newImgHeight / imgPos.height;\r\n\r\n            // Get center position for original image\r\n            posX = ( canvasWidth * 0.5  - newImgWidth * 0.5 );\r\n            posY = ( canvasHeight * 0.5 - newImgHeight * 0.5 );\r\n\r\n            // Make sure image does not move away from edges\r\n            if ( newImgWidth > canvasWidth ) {\r\n                posX = imgPos.left * scaleX - ( ( x * scaleX ) - x );\r\n\r\n                if ( posX > 0 ) {\r\n                    posX = 0;\r\n                }\r\n\r\n                if ( posX <  canvasWidth - newImgWidth ) {\r\n                    posX = canvasWidth - newImgWidth;\r\n                }\r\n            }\r\n\r\n            if ( newImgHeight > canvasHeight) {\r\n                posY = imgPos.top  * scaleY - ( ( y * scaleY ) - y );\r\n\r\n                if ( posY > 0 ) {\r\n                    posY = 0;\r\n                }\r\n\r\n                if ( posY <  canvasHeight - newImgHeight ) {\r\n                    posY = canvasHeight - newImgHeight;\r\n                }\r\n            }\r\n\r\n            self.updateCursor( newImgWidth, newImgHeight );\r\n\r\n            $.fancybox.animate( $what, {\r\n                top    : posY,\r\n                left   : posX,\r\n                scaleX : scaleX,\r\n                scaleY : scaleY\r\n            }, duration || 330, function() {\r\n                self.isAnimating = false;\r\n            });\r\n\r\n            // Stop slideshow\r\n            if ( self.SlideShow && self.SlideShow.isActive ) {\r\n                self.SlideShow.stop();\r\n            }\r\n        },\r\n\r\n\r\n        // Scale image to fit inside parent element\r\n        // ========================================\r\n\r\n        scaleToFit : function( duration ) {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n            var end;\r\n\r\n            if ( !( current.type == 'image' && !current.hasError) || !$what || self.isAnimating ) {\r\n                return;\r\n            }\r\n\r\n            $.fancybox.stop( $what );\r\n\r\n            self.isAnimating = true;\r\n\r\n            end = self.getFitPos( current );\r\n\r\n            self.updateCursor( end.width, end.height );\r\n\r\n            $.fancybox.animate( $what, {\r\n                top    : end.top,\r\n                left   : end.left,\r\n                scaleX : end.width  / $what.width(),\r\n                scaleY : end.height / $what.height()\r\n            }, duration || 330, function() {\r\n                self.isAnimating = false;\r\n            });\r\n\r\n        },\r\n\r\n        // Calculate image size to fit inside viewport\r\n        // ===========================================\r\n\r\n        getFitPos : function( slide ) {\r\n            var self  = this;\r\n            var $what = slide.$content;\r\n\r\n            var imgWidth  = slide.width;\r\n            var imgHeight = slide.height;\r\n\r\n            var margin = slide.opts.margin;\r\n\r\n            var canvasWidth, canvasHeight, minRatio, width, height;\r\n\r\n            if ( !$what || !$what.length || ( !imgWidth && !imgHeight) ) {\r\n                return false;\r\n            }\r\n\r\n            // Convert \"margin to CSS style: [ top, right, bottom, left ]\r\n            if ( $.type( margin ) === \"number\" ) {\r\n                margin = [ margin, margin ];\r\n            }\r\n\r\n            if ( margin.length == 2 ) {\r\n                margin = [ margin[0], margin[1], margin[0], margin[1] ];\r\n            }\r\n\r\n            // We can not use $slide width here, because it can have different diemensions while in transiton\r\n            canvasWidth  = parseInt( self.$refs.stage.width(), 10 )  - ( margin[ 1 ] + margin[ 3 ] );\r\n            canvasHeight = parseInt( self.$refs.stage.height(), 10 ) - ( margin[ 0 ] + margin[ 2 ] );\r\n\r\n            minRatio = Math.min(1, canvasWidth / imgWidth, canvasHeight / imgHeight );\r\n\r\n            width  = Math.floor( minRatio * imgWidth );\r\n            height = Math.floor( minRatio * imgHeight );\r\n\r\n            // Use floor rounding to make sure it really fits\r\n            return {\r\n                top    : Math.floor( ( canvasHeight - height ) * 0.5 ) + margin[ 0 ],\r\n                left   : Math.floor( ( canvasWidth  - width )  * 0.5 ) + margin[ 3 ],\r\n                width  : width,\r\n                height : height\r\n            };\r\n\r\n        },\r\n\r\n\r\n        // Update content size and position for all slides\r\n        // ==============================================\r\n\r\n        update : function() {\r\n            var self = this;\r\n\r\n            $.each( self.slides, function( key, slide ) {\r\n                self.updateSlide( slide );\r\n            });\r\n        },\r\n\r\n\r\n        // Update slide content position and size\r\n        // ======================================\r\n\r\n        updateSlide : function( slide, duration ) {\r\n            var self  = this,\r\n                $what = slide && slide.$content;\r\n\r\n            if ( $what && ( slide.width || slide.height ) ) {\r\n                self.isAnimating = false;\r\n\r\n                $.fancybox.stop( $what );\r\n\r\n                $.fancybox.setTranslate( $what, self.getFitPos( slide ) );\r\n\r\n                if ( slide.pos === self.currPos ) {\r\n                    self.updateCursor();\r\n                }\r\n            }\r\n\r\n            slide.$slide.trigger( 'refresh' );\r\n\r\n            self.trigger( 'onUpdate', slide );\r\n\r\n        },\r\n\r\n\r\n        // Horizontally center slide\r\n        // =========================\r\n\r\n        centerSlide : function( slide, duration ) {\r\n            var self  = this, canvasWidth, pos;\r\n\r\n            if ( self.current ) {\r\n                canvasWidth = Math.round( slide.$slide.width() );\r\n                pos = slide.pos - self.current.pos;\r\n\r\n                $.fancybox.animate( slide.$slide, {\r\n                    top  : 0,\r\n                    left : ( pos * canvasWidth ) + ( pos * slide.opts.gutter ),\r\n                    opacity : 1\r\n                }, duration === undefined ? 0 : duration, null, false);\r\n            }\r\n        },\r\n\r\n\r\n        // Update cursor style depending if content can be zoomed\r\n        // ======================================================\r\n\r\n        updateCursor : function( nextWidth, nextHeight ) {\r\n\r\n            var self = this;\r\n            var isScaledDown;\r\n\r\n            var $container = self.$refs.container.removeClass( 'fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-drag fancybox-can-zoomOut' );\r\n\r\n            if ( !self.current || self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            if ( self.isZoomable() ) {\r\n\r\n                $container.addClass( 'fancybox-is-zoomable' );\r\n\r\n                if ( nextWidth !== undefined && nextHeight !== undefined ) {\r\n                    isScaledDown = nextWidth < self.current.width && nextHeight < self.current.height;\r\n\r\n                } else {\r\n                    isScaledDown = self.isScaledDown();\r\n                }\r\n\r\n                if ( isScaledDown ) {\r\n\r\n                    // If image is scaled down, then, obviously, it can be zoomed to full size\r\n                    $container.addClass( 'fancybox-can-zoomIn' );\r\n\r\n                } else {\r\n\r\n                    if ( self.current.opts.touch ) {\r\n\r\n                        // If image size ir largen than available available and touch module is not disable,\r\n                        // then user can do panning\r\n                        $container.addClass( 'fancybox-can-drag' );\r\n\r\n                    } else {\r\n                        $container.addClass( 'fancybox-can-zoomOut' );\r\n                    }\r\n\r\n                }\r\n\r\n            } else if ( self.current.opts.touch ) {\r\n                $container.addClass( 'fancybox-can-drag' );\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Check if current slide is zoomable\r\n        // ==================================\r\n\r\n        isZoomable : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var fitPos;\r\n\r\n            if ( !current || self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            // Assume that slide is zoomable if\r\n            //   - image is loaded successfuly\r\n            //   - click action is \"zoom\"\r\n            //   - actual size of the image is smaller than available area\r\n            if ( current.type === 'image' && current.isLoaded && !current.hasError &&\r\n                ( current.opts.clickContent === 'zoom' || ( $.isFunction( current.opts.clickContent ) && current.opts.clickContent( current ) ===  \"zoom\" ) )\r\n            ) {\r\n\r\n                fitPos = self.getFitPos( current );\r\n\r\n                if ( current.width > fitPos.width || current.height > fitPos.height ) {\r\n                    return true;\r\n                }\r\n\r\n            }\r\n\r\n            return false;\r\n\r\n        },\r\n\r\n\r\n        // Check if current image dimensions are smaller than actual\r\n        // =========================================================\r\n\r\n        isScaledDown : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n\r\n            var rez = false;\r\n\r\n            if ( $what ) {\r\n                rez = $.fancybox.getTranslate( $what );\r\n                rez = rez.width < current.width || rez.height < current.height;\r\n            }\r\n\r\n            return rez;\r\n\r\n        },\r\n\r\n\r\n        // Check if image dimensions exceed parent element\r\n        // ===============================================\r\n\r\n        canPan : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n\r\n            var rez = false;\r\n\r\n            if ( $what ) {\r\n                rez = self.getFitPos( current );\r\n                rez = Math.abs( $what.width() - rez.width ) > 1  || Math.abs( $what.height() - rez.height ) > 1;\r\n            }\r\n\r\n            return rez;\r\n\r\n        },\r\n\r\n\r\n        // Load content into the slide\r\n        // ===========================\r\n\r\n        loadSlide : function( slide ) {\r\n\r\n            var self = this, type, $slide;\r\n            var ajaxLoad;\r\n\r\n            if ( slide.isLoading ) {\r\n                return;\r\n            }\r\n\r\n            if ( slide.isLoaded ) {\r\n                return;\r\n            }\r\n\r\n            slide.isLoading = true;\r\n\r\n            self.trigger( 'beforeLoad', slide );\r\n\r\n            type   = slide.type;\r\n            $slide = slide.$slide;\r\n\r\n            $slide\r\n                .off( 'refresh' )\r\n                .trigger( 'onReset' )\r\n                .addClass( 'fancybox-slide--' + ( type || 'unknown' ) )\r\n                .addClass( slide.opts.slideClass );\r\n\r\n            // Create content depending on the type\r\n\r\n            switch ( type ) {\r\n\r\n                case 'image':\r\n\r\n                    self.setImage( slide );\r\n\r\n                break;\r\n\r\n                case 'iframe':\r\n\r\n                    self.setIframe( slide );\r\n\r\n                break;\r\n\r\n                case 'html':\r\n\r\n                    self.setContent( slide, slide.src || slide.content );\r\n\r\n                break;\r\n\r\n                case 'inline':\r\n\r\n                    if ( $( slide.src ).length ) {\r\n                        self.setContent( slide, $( slide.src ) );\r\n\r\n                    } else {\r\n                        self.setError( slide );\r\n                    }\r\n\r\n                break;\r\n\r\n                case 'ajax':\r\n\r\n                    self.showLoading( slide );\r\n\r\n                    ajaxLoad = $.ajax( $.extend( {}, slide.opts.ajax.settings, {\r\n                        url : slide.src,\r\n                        success : function ( data, textStatus ) {\r\n\r\n                            if ( textStatus === 'success' ) {\r\n                                self.setContent( slide, data );\r\n                            }\r\n\r\n                        },\r\n                        error : function ( jqXHR, textStatus ) {\r\n\r\n                            if ( jqXHR && textStatus !== 'abort' ) {\r\n                                self.setError( slide );\r\n                            }\r\n\r\n                        }\r\n                    }));\r\n\r\n                    $slide.one( 'onReset', function () {\r\n                        ajaxLoad.abort();\r\n                    });\r\n\r\n                break;\r\n\r\n                case 'video' :\r\n\r\n                    self.setContent( slide,\r\n                        '<video controls>' +\r\n                          '<source src=\"' + slide.src + '\" type=\"' + slide.opts.videoFormat + '\">' +\r\n                            'Your browser doesn\\'t support HTML5 video' +\r\n                        '</video>'\r\n                    );\r\n\r\n                break;\r\n\r\n                default:\r\n\r\n                    self.setError( slide );\r\n\r\n                break;\r\n\r\n            }\r\n\r\n            return true;\r\n\r\n        },\r\n\r\n\r\n        // Use thumbnail image, if possible\r\n        // ================================\r\n\r\n        setImage : function( slide ) {\r\n\r\n            var self   = this;\r\n            var srcset = slide.opts.srcset || slide.opts.image.srcset;\r\n\r\n            var found, temp, pxRatio, windowWidth;\r\n\r\n            // If we have \"srcset\", then we need to find matching \"src\" value.\r\n            // This is necessary, because when you set an src attribute, the browser will preload the image\r\n            // before any javascript or even CSS is applied.\r\n            if ( srcset ) {\r\n                pxRatio     = window.devicePixelRatio || 1;\r\n                windowWidth = window.innerWidth  * pxRatio;\r\n\r\n                temp = srcset.split(',').map(function ( el ) {\r\n            \t\tvar ret = {};\r\n\r\n            \t\tel.trim().split(/\\s+/).forEach(function ( el, i ) {\r\n                        var value = parseInt( el.substring(0, el.length - 1), 10 );\r\n\r\n            \t\t\tif ( i === 0 ) {\r\n            \t\t\t\treturn ( ret.url = el );\r\n            \t\t\t}\r\n\r\n                        if ( value ) {\r\n                            ret.value   = value;\r\n                            ret.postfix = el[ el.length - 1 ];\r\n                        }\r\n\r\n            \t\t});\r\n\r\n            \t\treturn ret;\r\n            \t});\r\n\r\n                // Sort by value\r\n                temp.sort(function (a, b) {\r\n                  return a.value - b.value;\r\n                });\r\n\r\n                // Ok, now we have an array of all srcset values\r\n                for ( var j = 0; j < temp.length; j++ ) {\r\n                    var el = temp[ j ];\r\n\r\n                    if ( ( el.postfix === 'w' && el.value >= windowWidth ) || ( el.postfix === 'x' && el.value >= pxRatio ) ) {\r\n                        found = el;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // If not found, take the last one\r\n                if ( !found && temp.length ) {\r\n                    found = temp[ temp.length - 1 ];\r\n                }\r\n\r\n                if ( found ) {\r\n                    slide.src = found.url;\r\n\r\n                    // If we have default width/height values, we can calculate height for matching source\r\n                    if ( slide.width && slide.height && found.postfix == 'w' ) {\r\n                        slide.height = ( slide.width / slide.height ) * found.value;\r\n                        slide.width  = found.value;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // This will be wrapper containing both ghost and actual image\r\n            slide.$content = $('<div class=\"fancybox-image-wrap\"></div>')\r\n                .addClass( 'fancybox-is-hidden' )\r\n                .appendTo( slide.$slide );\r\n\r\n\r\n            // If we have a thumbnail, we can display it while actual image is loading\r\n            // Users will not stare at black screen and actual image will appear gradually\r\n            if ( slide.opts.preload !== false && slide.opts.width && slide.opts.height && ( slide.opts.thumb || slide.opts.$thumb ) ) {\r\n\r\n                slide.width  = slide.opts.width;\r\n                slide.height = slide.opts.height;\r\n\r\n                slide.$ghost = $('<img />')\r\n                    .one('error', function() {\r\n\r\n                        $(this).remove();\r\n\r\n                        slide.$ghost = null;\r\n\r\n                        self.setBigImage( slide );\r\n\r\n                    })\r\n                    .one('load', function() {\r\n\r\n                        self.afterLoad( slide );\r\n\r\n                        self.setBigImage( slide );\r\n\r\n                    })\r\n                    .addClass( 'fancybox-image' )\r\n                    .appendTo( slide.$content )\r\n                    .attr( 'src', slide.opts.thumb || slide.opts.$thumb.attr( 'src' ) );\r\n\r\n            } else {\r\n\r\n                self.setBigImage( slide );\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Create full-size image\r\n        // ======================\r\n\r\n        setBigImage : function ( slide ) {\r\n            var self = this;\r\n            var $img = $('<img />');\r\n\r\n            slide.$image = $img\r\n                .one('error', function() {\r\n\r\n                    self.setError( slide );\r\n\r\n                })\r\n                .one('load', function() {\r\n\r\n                    // Clear timeout that checks if loading icon needs to be displayed\r\n                    clearTimeout( slide.timouts );\r\n\r\n                    slide.timouts = null;\r\n\r\n                    if ( self.isClosing ) {\r\n                        return;\r\n                    }\r\n\r\n                    slide.width  = slide.opts.width  || this.naturalWidth;\r\n                    slide.height = slide.opts.height || this.naturalHeight;\r\n\r\n                    if ( slide.opts.image.srcset ) {\r\n                        $img.attr( 'sizes', '100vw' ).attr( 'srcset', slide.opts.image.srcset );\r\n                    }\r\n\r\n                    self.hideLoading( slide );\r\n\r\n                    if ( slide.$ghost ) {\r\n\r\n                        slide.timouts = setTimeout(function() {\r\n                            slide.timouts = null;\r\n\r\n                            slide.$ghost.hide();\r\n\r\n                        }, Math.min( 300, Math.max( 1000, slide.height / 1600 ) ) );\r\n\r\n                    } else {\r\n                        self.afterLoad( slide );\r\n                    }\r\n\r\n                })\r\n                .addClass( 'fancybox-image' )\r\n                .attr('src', slide.src)\r\n                .appendTo( slide.$content );\r\n\r\n            if ( ( $img[0].complete || $img[0].readyState == \"complete\" ) && $img[0].naturalWidth && $img[0].naturalHeight ) {\r\n                  $img.trigger( 'load' );\r\n\r\n            } else if( $img[0].error ) {\r\n                 $img.trigger( 'error' );\r\n\r\n            } else {\r\n\r\n                slide.timouts = setTimeout(function() {\r\n                    if ( !$img[0].complete && !slide.hasError ) {\r\n                        self.showLoading( slide );\r\n                    }\r\n\r\n                }, 100);\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Create iframe wrapper, iframe and bindings\r\n        // ==========================================\r\n\r\n        setIframe : function( slide ) {\r\n            var self\t= this,\r\n                opts    = slide.opts.iframe,\r\n                $slide\t= slide.$slide,\r\n                $iframe;\r\n\r\n            slide.$content = $('<div class=\"fancybox-content' + ( opts.preload ? ' fancybox-is-hidden' : '' ) + '\"></div>')\r\n                .css( opts.css )\r\n                .appendTo( $slide );\r\n\r\n            $iframe = $( opts.tpl.replace(/\\{rnd\\}/g, new Date().getTime()) )\r\n                .attr( opts.attr )\r\n                .appendTo( slide.$content );\r\n\r\n            if ( opts.preload ) {\r\n\r\n                self.showLoading( slide );\r\n\r\n                // Unfortunately, it is not always possible to determine if iframe is successfully loaded\r\n                // (due to browser security policy)\r\n\r\n                $iframe.on('load.fb error.fb', function(e) {\r\n                    this.isReady = 1;\r\n\r\n                    slide.$slide.trigger( 'refresh' );\r\n\r\n                    self.afterLoad( slide );\r\n                });\r\n\r\n                // Recalculate iframe content size\r\n                // ===============================\r\n\r\n                $slide.on('refresh.fb', function() {\r\n                    var $wrap = slide.$content,\r\n                        frameWidth  = opts.css.width,\r\n                        frameHeight = opts.css.height,\r\n                        scrollWidth,\r\n                        $contents,\r\n                        $body;\r\n\r\n                    if ( $iframe[0].isReady !== 1 ) {\r\n                        return;\r\n                    }\r\n\r\n                    // Check if content is accessible,\r\n                    // it will fail if frame is not with the same origin\r\n\r\n                    try {\r\n                        $contents = $iframe.contents();\r\n                        $body     = $contents.find('body');\r\n\r\n                    } catch (ignore) {}\r\n\r\n                    // Calculate dimensions for the wrapper\r\n                    if ( $body && $body.length ) {\r\n\r\n                        if ( frameWidth === undefined ) {\r\n                            scrollWidth = $iframe[0].contentWindow.document.documentElement.scrollWidth;\r\n\r\n                            frameWidth = Math.ceil( $body.outerWidth(true) + ( $wrap.width() - scrollWidth ) );\r\n                            frameWidth += $wrap.outerWidth() - $wrap.innerWidth();\r\n                        }\r\n\r\n                        if ( frameHeight === undefined ) {\r\n                            frameHeight = Math.ceil( $body.outerHeight(true) );\r\n                            frameHeight += $wrap.outerHeight() - $wrap.innerHeight();\r\n                        }\r\n\r\n                        // Resize wrapper to fit iframe content\r\n                        if ( frameWidth ) {\r\n                            $wrap.width( frameWidth );\r\n                        }\r\n\r\n                        if ( frameHeight ) {\r\n                            $wrap.height( frameHeight );\r\n                        }\r\n                    }\r\n\r\n                    $wrap.removeClass( 'fancybox-is-hidden' );\r\n\r\n                });\r\n\r\n            } else {\r\n\r\n                this.afterLoad( slide );\r\n\r\n            }\r\n\r\n            $iframe.attr( 'src', slide.src );\r\n\r\n            if ( slide.opts.smallBtn === true ) {\r\n                slide.$content.prepend( self.translate( slide, slide.opts.btnTpl.smallBtn ) );\r\n            }\r\n\r\n            // Remove iframe if closing or changing gallery item\r\n            $slide.one( 'onReset', function () {\r\n\r\n                // This helps IE not to throw errors when closing\r\n                try {\r\n\r\n                    $( this ).find( 'iframe' ).hide().attr( 'src', '//about:blank' );\r\n\r\n                } catch ( ignore ) {}\r\n\r\n                $( this ).empty();\r\n\r\n                slide.isLoaded = false;\r\n\r\n            });\r\n\r\n        },\r\n\r\n\r\n        // Wrap and append content to the slide\r\n        // ======================================\r\n\r\n        setContent : function ( slide, content ) {\r\n\r\n            var self = this;\r\n\r\n            if ( self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            self.hideLoading( slide );\r\n\r\n            slide.$slide.empty();\r\n\r\n            if ( isQuery( content ) && content.parent().length ) {\r\n\r\n                // If content is a jQuery object, then it will be moved to the slide.\r\n                // The placeholder is created so we will know where to put it back.\r\n                // If user is navigating gallery fast, then the content might be already inside fancyBox\r\n                // =====================================================================================\r\n\r\n                // Make sure content is not already moved to fancyBox\r\n                content.parent( '.fancybox-slide--inline' ).trigger( 'onReset' );\r\n\r\n                // Create temporary element marking original place of the content\r\n                slide.$placeholder = $( '<div></div>' ).hide().insertAfter( content );\r\n\r\n                // Make sure content is visible\r\n                content.css('display', 'inline-block');\r\n\r\n            } else if ( !slide.hasError ) {\r\n\r\n                // If content is just a plain text, try to convert it to html\r\n                if ( $.type( content ) === 'string' ) {\r\n                    content = $('<div>').append( $.trim( content ) ).contents();\r\n\r\n                    // If we have text node, then add wrapping element to make vertical alignment work\r\n                    if ( content[0].nodeType === 3 ) {\r\n                        content = $('<div>').html( content );\r\n                    }\r\n                }\r\n\r\n                // If \"filter\" option is provided, then filter content\r\n                if ( slide.opts.filter ) {\r\n                    content = $('<div>').html( content ).find( slide.opts.filter );\r\n                }\r\n\r\n            }\r\n\r\n            slide.$slide.one('onReset', function () {\r\n\r\n                // Pause all html5 video/audio\r\n                $( this ).find( 'video,audio' ).trigger( 'pause' );\r\n\r\n                // Put content back\r\n                if ( slide.$placeholder ) {\r\n                    slide.$placeholder.after( content.hide() ).remove();\r\n\r\n                    slide.$placeholder = null;\r\n                }\r\n\r\n                // Remove custom close button\r\n                if ( slide.$smallBtn ) {\r\n                    slide.$smallBtn.remove();\r\n\r\n                    slide.$smallBtn = null;\r\n                }\r\n\r\n                // Remove content and mark slide as not loaded\r\n                if ( !slide.hasError ) {\r\n                    $(this).empty();\r\n\r\n                    slide.isLoaded = false;\r\n                }\r\n\r\n            });\r\n\r\n            slide.$content = $( content ).appendTo( slide.$slide );\r\n\r\n            this.afterLoad( slide );\r\n        },\r\n\r\n        // Display error message\r\n        // =====================\r\n\r\n        setError : function ( slide ) {\r\n\r\n            slide.hasError = true;\r\n\r\n            slide.$slide.removeClass( 'fancybox-slide--' + slide.type );\r\n\r\n            this.setContent( slide, this.translate( slide, slide.opts.errorTpl ) );\r\n\r\n        },\r\n\r\n\r\n        // Show loading icon inside the slide\r\n        // ==================================\r\n\r\n        showLoading : function( slide ) {\r\n\r\n            var self = this;\r\n\r\n            slide = slide || self.current;\r\n\r\n            if ( slide && !slide.$spinner ) {\r\n                slide.$spinner = $( self.opts.spinnerTpl ).appendTo( slide.$slide );\r\n            }\r\n\r\n        },\r\n\r\n        // Remove loading icon from the slide\r\n        // ==================================\r\n\r\n        hideLoading : function( slide ) {\r\n\r\n            var self = this;\r\n\r\n            slide = slide || self.current;\r\n\r\n            if ( slide && slide.$spinner ) {\r\n                slide.$spinner.remove();\r\n\r\n                delete slide.$spinner;\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Adjustments after slide content has been loaded\r\n        // ===============================================\r\n\r\n        afterLoad : function( slide ) {\r\n\r\n            var self = this;\r\n\r\n            if ( self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            slide.isLoading = false;\r\n            slide.isLoaded  = true;\r\n\r\n            self.trigger( 'afterLoad', slide );\r\n\r\n            self.hideLoading( slide );\r\n\r\n            if ( slide.opts.smallBtn && !slide.$smallBtn ) {\r\n                slide.$smallBtn = $( self.translate( slide, slide.opts.btnTpl.smallBtn ) ).appendTo( slide.$content.filter('div,form').first() );\r\n            }\r\n\r\n            if ( slide.opts.protect && slide.$content && !slide.hasError ) {\r\n\r\n                // Disable right click\r\n                slide.$content.on( 'contextmenu.fb', function( e ) {\r\n                     if ( e.button == 2 ) {\r\n                         e.preventDefault();\r\n                     }\r\n\r\n                    return true;\r\n                });\r\n\r\n                // Add fake element on top of the image\r\n                // This makes a bit harder for user to select image\r\n                if ( slide.type === 'image' ) {\r\n                    $( '<div class=\"fancybox-spaceball\"></div>' ).appendTo( slide.$content );\r\n                }\r\n\r\n            }\r\n\r\n            self.revealContent( slide );\r\n\r\n        },\r\n\r\n\r\n        // Make content visible\r\n        // This method is called right after content has been loaded or\r\n        // user navigates gallery and transition should start\r\n        // ============================================================\r\n\r\n        revealContent : function( slide ) {\r\n\r\n            var self   = this;\r\n            var $slide = slide.$slide;\r\n\r\n            var effect, effectClassName, duration, opacity, end, start = false;\r\n\r\n            effect   = slide.opts[ self.firstRun ? 'animationEffect'   : 'transitionEffect' ];\r\n            duration = slide.opts[ self.firstRun ? 'animationDuration' : 'transitionDuration' ];\r\n\r\n            duration = parseInt( slide.forcedDuration === undefined ? duration : slide.forcedDuration, 10 );\r\n\r\n            if ( slide.isMoved || slide.pos !== self.currPos || !duration ) {\r\n                effect = false;\r\n            }\r\n\r\n            // Check if can zoom\r\n            if ( effect === 'zoom' && !( slide.pos === self.currPos && duration && slide.type === 'image' && !slide.hasError && ( start = self.getThumbPos( slide ) ) ) ) {\r\n                effect = 'fade';\r\n            }\r\n\r\n            // Zoom animation\r\n            // ==============\r\n\r\n            if ( effect === 'zoom' ) {\r\n                end = self.getFitPos( slide );\r\n\r\n                end.scaleX = end.width  / start.width;\r\n                end.scaleY = end.height / start.height;\r\n\r\n                delete end.width;\r\n                delete end.height;\r\n\r\n                // Check if we need to animate opacity\r\n                opacity = slide.opts.zoomOpacity;\r\n\r\n                if ( opacity == 'auto' ) {\r\n                    opacity = Math.abs( slide.width / slide.height - start.width / start.height ) > 0.1;\r\n                }\r\n\r\n                if ( opacity ) {\r\n                    start.opacity = 0.1;\r\n                    end.opacity   = 1;\r\n                }\r\n\r\n                // Draw image at start position\r\n                $.fancybox.setTranslate( slide.$content.removeClass( 'fancybox-is-hidden' ), start );\r\n\r\n                forceRedraw( slide.$content );\r\n\r\n                // Start animation\r\n                $.fancybox.animate( slide.$content, end, duration, function() {\r\n                    self.complete();\r\n                });\r\n\r\n                return;\r\n            }\r\n\r\n            self.updateSlide( slide );\r\n\r\n\r\n            // Simply show content\r\n            // ===================\r\n\r\n            if ( !effect ) {\r\n                forceRedraw( $slide );\r\n\r\n                slide.$content.removeClass( 'fancybox-is-hidden' );\r\n\r\n                if ( slide.pos === self.currPos ) {\r\n                    self.complete();\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            $.fancybox.stop( $slide );\r\n\r\n            effectClassName = 'fancybox-animated fancybox-slide--' + ( slide.pos >= self.prevPos ? 'next' : 'previous' ) + ' fancybox-fx-' + effect;\r\n\r\n            $slide.removeAttr( 'style' ).removeClass( 'fancybox-slide--current fancybox-slide--next fancybox-slide--previous' ).addClass( effectClassName );\r\n\r\n            slide.$content.removeClass( 'fancybox-is-hidden' );\r\n\r\n            //Force reflow for CSS3 transitions\r\n            forceRedraw( $slide );\r\n\r\n            $.fancybox.animate( $slide, 'fancybox-slide--current', duration, function(e) {\r\n                $slide.removeClass( effectClassName ).removeAttr( 'style' );\r\n\r\n                if ( slide.pos === self.currPos ) {\r\n                    self.complete();\r\n                }\r\n\r\n            }, true);\r\n\r\n        },\r\n\r\n\r\n        // Check if we can and have to zoom from thumbnail\r\n        //================================================\r\n\r\n        getThumbPos : function( slide ) {\r\n\r\n            var self = this;\r\n            var rez  = false;\r\n\r\n            // Check if element is inside the viewport by at least 1 pixel\r\n            var isElementVisible = function( $el ) {\r\n                var element = $el[0];\r\n\r\n                var elementRect = element.getBoundingClientRect();\r\n                var parentRects = [];\r\n\r\n                var visibleInAllParents;\r\n\r\n                while ( element.parentElement !== null ) {\r\n                    if ( $(element.parentElement).css('overflow') === 'hidden'  || $(element.parentElement).css('overflow') === 'auto' ) {\r\n                        parentRects.push(element.parentElement.getBoundingClientRect());\r\n                    }\r\n\r\n                    element = element.parentElement;\r\n                }\r\n\r\n                visibleInAllParents = parentRects.every(function(parentRect){\r\n                    var visiblePixelX = Math.min(elementRect.right, parentRect.right) - Math.max(elementRect.left, parentRect.left);\r\n                    var visiblePixelY = Math.min(elementRect.bottom, parentRect.bottom) - Math.max(elementRect.top, parentRect.top);\r\n\r\n                    return visiblePixelX > 0 && visiblePixelY > 0;\r\n                });\r\n\r\n                return visibleInAllParents &&\r\n                    elementRect.bottom > 0 && elementRect.right > 0 &&\r\n                    elementRect.left < $(window).width() && elementRect.top < $(window).height();\r\n            };\r\n\r\n            var $thumb   = slide.opts.$thumb;\r\n            var thumbPos = $thumb ? $thumb.offset() : 0;\r\n            var slidePos;\r\n\r\n            if ( thumbPos && $thumb[0].ownerDocument === document && isElementVisible( $thumb ) ) {\r\n                slidePos = self.$refs.stage.offset();\r\n\r\n                rez = {\r\n                    top    : thumbPos.top  - slidePos.top  + parseFloat( $thumb.css( \"border-top-width\" ) || 0 ),\r\n                    left   : thumbPos.left - slidePos.left + parseFloat( $thumb.css( \"border-left-width\" ) || 0 ),\r\n                    width  : $thumb.width(),\r\n                    height : $thumb.height(),\r\n                    scaleX : 1,\r\n                    scaleY : 1\r\n                };\r\n            }\r\n\r\n            return rez;\r\n        },\r\n\r\n\r\n        // Final adjustments after current gallery item is moved to position\r\n        // and it`s content is loaded\r\n        // ==================================================================\r\n\r\n        complete : function() {\r\n            var self = this,\r\n                current = self.current,\r\n                slides  = {},\r\n                promise;\r\n\r\n            if ( current.isMoved || !current.isLoaded || current.isComplete ) {\r\n                return;\r\n            }\r\n\r\n            current.isComplete = true;\r\n\r\n            current.$slide.siblings().trigger( 'onReset' );\r\n\r\n            self.preload( 'inline' );\r\n\r\n            // Trigger any CSS3 transiton inside the slide\r\n            forceRedraw( current.$slide );\r\n\r\n            current.$slide.addClass( 'fancybox-slide--complete' );\r\n\r\n            // Remove unnecessary slides\r\n            $.each( self.slides, function( key, slide ) {\r\n                if ( slide.pos >= self.currPos - 1 && slide.pos <= self.currPos + 1 ) {\r\n                    slides[ slide.pos ] = slide;\r\n\r\n                } else if ( slide ) {\r\n                    $.fancybox.stop( slide.$slide );\r\n\r\n                    slide.$slide.off().remove();\r\n                }\r\n            });\r\n\r\n            self.slides = slides;\r\n\r\n            self.updateCursor();\r\n\r\n            self.trigger( 'afterShow' );\r\n\r\n            // Play first html5 video/audio\r\n            current.$slide.find( 'video,audio' ).first().trigger( 'play' );\r\n\r\n            // Try to focus on the first focusable element\r\n            if ( $( document.activeElement ).is( '[disabled]' ) || ( current.opts.autoFocus && !( current.type == 'image' || current.type === 'iframe' ) ) ) {\r\n                self.focus();\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Preload next and previous slides\r\n        // ================================\r\n\r\n        preload : function( type ) {\r\n            var self = this,\r\n                next = self.slides[ self.currPos + 1 ],\r\n                prev = self.slides[ self.currPos - 1 ];\r\n\r\n            if ( next && next.type === type ) {\r\n                self.loadSlide( next );\r\n            }\r\n\r\n            if ( prev && prev.type === type ) {\r\n                self.loadSlide( prev );\r\n            }\r\n        },\r\n\r\n\r\n        // Try to find and focus on the first focusable element\r\n        // ====================================================\r\n\r\n        focus : function() {\r\n            var current = this.current;\r\n            var $el;\r\n\r\n            if ( this.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            if ( current && current.isComplete ) {\r\n\r\n                // Look for first input with autofocus attribute\r\n                $el = current.$slide.find('input[autofocus]:enabled:visible:first');\r\n\r\n                if ( !$el.length ) {\r\n                    $el = current.$slide.find('button,:input,[tabindex],a').filter(':enabled:visible:first');\r\n                }\r\n            }\r\n\r\n            $el = $el && $el.length ? $el : this.$refs.container;\r\n\r\n            $el.focus();\r\n        },\r\n\r\n\r\n        // Activates current instance - brings container to the front and enables keyboard,\r\n        // notifies other instances about deactivating\r\n        // =================================================================================\r\n\r\n        activate : function () {\r\n            var self = this;\r\n\r\n            // Deactivate all instances\r\n            $( '.fancybox-container' ).each(function () {\r\n                var instance = $(this).data( 'FancyBox' );\r\n\r\n                // Skip self and closing instances\r\n                if (instance && instance.id !== self.id && !instance.isClosing) {\r\n                    instance.trigger( 'onDeactivate' );\r\n\r\n                    instance.removeEvents();\r\n\r\n                    instance.isVisible = false;\r\n                }\r\n\r\n            });\r\n\r\n            self.isVisible = true;\r\n\r\n            if ( self.current || self.isIdle ) {\r\n                self.update();\r\n\r\n                self.updateControls();\r\n            }\r\n\r\n            self.trigger( 'onActivate' );\r\n\r\n            self.addEvents();\r\n        },\r\n\r\n\r\n        // Start closing procedure\r\n        // This will start \"zoom-out\" animation if needed and clean everything up afterwards\r\n        // =================================================================================\r\n\r\n        close : function( e, d ) {\r\n\r\n            var self    = this;\r\n            var current = self.current;\r\n\r\n            var effect, duration;\r\n            var $what, opacity, start, end;\r\n\r\n            var done = function() {\r\n                self.cleanUp( e );\r\n            };\r\n\r\n            if ( self.isClosing ) {\r\n                return false;\r\n            }\r\n\r\n            self.isClosing = true;\r\n\r\n            // If beforeClose callback prevents closing, make sure content is centered\r\n            if ( self.trigger( 'beforeClose', e ) === false ) {\r\n                self.isClosing = false;\r\n\r\n                requestAFrame(function() {\r\n                    self.update();\r\n                });\r\n\r\n                return false;\r\n            }\r\n\r\n            // Remove all events\r\n            // If there are multiple instances, they will be set again by \"activate\" method\r\n            self.removeEvents();\r\n\r\n            if ( current.timouts ) {\r\n                clearTimeout( current.timouts );\r\n            }\r\n\r\n            $what    = current.$content;\r\n            effect   = current.opts.animationEffect;\r\n            duration = $.isNumeric( d ) ? d : ( effect ? current.opts.animationDuration : 0 );\r\n\r\n            // Remove other slides\r\n            current.$slide.off( transitionEnd ).removeClass( 'fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated' );\r\n\r\n            current.$slide.siblings().trigger( 'onReset' ).remove();\r\n\r\n            // Trigger animations\r\n            if ( duration ) {\r\n                self.$refs.container.removeClass( 'fancybox-is-open' ).addClass( 'fancybox-is-closing' );\r\n            }\r\n\r\n            // Clean up\r\n            self.hideLoading( current );\r\n\r\n            self.hideControls();\r\n\r\n            self.updateCursor();\r\n\r\n            // Check if possible to zoom-out\r\n            if ( effect === 'zoom' && !( e !== true && $what && duration && current.type === 'image' && !current.hasError && ( end = self.getThumbPos( current ) ) ) ) {\r\n                effect = 'fade';\r\n            }\r\n\r\n            if ( effect === 'zoom' ) {\r\n                $.fancybox.stop( $what );\r\n\r\n                start = $.fancybox.getTranslate( $what );\r\n\r\n                start.width  = start.width  * start.scaleX;\r\n                start.height = start.height * start.scaleY;\r\n\r\n                // Check if we need to animate opacity\r\n                opacity = current.opts.zoomOpacity;\r\n\r\n                if ( opacity == 'auto' ) {\r\n                    opacity = Math.abs( current.width / current.height - end.width / end.height ) > 0.1;\r\n                }\r\n\r\n                if ( opacity ) {\r\n                    end.opacity = 0;\r\n                }\r\n\r\n                start.scaleX = start.width  / end.width;\r\n                start.scaleY = start.height / end.height;\r\n\r\n                start.width  = end.width;\r\n                start.height = end.height;\r\n\r\n                $.fancybox.setTranslate( current.$content, start );\r\n\r\n                forceRedraw( current.$content );\r\n\r\n                $.fancybox.animate( current.$content, end, duration, done );\r\n\r\n                return true;\r\n            }\r\n\r\n            if ( effect && duration ) {\r\n\r\n                // If skip animation\r\n                if ( e === true ) {\r\n                    setTimeout( done, duration );\r\n\r\n                } else {\r\n                    $.fancybox.animate( current.$slide.removeClass( 'fancybox-slide--current' ), 'fancybox-animated fancybox-slide--previous fancybox-fx-' + effect, duration, done );\r\n                }\r\n\r\n            } else {\r\n                done();\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n\r\n        // Final adjustments after removing the instance\r\n        // =============================================\r\n\r\n        cleanUp : function( e ) {\r\n            var self  = this,\r\n                $body = $( 'body' ),\r\n                instance,\r\n                offset;\r\n\r\n            self.current.$slide.trigger( 'onReset' );\r\n\r\n            self.$refs.container.empty().remove();\r\n\r\n            self.trigger( 'afterClose', e );\r\n\r\n            // Place back focus\r\n            if ( self.$lastFocus && !!self.current.opts.backFocus ) {\r\n                self.$lastFocus.focus();\r\n            }\r\n\r\n            self.current = null;\r\n\r\n            // Check if there are other instances\r\n            instance = $.fancybox.getInstance();\r\n\r\n            if ( instance ) {\r\n                instance.activate();\r\n\r\n            } else {\r\n\r\n                $W.scrollTop( self.scrollTop ).scrollLeft( self.scrollLeft );\r\n\r\n                $body.removeClass( 'fancybox-active compensate-for-scrollbar' );\r\n\r\n                if ( $body.hasClass( 'fancybox-iosfix' ) ) {\r\n                    offset = parseInt(document.body.style.top, 10);\r\n\r\n                    $body.removeClass( 'fancybox-iosfix' ).css( 'top', '' ).scrollTop( offset * -1 );\r\n                }\r\n\r\n                $( '#fancybox-style-noscroll' ).remove();\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Call callback and trigger an event\r\n        // ==================================\r\n\r\n        trigger : function( name, slide ) {\r\n            var args  = Array.prototype.slice.call(arguments, 1),\r\n                self  = this,\r\n                obj   = slide && slide.opts ? slide : self.current,\r\n                rez;\r\n\r\n            if ( obj ) {\r\n                args.unshift( obj );\r\n\r\n            } else {\r\n                obj = self;\r\n            }\r\n\r\n            args.unshift( self );\r\n\r\n            if ( $.isFunction( obj.opts[ name ] ) ) {\r\n                rez = obj.opts[ name ].apply( obj, args );\r\n            }\r\n\r\n            if ( rez === false ) {\r\n                return rez;\r\n            }\r\n\r\n            if ( name === 'afterClose' || !self.$refs ) {\r\n                $D.trigger( name + '.fb', args );\r\n\r\n            } else {\r\n                self.$refs.container.trigger( name + '.fb', args );\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Update infobar values, navigation button states and reveal caption\r\n        // ==================================================================\r\n\r\n        updateControls : function ( force ) {\r\n\r\n            var self = this;\r\n\r\n            var current  = self.current,\r\n                index    = current.index,\r\n                caption  = current.opts.caption,\r\n                $container = self.$refs.container,\r\n                $caption   = self.$refs.caption;\r\n\r\n            // Recalculate content dimensions\r\n            current.$slide.trigger( 'refresh' );\r\n\r\n            self.$caption = caption && caption.length ? $caption.html( caption ) : null;\r\n\r\n            if ( !self.isHiddenControls && !self.isIdle ) {\r\n                self.showControls();\r\n            }\r\n\r\n            // Update info and navigation elements\r\n            $container.find('[data-fancybox-count]').html( self.group.length );\r\n            $container.find('[data-fancybox-index]').html( index + 1 );\r\n\r\n            $container.find('[data-fancybox-prev]').prop( 'disabled', ( !current.opts.loop && index <= 0 ) );\r\n            $container.find('[data-fancybox-next]').prop( 'disabled', ( !current.opts.loop && index >= self.group.length - 1 ) );\r\n\r\n            if ( current.type === 'image' ) {\r\n\r\n                // Update download button source\r\n                $container.find('[data-fancybox-download]').attr( 'href', current.opts.image.src || current.src ).show();\r\n\r\n            } else {\r\n                $container.find('[data-fancybox-download],[data-fancybox-zoom]').hide();\r\n            }\r\n        },\r\n\r\n        // Hide toolbar and caption\r\n        // ========================\r\n\r\n        hideControls : function () {\r\n\r\n            this.isHiddenControls = true;\r\n\r\n            this.$refs.container.removeClass( 'fancybox-show-infobar fancybox-show-toolbar fancybox-show-caption fancybox-show-nav' );\r\n\r\n        },\r\n\r\n        showControls : function() {\r\n            var self = this;\r\n            var opts = self.current ? self.current.opts : self.opts;\r\n            var $container = self.$refs.container;\r\n\r\n            self.isHiddenControls   = false;\r\n            self.idleSecondsCounter = 0;\r\n\r\n            $container\r\n                .toggleClass( 'fancybox-show-toolbar', !!( opts.toolbar && opts.buttons ) )\r\n                .toggleClass( 'fancybox-show-infobar', !!( opts.infobar && self.group.length > 1 ) )\r\n                .toggleClass( 'fancybox-show-nav',     !!( opts.arrows && self.group.length > 1 ) )\r\n                .toggleClass( 'fancybox-is-modal',     !!opts.modal );\r\n\r\n            if ( self.$caption ) {\r\n                $container.addClass( 'fancybox-show-caption ');\r\n\r\n            } else {\r\n               $container.removeClass( 'fancybox-show-caption' );\r\n           }\r\n\r\n       },\r\n\r\n\r\n       // Toggle toolbar and caption\r\n       // ==========================\r\n\r\n       toggleControls : function() {\r\n           if ( this.isHiddenControls ) {\r\n               this.showControls();\r\n\r\n           } else {\r\n               this.hideControls();\r\n           }\r\n\r\n       },\r\n\r\n\r\n    });\r\n\r\n\r\n    $.fancybox = {\r\n\r\n        version  : \"3.2.10\",\r\n        defaults : defaults,\r\n\r\n\r\n        // Get current instance and execute a command.\r\n        //\r\n        // Examples of usage:\r\n        //\r\n        //   $instance = $.fancybox.getInstance();\r\n        //   $.fancybox.getInstance().jumpTo( 1 );\r\n        //   $.fancybox.getInstance( 'jumpTo', 1 );\r\n        //   $.fancybox.getInstance( function() {\r\n        //       console.info( this.currIndex );\r\n        //   });\r\n        // ======================================================\r\n\r\n        getInstance : function ( command ) {\r\n            var instance = $('.fancybox-container:not(\".fancybox-is-closing\"):last').data( 'FancyBox' );\r\n            var args     = Array.prototype.slice.call(arguments, 1);\r\n\r\n            if ( instance instanceof FancyBox ) {\r\n\r\n                if ( $.type( command ) === 'string' ) {\r\n                    instance[ command ].apply( instance, args );\r\n\r\n                } else if ( $.type( command ) === 'function' ) {\r\n                    command.apply( instance, args );\r\n                }\r\n\r\n                return instance;\r\n            }\r\n\r\n            return false;\r\n\r\n        },\r\n\r\n\r\n        // Create new instance\r\n        // ===================\r\n\r\n        open : function ( items, opts, index ) {\r\n            return new FancyBox( items, opts, index );\r\n        },\r\n\r\n\r\n        // Close current or all instances\r\n        // ==============================\r\n\r\n        close : function ( all ) {\r\n            var instance = this.getInstance();\r\n\r\n            if ( instance ) {\r\n                instance.close();\r\n\r\n                // Try to find and close next instance\r\n\r\n                if ( all === true ) {\r\n                    this.close();\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        // Close instances and unbind all events\r\n        // ==============================\r\n\r\n        destroy : function() {\r\n\r\n            this.close( true );\r\n\r\n            $D.off( 'click.fb-start' );\r\n\r\n        },\r\n\r\n\r\n        // Try to detect mobile devices\r\n        // ============================\r\n\r\n        isMobile : document.createTouch !== undefined && /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),\r\n\r\n\r\n        // Detect if 'translate3d' support is available\r\n        // ============================================\r\n\r\n        use3d : (function() {\r\n            var div = document.createElement('div');\r\n\r\n            return window.getComputedStyle && window.getComputedStyle( div ).getPropertyValue('transform') && !(document.documentMode && document.documentMode < 11);\r\n        }()),\r\n\r\n        // Helper function to get current visual state of an element\r\n        // returns array[ top, left, horizontal-scale, vertical-scale, opacity ]\r\n        // =====================================================================\r\n\r\n        getTranslate : function( $el ) {\r\n            var matrix;\r\n\r\n            if ( !$el || !$el.length ) {\r\n                return false;\r\n            }\r\n\r\n            matrix  = $el.eq( 0 ).css('transform');\r\n\r\n            if ( matrix && matrix.indexOf( 'matrix' ) !== -1 ) {\r\n                matrix = matrix.split('(')[1];\r\n                matrix = matrix.split(')')[0];\r\n                matrix = matrix.split(',');\r\n            } else {\r\n                matrix = [];\r\n            }\r\n\r\n            if ( matrix.length ) {\r\n\r\n                // If IE\r\n                if ( matrix.length > 10 ) {\r\n                    matrix = [ matrix[13], matrix[12], matrix[0], matrix[5] ];\r\n\r\n                } else {\r\n                    matrix = [ matrix[5], matrix[4], matrix[0], matrix[3]];\r\n                }\r\n\r\n                matrix = matrix.map(parseFloat);\r\n\r\n            } else {\r\n                matrix = [ 0, 0, 1, 1 ];\r\n\r\n                var transRegex = /\\.*translate\\((.*)px,(.*)px\\)/i;\r\n                var transRez = transRegex.exec( $el.eq( 0 ).attr('style') );\r\n\r\n                if ( transRez ) {\r\n                    matrix[ 0 ] = parseFloat( transRez[2] );\r\n                    matrix[ 1 ] = parseFloat( transRez[1] );\r\n                }\r\n            }\r\n\r\n            return {\r\n                top     : matrix[ 0 ],\r\n                left    : matrix[ 1 ],\r\n                scaleX  : matrix[ 2 ],\r\n                scaleY  : matrix[ 3 ],\r\n                opacity : parseFloat( $el.css('opacity') ),\r\n                width   : $el.width(),\r\n                height  : $el.height()\r\n            };\r\n\r\n        },\r\n\r\n\r\n        // Shortcut for setting \"translate3d\" properties for element\r\n        // Can set be used to set opacity, too\r\n        // ========================================================\r\n\r\n        setTranslate : function( $el, props ) {\r\n            var str  = '';\r\n            var css  = {};\r\n\r\n            if ( !$el || !props ) {\r\n                return;\r\n            }\r\n\r\n            if ( props.left !== undefined || props.top !== undefined ) {\r\n                str = ( props.left === undefined ? $el.position().left : props.left )  + 'px, ' + ( props.top === undefined ? $el.position().top : props.top ) + 'px';\r\n\r\n                if ( this.use3d ) {\r\n                    str = 'translate3d(' + str + ', 0px)';\r\n\r\n                } else {\r\n                    str = 'translate(' + str + ')';\r\n                }\r\n            }\r\n\r\n            if ( props.scaleX !== undefined && props.scaleY !== undefined ) {\r\n                str = (str.length ? str + ' ' : '') + 'scale(' + props.scaleX + ', ' + props.scaleY + ')';\r\n            }\r\n\r\n            if ( str.length ) {\r\n                css.transform = str;\r\n            }\r\n\r\n            if ( props.opacity !== undefined ) {\r\n                css.opacity = props.opacity;\r\n            }\r\n\r\n            if ( props.width !== undefined ) {\r\n                css.width = props.width;\r\n            }\r\n\r\n            if ( props.height !== undefined ) {\r\n                css.height = props.height;\r\n            }\r\n\r\n            return $el.css( css );\r\n        },\r\n\r\n\r\n        // Simple CSS transition handler\r\n        // =============================\r\n\r\n        animate : function ( $el, to, duration, callback, leaveAnimationName ) {\r\n            if ( $.isFunction( duration ) ) {\r\n                callback = duration;\r\n                duration = null;\r\n            }\r\n\r\n            if ( !$.isPlainObject( to ) ) {\r\n                $el.removeAttr( 'style' );\r\n            }\r\n\r\n            $el.on( transitionEnd, function(e) {\r\n\r\n                // Skip events from child elements and z-index change\r\n                if ( e && e.originalEvent && ( !$el.is( e.originalEvent.target ) || e.originalEvent.propertyName == 'z-index' ) ) {\r\n                    return;\r\n                }\r\n\r\n                $.fancybox.stop( $el );\r\n\r\n                if ( $.isPlainObject( to ) ) {\r\n\r\n                    if ( to.scaleX !== undefined && to.scaleY !== undefined ) {\r\n                        $el.css( 'transition-duration', '' );\r\n\r\n                        to.width  = Math.round( $el.width()  * to.scaleX );\r\n                        to.height = Math.round( $el.height() * to.scaleY );\r\n\r\n                        to.scaleX = 1;\r\n                        to.scaleY = 1;\r\n\r\n                        $.fancybox.setTranslate( $el, to );\r\n                    }\r\n\r\n                    if ( leaveAnimationName === false ) {\r\n                        $el.removeAttr( 'style' );\r\n                    }\r\n\r\n                } else if ( leaveAnimationName !== true ) {\r\n                    $el.removeClass( to );\r\n                }\r\n\r\n                if ( $.isFunction( callback ) ) {\r\n                    callback( e );\r\n                }\r\n\r\n            });\r\n\r\n            if ( $.isNumeric( duration ) ) {\r\n                $el.css( 'transition-duration', duration + 'ms' );\r\n            }\r\n\r\n            if ( $.isPlainObject( to ) ) {\r\n                $.fancybox.setTranslate( $el, to );\r\n\r\n            } else {\r\n                $el.addClass( to );\r\n            }\r\n\r\n            if ( to.scaleX && $el.hasClass( 'fancybox-image-wrap' ) ) {\r\n                $el.parent().addClass( 'fancybox-is-scaling' );\r\n            }\r\n\r\n            // Make sure that `transitionend` callback gets fired\r\n            $el.data(\"timer\", setTimeout(function() {\r\n                $el.trigger( 'transitionend' );\r\n            }, duration + 16));\r\n\r\n        },\r\n\r\n        stop : function( $el ) {\r\n            clearTimeout( $el.data(\"timer\") );\r\n\r\n            $el.off( 'transitionend' ).css( 'transition-duration', '' );\r\n\r\n            if ( $el.hasClass( 'fancybox-image-wrap' ) ) {\r\n                $el.parent().removeClass( 'fancybox-is-scaling' );\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n\r\n    // Default click handler for \"fancyboxed\" links\r\n    // ============================================\r\n\r\n    function _run( e ) {\r\n        var $target\t= $( e.currentTarget ),\r\n            opts\t= e.data ? e.data.options : {},\r\n            value\t= $target.attr( 'data-fancybox' ) || '',\r\n            index\t= 0,\r\n            items   = [];\r\n\r\n        // Avoid opening multiple times\r\n        if ( e.isDefaultPrevented() ) {\r\n            return;\r\n        }\r\n\r\n        e.preventDefault();\r\n\r\n        // Get all related items and find index for clicked one\r\n        if ( value ) {\r\n            items = opts.selector ? $( opts.selector ) : ( e.data ? e.data.items : [] );\r\n            items = items.length ? items.filter( '[data-fancybox=\"' + value + '\"]' ) : $( '[data-fancybox=\"' + value + '\"]' );\r\n\r\n            index = items.index( $target );\r\n\r\n            // Sometimes current item can not be found\r\n            // (for example, when slider clones items)\r\n            if ( index < 0 ) {\r\n                index = 0;\r\n            }\r\n\r\n        } else {\r\n            items = [ $target ];\r\n        }\r\n\r\n        $.fancybox.open( items, opts, index );\r\n    }\r\n\r\n\r\n    // Create a jQuery plugin\r\n    // ======================\r\n\r\n    $.fn.fancybox = function (options) {\r\n        var selector;\r\n\r\n        options  = options || {};\r\n        selector = options.selector || false;\r\n\r\n        if ( selector ) {\r\n\r\n            $( 'body' ).off( 'click.fb-start', selector ).on( 'click.fb-start', selector, {\r\n                options : options\r\n            }, _run );\r\n\r\n        } else {\r\n\r\n            this.off( 'click.fb-start' ).on( 'click.fb-start', {\r\n                items   : this,\r\n                options : options\r\n            }, _run);\r\n\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n\r\n    // Self initializing plugin\r\n    // ========================\r\n\r\n    $D.on( 'click.fb-start', '[data-fancybox]', _run );\r\n\r\n}( window, document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// Media\r\n// Adds additional media type support\r\n//\r\n// ==========================================================================\r\n;(function ($) {\r\n\r\n\t'use strict';\r\n\r\n\t// Formats matching url to final form\r\n\r\n\tvar format = function (url, rez, params) {\r\n\t\tif ( !url ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tparams = params || '';\r\n\r\n\t\tif ( $.type(params) === \"object\" ) {\r\n\t\t\tparams = $.param(params, true);\r\n\t\t}\r\n\r\n\t\t$.each(rez, function (key, value) {\r\n\t\t\turl = url.replace('$' + key, value || '');\r\n\t\t});\r\n\r\n\t\tif (params.length) {\r\n\t\t\turl += (url.indexOf('?') > 0 ? '&' : '?') + params;\r\n\t\t}\r\n\r\n\t\treturn url;\r\n\t};\r\n\r\n\t// Object containing properties for each media type\r\n\r\n\tvar defaults = {\r\n\t\tyoutube : {\r\n\t\t\tmatcher : /(youtube\\.com|youtu\\.be|youtube\\-nocookie\\.com)\\/(watch\\?(.*&)?v=|v\\/|u\\/|embed\\/?)?(videoseries\\?list=(.*)|[\\w-]{11}|\\?listType=(.*)&list=(.*))(.*)/i,\r\n\t\t\tparams  : {\r\n\t\t\t\tautoplay : 1,\r\n\t\t\t\tautohide : 1,\r\n\t\t\t\tfs  : 1,\r\n\t\t\t\trel : 0,\r\n\t\t\t\thd  : 1,\r\n\t\t\t\twmode : 'transparent',\r\n\t\t\t\tenablejsapi : 1,\r\n\t\t\t\thtml5 : 1\r\n\t\t\t},\r\n\t\t\tparamPlace : 8,\r\n\t\t\ttype  : 'iframe',\r\n\t\t\turl   : '//www.youtube.com/embed/$4',\r\n\t\t\tthumb : '//img.youtube.com/vi/$4/hqdefault.jpg'\r\n\t\t},\r\n\r\n\t\tvimeo : {\r\n\t\t\tmatcher : /^.+vimeo.com\\/(.*\\/)?([\\d]+)(.*)?/,\r\n\t\t\tparams  : {\r\n\t\t\t\tautoplay : 1,\r\n\t\t\t\thd : 1,\r\n\t\t\t\tshow_title    : 1,\r\n\t\t\t\tshow_byline   : 1,\r\n\t\t\t\tshow_portrait : 0,\r\n\t\t\t\tfullscreen    : 1,\r\n\t\t\t\tapi : 1\r\n\t\t\t},\r\n\t\t\tparamPlace : 3,\r\n\t\t\ttype : 'iframe',\r\n\t\t\turl : '//player.vimeo.com/video/$2'\r\n\t\t},\r\n\r\n\t\tmetacafe : {\r\n\t\t\tmatcher : /metacafe.com\\/watch\\/(\\d+)\\/(.*)?/,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : '//www.metacafe.com/embed/$1/?ap=1'\r\n\t\t},\r\n\r\n\t\tdailymotion : {\r\n\t\t\tmatcher : /dailymotion.com\\/video\\/(.*)\\/?(.*)/,\r\n\t\t\tparams : {\r\n\t\t\t\tadditionalInfos : 0,\r\n\t\t\t\tautoStart : 1\r\n\t\t\t},\r\n\t\t\ttype : 'iframe',\r\n\t\t\turl  : '//www.dailymotion.com/embed/video/$1'\r\n\t\t},\r\n\r\n\t\tvine : {\r\n\t\t\tmatcher : /vine.co\\/v\\/([a-zA-Z0-9\\?\\=\\-]+)/,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : '//vine.co/v/$1/embed/simple'\r\n\t\t},\r\n\r\n\t\tinstagram : {\r\n\t\t\tmatcher : /(instagr\\.am|instagram\\.com)\\/p\\/([a-zA-Z0-9_\\-]+)\\/?/i,\r\n\t\t\ttype    : 'image',\r\n\t\t\turl     : '//$1/p/$2/media/?size=l'\r\n\t\t},\r\n\r\n\t\t// Examples:\r\n\t\t// http://maps.google.com/?ll=48.857995,2.294297&spn=0.007666,0.021136&t=m&z=16\r\n\t\t// https://www.google.com/maps/@37.7852006,-122.4146355,14.65z\r\n\t\t// https://www.google.com/maps/place/Googleplex/@37.4220041,-122.0833494,17z/data=!4m5!3m4!1s0x0:0x6c296c66619367e0!8m2!3d37.4219998!4d-122.0840572\r\n\t\tgmap_place : {\r\n\t\t\tmatcher : /(maps\\.)?google\\.([a-z]{2,3}(\\.[a-z]{2})?)\\/(((maps\\/(place\\/(.*)\\/)?\\@(.*),(\\d+.?\\d+?)z))|(\\?ll=))(.*)?/i,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : function (rez) {\r\n\t\t\t\treturn '//maps.google.' + rez[2] + '/?ll=' + ( rez[9] ? rez[9] + '&z=' + Math.floor(  rez[10]  ) + ( rez[12] ? rez[12].replace(/^\\//, \"&\") : '' )  : rez[12] ) + '&output=' + ( rez[12] && rez[12].indexOf('layer=c') > 0 ? 'svembed' : 'embed' );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Examples:\r\n\t\t// https://www.google.com/maps/search/Empire+State+Building/\r\n\t\t// https://www.google.com/maps/search/?api=1&query=centurylink+field\r\n\t\t// https://www.google.com/maps/search/?api=1&query=47.5951518,-122.3316393\r\n\t\tgmap_search : {\r\n\t\t\tmatcher : /(maps\\.)?google\\.([a-z]{2,3}(\\.[a-z]{2})?)\\/(maps\\/search\\/)(.*)/i,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : function (rez) {\r\n\t\t\t\treturn '//maps.google.' + rez[2] + '/maps?q=' + rez[5].replace('query=', 'q=').replace('api=1', '') + '&output=embed';\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t$(document).on('objectNeedsType.fb', function (e, instance, item) {\r\n\r\n\t\tvar url\t = item.src || '',\r\n\t\t\ttype = false,\r\n\t\t\tmedia,\r\n\t\t\tthumb,\r\n\t\t\trez,\r\n\t\t\tparams,\r\n\t\t\turlParams,\r\n\t\t\tparamObj,\r\n\t\t\tprovider;\r\n\r\n\t\tmedia = $.extend( true, {}, defaults, item.opts.media );\r\n\r\n\t\t// Look for any matching media type\r\n\t\t$.each(media, function ( providerName, providerOpts ) {\r\n\t\t\trez = url.match( providerOpts.matcher );\r\n\r\n\t\t\tif ( !rez ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\ttype     = providerOpts.type;\r\n\t\t\tparamObj = {};\r\n\r\n\t\t\tif ( providerOpts.paramPlace && rez[ providerOpts.paramPlace ] ) {\r\n\t\t\t\turlParams = rez[ providerOpts.paramPlace ];\r\n\r\n\t\t\t\tif ( urlParams[ 0 ] == '?' ) {\r\n\t\t\t\t\turlParams = urlParams.substring(1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\turlParams = urlParams.split('&');\r\n\r\n\t\t\t\tfor ( var m = 0; m < urlParams.length; ++m ) {\r\n\t\t\t\t\tvar p = urlParams[ m ].split('=', 2);\r\n\r\n\t\t\t\t\tif ( p.length == 2 ) {\r\n\t\t\t\t\t\tparamObj[ p[0] ] = decodeURIComponent( p[1].replace(/\\+/g, \" \") );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tparams = $.extend( true, {}, providerOpts.params, item.opts[ providerName ], paramObj );\r\n\r\n\t\t\turl   = $.type( providerOpts.url ) === \"function\" ? providerOpts.url.call( this, rez, params, item ) : format( providerOpts.url, rez, params );\r\n\t\t\tthumb = $.type( providerOpts.thumb ) === \"function\" ? providerOpts.thumb.call( this, rez, params, item ) : format( providerOpts.thumb, rez );\r\n\r\n\t\t\tif ( providerName === 'vimeo' ) {\r\n\t\t\t\turl = url.replace('&%23', '#');\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t// If it is found, then change content type and update the url\r\n\r\n\t\tif ( type ) {\r\n\t\t\titem.src  = url;\r\n\t\t\titem.type = type;\r\n\r\n\t\t\tif ( !item.opts.thumb && !( item.opts.$thumb && item.opts.$thumb.length ) ) {\r\n\t\t\t\titem.opts.thumb = thumb;\r\n\t\t\t}\r\n\r\n\t\t\tif ( type === 'iframe' ) {\r\n\t\t\t\t$.extend(true, item.opts, {\r\n\t\t\t\t\tiframe : {\r\n\t\t\t\t\t\tpreload : false,\r\n\t\t\t\t\t\tattr : {\r\n\t\t\t\t\t\t\tscrolling : \"no\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\titem.contentProvider = provider;\r\n\r\n\t\t\t\titem.opts.slideClass += ' fancybox-slide--' + ( provider == 'gmap_place' || provider == 'gmap_search' ? 'map' : 'video' );\r\n\t\t\t}\r\n\r\n\t\t} else if ( url ) {\r\n\t\t\titem.type = item.opts.defaultType;\r\n\t\t}\r\n\r\n\t});\r\n\r\n}( window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// Guestures\r\n// Adds touch guestures, handles click and tap events\r\n//\r\n// ==========================================================================\r\n;(function (window, document, $) {\r\n\t'use strict';\r\n\r\n\tvar requestAFrame = (function () {\r\n\t\treturn window.requestAnimationFrame ||\r\n\t\t\twindow.webkitRequestAnimationFrame ||\r\n\t\t\twindow.mozRequestAnimationFrame ||\r\n\t\t\twindow.oRequestAnimationFrame ||\r\n\t\t\t// if all else fails, use setTimeout\r\n\t\t\tfunction (callback) {\r\n\t\t\t\treturn window.setTimeout(callback, 1000 / 60);\r\n\t\t\t};\r\n\t})();\r\n\r\n\tvar cancelAFrame = (function () {\r\n\t\treturn window.cancelAnimationFrame ||\r\n\t\t\twindow.webkitCancelAnimationFrame ||\r\n\t\t\twindow.mozCancelAnimationFrame ||\r\n\t\t\twindow.oCancelAnimationFrame ||\r\n\t\t\tfunction (id) {\r\n\t\t\t\twindow.clearTimeout(id);\r\n\t\t\t};\r\n\t})();\r\n\r\n\tvar pointers = function( e ) {\r\n\t\tvar result = [];\r\n\r\n\t\te = e.originalEvent || e || window.e;\r\n\t\te = e.touches && e.touches.length ? e.touches : ( e.changedTouches && e.changedTouches.length ? e.changedTouches : [ e ] );\r\n\r\n\t\tfor ( var key in e ) {\r\n\r\n\t\t\tif ( e[ key ].pageX ) {\r\n\t\t\t\tresult.push( { x : e[ key ].pageX, y : e[ key ].pageY } );\r\n\r\n\t\t\t} else if ( e[ key ].clientX ) {\r\n\t\t\t\tresult.push( { x : e[ key ].clientX, y : e[ key ].clientY } );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t};\r\n\r\n\tvar distance = function( point2, point1, what ) {\r\n\t\tif ( !point1 || !point2 ) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tif ( what === 'x' ) {\r\n\t\t\treturn point2.x - point1.x;\r\n\r\n\t\t} else if ( what === 'y' ) {\r\n\t\t\treturn point2.y - point1.y;\r\n\t\t}\r\n\r\n\t\treturn Math.sqrt( Math.pow( point2.x - point1.x, 2 ) + Math.pow( point2.y - point1.y, 2 ) );\r\n\t};\r\n\r\n\tvar isClickable = function( $el ) {\r\n\t\tif ( $el.is('a,area,button,[role=\"button\"],input,label,select,summary,textarea') || $.isFunction( $el.get(0).onclick ) || $el.data('selectable') ) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// Check for attributes like data-fancybox-next or data-fancybox-close\r\n\t\tfor ( var i = 0, atts = $el[0].attributes, n = atts.length; i < n; i++ ) {\r\n\t\t\tif ( atts[i].nodeName.substr(0, 14) === 'data-fancybox-' ) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t \treturn false;\r\n\t};\r\n\r\n\tvar hasScrollbars = function( el ) {\r\n\t\tvar overflowY = window.getComputedStyle( el )['overflow-y'];\r\n\t\tvar overflowX = window.getComputedStyle( el )['overflow-x'];\r\n\r\n\t\tvar vertical   = (overflowY === 'scroll' || overflowY === 'auto') && el.scrollHeight > el.clientHeight;\r\n\t\tvar horizontal = (overflowX === 'scroll' || overflowX === 'auto') && el.scrollWidth > el.clientWidth;\r\n\r\n\t\treturn vertical || horizontal;\r\n\t};\r\n\r\n\tvar isScrollable = function ( $el ) {\r\n\t\tvar rez = false;\r\n\r\n\t\twhile ( true ) {\r\n\t\t\trez\t= hasScrollbars( $el.get(0) );\r\n\r\n\t\t\tif ( rez ) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\t$el = $el.parent();\r\n\r\n\t\t\tif ( !$el.length || $el.hasClass( 'fancybox-stage' ) || $el.is( 'body' ) ) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn rez;\r\n\t};\r\n\r\n\r\n\tvar Guestures = function ( instance ) {\r\n\t\tvar self = this;\r\n\r\n\t\tself.instance = instance;\r\n\r\n\t\tself.$bg        = instance.$refs.bg;\r\n\t\tself.$stage     = instance.$refs.stage;\r\n\t\tself.$container = instance.$refs.container;\r\n\r\n\t\tself.destroy();\r\n\r\n\t\tself.$container.on( 'touchstart.fb.touch mousedown.fb.touch', $.proxy(self, 'ontouchstart') );\r\n\t};\r\n\r\n\tGuestures.prototype.destroy = function() {\r\n\t\tthis.$container.off( '.fb.touch' );\r\n\t};\r\n\r\n\tGuestures.prototype.ontouchstart = function( e ) {\r\n\t\tvar self = this;\r\n\r\n\t\tvar $target  = $( e.target );\r\n\t\tvar instance = self.instance;\r\n\t\tvar current  = instance.current;\r\n\t\tvar $content = current.$content;\r\n\r\n\t\tvar isTouchDevice = ( e.type == 'touchstart' );\r\n\r\n\t\t// Do not respond to both (touch and mouse) events\r\n\t\tif ( isTouchDevice ) {\r\n\t\t\tself.$container.off( 'mousedown.fb.touch' );\r\n\t\t}\r\n\r\n\t\t// Ignore right click\r\n\t\tif ( e.originalEvent && e.originalEvent.button == 2 ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore taping on links, buttons, input elements\r\n\t\tif ( !$target.length || isClickable( $target ) || isClickable( $target.parent() ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore clicks on the scrollbar\r\n\t\tif ( !$target.is('img') && e.originalEvent.clientX > $target[0].clientWidth + $target.offset().left ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore clicks while zooming or closing\r\n\t\tif ( !current || self.instance.isAnimating || self.instance.isClosing ) {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tself.realPoints = self.startPoints = pointers( e );\r\n\r\n\t\tif ( !self.startPoints ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\te.stopPropagation();\r\n\r\n\t\tself.startEvent = e;\r\n\r\n\t\tself.canTap   = true;\r\n\t\tself.$target  = $target;\r\n\t\tself.$content = $content;\r\n\t\tself.opts     = current.opts.touch;\r\n\r\n\t\tself.isPanning   = false;\r\n\t\tself.isSwiping   = false;\r\n\t\tself.isZooming   = false;\r\n\t\tself.isScrolling = false;\r\n\r\n\t\tself.sliderStartPos  = self.sliderLastPos || { top: 0, left: 0 };\r\n\t\tself.contentStartPos = $.fancybox.getTranslate( self.$content );\r\n\t\tself.contentLastPos  = null;\r\n\r\n\t\tself.startTime = new Date().getTime();\r\n\t\tself.distanceX = self.distanceY = self.distance = 0;\r\n\r\n\t\tself.canvasWidth  = Math.round( current.$slide[0].clientWidth );\r\n\t\tself.canvasHeight = Math.round( current.$slide[0].clientHeight );\r\n\r\n\t\t$(document)\r\n\t\t\t.off( '.fb.touch' )\r\n\t\t\t.on( isTouchDevice ? 'touchend.fb.touch touchcancel.fb.touch' : 'mouseup.fb.touch mouseleave.fb.touch', $.proxy(self, \"ontouchend\"))\r\n\t\t\t.on( isTouchDevice ? 'touchmove.fb.touch' : 'mousemove.fb.touch', $.proxy(self, \"ontouchmove\"));\r\n\r\n\t\tif ( $.fancybox.isMobile ) {\r\n\t\t\tdocument.addEventListener('scroll', self.onscroll, true);\r\n\t\t}\r\n\r\n\t\tif ( !(self.opts || instance.canPan() ) || !( $target.is( self.$stage ) || self.$stage.find( $target ).length ) ) {\r\n\r\n\t\t\t// Prevent image ghosting while dragging\r\n\t\t\tif ( $target.is('img') ) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( !( $.fancybox.isMobile && ( isScrollable( $target ) || isScrollable( $target.parent() ) ) ) ) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tif ( self.startPoints.length === 1 ) {\r\n\t\t\tif ( current.type === 'image' && ( self.contentStartPos.width > self.canvasWidth + 1 || self.contentStartPos.height > self.canvasHeight + 1 ) ) {\r\n\t\t\t\t$.fancybox.stop( self.$content );\r\n\r\n\t\t\t\tself.$content.css( 'transition-duration', '' );\r\n\r\n\t\t\t\tself.isPanning = true;\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.isSwiping = true;\r\n\t\t\t}\r\n\r\n\t\t\tself.$container.addClass( 'fancybox-controls--isGrabbing' );\r\n\t\t}\r\n\r\n\t\tif ( self.startPoints.length === 2 && !instance.isAnimating && !current.hasError && current.type === 'image' && ( current.isLoaded || current.$ghost ) ) {\r\n\t\t\tself.canTap    = false;\r\n\t\t\tself.isSwiping = false;\r\n\t\t\tself.isPanning = false;\r\n\r\n\t\t\tself.isZooming = true;\r\n\r\n\t\t\t$.fancybox.stop( self.$content );\r\n\r\n\t\t\tself.$content.css( 'transition-duration', '' );\r\n\r\n\t\t\tself.centerPointStartX = ( ( self.startPoints[0].x + self.startPoints[1].x ) * 0.5 ) - $(window).scrollLeft();\r\n\t\t\tself.centerPointStartY = ( ( self.startPoints[0].y + self.startPoints[1].y ) * 0.5 ) - $(window).scrollTop();\r\n\r\n\t\t\tself.percentageOfImageAtPinchPointX = ( self.centerPointStartX - self.contentStartPos.left ) / self.contentStartPos.width;\r\n\t\t\tself.percentageOfImageAtPinchPointY = ( self.centerPointStartY - self.contentStartPos.top  ) / self.contentStartPos.height;\r\n\r\n\t\t\tself.startDistanceBetweenFingers = distance( self.startPoints[0], self.startPoints[1] );\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onscroll = function(e) {\r\n\t\tself.isScrolling = true;\r\n\t};\r\n\r\n\tGuestures.prototype.ontouchmove = function( e ) {\r\n\t\tvar self = this,\r\n\t\t\t$target = $(e.target);\r\n\r\n\t\tif ( self.isScrolling || !( $target.is( self.$stage ) || self.$stage.find( $target ).length ) ) {\r\n\t\t\tself.canTap = false;\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tself.newPoints = pointers( e );\r\n\r\n\t\tif ( !( self.opts || self.instance.canPan() ) || !self.newPoints || !self.newPoints.length ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( !(self.isSwiping && self.isSwiping === true) ) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tself.distanceX = distance( self.newPoints[0], self.startPoints[0], 'x' );\r\n\t\tself.distanceY = distance( self.newPoints[0], self.startPoints[0], 'y' );\r\n\r\n\t\tself.distance = distance( self.newPoints[0], self.startPoints[0] )\r\n\r\n\t\t// Skip false ontouchmove events (Chrome)\r\n\t\tif ( self.distance > 0 ) {\r\n\t\t\tif ( self.isSwiping ) {\r\n\t\t\t\tself.onSwipe(e);\r\n\r\n\t\t\t} else if ( self.isPanning ) {\r\n\t\t\t\tself.onPan();\r\n\r\n\t\t\t} else if ( self.isZooming ) {\r\n\t\t\t\tself.onZoom();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onSwipe = function(e) {\r\n\t\tvar self = this,\r\n\t\t\tswiping = self.isSwiping,\r\n\t\t\tleft    = self.sliderStartPos.left || 0,\r\n\t\t\tangle;\r\n\r\n\t\t// If direction is not yet determined\r\n\t\tif ( swiping === true ) {\r\n\r\n\t\t\t// We need at least 10px distance to correctly calculate an angle\r\n\t\t\tif ( Math.abs( self.distance ) > 10 ) {\r\n\t\t\t\tself.canTap = false;\r\n\r\n\t\t\t\tif ( self.instance.group.length < 2 && self.opts.vertical ) {\r\n\t\t\t\t\tself.isSwiping = 'y';\r\n\r\n\t\t\t\t} else if ( self.instance.isDragging || self.opts.vertical === false || ( self.opts.vertical === 'auto' && $( window ).width() > 800 ) ) {\r\n\t\t\t\t\tself.isSwiping = 'x';\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tangle = Math.abs( Math.atan2( self.distanceY, self.distanceX ) * 180 / Math.PI );\r\n\r\n\t\t\t\t\tself.isSwiping = ( angle > 45 && angle < 135 ) ? 'y' : 'x';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.canTap = false;\r\n\r\n\t\t\t\t if ( self.isSwiping === 'y' && $.fancybox.isMobile && ( isScrollable( self.$target ) || isScrollable( self.$target.parent() ) ) ) {\r\n\t\t\t\t\t self.isScrolling = true;\r\n\r\n\t\t\t\t\t return;\r\n\t\t\t\t }\r\n\r\n\t\t\t\tself.instance.isDragging = self.isSwiping;\r\n\r\n\t\t\t\t// Reset points to avoid jumping, because we dropped first swipes to calculate the angle\r\n\t\t\t\tself.startPoints = self.newPoints;\r\n\r\n\t\t\t\t$.each(self.instance.slides, function( index, slide ) {\r\n\t\t\t\t\t$.fancybox.stop( slide.$slide );\r\n\r\n\t\t\t\t\tslide.$slide.css( 'transition-duration', '' );\r\n\r\n\t\t\t\t\tslide.inTransition = false;\r\n\r\n\t\t\t\t\tif ( slide.pos === self.instance.current.pos ) {\r\n\t\t\t\t\t\tself.sliderStartPos.left = $.fancybox.getTranslate( slide.$slide ).left;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Stop slideshow\r\n\t\t\t\tif ( self.instance.SlideShow && self.instance.SlideShow.isActive ) {\r\n\t\t\t\t\tself.instance.SlideShow.stop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Sticky edges\r\n\t\tif ( swiping == 'x' ) {\r\n\t\t\tif ( self.distanceX > 0 && ( self.instance.group.length < 2 || ( self.instance.current.index === 0 && !self.instance.current.opts.loop ) ) ) {\r\n\t\t\t\tleft = left + Math.pow( self.distanceX, 0.8 );\r\n\r\n\t\t\t} else if ( self.distanceX < 0 && ( self.instance.group.length < 2 || ( self.instance.current.index === self.instance.group.length - 1 && !self.instance.current.opts.loop ) ) ) {\r\n\t\t\t\tleft = left - Math.pow( -self.distanceX, 0.8 );\r\n\r\n\t\t\t} else {\r\n\t\t\t\tleft = left + self.distanceX;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tself.sliderLastPos = {\r\n\t\t\ttop  : swiping == 'x' ? 0 : self.sliderStartPos.top + self.distanceY,\r\n\t\t\tleft : left\r\n\t\t};\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.requestId = requestAFrame(function() {\r\n\r\n\t\t\tif ( self.sliderLastPos ) {\r\n\t\t\t\t$.each(self.instance.slides, function( index, slide ) {\r\n\t\t\t\t\tvar pos = slide.pos - self.instance.currPos;\r\n\r\n\t\t\t\t\t$.fancybox.setTranslate( slide.$slide, {\r\n\t\t\t\t\t\ttop  : self.sliderLastPos.top,\r\n\t\t\t\t\t\tleft : self.sliderLastPos.left + ( pos * self.canvasWidth ) + ( pos * slide.opts.gutter )\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tself.$container.addClass( 'fancybox-is-sliding' );\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onPan = function() {\r\n\t\tvar self = this;\r\n\r\n\t\t// Sometimes, when tapping causally, image can move a bit and that breaks double tapping\r\n\t\tif ( distance( self.newPoints[0], self.realPoints[0] ) < ($.fancybox.isMobile ? 10 : 5) ) {\r\n\t\t\tself.startPoints = self.newPoints;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tself.canTap = false;\r\n\r\n\t\tself.contentLastPos = self.limitMovement();\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.requestId = requestAFrame(function() {\r\n\t\t\t$.fancybox.setTranslate( self.$content, self.contentLastPos );\r\n\t\t});\r\n\t};\r\n\r\n\t// Make panning sticky to the edges\r\n\tGuestures.prototype.limitMovement = function() {\r\n\t\tvar self = this;\r\n\r\n\t\tvar canvasWidth  = self.canvasWidth;\r\n\t\tvar canvasHeight = self.canvasHeight;\r\n\r\n\t\tvar distanceX = self.distanceX;\r\n\t\tvar distanceY = self.distanceY;\r\n\r\n\t\tvar contentStartPos = self.contentStartPos;\r\n\r\n\t\tvar currentOffsetX = contentStartPos.left;\r\n\t\tvar currentOffsetY = contentStartPos.top;\r\n\r\n\t\tvar currentWidth  = contentStartPos.width;\r\n\t\tvar currentHeight = contentStartPos.height;\r\n\r\n\t\tvar minTranslateX, minTranslateY,\r\n\t\t\tmaxTranslateX, maxTranslateY,\r\n\t\t\tnewOffsetX, newOffsetY;\r\n\r\n\t\tif ( currentWidth > canvasWidth ) {\r\n\t\t\tnewOffsetX = currentOffsetX + distanceX;\r\n\r\n\t\t} else {\r\n\t\t\tnewOffsetX = currentOffsetX;\r\n\t\t}\r\n\r\n\t\tnewOffsetY = currentOffsetY + distanceY;\r\n\r\n\t\t// Slow down proportionally to traveled distance\r\n\t\tminTranslateX = Math.max( 0, canvasWidth  * 0.5 - currentWidth  * 0.5 );\r\n\t\tminTranslateY = Math.max( 0, canvasHeight * 0.5 - currentHeight * 0.5 );\r\n\r\n\t\tmaxTranslateX = Math.min( canvasWidth  - currentWidth,  canvasWidth  * 0.5 - currentWidth  * 0.5 );\r\n\t\tmaxTranslateY = Math.min( canvasHeight - currentHeight, canvasHeight * 0.5 - currentHeight * 0.5 );\r\n\r\n\t\tif ( currentWidth > canvasWidth ) {\r\n\r\n\t\t\t//   ->\r\n\t\t\tif ( distanceX > 0 && newOffsetX > minTranslateX ) {\r\n\t\t\t\tnewOffsetX = minTranslateX - 1 + Math.pow( -minTranslateX + currentOffsetX + distanceX, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t\t//    <-\r\n\t\t\tif ( distanceX < 0 && newOffsetX < maxTranslateX ) {\r\n\t\t\t\tnewOffsetX = maxTranslateX + 1 - Math.pow( maxTranslateX - currentOffsetX - distanceX, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( currentHeight > canvasHeight ) {\r\n\r\n\t\t\t//   \\/\r\n\t\t\tif ( distanceY > 0 && newOffsetY > minTranslateY ) {\r\n\t\t\t\tnewOffsetY = minTranslateY - 1 + Math.pow(-minTranslateY + currentOffsetY + distanceY, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t\t//   /\\\r\n\t\t\tif ( distanceY < 0 && newOffsetY < maxTranslateY ) {\r\n\t\t\t\tnewOffsetY = maxTranslateY + 1 - Math.pow ( maxTranslateY - currentOffsetY - distanceY, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttop    : newOffsetY,\r\n\t\t\tleft   : newOffsetX,\r\n\t\t\tscaleX : contentStartPos.scaleX,\r\n\t\t\tscaleY : contentStartPos.scaleY\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.limitPosition = function( newOffsetX, newOffsetY, newWidth, newHeight ) {\r\n\t\tvar self = this;\r\n\r\n\t\tvar canvasWidth  = self.canvasWidth;\r\n\t\tvar canvasHeight = self.canvasHeight;\r\n\r\n\t\tif ( newWidth > canvasWidth ) {\r\n\t\t\tnewOffsetX = newOffsetX > 0 ? 0 : newOffsetX;\r\n\t\t\tnewOffsetX = newOffsetX < canvasWidth - newWidth ? canvasWidth - newWidth : newOffsetX;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Center horizontally\r\n\t\t\tnewOffsetX = Math.max( 0, canvasWidth / 2 - newWidth / 2 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( newHeight > canvasHeight ) {\r\n\t\t\tnewOffsetY = newOffsetY > 0 ? 0 : newOffsetY;\r\n\t\t\tnewOffsetY = newOffsetY < canvasHeight - newHeight ? canvasHeight - newHeight : newOffsetY;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Center vertically\r\n\t\t\tnewOffsetY = Math.max( 0, canvasHeight / 2 - newHeight / 2 );\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttop  : newOffsetY,\r\n\t\t\tleft : newOffsetX\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onZoom = function() {\r\n\t\tvar self = this;\r\n\r\n\t\t// Calculate current distance between points to get pinch ratio and new width and height\r\n\r\n\t\tvar currentWidth  = self.contentStartPos.width;\r\n\t\tvar currentHeight = self.contentStartPos.height;\r\n\r\n\t\tvar currentOffsetX = self.contentStartPos.left;\r\n\t\tvar currentOffsetY = self.contentStartPos.top;\r\n\r\n\t\tvar endDistanceBetweenFingers = distance( self.newPoints[0], self.newPoints[1] );\r\n\r\n\t\tvar pinchRatio = endDistanceBetweenFingers / self.startDistanceBetweenFingers;\r\n\r\n\t\tvar newWidth  = Math.floor( currentWidth  * pinchRatio );\r\n\t\tvar newHeight = Math.floor( currentHeight * pinchRatio );\r\n\r\n\t\t// This is the translation due to pinch-zooming\r\n\t\tvar translateFromZoomingX = (currentWidth  - newWidth)  * self.percentageOfImageAtPinchPointX;\r\n\t\tvar translateFromZoomingY = (currentHeight - newHeight) * self.percentageOfImageAtPinchPointY;\r\n\r\n\t\t//Point between the two touches\r\n\r\n\t\tvar centerPointEndX = ((self.newPoints[0].x + self.newPoints[1].x) / 2) - $(window).scrollLeft();\r\n\t\tvar centerPointEndY = ((self.newPoints[0].y + self.newPoints[1].y) / 2) - $(window).scrollTop();\r\n\r\n\t\t// And this is the translation due to translation of the centerpoint\r\n\t\t// between the two fingers\r\n\r\n\t\tvar translateFromTranslatingX = centerPointEndX - self.centerPointStartX;\r\n\t\tvar translateFromTranslatingY = centerPointEndY - self.centerPointStartY;\r\n\r\n\t\t// The new offset is the old/current one plus the total translation\r\n\r\n\t\tvar newOffsetX = currentOffsetX + ( translateFromZoomingX + translateFromTranslatingX );\r\n\t\tvar newOffsetY = currentOffsetY + ( translateFromZoomingY + translateFromTranslatingY );\r\n\r\n\t\tvar newPos = {\r\n\t\t\ttop    : newOffsetY,\r\n\t\t\tleft   : newOffsetX,\r\n\t\t\tscaleX : self.contentStartPos.scaleX * pinchRatio,\r\n\t\t\tscaleY : self.contentStartPos.scaleY * pinchRatio\r\n\t\t};\r\n\r\n\t\tself.canTap = false;\r\n\r\n\t\tself.newWidth  = newWidth;\r\n\t\tself.newHeight = newHeight;\r\n\r\n\t\tself.contentLastPos = newPos;\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.requestId = requestAFrame(function() {\r\n\t\t\t$.fancybox.setTranslate( self.$content, self.contentLastPos );\r\n\t\t});\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.ontouchend = function( e ) {\r\n\t\tvar self = this;\r\n\t\tvar dMs  = Math.max( (new Date().getTime() ) - self.startTime, 1);\r\n\r\n\t\tvar swiping   = self.isSwiping;\r\n\t\tvar panning   = self.isPanning;\r\n\t\tvar zooming   = self.isZooming;\r\n\t\tvar scrolling = self.isScrolling;\r\n\r\n\t\tself.endPoints = pointers( e );\r\n\r\n\t\tself.$container.removeClass( 'fancybox-controls--isGrabbing' );\r\n\r\n\t\t$(document).off( '.fb.touch' );\r\n\r\n\t\tdocument.removeEventListener('scroll', self.onscroll, true);\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.isSwiping   = false;\r\n\t\tself.isPanning   = false;\r\n\t\tself.isZooming   = false;\r\n\t\tself.isScrolling = false;\r\n\r\n\t\tself.instance.isDragging = false;\r\n\r\n\t\tif ( self.canTap ) {\r\n\t\t\treturn self.onTap( e );\r\n\t\t}\r\n\r\n\t\tself.speed = 366;\r\n\r\n\t\t// Speed in px/ms\r\n\t\tself.velocityX = self.distanceX / dMs * 0.5;\r\n\t\tself.velocityY = self.distanceY / dMs * 0.5;\r\n\r\n\t\tself.speedX = Math.max( self.speed * 0.5, Math.min( self.speed * 1.5, ( 1 / Math.abs( self.velocityX ) ) * self.speed ) );\r\n\r\n\t\tif ( panning ) {\r\n\t\t\tself.endPanning();\r\n\r\n\t\t} else if ( zooming ) {\r\n\t\t\tself.endZooming();\r\n\r\n\t\t} else {\r\n\t\t\tself.endSwiping( swiping, scrolling );\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t};\r\n\r\n\tGuestures.prototype.endSwiping = function( swiping, scrolling ) {\r\n\t\tvar self = this,\r\n\t\t\tret  = false,\r\n\t\t\tlen  = self.instance.group.length;\r\n\r\n\t\tself.sliderLastPos = null;\r\n\r\n\t\t// Close if swiped vertically / navigate if horizontally\r\n\t\tif ( swiping == 'y' && !scrolling && Math.abs( self.distanceY ) > 50 ) {\r\n\r\n\t\t\t// Continue vertical movement\r\n\t\t\t$.fancybox.animate( self.instance.current.$slide, {\r\n\t\t\t\ttop     : self.sliderStartPos.top + self.distanceY + ( self.velocityY * 150 ),\r\n\t\t\t\topacity : 0\r\n\t\t\t}, 150 );\r\n\r\n\t\t\tret = self.instance.close( true, 300 );\r\n\r\n\t\t} else if ( swiping == 'x' && self.distanceX > 50 && len > 1 ) {\r\n\t\t\tret = self.instance.previous( self.speedX );\r\n\r\n\t\t} else if ( swiping == 'x' && self.distanceX < -50 && len > 1 ) {\r\n\t\t\tret = self.instance.next( self.speedX );\r\n\t\t}\r\n\r\n\t\tif ( ret === false && ( swiping == 'x' || swiping == 'y' ) ) {\r\n\t\t\tif ( scrolling || len < 2 ) {\r\n\t\t\t\tself.instance.centerSlide( self.instance.current, 150 );\r\n\t\t\t} else {\r\n\t\t\t\tself.instance.jumpTo( self.instance.current.index );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tself.$container.removeClass( 'fancybox-is-sliding' );\r\n\r\n\t};\r\n\r\n\t// Limit panning from edges\r\n\t// ========================\r\n\r\n\tGuestures.prototype.endPanning = function() {\r\n\r\n\t\tvar self = this;\r\n\t\tvar newOffsetX, newOffsetY, newPos;\r\n\r\n\t\tif ( !self.contentLastPos ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( self.opts.momentum === false ) {\r\n\t\t\tnewOffsetX = self.contentLastPos.left;\r\n\t\t\tnewOffsetY = self.contentLastPos.top;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Continue movement\r\n\t\t\tnewOffsetX = self.contentLastPos.left + ( self.velocityX * self.speed );\r\n\t\t\tnewOffsetY = self.contentLastPos.top  + ( self.velocityY * self.speed );\r\n\t\t}\r\n\r\n\t\tnewPos = self.limitPosition( newOffsetX, newOffsetY, self.contentStartPos.width, self.contentStartPos.height );\r\n\r\n\t\t newPos.width  = self.contentStartPos.width;\r\n\t\t newPos.height = self.contentStartPos.height;\r\n\r\n\t\t$.fancybox.animate( self.$content, newPos, 330 );\r\n\t};\r\n\r\n\r\n\tGuestures.prototype.endZooming = function() {\r\n\t\tvar self = this;\r\n\r\n\t\tvar current = self.instance.current;\r\n\r\n\t\tvar newOffsetX, newOffsetY, newPos, reset;\r\n\r\n\t\tvar newWidth  = self.newWidth;\r\n\t\tvar newHeight = self.newHeight;\r\n\r\n\t\tif ( !self.contentLastPos ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tnewOffsetX = self.contentLastPos.left;\r\n\t\tnewOffsetY = self.contentLastPos.top;\r\n\r\n\t\treset = {\r\n\t\t\ttop    : newOffsetY,\r\n\t\t\tleft   : newOffsetX,\r\n\t\t\twidth  : newWidth,\r\n\t\t\theight : newHeight,\r\n\t\t\tscaleX : 1,\r\n\t\t\tscaleY : 1\r\n\t\t};\r\n\r\n\t\t// Reset scalex/scaleY values; this helps for perfomance and does not break animation\r\n\t\t$.fancybox.setTranslate( self.$content, reset );\r\n\r\n\t\tif ( newWidth < self.canvasWidth && newHeight < self.canvasHeight ) {\r\n\t\t\tself.instance.scaleToFit( 150 );\r\n\r\n\t\t} else if ( newWidth > current.width || newHeight > current.height ) {\r\n\t\t\tself.instance.scaleToActual( self.centerPointStartX, self.centerPointStartY, 150 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnewPos = self.limitPosition( newOffsetX, newOffsetY, newWidth, newHeight );\r\n\r\n\t\t\t// Switch from scale() to width/height or animation will not work correctly\r\n\t\t\t$.fancybox.setTranslate( self.content, $.fancybox.getTranslate( self.$content ) );\r\n\r\n\t\t\t$.fancybox.animate( self.$content, newPos, 150 );\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onTap = function(e) {\r\n\t\tvar self    = this;\r\n\t\tvar $target = $( e.target );\r\n\r\n\t\tvar instance = self.instance;\r\n\t\tvar current  = instance.current;\r\n\r\n\t\tvar endPoints = ( e && pointers( e ) ) || self.startPoints;\r\n\r\n\t\tvar tapX = endPoints[0] ? endPoints[0].x - self.$stage.offset().left : 0;\r\n\t\tvar tapY = endPoints[0] ? endPoints[0].y - self.$stage.offset().top  : 0;\r\n\r\n\t\tvar where;\r\n\r\n\t\tvar process = function ( prefix ) {\r\n\r\n\t\t\tvar action = current.opts[ prefix ];\r\n\r\n\t\t\tif ( $.isFunction( action ) ) {\r\n\t\t\t\taction = action.apply( instance, [ current, e ] );\r\n\t\t\t}\r\n\r\n\t\t\tif ( !action) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( action ) {\r\n\r\n\t\t\t\tcase \"close\" :\r\n\r\n\t\t\t\t\tinstance.close( self.startEvent );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"toggleControls\" :\r\n\r\n\t\t\t\t\tinstance.toggleControls( true );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"next\" :\r\n\r\n\t\t\t\t\tinstance.next();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"nextOrClose\" :\r\n\r\n\t\t\t\t\tif ( instance.group.length > 1 ) {\r\n\t\t\t\t\t\tinstance.next();\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tinstance.close( self.startEvent );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"zoom\" :\r\n\r\n\t\t\t\t\tif ( current.type == 'image' && ( current.isLoaded || current.$ghost ) ) {\r\n\r\n\t\t\t\t\t\tif ( instance.canPan() ) {\r\n\t\t\t\t\t\t\tinstance.scaleToFit();\r\n\r\n\t\t\t\t\t\t} else if ( instance.isScaledDown() ) {\r\n\t\t\t\t\t\t\tinstance.scaleToActual( tapX, tapY );\r\n\r\n\t\t\t\t\t\t} else if ( instance.group.length < 2 ) {\r\n\t\t\t\t\t\t\tinstance.close( self.startEvent );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\t// Ignore right click\r\n\t\tif ( e.originalEvent && e.originalEvent.button == 2 ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Skip if clicked on the scrollbar\r\n\t\tif ( !$target.is('img') && tapX > $target[0].clientWidth + $target.offset().left ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Check where is clicked\r\n\t\tif ( $target.is( '.fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container' ) ) {\r\n\t\t\twhere = 'Outside';\r\n\r\n\t\t} else if ( $target.is( '.fancybox-slide' ) ) {\r\n\t\t\twhere = 'Slide';\r\n\r\n\t\t} else if ( instance.current.$content && instance.current.$content.find( $target ).addBack().filter( $target ).length ) {\r\n\t\t \twhere = 'Content';\r\n\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Check if this is a double tap\r\n\t\tif ( self.tapped ) {\r\n\r\n\t\t\t// Stop previously created single tap\r\n\t\t\tclearTimeout( self.tapped );\r\n\t\t\tself.tapped = null;\r\n\r\n\t\t\t// Skip if distance between taps is too big\r\n\t\t\tif ( Math.abs( tapX - self.tapX ) > 50 || Math.abs( tapY - self.tapY ) > 50 ) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\r\n\t\t\t// OK, now we assume that this is a double-tap\r\n\t\t\tprocess( 'dblclick' + where );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Single tap will be processed if user has not clicked second time within 300ms\r\n\t\t\t// or there is no need to wait for double-tap\r\n\t\t\tself.tapX = tapX;\r\n\t\t\tself.tapY = tapY;\r\n\r\n\t\t\tif ( current.opts[ 'dblclick' + where ] && current.opts[ 'dblclick' + where ] !== current.opts[ 'click' + where ] ) {\r\n\r\n\t\t\t\tself.tapped = setTimeout(function() {\r\n\t\t\t\t\tself.tapped = null;\r\n\r\n\t\t\t\t\tprocess( 'click' + where );\r\n\r\n\t\t\t\t}, 500);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocess( 'click' + where );\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t};\r\n\r\n\t$(document).on('onActivate.fb', function (e, instance) {\r\n\t\tif ( instance && !instance.Guestures ) {\r\n\t\t\tinstance.Guestures = new Guestures( instance );\r\n\t\t}\r\n\t});\r\n\r\n}( window, document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// SlideShow\r\n// Enables slideshow functionality\r\n//\r\n// Example of usage:\r\n// $.fancybox.getInstance().SlideShow.start()\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\t$.extend(true, $.fancybox.defaults, {\r\n\t\tbtnTpl : {\r\n\t\t\tslideShow :\r\n\t\t\t\t'<button data-fancybox-play class=\"fancybox-button fancybox-button--play\" title=\"{{PLAY_START}}\">' +\r\n\t\t\t\t\t'<svg viewBox=\"0 0 40 40\">' +\r\n\t\t\t\t\t\t'<path d=\"M13,12 L27,20 L13,27 Z\" />' +\r\n\t\t\t\t\t\t'<path d=\"M15,10 v19 M23,10 v19\" />' +\r\n\t\t\t\t\t'</svg>' +\r\n\t\t\t\t'</button>'\r\n\t\t},\r\n\t\tslideShow : {\r\n\t\t\tautoStart : false,\r\n            speed     : 3000\r\n\t\t}\r\n\t});\r\n\r\n\tvar SlideShow = function( instance ) {\r\n\t\tthis.instance = instance;\r\n\t\tthis.init();\r\n\t};\r\n\r\n\t$.extend( SlideShow.prototype, {\r\n\t\ttimer    : null,\r\n\t\tisActive : false,\r\n\t\t$button  : null,\r\n\r\n\t\tinit : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tself.$button = self.instance.$refs.toolbar.find('[data-fancybox-play]').on('click', function() {\r\n\t\t\t\tself.toggle();\r\n\t\t\t});\r\n\r\n\t\t\tif ( self.instance.group.length < 2 || !self.instance.group[ self.instance.currIndex ].opts.slideShow ) {\r\n\t\t\t\tself.$button.hide();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tset : function( force ) {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\t// Check if reached last element\r\n\t\t\tif ( self.instance && self.instance.current && (force === true || self.instance.current.opts.loop || self.instance.currIndex < self.instance.group.length - 1 )) {\r\n\t\t\t\tself.timer = setTimeout(function() {\r\n\t\t\t\t\tif ( self.isActive ) {\r\n\t\t\t\t\t\tself.instance.jumpTo( (self.instance.currIndex + 1) % self.instance.group.length );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}, self.instance.current.opts.slideShow.speed);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.stop();\r\n\t\t\t\tself.instance.idleSecondsCounter = 0;\r\n\t\t\t\tself.instance.showControls();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclear : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tclearTimeout( self.timer );\r\n\r\n\t\t\tself.timer = null;\r\n\t\t},\r\n\r\n\t\tstart : function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar current = self.instance.current;\r\n\r\n\t\t\tif ( current ) {\r\n\t\t\t\tself.isActive = true;\r\n\r\n\t\t\t\tself.$button\r\n\t\t\t\t\t.attr( 'title', current.opts.i18n[ current.opts.lang ].PLAY_STOP )\r\n\t\t\t\t\t.removeClass( 'fancybox-button--play' )\r\n\t\t\t\t\t.addClass( 'fancybox-button--pause' );\r\n\r\n\t\t\t\t\tself.set( true );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tstop : function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar current = self.instance.current;\r\n\r\n\t\t\tself.clear();\r\n\r\n\t\t\tself.$button\r\n\t\t\t\t.attr( 'title', current.opts.i18n[ current.opts.lang ].PLAY_START )\r\n\t\t\t\t.removeClass( 'fancybox-button--pause' )\r\n\t\t\t\t.addClass( 'fancybox-button--play' );\r\n\r\n\t\t\tself.isActive = false;\r\n\t\t},\r\n\r\n\t\ttoggle : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tif ( self.isActive ) {\r\n\t\t\t\tself.stop();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.start();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(document).on({\r\n\t\t'onInit.fb' : function(e, instance) {\r\n\t\t\tif ( instance && !instance.SlideShow ) {\r\n\t\t\t\tinstance.SlideShow = new SlideShow( instance );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeShow.fb' : function(e, instance, current, firstRun) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\tif ( firstRun ) {\r\n\r\n\t\t\t\tif ( SlideShow && current.opts.slideShow.autoStart ) {\r\n\t\t\t\t\tSlideShow.start();\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( SlideShow && SlideShow.isActive )  {\r\n\t\t\t\tSlideShow.clear();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'afterShow.fb' : function(e, instance, current) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\tif ( SlideShow && SlideShow.isActive ) {\r\n\t\t\t\tSlideShow.set();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\t// \"P\" or Spacebar\r\n\t\t\tif ( SlideShow && current.opts.slideShow && ( keycode === 80 || keycode === 32 ) && !$(document.activeElement).is( 'button,a,input' ) ) {\r\n\t\t\t\tkeypress.preventDefault();\r\n\r\n\t\t\t\tSlideShow.toggle();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeClose.fb onDeactivate.fb' : function(e, instance) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\tif ( SlideShow ) {\r\n\t\t\t\tSlideShow.stop();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t// Page Visibility API to pause slideshow when window is not active\r\n\t$(document).on(\"visibilitychange\", function() {\r\n\t\tvar instance  = $.fancybox.getInstance();\r\n\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\tif ( SlideShow && SlideShow.isActive ) {\r\n\t\t\tif ( document.hidden ) {\r\n\t\t\t\tSlideShow.clear();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tSlideShow.set();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n}( document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// FullScreen\r\n// Adds fullscreen functionality\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\t// Collection of methods supported by user browser\r\n\tvar fn = (function () {\r\n\r\n\t\tvar fnMap = [\r\n\t\t\t[\r\n\t\t\t\t'requestFullscreen',\r\n\t\t\t\t'exitFullscreen',\r\n\t\t\t\t'fullscreenElement',\r\n\t\t\t\t'fullscreenEnabled',\r\n\t\t\t\t'fullscreenchange',\r\n\t\t\t\t'fullscreenerror'\r\n\t\t\t],\r\n\t\t\t// new WebKit\r\n\t\t\t[\r\n\t\t\t\t'webkitRequestFullscreen',\r\n\t\t\t\t'webkitExitFullscreen',\r\n\t\t\t\t'webkitFullscreenElement',\r\n\t\t\t\t'webkitFullscreenEnabled',\r\n\t\t\t\t'webkitfullscreenchange',\r\n\t\t\t\t'webkitfullscreenerror'\r\n\r\n\t\t\t],\r\n\t\t\t// old WebKit (Safari 5.1)\r\n\t\t\t[\r\n\t\t\t\t'webkitRequestFullScreen',\r\n\t\t\t\t'webkitCancelFullScreen',\r\n\t\t\t\t'webkitCurrentFullScreenElement',\r\n\t\t\t\t'webkitCancelFullScreen',\r\n\t\t\t\t'webkitfullscreenchange',\r\n\t\t\t\t'webkitfullscreenerror'\r\n\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t'mozRequestFullScreen',\r\n\t\t\t\t'mozCancelFullScreen',\r\n\t\t\t\t'mozFullScreenElement',\r\n\t\t\t\t'mozFullScreenEnabled',\r\n\t\t\t\t'mozfullscreenchange',\r\n\t\t\t\t'mozfullscreenerror'\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t'msRequestFullscreen',\r\n\t\t\t\t'msExitFullscreen',\r\n\t\t\t\t'msFullscreenElement',\r\n\t\t\t\t'msFullscreenEnabled',\r\n\t\t\t\t'MSFullscreenChange',\r\n\t\t\t\t'MSFullscreenError'\r\n\t\t\t]\r\n\t\t];\r\n\r\n\t\tvar val;\r\n\t\tvar ret = {};\r\n\t\tvar i, j;\r\n\r\n\t\tfor ( i = 0; i < fnMap.length; i++ ) {\r\n\t\t\tval = fnMap[ i ];\r\n\r\n\t\t\tif ( val && val[ 1 ] in document ) {\r\n\t\t\t\tfor ( j = 0; j < val.length; j++ ) {\r\n\t\t\t\t\tret[ fnMap[ 0 ][ j ] ] = val[ j ];\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn ret;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t})();\r\n\r\n\t// If browser does not have Full Screen API, then simply unset default button template and stop\r\n\tif ( !fn ) {\r\n\r\n\t\tif ( $ && $.fancybox ) {\r\n\t\t\t$.fancybox.defaults.btnTpl.fullScreen = false;\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar FullScreen = {\r\n\r\n\t\trequest : function ( elem ) {\r\n\r\n\t\t\telem = elem || document.documentElement;\r\n\r\n\t\t\telem[ fn.requestFullscreen ]( elem.ALLOW_KEYBOARD_INPUT );\r\n\r\n\t\t},\r\n\t\texit : function () {\r\n\r\n\t\t\tdocument[ fn.exitFullscreen ]();\r\n\r\n\t\t},\r\n\t\ttoggle : function ( elem ) {\r\n\r\n\t\t\telem = elem || document.documentElement;\r\n\r\n\t\t\tif ( this.isFullscreen() ) {\r\n\t\t\t\tthis.exit();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.request( elem );\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tisFullscreen : function()  {\r\n\r\n\t\t\treturn Boolean( document[ fn.fullscreenElement ] );\r\n\r\n\t\t},\r\n\t\tenabled : function()  {\r\n\r\n\t\t\treturn Boolean( document[ fn.fullscreenEnabled ] );\r\n\r\n\t\t}\r\n\t};\r\n\r\n\t$.extend(true, $.fancybox.defaults, {\r\n\t\tbtnTpl : {\r\n\t\t\tfullScreen :\r\n\t\t\t\t'<button data-fancybox-fullscreen class=\"fancybox-button fancybox-button--fullscreen\" title=\"{{FULL_SCREEN}}\">' +\r\n\t\t\t\t\t'<svg viewBox=\"0 0 40 40\">' +\r\n\t\t\t\t\t\t'<path d=\"M9,12 h22 v16 h-22 v-16 v16 h22 v-16 Z\" />' +\r\n\t\t\t\t\t'</svg>' +\r\n\t\t\t\t'</button>'\r\n\t\t},\r\n\t\tfullScreen : {\r\n\t\t\tautoStart : false\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).on({\r\n\t\t'onInit.fb' : function(e, instance) {\r\n\t\t\tvar $container;\r\n\r\n\t\t\tif ( instance && instance.group[ instance.currIndex ].opts.fullScreen ) {\r\n\t\t\t\t$container = instance.$refs.container;\r\n\r\n\t\t\t\t$container.on('click.fb-fullscreen', '[data-fancybox-fullscreen]', function(e) {\r\n\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tFullScreen.toggle( $container[ 0 ] );\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif ( instance.opts.fullScreen && instance.opts.fullScreen.autoStart === true ) {\r\n\t\t\t\t\tFullScreen.request( $container[ 0 ] );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Expose API\r\n\t\t\t\tinstance.FullScreen = FullScreen;\r\n\r\n\t\t\t} else if ( instance ) {\r\n\t\t\t\tinstance.$refs.toolbar.find('[data-fancybox-fullscreen]').hide();\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\r\n\r\n\t\t\t// \"P\" or Spacebar\r\n\t\t\tif ( instance && instance.FullScreen && keycode === 70 ) {\r\n\t\t\t\tkeypress.preventDefault();\r\n\r\n\t\t\t\tinstance.FullScreen.toggle( instance.$refs.container[ 0 ] );\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t'beforeClose.fb' : function( instance ) {\r\n\t\t\tif ( instance && instance.FullScreen ) {\r\n\t\t\t\tFullScreen.exit();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).on(fn.fullscreenchange, function() {\r\n\t\tvar isFullscreen = FullScreen.isFullscreen(),\r\n\t\t\tinstance = $.fancybox.getInstance();\r\n\r\n\t\tif ( instance ) {\r\n\r\n\t\t\t// If image is zooming, then force to stop and reposition properly\r\n\t\t\tif ( instance.current && instance.current.type === 'image' && instance.isAnimating ) {\r\n\t\t\t\tinstance.current.$content.css( 'transition', 'none' );\r\n\r\n\t\t\t\tinstance.isAnimating = false;\r\n\r\n\t\t\t\tinstance.update( true, true, 0 );\r\n\t\t\t}\r\n\r\n\t\t\tinstance.trigger( 'onFullscreenChange', isFullscreen );\r\n\r\n\t\t\tinstance.$refs.container.toggleClass( 'fancybox-is-fullscreen', isFullscreen );\r\n\t\t}\r\n\r\n\t});\r\n\r\n}( document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// Thumbs\r\n// Displays thumbnails in a grid\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\t// Make sure there are default values\r\n\t$.fancybox.defaults = $.extend(true, {\r\n\t\tbtnTpl : {\r\n\t\t\tthumbs :\r\n\t\t\t'<button data-fancybox-thumbs class=\"fancybox-button fancybox-button--thumbs\" title=\"{{THUMBS}}\">' +\r\n\t\t\t\t'<svg viewBox=\"0 0 120 120\">' +\r\n\t\t\t\t\t'<path d=\"M30,30 h14 v14 h-14 Z M50,30 h14 v14 h-14 Z M70,30 h14 v14 h-14 Z M30,50 h14 v14 h-14 Z M50,50 h14 v14 h-14 Z M70,50 h14 v14 h-14 Z M30,70 h14 v14 h-14 Z M50,70 h14 v14 h-14 Z M70,70 h14 v14 h-14 Z\" />' +\r\n\t\t\t\t'</svg>' +\r\n\t\t\t'</button>'\r\n\t\t},\r\n\t\tthumbs : {\r\n\t\t\tautoStart   : false,                  // Display thumbnails on opening\r\n\t\t\thideOnClose : true,                   // Hide thumbnail grid when closing animation starts\r\n\t\t\tparentEl    : '.fancybox-container',  // Container is injected into this element\r\n\t\t\taxis        : 'y'                     // Vertical (y) or horizontal (x) scrolling\r\n\t\t}\r\n\t}, $.fancybox.defaults);\r\n\r\n\tvar FancyThumbs = function( instance ) {\r\n\t\tthis.init( instance );\r\n\t};\r\n\r\n\t$.extend( FancyThumbs.prototype, {\r\n\r\n\t\t$button\t\t: null,\r\n\t\t$grid\t\t: null,\r\n\t\t$list\t\t: null,\r\n\t\tisVisible\t: false,\r\n\t\tisActive\t: false,\r\n\r\n\t\tinit : function( instance ) {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tself.instance = instance;\r\n\r\n\t\t\tinstance.Thumbs = self;\r\n\r\n\t\t\t// Enable thumbs if at least two group items have thumbnails\r\n\t\t\tvar first  = instance.group[0],\r\n\t\t\t\tsecond = instance.group[1];\r\n\r\n\t\t\tself.opts = instance.group[ instance.currIndex ].opts.thumbs;\r\n\r\n\t\t\tself.$button = instance.$refs.toolbar.find( '[data-fancybox-thumbs]' );\r\n\r\n\t\t\tif ( self.opts && first && second && (\r\n\t\t    \t\t( first.type == 'image'  || first.opts.thumb  || first.opts.$thumb ) &&\r\n\t\t    \t\t( second.type == 'image' || second.opts.thumb || second.opts.$thumb )\r\n\t\t\t)) {\r\n\r\n\t\t\t\tself.$button.show().on('click', function() {\r\n\t\t\t\t\tself.toggle();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tself.isActive = true;\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.$button.hide();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcreate : function() {\r\n\t\t\tvar self = this,\r\n\t\t\t\tinstance = self.instance,\r\n\t\t\t\tparentEl = self.opts.parentEl,\r\n\t\t\t\tlist,\r\n\t\t\t\tsrc;\r\n\r\n\t\t\tself.$grid = $('<div class=\"fancybox-thumbs fancybox-thumbs-' + self.opts.axis + '\"></div>').appendTo( instance.$refs.container.find( parentEl ).addBack().filter( parentEl ) );\r\n\r\n\t\t\t// Build list HTML\r\n\t\t\tlist = '<ul>';\r\n\r\n\t\t\t$.each(instance.group, function( i, item ) {\r\n\t\t\t\tsrc = item.opts.thumb || ( item.opts.$thumb ? item.opts.$thumb.attr( 'src' ) : null );\r\n\r\n\t\t\t\tif ( !src && item.type === 'image' ) {\r\n\t\t\t\t\tsrc = item.src;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( src && src.length ) {\r\n\t\t\t\t\tlist += '<li data-index=\"' + i + '\"  tabindex=\"0\" class=\"fancybox-thumbs-loading\"><img data-src=\"' + src + '\" /></li>';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tlist += '</ul>';\r\n\r\n\t\t\tself.$list = $( list ).appendTo( self.$grid ).on('click', 'li', function() {\r\n\t\t\t\tinstance.jumpTo( $(this).data('index') );\r\n\t\t\t});\r\n\r\n\t\t\tself.$list.find( 'img' ).hide().one('load', function() {\r\n\t\t\t\tvar $parent\t\t= $(this).parent().removeClass( 'fancybox-thumbs-loading' ),\r\n\t\t\t\t\tthumbWidth\t= $parent.outerWidth(),\r\n\t\t\t\t\tthumbHeight\t= $parent.outerHeight(),\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight,\r\n\t\t\t\t\twidthRatio,\r\n\t\t\t\t\theightRatio;\r\n\r\n\t\t\t\twidth  = this.naturalWidth\t|| this.width;\r\n\t\t\t\theight = this.naturalHeight\t|| this.height;\r\n\r\n\t\t\t\t// Calculate thumbnail dimensions; center vertically and horizontally\r\n\t\t\t\twidthRatio  = width  / thumbWidth;\r\n\t\t\t\theightRatio = height / thumbHeight;\r\n\r\n\t\t\t\tif (widthRatio >= 1 && heightRatio >= 1) {\r\n\t\t\t\t\tif (widthRatio > heightRatio) {\r\n\t\t\t\t\t\twidth  = width / heightRatio;\r\n\t\t\t\t\t\theight = thumbHeight;\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twidth  = thumbWidth;\r\n\t\t\t\t\t\theight = height / widthRatio;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(this).css({\r\n\t\t\t\t\twidth         : Math.floor(width),\r\n\t\t\t\t\theight        : Math.floor(height),\r\n\t\t\t\t\t'margin-top'  : height > thumbHeight ? ( Math.floor(thumbHeight * 0.3 - height * 0.3 ) ) : Math.floor(thumbHeight * 0.5 - height * 0.5 ),\r\n\t\t\t\t\t'margin-left' : Math.floor(thumbWidth * 0.5 - width * 0.5 )\r\n\t\t\t\t}).show();\r\n\r\n\t\t\t})\r\n\t\t\t.each(function() {\r\n\t\t\t\tthis.src = $( this ).data( 'src' );\r\n\t\t\t});\r\n\r\n\t\t\tif ( self.opts.axis === 'x' ) {\r\n\t\t\t\tself.$list.width( parseInt( self.$grid.css(\"padding-right\") ) + ( instance.group.length * self.$list.children().eq(0).outerWidth(true) ) + 'px' );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfocus : function( duration ) {\r\n\t\t\tvar self = this,\r\n\t\t\t\t$list = self.$list,\r\n\t\t\t\tthumb,\r\n\t\t\t\tthumbPos;\r\n\r\n\t\t\tif ( self.instance.current ) {\r\n\t\t\t\tthumb = $list.children()\r\n\t\t\t\t\t.removeClass( 'fancybox-thumbs-active' )\r\n\t\t\t\t\t.filter('[data-index=\"' + self.instance.current.index  + '\"]')\r\n\t\t\t\t\t.addClass('fancybox-thumbs-active');\r\n\r\n\t\t\t\tthumbPos = thumb.position();\r\n\r\n\t\t\t\t// Check if need to scroll to make current thumb visible\r\n\t\t\t\tif ( self.opts.axis === 'y' && ( thumbPos.top < 0 || thumbPos.top > ( $list.height() - thumb.outerHeight() ) ) ) {\r\n\t\t\t\t\t$list.stop().animate({ 'scrollTop' : $list.scrollTop() + thumbPos.top }, duration);\r\n\r\n\t\t\t\t} else if ( self.opts.axis === 'x' && (\r\n\t\t\t\t\t\tthumbPos.left < $list.parent().scrollLeft() ||\r\n\t\t\t\t\t\tthumbPos.left > ( $list.parent().scrollLeft() + ( $list.parent().width() - thumb.outerWidth() ) )\r\n\t\t\t\t\t)\r\n\t\t\t\t) {\r\n\t\t\t\t\t$list.parent().stop().animate({ 'scrollLeft' : thumbPos.left }, duration);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tupdate : function() {\r\n\t\t\tthis.instance.$refs.container.toggleClass( 'fancybox-show-thumbs', this.isVisible );\r\n\r\n\t\t\tif ( this.isVisible ) {\r\n\t\t\t\tif ( !this.$grid ) {\r\n\t\t\t\t\tthis.create();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.instance.trigger( 'onThumbsShow' );\r\n\r\n\t\t\t\tthis.focus( 0 );\r\n\r\n\t\t\t} else if ( this.$grid ) {\r\n\t\t\t\tthis.instance.trigger( 'onThumbsHide' );\r\n\t\t\t}\r\n\r\n\t\t\t// Update content position\r\n\t\t\tthis.instance.update();\r\n\t\t},\r\n\r\n\t\thide : function() {\r\n\t\t\tthis.isVisible = false;\r\n\t\t\tthis.update();\r\n\t\t},\r\n\r\n\t\tshow : function() {\r\n\t\t\tthis.isVisible = true;\r\n\t\t\tthis.update();\r\n\t\t},\r\n\r\n\t\ttoggle : function() {\r\n\t\t\tthis.isVisible = !this.isVisible;\r\n\t\t\tthis.update();\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).on({\r\n\r\n\t\t'onInit.fb' : function(e, instance) {\r\n\t\t\tvar Thumbs;\r\n\r\n\t\t\tif ( instance && !instance.Thumbs ) {\r\n\t\t\t\tThumbs = new FancyThumbs( instance );\r\n\r\n\t\t\t\tif ( Thumbs.isActive && Thumbs.opts.autoStart === true ) {\r\n\t\t\t\t\tThumbs.show();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeShow.fb' : function(e, instance, item, firstRun) {\r\n\t\t\tvar Thumbs = instance && instance.Thumbs;\r\n\r\n\t\t\tif ( Thumbs && Thumbs.isVisible ) {\r\n\t\t\t\tThumbs.focus( firstRun ? 0 : 250 );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\r\n\t\t\tvar Thumbs = instance && instance.Thumbs;\r\n\r\n\t\t\t// \"G\"\r\n\t\t\tif ( Thumbs && Thumbs.isActive && keycode === 71 ) {\r\n\t\t\t\tkeypress.preventDefault();\r\n\r\n\t\t\t\tThumbs.toggle();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeClose.fb' : function( e, instance ) {\r\n\t\t\tvar Thumbs = instance && instance.Thumbs;\r\n\r\n\t\t\tif ( Thumbs && Thumbs.isVisible && Thumbs.opts.hideOnClose !== false ) {\r\n\t\t\t\tThumbs.$grid.hide();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n}(document, window.jQuery));\r\n\r\n//// ==========================================================================\r\n//\r\n// Share\r\n// Displays simple form for sharing current url\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\t$.extend(true, $.fancybox.defaults, {\r\n\t\tbtnTpl : {\r\n\t\t\tshare :\r\n\t\t\t\t'<button data-fancybox-share class=\"fancybox-button fancybox-button--share\" title=\"{{SHARE}}\">' +\r\n\t\t\t\t\t'<svg viewBox=\"0 0 40 40\">' +\r\n\t\t\t\t\t\t'<path d=\"M6,30 C8,18 19,16 23,16 L23,16 L23,10 L33,20 L23,29 L23,24 C19,24 8,27 6,30 Z\">' +\r\n\t\t\t\t\t'</svg>' +\r\n\t\t\t\t'</button>'\r\n\t\t},\r\n\t\tshare : {\r\n\t\t\ttpl :\r\n\t\t\t\t'<div class=\"fancybox-share\">' +\r\n\t\t\t\t\t'<h1>{{SHARE}}</h1>' +\r\n\t\t\t\t\t'<p class=\"fancybox-share__links\">' +\r\n\t\t\t\t\t\t'<a class=\"fancybox-share__button fancybox-share__button--fb\" href=\"https://www.facebook.com/sharer/sharer.php?u={{url}}\">' +\r\n\t\t\t\t\t\t\t'<svg viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m287 456v-299c0-21 6-35 35-35h38v-63c-7-1-29-3-55-3-54 0-91 33-91 94v306m143-254h-205v72h196\" /></svg>' +\r\n\t\t\t\t\t\t\t'<span>Facebook</span>' +\r\n\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t\t'<a class=\"fancybox-share__button fancybox-share__button--pt\" href=\"https://www.pinterest.com/pin/create/button/?url={{url}}&description={{descr}}&media={{media}}\">' +\r\n\t\t\t\t\t\t\t'<svg viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m265 56c-109 0-164 78-164 144 0 39 15 74 47 87 5 2 10 0 12-5l4-19c2-6 1-8-3-13-9-11-15-25-15-45 0-58 43-110 113-110 62 0 96 38 96 88 0 67-30 122-73 122-24 0-42-19-36-44 6-29 20-60 20-81 0-19-10-35-31-35-25 0-44 26-44 60 0 21 7 36 7 36l-30 125c-8 37-1 83 0 87 0 3 4 4 5 2 2-3 32-39 42-75l16-64c8 16 31 29 56 29 74 0 124-67 124-157 0-69-58-132-146-132z\" fill=\"#fff\"/></svg>' +\r\n\t\t\t\t\t\t\t'<span>Pinterest</span>' +\r\n\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t\t'<a class=\"fancybox-share__button fancybox-share__button--tw\" href=\"https://twitter.com/intent/tweet?url={{url}}&text={{descr}}\">' +\r\n\t\t\t\t\t\t\t'<svg viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m456 133c-14 7-31 11-47 13 17-10 30-27 37-46-15 10-34 16-52 20-61-62-157-7-141 75-68-3-129-35-169-85-22 37-11 86 26 109-13 0-26-4-37-9 0 39 28 72 65 80-12 3-25 4-37 2 10 33 41 57 77 57-42 30-77 38-122 34 170 111 378-32 359-208 16-11 30-25 41-42z\" /></svg>' +\r\n\t\t\t\t\t\t\t'<span>Twitter</span>' +\r\n\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t'</p>' +\r\n\t\t\t\t\t'<p><input class=\"fancybox-share__input\" type=\"text\" value=\"{{url_raw}}\" /></p>' +\r\n\t\t\t\t'</div>'\r\n\t\t}\r\n\t});\r\n\r\n\tfunction escapeHtml(string) {\r\n\t\tvar entityMap = {\r\n\t\t  '&': '&amp;',\r\n\t\t  '<': '&lt;',\r\n\t\t  '>': '&gt;',\r\n\t\t  '\"': '&quot;',\r\n\t\t  \"'\": '&#39;',\r\n\t\t  '/': '&#x2F;',\r\n\t\t  '`': '&#x60;',\r\n\t\t  '=': '&#x3D;'\r\n\t\t};\r\n\r\n\t\treturn String(string).replace(/[&<>\"'`=\\/]/g, function (s) {\r\n\t\t\treturn entityMap[s];\r\n\t\t});\r\n\t}\r\n\r\n\t$(document).on('click', '[data-fancybox-share]', function() {\r\n\t\tvar f = $.fancybox.getInstance(),\r\n\t\t\turl,\r\n\t\t\ttpl;\r\n\r\n\t\tif ( f ) {\r\n\t\t\turl = f.current.opts.hash === false ? f.current.src : window.location;\r\n\t\t\ttpl = f.current.opts.share.tpl\r\n\t\t\t\t\t.replace( /\\{\\{media\\}\\}/g, f.current.type === 'image' ? encodeURIComponent( f.current.src ) : '' )\r\n\t\t\t\t\t.replace( /\\{\\{url\\}\\}/g, encodeURIComponent( url ) )\r\n\t\t\t\t\t.replace( /\\{\\{url_raw\\}\\}/g, escapeHtml( url ) )\r\n\t\t\t\t\t.replace( /\\{\\{descr\\}\\}/g, f.$caption ? encodeURIComponent( f.$caption.text() ) : '' );\r\n\r\n\t\t\t$.fancybox.open({\r\n\t\t\t\tsrc  : f.translate( f, tpl ),\r\n\t\t\t\ttype : 'html',\r\n\t\t\t\topts : {\r\n\t\t\t\t\tanimationEffect   : \"fade\",\r\n\t\t\t\t\tanimationDuration : 250,\r\n\t\t\t\t\tafterLoad : function(instance, current) {\r\n\t\t\t\t\t\t// Opening links in a popup window\r\n\t\t\t\t\t\tcurrent.$content.find('.fancybox-share__links a').click(function() {\r\n\t\t\t\t\t        window.open(this.href, \"Share\", \"width=550, height=450\");\r\n\t\t\t\t\t        return false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t});\r\n\r\n}( document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// Hash\r\n// Enables linking to each modal\r\n//\r\n// ==========================================================================\r\n;(function (document, window, $) {\r\n\t'use strict';\r\n\r\n\t// Simple $.escapeSelector polyfill (for jQuery prior v3)\r\n\tif ( !$.escapeSelector ) {\r\n\t\t$.escapeSelector = function( sel ) {\r\n\t\t\tvar rcssescape = /([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\x80-\\uFFFF\\w-]/g;\r\n\t\t\tvar fcssescape = function( ch, asCodePoint ) {\r\n\t\t\t\tif ( asCodePoint ) {\r\n\t\t\t\t\t// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\r\n\t\t\t\t\tif ( ch === \"\\0\" ) {\r\n\t\t\t\t\t\treturn \"\\uFFFD\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Control characters and (dependent upon position) numbers get escaped as code points\r\n\t\t\t\t\treturn ch.slice( 0, -1 ) + \"\\\\\" + ch.charCodeAt( ch.length - 1 ).toString( 16 ) + \" \";\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Other potentially-special ASCII characters get backslash-escaped\r\n\t\t\t\treturn \"\\\\\" + ch;\r\n\t\t\t};\r\n\r\n\t\t\treturn ( sel + \"\" ).replace( rcssescape, fcssescape );\r\n\t\t};\r\n\t}\r\n\r\n\t// Create new history entry only once\r\n\tvar shouldCreateHistory = true;\r\n\r\n\t// Variable containing last hash value set by fancyBox\r\n\t// It will be used to determine if fancyBox needs to close after hash change is detected\r\n    var currentHash = null;\r\n\r\n\t// Throttling the history change\r\n\tvar timerID = null;\r\n\r\n\t// Get info about gallery name and current index from url\r\n    function parseUrl() {\r\n        var hash    = window.location.hash.substr( 1 );\r\n        var rez     = hash.split( '-' );\r\n        var index   = rez.length > 1 && /^\\+?\\d+$/.test( rez[ rez.length - 1 ] ) ? parseInt( rez.pop( -1 ), 10 ) || 1 : 1;\r\n        var gallery = rez.join( '-' );\r\n\r\n\t\t// Index is starting from 1\r\n\t\tif ( index < 1 ) {\r\n\t\t\tindex = 1;\r\n\t\t}\r\n\r\n        return {\r\n            hash    : hash,\r\n            index   : index,\r\n            gallery : gallery\r\n        };\r\n    }\r\n\r\n\t// Trigger click evnt on links to open new fancyBox instance\r\n\tfunction triggerFromUrl( url ) {\r\n\t\tvar $el;\r\n\r\n        if ( url.gallery !== '' ) {\r\n\r\n\t\t\t// If we can find element matching 'data-fancybox' atribute, then trigger click event for that ..\r\n\t\t\t$el = $( \"[data-fancybox='\" + $.escapeSelector( url.gallery ) + \"']\" ).eq( url.index - 1 );\r\n\r\n            if ( !$el.length ) {\r\n\t\t\t\t// .. if not, try finding element by ID\r\n\t\t\t\t$el = $( \"#\" + $.escapeSelector( url.gallery ) + \"\" );\r\n\t\t\t}\r\n\r\n\t\t\tif ( $el.length ) {\r\n\t\t\t\tshouldCreateHistory = false;\r\n\r\n\t\t\t\t$el.trigger( 'click' );\r\n\t\t\t}\r\n\r\n        }\r\n\t}\r\n\r\n\t// Get gallery name from current instance\r\n\tfunction getGalleryID( instance ) {\r\n\t\tvar opts;\r\n\r\n\t\tif ( !instance ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\topts = instance.current ? instance.current.opts : instance.opts;\r\n\r\n\t\treturn opts.hash || ( opts.$orig ? opts.$orig.data( 'fancybox' ) : ''  );\r\n\t}\r\n\r\n\t// Start when DOM becomes ready\r\n    $(function() {\r\n\r\n\t\t// Check if user has disabled this module\r\n\t\tif ( $.fancybox.defaults.hash === false ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Update hash when opening/closing fancyBox\r\n\t    $(document).on({\r\n\t\t\t'onInit.fb' : function( e, instance ) {\r\n\t\t\t\tvar url, gallery;\r\n\r\n\t\t\t\tif ( instance.group[ instance.currIndex ].opts.hash === false ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\turl     = parseUrl();\r\n\t\t\t\tgallery = getGalleryID( instance );\r\n\r\n\t\t\t\t// Make sure gallery start index matches index from hash\r\n\t\t\t\tif ( gallery && url.gallery && gallery == url.gallery ) {\r\n\t\t\t\t\tinstance.currIndex = url.index - 1;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t'beforeShow.fb' : function( e, instance, current ) {\r\n\t\t\t\tvar gallery;\r\n\r\n\t\t\t\tif ( !current || current.opts.hash === false ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t            gallery = getGalleryID( instance );\r\n\r\n\t            // Update window hash\r\n\t            if ( gallery && gallery !== '' ) {\r\n\r\n\t\t\t\t\tif ( window.location.hash.indexOf( gallery ) < 0 ) {\r\n\t\t                instance.opts.origHash = window.location.hash;\r\n\t\t            }\r\n\r\n\t\t\t\t\tcurrentHash = gallery + ( instance.group.length > 1 ? '-' + ( current.index + 1 ) : '' );\r\n\r\n\t\t\t\t\tif ( 'replaceState' in window.history ) {\r\n\t\t\t\t\t\tif ( timerID ) {\r\n\t\t\t\t\t\t\tclearTimeout( timerID );\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttimerID = setTimeout(function() {\r\n\t\t\t\t\t\t\twindow.history[ shouldCreateHistory ? 'pushState' : 'replaceState' ]( {} , document.title, window.location.pathname + window.location.search + '#' +  currentHash );\r\n\r\n\t\t\t\t\t\t\ttimerID = null;\r\n\r\n\t\t\t\t\t\t\tshouldCreateHistory = false;\r\n\r\n\t\t\t\t\t\t}, 300);\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twindow.location.hash = currentHash;\r\n\t\t\t\t\t}\r\n\r\n\t            }\r\n\r\n\t        },\r\n\r\n\t\t\t'beforeClose.fb' : function( e, instance, current ) {\r\n\t\t\t\tvar gallery, origHash;\r\n\r\n\t\t\t\tif ( timerID ) {\r\n\t\t\t\t\tclearTimeout( timerID );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( current.opts.hash === false ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgallery  = getGalleryID( instance );\r\n\t\t\t\torigHash = instance && instance.opts.origHash ? instance.opts.origHash : '';\r\n\r\n\t            // Remove hash from location bar\r\n\t            if ( gallery && gallery !== '' ) {\r\n\r\n\t                if ( 'replaceState' in history ) {\r\n\t\t\t\t\t\twindow.history.replaceState( {} , document.title, window.location.pathname + window.location.search + origHash );\r\n\r\n\t                } else {\r\n\t\t\t\t\t\twindow.location.hash = origHash;\r\n\r\n\t\t\t\t\t\t// Keep original scroll position\r\n\t\t\t\t\t\t$( window ).scrollTop( instance.scrollTop ).scrollLeft( instance.scrollLeft );\r\n\t                }\r\n\t            }\r\n\r\n\t\t\t\tcurrentHash = null;\r\n\t        }\r\n\t    });\r\n\r\n\t\t// Check if need to close after url has changed\r\n\t\t$(window).on('hashchange.fb', function() {\r\n\t\t\tvar url = parseUrl();\r\n\r\n\t\t\tif ( $.fancybox.getInstance() ) {\r\n\t\t\t\tif ( currentHash && currentHash !== url.gallery + '-' + url.index && !( url.index === 1 && currentHash == url.gallery ) ) {\r\n\t\t\t\t\tcurrentHash = null;\r\n\r\n\t\t\t\t\t$.fancybox.close();\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( url.gallery !== '' ) {\r\n\t\t\t\ttriggerFromUrl( url );\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Check current hash and trigger click event on matching element to start fancyBox, if needed\r\n\t\tsetTimeout(function() {\r\n\t\t\ttriggerFromUrl( parseUrl() );\r\n\t\t}, 50);\r\n    });\r\n\r\n}( document, window, window.jQuery || jQuery ));\r\n\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\tvar prevTime = new Date().getTime();\r\n\r\n    $(document).on({\r\n        'onInit.fb' : function( e, instance, current ) {\r\n\t\t\tinstance.$refs.stage.on('mousewheel DOMMouseScroll wheel MozMousePixelScroll', function(e) {\r\n\t\t\t\tvar current  = instance.current,\r\n\t\t\t\t\tcurrTime = new Date().getTime();\r\n\r\n\t\t\t\tif ( instance.group.length < 1 || current.opts.wheel === false || ( current.opts.wheel === 'auto' && current.type !== 'image' ) ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\r\n\t\t\t\tif ( current.$slide.hasClass( 'fancybox-animated' ) ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\te = e.originalEvent || e;\r\n\r\n\t\t\t\tif ( currTime - prevTime < 250 ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tprevTime = currTime;\r\n\r\n\t\t\t\tinstance[ ( -e.deltaY || -e.deltaX || e.wheelDelta || -e.detail ) < 0 ? 'next' : 'previous' ]();\r\n\r\n\t\t\t});\r\n\t\t}\r\n    });\r\n\r\n}( document, window.jQuery || jQuery ));\r\n","/*!\r\n * Flickity PACKAGED v2.1.0\r\n * Touch, responsive, flickable carousels\r\n *\r\n * Licensed GPLv3 for open source use\r\n * or Flickity Commercial License for commercial use\r\n *\r\n * https://flickity.metafizzy.co\r\n * Copyright 2015-2018 Metafizzy\r\n */\r\n\r\n/**\r\n * Bridget makes jQuery widgets\r\n * v2.0.1\r\n * MIT license\r\n */\r\n\r\n/* jshint browser: true, strict: true, undef: true, unused: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /* globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'jquery-bridget/jquery-bridget',[ 'jquery' ], function( jQuery ) {\r\n      return factory( window, jQuery );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('jquery')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.jQueryBridget = factory(\r\n      window,\r\n      window.jQuery\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, jQuery ) {\r\n'use strict';\r\n\r\n// ----- utils ----- //\r\n\r\nvar arraySlice = Array.prototype.slice;\r\n\r\n// helper function for logging errors\r\n// $.error breaks jQuery chaining\r\nvar console = window.console;\r\nvar logError = typeof console == 'undefined' ? function() {} :\r\n  function( message ) {\r\n    console.error( message );\r\n  };\r\n\r\n// ----- jQueryBridget ----- //\r\n\r\nfunction jQueryBridget( namespace, PluginClass, $ ) {\r\n  $ = $ || jQuery || window.jQuery;\r\n  if ( !$ ) {\r\n    return;\r\n  }\r\n\r\n  // add option method -> $().plugin('option', {...})\r\n  if ( !PluginClass.prototype.option ) {\r\n    // option setter\r\n    PluginClass.prototype.option = function( opts ) {\r\n      // bail out if not an object\r\n      if ( !$.isPlainObject( opts ) ){\r\n        return;\r\n      }\r\n      this.options = $.extend( true, this.options, opts );\r\n    };\r\n  }\r\n\r\n  // make jQuery plugin\r\n  $.fn[ namespace ] = function( arg0 /*, arg1 */ ) {\r\n    if ( typeof arg0 == 'string' ) {\r\n      // method call $().plugin( 'methodName', { options } )\r\n      // shift arguments by 1\r\n      var args = arraySlice.call( arguments, 1 );\r\n      return methodCall( this, arg0, args );\r\n    }\r\n    // just $().plugin({ options })\r\n    plainCall( this, arg0 );\r\n    return this;\r\n  };\r\n\r\n  // $().plugin('methodName')\r\n  function methodCall( $elems, methodName, args ) {\r\n    var returnValue;\r\n    var pluginMethodStr = '$().' + namespace + '(\"' + methodName + '\")';\r\n\r\n    $elems.each( function( i, elem ) {\r\n      // get instance\r\n      var instance = $.data( elem, namespace );\r\n      if ( !instance ) {\r\n        logError( namespace + ' not initialized. Cannot call methods, i.e. ' +\r\n          pluginMethodStr );\r\n        return;\r\n      }\r\n\r\n      var method = instance[ methodName ];\r\n      if ( !method || methodName.charAt(0) == '_' ) {\r\n        logError( pluginMethodStr + ' is not a valid method' );\r\n        return;\r\n      }\r\n\r\n      // apply method, get return value\r\n      var value = method.apply( instance, args );\r\n      // set return value if value is returned, use only first value\r\n      returnValue = returnValue === undefined ? value : returnValue;\r\n    });\r\n\r\n    return returnValue !== undefined ? returnValue : $elems;\r\n  }\r\n\r\n  function plainCall( $elems, options ) {\r\n    $elems.each( function( i, elem ) {\r\n      var instance = $.data( elem, namespace );\r\n      if ( instance ) {\r\n        // set options & init\r\n        instance.option( options );\r\n        instance._init();\r\n      } else {\r\n        // initialize new instance\r\n        instance = new PluginClass( elem, options );\r\n        $.data( elem, namespace, instance );\r\n      }\r\n    });\r\n  }\r\n\r\n  updateJQuery( $ );\r\n\r\n}\r\n\r\n// ----- updateJQuery ----- //\r\n\r\n// set $.bridget for v1 backwards compatibility\r\nfunction updateJQuery( $ ) {\r\n  if ( !$ || ( $ && $.bridget ) ) {\r\n    return;\r\n  }\r\n  $.bridget = jQueryBridget;\r\n}\r\n\r\nupdateJQuery( jQuery || window.jQuery );\r\n\r\n// -----  ----- //\r\n\r\nreturn jQueryBridget;\r\n\r\n}));\r\n\r\n/**\r\n * EvEmitter v1.1.0\r\n * Lil' event emitter\r\n * MIT License\r\n */\r\n\r\n/* jshint unused: true, undef: true, strict: true */\r\n\r\n( function( global, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /* globals define, module, window */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD - RequireJS\r\n    define( 'ev-emitter/ev-emitter',factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS - Browserify, Webpack\r\n    module.exports = factory();\r\n  } else {\r\n    // Browser globals\r\n    global.EvEmitter = factory();\r\n  }\r\n\r\n}( typeof window != 'undefined' ? window : this, function() {\r\n\r\n\r\n\r\nfunction EvEmitter() {}\r\n\r\nvar proto = EvEmitter.prototype;\r\n\r\nproto.on = function( eventName, listener ) {\r\n  if ( !eventName || !listener ) {\r\n    return;\r\n  }\r\n  // set events hash\r\n  var events = this._events = this._events || {};\r\n  // set listeners array\r\n  var listeners = events[ eventName ] = events[ eventName ] || [];\r\n  // only add once\r\n  if ( listeners.indexOf( listener ) == -1 ) {\r\n    listeners.push( listener );\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nproto.once = function( eventName, listener ) {\r\n  if ( !eventName || !listener ) {\r\n    return;\r\n  }\r\n  // add event\r\n  this.on( eventName, listener );\r\n  // set once flag\r\n  // set onceEvents hash\r\n  var onceEvents = this._onceEvents = this._onceEvents || {};\r\n  // set onceListeners object\r\n  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\r\n  // set flag\r\n  onceListeners[ listener ] = true;\r\n\r\n  return this;\r\n};\r\n\r\nproto.off = function( eventName, listener ) {\r\n  var listeners = this._events && this._events[ eventName ];\r\n  if ( !listeners || !listeners.length ) {\r\n    return;\r\n  }\r\n  var index = listeners.indexOf( listener );\r\n  if ( index != -1 ) {\r\n    listeners.splice( index, 1 );\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nproto.emitEvent = function( eventName, args ) {\r\n  var listeners = this._events && this._events[ eventName ];\r\n  if ( !listeners || !listeners.length ) {\r\n    return;\r\n  }\r\n  // copy over to avoid interference if .off() in listener\r\n  listeners = listeners.slice(0);\r\n  args = args || [];\r\n  // once stuff\r\n  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\r\n\r\n  for ( var i=0; i < listeners.length; i++ ) {\r\n    var listener = listeners[i]\r\n    var isOnce = onceListeners && onceListeners[ listener ];\r\n    if ( isOnce ) {\r\n      // remove listener\r\n      // remove before trigger to prevent recursion\r\n      this.off( eventName, listener );\r\n      // unset once flag\r\n      delete onceListeners[ listener ];\r\n    }\r\n    // trigger listener\r\n    listener.apply( this, args );\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nproto.allOff = function() {\r\n  delete this._events;\r\n  delete this._onceEvents;\r\n};\r\n\r\nreturn EvEmitter;\r\n\r\n}));\r\n\r\n/*!\r\n * getSize v2.0.2\r\n * measure size of elements\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, strict: true, undef: true, unused: true */\r\n/*global define: false, module: false, console: false */\r\n\r\n( function( window, factory ) {\r\n  'use strict';\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'get-size/get-size',[],function() {\r\n      return factory();\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory();\r\n  } else {\r\n    // browser global\r\n    window.getSize = factory();\r\n  }\r\n\r\n})( window, function factory() {\r\n'use strict';\r\n\r\n// -------------------------- helpers -------------------------- //\r\n\r\n// get a number from a string, not a percentage\r\nfunction getStyleSize( value ) {\r\n  var num = parseFloat( value );\r\n  // not a percent like '100%', and a number\r\n  var isValid = value.indexOf('%') == -1 && !isNaN( num );\r\n  return isValid && num;\r\n}\r\n\r\nfunction noop() {}\r\n\r\nvar logError = typeof console == 'undefined' ? noop :\r\n  function( message ) {\r\n    console.error( message );\r\n  };\r\n\r\n// -------------------------- measurements -------------------------- //\r\n\r\nvar measurements = [\r\n  'paddingLeft',\r\n  'paddingRight',\r\n  'paddingTop',\r\n  'paddingBottom',\r\n  'marginLeft',\r\n  'marginRight',\r\n  'marginTop',\r\n  'marginBottom',\r\n  'borderLeftWidth',\r\n  'borderRightWidth',\r\n  'borderTopWidth',\r\n  'borderBottomWidth'\r\n];\r\n\r\nvar measurementsLength = measurements.length;\r\n\r\nfunction getZeroSize() {\r\n  var size = {\r\n    width: 0,\r\n    height: 0,\r\n    innerWidth: 0,\r\n    innerHeight: 0,\r\n    outerWidth: 0,\r\n    outerHeight: 0\r\n  };\r\n  for ( var i=0; i < measurementsLength; i++ ) {\r\n    var measurement = measurements[i];\r\n    size[ measurement ] = 0;\r\n  }\r\n  return size;\r\n}\r\n\r\n// -------------------------- getStyle -------------------------- //\r\n\r\n/**\r\n * getStyle, get style of element, check for Firefox bug\r\n * https://bugzilla.mozilla.org/show_bug.cgi?id=548397\r\n */\r\nfunction getStyle( elem ) {\r\n  var style = getComputedStyle( elem );\r\n  if ( !style ) {\r\n    logError( 'Style returned ' + style +\r\n      '. Are you running this code in a hidden iframe on Firefox? ' +\r\n      'See http://bit.ly/getsizebug1' );\r\n  }\r\n  return style;\r\n}\r\n\r\n// -------------------------- setup -------------------------- //\r\n\r\nvar isSetup = false;\r\n\r\nvar isBoxSizeOuter;\r\n\r\n/**\r\n * setup\r\n * check isBoxSizerOuter\r\n * do on first getSize() rather than on page load for Firefox bug\r\n */\r\nfunction setup() {\r\n  // setup once\r\n  if ( isSetup ) {\r\n    return;\r\n  }\r\n  isSetup = true;\r\n\r\n  // -------------------------- box sizing -------------------------- //\r\n\r\n  /**\r\n   * WebKit measures the outer-width on style.width on border-box elems\r\n   * IE & Firefox<29 measures the inner-width\r\n   */\r\n  var div = document.createElement('div');\r\n  div.style.width = '200px';\r\n  div.style.padding = '1px 2px 3px 4px';\r\n  div.style.borderStyle = 'solid';\r\n  div.style.borderWidth = '1px 2px 3px 4px';\r\n  div.style.boxSizing = 'border-box';\r\n\r\n  var body = document.body || document.documentElement;\r\n  body.appendChild( div );\r\n  var style = getStyle( div );\r\n\r\n  getSize.isBoxSizeOuter = isBoxSizeOuter = getStyleSize( style.width ) == 200;\r\n  body.removeChild( div );\r\n\r\n}\r\n\r\n// -------------------------- getSize -------------------------- //\r\n\r\nfunction getSize( elem ) {\r\n  setup();\r\n\r\n  // use querySeletor if elem is string\r\n  if ( typeof elem == 'string' ) {\r\n    elem = document.querySelector( elem );\r\n  }\r\n\r\n  // do not proceed on non-objects\r\n  if ( !elem || typeof elem != 'object' || !elem.nodeType ) {\r\n    return;\r\n  }\r\n\r\n  var style = getStyle( elem );\r\n\r\n  // if hidden, everything is 0\r\n  if ( style.display == 'none' ) {\r\n    return getZeroSize();\r\n  }\r\n\r\n  var size = {};\r\n  size.width = elem.offsetWidth;\r\n  size.height = elem.offsetHeight;\r\n\r\n  var isBorderBox = size.isBorderBox = style.boxSizing == 'border-box';\r\n\r\n  // get all measurements\r\n  for ( var i=0; i < measurementsLength; i++ ) {\r\n    var measurement = measurements[i];\r\n    var value = style[ measurement ];\r\n    var num = parseFloat( value );\r\n    // any 'auto', 'medium' value will be 0\r\n    size[ measurement ] = !isNaN( num ) ? num : 0;\r\n  }\r\n\r\n  var paddingWidth = size.paddingLeft + size.paddingRight;\r\n  var paddingHeight = size.paddingTop + size.paddingBottom;\r\n  var marginWidth = size.marginLeft + size.marginRight;\r\n  var marginHeight = size.marginTop + size.marginBottom;\r\n  var borderWidth = size.borderLeftWidth + size.borderRightWidth;\r\n  var borderHeight = size.borderTopWidth + size.borderBottomWidth;\r\n\r\n  var isBorderBoxSizeOuter = isBorderBox && isBoxSizeOuter;\r\n\r\n  // overwrite width and height if we can get it from style\r\n  var styleWidth = getStyleSize( style.width );\r\n  if ( styleWidth !== false ) {\r\n    size.width = styleWidth +\r\n      // add padding and border unless it's already including it\r\n      ( isBorderBoxSizeOuter ? 0 : paddingWidth + borderWidth );\r\n  }\r\n\r\n  var styleHeight = getStyleSize( style.height );\r\n  if ( styleHeight !== false ) {\r\n    size.height = styleHeight +\r\n      // add padding and border unless it's already including it\r\n      ( isBorderBoxSizeOuter ? 0 : paddingHeight + borderHeight );\r\n  }\r\n\r\n  size.innerWidth = size.width - ( paddingWidth + borderWidth );\r\n  size.innerHeight = size.height - ( paddingHeight + borderHeight );\r\n\r\n  size.outerWidth = size.width + marginWidth;\r\n  size.outerHeight = size.height + marginHeight;\r\n\r\n  return size;\r\n}\r\n\r\nreturn getSize;\r\n\r\n});\r\n\r\n/**\r\n * matchesSelector v2.0.2\r\n * matchesSelector( element, '.selector' )\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, strict: true, undef: true, unused: true */\r\n\r\n( function( window, factory ) {\r\n  /*global define: false, module: false */\r\n  'use strict';\r\n  // universal module definition\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'desandro-matches-selector/matches-selector',factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory();\r\n  } else {\r\n    // browser global\r\n    window.matchesSelector = factory();\r\n  }\r\n\r\n}( window, function factory() {\r\n  'use strict';\r\n\r\n  var matchesMethod = ( function() {\r\n    var ElemProto = window.Element.prototype;\r\n    // check for the standard method name first\r\n    if ( ElemProto.matches ) {\r\n      return 'matches';\r\n    }\r\n    // check un-prefixed\r\n    if ( ElemProto.matchesSelector ) {\r\n      return 'matchesSelector';\r\n    }\r\n    // check vendor prefixes\r\n    var prefixes = [ 'webkit', 'moz', 'ms', 'o' ];\r\n\r\n    for ( var i=0; i < prefixes.length; i++ ) {\r\n      var prefix = prefixes[i];\r\n      var method = prefix + 'MatchesSelector';\r\n      if ( ElemProto[ method ] ) {\r\n        return method;\r\n      }\r\n    }\r\n  })();\r\n\r\n  return function matchesSelector( elem, selector ) {\r\n    return elem[ matchesMethod ]( selector );\r\n  };\r\n\r\n}));\r\n\r\n/**\r\n * Fizzy UI utils v2.0.7\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, undef: true, unused: true, strict: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /*globals define, module, require */\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'fizzy-ui-utils/utils',[\r\n      'desandro-matches-selector/matches-selector'\r\n    ], function( matchesSelector ) {\r\n      return factory( window, matchesSelector );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('desandro-matches-selector')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.fizzyUIUtils = factory(\r\n      window,\r\n      window.matchesSelector\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, matchesSelector ) {\r\n\r\n\r\n\r\nvar utils = {};\r\n\r\n// ----- extend ----- //\r\n\r\n// extends objects\r\nutils.extend = function( a, b ) {\r\n  for ( var prop in b ) {\r\n    a[ prop ] = b[ prop ];\r\n  }\r\n  return a;\r\n};\r\n\r\n// ----- modulo ----- //\r\n\r\nutils.modulo = function( num, div ) {\r\n  return ( ( num % div ) + div ) % div;\r\n};\r\n\r\n// ----- makeArray ----- //\r\n\r\nvar arraySlice = Array.prototype.slice;\r\n\r\n// turn element or nodeList into an array\r\nutils.makeArray = function( obj ) {\r\n  if ( Array.isArray( obj ) ) {\r\n    // use object if already an array\r\n    return obj;\r\n  }\r\n  // return empty array if undefined or null. #6\r\n  if ( obj === null || obj === undefined ) {\r\n    return [];\r\n  }\r\n\r\n  var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\r\n  if ( isArrayLike ) {\r\n    // convert nodeList to array\r\n    return arraySlice.call( obj );\r\n  }\r\n\r\n  // array of single index\r\n  return [ obj ];\r\n};\r\n\r\n// ----- removeFrom ----- //\r\n\r\nutils.removeFrom = function( ary, obj ) {\r\n  var index = ary.indexOf( obj );\r\n  if ( index != -1 ) {\r\n    ary.splice( index, 1 );\r\n  }\r\n};\r\n\r\n// ----- getParent ----- //\r\n\r\nutils.getParent = function( elem, selector ) {\r\n  while ( elem.parentNode && elem != document.body ) {\r\n    elem = elem.parentNode;\r\n    if ( matchesSelector( elem, selector ) ) {\r\n      return elem;\r\n    }\r\n  }\r\n};\r\n\r\n// ----- getQueryElement ----- //\r\n\r\n// use element as selector string\r\nutils.getQueryElement = function( elem ) {\r\n  if ( typeof elem == 'string' ) {\r\n    return document.querySelector( elem );\r\n  }\r\n  return elem;\r\n};\r\n\r\n// ----- handleEvent ----- //\r\n\r\n// enable .ontype to trigger from .addEventListener( elem, 'type' )\r\nutils.handleEvent = function( event ) {\r\n  var method = 'on' + event.type;\r\n  if ( this[ method ] ) {\r\n    this[ method ]( event );\r\n  }\r\n};\r\n\r\n// ----- filterFindElements ----- //\r\n\r\nutils.filterFindElements = function( elems, selector ) {\r\n  // make array of elems\r\n  elems = utils.makeArray( elems );\r\n  var ffElems = [];\r\n\r\n  elems.forEach( function( elem ) {\r\n    // check that elem is an actual element\r\n    if ( !( elem instanceof HTMLElement ) ) {\r\n      return;\r\n    }\r\n    // add elem if no selector\r\n    if ( !selector ) {\r\n      ffElems.push( elem );\r\n      return;\r\n    }\r\n    // filter & find items if we have a selector\r\n    // filter\r\n    if ( matchesSelector( elem, selector ) ) {\r\n      ffElems.push( elem );\r\n    }\r\n    // find children\r\n    var childElems = elem.querySelectorAll( selector );\r\n    // concat childElems to filterFound array\r\n    for ( var i=0; i < childElems.length; i++ ) {\r\n      ffElems.push( childElems[i] );\r\n    }\r\n  });\r\n\r\n  return ffElems;\r\n};\r\n\r\n// ----- debounceMethod ----- //\r\n\r\nutils.debounceMethod = function( _class, methodName, threshold ) {\r\n  threshold = threshold || 100;\r\n  // original method\r\n  var method = _class.prototype[ methodName ];\r\n  var timeoutName = methodName + 'Timeout';\r\n\r\n  _class.prototype[ methodName ] = function() {\r\n    var timeout = this[ timeoutName ];\r\n    clearTimeout( timeout );\r\n\r\n    var args = arguments;\r\n    var _this = this;\r\n    this[ timeoutName ] = setTimeout( function() {\r\n      method.apply( _this, args );\r\n      delete _this[ timeoutName ];\r\n    }, threshold );\r\n  };\r\n};\r\n\r\n// ----- docReady ----- //\r\n\r\nutils.docReady = function( callback ) {\r\n  var readyState = document.readyState;\r\n  if ( readyState == 'complete' || readyState == 'interactive' ) {\r\n    // do async to allow for other scripts to run. metafizzy/flickity#441\r\n    setTimeout( callback );\r\n  } else {\r\n    document.addEventListener( 'DOMContentLoaded', callback );\r\n  }\r\n};\r\n\r\n// ----- htmlInit ----- //\r\n\r\n// http://jamesroberts.name/blog/2010/02/22/string-functions-for-javascript-trim-to-camel-case-to-dashed-and-to-underscore/\r\nutils.toDashed = function( str ) {\r\n  return str.replace( /(.)([A-Z])/g, function( match, $1, $2 ) {\r\n    return $1 + '-' + $2;\r\n  }).toLowerCase();\r\n};\r\n\r\nvar console = window.console;\r\n/**\r\n * allow user to initialize classes via [data-namespace] or .js-namespace class\r\n * htmlInit( Widget, 'widgetName' )\r\n * options are parsed from data-namespace-options\r\n */\r\nutils.htmlInit = function( WidgetClass, namespace ) {\r\n  utils.docReady( function() {\r\n    var dashedNamespace = utils.toDashed( namespace );\r\n    var dataAttr = 'data-' + dashedNamespace;\r\n    var dataAttrElems = document.querySelectorAll( '[' + dataAttr + ']' );\r\n    var jsDashElems = document.querySelectorAll( '.js-' + dashedNamespace );\r\n    var elems = utils.makeArray( dataAttrElems )\r\n      .concat( utils.makeArray( jsDashElems ) );\r\n    var dataOptionsAttr = dataAttr + '-options';\r\n    var jQuery = window.jQuery;\r\n\r\n    elems.forEach( function( elem ) {\r\n      var attr = elem.getAttribute( dataAttr ) ||\r\n        elem.getAttribute( dataOptionsAttr );\r\n      var options;\r\n      try {\r\n        options = attr && JSON.parse( attr );\r\n      } catch ( error ) {\r\n        // log error, do not initialize\r\n        if ( console ) {\r\n          console.error( 'Error parsing ' + dataAttr + ' on ' + elem.className +\r\n          ': ' + error );\r\n        }\r\n        return;\r\n      }\r\n      // initialize\r\n      var instance = new WidgetClass( elem, options );\r\n      // make available via $().data('namespace')\r\n      if ( jQuery ) {\r\n        jQuery.data( elem, namespace, instance );\r\n      }\r\n    });\r\n\r\n  });\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn utils;\r\n\r\n}));\r\n\r\n// Flickity.Cell\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/cell',[\r\n      'get-size/get-size'\r\n    ], function( getSize ) {\r\n      return factory( window, getSize );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('get-size')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = window.Flickity || {};\r\n    window.Flickity.Cell = factory(\r\n      window,\r\n      window.getSize\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, getSize ) {\r\n\r\n\r\n\r\nfunction Cell( elem, parent ) {\r\n  this.element = elem;\r\n  this.parent = parent;\r\n\r\n  this.create();\r\n}\r\n\r\nvar proto = Cell.prototype;\r\n\r\nproto.create = function() {\r\n  this.element.style.position = 'absolute';\r\n  this.element.setAttribute( 'aria-selected', 'false' );\r\n  this.x = 0;\r\n  this.shift = 0;\r\n};\r\n\r\nproto.destroy = function() {\r\n  // reset style\r\n  this.element.style.position = '';\r\n  var side = this.parent.originSide;\r\n  this.element.removeAttribute('aria-selected');\r\n  this.element.style[ side ] = '';\r\n};\r\n\r\nproto.getSize = function() {\r\n  this.size = getSize( this.element );\r\n};\r\n\r\nproto.setPosition = function( x ) {\r\n  this.x = x;\r\n  this.updateTarget();\r\n  this.renderPosition( x );\r\n};\r\n\r\n// setDefaultTarget v1 method, backwards compatibility, remove in v3\r\nproto.updateTarget = proto.setDefaultTarget = function() {\r\n  var marginProperty = this.parent.originSide == 'left' ? 'marginLeft' : 'marginRight';\r\n  this.target = this.x + this.size[ marginProperty ] +\r\n    this.size.width * this.parent.cellAlign;\r\n};\r\n\r\nproto.renderPosition = function( x ) {\r\n  // render position of cell with in slider\r\n  var side = this.parent.originSide;\r\n  this.element.style[ side ] = this.parent.getPositionValue( x );\r\n};\r\n\r\n/**\r\n * @param {Integer} factor - 0, 1, or -1\r\n**/\r\nproto.wrapShift = function( shift ) {\r\n  this.shift = shift;\r\n  this.renderPosition( this.x + this.parent.slideableWidth * shift );\r\n};\r\n\r\nproto.remove = function() {\r\n  this.element.parentNode.removeChild( this.element );\r\n};\r\n\r\nreturn Cell;\r\n\r\n}));\r\n\r\n// slide\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/slide',factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory();\r\n  } else {\r\n    // browser global\r\n    window.Flickity = window.Flickity || {};\r\n    window.Flickity.Slide = factory();\r\n  }\r\n\r\n}( window, function factory() {\r\n'use strict';\r\n\r\nfunction Slide( parent ) {\r\n  this.parent = parent;\r\n  this.isOriginLeft = parent.originSide == 'left';\r\n  this.cells = [];\r\n  this.outerWidth = 0;\r\n  this.height = 0;\r\n}\r\n\r\nvar proto = Slide.prototype;\r\n\r\nproto.addCell = function( cell ) {\r\n  this.cells.push( cell );\r\n  this.outerWidth += cell.size.outerWidth;\r\n  this.height = Math.max( cell.size.outerHeight, this.height );\r\n  // first cell stuff\r\n  if ( this.cells.length == 1 ) {\r\n    this.x = cell.x; // x comes from first cell\r\n    var beginMargin = this.isOriginLeft ? 'marginLeft' : 'marginRight';\r\n    this.firstMargin = cell.size[ beginMargin ];\r\n  }\r\n};\r\n\r\nproto.updateTarget = function() {\r\n  var endMargin = this.isOriginLeft ? 'marginRight' : 'marginLeft';\r\n  var lastCell = this.getLastCell();\r\n  var lastMargin = lastCell ? lastCell.size[ endMargin ] : 0;\r\n  var slideWidth = this.outerWidth - ( this.firstMargin + lastMargin );\r\n  this.target = this.x + this.firstMargin + slideWidth * this.parent.cellAlign;\r\n};\r\n\r\nproto.getLastCell = function() {\r\n  return this.cells[ this.cells.length - 1 ];\r\n};\r\n\r\nproto.select = function() {\r\n  this.changeSelected( true );\r\n};\r\n\r\nproto.unselect = function() {\r\n  this.changeSelected( false );\r\n};\r\n\r\nproto.changeSelected = function( isSelected ) {\r\n  var classMethod = isSelected ? 'add' : 'remove';\r\n  this.cells.forEach( function( cell ) {\r\n    cell.element.classList[ classMethod ]('is-selected');\r\n    cell.element.setAttribute( 'aria-selected', isSelected.toString() );\r\n  });\r\n};\r\n\r\nproto.getCellElements = function() {\r\n  return this.cells.map( function( cell ) {\r\n    return cell.element;\r\n  });\r\n};\r\n\r\nreturn Slide;\r\n\r\n}));\r\n\r\n// animate\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/animate',[\r\n      'fizzy-ui-utils/utils'\r\n    ], function( utils ) {\r\n      return factory( window, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = window.Flickity || {};\r\n    window.Flickity.animatePrototype = factory(\r\n      window,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, utils ) {\r\n\r\n\r\n\r\n// -------------------------- requestAnimationFrame -------------------------- //\r\n\r\n// get rAF, prefixed, if present\r\nvar requestAnimationFrame = window.requestAnimationFrame ||\r\n  window.webkitRequestAnimationFrame;\r\n\r\n// fallback to setTimeout\r\nvar lastTime = 0;\r\nif ( !requestAnimationFrame )  {\r\n  requestAnimationFrame = function( callback ) {\r\n    var currTime = new Date().getTime();\r\n    var timeToCall = Math.max( 0, 16 - ( currTime - lastTime ) );\r\n    var id = setTimeout( callback, timeToCall );\r\n    lastTime = currTime + timeToCall;\r\n    return id;\r\n  };\r\n}\r\n\r\n// -------------------------- animate -------------------------- //\r\n\r\nvar proto = {};\r\n\r\nproto.startAnimation = function() {\r\n  if ( this.isAnimating ) {\r\n    return;\r\n  }\r\n\r\n  this.isAnimating = true;\r\n  this.restingFrames = 0;\r\n  this.animate();\r\n};\r\n\r\nproto.animate = function() {\r\n  this.applyDragForce();\r\n  this.applySelectedAttraction();\r\n\r\n  var previousX = this.x;\r\n\r\n  this.integratePhysics();\r\n  this.positionSlider();\r\n  this.settle( previousX );\r\n  // animate next frame\r\n  if ( this.isAnimating ) {\r\n    var _this = this;\r\n    requestAnimationFrame( function animateFrame() {\r\n      _this.animate();\r\n    });\r\n  }\r\n};\r\n\r\n\r\nvar transformProperty = ( function () {\r\n  var style = document.documentElement.style;\r\n  if ( typeof style.transform == 'string' ) {\r\n    return 'transform';\r\n  }\r\n  return 'WebkitTransform';\r\n})();\r\n\r\nproto.positionSlider = function() {\r\n  var x = this.x;\r\n  // wrap position around\r\n  if ( this.options.wrapAround && this.cells.length > 1 ) {\r\n    x = utils.modulo( x, this.slideableWidth );\r\n    x = x - this.slideableWidth;\r\n    this.shiftWrapCells( x );\r\n  }\r\n\r\n  x = x + this.cursorPosition;\r\n  // reverse if right-to-left and using transform\r\n  x = this.options.rightToLeft && transformProperty ? -x : x;\r\n  var value = this.getPositionValue( x );\r\n  // use 3D tranforms for hardware acceleration on iOS\r\n  // but use 2D when settled, for better font-rendering\r\n  this.slider.style[ transformProperty ] = this.isAnimating ?\r\n    'translate3d(' + value + ',0,0)' : 'translateX(' + value + ')';\r\n\r\n  // scroll event\r\n  var firstSlide = this.slides[0];\r\n  if ( firstSlide ) {\r\n    var positionX = -this.x - firstSlide.target;\r\n    var progress = positionX / this.slidesWidth;\r\n    this.dispatchEvent( 'scroll', null, [ progress, positionX ] );\r\n  }\r\n};\r\n\r\nproto.positionSliderAtSelected = function() {\r\n  if ( !this.cells.length ) {\r\n    return;\r\n  }\r\n  this.x = -this.selectedSlide.target;\r\n  this.velocity = 0; // stop wobble\r\n  this.positionSlider();\r\n};\r\n\r\nproto.getPositionValue = function( position ) {\r\n  if ( this.options.percentPosition ) {\r\n    // percent position, round to 2 digits, like 12.34%\r\n    return ( Math.round( ( position / this.size.innerWidth ) * 10000 ) * 0.01 )+ '%';\r\n  } else {\r\n    // pixel positioning\r\n    return Math.round( position ) + 'px';\r\n  }\r\n};\r\n\r\nproto.settle = function( previousX ) {\r\n  // keep track of frames where x hasn't moved\r\n  if ( !this.isPointerDown && Math.round( this.x * 100 ) == Math.round( previousX * 100 ) ) {\r\n    this.restingFrames++;\r\n  }\r\n  // stop animating if resting for 3 or more frames\r\n  if ( this.restingFrames > 2 ) {\r\n    this.isAnimating = false;\r\n    delete this.isFreeScrolling;\r\n    // render position with translateX when settled\r\n    this.positionSlider();\r\n    this.dispatchEvent( 'settle', null, [ this.selectedIndex ] );\r\n  }\r\n};\r\n\r\nproto.shiftWrapCells = function( x ) {\r\n  // shift before cells\r\n  var beforeGap = this.cursorPosition + x;\r\n  this._shiftCells( this.beforeShiftCells, beforeGap, -1 );\r\n  // shift after cells\r\n  var afterGap = this.size.innerWidth - ( x + this.slideableWidth + this.cursorPosition );\r\n  this._shiftCells( this.afterShiftCells, afterGap, 1 );\r\n};\r\n\r\nproto._shiftCells = function( cells, gap, shift ) {\r\n  for ( var i=0; i < cells.length; i++ ) {\r\n    var cell = cells[i];\r\n    var cellShift = gap > 0 ? shift : 0;\r\n    cell.wrapShift( cellShift );\r\n    gap -= cell.size.outerWidth;\r\n  }\r\n};\r\n\r\nproto._unshiftCells = function( cells ) {\r\n  if ( !cells || !cells.length ) {\r\n    return;\r\n  }\r\n  for ( var i=0; i < cells.length; i++ ) {\r\n    cells[i].wrapShift( 0 );\r\n  }\r\n};\r\n\r\n// -------------------------- physics -------------------------- //\r\n\r\nproto.integratePhysics = function() {\r\n  this.x += this.velocity;\r\n  this.velocity *= this.getFrictionFactor();\r\n};\r\n\r\nproto.applyForce = function( force ) {\r\n  this.velocity += force;\r\n};\r\n\r\nproto.getFrictionFactor = function() {\r\n  return 1 - this.options[ this.isFreeScrolling ? 'freeScrollFriction' : 'friction' ];\r\n};\r\n\r\nproto.getRestingPosition = function() {\r\n  // my thanks to Steven Wittens, who simplified this math greatly\r\n  return this.x + this.velocity / ( 1 - this.getFrictionFactor() );\r\n};\r\n\r\nproto.applyDragForce = function() {\r\n  if ( !this.isDraggable || !this.isPointerDown ) {\r\n    return;\r\n  }\r\n  // change the position to drag position by applying force\r\n  var dragVelocity = this.dragX - this.x;\r\n  var dragForce = dragVelocity - this.velocity;\r\n  this.applyForce( dragForce );\r\n};\r\n\r\nproto.applySelectedAttraction = function() {\r\n  // do not attract if pointer down or no slides\r\n  var dragDown = this.isDraggable && this.isPointerDown;\r\n  if ( dragDown || this.isFreeScrolling || !this.slides.length ) {\r\n    return;\r\n  }\r\n  var distance = this.selectedSlide.target * -1 - this.x;\r\n  var force = distance * this.options.selectedAttraction;\r\n  this.applyForce( force );\r\n};\r\n\r\nreturn proto;\r\n\r\n}));\r\n\r\n// Flickity main\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/flickity',[\r\n      'ev-emitter/ev-emitter',\r\n      'get-size/get-size',\r\n      'fizzy-ui-utils/utils',\r\n      './cell',\r\n      './slide',\r\n      './animate'\r\n    ], function( EvEmitter, getSize, utils, Cell, Slide, animatePrototype ) {\r\n      return factory( window, EvEmitter, getSize, utils, Cell, Slide, animatePrototype );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('ev-emitter'),\r\n      require('get-size'),\r\n      require('fizzy-ui-utils'),\r\n      require('./cell'),\r\n      require('./slide'),\r\n      require('./animate')\r\n    );\r\n  } else {\r\n    // browser global\r\n    var _Flickity = window.Flickity;\r\n\r\n    window.Flickity = factory(\r\n      window,\r\n      window.EvEmitter,\r\n      window.getSize,\r\n      window.fizzyUIUtils,\r\n      _Flickity.Cell,\r\n      _Flickity.Slide,\r\n      _Flickity.animatePrototype\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, EvEmitter, getSize,\r\n  utils, Cell, Slide, animatePrototype ) {\r\n\r\n\r\n\r\n// vars\r\nvar jQuery = window.jQuery;\r\nvar getComputedStyle = window.getComputedStyle;\r\nvar console = window.console;\r\n\r\nfunction moveElements( elems, toElem ) {\r\n  elems = utils.makeArray( elems );\r\n  while ( elems.length ) {\r\n    toElem.appendChild( elems.shift() );\r\n  }\r\n}\r\n\r\n// -------------------------- Flickity -------------------------- //\r\n\r\n// globally unique identifiers\r\nvar GUID = 0;\r\n// internal store of all Flickity intances\r\nvar instances = {};\r\n\r\nfunction Flickity( element, options ) {\r\n  var queryElement = utils.getQueryElement( element );\r\n  if ( !queryElement ) {\r\n    if ( console ) {\r\n      console.error( 'Bad element for Flickity: ' + ( queryElement || element ) );\r\n    }\r\n    return;\r\n  }\r\n  this.element = queryElement;\r\n  // do not initialize twice on same element\r\n  if ( this.element.flickityGUID ) {\r\n    var instance = instances[ this.element.flickityGUID ];\r\n    instance.option( options );\r\n    return instance;\r\n  }\r\n\r\n  // add jQuery\r\n  if ( jQuery ) {\r\n    this.$element = jQuery( this.element );\r\n  }\r\n  // options\r\n  this.options = utils.extend( {}, this.constructor.defaults );\r\n  this.option( options );\r\n\r\n  // kick things off\r\n  this._create();\r\n}\r\n\r\nFlickity.defaults = {\r\n  accessibility: true,\r\n  // adaptiveHeight: false,\r\n  cellAlign: 'center',\r\n  // cellSelector: undefined,\r\n  // contain: false,\r\n  freeScrollFriction: 0.075, // friction when free-scrolling\r\n  friction: 0.28, // friction when selecting\r\n  namespaceJQueryEvents: true,\r\n  // initialIndex: 0,\r\n  percentPosition: true,\r\n  resize: true,\r\n  selectedAttraction: 0.025,\r\n  setGallerySize: true\r\n  // watchCSS: false,\r\n  // wrapAround: false\r\n};\r\n\r\n// hash of methods triggered on _create()\r\nFlickity.createMethods = [];\r\n\r\nvar proto = Flickity.prototype;\r\n// inherit EventEmitter\r\nutils.extend( proto, EvEmitter.prototype );\r\n\r\nproto._create = function() {\r\n  // add id for Flickity.data\r\n  var id = this.guid = ++GUID;\r\n  this.element.flickityGUID = id; // expando\r\n  instances[ id ] = this; // associate via id\r\n  // initial properties\r\n  this.selectedIndex = 0;\r\n  // how many frames slider has been in same position\r\n  this.restingFrames = 0;\r\n  // initial physics properties\r\n  this.x = 0;\r\n  this.velocity = 0;\r\n  this.originSide = this.options.rightToLeft ? 'right' : 'left';\r\n  // create viewport & slider\r\n  this.viewport = document.createElement('div');\r\n  this.viewport.className = 'flickity-viewport';\r\n  this._createSlider();\r\n\r\n  if ( this.options.resize || this.options.watchCSS ) {\r\n    window.addEventListener( 'resize', this );\r\n  }\r\n\r\n  // add listeners from on option\r\n  for ( var eventName in this.options.on ) {\r\n    var listener = this.options.on[ eventName ];\r\n    this.on( eventName, listener );\r\n  }\r\n\r\n  Flickity.createMethods.forEach( function( method ) {\r\n    this[ method ]();\r\n  }, this );\r\n\r\n  if ( this.options.watchCSS ) {\r\n    this.watchCSS();\r\n  } else {\r\n    this.activate();\r\n  }\r\n\r\n};\r\n\r\n/**\r\n * set options\r\n * @param {Object} opts\r\n */\r\nproto.option = function( opts ) {\r\n  utils.extend( this.options, opts );\r\n};\r\n\r\nproto.activate = function() {\r\n  if ( this.isActive ) {\r\n    return;\r\n  }\r\n  this.isActive = true;\r\n  this.element.classList.add('flickity-enabled');\r\n  if ( this.options.rightToLeft ) {\r\n    this.element.classList.add('flickity-rtl');\r\n  }\r\n\r\n  this.getSize();\r\n  // move initial cell elements so they can be loaded as cells\r\n  var cellElems = this._filterFindCellElements( this.element.children );\r\n  moveElements( cellElems, this.slider );\r\n  this.viewport.appendChild( this.slider );\r\n  this.element.appendChild( this.viewport );\r\n  // get cells from children\r\n  this.reloadCells();\r\n\r\n  if ( this.options.accessibility ) {\r\n    // allow element to focusable\r\n    this.element.tabIndex = 0;\r\n    // listen for key presses\r\n    this.element.addEventListener( 'keydown', this );\r\n  }\r\n\r\n  this.emitEvent('activate');\r\n\r\n  var index;\r\n  var initialIndex = this.options.initialIndex;\r\n  if ( this.isInitActivated ) {\r\n    index = this.selectedIndex;\r\n  } else if ( initialIndex !== undefined ) {\r\n    index = this.cells[ initialIndex ] ? initialIndex : 0;\r\n  } else {\r\n    index = 0;\r\n  }\r\n  // select instantly\r\n  this.select( index, false, true );\r\n  // flag for initial activation, for using initialIndex\r\n  this.isInitActivated = true;\r\n  // ready event. #493\r\n  this.dispatchEvent('ready');\r\n};\r\n\r\n// slider positions the cells\r\nproto._createSlider = function() {\r\n  // slider element does all the positioning\r\n  var slider = document.createElement('div');\r\n  slider.className = 'flickity-slider';\r\n  slider.style[ this.originSide ] = 0;\r\n  this.slider = slider;\r\n};\r\n\r\nproto._filterFindCellElements = function( elems ) {\r\n  return utils.filterFindElements( elems, this.options.cellSelector );\r\n};\r\n\r\n// goes through all children\r\nproto.reloadCells = function() {\r\n  // collection of item elements\r\n  this.cells = this._makeCells( this.slider.children );\r\n  this.positionCells();\r\n  this._getWrapShiftCells();\r\n  this.setGallerySize();\r\n};\r\n\r\n/**\r\n * turn elements into Flickity.Cells\r\n * @param {Array or NodeList or HTMLElement} elems\r\n * @returns {Array} items - collection of new Flickity Cells\r\n */\r\nproto._makeCells = function( elems ) {\r\n  var cellElems = this._filterFindCellElements( elems );\r\n\r\n  // create new Flickity for collection\r\n  var cells = cellElems.map( function( cellElem ) {\r\n    return new Cell( cellElem, this );\r\n  }, this );\r\n\r\n  return cells;\r\n};\r\n\r\nproto.getLastCell = function() {\r\n  return this.cells[ this.cells.length - 1 ];\r\n};\r\n\r\nproto.getLastSlide = function() {\r\n  return this.slides[ this.slides.length - 1 ];\r\n};\r\n\r\n// positions all cells\r\nproto.positionCells = function() {\r\n  // size all cells\r\n  this._sizeCells( this.cells );\r\n  // position all cells\r\n  this._positionCells( 0 );\r\n};\r\n\r\n/**\r\n * position certain cells\r\n * @param {Integer} index - which cell to start with\r\n */\r\nproto._positionCells = function( index ) {\r\n  index = index || 0;\r\n  // also measure maxCellHeight\r\n  // start 0 if positioning all cells\r\n  this.maxCellHeight = index ? this.maxCellHeight || 0 : 0;\r\n  var cellX = 0;\r\n  // get cellX\r\n  if ( index > 0 ) {\r\n    var startCell = this.cells[ index - 1 ];\r\n    cellX = startCell.x + startCell.size.outerWidth;\r\n  }\r\n  var len = this.cells.length;\r\n  for ( var i=index; i < len; i++ ) {\r\n    var cell = this.cells[i];\r\n    cell.setPosition( cellX );\r\n    cellX += cell.size.outerWidth;\r\n    this.maxCellHeight = Math.max( cell.size.outerHeight, this.maxCellHeight );\r\n  }\r\n  // keep track of cellX for wrap-around\r\n  this.slideableWidth = cellX;\r\n  // slides\r\n  this.updateSlides();\r\n  // contain slides target\r\n  this._containSlides();\r\n  // update slidesWidth\r\n  this.slidesWidth = len ? this.getLastSlide().target - this.slides[0].target : 0;\r\n};\r\n\r\n/**\r\n * cell.getSize() on multiple cells\r\n * @param {Array} cells\r\n */\r\nproto._sizeCells = function( cells ) {\r\n  cells.forEach( function( cell ) {\r\n    cell.getSize();\r\n  });\r\n};\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nproto.updateSlides = function() {\r\n  this.slides = [];\r\n  if ( !this.cells.length ) {\r\n    return;\r\n  }\r\n\r\n  var slide = new Slide( this );\r\n  this.slides.push( slide );\r\n  var isOriginLeft = this.originSide == 'left';\r\n  var nextMargin = isOriginLeft ? 'marginRight' : 'marginLeft';\r\n\r\n  var canCellFit = this._getCanCellFit();\r\n\r\n  this.cells.forEach( function( cell, i ) {\r\n    // just add cell if first cell in slide\r\n    if ( !slide.cells.length ) {\r\n      slide.addCell( cell );\r\n      return;\r\n    }\r\n\r\n    var slideWidth = ( slide.outerWidth - slide.firstMargin ) +\r\n      ( cell.size.outerWidth - cell.size[ nextMargin ] );\r\n\r\n    if ( canCellFit.call( this, i, slideWidth ) ) {\r\n      slide.addCell( cell );\r\n    } else {\r\n      // doesn't fit, new slide\r\n      slide.updateTarget();\r\n\r\n      slide = new Slide( this );\r\n      this.slides.push( slide );\r\n      slide.addCell( cell );\r\n    }\r\n  }, this );\r\n  // last slide\r\n  slide.updateTarget();\r\n  // update .selectedSlide\r\n  this.updateSelectedSlide();\r\n};\r\n\r\nproto._getCanCellFit = function() {\r\n  var groupCells = this.options.groupCells;\r\n  if ( !groupCells ) {\r\n    return function() {\r\n      return false;\r\n    };\r\n  } else if ( typeof groupCells == 'number' ) {\r\n    // group by number. 3 -> [0,1,2], [3,4,5], ...\r\n    var number = parseInt( groupCells, 10 );\r\n    return function( i ) {\r\n      return ( i % number ) !== 0;\r\n    };\r\n  }\r\n  // default, group by width of slide\r\n  // parse '75%\r\n  var percentMatch = typeof groupCells == 'string' &&\r\n    groupCells.match(/^(\\d+)%$/);\r\n  var percent = percentMatch ? parseInt( percentMatch[1], 10 ) / 100 : 1;\r\n  return function( i, slideWidth ) {\r\n    return slideWidth <= ( this.size.innerWidth + 1 ) * percent;\r\n  };\r\n};\r\n\r\n// alias _init for jQuery plugin .flickity()\r\nproto._init =\r\nproto.reposition = function() {\r\n  this.positionCells();\r\n  this.positionSliderAtSelected();\r\n};\r\n\r\nproto.getSize = function() {\r\n  this.size = getSize( this.element );\r\n  this.setCellAlign();\r\n  this.cursorPosition = this.size.innerWidth * this.cellAlign;\r\n};\r\n\r\nvar cellAlignShorthands = {\r\n  // cell align, then based on origin side\r\n  center: {\r\n    left: 0.5,\r\n    right: 0.5\r\n  },\r\n  left: {\r\n    left: 0,\r\n    right: 1\r\n  },\r\n  right: {\r\n    right: 0,\r\n    left: 1\r\n  }\r\n};\r\n\r\nproto.setCellAlign = function() {\r\n  var shorthand = cellAlignShorthands[ this.options.cellAlign ];\r\n  this.cellAlign = shorthand ? shorthand[ this.originSide ] : this.options.cellAlign;\r\n};\r\n\r\nproto.setGallerySize = function() {\r\n  if ( this.options.setGallerySize ) {\r\n    var height = this.options.adaptiveHeight && this.selectedSlide ?\r\n      this.selectedSlide.height : this.maxCellHeight;\r\n    this.viewport.style.height = height + 'px';\r\n  }\r\n};\r\n\r\nproto._getWrapShiftCells = function() {\r\n  // only for wrap-around\r\n  if ( !this.options.wrapAround ) {\r\n    return;\r\n  }\r\n  // unshift previous cells\r\n  this._unshiftCells( this.beforeShiftCells );\r\n  this._unshiftCells( this.afterShiftCells );\r\n  // get before cells\r\n  // initial gap\r\n  var gapX = this.cursorPosition;\r\n  var cellIndex = this.cells.length - 1;\r\n  this.beforeShiftCells = this._getGapCells( gapX, cellIndex, -1 );\r\n  // get after cells\r\n  // ending gap between last cell and end of gallery viewport\r\n  gapX = this.size.innerWidth - this.cursorPosition;\r\n  // start cloning at first cell, working forwards\r\n  this.afterShiftCells = this._getGapCells( gapX, 0, 1 );\r\n};\r\n\r\nproto._getGapCells = function( gapX, cellIndex, increment ) {\r\n  // keep adding cells until the cover the initial gap\r\n  var cells = [];\r\n  while ( gapX > 0 ) {\r\n    var cell = this.cells[ cellIndex ];\r\n    if ( !cell ) {\r\n      break;\r\n    }\r\n    cells.push( cell );\r\n    cellIndex += increment;\r\n    gapX -= cell.size.outerWidth;\r\n  }\r\n  return cells;\r\n};\r\n\r\n// ----- contain ----- //\r\n\r\n// contain cell targets so no excess sliding\r\nproto._containSlides = function() {\r\n  if ( !this.options.contain || this.options.wrapAround || !this.cells.length ) {\r\n    return;\r\n  }\r\n  var isRightToLeft = this.options.rightToLeft;\r\n  var beginMargin = isRightToLeft ? 'marginRight' : 'marginLeft';\r\n  var endMargin = isRightToLeft ? 'marginLeft' : 'marginRight';\r\n  var contentWidth = this.slideableWidth - this.getLastCell().size[ endMargin ];\r\n  // content is less than gallery size\r\n  var isContentSmaller = contentWidth < this.size.innerWidth;\r\n  // bounds\r\n  var beginBound = this.cursorPosition + this.cells[0].size[ beginMargin ];\r\n  var endBound = contentWidth - this.size.innerWidth * ( 1 - this.cellAlign );\r\n  // contain each cell target\r\n  this.slides.forEach( function( slide ) {\r\n    if ( isContentSmaller ) {\r\n      // all cells fit inside gallery\r\n      slide.target = contentWidth * this.cellAlign;\r\n    } else {\r\n      // contain to bounds\r\n      slide.target = Math.max( slide.target, beginBound );\r\n      slide.target = Math.min( slide.target, endBound );\r\n    }\r\n  }, this );\r\n};\r\n\r\n// -----  ----- //\r\n\r\n/**\r\n * emits events via eventEmitter and jQuery events\r\n * @param {String} type - name of event\r\n * @param {Event} event - original event\r\n * @param {Array} args - extra arguments\r\n */\r\nproto.dispatchEvent = function( type, event, args ) {\r\n  var emitArgs = event ? [ event ].concat( args ) : args;\r\n  this.emitEvent( type, emitArgs );\r\n\r\n  if ( jQuery && this.$element ) {\r\n    // default trigger with type if no event\r\n    type += this.options.namespaceJQueryEvents ? '.flickity' : '';\r\n    var $event = type;\r\n    if ( event ) {\r\n      // create jQuery event\r\n      var jQEvent = jQuery.Event( event );\r\n      jQEvent.type = type;\r\n      $event = jQEvent;\r\n    }\r\n    this.$element.trigger( $event, args );\r\n  }\r\n};\r\n\r\n// -------------------------- select -------------------------- //\r\n\r\n/**\r\n * @param {Integer} index - index of the slide\r\n * @param {Boolean} isWrap - will wrap-around to last/first if at the end\r\n * @param {Boolean} isInstant - will immediately set position at selected cell\r\n */\r\nproto.select = function( index, isWrap, isInstant ) {\r\n  if ( !this.isActive ) {\r\n    return;\r\n  }\r\n  index = parseInt( index, 10 );\r\n  this._wrapSelect( index );\r\n\r\n  if ( this.options.wrapAround || isWrap ) {\r\n    index = utils.modulo( index, this.slides.length );\r\n  }\r\n  // bail if invalid index\r\n  if ( !this.slides[ index ] ) {\r\n    return;\r\n  }\r\n  var prevIndex = this.selectedIndex;\r\n  this.selectedIndex = index;\r\n  this.updateSelectedSlide();\r\n  if ( isInstant ) {\r\n    this.positionSliderAtSelected();\r\n  } else {\r\n    this.startAnimation();\r\n  }\r\n  if ( this.options.adaptiveHeight ) {\r\n    this.setGallerySize();\r\n  }\r\n  // events\r\n  this.dispatchEvent( 'select', null, [ index ] );\r\n  // change event if new index\r\n  if ( index != prevIndex ) {\r\n    this.dispatchEvent( 'change', null, [ index ] );\r\n  }\r\n  // old v1 event name, remove in v3\r\n  this.dispatchEvent('cellSelect');\r\n};\r\n\r\n// wraps position for wrapAround, to move to closest slide. #113\r\nproto._wrapSelect = function( index ) {\r\n  var len = this.slides.length;\r\n  var isWrapping = this.options.wrapAround && len > 1;\r\n  if ( !isWrapping ) {\r\n    return index;\r\n  }\r\n  var wrapIndex = utils.modulo( index, len );\r\n  // go to shortest\r\n  var delta = Math.abs( wrapIndex - this.selectedIndex );\r\n  var backWrapDelta = Math.abs( ( wrapIndex + len ) - this.selectedIndex );\r\n  var forewardWrapDelta = Math.abs( ( wrapIndex - len ) - this.selectedIndex );\r\n  if ( !this.isDragSelect && backWrapDelta < delta ) {\r\n    index += len;\r\n  } else if ( !this.isDragSelect && forewardWrapDelta < delta ) {\r\n    index -= len;\r\n  }\r\n  // wrap position so slider is within normal area\r\n  if ( index < 0 ) {\r\n    this.x -= this.slideableWidth;\r\n  } else if ( index >= len ) {\r\n    this.x += this.slideableWidth;\r\n  }\r\n};\r\n\r\nproto.previous = function( isWrap, isInstant ) {\r\n  this.select( this.selectedIndex - 1, isWrap, isInstant );\r\n};\r\n\r\nproto.next = function( isWrap, isInstant ) {\r\n  this.select( this.selectedIndex + 1, isWrap, isInstant );\r\n};\r\n\r\nproto.updateSelectedSlide = function() {\r\n  var slide = this.slides[ this.selectedIndex ];\r\n  // selectedIndex could be outside of slides, if triggered before resize()\r\n  if ( !slide ) {\r\n    return;\r\n  }\r\n  // unselect previous selected slide\r\n  this.unselectSelectedSlide();\r\n  // update new selected slide\r\n  this.selectedSlide = slide;\r\n  slide.select();\r\n  this.selectedCells = slide.cells;\r\n  this.selectedElements = slide.getCellElements();\r\n  // HACK: selectedCell & selectedElement is first cell in slide, backwards compatibility\r\n  // Remove in v3?\r\n  this.selectedCell = slide.cells[0];\r\n  this.selectedElement = this.selectedElements[0];\r\n};\r\n\r\nproto.unselectSelectedSlide = function() {\r\n  if ( this.selectedSlide ) {\r\n    this.selectedSlide.unselect();\r\n  }\r\n};\r\n\r\n/**\r\n * select slide from number or cell element\r\n * @param {Element or Number} elem\r\n */\r\nproto.selectCell = function( value, isWrap, isInstant ) {\r\n  // get cell\r\n  var cell = this.queryCell( value );\r\n  if ( !cell ) {\r\n    return;\r\n  }\r\n\r\n  var index = this.getCellSlideIndex( cell );\r\n  this.select( index, isWrap, isInstant );\r\n};\r\n\r\nproto.getCellSlideIndex = function( cell ) {\r\n  // get index of slides that has cell\r\n  for ( var i=0; i < this.slides.length; i++ ) {\r\n    var slide = this.slides[i];\r\n    var index = slide.cells.indexOf( cell );\r\n    if ( index != -1 ) {\r\n      return i;\r\n    }\r\n  }\r\n};\r\n\r\n// -------------------------- get cells -------------------------- //\r\n\r\n/**\r\n * get Flickity.Cell, given an Element\r\n * @param {Element} elem\r\n * @returns {Flickity.Cell} item\r\n */\r\nproto.getCell = function( elem ) {\r\n  // loop through cells to get the one that matches\r\n  for ( var i=0; i < this.cells.length; i++ ) {\r\n    var cell = this.cells[i];\r\n    if ( cell.element == elem ) {\r\n      return cell;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * get collection of Flickity.Cells, given Elements\r\n * @param {Element, Array, NodeList} elems\r\n * @returns {Array} cells - Flickity.Cells\r\n */\r\nproto.getCells = function( elems ) {\r\n  elems = utils.makeArray( elems );\r\n  var cells = [];\r\n  elems.forEach( function( elem ) {\r\n    var cell = this.getCell( elem );\r\n    if ( cell ) {\r\n      cells.push( cell );\r\n    }\r\n  }, this );\r\n  return cells;\r\n};\r\n\r\n/**\r\n * get cell elements\r\n * @returns {Array} cellElems\r\n */\r\nproto.getCellElements = function() {\r\n  return this.cells.map( function( cell ) {\r\n    return cell.element;\r\n  });\r\n};\r\n\r\n/**\r\n * get parent cell from an element\r\n * @param {Element} elem\r\n * @returns {Flickit.Cell} cell\r\n */\r\nproto.getParentCell = function( elem ) {\r\n  // first check if elem is cell\r\n  var cell = this.getCell( elem );\r\n  if ( cell ) {\r\n    return cell;\r\n  }\r\n  // try to get parent cell elem\r\n  elem = utils.getParent( elem, '.flickity-slider > *' );\r\n  return this.getCell( elem );\r\n};\r\n\r\n/**\r\n * get cells adjacent to a slide\r\n * @param {Integer} adjCount - number of adjacent slides\r\n * @param {Integer} index - index of slide to start\r\n * @returns {Array} cells - array of Flickity.Cells\r\n */\r\nproto.getAdjacentCellElements = function( adjCount, index ) {\r\n  if ( !adjCount ) {\r\n    return this.selectedSlide.getCellElements();\r\n  }\r\n  index = index === undefined ? this.selectedIndex : index;\r\n\r\n  var len = this.slides.length;\r\n  if ( 1 + ( adjCount * 2 ) >= len ) {\r\n    return this.getCellElements();\r\n  }\r\n\r\n  var cellElems = [];\r\n  for ( var i = index - adjCount; i <= index + adjCount ; i++ ) {\r\n    var slideIndex = this.options.wrapAround ? utils.modulo( i, len ) : i;\r\n    var slide = this.slides[ slideIndex ];\r\n    if ( slide ) {\r\n      cellElems = cellElems.concat( slide.getCellElements() );\r\n    }\r\n  }\r\n  return cellElems;\r\n};\r\n\r\n/**\r\n * select slide from number or cell element\r\n * @param {Element, Selector String, or Number} selector\r\n */\r\nproto.queryCell = function( selector ) {\r\n  if ( typeof selector == 'number' ) {\r\n    // use number as index\r\n    return this.cells[ selector ];\r\n  }\r\n  if ( typeof selector == 'string' ) {\r\n    // use string as selector, get element\r\n    selector = this.element.querySelector( selector );\r\n  }\r\n  // get cell from element\r\n  return this.getCell( selector );\r\n};\r\n\r\n// -------------------------- events -------------------------- //\r\n\r\nproto.uiChange = function() {\r\n  this.emitEvent('uiChange');\r\n};\r\n\r\nproto.childUIPointerDown = function( event ) {\r\n  this.emitEvent( 'childUIPointerDown', [ event ] );\r\n};\r\n\r\n// ----- resize ----- //\r\n\r\nproto.onresize = function() {\r\n  this.watchCSS();\r\n  this.resize();\r\n};\r\n\r\nutils.debounceMethod( Flickity, 'onresize', 150 );\r\n\r\nproto.resize = function() {\r\n  if ( !this.isActive ) {\r\n    return;\r\n  }\r\n  this.getSize();\r\n  // wrap values\r\n  if ( this.options.wrapAround ) {\r\n    this.x = utils.modulo( this.x, this.slideableWidth );\r\n  }\r\n  this.positionCells();\r\n  this._getWrapShiftCells();\r\n  this.setGallerySize();\r\n  this.emitEvent('resize');\r\n  // update selected index for group slides, instant\r\n  // TODO: position can be lost between groups of various numbers\r\n  var selectedElement = this.selectedElements && this.selectedElements[0];\r\n  this.selectCell( selectedElement, false, true );\r\n};\r\n\r\n// watches the :after property, activates/deactivates\r\nproto.watchCSS = function() {\r\n  var watchOption = this.options.watchCSS;\r\n  if ( !watchOption ) {\r\n    return;\r\n  }\r\n\r\n  var afterContent = getComputedStyle( this.element, ':after' ).content;\r\n  // activate if :after { content: 'flickity' }\r\n  if ( afterContent.indexOf('flickity') != -1 ) {\r\n    this.activate();\r\n  } else {\r\n    this.deactivate();\r\n  }\r\n};\r\n\r\n// ----- keydown ----- //\r\n\r\n// go previous/next if left/right keys pressed\r\nproto.onkeydown = function( event ) {\r\n  // only work if element is in focus\r\n  var isNotFocused = document.activeElement && document.activeElement != this.element;\r\n  if ( !this.options.accessibility ||isNotFocused ) {\r\n    return;\r\n  }\r\n\r\n  var handler = Flickity.keyboardHandlers[ event.keyCode ];\r\n  if ( handler ) {\r\n    handler.call( this );\r\n  }\r\n};\r\n\r\nFlickity.keyboardHandlers = {\r\n  // left arrow\r\n  37: function() {\r\n    var leftMethod = this.options.rightToLeft ? 'next' : 'previous';\r\n    this.uiChange();\r\n    this[ leftMethod ]();\r\n  },\r\n  // right arrow\r\n  39: function() {\r\n    var rightMethod = this.options.rightToLeft ? 'previous' : 'next';\r\n    this.uiChange();\r\n    this[ rightMethod ]();\r\n  },\r\n};\r\n\r\n// ----- focus ----- //\r\n\r\nproto.focus = function() {\r\n  var prevScrollY = window.pageYOffset;\r\n  this.element.focus();\r\n  // hack to fix scroll jump after focus, #76\r\n  if ( window.pageYOffset != prevScrollY ) {\r\n    window.scrollTo( window.pageXOffset, prevScrollY );\r\n  }\r\n};\r\n\r\n// -------------------------- destroy -------------------------- //\r\n\r\n// deactivate all Flickity functionality, but keep stuff available\r\nproto.deactivate = function() {\r\n  if ( !this.isActive ) {\r\n    return;\r\n  }\r\n  this.element.classList.remove('flickity-enabled');\r\n  this.element.classList.remove('flickity-rtl');\r\n  this.unselectSelectedSlide();\r\n  // destroy cells\r\n  this.cells.forEach( function( cell ) {\r\n    cell.destroy();\r\n  });\r\n  this.element.removeChild( this.viewport );\r\n  // move child elements back into element\r\n  moveElements( this.slider.children, this.element );\r\n  if ( this.options.accessibility ) {\r\n    this.element.removeAttribute('tabIndex');\r\n    this.element.removeEventListener( 'keydown', this );\r\n  }\r\n  // set flags\r\n  this.isActive = false;\r\n  this.emitEvent('deactivate');\r\n};\r\n\r\nproto.destroy = function() {\r\n  this.deactivate();\r\n  window.removeEventListener( 'resize', this );\r\n  this.emitEvent('destroy');\r\n  if ( jQuery && this.$element ) {\r\n    jQuery.removeData( this.element, 'flickity' );\r\n  }\r\n  delete this.element.flickityGUID;\r\n  delete instances[ this.guid ];\r\n};\r\n\r\n// -------------------------- prototype -------------------------- //\r\n\r\nutils.extend( proto, animatePrototype );\r\n\r\n// -------------------------- extras -------------------------- //\r\n\r\n/**\r\n * get Flickity instance from element\r\n * @param {Element} elem\r\n * @returns {Flickity}\r\n */\r\nFlickity.data = function( elem ) {\r\n  elem = utils.getQueryElement( elem );\r\n  var id = elem && elem.flickityGUID;\r\n  return id && instances[ id ];\r\n};\r\n\r\nutils.htmlInit( Flickity, 'flickity' );\r\n\r\nif ( jQuery && jQuery.bridget ) {\r\n  jQuery.bridget( 'flickity', Flickity );\r\n}\r\n\r\n// set internal jQuery, for Webpack + jQuery v3, #478\r\nFlickity.setJQuery = function( jq ) {\r\n  jQuery = jq;\r\n};\r\n\r\nFlickity.Cell = Cell;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n/*!\r\n * Unipointer v2.2.1\r\n * base class for doing one thing with pointer event\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, undef: true, unused: true, strict: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /*global define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'unipointer/unipointer',[\r\n      'ev-emitter/ev-emitter'\r\n    ], function( EvEmitter ) {\r\n      return factory( window, EvEmitter );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('ev-emitter')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Unipointer = factory(\r\n      window,\r\n      window.EvEmitter\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, EvEmitter ) {\r\n\r\n\r\n\r\nfunction noop() {}\r\n\r\nfunction Unipointer() {}\r\n\r\n// inherit EvEmitter\r\nvar proto = Unipointer.prototype = Object.create( EvEmitter.prototype );\r\n\r\nproto.bindStartEvent = function( elem ) {\r\n  this._bindStartEvent( elem, true );\r\n};\r\n\r\nproto.unbindStartEvent = function( elem ) {\r\n  this._bindStartEvent( elem, false );\r\n};\r\n\r\n/**\r\n * works as unbinder, as you can ._bindStart( false ) to unbind\r\n * @param {Boolean} isBind - will unbind if falsey\r\n */\r\nproto._bindStartEvent = function( elem, isBind ) {\r\n  // munge isBind, default to true\r\n  isBind = isBind === undefined ? true : !!isBind;\r\n  var bindMethod = isBind ? 'addEventListener' : 'removeEventListener';\r\n\r\n  if ( window.PointerEvent ) {\r\n    // Pointer Events. Chrome 55, IE11, Edge 14\r\n    elem[ bindMethod ]( 'pointerdown', this );\r\n  } else {\r\n    // listen for both, for devices like Chrome Pixel\r\n    elem[ bindMethod ]( 'mousedown', this );\r\n    elem[ bindMethod ]( 'touchstart', this );\r\n  }\r\n};\r\n\r\n// trigger handler methods for events\r\nproto.handleEvent = function( event ) {\r\n  var method = 'on' + event.type;\r\n  if ( this[ method ] ) {\r\n    this[ method ]( event );\r\n  }\r\n};\r\n\r\n// returns the touch that we're keeping track of\r\nproto.getTouch = function( touches ) {\r\n  for ( var i=0; i < touches.length; i++ ) {\r\n    var touch = touches[i];\r\n    if ( touch.identifier == this.pointerIdentifier ) {\r\n      return touch;\r\n    }\r\n  }\r\n};\r\n\r\n// ----- start event ----- //\r\n\r\nproto.onmousedown = function( event ) {\r\n  // dismiss clicks from right or middle buttons\r\n  var button = event.button;\r\n  if ( button && ( button !== 0 && button !== 1 ) ) {\r\n    return;\r\n  }\r\n  this._pointerDown( event, event );\r\n};\r\n\r\nproto.ontouchstart = function( event ) {\r\n  this._pointerDown( event, event.changedTouches[0] );\r\n};\r\n\r\nproto.onpointerdown = function( event ) {\r\n  this._pointerDown( event, event );\r\n};\r\n\r\n/**\r\n * pointer start\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto._pointerDown = function( event, pointer ) {\r\n  // dismiss right click and other pointers\r\n  // button = 0 is okay, 1-4 not\r\n  if ( event.button || this.isPointerDown ) {\r\n    return;\r\n  }\r\n\r\n  this.isPointerDown = true;\r\n  // save pointer identifier to match up touch events\r\n  this.pointerIdentifier = pointer.pointerId !== undefined ?\r\n    // pointerId for pointer events, touch.indentifier for touch events\r\n    pointer.pointerId : pointer.identifier;\r\n\r\n  this.pointerDown( event, pointer );\r\n};\r\n\r\nproto.pointerDown = function( event, pointer ) {\r\n  this._bindPostStartEvents( event );\r\n  this.emitEvent( 'pointerDown', [ event, pointer ] );\r\n};\r\n\r\n// hash of events to be bound after start event\r\nvar postStartEvents = {\r\n  mousedown: [ 'mousemove', 'mouseup' ],\r\n  touchstart: [ 'touchmove', 'touchend', 'touchcancel' ],\r\n  pointerdown: [ 'pointermove', 'pointerup', 'pointercancel' ],\r\n};\r\n\r\nproto._bindPostStartEvents = function( event ) {\r\n  if ( !event ) {\r\n    return;\r\n  }\r\n  // get proper events to match start event\r\n  var events = postStartEvents[ event.type ];\r\n  // bind events to node\r\n  events.forEach( function( eventName ) {\r\n    window.addEventListener( eventName, this );\r\n  }, this );\r\n  // save these arguments\r\n  this._boundPointerEvents = events;\r\n};\r\n\r\nproto._unbindPostStartEvents = function() {\r\n  // check for _boundEvents, in case dragEnd triggered twice (old IE8 bug)\r\n  if ( !this._boundPointerEvents ) {\r\n    return;\r\n  }\r\n  this._boundPointerEvents.forEach( function( eventName ) {\r\n    window.removeEventListener( eventName, this );\r\n  }, this );\r\n\r\n  delete this._boundPointerEvents;\r\n};\r\n\r\n// ----- move event ----- //\r\n\r\nproto.onmousemove = function( event ) {\r\n  this._pointerMove( event, event );\r\n};\r\n\r\nproto.onpointermove = function( event ) {\r\n  if ( event.pointerId == this.pointerIdentifier ) {\r\n    this._pointerMove( event, event );\r\n  }\r\n};\r\n\r\nproto.ontouchmove = function( event ) {\r\n  var touch = this.getTouch( event.changedTouches );\r\n  if ( touch ) {\r\n    this._pointerMove( event, touch );\r\n  }\r\n};\r\n\r\n/**\r\n * pointer move\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n * @private\r\n */\r\nproto._pointerMove = function( event, pointer ) {\r\n  this.pointerMove( event, pointer );\r\n};\r\n\r\n// public\r\nproto.pointerMove = function( event, pointer ) {\r\n  this.emitEvent( 'pointerMove', [ event, pointer ] );\r\n};\r\n\r\n// ----- end event ----- //\r\n\r\n\r\nproto.onmouseup = function( event ) {\r\n  this._pointerUp( event, event );\r\n};\r\n\r\nproto.onpointerup = function( event ) {\r\n  if ( event.pointerId == this.pointerIdentifier ) {\r\n    this._pointerUp( event, event );\r\n  }\r\n};\r\n\r\nproto.ontouchend = function( event ) {\r\n  var touch = this.getTouch( event.changedTouches );\r\n  if ( touch ) {\r\n    this._pointerUp( event, touch );\r\n  }\r\n};\r\n\r\n/**\r\n * pointer up\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n * @private\r\n */\r\nproto._pointerUp = function( event, pointer ) {\r\n  this._pointerDone();\r\n  this.pointerUp( event, pointer );\r\n};\r\n\r\n// public\r\nproto.pointerUp = function( event, pointer ) {\r\n  this.emitEvent( 'pointerUp', [ event, pointer ] );\r\n};\r\n\r\n// ----- pointer done ----- //\r\n\r\n// triggered on pointer up & pointer cancel\r\nproto._pointerDone = function() {\r\n  // reset properties\r\n  this.isPointerDown = false;\r\n  delete this.pointerIdentifier;\r\n  // remove events\r\n  this._unbindPostStartEvents();\r\n  this.pointerDone();\r\n};\r\n\r\nproto.pointerDone = noop;\r\n\r\n// ----- pointer cancel ----- //\r\n\r\nproto.onpointercancel = function( event ) {\r\n  if ( event.pointerId == this.pointerIdentifier ) {\r\n    this._pointerCancel( event, event );\r\n  }\r\n};\r\n\r\nproto.ontouchcancel = function( event ) {\r\n  var touch = this.getTouch( event.changedTouches );\r\n  if ( touch ) {\r\n    this._pointerCancel( event, touch );\r\n  }\r\n};\r\n\r\n/**\r\n * pointer cancel\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n * @private\r\n */\r\nproto._pointerCancel = function( event, pointer ) {\r\n  this._pointerDone();\r\n  this.pointerCancel( event, pointer );\r\n};\r\n\r\n// public\r\nproto.pointerCancel = function( event, pointer ) {\r\n  this.emitEvent( 'pointerCancel', [ event, pointer ] );\r\n};\r\n\r\n// -----  ----- //\r\n\r\n// utility function for getting x/y coords from event\r\nUnipointer.getPointerPoint = function( pointer ) {\r\n  return {\r\n    x: pointer.pageX,\r\n    y: pointer.pageY\r\n  };\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn Unipointer;\r\n\r\n}));\r\n\r\n/*!\r\n * Unidragger v2.2.3\r\n * Draggable base class\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, unused: true, undef: true, strict: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /*globals define, module, require */\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'unidragger/unidragger',[\r\n      'unipointer/unipointer'\r\n    ], function( Unipointer ) {\r\n      return factory( window, Unipointer );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('unipointer')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Unidragger = factory(\r\n      window,\r\n      window.Unipointer\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Unipointer ) {\r\n\r\n\r\n\r\n// -------------------------- Unidragger -------------------------- //\r\n\r\nfunction Unidragger() {}\r\n\r\n// inherit Unipointer & EvEmitter\r\nvar proto = Unidragger.prototype = Object.create( Unipointer.prototype );\r\n\r\n// ----- bind start ----- //\r\n\r\nproto.bindHandles = function() {\r\n  this._bindHandles( true );\r\n};\r\n\r\nproto.unbindHandles = function() {\r\n  this._bindHandles( false );\r\n};\r\n\r\n/**\r\n * works as unbinder, as you can .bindHandles( false ) to unbind\r\n * @param {Boolean} isBind - will unbind if falsey\r\n */\r\nproto._bindHandles = function( isBind ) {\r\n  // munge isBind, default to true\r\n  isBind = isBind === undefined ? true : !!isBind;\r\n  // bind each handle\r\n  var bindMethod = isBind ? 'addEventListener' : 'removeEventListener';\r\n  for ( var i=0; i < this.handles.length; i++ ) {\r\n    var handle = this.handles[i];\r\n    this._bindStartEvent( handle, isBind );\r\n    handle[ bindMethod ]( 'click', this );\r\n    // touch-action: none to override browser touch gestures\r\n    // metafizzy/flickity#540\r\n    if ( window.PointerEvent ) {\r\n      handle.style.touchAction = isBind ? this._touchActionValue : '';\r\n    }\r\n  }\r\n};\r\n\r\n// prototype so it can be overwriteable by Flickity\r\nproto._touchActionValue = 'none';\r\n\r\n// ----- start event ----- //\r\n\r\n/**\r\n * pointer start\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto.pointerDown = function( event, pointer ) {\r\n  // dismiss range sliders\r\n  if ( event.target.nodeName == 'INPUT' && event.target.type == 'range' ) {\r\n    // reset pointerDown logic\r\n    this.isPointerDown = false;\r\n    delete this.pointerIdentifier;\r\n    return;\r\n  }\r\n\r\n  this._dragPointerDown( event, pointer );\r\n  // kludge to blur focused inputs in dragger\r\n  var focused = document.activeElement;\r\n  if ( focused && focused.blur ) {\r\n    focused.blur();\r\n  }\r\n  // bind move and end events\r\n  this._bindPostStartEvents( event );\r\n  this.emitEvent( 'pointerDown', [ event, pointer ] );\r\n};\r\n\r\n// base pointer down logic\r\nproto._dragPointerDown = function( event, pointer ) {\r\n  // track to see when dragging starts\r\n  this.pointerDownPoint = Unipointer.getPointerPoint( pointer );\r\n\r\n  var canPreventDefault = this.canPreventDefaultOnPointerDown( event, pointer );\r\n  if ( canPreventDefault ) {\r\n    event.preventDefault();\r\n  }\r\n};\r\n\r\n// overwriteable method so Flickity can prevent for scrolling\r\nproto.canPreventDefaultOnPointerDown = function( event ) {\r\n  // prevent default, unless touchstart or <select>\r\n  return event.target.nodeName != 'SELECT';\r\n};\r\n\r\n// ----- move event ----- //\r\n\r\n/**\r\n * drag move\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto.pointerMove = function( event, pointer ) {\r\n  var moveVector = this._dragPointerMove( event, pointer );\r\n  this.emitEvent( 'pointerMove', [ event, pointer, moveVector ] );\r\n  this._dragMove( event, pointer, moveVector );\r\n};\r\n\r\n// base pointer move logic\r\nproto._dragPointerMove = function( event, pointer ) {\r\n  var movePoint = Unipointer.getPointerPoint( pointer );\r\n  var moveVector = {\r\n    x: movePoint.x - this.pointerDownPoint.x,\r\n    y: movePoint.y - this.pointerDownPoint.y\r\n  };\r\n  // start drag if pointer has moved far enough to start drag\r\n  if ( !this.isDragging && this.hasDragStarted( moveVector ) ) {\r\n    this._dragStart( event, pointer );\r\n  }\r\n  return moveVector;\r\n};\r\n\r\n// condition if pointer has moved far enough to start drag\r\nproto.hasDragStarted = function( moveVector ) {\r\n  return Math.abs( moveVector.x ) > 3 || Math.abs( moveVector.y ) > 3;\r\n};\r\n\r\n\r\n// ----- end event ----- //\r\n\r\n/**\r\n * pointer up\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto.pointerUp = function( event, pointer ) {\r\n  this.emitEvent( 'pointerUp', [ event, pointer ] );\r\n  this._dragPointerUp( event, pointer );\r\n};\r\n\r\nproto._dragPointerUp = function( event, pointer ) {\r\n  if ( this.isDragging ) {\r\n    this._dragEnd( event, pointer );\r\n  } else {\r\n    // pointer didn't move enough for drag to start\r\n    this._staticClick( event, pointer );\r\n  }\r\n};\r\n\r\n// -------------------------- drag -------------------------- //\r\n\r\n// dragStart\r\nproto._dragStart = function( event, pointer ) {\r\n  this.isDragging = true;\r\n  this.dragStartPoint = Unipointer.getPointerPoint( pointer );\r\n  // prevent clicks\r\n  this.isPreventingClicks = true;\r\n\r\n  this.dragStart( event, pointer );\r\n};\r\n\r\nproto.dragStart = function( event, pointer ) {\r\n  this.emitEvent( 'dragStart', [ event, pointer ] );\r\n};\r\n\r\n// dragMove\r\nproto._dragMove = function( event, pointer, moveVector ) {\r\n  // do not drag if not dragging yet\r\n  if ( !this.isDragging ) {\r\n    return;\r\n  }\r\n\r\n  this.dragMove( event, pointer, moveVector );\r\n};\r\n\r\nproto.dragMove = function( event, pointer, moveVector ) {\r\n  event.preventDefault();\r\n  this.emitEvent( 'dragMove', [ event, pointer, moveVector ] );\r\n};\r\n\r\n// dragEnd\r\nproto._dragEnd = function( event, pointer ) {\r\n  // set flags\r\n  this.isDragging = false;\r\n  // re-enable clicking async\r\n  setTimeout( function() {\r\n    delete this.isPreventingClicks;\r\n  }.bind( this ) );\r\n\r\n  this.dragEnd( event, pointer );\r\n};\r\n\r\nproto.dragEnd = function( event, pointer ) {\r\n  this.emitEvent( 'dragEnd', [ event, pointer ] );\r\n};\r\n\r\n// ----- onclick ----- //\r\n\r\n// handle all clicks and prevent clicks when dragging\r\nproto.onclick = function( event ) {\r\n  if ( this.isPreventingClicks ) {\r\n    event.preventDefault();\r\n  }\r\n};\r\n\r\n// ----- staticClick ----- //\r\n\r\n// triggered after pointer down & up with no/tiny movement\r\nproto._staticClick = function( event, pointer ) {\r\n  // ignore emulated mouse up clicks\r\n  if ( this.isIgnoringMouseUp && event.type == 'mouseup' ) {\r\n    return;\r\n  }\r\n\r\n  // allow click in <input>s and <textarea>s\r\n  var nodeName = event.target.nodeName;\r\n  if ( nodeName == 'INPUT' || nodeName == 'TEXTAREA' ) {\r\n    event.target.focus();\r\n  }\r\n  this.staticClick( event, pointer );\r\n\r\n  // set flag for emulated clicks 300ms after touchend\r\n  if ( event.type != 'mouseup' ) {\r\n    this.isIgnoringMouseUp = true;\r\n    // reset flag after 300ms\r\n    setTimeout( function() {\r\n      delete this.isIgnoringMouseUp;\r\n    }.bind( this ), 400 );\r\n  }\r\n};\r\n\r\nproto.staticClick = function( event, pointer ) {\r\n  this.emitEvent( 'staticClick', [ event, pointer ] );\r\n};\r\n\r\n// ----- utils ----- //\r\n\r\nUnidragger.getPointerPoint = Unipointer.getPointerPoint;\r\n\r\n// -----  ----- //\r\n\r\nreturn Unidragger;\r\n\r\n}));\r\n\r\n// drag\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/drag',[\r\n      './flickity',\r\n      'unidragger/unidragger',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, Unidragger, utils ) {\r\n      return factory( window, Flickity, Unidragger, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('unidragger'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = factory(\r\n      window,\r\n      window.Flickity,\r\n      window.Unidragger,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, Unidragger, utils ) {\r\n\r\n\r\n\r\n// ----- defaults ----- //\r\n\r\nutils.extend( Flickity.defaults, {\r\n  draggable: '>1',\r\n  dragThreshold: 3,\r\n});\r\n\r\n// ----- create ----- //\r\n\r\nFlickity.createMethods.push('_createDrag');\r\n\r\n// -------------------------- drag prototype -------------------------- //\r\n\r\nvar proto = Flickity.prototype;\r\nutils.extend( proto, Unidragger.prototype );\r\nproto._touchActionValue = 'pan-y';\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nvar isTouch = 'createTouch' in document;\r\nvar isTouchmoveScrollCanceled = false;\r\n\r\nproto._createDrag = function() {\r\n  this.on( 'activate', this.onActivateDrag );\r\n  this.on( 'uiChange', this._uiChangeDrag );\r\n  this.on( 'childUIPointerDown', this._childUIPointerDownDrag );\r\n  this.on( 'deactivate', this.unbindDrag );\r\n  this.on( 'cellChange', this.updateDraggable );\r\n  // TODO updateDraggable on resize? if groupCells & slides change\r\n  // HACK - add seemingly innocuous handler to fix iOS 10 scroll behavior\r\n  // #457, RubaXa/Sortable#973\r\n  if ( isTouch && !isTouchmoveScrollCanceled ) {\r\n    window.addEventListener( 'touchmove', function() {});\r\n    isTouchmoveScrollCanceled = true;\r\n  }\r\n};\r\n\r\nproto.onActivateDrag = function() {\r\n  this.handles = [ this.viewport ];\r\n  this.bindHandles();\r\n  this.updateDraggable();\r\n};\r\n\r\nproto.onDeactivateDrag = function() {\r\n  this.unbindHandles();\r\n  this.element.classList.remove('is-draggable');\r\n};\r\n\r\nproto.updateDraggable = function() {\r\n  // disable dragging if less than 2 slides. #278\r\n  if ( this.options.draggable == '>1' ) {\r\n    this.isDraggable = this.slides.length > 1;\r\n  } else {\r\n    this.isDraggable = this.options.draggable;\r\n  }\r\n  if ( this.isDraggable ) {\r\n    this.element.classList.add('is-draggable');\r\n  } else {\r\n    this.element.classList.remove('is-draggable');\r\n  }\r\n};\r\n\r\n// backwards compatibility\r\nproto.bindDrag = function() {\r\n  this.options.draggable = true;\r\n  this.updateDraggable();\r\n};\r\n\r\nproto.unbindDrag = function() {\r\n  this.options.draggable = false;\r\n  this.updateDraggable();\r\n};\r\n\r\nproto._uiChangeDrag = function() {\r\n  delete this.isFreeScrolling;\r\n};\r\n\r\nproto._childUIPointerDownDrag = function( event ) {\r\n  if ( !this.isDraggable ) {\r\n    return;\r\n  }\r\n  event.preventDefault();\r\n  this.pointerDownFocus( event );\r\n};\r\n\r\n// -------------------------- pointer events -------------------------- //\r\n\r\n// nodes that have text fields\r\nvar cursorNodes = {\r\n  TEXTAREA: true,\r\n  INPUT: true,\r\n  OPTION: true,\r\n};\r\n\r\n// input types that do not have text fields\r\nvar clickTypes = {\r\n  radio: true,\r\n  checkbox: true,\r\n  button: true,\r\n  submit: true,\r\n  image: true,\r\n  file: true,\r\n};\r\n\r\nproto.pointerDown = function( event, pointer ) {\r\n  if ( !this.isDraggable ) {\r\n    this._pointerDownDefault( event, pointer );\r\n    return;\r\n  }\r\n  // dismiss inputs with text fields. #403, #404\r\n  var isCursorInput = cursorNodes[ event.target.nodeName ] &&\r\n    !clickTypes[ event.target.type ];\r\n  if ( isCursorInput ) {\r\n    // reset pointerDown logic\r\n    this.isPointerDown = false;\r\n    delete this.pointerIdentifier;\r\n    return;\r\n  }\r\n\r\n  // kludge to blur focused inputs in dragger\r\n  var focused = document.activeElement;\r\n  var canBlur = focused && focused.blur && focused != this.element &&\r\n    // do not blur body for IE9 & 10, #117\r\n    focused != document.body;\r\n  if ( canBlur ) {\r\n    focused.blur();\r\n  }\r\n  this.pointerDownFocus( event );\r\n  // stop if it was moving\r\n  this.dragX = this.x;\r\n  this.viewport.classList.add('is-pointer-down');\r\n  // track scrolling\r\n  this.pointerDownScroll = getScrollPosition();\r\n  window.addEventListener( 'scroll', this );\r\n\r\n  this._pointerDownDefault( event, pointer );\r\n};\r\n\r\nproto._pointerDownDefault = function( event, pointer ) {\r\n  this._dragPointerDown( event, pointer );\r\n  // bind move and end events\r\n  this._bindPostStartEvents( event );\r\n  this.dispatchEvent( 'pointerDown', event, [ pointer ] );\r\n};\r\n\r\nproto.pointerDownFocus = function( event ) {\r\n  // focus element, if not touch, and its not an input or select\r\n  var canPointerDown = getCanPointerDown( event );\r\n  if ( !canPointerDown ) {\r\n    this.focus();\r\n  }\r\n};\r\n\r\nvar focusNodes = {\r\n  INPUT: true,\r\n  SELECT: true,\r\n};\r\n\r\nfunction getCanPointerDown( event ) {\r\n  var isTouchStart = event.type == 'touchstart';\r\n  var isTouchPointer = event.pointerType == 'touch';\r\n  var isFocusNode = focusNodes[ event.target.nodeName ];\r\n  return isTouchStart || isTouchPointer || isFocusNode;\r\n}\r\n\r\nproto.canPreventDefaultOnPointerDown = function( event ) {\r\n  // prevent default, unless touchstart or input\r\n  var canPointerDown = getCanPointerDown( event );\r\n  return this.isDraggable && !canPointerDown;\r\n};\r\n\r\n// ----- move ----- //\r\n\r\nproto.hasDragStarted = function( moveVector ) {\r\n  return Math.abs( moveVector.x ) > this.options.dragThreshold;\r\n};\r\n\r\n// ----- up ----- //\r\n\r\nproto.pointerUp = function( event, pointer ) {\r\n  delete this.isTouchScrolling;\r\n  this.viewport.classList.remove('is-pointer-down');\r\n  this.dispatchEvent( 'pointerUp', event, [ pointer ] );\r\n  this._dragPointerUp( event, pointer );\r\n};\r\n\r\nproto.pointerDone = function() {\r\n  window.removeEventListener( 'scroll', this );\r\n  delete this.pointerDownScroll;\r\n};\r\n\r\n// -------------------------- dragging -------------------------- //\r\n\r\nproto.dragStart = function( event, pointer ) {\r\n  if ( !this.isDraggable ) {\r\n    return;\r\n  }\r\n  this.dragStartPosition = this.x;\r\n  this.startAnimation();\r\n  window.removeEventListener( 'scroll', this );\r\n  this.dispatchEvent( 'dragStart', event, [ pointer ] );\r\n};\r\n\r\nproto.pointerMove = function( event, pointer ) {\r\n  var moveVector = this._dragPointerMove( event, pointer );\r\n  this.dispatchEvent( 'pointerMove', event, [ pointer, moveVector ] );\r\n  this._dragMove( event, pointer, moveVector );\r\n};\r\n\r\nproto.dragMove = function( event, pointer, moveVector ) {\r\n  if ( !this.isDraggable ) {\r\n    return;\r\n  }\r\n  event.preventDefault();\r\n\r\n  this.previousDragX = this.dragX;\r\n  // reverse if right-to-left\r\n  var direction = this.options.rightToLeft ? -1 : 1;\r\n  if ( this.options.wrapAround ) {\r\n    // wrap around move. #589\r\n    moveVector.x = moveVector.x % this.slideableWidth;\r\n  }\r\n  var dragX = this.dragStartPosition + moveVector.x * direction;\r\n\r\n  if ( !this.options.wrapAround && this.slides.length ) {\r\n    // slow drag\r\n    var originBound = Math.max( -this.slides[0].target, this.dragStartPosition );\r\n    dragX = dragX > originBound ? ( dragX + originBound ) * 0.5 : dragX;\r\n    var endBound = Math.min( -this.getLastSlide().target, this.dragStartPosition );\r\n    dragX = dragX < endBound ? ( dragX + endBound ) * 0.5 : dragX;\r\n  }\r\n\r\n  this.dragX = dragX;\r\n\r\n  this.dragMoveTime = new Date();\r\n  this.dispatchEvent( 'dragMove', event, [ pointer, moveVector ] );\r\n};\r\n\r\nproto.dragEnd = function( event, pointer ) {\r\n  if ( !this.isDraggable ) {\r\n    return;\r\n  }\r\n  if ( this.options.freeScroll ) {\r\n    this.isFreeScrolling = true;\r\n  }\r\n  // set selectedIndex based on where flick will end up\r\n  var index = this.dragEndRestingSelect();\r\n\r\n  if ( this.options.freeScroll && !this.options.wrapAround ) {\r\n    // if free-scroll & not wrap around\r\n    // do not free-scroll if going outside of bounding slides\r\n    // so bounding slides can attract slider, and keep it in bounds\r\n    var restingX = this.getRestingPosition();\r\n    this.isFreeScrolling = -restingX > this.slides[0].target &&\r\n      -restingX < this.getLastSlide().target;\r\n  } else if ( !this.options.freeScroll && index == this.selectedIndex ) {\r\n    // boost selection if selected index has not changed\r\n    index += this.dragEndBoostSelect();\r\n  }\r\n  delete this.previousDragX;\r\n  // apply selection\r\n  // TODO refactor this, selecting here feels weird\r\n  // HACK, set flag so dragging stays in correct direction\r\n  this.isDragSelect = this.options.wrapAround;\r\n  this.select( index );\r\n  delete this.isDragSelect;\r\n  this.dispatchEvent( 'dragEnd', event, [ pointer ] );\r\n};\r\n\r\nproto.dragEndRestingSelect = function() {\r\n  var restingX = this.getRestingPosition();\r\n  // how far away from selected slide\r\n  var distance = Math.abs( this.getSlideDistance( -restingX, this.selectedIndex ) );\r\n  // get closet resting going up and going down\r\n  var positiveResting = this._getClosestResting( restingX, distance, 1 );\r\n  var negativeResting = this._getClosestResting( restingX, distance, -1 );\r\n  // use closer resting for wrap-around\r\n  var index = positiveResting.distance < negativeResting.distance ?\r\n    positiveResting.index : negativeResting.index;\r\n  return index;\r\n};\r\n\r\n/**\r\n * given resting X and distance to selected cell\r\n * get the distance and index of the closest cell\r\n * @param {Number} restingX - estimated post-flick resting position\r\n * @param {Number} distance - distance to selected cell\r\n * @param {Integer} increment - +1 or -1, going up or down\r\n * @returns {Object} - { distance: {Number}, index: {Integer} }\r\n */\r\nproto._getClosestResting = function( restingX, distance, increment ) {\r\n  var index = this.selectedIndex;\r\n  var minDistance = Infinity;\r\n  var condition = this.options.contain && !this.options.wrapAround ?\r\n    // if contain, keep going if distance is equal to minDistance\r\n    function( d, md ) { return d <= md; } : function( d, md ) { return d < md; };\r\n  while ( condition( distance, minDistance ) ) {\r\n    // measure distance to next cell\r\n    index += increment;\r\n    minDistance = distance;\r\n    distance = this.getSlideDistance( -restingX, index );\r\n    if ( distance === null ) {\r\n      break;\r\n    }\r\n    distance = Math.abs( distance );\r\n  }\r\n  return {\r\n    distance: minDistance,\r\n    // selected was previous index\r\n    index: index - increment\r\n  };\r\n};\r\n\r\n/**\r\n * measure distance between x and a slide target\r\n * @param {Number} x\r\n * @param {Integer} index - slide index\r\n */\r\nproto.getSlideDistance = function( x, index ) {\r\n  var len = this.slides.length;\r\n  // wrap around if at least 2 slides\r\n  var isWrapAround = this.options.wrapAround && len > 1;\r\n  var slideIndex = isWrapAround ? utils.modulo( index, len ) : index;\r\n  var slide = this.slides[ slideIndex ];\r\n  if ( !slide ) {\r\n    return null;\r\n  }\r\n  // add distance for wrap-around slides\r\n  var wrap = isWrapAround ? this.slideableWidth * Math.floor( index / len ) : 0;\r\n  return x - ( slide.target + wrap );\r\n};\r\n\r\nproto.dragEndBoostSelect = function() {\r\n  // do not boost if no previousDragX or dragMoveTime\r\n  if ( this.previousDragX === undefined || !this.dragMoveTime ||\r\n    // or if drag was held for 100 ms\r\n    new Date() - this.dragMoveTime > 100 ) {\r\n    return 0;\r\n  }\r\n\r\n  var distance = this.getSlideDistance( -this.dragX, this.selectedIndex );\r\n  var delta = this.previousDragX - this.dragX;\r\n  if ( distance > 0 && delta > 0 ) {\r\n    // boost to next if moving towards the right, and positive velocity\r\n    return 1;\r\n  } else if ( distance < 0 && delta < 0 ) {\r\n    // boost to previous if moving towards the left, and negative velocity\r\n    return -1;\r\n  }\r\n  return 0;\r\n};\r\n\r\n// ----- staticClick ----- //\r\n\r\nproto.staticClick = function( event, pointer ) {\r\n  // get clickedCell, if cell was clicked\r\n  var clickedCell = this.getParentCell( event.target );\r\n  var cellElem = clickedCell && clickedCell.element;\r\n  var cellIndex = clickedCell && this.cells.indexOf( clickedCell );\r\n  this.dispatchEvent( 'staticClick', event, [ pointer, cellElem, cellIndex ] );\r\n};\r\n\r\n// ----- scroll ----- //\r\n\r\nproto.onscroll = function() {\r\n  var scroll = getScrollPosition();\r\n  var scrollMoveX = this.pointerDownScroll.x - scroll.x;\r\n  var scrollMoveY = this.pointerDownScroll.y - scroll.y;\r\n  // cancel click/tap if scroll is too much\r\n  if ( Math.abs( scrollMoveX ) > 3 || Math.abs( scrollMoveY ) > 3 ) {\r\n    this._pointerDone();\r\n  }\r\n};\r\n\r\n// ----- utils ----- //\r\n\r\nfunction getScrollPosition() {\r\n  return {\r\n    x: window.pageXOffset,\r\n    y: window.pageYOffset\r\n  };\r\n}\r\n\r\n// -----  ----- //\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n/*!\r\n * Tap listener v2.0.0\r\n * listens to taps\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, unused: true, undef: true, strict: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false*/ /*globals define, module, require */\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'tap-listener/tap-listener',[\r\n      'unipointer/unipointer'\r\n    ], function( Unipointer ) {\r\n      return factory( window, Unipointer );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('unipointer')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.TapListener = factory(\r\n      window,\r\n      window.Unipointer\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Unipointer ) {\r\n\r\n\r\n\r\n// --------------------------  TapListener -------------------------- //\r\n\r\nfunction TapListener( elem ) {\r\n  this.bindTap( elem );\r\n}\r\n\r\n// inherit Unipointer & EventEmitter\r\nvar proto = TapListener.prototype = Object.create( Unipointer.prototype );\r\n\r\n/**\r\n * bind tap event to element\r\n * @param {Element} elem\r\n */\r\nproto.bindTap = function( elem ) {\r\n  if ( !elem ) {\r\n    return;\r\n  }\r\n  this.unbindTap();\r\n  this.tapElement = elem;\r\n  this._bindStartEvent( elem, true );\r\n};\r\n\r\nproto.unbindTap = function() {\r\n  if ( !this.tapElement ) {\r\n    return;\r\n  }\r\n  this._bindStartEvent( this.tapElement, true );\r\n  delete this.tapElement;\r\n};\r\n\r\n/**\r\n * pointer up\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto.pointerUp = function( event, pointer ) {\r\n  // ignore emulated mouse up clicks\r\n  if ( this.isIgnoringMouseUp && event.type == 'mouseup' ) {\r\n    return;\r\n  }\r\n\r\n  var pointerPoint = Unipointer.getPointerPoint( pointer );\r\n  var boundingRect = this.tapElement.getBoundingClientRect();\r\n  var scrollX = window.pageXOffset;\r\n  var scrollY = window.pageYOffset;\r\n  // calculate if pointer is inside tapElement\r\n  var isInside = pointerPoint.x >= boundingRect.left + scrollX &&\r\n    pointerPoint.x <= boundingRect.right + scrollX &&\r\n    pointerPoint.y >= boundingRect.top + scrollY &&\r\n    pointerPoint.y <= boundingRect.bottom + scrollY;\r\n  // trigger callback if pointer is inside element\r\n  if ( isInside ) {\r\n    this.emitEvent( 'tap', [ event, pointer ] );\r\n  }\r\n\r\n  // set flag for emulated clicks 300ms after touchend\r\n  if ( event.type != 'mouseup' ) {\r\n    this.isIgnoringMouseUp = true;\r\n    // reset flag after 300ms\r\n    var _this = this;\r\n    setTimeout( function() {\r\n      delete _this.isIgnoringMouseUp;\r\n    }, 400 );\r\n  }\r\n};\r\n\r\nproto.destroy = function() {\r\n  this.pointerDone();\r\n  this.unbindTap();\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn TapListener;\r\n\r\n}));\r\n\r\n// prev/next buttons\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/prev-next-button',[\r\n      './flickity',\r\n      'tap-listener/tap-listener',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, TapListener, utils ) {\r\n      return factory( window, Flickity, TapListener, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('tap-listener'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window,\r\n      window.Flickity,\r\n      window.TapListener,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, TapListener, utils ) {\r\n'use strict';\r\n\r\nvar svgURI = 'http://www.w3.org/2000/svg';\r\n\r\n// -------------------------- PrevNextButton -------------------------- //\r\n\r\nfunction PrevNextButton( direction, parent ) {\r\n  this.direction = direction;\r\n  this.parent = parent;\r\n  this._create();\r\n}\r\n\r\nPrevNextButton.prototype = Object.create( TapListener.prototype );\r\n\r\nPrevNextButton.prototype._create = function() {\r\n  // properties\r\n  this.isEnabled = true;\r\n  this.isPrevious = this.direction == -1;\r\n  var leftDirection = this.parent.options.rightToLeft ? 1 : -1;\r\n  this.isLeft = this.direction == leftDirection;\r\n\r\n  var element = this.element = document.createElement('button');\r\n  element.className = 'flickity-button flickity-prev-next-button';\r\n  element.className += this.isPrevious ? ' previous' : ' next';\r\n  // prevent button from submitting form http://stackoverflow.com/a/10836076/182183\r\n  element.setAttribute( 'type', 'button' );\r\n  // init as disabled\r\n  this.disable();\r\n\r\n  element.setAttribute( 'aria-label', this.isPrevious ? 'Previous' : 'Next' );\r\n\r\n  // create arrow\r\n  var svg = this.createSVG();\r\n  element.appendChild( svg );\r\n  // events\r\n  this.on( 'tap', this.onTap );\r\n  this.parent.on( 'select', this.update.bind( this ) );\r\n  this.on( 'pointerDown', this.parent.childUIPointerDown.bind( this.parent ) );\r\n};\r\n\r\nPrevNextButton.prototype.activate = function() {\r\n  this.bindTap( this.element );\r\n  // click events from keyboard\r\n  this.element.addEventListener( 'click', this );\r\n  // add to DOM\r\n  this.parent.element.appendChild( this.element );\r\n};\r\n\r\nPrevNextButton.prototype.deactivate = function() {\r\n  // remove from DOM\r\n  this.parent.element.removeChild( this.element );\r\n  // do regular TapListener destroy\r\n  TapListener.prototype.destroy.call( this );\r\n  // click events from keyboard\r\n  this.element.removeEventListener( 'click', this );\r\n};\r\n\r\nPrevNextButton.prototype.createSVG = function() {\r\n  var svg = document.createElementNS( svgURI, 'svg');\r\n  svg.setAttribute( 'class', 'flickity-button-icon' );\r\n  svg.setAttribute( 'viewBox', '0 0 100 100' );\r\n  var path = document.createElementNS( svgURI, 'path');\r\n  var pathMovements = getArrowMovements( this.parent.options.arrowShape );\r\n  path.setAttribute( 'd', pathMovements );\r\n  path.setAttribute( 'class', 'arrow' );\r\n  // rotate arrow\r\n  if ( !this.isLeft ) {\r\n    path.setAttribute( 'transform', 'translate(100, 100) rotate(180) ' );\r\n  }\r\n  svg.appendChild( path );\r\n  return svg;\r\n};\r\n\r\n// get SVG path movmement\r\nfunction getArrowMovements( shape ) {\r\n  // use shape as movement if string\r\n  if ( typeof shape == 'string' ) {\r\n    return shape;\r\n  }\r\n  // create movement string\r\n  return 'M ' + shape.x0 + ',50' +\r\n    ' L ' + shape.x1 + ',' + ( shape.y1 + 50 ) +\r\n    ' L ' + shape.x2 + ',' + ( shape.y2 + 50 ) +\r\n    ' L ' + shape.x3 + ',50 ' +\r\n    ' L ' + shape.x2 + ',' + ( 50 - shape.y2 ) +\r\n    ' L ' + shape.x1 + ',' + ( 50 - shape.y1 ) +\r\n    ' Z';\r\n}\r\n\r\nPrevNextButton.prototype.onTap = function() {\r\n  if ( !this.isEnabled ) {\r\n    return;\r\n  }\r\n  this.parent.uiChange();\r\n  var method = this.isPrevious ? 'previous' : 'next';\r\n  this.parent[ method ]();\r\n};\r\n\r\nPrevNextButton.prototype.handleEvent = utils.handleEvent;\r\n\r\nPrevNextButton.prototype.onclick = function() {\r\n  // only allow clicks from keyboard\r\n  var focused = document.activeElement;\r\n  if ( focused && focused == this.element ) {\r\n    this.onTap();\r\n  }\r\n};\r\n\r\n// -----  ----- //\r\n\r\nPrevNextButton.prototype.enable = function() {\r\n  if ( this.isEnabled ) {\r\n    return;\r\n  }\r\n  this.element.disabled = false;\r\n  this.isEnabled = true;\r\n};\r\n\r\nPrevNextButton.prototype.disable = function() {\r\n  if ( !this.isEnabled ) {\r\n    return;\r\n  }\r\n  this.element.disabled = true;\r\n  this.isEnabled = false;\r\n};\r\n\r\nPrevNextButton.prototype.update = function() {\r\n  // index of first or last slide, if previous or next\r\n  var slides = this.parent.slides;\r\n  // enable is wrapAround and at least 2 slides\r\n  if ( this.parent.options.wrapAround && slides.length > 1 ) {\r\n    this.enable();\r\n    return;\r\n  }\r\n  var lastIndex = slides.length ? slides.length - 1 : 0;\r\n  var boundIndex = this.isPrevious ? 0 : lastIndex;\r\n  var method = this.parent.selectedIndex == boundIndex ? 'disable' : 'enable';\r\n  this[ method ]();\r\n};\r\n\r\nPrevNextButton.prototype.destroy = function() {\r\n  this.deactivate();\r\n};\r\n\r\n// -------------------------- Flickity prototype -------------------------- //\r\n\r\nutils.extend( Flickity.defaults, {\r\n  prevNextButtons: true,\r\n  arrowShape: {\r\n    x0: 10,\r\n    x1: 60, y1: 50,\r\n    x2: 70, y2: 40,\r\n    x3: 30\r\n  }\r\n});\r\n\r\nFlickity.createMethods.push('_createPrevNextButtons');\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createPrevNextButtons = function() {\r\n  if ( !this.options.prevNextButtons ) {\r\n    return;\r\n  }\r\n\r\n  this.prevButton = new PrevNextButton( -1, this );\r\n  this.nextButton = new PrevNextButton( 1, this );\r\n\r\n  this.on( 'activate', this.activatePrevNextButtons );\r\n};\r\n\r\nproto.activatePrevNextButtons = function() {\r\n  this.prevButton.activate();\r\n  this.nextButton.activate();\r\n  this.on( 'deactivate', this.deactivatePrevNextButtons );\r\n};\r\n\r\nproto.deactivatePrevNextButtons = function() {\r\n  this.prevButton.deactivate();\r\n  this.nextButton.deactivate();\r\n  this.off( 'deactivate', this.deactivatePrevNextButtons );\r\n};\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nFlickity.PrevNextButton = PrevNextButton;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n// page dots\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/page-dots',[\r\n      './flickity',\r\n      'tap-listener/tap-listener',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, TapListener, utils ) {\r\n      return factory( window, Flickity, TapListener, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('tap-listener'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window,\r\n      window.Flickity,\r\n      window.TapListener,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, TapListener, utils ) {\r\n\r\n// -------------------------- PageDots -------------------------- //\r\n\r\n\r\n\r\nfunction PageDots( parent ) {\r\n  this.parent = parent;\r\n  this._create();\r\n}\r\n\r\nPageDots.prototype = new TapListener();\r\n\r\nPageDots.prototype._create = function() {\r\n  // create holder element\r\n  this.holder = document.createElement('ol');\r\n  this.holder.className = 'flickity-page-dots';\r\n  // create dots, array of elements\r\n  this.dots = [];\r\n  // events\r\n  this.on( 'tap', this.onTap );\r\n  this.on( 'pointerDown', this.parent.childUIPointerDown.bind( this.parent ) );\r\n};\r\n\r\nPageDots.prototype.activate = function() {\r\n  this.setDots();\r\n  this.bindTap( this.holder );\r\n  // add to DOM\r\n  this.parent.element.appendChild( this.holder );\r\n};\r\n\r\nPageDots.prototype.deactivate = function() {\r\n  // remove from DOM\r\n  this.parent.element.removeChild( this.holder );\r\n  TapListener.prototype.destroy.call( this );\r\n};\r\n\r\nPageDots.prototype.setDots = function() {\r\n  // get difference between number of slides and number of dots\r\n  var delta = this.parent.slides.length - this.dots.length;\r\n  if ( delta > 0 ) {\r\n    this.addDots( delta );\r\n  } else if ( delta < 0 ) {\r\n    this.removeDots( -delta );\r\n  }\r\n};\r\n\r\nPageDots.prototype.addDots = function( count ) {\r\n  var fragment = document.createDocumentFragment();\r\n  var newDots = [];\r\n  var length = this.dots.length;\r\n  var max = length + count;\r\n\r\n  for ( var i = length; i < max; i++ ) {\r\n    var dot = document.createElement('li');\r\n    dot.className = 'dot';\r\n    dot.setAttribute( 'aria-label', 'Page dot ' + ( i + 1 ) );\r\n    fragment.appendChild( dot );\r\n    newDots.push( dot );\r\n  }\r\n\r\n  this.holder.appendChild( fragment );\r\n  this.dots = this.dots.concat( newDots );\r\n};\r\n\r\nPageDots.prototype.removeDots = function( count ) {\r\n  // remove from this.dots collection\r\n  var removeDots = this.dots.splice( this.dots.length - count, count );\r\n  // remove from DOM\r\n  removeDots.forEach( function( dot ) {\r\n    this.holder.removeChild( dot );\r\n  }, this );\r\n};\r\n\r\nPageDots.prototype.updateSelected = function() {\r\n  // remove selected class on previous\r\n  if ( this.selectedDot ) {\r\n    this.selectedDot.className = 'dot';\r\n    this.selectedDot.removeAttribute('aria-current');\r\n  }\r\n  // don't proceed if no dots\r\n  if ( !this.dots.length ) {\r\n    return;\r\n  }\r\n  this.selectedDot = this.dots[ this.parent.selectedIndex ];\r\n  this.selectedDot.className = 'dot is-selected';\r\n  this.selectedDot.setAttribute( 'aria-current', 'step' );\r\n};\r\n\r\nPageDots.prototype.onTap = function( event ) {\r\n  var target = event.target;\r\n  // only care about dot clicks\r\n  if ( target.nodeName != 'LI' ) {\r\n    return;\r\n  }\r\n\r\n  this.parent.uiChange();\r\n  var index = this.dots.indexOf( target );\r\n  this.parent.select( index );\r\n};\r\n\r\nPageDots.prototype.destroy = function() {\r\n  this.deactivate();\r\n};\r\n\r\nFlickity.PageDots = PageDots;\r\n\r\n// -------------------------- Flickity -------------------------- //\r\n\r\nutils.extend( Flickity.defaults, {\r\n  pageDots: true\r\n});\r\n\r\nFlickity.createMethods.push('_createPageDots');\r\n\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createPageDots = function() {\r\n  if ( !this.options.pageDots ) {\r\n    return;\r\n  }\r\n  this.pageDots = new PageDots( this );\r\n  // events\r\n  this.on( 'activate', this.activatePageDots );\r\n  this.on( 'select', this.updateSelectedPageDots );\r\n  this.on( 'cellChange', this.updatePageDots );\r\n  this.on( 'resize', this.updatePageDots );\r\n  this.on( 'deactivate', this.deactivatePageDots );\r\n};\r\n\r\nproto.activatePageDots = function() {\r\n  this.pageDots.activate();\r\n};\r\n\r\nproto.updateSelectedPageDots = function() {\r\n  this.pageDots.updateSelected();\r\n};\r\n\r\nproto.updatePageDots = function() {\r\n  this.pageDots.setDots();\r\n};\r\n\r\nproto.deactivatePageDots = function() {\r\n  this.pageDots.deactivate();\r\n};\r\n\r\n// -----  ----- //\r\n\r\nFlickity.PageDots = PageDots;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n// player & autoPlay\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/player',[\r\n      'ev-emitter/ev-emitter',\r\n      'fizzy-ui-utils/utils',\r\n      './flickity'\r\n    ], function( EvEmitter, utils, Flickity ) {\r\n      return factory( EvEmitter, utils, Flickity );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      require('ev-emitter'),\r\n      require('fizzy-ui-utils'),\r\n      require('./flickity')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window.EvEmitter,\r\n      window.fizzyUIUtils,\r\n      window.Flickity\r\n    );\r\n  }\r\n\r\n}( window, function factory( EvEmitter, utils, Flickity ) {\r\n\r\n\r\n\r\n// -------------------------- Page Visibility -------------------------- //\r\n// https://developer.mozilla.org/en-US/docs/Web/Guide/User_experience/Using_the_Page_Visibility_API\r\n\r\nvar hiddenProperty, visibilityEvent;\r\nif ( 'hidden' in document ) {\r\n  hiddenProperty = 'hidden';\r\n  visibilityEvent = 'visibilitychange';\r\n} else if ( 'webkitHidden' in document ) {\r\n  hiddenProperty = 'webkitHidden';\r\n  visibilityEvent = 'webkitvisibilitychange';\r\n}\r\n\r\n// -------------------------- Player -------------------------- //\r\n\r\nfunction Player( parent ) {\r\n  this.parent = parent;\r\n  this.state = 'stopped';\r\n  // visibility change event handler\r\n  if ( visibilityEvent ) {\r\n    this.onVisibilityChange = function() {\r\n      this.visibilityChange();\r\n    }.bind( this );\r\n    this.onVisibilityPlay = function() {\r\n      this.visibilityPlay();\r\n    }.bind( this );\r\n  }\r\n}\r\n\r\nPlayer.prototype = Object.create( EvEmitter.prototype );\r\n\r\n// start play\r\nPlayer.prototype.play = function() {\r\n  if ( this.state == 'playing' ) {\r\n    return;\r\n  }\r\n  // do not play if page is hidden, start playing when page is visible\r\n  var isPageHidden = document[ hiddenProperty ];\r\n  if ( visibilityEvent && isPageHidden ) {\r\n    document.addEventListener( visibilityEvent, this.onVisibilityPlay );\r\n    return;\r\n  }\r\n\r\n  this.state = 'playing';\r\n  // listen to visibility change\r\n  if ( visibilityEvent ) {\r\n    document.addEventListener( visibilityEvent, this.onVisibilityChange );\r\n  }\r\n  // start ticking\r\n  this.tick();\r\n};\r\n\r\nPlayer.prototype.tick = function() {\r\n  // do not tick if not playing\r\n  if ( this.state != 'playing' ) {\r\n    return;\r\n  }\r\n\r\n  var time = this.parent.options.autoPlay;\r\n  // default to 3 seconds\r\n  time = typeof time == 'number' ? time : 3000;\r\n  var _this = this;\r\n  // HACK: reset ticks if stopped and started within interval\r\n  this.clear();\r\n  this.timeout = setTimeout( function() {\r\n    _this.parent.next( true );\r\n    _this.tick();\r\n  }, time );\r\n};\r\n\r\nPlayer.prototype.stop = function() {\r\n  this.state = 'stopped';\r\n  this.clear();\r\n  // remove visibility change event\r\n  if ( visibilityEvent ) {\r\n    document.removeEventListener( visibilityEvent, this.onVisibilityChange );\r\n  }\r\n};\r\n\r\nPlayer.prototype.clear = function() {\r\n  clearTimeout( this.timeout );\r\n};\r\n\r\nPlayer.prototype.pause = function() {\r\n  if ( this.state == 'playing' ) {\r\n    this.state = 'paused';\r\n    this.clear();\r\n  }\r\n};\r\n\r\nPlayer.prototype.unpause = function() {\r\n  // re-start play if paused\r\n  if ( this.state == 'paused' ) {\r\n    this.play();\r\n  }\r\n};\r\n\r\n// pause if page visibility is hidden, unpause if visible\r\nPlayer.prototype.visibilityChange = function() {\r\n  var isPageHidden = document[ hiddenProperty ];\r\n  this[ isPageHidden ? 'pause' : 'unpause' ]();\r\n};\r\n\r\nPlayer.prototype.visibilityPlay = function() {\r\n  this.play();\r\n  document.removeEventListener( visibilityEvent, this.onVisibilityPlay );\r\n};\r\n\r\n// -------------------------- Flickity -------------------------- //\r\n\r\nutils.extend( Flickity.defaults, {\r\n  pauseAutoPlayOnHover: true\r\n});\r\n\r\nFlickity.createMethods.push('_createPlayer');\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createPlayer = function() {\r\n  this.player = new Player( this );\r\n\r\n  this.on( 'activate', this.activatePlayer );\r\n  this.on( 'uiChange', this.stopPlayer );\r\n  this.on( 'pointerDown', this.stopPlayer );\r\n  this.on( 'deactivate', this.deactivatePlayer );\r\n};\r\n\r\nproto.activatePlayer = function() {\r\n  if ( !this.options.autoPlay ) {\r\n    return;\r\n  }\r\n  this.player.play();\r\n  this.element.addEventListener( 'mouseenter', this );\r\n};\r\n\r\n// Player API, don't hate the ... thanks I know where the door is\r\n\r\nproto.playPlayer = function() {\r\n  this.player.play();\r\n};\r\n\r\nproto.stopPlayer = function() {\r\n  this.player.stop();\r\n};\r\n\r\nproto.pausePlayer = function() {\r\n  this.player.pause();\r\n};\r\n\r\nproto.unpausePlayer = function() {\r\n  this.player.unpause();\r\n};\r\n\r\nproto.deactivatePlayer = function() {\r\n  this.player.stop();\r\n  this.element.removeEventListener( 'mouseenter', this );\r\n};\r\n\r\n// ----- mouseenter/leave ----- //\r\n\r\n// pause auto-play on hover\r\nproto.onmouseenter = function() {\r\n  if ( !this.options.pauseAutoPlayOnHover ) {\r\n    return;\r\n  }\r\n  this.player.pause();\r\n  this.element.addEventListener( 'mouseleave', this );\r\n};\r\n\r\n// resume auto-play on hover off\r\nproto.onmouseleave = function() {\r\n  this.player.unpause();\r\n  this.element.removeEventListener( 'mouseleave', this );\r\n};\r\n\r\n// -----  ----- //\r\n\r\nFlickity.Player = Player;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n// add, remove cell\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/add-remove-cell',[\r\n      './flickity',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, utils ) {\r\n      return factory( window, Flickity, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window,\r\n      window.Flickity,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, utils ) {\r\n\r\n\r\n\r\n// append cells to a document fragment\r\nfunction getCellsFragment( cells ) {\r\n  var fragment = document.createDocumentFragment();\r\n  cells.forEach( function( cell ) {\r\n    fragment.appendChild( cell.element );\r\n  });\r\n  return fragment;\r\n}\r\n\r\n// -------------------------- add/remove cell prototype -------------------------- //\r\n\r\nvar proto = Flickity.prototype;\r\n\r\n/**\r\n * Insert, prepend, or append cells\r\n * @param {Element, Array, NodeList} elems\r\n * @param {Integer} index\r\n */\r\nproto.insert = function( elems, index ) {\r\n  var cells = this._makeCells( elems );\r\n  if ( !cells || !cells.length ) {\r\n    return;\r\n  }\r\n  var len = this.cells.length;\r\n  // default to append\r\n  index = index === undefined ? len : index;\r\n  // add cells with document fragment\r\n  var fragment = getCellsFragment( cells );\r\n  // append to slider\r\n  var isAppend = index == len;\r\n  if ( isAppend ) {\r\n    this.slider.appendChild( fragment );\r\n  } else {\r\n    var insertCellElement = this.cells[ index ].element;\r\n    this.slider.insertBefore( fragment, insertCellElement );\r\n  }\r\n  // add to this.cells\r\n  if ( index === 0 ) {\r\n    // prepend, add to start\r\n    this.cells = cells.concat( this.cells );\r\n  } else if ( isAppend ) {\r\n    // append, add to end\r\n    this.cells = this.cells.concat( cells );\r\n  } else {\r\n    // insert in this.cells\r\n    var endCells = this.cells.splice( index, len - index );\r\n    this.cells = this.cells.concat( cells ).concat( endCells );\r\n  }\r\n\r\n  this._sizeCells( cells );\r\n  this.cellChange( index, true );\r\n};\r\n\r\nproto.append = function( elems ) {\r\n  this.insert( elems, this.cells.length );\r\n};\r\n\r\nproto.prepend = function( elems ) {\r\n  this.insert( elems, 0 );\r\n};\r\n\r\n/**\r\n * Remove cells\r\n * @param {Element, Array, NodeList} elems\r\n */\r\nproto.remove = function( elems ) {\r\n  var cells = this.getCells( elems );\r\n  if ( !cells || !cells.length ) {\r\n    return;\r\n  }\r\n\r\n  var minCellIndex = this.cells.length - 1;\r\n  // remove cells from collection & DOM\r\n  cells.forEach( function( cell ) {\r\n    cell.remove();\r\n    var index = this.cells.indexOf( cell );\r\n    minCellIndex = Math.min( index, minCellIndex );\r\n    utils.removeFrom( this.cells, cell );\r\n  }, this );\r\n\r\n  this.cellChange( minCellIndex, true );\r\n};\r\n\r\n/**\r\n * logic to be run after a cell's size changes\r\n * @param {Element} elem - cell's element\r\n */\r\nproto.cellSizeChange = function( elem ) {\r\n  var cell = this.getCell( elem );\r\n  if ( !cell ) {\r\n    return;\r\n  }\r\n  cell.getSize();\r\n\r\n  var index = this.cells.indexOf( cell );\r\n  this.cellChange( index );\r\n};\r\n\r\n/**\r\n * logic any time a cell is changed: added, removed, or size changed\r\n * @param {Integer} changedCellIndex - index of the changed cell, optional\r\n */\r\nproto.cellChange = function( changedCellIndex, isPositioningSlider ) {\r\n  var prevSelectedElem = this.selectedElement;\r\n  this._positionCells( changedCellIndex );\r\n  this._getWrapShiftCells();\r\n  this.setGallerySize();\r\n  // update selectedIndex\r\n  // try to maintain position & select previous selected element\r\n  var cell = this.getCell( prevSelectedElem );\r\n  if ( cell ) {\r\n    this.selectedIndex = this.getCellSlideIndex( cell );\r\n  }\r\n  this.selectedIndex = Math.min( this.slides.length - 1, this.selectedIndex );\r\n\r\n  this.emitEvent( 'cellChange', [ changedCellIndex ] );\r\n  // position slider\r\n  this.select( this.selectedIndex );\r\n  // do not position slider after lazy load\r\n  if ( isPositioningSlider ) {\r\n    this.positionSliderAtSelected();\r\n  }\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n// lazyload\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/lazyload',[\r\n      './flickity',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, utils ) {\r\n      return factory( window, Flickity, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window,\r\n      window.Flickity,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, utils ) {\r\n'use strict';\r\n\r\nFlickity.createMethods.push('_createLazyload');\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createLazyload = function() {\r\n  this.on( 'select', this.lazyLoad );\r\n};\r\n\r\nproto.lazyLoad = function() {\r\n  var lazyLoad = this.options.lazyLoad;\r\n  if ( !lazyLoad ) {\r\n    return;\r\n  }\r\n  // get adjacent cells, use lazyLoad option for adjacent count\r\n  var adjCount = typeof lazyLoad == 'number' ? lazyLoad : 0;\r\n  var cellElems = this.getAdjacentCellElements( adjCount );\r\n  // get lazy images in those cells\r\n  var lazyImages = [];\r\n  cellElems.forEach( function( cellElem ) {\r\n    var lazyCellImages = getCellLazyImages( cellElem );\r\n    lazyImages = lazyImages.concat( lazyCellImages );\r\n  });\r\n  // load lazy images\r\n  lazyImages.forEach( function( img ) {\r\n    new LazyLoader( img, this );\r\n  }, this );\r\n};\r\n\r\nfunction getCellLazyImages( cellElem ) {\r\n  // check if cell element is lazy image\r\n  if ( cellElem.nodeName == 'IMG' ) {\r\n    var lazyloadAttr = cellElem.getAttribute('data-flickity-lazyload');\r\n    var srcAttr = cellElem.getAttribute('data-flickity-lazyload-src');\r\n    var srcsetAttr = cellElem.getAttribute('data-flickity-lazyload-srcset');\r\n    if ( lazyloadAttr || srcAttr || srcsetAttr ) {\r\n      return [ cellElem ];\r\n    }\r\n  }\r\n  // select lazy images in cell\r\n  var lazySelector = 'img[data-flickity-lazyload], ' +\r\n    'img[data-flickity-lazyload-src], img[data-flickity-lazyload-srcset]';\r\n  var imgs = cellElem.querySelectorAll( lazySelector );\r\n  return utils.makeArray( imgs );\r\n}\r\n\r\n// -------------------------- LazyLoader -------------------------- //\r\n\r\n/**\r\n * class to handle loading images\r\n */\r\nfunction LazyLoader( img, flickity ) {\r\n  this.img = img;\r\n  this.flickity = flickity;\r\n  this.load();\r\n}\r\n\r\nLazyLoader.prototype.handleEvent = utils.handleEvent;\r\n\r\nLazyLoader.prototype.load = function() {\r\n  this.img.addEventListener( 'load', this );\r\n  this.img.addEventListener( 'error', this );\r\n  // get src & srcset\r\n  var src = this.img.getAttribute('data-flickity-lazyload') ||\r\n    this.img.getAttribute('data-flickity-lazyload-src');\r\n  var srcset = this.img.getAttribute('data-flickity-lazyload-srcset');\r\n  // set src & serset\r\n  this.img.src = src;\r\n  if ( srcset ) {\r\n    this.img.setAttribute( 'srcset', srcset );\r\n  }\r\n  // remove attr\r\n  this.img.removeAttribute('data-flickity-lazyload');\r\n  this.img.removeAttribute('data-flickity-lazyload-src');\r\n  this.img.removeAttribute('data-flickity-lazyload-srcset');\r\n};\r\n\r\nLazyLoader.prototype.onload = function( event ) {\r\n  this.complete( event, 'flickity-lazyloaded' );\r\n};\r\n\r\nLazyLoader.prototype.onerror = function( event ) {\r\n  this.complete( event, 'flickity-lazyerror' );\r\n};\r\n\r\nLazyLoader.prototype.complete = function( event, className ) {\r\n  // unbind events\r\n  this.img.removeEventListener( 'load', this );\r\n  this.img.removeEventListener( 'error', this );\r\n\r\n  var cell = this.flickity.getParentCell( this.img );\r\n  var cellElem = cell && cell.element;\r\n  this.flickity.cellSizeChange( cellElem );\r\n\r\n  this.img.classList.add( className );\r\n  this.flickity.dispatchEvent( 'lazyLoad', event, cellElem );\r\n};\r\n\r\n// -----  ----- //\r\n\r\nFlickity.LazyLoader = LazyLoader;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n/*!\r\n * Flickity v2.1.0\r\n * Touch, responsive, flickable carousels\r\n *\r\n * Licensed GPLv3 for open source use\r\n * or Flickity Commercial License for commercial use\r\n *\r\n * https://flickity.metafizzy.co\r\n * Copyright 2015-2018 Metafizzy\r\n */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/index',[\r\n      './flickity',\r\n      './drag',\r\n      './prev-next-button',\r\n      './page-dots',\r\n      './player',\r\n      './add-remove-cell',\r\n      './lazyload'\r\n    ], factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      require('./flickity'),\r\n      require('./drag'),\r\n      require('./prev-next-button'),\r\n      require('./page-dots'),\r\n      require('./player'),\r\n      require('./add-remove-cell'),\r\n      require('./lazyload')\r\n    );\r\n  }\r\n\r\n})( window, function factory( Flickity ) {\r\n  /*jshint strict: false*/\r\n  return Flickity;\r\n});\r\n\r\n/*!\r\n * Flickity asNavFor v2.0.1\r\n * enable asNavFor for Flickity\r\n */\r\n\r\n/*jshint browser: true, undef: true, unused: true, strict: true*/\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /*globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity-as-nav-for/as-nav-for',[\r\n      'flickity/js/index',\r\n      'fizzy-ui-utils/utils'\r\n    ], factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      require('flickity'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = factory(\r\n      window.Flickity,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( Flickity, utils ) {\r\n\r\n\r\n\r\n// -------------------------- asNavFor prototype -------------------------- //\r\n\r\n// Flickity.defaults.asNavFor = null;\r\n\r\nFlickity.createMethods.push('_createAsNavFor');\r\n\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createAsNavFor = function() {\r\n  this.on( 'activate', this.activateAsNavFor );\r\n  this.on( 'deactivate', this.deactivateAsNavFor );\r\n  this.on( 'destroy', this.destroyAsNavFor );\r\n\r\n  var asNavForOption = this.options.asNavFor;\r\n  if ( !asNavForOption ) {\r\n    return;\r\n  }\r\n  // HACK do async, give time for other flickity to be initalized\r\n  var _this = this;\r\n  setTimeout( function initNavCompanion() {\r\n    _this.setNavCompanion( asNavForOption );\r\n  });\r\n};\r\n\r\nproto.setNavCompanion = function( elem ) {\r\n  elem = utils.getQueryElement( elem );\r\n  var companion = Flickity.data( elem );\r\n  // stop if no companion or companion is self\r\n  if ( !companion || companion == this ) {\r\n    return;\r\n  }\r\n\r\n  this.navCompanion = companion;\r\n  // companion select\r\n  var _this = this;\r\n  this.onNavCompanionSelect = function() {\r\n    _this.navCompanionSelect();\r\n  };\r\n  companion.on( 'select', this.onNavCompanionSelect );\r\n  // click\r\n  this.on( 'staticClick', this.onNavStaticClick );\r\n\r\n  this.navCompanionSelect( true );\r\n};\r\n\r\nproto.navCompanionSelect = function( isInstant ) {\r\n  if ( !this.navCompanion ) {\r\n    return;\r\n  }\r\n  // select slide that matches first cell of slide\r\n  var selectedCell = this.navCompanion.selectedCells[0];\r\n  var firstIndex = this.navCompanion.cells.indexOf( selectedCell );\r\n  var lastIndex = firstIndex + this.navCompanion.selectedCells.length - 1;\r\n  var selectIndex = Math.floor( lerp( firstIndex, lastIndex,\r\n    this.navCompanion.cellAlign ) );\r\n  this.selectCell( selectIndex, false, isInstant );\r\n  // set nav selected class\r\n  this.removeNavSelectedElements();\r\n  // stop if companion has more cells than this one\r\n  if ( selectIndex >= this.cells.length ) {\r\n    return;\r\n  }\r\n\r\n  var selectedCells = this.cells.slice( firstIndex, lastIndex + 1 );\r\n  this.navSelectedElements = selectedCells.map( function( cell ) {\r\n    return cell.element;\r\n  });\r\n  this.changeNavSelectedClass('add');\r\n};\r\n\r\nfunction lerp( a, b, t ) {\r\n  return ( b - a ) * t + a;\r\n}\r\n\r\nproto.changeNavSelectedClass = function( method ) {\r\n  this.navSelectedElements.forEach( function( navElem ) {\r\n    navElem.classList[ method ]('is-nav-selected');\r\n  });\r\n};\r\n\r\nproto.activateAsNavFor = function() {\r\n  this.navCompanionSelect( true );\r\n};\r\n\r\nproto.removeNavSelectedElements = function() {\r\n  if ( !this.navSelectedElements ) {\r\n    return;\r\n  }\r\n  this.changeNavSelectedClass('remove');\r\n  delete this.navSelectedElements;\r\n};\r\n\r\nproto.onNavStaticClick = function( event, pointer, cellElement, cellIndex ) {\r\n  if ( typeof cellIndex == 'number' ) {\r\n    this.navCompanion.selectCell( cellIndex );\r\n  }\r\n};\r\n\r\nproto.deactivateAsNavFor = function() {\r\n  this.removeNavSelectedElements();\r\n};\r\n\r\nproto.destroyAsNavFor = function() {\r\n  if ( !this.navCompanion ) {\r\n    return;\r\n  }\r\n  this.navCompanion.off( 'select', this.onNavCompanionSelect );\r\n  this.off( 'staticClick', this.onNavStaticClick );\r\n  delete this.navCompanion;\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n/*!\r\n * imagesLoaded v4.1.4\r\n * JavaScript is all like \"You images are done yet or what?\"\r\n * MIT License\r\n */\r\n\r\n( function( window, factory ) { 'use strict';\r\n  // universal module definition\r\n\r\n  /*global define: false, module: false, require: false */\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'imagesloaded/imagesloaded',[\r\n      'ev-emitter/ev-emitter'\r\n    ], function( EvEmitter ) {\r\n      return factory( window, EvEmitter );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('ev-emitter')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.imagesLoaded = factory(\r\n      window,\r\n      window.EvEmitter\r\n    );\r\n  }\r\n\r\n})( typeof window !== 'undefined' ? window : this,\r\n\r\n// --------------------------  factory -------------------------- //\r\n\r\nfunction factory( window, EvEmitter ) {\r\n\r\n\r\n\r\nvar $ = window.jQuery;\r\nvar console = window.console;\r\n\r\n// -------------------------- helpers -------------------------- //\r\n\r\n// extend objects\r\nfunction extend( a, b ) {\r\n  for ( var prop in b ) {\r\n    a[ prop ] = b[ prop ];\r\n  }\r\n  return a;\r\n}\r\n\r\nvar arraySlice = Array.prototype.slice;\r\n\r\n// turn element or nodeList into an array\r\nfunction makeArray( obj ) {\r\n  if ( Array.isArray( obj ) ) {\r\n    // use object if already an array\r\n    return obj;\r\n  }\r\n\r\n  var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\r\n  if ( isArrayLike ) {\r\n    // convert nodeList to array\r\n    return arraySlice.call( obj );\r\n  }\r\n\r\n  // array of single index\r\n  return [ obj ];\r\n}\r\n\r\n// -------------------------- imagesLoaded -------------------------- //\r\n\r\n/**\r\n * @param {Array, Element, NodeList, String} elem\r\n * @param {Object or Function} options - if function, use as callback\r\n * @param {Function} onAlways - callback function\r\n */\r\nfunction ImagesLoaded( elem, options, onAlways ) {\r\n  // coerce ImagesLoaded() without new, to be new ImagesLoaded()\r\n  if ( !( this instanceof ImagesLoaded ) ) {\r\n    return new ImagesLoaded( elem, options, onAlways );\r\n  }\r\n  // use elem as selector string\r\n  var queryElem = elem;\r\n  if ( typeof elem == 'string' ) {\r\n    queryElem = document.querySelectorAll( elem );\r\n  }\r\n  // bail if bad element\r\n  if ( !queryElem ) {\r\n    console.error( 'Bad element for imagesLoaded ' + ( queryElem || elem ) );\r\n    return;\r\n  }\r\n\r\n  this.elements = makeArray( queryElem );\r\n  this.options = extend( {}, this.options );\r\n  // shift arguments if no options set\r\n  if ( typeof options == 'function' ) {\r\n    onAlways = options;\r\n  } else {\r\n    extend( this.options, options );\r\n  }\r\n\r\n  if ( onAlways ) {\r\n    this.on( 'always', onAlways );\r\n  }\r\n\r\n  this.getImages();\r\n\r\n  if ( $ ) {\r\n    // add jQuery Deferred object\r\n    this.jqDeferred = new $.Deferred();\r\n  }\r\n\r\n  // HACK check async to allow time to bind listeners\r\n  setTimeout( this.check.bind( this ) );\r\n}\r\n\r\nImagesLoaded.prototype = Object.create( EvEmitter.prototype );\r\n\r\nImagesLoaded.prototype.options = {};\r\n\r\nImagesLoaded.prototype.getImages = function() {\r\n  this.images = [];\r\n\r\n  // filter & find items if we have an item selector\r\n  this.elements.forEach( this.addElementImages, this );\r\n};\r\n\r\n/**\r\n * @param {Node} element\r\n */\r\nImagesLoaded.prototype.addElementImages = function( elem ) {\r\n  // filter siblings\r\n  if ( elem.nodeName == 'IMG' ) {\r\n    this.addImage( elem );\r\n  }\r\n  // get background image on element\r\n  if ( this.options.background === true ) {\r\n    this.addElementBackgroundImages( elem );\r\n  }\r\n\r\n  // find children\r\n  // no non-element nodes, #143\r\n  var nodeType = elem.nodeType;\r\n  if ( !nodeType || !elementNodeTypes[ nodeType ] ) {\r\n    return;\r\n  }\r\n  var childImgs = elem.querySelectorAll('img');\r\n  // concat childElems to filterFound array\r\n  for ( var i=0; i < childImgs.length; i++ ) {\r\n    var img = childImgs[i];\r\n    this.addImage( img );\r\n  }\r\n\r\n  // get child background images\r\n  if ( typeof this.options.background == 'string' ) {\r\n    var children = elem.querySelectorAll( this.options.background );\r\n    for ( i=0; i < children.length; i++ ) {\r\n      var child = children[i];\r\n      this.addElementBackgroundImages( child );\r\n    }\r\n  }\r\n};\r\n\r\nvar elementNodeTypes = {\r\n  1: true,\r\n  9: true,\r\n  11: true\r\n};\r\n\r\nImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\r\n  var style = getComputedStyle( elem );\r\n  if ( !style ) {\r\n    // Firefox returns null if in a hidden iframe https://bugzil.la/548397\r\n    return;\r\n  }\r\n  // get url inside url(\"...\")\r\n  var reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\r\n  var matches = reURL.exec( style.backgroundImage );\r\n  while ( matches !== null ) {\r\n    var url = matches && matches[2];\r\n    if ( url ) {\r\n      this.addBackground( url, elem );\r\n    }\r\n    matches = reURL.exec( style.backgroundImage );\r\n  }\r\n};\r\n\r\n/**\r\n * @param {Image} img\r\n */\r\nImagesLoaded.prototype.addImage = function( img ) {\r\n  var loadingImage = new LoadingImage( img );\r\n  this.images.push( loadingImage );\r\n};\r\n\r\nImagesLoaded.prototype.addBackground = function( url, elem ) {\r\n  var background = new Background( url, elem );\r\n  this.images.push( background );\r\n};\r\n\r\nImagesLoaded.prototype.check = function() {\r\n  var _this = this;\r\n  this.progressedCount = 0;\r\n  this.hasAnyBroken = false;\r\n  // complete if no images\r\n  if ( !this.images.length ) {\r\n    this.complete();\r\n    return;\r\n  }\r\n\r\n  function onProgress( image, elem, message ) {\r\n    // HACK - Chrome triggers event before object properties have changed. #83\r\n    setTimeout( function() {\r\n      _this.progress( image, elem, message );\r\n    });\r\n  }\r\n\r\n  this.images.forEach( function( loadingImage ) {\r\n    loadingImage.once( 'progress', onProgress );\r\n    loadingImage.check();\r\n  });\r\n};\r\n\r\nImagesLoaded.prototype.progress = function( image, elem, message ) {\r\n  this.progressedCount++;\r\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\r\n  // progress event\r\n  this.emitEvent( 'progress', [ this, image, elem ] );\r\n  if ( this.jqDeferred && this.jqDeferred.notify ) {\r\n    this.jqDeferred.notify( this, image );\r\n  }\r\n  // check if completed\r\n  if ( this.progressedCount == this.images.length ) {\r\n    this.complete();\r\n  }\r\n\r\n  if ( this.options.debug && console ) {\r\n    console.log( 'progress: ' + message, image, elem );\r\n  }\r\n};\r\n\r\nImagesLoaded.prototype.complete = function() {\r\n  var eventName = this.hasAnyBroken ? 'fail' : 'done';\r\n  this.isComplete = true;\r\n  this.emitEvent( eventName, [ this ] );\r\n  this.emitEvent( 'always', [ this ] );\r\n  if ( this.jqDeferred ) {\r\n    var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\r\n    this.jqDeferred[ jqMethod ]( this );\r\n  }\r\n};\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nfunction LoadingImage( img ) {\r\n  this.img = img;\r\n}\r\n\r\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\r\n\r\nLoadingImage.prototype.check = function() {\r\n  // If complete is true and browser supports natural sizes,\r\n  // try to check for image status manually.\r\n  var isComplete = this.getIsImageComplete();\r\n  if ( isComplete ) {\r\n    // report based on naturalWidth\r\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\r\n    return;\r\n  }\r\n\r\n  // If none of the checks above matched, simulate loading on detached element.\r\n  this.proxyImage = new Image();\r\n  this.proxyImage.addEventListener( 'load', this );\r\n  this.proxyImage.addEventListener( 'error', this );\r\n  // bind to image as well for Firefox. #191\r\n  this.img.addEventListener( 'load', this );\r\n  this.img.addEventListener( 'error', this );\r\n  this.proxyImage.src = this.img.src;\r\n};\r\n\r\nLoadingImage.prototype.getIsImageComplete = function() {\r\n  // check for non-zero, non-undefined naturalWidth\r\n  // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\r\n  return this.img.complete && this.img.naturalWidth;\r\n};\r\n\r\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\r\n  this.isLoaded = isLoaded;\r\n  this.emitEvent( 'progress', [ this, this.img, message ] );\r\n};\r\n\r\n// ----- events ----- //\r\n\r\n// trigger specified handler for event type\r\nLoadingImage.prototype.handleEvent = function( event ) {\r\n  var method = 'on' + event.type;\r\n  if ( this[ method ] ) {\r\n    this[ method ]( event );\r\n  }\r\n};\r\n\r\nLoadingImage.prototype.onload = function() {\r\n  this.confirm( true, 'onload' );\r\n  this.unbindEvents();\r\n};\r\n\r\nLoadingImage.prototype.onerror = function() {\r\n  this.confirm( false, 'onerror' );\r\n  this.unbindEvents();\r\n};\r\n\r\nLoadingImage.prototype.unbindEvents = function() {\r\n  this.proxyImage.removeEventListener( 'load', this );\r\n  this.proxyImage.removeEventListener( 'error', this );\r\n  this.img.removeEventListener( 'load', this );\r\n  this.img.removeEventListener( 'error', this );\r\n};\r\n\r\n// -------------------------- Background -------------------------- //\r\n\r\nfunction Background( url, element ) {\r\n  this.url = url;\r\n  this.element = element;\r\n  this.img = new Image();\r\n}\r\n\r\n// inherit LoadingImage prototype\r\nBackground.prototype = Object.create( LoadingImage.prototype );\r\n\r\nBackground.prototype.check = function() {\r\n  this.img.addEventListener( 'load', this );\r\n  this.img.addEventListener( 'error', this );\r\n  this.img.src = this.url;\r\n  // check if image is already complete\r\n  var isComplete = this.getIsImageComplete();\r\n  if ( isComplete ) {\r\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\r\n    this.unbindEvents();\r\n  }\r\n};\r\n\r\nBackground.prototype.unbindEvents = function() {\r\n  this.img.removeEventListener( 'load', this );\r\n  this.img.removeEventListener( 'error', this );\r\n};\r\n\r\nBackground.prototype.confirm = function( isLoaded, message ) {\r\n  this.isLoaded = isLoaded;\r\n  this.emitEvent( 'progress', [ this, this.element, message ] );\r\n};\r\n\r\n// -------------------------- jQuery -------------------------- //\r\n\r\nImagesLoaded.makeJQueryPlugin = function( jQuery ) {\r\n  jQuery = jQuery || window.jQuery;\r\n  if ( !jQuery ) {\r\n    return;\r\n  }\r\n  // set local variable\r\n  $ = jQuery;\r\n  // $().imagesLoaded()\r\n  $.fn.imagesLoaded = function( options, callback ) {\r\n    var instance = new ImagesLoaded( this, options, callback );\r\n    return instance.jqDeferred.promise( $(this) );\r\n  };\r\n};\r\n// try making plugin\r\nImagesLoaded.makeJQueryPlugin();\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nreturn ImagesLoaded;\r\n\r\n});\r\n\r\n/*!\r\n * Flickity imagesLoaded v2.0.0\r\n * enables imagesLoaded option for Flickity\r\n */\r\n\r\n/*jshint browser: true, strict: true, undef: true, unused: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /*globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( [\r\n      'flickity/js/index',\r\n      'imagesloaded/imagesloaded'\r\n    ], function( Flickity, imagesLoaded ) {\r\n      return factory( window, Flickity, imagesLoaded );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('flickity'),\r\n      require('imagesloaded')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = factory(\r\n      window,\r\n      window.Flickity,\r\n      window.imagesLoaded\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, imagesLoaded ) {\r\n'use strict';\r\n\r\nFlickity.createMethods.push('_createImagesLoaded');\r\n\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createImagesLoaded = function() {\r\n  this.on( 'activate', this.imagesLoaded );\r\n};\r\n\r\nproto.imagesLoaded = function() {\r\n  if ( !this.options.imagesLoaded ) {\r\n    return;\r\n  }\r\n  var _this = this;\r\n  function onImagesLoadedProgress( instance, image ) {\r\n    var cell = _this.getParentCell( image.img );\r\n    _this.cellSizeChange( cell && cell.element );\r\n    if ( !_this.options.freeScroll ) {\r\n      _this.positionSliderAtSelected();\r\n    }\r\n  }\r\n  imagesLoaded( this.slider ).on( 'progress', onImagesLoadedProgress );\r\n};\r\n\r\nreturn Flickity;\r\n\r\n}));","/*\r\n * jQuery Form Styler v2.0.2\r\n * https://github.com/Dimox/jQueryFormStyler\r\n *\r\n * Copyright 2012-2017 Dimox (http://dimox.name/)\r\n * Released under the MIT license.\r\n *\r\n * Date: 2017.10.22\r\n *\r\n */\r\n\r\n;(function(factory) {\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\t// AMD\r\n\t\tdefine(['jquery'], factory);\r\n\t} else if (typeof exports === 'object') {\r\n\t\t// CommonJS\r\n\t\tmodule.exports = factory($ || require('jquery'));\r\n\t} else {\r\n\t\tfactory(jQuery);\r\n\t}\r\n}(function($) {\r\n\r\n\t'use strict';\r\n\r\n\tvar pluginName = 'styler',\r\n\t\t\tdefaults = {\r\n\t\t\t\tidSuffix: '-styler',\r\n\t\t\t\tfilePlaceholder: 'Файл не выбран',\r\n\t\t\t\tfileBrowse: 'Обзор...',\r\n\t\t\t\tfileNumber: 'Выбрано файлов: %s',\r\n\t\t\t\tselectPlaceholder: 'Выберите...',\r\n\t\t\t\tselectSearch: false,\r\n\t\t\t\tselectSearchLimit: 10,\r\n\t\t\t\tselectSearchNotFound: 'Совпадений не найдено',\r\n\t\t\t\tselectSearchPlaceholder: 'Поиск...',\r\n\t\t\t\tselectVisibleOptions: 0,\r\n\t\t\t\tselectSmartPositioning: true,\r\n\t\t\t\tlocale: 'ru',\r\n\t\t\t\tlocales: {\r\n\t\t\t\t\t'en': {\r\n\t\t\t\t\t\tfilePlaceholder: 'No file selected',\r\n\t\t\t\t\t\tfileBrowse: 'Browse...',\r\n\t\t\t\t\t\tfileNumber: 'Selected files: %s',\r\n\t\t\t\t\t\tselectPlaceholder: 'Select...',\r\n\t\t\t\t\t\tselectSearchNotFound: 'No matches found',\r\n\t\t\t\t\t\tselectSearchPlaceholder: 'Search...'\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tonSelectOpened: function() {},\r\n\t\t\t\tonSelectClosed: function() {},\r\n\t\t\t\tonFormStyled: function() {}\r\n\t\t\t};\r\n\r\n\tfunction Plugin(element, options) {\r\n\t\tthis.element = element;\r\n\t\tthis.options = $.extend({}, defaults, options);\r\n\t\tvar locale = this.options.locale;\r\n\t\tif (this.options.locales[locale] !== undefined) {\r\n\t\t\t$.extend(this.options, this.options.locales[locale]);\r\n\t\t}\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tPlugin.prototype = {\r\n\r\n\t\t// инициализация\r\n\t\tinit: function() {\r\n\r\n\t\t\tvar el = $(this.element);\r\n\t\t\tvar opt = this.options;\r\n\r\n\t\t\tvar iOS = (navigator.userAgent.match(/(iPad|iPhone|iPod)/i) && !navigator.userAgent.match(/(Windows\\sPhone)/i)) ? true : false;\r\n\t\t\tvar Android = (navigator.userAgent.match(/Android/i) && !navigator.userAgent.match(/(Windows\\sPhone)/i)) ? true : false;\r\n\r\n\t\t\tfunction Attributes() {\r\n\t\t\t\tif (el.attr('id') !== undefined && el.attr('id') !== '') {\r\n\t\t\t\t\tthis.id = el.attr('id') + opt.idSuffix;\r\n\t\t\t\t}\r\n\t\t\t\tthis.title = el.attr('title');\r\n\t\t\t\tthis.classes = el.attr('class');\r\n\t\t\t\tthis.data = el.data();\r\n\t\t\t}\r\n\r\n\t\t\t// checkbox\r\n\t\t\tif (el.is(':checkbox')) {\r\n\r\n\t\t\t\tvar checkboxOutput = function() {\r\n\r\n\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\tvar checkbox = $('<div class=\"jq-checkbox\"><div class=\"jq-checkbox__div\"></div></div>')\r\n\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t;\r\n\r\n\t\t\t\t\tel.after(checkbox).prependTo(checkbox);\r\n\t\t\t\t\tif (el.is(':checked')) checkbox.addClass('checked');\r\n\t\t\t\t\tif (el.is(':disabled')) checkbox.addClass('disabled');\r\n\r\n\t\t\t\t\t// клик на псевдочекбокс\r\n\t\t\t\t\tcheckbox.click(function(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tel.triggerHandler('click');\r\n\t\t\t\t\t\tif (!checkbox.is('.disabled')) {\r\n\t\t\t\t\t\t\tif (el.is(':checked')) {\r\n\t\t\t\t\t\t\t\tel.prop('checked', false);\r\n\t\t\t\t\t\t\t\tcheckbox.removeClass('checked');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tel.prop('checked', true);\r\n\t\t\t\t\t\t\t\tcheckbox.addClass('checked');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tel.focus().change();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// клик на label\r\n\t\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').on('click.styler', function(e) {\r\n\t\t\t\t\t\tif (!$(e.target).is('a') && !$(e.target).closest(checkbox).length) {\r\n\t\t\t\t\t\t\tcheckbox.triggerHandler('click');\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// переключение по Space или Enter\r\n\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\tif (el.is(':checked')) checkbox.addClass('checked');\r\n\t\t\t\t\t\telse checkbox.removeClass('checked');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// чтобы переключался чекбокс, который находится в теге label\r\n\t\t\t\t\t.on('keydown.styler', function(e) {\r\n\t\t\t\t\t\tif (e.which == 32) checkbox.click();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\tif (!checkbox.is('.disabled')) checkbox.addClass('focused');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\tcheckbox.removeClass('focused');\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}; // end checkboxOutput()\r\n\r\n\t\t\t\tcheckboxOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').off('.styler');\r\n\t\t\t\t\tel.off('.styler').parent().before(el).remove();\r\n\t\t\t\t\tcheckboxOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end checkbox\r\n\r\n\t\t\t// radio\r\n\t\t\t} else if (el.is(':radio')) {\r\n\r\n\t\t\t\tvar radioOutput = function() {\r\n\r\n\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\tvar radio = $('<div class=\"jq-radio\"><div class=\"jq-radio__div\"></div></div>')\r\n\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t;\r\n\r\n\t\t\t\t\tel.after(radio).prependTo(radio);\r\n\t\t\t\t\tif (el.is(':checked')) radio.addClass('checked');\r\n\t\t\t\t\tif (el.is(':disabled')) radio.addClass('disabled');\r\n\r\n\t\t\t\t\t// определяем общего родителя у радиокнопок с одинаковым name\r\n\t\t\t\t\t// http://stackoverflow.com/a/27733847\r\n\t\t\t\t\t$.fn.commonParents = function() {\r\n\t\t\t\t\t\tvar cachedThis = this;\r\n\t\t\t\t\t\treturn cachedThis.first().parents().filter(function() {\r\n\t\t\t\t\t\t\treturn $(this).find(cachedThis).length === cachedThis.length;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t\t$.fn.commonParent = function() {\r\n\t\t\t\t\t\treturn $(this).commonParents().first();\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// клик на псевдорадиокнопке\r\n\t\t\t\t\tradio.click(function(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tel.triggerHandler('click');\r\n\t\t\t\t\t\tif (!radio.is('.disabled')) {\r\n\t\t\t\t\t\t\tvar inputName = $('input[name=\"' + el.attr('name') + '\"]');\r\n\t\t\t\t\t\t\tinputName.commonParent().find(inputName).prop('checked', false).parent().removeClass('checked');\r\n\t\t\t\t\t\t\tel.prop('checked', true).parent().addClass('checked');\r\n\t\t\t\t\t\t\tel.focus().change();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// клик на label\r\n\t\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').on('click.styler', function(e) {\r\n\t\t\t\t\t\tif (!$(e.target).is('a') && !$(e.target).closest(radio).length) {\r\n\t\t\t\t\t\t\tradio.triggerHandler('click');\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// переключение стрелками\r\n\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\tel.parent().addClass('checked');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\tif (!radio.is('.disabled')) radio.addClass('focused');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\tradio.removeClass('focused');\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}; // end radioOutput()\r\n\r\n\t\t\t\tradioOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').off('.styler');\r\n\t\t\t\t\tel.off('.styler').parent().before(el).remove();\r\n\t\t\t\t\tradioOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end radio\r\n\r\n\t\t\t// file\r\n\t\t\t} else if (el.is(':file')) {\r\n\r\n\t\t\t\tvar fileOutput = function() {\r\n\r\n\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\tvar placeholder = el.data('placeholder');\r\n\t\t\t\t\tif (placeholder === undefined) placeholder = opt.filePlaceholder;\r\n\t\t\t\t\tvar browse = el.data('browse');\r\n\t\t\t\t\tif (browse === undefined || browse === '') browse = opt.fileBrowse;\r\n\r\n\t\t\t\t\tvar file =\r\n\t\t\t\t\t\t$('<div class=\"jq-file\">' +\r\n\t\t\t\t\t\t\t\t'<div class=\"jq-file__name\">' + placeholder + '</div>' +\r\n\t\t\t\t\t\t\t\t'<div class=\"jq-file__browse\">' + browse + '</div>' +\r\n\t\t\t\t\t\t\t'</div>')\r\n\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t;\r\n\r\n\t\t\t\t\tel.after(file).appendTo(file);\r\n\t\t\t\t\tif (el.is(':disabled')) file.addClass('disabled');\r\n\r\n\t\t\t\t\tvar value = el.val();\r\n\t\t\t\t\tvar name = $('div.jq-file__name', file);\r\n\r\n\t\t\t\t\t// чтобы при динамическом изменении имя файла не сбрасывалось\r\n\t\t\t\t\tif (value) name.text(value.replace(/.+[\\\\\\/]/, ''));\r\n\r\n\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\tvar value = el.val();\r\n\t\t\t\t\t\tif (el.is('[multiple]')) {\r\n\t\t\t\t\t\t\tvalue = '';\r\n\t\t\t\t\t\t\tvar files = el[0].files.length;\r\n\t\t\t\t\t\t\tif (files > 0) {\r\n\t\t\t\t\t\t\t\tvar number = el.data('number');\r\n\t\t\t\t\t\t\t\tif (number === undefined) number = opt.fileNumber;\r\n\t\t\t\t\t\t\t\tnumber = number.replace('%s', files);\r\n\t\t\t\t\t\t\t\tvalue = number;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tname.text(value.replace(/.+[\\\\\\/]/, ''));\r\n\t\t\t\t\t\tif (value === '') {\r\n\t\t\t\t\t\t\tname.text(placeholder);\r\n\t\t\t\t\t\t\tfile.removeClass('changed');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfile.addClass('changed');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\tfile.addClass('focused');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\tfile.removeClass('focused');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('click.styler', function() {\r\n\t\t\t\t\t\tfile.removeClass('focused');\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}; // end fileOutput()\r\n\r\n\t\t\t\tfileOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.off('.styler').parent().before(el).remove();\r\n\t\t\t\t\tfileOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end file\r\n\r\n\t\t\t// number\r\n\t\t\t} else if (el.is('input[type=\"number\"]')) {\r\n\r\n\t\t\t\tvar numberOutput = function() {\r\n\r\n\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\tvar number =\r\n\t\t\t\t\t\t$('<div class=\"jq-number\">' +\r\n\t\t\t\t\t\t\t\t'<div class=\"jq-number__spin minus\"></div>' +\r\n\t\t\t\t\t\t\t\t'<div class=\"jq-number__spin plus\"></div>' +\r\n\t\t\t\t\t\t\t'</div>')\r\n\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t;\r\n\r\n\t\t\t\t\tel.after(number).prependTo(number).wrap('<div class=\"jq-number__field\"></div>');\r\n\t\t\t\t\tif (el.is(':disabled')) number.addClass('disabled');\r\n\r\n\t\t\t\t\tvar min,\r\n\t\t\t\t\t\t\tmax,\r\n\t\t\t\t\t\t\tstep,\r\n\t\t\t\t\t\t\ttimeout = null,\r\n\t\t\t\t\t\t\tinterval = null;\r\n\t\t\t\t\tif (el.attr('min') !== undefined) min = el.attr('min');\r\n\t\t\t\t\tif (el.attr('max') !== undefined) max = el.attr('max');\r\n\t\t\t\t\tif (el.attr('step') !== undefined && $.isNumeric(el.attr('step')))\r\n\t\t\t\t\t\tstep = Number(el.attr('step'));\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tstep = Number(1);\r\n\r\n\t\t\t\t\tvar changeValue = function(spin) {\r\n\t\t\t\t\t\tvar value = el.val(),\r\n\t\t\t\t\t\t\t\tnewValue;\r\n\r\n\t\t\t\t\t\tif (!$.isNumeric(value)) {\r\n\t\t\t\t\t\t\tvalue = 0;\r\n\t\t\t\t\t\t\tel.val('0');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (spin.is('.minus')) {\r\n\t\t\t\t\t\t\tnewValue = Number(value) - step;\r\n\t\t\t\t\t\t} else if (spin.is('.plus')) {\r\n\t\t\t\t\t\t\tnewValue = Number(value) + step;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// определяем количество десятичных знаков после запятой в step\r\n\t\t\t\t\t\tvar decimals = (step.toString().split('.')[1] || []).length;\r\n\t\t\t\t\t\tif (decimals > 0) {\r\n\t\t\t\t\t\t\tvar multiplier = '1';\r\n\t\t\t\t\t\t\twhile (multiplier.length <= decimals) multiplier = multiplier + '0';\r\n\t\t\t\t\t\t\t// избегаем появления лишних знаков после запятой\r\n\t\t\t\t\t\t\tnewValue = Math.round(newValue * multiplier) / multiplier;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ($.isNumeric(min) && $.isNumeric(max)) {\r\n\t\t\t\t\t\t\tif (newValue >= min && newValue <= max) el.val(newValue);\r\n\t\t\t\t\t\t} else if ($.isNumeric(min) && !$.isNumeric(max)) {\r\n\t\t\t\t\t\t\tif (newValue >= min) el.val(newValue);\r\n\t\t\t\t\t\t} else if (!$.isNumeric(min) && $.isNumeric(max)) {\r\n\t\t\t\t\t\t\tif (newValue <= max) el.val(newValue);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tel.val(newValue);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (!number.is('.disabled')) {\r\n\t\t\t\t\t\tnumber.on('mousedown', 'div.jq-number__spin', function() {\r\n\t\t\t\t\t\t\tvar spin = $(this);\r\n\t\t\t\t\t\t\tchangeValue(spin);\r\n\t\t\t\t\t\t\ttimeout = setTimeout(function(){\r\n\t\t\t\t\t\t\t\tinterval = setInterval(function(){ changeValue(spin); }, 40);\r\n\t\t\t\t\t\t\t}, 350);\r\n\t\t\t\t\t\t}).on('mouseup mouseout', 'div.jq-number__spin', function() {\r\n\t\t\t\t\t\t\tclearTimeout(timeout);\r\n\t\t\t\t\t\t\tclearInterval(interval);\r\n\t\t\t\t\t\t}).on('mouseup', 'div.jq-number__spin', function() {\r\n\t\t\t\t\t\t\tel.change().trigger('input');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tel.on('focus.styler', function() {\r\n\t\t\t\t\t\t\tnumber.addClass('focused');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\t\tnumber.removeClass('focused');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}; // end numberOutput()\r\n\r\n\t\t\t\tnumberOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.off('.styler').closest('.jq-number').before(el).remove();\r\n\t\t\t\t\tnumberOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end number\r\n\r\n\t\t\t// select\r\n\t\t\t} else if (el.is('select')) {\r\n\r\n\t\t\t\tvar selectboxOutput = function() {\r\n\r\n\t\t\t\t\t// запрещаем прокрутку страницы при прокрутке селекта\r\n\t\t\t\t\tfunction preventScrolling(selector) {\r\n\r\n\t\t\t\t\t\tvar scrollDiff = selector.prop('scrollHeight') - selector.outerHeight(),\r\n\t\t\t\t\t\t\t\twheelDelta = null,\r\n\t\t\t\t\t\t\t\tscrollTop = null;\r\n\r\n\t\t\t\t\t\tselector.off('mousewheel DOMMouseScroll').on('mousewheel DOMMouseScroll', function(e) {\r\n\r\n\t\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t\t * нормализация направления прокрутки\r\n\t\t\t\t\t\t\t * (firefox < 0 || chrome etc... > 0)\r\n\t\t\t\t\t\t\t * (e.originalEvent.detail < 0 || e.originalEvent.wheelDelta > 0)\r\n\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\twheelDelta = (e.originalEvent.detail < 0 || e.originalEvent.wheelDelta > 0) ? 1 : -1; // направление прокрутки (-1 вниз, 1 вверх)\r\n\t\t\t\t\t\t\tscrollTop = selector.scrollTop(); // позиция скролла\r\n\r\n\t\t\t\t\t\t\tif ((scrollTop >= scrollDiff && wheelDelta < 0) || (scrollTop <= 0 && wheelDelta > 0)) {\r\n\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar option = $('option', el);\r\n\t\t\t\t\tvar list = '';\r\n\t\t\t\t\t// формируем список селекта\r\n\t\t\t\t\tfunction makeList() {\r\n\t\t\t\t\t\tfor (var i = 0; i < option.length; i++) {\r\n\t\t\t\t\t\t\tvar op = option.eq(i);\r\n\t\t\t\t\t\t\tvar li = '',\r\n\t\t\t\t\t\t\t\t\tliClass = '',\r\n\t\t\t\t\t\t\t\t\tliClasses = '',\r\n\t\t\t\t\t\t\t\t\tid = '',\r\n\t\t\t\t\t\t\t\t\ttitle = '',\r\n\t\t\t\t\t\t\t\t\tdataList = '',\r\n\t\t\t\t\t\t\t\t\toptionClass = '',\r\n\t\t\t\t\t\t\t\t\toptgroupClass = '',\r\n\t\t\t\t\t\t\t\t\tdataJqfsClass = '';\r\n\t\t\t\t\t\t\tvar disabled = 'disabled';\r\n\t\t\t\t\t\t\tvar selDis = 'selected sel disabled';\r\n\t\t\t\t\t\t\tif (op.prop('selected')) liClass = 'selected sel';\r\n\t\t\t\t\t\t\tif (op.is(':disabled')) liClass = disabled;\r\n\t\t\t\t\t\t\tif (op.is(':selected:disabled')) liClass = selDis;\r\n\t\t\t\t\t\t\tif (op.attr('id') !== undefined && op.attr('id') !== '') id = ' id=\"' + op.attr('id') + opt.idSuffix + '\"';\r\n\t\t\t\t\t\t\tif (op.attr('title') !== undefined && option.attr('title') !== '') title = ' title=\"' + op.attr('title') + '\"';\r\n\t\t\t\t\t\t\tif (op.attr('class') !== undefined) {\r\n\t\t\t\t\t\t\t\toptionClass = ' ' + op.attr('class');\r\n\t\t\t\t\t\t\t\tdataJqfsClass = ' data-jqfs-class=\"' + op.attr('class') + '\"';\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar data = op.data();\r\n\t\t\t\t\t\t\tfor (var k in data) {\r\n\t\t\t\t\t\t\t\tif (data[k] !== '') dataList += ' data-' + k + '=\"' + data[k] + '\"';\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( (liClass + optionClass) !== '' )   liClasses = ' class=\"' + liClass + optionClass + '\"';\r\n\t\t\t\t\t\t\tli = '<li' + dataJqfsClass + dataList + liClasses + title + id + '>'+ op.html() +'</li>';\r\n\r\n\t\t\t\t\t\t\t// если есть optgroup\r\n\t\t\t\t\t\t\tif (op.parent().is('optgroup')) {\r\n\t\t\t\t\t\t\t\tif (op.parent().attr('class') !== undefined) optgroupClass = ' ' + op.parent().attr('class');\r\n\t\t\t\t\t\t\t\tli = '<li' + dataJqfsClass + dataList + ' class=\"' + liClass + optionClass + ' option' + optgroupClass + '\"' + title + id + '>'+ op.html() +'</li>';\r\n\t\t\t\t\t\t\t\tif (op.is(':first-child')) {\r\n\t\t\t\t\t\t\t\t\tli = '<li class=\"optgroup' + optgroupClass + '\">' + op.parent().attr('label') + '</li>' + li;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tlist += li;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} // end makeList()\r\n\r\n\t\t\t\t\t// одиночный селект\r\n\t\t\t\t\tfunction doSelect() {\r\n\r\n\t\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\t\tvar searchHTML = '';\r\n\t\t\t\t\t\tvar selectPlaceholder = el.data('placeholder');\r\n\t\t\t\t\t\tvar selectSearch = el.data('search');\r\n\t\t\t\t\t\tvar selectSearchLimit = el.data('search-limit');\r\n\t\t\t\t\t\tvar selectSearchNotFound = el.data('search-not-found');\r\n\t\t\t\t\t\tvar selectSearchPlaceholder = el.data('search-placeholder');\r\n\t\t\t\t\t\tvar selectSmartPositioning = el.data('smart-positioning');\r\n\r\n\t\t\t\t\t\tif (selectPlaceholder === undefined) selectPlaceholder = opt.selectPlaceholder;\r\n\t\t\t\t\t\tif (selectSearch === undefined || selectSearch === '') selectSearch = opt.selectSearch;\r\n\t\t\t\t\t\tif (selectSearchLimit === undefined || selectSearchLimit === '') selectSearchLimit = opt.selectSearchLimit;\r\n\t\t\t\t\t\tif (selectSearchNotFound === undefined || selectSearchNotFound === '') selectSearchNotFound = opt.selectSearchNotFound;\r\n\t\t\t\t\t\tif (selectSearchPlaceholder === undefined) selectSearchPlaceholder = opt.selectSearchPlaceholder;\r\n\t\t\t\t\t\tif (selectSmartPositioning === undefined || selectSmartPositioning === '') selectSmartPositioning = opt.selectSmartPositioning;\r\n\r\n\t\t\t\t\t\tvar selectbox =\r\n\t\t\t\t\t\t\t$('<div class=\"jq-selectbox jqselect\">' +\r\n\t\t\t\t\t\t\t\t\t'<div class=\"jq-selectbox__select\">' +\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"jq-selectbox__select-text\"></div>' +\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"jq-selectbox__trigger\">' +\r\n\t\t\t\t\t\t\t\t\t\t\t'<div class=\"jq-selectbox__trigger-arrow\"></div></div>' +\r\n\t\t\t\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t\t\t\t'</div>')\r\n\t\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t\t;\r\n\r\n\t\t\t\t\t\tel.after(selectbox).prependTo(selectbox);\r\n\r\n\t\t\t\t\t\tvar selectzIndex = selectbox.css('z-index');\r\n\t\t\t\t\t\tselectzIndex = (selectzIndex > 0 ) ? selectzIndex : 1;\r\n\t\t\t\t\t\tvar divSelect = $('div.jq-selectbox__select', selectbox);\r\n\t\t\t\t\t\tvar divText = $('div.jq-selectbox__select-text', selectbox);\r\n\t\t\t\t\t\tvar optionSelected = option.filter(':selected');\r\n\r\n\t\t\t\t\t\tmakeList();\r\n\r\n\t\t\t\t\t\tif (selectSearch) searchHTML =\r\n\t\t\t\t\t\t\t'<div class=\"jq-selectbox__search\"><input type=\"search\" autocomplete=\"off\" placeholder=\"' + selectSearchPlaceholder + '\"></div>' +\r\n\t\t\t\t\t\t\t'<div class=\"jq-selectbox__not-found\">' + selectSearchNotFound + '</div>';\r\n\t\t\t\t\t\tvar dropdown =\r\n\t\t\t\t\t\t\t$('<div class=\"jq-selectbox__dropdown\">' +\r\n\t\t\t\t\t\t\t\t\tsearchHTML + '<ul>' + list + '</ul>' +\r\n\t\t\t\t\t\t\t\t'</div>');\r\n\t\t\t\t\t\tselectbox.append(dropdown);\r\n\t\t\t\t\t\tvar ul = $('ul', dropdown);\r\n\t\t\t\t\t\tvar li = $('li', dropdown);\r\n\t\t\t\t\t\tvar search = $('input', dropdown);\r\n\t\t\t\t\t\tvar notFound = $('div.jq-selectbox__not-found', dropdown).hide();\r\n\t\t\t\t\t\tif (li.length < selectSearchLimit) search.parent().hide();\r\n\r\n\t\t\t\t\t\t// показываем опцию по умолчанию\r\n\t\t\t\t\t\t// если у 1-й опции нет текста, она выбрана по умолчанию и параметр selectPlaceholder не false, то показываем плейсхолдер\r\n\t\t\t\t\t\tif (option.first().text() === '' && option.first().is(':selected') && selectPlaceholder !== false) {\r\n\t\t\t\t\t\t\tdivText.text(selectPlaceholder).addClass('placeholder');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdivText.text(optionSelected.text());\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// определяем самый широкий пункт селекта\r\n\t\t\t\t\t\tvar liWidthInner = 0,\r\n\t\t\t\t\t\t\t\tliWidth = 0;\r\n\t\t\t\t\t\tli.css({'display': 'inline-block'});\r\n\t\t\t\t\t\tli.each(function() {\r\n\t\t\t\t\t\t\tvar l = $(this);\r\n\t\t\t\t\t\t\tif (l.innerWidth() > liWidthInner) {\r\n\t\t\t\t\t\t\t\tliWidthInner = l.innerWidth();\r\n\t\t\t\t\t\t\t\tliWidth = l.width();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tli.css({'display': ''});\r\n\r\n\t\t\t\t\t\t// подстраиваем ширину свернутого селекта в зависимости\r\n\t\t\t\t\t\t// от ширины плейсхолдера или самого широкого пункта\r\n\t\t\t\t\t\tif (divText.is('.placeholder') && (divText.width() > liWidthInner)) {\r\n\t\t\t\t\t\t\tdivText.width(divText.width());\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar selClone = selectbox.clone().appendTo('body').width('auto');\r\n\t\t\t\t\t\t\tvar selCloneWidth = selClone.outerWidth();\r\n\t\t\t\t\t\t\tselClone.remove();\r\n\t\t\t\t\t\t\tif (selCloneWidth == selectbox.outerWidth()) {\r\n\t\t\t\t\t\t\t\tdivText.width(liWidth);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// подстраиваем ширину выпадающего списка в зависимости от самого широкого пункта\r\n\t\t\t\t\t\tif (liWidthInner > selectbox.width()) dropdown.width(liWidthInner);\r\n\r\n\t\t\t\t\t\t// прячем 1-ю пустую опцию, если она есть и если атрибут data-placeholder не пустой\r\n\t\t\t\t\t\t// если все же нужно, чтобы первая пустая опция отображалась, то указываем у селекта: data-placeholder=\"\"\r\n\t\t\t\t\t\tif (option.first().text() === '' && el.data('placeholder') !== '') {\r\n\t\t\t\t\t\t\tli.first().hide();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar selectHeight = selectbox.outerHeight(true);\r\n\t\t\t\t\t\tvar searchHeight = search.parent().outerHeight(true) || 0;\r\n\t\t\t\t\t\tvar isMaxHeight = ul.css('max-height');\r\n\t\t\t\t\t\tvar liSelected = li.filter('.selected');\r\n\t\t\t\t\t\tif (liSelected.length < 1) li.first().addClass('selected sel');\r\n\t\t\t\t\t\tif (li.data('li-height') === undefined) {\r\n\t\t\t\t\t\t\tvar liOuterHeight = li.outerHeight();\r\n\t\t\t\t\t\t\tif (selectPlaceholder !== false) liOuterHeight = li.eq(1).outerHeight();\r\n\t\t\t\t\t\t\tli.data('li-height', liOuterHeight);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar position = dropdown.css('top');\r\n\t\t\t\t\t\tif (dropdown.css('left') == 'auto') dropdown.css({left: 0});\r\n\t\t\t\t\t\tif (dropdown.css('top') == 'auto') {\r\n\t\t\t\t\t\t\tdropdown.css({top: selectHeight});\r\n\t\t\t\t\t\t\tposition = selectHeight;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdropdown.hide();\r\n\r\n\t\t\t\t\t\t// если выбран не дефолтный пункт\r\n\t\t\t\t\t\tif (liSelected.length) {\r\n\t\t\t\t\t\t\t// добавляем класс, показывающий изменение селекта\r\n\t\t\t\t\t\t\tif (option.first().text() != optionSelected.text()) {\r\n\t\t\t\t\t\t\t\tselectbox.addClass('changed');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// передаем селекту класс выбранного пункта\r\n\t\t\t\t\t\t\tselectbox.data('jqfs-class', liSelected.data('jqfs-class'));\r\n\t\t\t\t\t\t\tselectbox.addClass(liSelected.data('jqfs-class'));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// если селект неактивный\r\n\t\t\t\t\t\tif (el.is(':disabled')) {\r\n\t\t\t\t\t\t\tselectbox.addClass('disabled');\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// при клике на псевдоселекте\r\n\t\t\t\t\t\tdivSelect.click(function() {\r\n\r\n\t\t\t\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\t\t\t\tif ($('div.jq-selectbox').filter('.opened').length) {\r\n\t\t\t\t\t\t\t\topt.onSelectClosed.call($('div.jq-selectbox').filter('.opened'));\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tel.focus();\r\n\r\n\t\t\t\t\t\t\t// если iOS, то не показываем выпадающий список,\r\n\t\t\t\t\t\t\t// т.к. отображается нативный и неизвестно, как его спрятать\r\n\t\t\t\t\t\t\tif (iOS) return;\r\n\r\n\t\t\t\t\t\t\t// умное позиционирование\r\n\t\t\t\t\t\t\tvar win = $(window);\r\n\t\t\t\t\t\t\tvar liHeight = li.data('li-height');\r\n\t\t\t\t\t\t\tvar topOffset = selectbox.offset().top;\r\n\t\t\t\t\t\t\tvar bottomOffset = win.height() - selectHeight - (topOffset - win.scrollTop());\r\n\t\t\t\t\t\t\tvar visible = el.data('visible-options');\r\n\t\t\t\t\t\t\tif (visible === undefined || visible === '') visible = opt.selectVisibleOptions;\r\n\t\t\t\t\t\t\tvar minHeight = liHeight * 5;\r\n\t\t\t\t\t\t\tvar newHeight = liHeight * visible;\r\n\t\t\t\t\t\t\tif (visible > 0 && visible < 6) minHeight = newHeight;\r\n\t\t\t\t\t\t\tif (visible === 0) newHeight = 'auto';\r\n\r\n\t\t\t\t\t\t\tvar dropDown = function() {\r\n\t\t\t\t\t\t\t\tdropdown.height('auto').css({bottom: 'auto', top: position});\r\n\t\t\t\t\t\t\t\tvar maxHeightBottom = function() {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', Math.floor((bottomOffset - 20 - searchHeight) / liHeight) * liHeight);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tmaxHeightBottom();\r\n\t\t\t\t\t\t\t\tul.css('max-height', newHeight);\r\n\t\t\t\t\t\t\t\tif (isMaxHeight != 'none') {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', isMaxHeight);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (bottomOffset < (dropdown.outerHeight() + 20)) {\r\n\t\t\t\t\t\t\t\t\tmaxHeightBottom();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tvar dropUp = function() {\r\n\t\t\t\t\t\t\t\tdropdown.height('auto').css({top: 'auto', bottom: position});\r\n\t\t\t\t\t\t\t\tvar maxHeightTop = function() {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', Math.floor((topOffset - win.scrollTop() - 20 - searchHeight) / liHeight) * liHeight);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tmaxHeightTop();\r\n\t\t\t\t\t\t\t\tul.css('max-height', newHeight);\r\n\t\t\t\t\t\t\t\tif (isMaxHeight != 'none') {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', isMaxHeight);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif ((topOffset - win.scrollTop() - 20) < (dropdown.outerHeight() + 20)) {\r\n\t\t\t\t\t\t\t\t\tmaxHeightTop();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tif (selectSmartPositioning === true || selectSmartPositioning === 1) {\r\n\t\t\t\t\t\t\t\t// раскрытие вниз\r\n\t\t\t\t\t\t\t\tif (bottomOffset > (minHeight + searchHeight + 20)) {\r\n\t\t\t\t\t\t\t\t\tdropDown();\r\n\t\t\t\t\t\t\t\t\tselectbox.removeClass('dropup').addClass('dropdown');\r\n\t\t\t\t\t\t\t\t// раскрытие вверх\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tdropUp();\r\n\t\t\t\t\t\t\t\t\tselectbox.removeClass('dropdown').addClass('dropup');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (selectSmartPositioning === false || selectSmartPositioning === 0) {\r\n\t\t\t\t\t\t\t\t// раскрытие вниз\r\n\t\t\t\t\t\t\t\tif (bottomOffset > (minHeight + searchHeight + 20)) {\r\n\t\t\t\t\t\t\t\t\tdropDown();\r\n\t\t\t\t\t\t\t\t\tselectbox.removeClass('dropup').addClass('dropdown');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// если умное позиционирование отключено\r\n\t\t\t\t\t\t\t\tdropdown.height('auto').css({bottom: 'auto', top: position});\r\n\t\t\t\t\t\t\t\tul.css('max-height', newHeight);\r\n\t\t\t\t\t\t\t\tif (isMaxHeight != 'none') {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', isMaxHeight);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// если выпадающий список выходит за правый край окна браузера,\r\n\t\t\t\t\t\t\t// то меняем позиционирование с левого на правое\r\n\t\t\t\t\t\t\tif (selectbox.offset().left + dropdown.outerWidth() > win.width()) {\r\n\t\t\t\t\t\t\t\tdropdown.css({left: 'auto', right: 0});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// конец умного позиционирования\r\n\r\n\t\t\t\t\t\t\t$('div.jqselect').css({zIndex: (selectzIndex - 1)}).removeClass('opened');\r\n\t\t\t\t\t\t\tselectbox.css({zIndex: selectzIndex});\r\n\t\t\t\t\t\t\tif (dropdown.is(':hidden')) {\r\n\t\t\t\t\t\t\t\t$('div.jq-selectbox__dropdown:visible').hide();\r\n\t\t\t\t\t\t\t\tdropdown.show();\r\n\t\t\t\t\t\t\t\tselectbox.addClass('opened focused');\r\n\t\t\t\t\t\t\t\t// колбек при открытии селекта\r\n\t\t\t\t\t\t\t\topt.onSelectOpened.call(selectbox);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdropdown.hide();\r\n\t\t\t\t\t\t\t\tselectbox.removeClass('opened dropup dropdown');\r\n\t\t\t\t\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\t\t\t\t\tif ($('div.jq-selectbox').filter('.opened').length) {\r\n\t\t\t\t\t\t\t\t\topt.onSelectClosed.call(selectbox);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// поисковое поле\r\n\t\t\t\t\t\t\tif (search.length) {\r\n\t\t\t\t\t\t\t\tsearch.val('').keyup();\r\n\t\t\t\t\t\t\t\tnotFound.hide();\r\n\t\t\t\t\t\t\t\tsearch.keyup(function() {\r\n\t\t\t\t\t\t\t\t\tvar query = $(this).val();\r\n\t\t\t\t\t\t\t\t\tli.each(function() {\r\n\t\t\t\t\t\t\t\t\t\tif (!$(this).html().match(new RegExp('.*?' + query + '.*?', 'i'))) {\r\n\t\t\t\t\t\t\t\t\t\t\t$(this).hide();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t$(this).show();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t// прячем 1-ю пустую опцию\r\n\t\t\t\t\t\t\t\t\tif (option.first().text() === '' && el.data('placeholder') !== '') {\r\n\t\t\t\t\t\t\t\t\t\tli.first().hide();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (li.filter(':visible').length < 1) {\r\n\t\t\t\t\t\t\t\t\t\tnotFound.show();\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tnotFound.hide();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// прокручиваем до выбранного пункта при открытии списка\r\n\t\t\t\t\t\t\tif (li.filter('.selected').length) {\r\n\t\t\t\t\t\t\t\tif (el.val() === '') {\r\n\t\t\t\t\t\t\t\t\tul.scrollTop(0);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t// если нечетное количество видимых пунктов,\r\n\t\t\t\t\t\t\t\t\t// то высоту пункта делим пополам для последующего расчета\r\n\t\t\t\t\t\t\t\t\tif ( (ul.innerHeight() / liHeight) % 2 !== 0 ) liHeight = liHeight / 2;\r\n\t\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top - ul.innerHeight() / 2 + liHeight);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tpreventScrolling(ul);\r\n\r\n\t\t\t\t\t\t}); // end divSelect.click()\r\n\r\n\t\t\t\t\t\t// при наведении курсора на пункт списка\r\n\t\t\t\t\t\tli.hover(function() {\r\n\t\t\t\t\t\t\t$(this).siblings().removeClass('selected');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvar selectedText = li.filter('.selected').text();\r\n\r\n\t\t\t\t\t\t// при клике на пункт списка\r\n\t\t\t\t\t\tli.filter(':not(.disabled):not(.optgroup)').click(function() {\r\n\t\t\t\t\t\t\tel.focus();\r\n\t\t\t\t\t\t\tvar t = $(this);\r\n\t\t\t\t\t\t\tvar liText = t.text();\r\n\t\t\t\t\t\t\tif (!t.is('.selected')) {\r\n\t\t\t\t\t\t\t\tvar index = t.index();\r\n\t\t\t\t\t\t\t\tindex -= t.prevAll('.optgroup').length;\r\n\t\t\t\t\t\t\t\tt.addClass('selected sel').siblings().removeClass('selected sel');\r\n\t\t\t\t\t\t\t\toption.prop('selected', false).eq(index).prop('selected', true);\r\n\t\t\t\t\t\t\t\tselectedText = liText;\r\n\t\t\t\t\t\t\t\tdivText.text(liText);\r\n\r\n\t\t\t\t\t\t\t\t// передаем селекту класс выбранного пункта\r\n\t\t\t\t\t\t\t\tif (selectbox.data('jqfs-class')) selectbox.removeClass(selectbox.data('jqfs-class'));\r\n\t\t\t\t\t\t\t\tselectbox.data('jqfs-class', t.data('jqfs-class'));\r\n\t\t\t\t\t\t\t\tselectbox.addClass(t.data('jqfs-class'));\r\n\r\n\t\t\t\t\t\t\t\tel.change();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdropdown.hide();\r\n\t\t\t\t\t\t\tselectbox.removeClass('opened dropup dropdown');\r\n\t\t\t\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\t\t\t\topt.onSelectClosed.call(selectbox);\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tdropdown.mouseout(function() {\r\n\t\t\t\t\t\t\t$('li.sel', dropdown).addClass('selected');\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// изменение селекта\r\n\t\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\t\tdivText.text(option.filter(':selected').text()).removeClass('placeholder');\r\n\t\t\t\t\t\t\tli.removeClass('selected sel').not('.optgroup').eq(el[0].selectedIndex).addClass('selected sel');\r\n\t\t\t\t\t\t\t// добавляем класс, показывающий изменение селекта\r\n\t\t\t\t\t\t\tif (option.first().text() != li.filter('.selected').text()) {\r\n\t\t\t\t\t\t\t\tselectbox.addClass('changed');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tselectbox.removeClass('changed');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\t\tselectbox.addClass('focused');\r\n\t\t\t\t\t\t\t$('div.jqselect').not('.focused').removeClass('opened dropup dropdown').find('div.jq-selectbox__dropdown').hide();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\t\tselectbox.removeClass('focused');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// изменение селекта с клавиатуры\r\n\t\t\t\t\t\t.on('keydown.styler keyup.styler', function(e) {\r\n\t\t\t\t\t\t\tvar liHeight = li.data('li-height');\r\n\t\t\t\t\t\t\tif (el.val() === '') {\r\n\t\t\t\t\t\t\t\tdivText.text(selectPlaceholder).addClass('placeholder');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdivText.text(option.filter(':selected').text());\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tli.removeClass('selected sel').not('.optgroup').eq(el[0].selectedIndex).addClass('selected sel');\r\n\t\t\t\t\t\t\t// вверх, влево, Page Up, Home\r\n\t\t\t\t\t\t\tif (e.which == 38 || e.which == 37 || e.which == 33 || e.which == 36) {\r\n\t\t\t\t\t\t\t\tif (el.val() === '') {\r\n\t\t\t\t\t\t\t\t\tul.scrollTop(0);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// вниз, вправо, Page Down, End\r\n\t\t\t\t\t\t\tif (e.which == 40 || e.which == 39 || e.which == 34 || e.which == 35) {\r\n\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top - ul.innerHeight() + liHeight);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// закрываем выпадающий список при нажатии Enter\r\n\t\t\t\t\t\t\tif (e.which == 13) {\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tdropdown.hide();\r\n\t\t\t\t\t\t\t\tselectbox.removeClass('opened dropup dropdown');\r\n\t\t\t\t\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\t\t\t\t\topt.onSelectClosed.call(selectbox);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).on('keydown.styler', function(e) {\r\n\t\t\t\t\t\t\t// открываем выпадающий список при нажатии Space\r\n\t\t\t\t\t\t\tif (e.which == 32) {\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tdivSelect.click();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// прячем выпадающий список при клике за пределами селекта\r\n\t\t\t\t\t\tif (!onDocumentClick.registered) {\r\n\t\t\t\t\t\t\t$(document).on('click', onDocumentClick);\r\n\t\t\t\t\t\t\tonDocumentClick.registered = true;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} // end doSelect()\r\n\r\n\t\t\t\t\t// мультиселект\r\n\t\t\t\t\tfunction doMultipleSelect() {\r\n\r\n\t\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\t\tvar selectbox =\r\n\t\t\t\t\t\t\t$('<div class=\"jq-select-multiple jqselect\"></div>')\r\n\t\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t\t;\r\n\r\n\t\t\t\t\t\tel.after(selectbox);\r\n\r\n\t\t\t\t\t\tmakeList();\r\n\t\t\t\t\t\tselectbox.append('<ul>' + list + '</ul>');\r\n\t\t\t\t\t\tvar ul = $('ul', selectbox);\r\n\t\t\t\t\t\tvar li = $('li', selectbox);\r\n\t\t\t\t\t\tvar size = el.attr('size');\r\n\t\t\t\t\t\tvar ulHeight = ul.outerHeight();\r\n\t\t\t\t\t\tvar liHeight = li.outerHeight();\r\n\t\t\t\t\t\tif (size !== undefined && size > 0) {\r\n\t\t\t\t\t\t\tul.css({'height': liHeight * size});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tul.css({'height': liHeight * 4});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (ulHeight > selectbox.height()) {\r\n\t\t\t\t\t\t\tul.css('overflowY', 'scroll');\r\n\t\t\t\t\t\t\tpreventScrolling(ul);\r\n\t\t\t\t\t\t\t// прокручиваем до выбранного пункта\r\n\t\t\t\t\t\t\tif (li.filter('.selected').length) {\r\n\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// прячем оригинальный селект\r\n\t\t\t\t\t\tel.prependTo(selectbox);\r\n\r\n\t\t\t\t\t\t// если селект неактивный\r\n\t\t\t\t\t\tif (el.is(':disabled')) {\r\n\t\t\t\t\t\t\tselectbox.addClass('disabled');\r\n\t\t\t\t\t\t\toption.each(function() {\r\n\t\t\t\t\t\t\t\tif ($(this).is(':selected')) li.eq($(this).index()).addClass('selected');\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// если селект активный\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t// при клике на пункт списка\r\n\t\t\t\t\t\t\tli.filter(':not(.disabled):not(.optgroup)').click(function(e) {\r\n\t\t\t\t\t\t\t\tel.focus();\r\n\t\t\t\t\t\t\t\tvar clkd = $(this);\r\n\t\t\t\t\t\t\t\tif(!e.ctrlKey && !e.metaKey) clkd.addClass('selected');\r\n\t\t\t\t\t\t\t\tif(!e.shiftKey) clkd.addClass('first');\r\n\t\t\t\t\t\t\t\tif(!e.ctrlKey && !e.metaKey && !e.shiftKey) clkd.siblings().removeClass('selected first');\r\n\r\n\t\t\t\t\t\t\t\t// выделение пунктов при зажатом Ctrl\r\n\t\t\t\t\t\t\t\tif(e.ctrlKey || e.metaKey) {\r\n\t\t\t\t\t\t\t\t\tif (clkd.is('.selected')) clkd.removeClass('selected first');\r\n\t\t\t\t\t\t\t\t\t\telse clkd.addClass('selected first');\r\n\t\t\t\t\t\t\t\t\tclkd.siblings().removeClass('first');\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// выделение пунктов при зажатом Shift\r\n\t\t\t\t\t\t\t\tif(e.shiftKey) {\r\n\t\t\t\t\t\t\t\t\tvar prev = false,\r\n\t\t\t\t\t\t\t\t\t\t\tnext = false;\r\n\t\t\t\t\t\t\t\t\tclkd.siblings().removeClass('selected').siblings('.first').addClass('selected');\r\n\t\t\t\t\t\t\t\t\tclkd.prevAll().each(function() {\r\n\t\t\t\t\t\t\t\t\t\tif ($(this).is('.first')) prev = true;\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tclkd.nextAll().each(function() {\r\n\t\t\t\t\t\t\t\t\t\tif ($(this).is('.first')) next = true;\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tif (prev) {\r\n\t\t\t\t\t\t\t\t\t\tclkd.prevAll().each(function() {\r\n\t\t\t\t\t\t\t\t\t\t\tif ($(this).is('.selected')) return false;\r\n\t\t\t\t\t\t\t\t\t\t\t\telse $(this).not('.disabled, .optgroup').addClass('selected');\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (next) {\r\n\t\t\t\t\t\t\t\t\t\tclkd.nextAll().each(function() {\r\n\t\t\t\t\t\t\t\t\t\t\tif ($(this).is('.selected')) return false;\r\n\t\t\t\t\t\t\t\t\t\t\t\telse $(this).not('.disabled, .optgroup').addClass('selected');\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (li.filter('.selected').length == 1) clkd.addClass('first');\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// отмечаем выбранные мышью\r\n\t\t\t\t\t\t\t\toption.prop('selected', false);\r\n\t\t\t\t\t\t\t\tli.filter('.selected').each(function() {\r\n\t\t\t\t\t\t\t\t\tvar t = $(this);\r\n\t\t\t\t\t\t\t\t\tvar index = t.index();\r\n\t\t\t\t\t\t\t\t\tif (t.is('.option')) index -= t.prevAll('.optgroup').length;\r\n\t\t\t\t\t\t\t\t\toption.eq(index).prop('selected', true);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tel.change();\r\n\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t// отмечаем выбранные с клавиатуры\r\n\t\t\t\t\t\t\toption.each(function(i) {\r\n\t\t\t\t\t\t\t\t$(this).data('optionIndex', i);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\t\t\tli.removeClass('selected');\r\n\t\t\t\t\t\t\t\tvar arrIndexes = [];\r\n\t\t\t\t\t\t\t\toption.filter(':selected').each(function() {\r\n\t\t\t\t\t\t\t\t\tarrIndexes.push($(this).data('optionIndex'));\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tli.not('.optgroup').filter(function(i) {\r\n\t\t\t\t\t\t\t\t\treturn $.inArray(i, arrIndexes) > -1;\r\n\t\t\t\t\t\t\t\t}).addClass('selected');\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\t\t\tselectbox.addClass('focused');\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\t\t\tselectbox.removeClass('focused');\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t// прокручиваем с клавиатуры\r\n\t\t\t\t\t\t\tif (ulHeight > selectbox.height()) {\r\n\t\t\t\t\t\t\t\tel.on('keydown.styler', function(e) {\r\n\t\t\t\t\t\t\t\t\t// вверх, влево, PageUp\r\n\t\t\t\t\t\t\t\t\tif (e.which == 38 || e.which == 37 || e.which == 33) {\r\n\t\t\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top - liHeight);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t// вниз, вправо, PageDown\r\n\t\t\t\t\t\t\t\t\tif (e.which == 40 || e.which == 39 || e.which == 34) {\r\n\t\t\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected:last').position().top - ul.innerHeight() + liHeight * 2);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} // end doMultipleSelect()\r\n\r\n\t\t\t\t\tif (el.is('[multiple]')) {\r\n\r\n\t\t\t\t\t\t// если Android или iOS, то мультиселект не стилизуем\r\n\t\t\t\t\t\t// причина для Android - в стилизованном селекте нет возможности выбрать несколько пунктов\r\n\t\t\t\t\t\t// причина для iOS - в стилизованном селекте неправильно отображаются выбранные пункты\r\n\t\t\t\t\t\tif (Android || iOS) return;\r\n\r\n\t\t\t\t\t\tdoMultipleSelect();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdoSelect();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}; // end selectboxOutput()\r\n\r\n\t\t\t\tselectboxOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.off('.styler').parent().before(el).remove();\r\n\t\t\t\t\tselectboxOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end select\r\n\r\n\t\t\t// reset\r\n\t\t\t} else if (el.is(':reset')) {\r\n\t\t\t\tel.on('click', function() {\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tel.closest('form').find('input, select').trigger('refresh');\r\n\t\t\t\t\t}, 1);\r\n\t\t\t\t});\r\n\t\t\t} // end reset\r\n\r\n\t\t}, // init: function()\r\n\r\n\t\t// деструктор\r\n\t\tdestroy: function() {\r\n\r\n\t\t\tvar el = $(this.element);\r\n\r\n\t\t\tif (el.is(':checkbox') || el.is(':radio')) {\r\n\t\t\t\tel.removeData('_' + pluginName).off('.styler refresh').removeAttr('style').parent().before(el).remove();\r\n\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').off('.styler');\r\n\t\t\t} else if (el.is('input[type=\"number\"]')) {\r\n\t\t\t\tel.removeData('_' + pluginName).off('.styler refresh').closest('.jq-number').before(el).remove();\r\n\t\t\t} else if (el.is(':file') || el.is('select')) {\r\n\t\t\t\tel.removeData('_' + pluginName).off('.styler refresh').removeAttr('style').parent().before(el).remove();\r\n\t\t\t}\r\n\r\n\t\t} // destroy: function()\r\n\r\n\t}; // Plugin.prototype\r\n\r\n\t$.fn[pluginName] = function(options) {\r\n\t\tvar args = arguments;\r\n\t\tif (options === undefined || typeof options === 'object') {\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tif (!$.data(this, '_' + pluginName)) {\r\n\t\t\t\t\t$.data(this, '_' + pluginName, new Plugin(this, options));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// колбек после выполнения плагина\r\n\t\t\t.promise()\r\n\t\t\t.done(function() {\r\n\t\t\t\tvar opt = $(this[0]).data('_' + pluginName);\r\n\t\t\t\tif (opt) opt.options.onFormStyled.call();\r\n\t\t\t});\r\n\t\t\treturn this;\r\n\t\t} else if (typeof options === 'string' && options[0] !== '_' && options !== 'init') {\r\n\t\t\tvar returns;\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tvar instance = $.data(this, '_' + pluginName);\r\n\t\t\t\tif (instance instanceof Plugin && typeof instance[options] === 'function') {\r\n\t\t\t\t\treturns = instance[options].apply(instance, Array.prototype.slice.call(args, 1));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn returns !== undefined ? returns : this;\r\n\t\t}\r\n\t};\r\n\r\n\t// прячем выпадающий список при клике за пределами селекта\r\n\tfunction onDocumentClick(e) {\r\n\t\t// e.target.nodeName != 'OPTION' - добавлено для обхода бага в Opera на движке Presto\r\n\t\t// (при изменении селекта с клавиатуры срабатывает событие onclick)\r\n\t\tif (!$(e.target).parents().hasClass('jq-selectbox') && e.target.nodeName != 'OPTION') {\r\n\t\t\tif ($('div.jq-selectbox.opened').length) {\r\n\t\t\t\tvar selectbox = $('div.jq-selectbox.opened'),\r\n\t\t\t\t\t\tsearch = $('div.jq-selectbox__search input', selectbox),\r\n\t\t\t\t\t\tdropdown = $('div.jq-selectbox__dropdown', selectbox),\r\n\t\t\t\t\t\topt = selectbox.find('select').data('_' + pluginName).options;\r\n\r\n\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\topt.onSelectClosed.call(selectbox);\r\n\r\n\t\t\t\tif (search.length) search.val('').keyup();\r\n\t\t\t\tdropdown.hide().find('li.sel').addClass('selected');\r\n\t\t\t\tselectbox.removeClass('focused opened dropup dropdown');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tonDocumentClick.registered = false;\r\n\r\n}));","/**\r\n * jquery.mask.js\r\n * @version: v1.14.15\r\n * @author: Igor Escobar\r\n *\r\n * Created by Igor Escobar on 2012-03-10. Please report any bug at github.com/igorescobar/jQuery-Mask-Plugin\r\n *\r\n * Copyright (c) 2012 Igor Escobar http://igorescobar.com\r\n *\r\n * The MIT License (http://www.opensource.org/licenses/mit-license.php)\r\n *\r\n * Permission is hereby granted, free of charge, to any person\r\n * obtaining a copy of this software and associated documentation\r\n * files (the \"Software\"), to deal in the Software without\r\n * restriction, including without limitation the rights to use,\r\n * copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the\r\n * Software is furnished to do so, subject to the following\r\n * conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be\r\n * included in all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\r\n * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\r\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\r\n * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\r\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\r\n * OTHER DEALINGS IN THE SOFTWARE.\r\n */\r\n\r\n/* jshint laxbreak: true */\r\n/* jshint maxcomplexity:17 */\r\n/* global define */\r\n\r\n// UMD (Universal Module Definition) patterns for JavaScript modules that work everywhere.\r\n// https://github.com/umdjs/umd/blob/master/templates/jqueryPlugin.js\r\n(function (factory, jQuery, Zepto) {\r\n\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(['jquery'], factory);\r\n    } else if (typeof exports === 'object') {\r\n        module.exports = factory(require('jquery'));\r\n    } else {\r\n        factory(jQuery || Zepto);\r\n    }\r\n\r\n}(function ($) {\r\n    'use strict';\r\n\r\n    var Mask = function (el, mask, options) {\r\n\r\n        var p = {\r\n            invalid: [],\r\n            getCaret: function () {\r\n                try {\r\n                    var sel,\r\n                        pos = 0,\r\n                        ctrl = el.get(0),\r\n                        dSel = document.selection,\r\n                        cSelStart = ctrl.selectionStart;\r\n\r\n                    // IE Support\r\n                    if (dSel && navigator.appVersion.indexOf('MSIE 10') === -1) {\r\n                        sel = dSel.createRange();\r\n                        sel.moveStart('character', -p.val().length);\r\n                        pos = sel.text.length;\r\n                    }\r\n                    // Firefox support\r\n                    else if (cSelStart || cSelStart === '0') {\r\n                        pos = cSelStart;\r\n                    }\r\n\r\n                    return pos;\r\n                } catch (e) {}\r\n            },\r\n            setCaret: function(pos) {\r\n                try {\r\n                    if (el.is(':focus')) {\r\n                        var range, ctrl = el.get(0);\r\n\r\n                        // Firefox, WebKit, etc..\r\n                        if (ctrl.setSelectionRange) {\r\n                            ctrl.setSelectionRange(pos, pos);\r\n                        } else { // IE\r\n                            range = ctrl.createTextRange();\r\n                            range.collapse(true);\r\n                            range.moveEnd('character', pos);\r\n                            range.moveStart('character', pos);\r\n                            range.select();\r\n                        }\r\n                    }\r\n                } catch (e) {}\r\n            },\r\n            events: function() {\r\n                el\r\n                .on('keydown.mask', function(e) {\r\n                    el.data('mask-keycode', e.keyCode || e.which);\r\n                    el.data('mask-previus-value', el.val());\r\n                    el.data('mask-previus-caret-pos', p.getCaret());\r\n                    p.maskDigitPosMapOld = p.maskDigitPosMap;\r\n                })\r\n                .on($.jMaskGlobals.useInput ? 'input.mask' : 'keyup.mask', p.behaviour)\r\n                .on('paste.mask drop.mask', function() {\r\n                    setTimeout(function() {\r\n                        el.keydown().keyup();\r\n                    }, 100);\r\n                })\r\n                .on('change.mask', function(){\r\n                    el.data('changed', true);\r\n                })\r\n                .on('blur.mask', function(){\r\n                    if (oldValue !== p.val() && !el.data('changed')) {\r\n                        el.trigger('change');\r\n                    }\r\n                    el.data('changed', false);\r\n                })\r\n                // it's very important that this callback remains in this position\r\n                // otherwhise oldValue it's going to work buggy\r\n                .on('blur.mask', function() {\r\n                    oldValue = p.val();\r\n                })\r\n                // select all text on focus\r\n                .on('focus.mask', function (e) {\r\n                    if (options.selectOnFocus === true) {\r\n                        $(e.target).select();\r\n                    }\r\n                })\r\n                // clear the value if it not complete the mask\r\n                .on('focusout.mask', function() {\r\n                    if (options.clearIfNotMatch && !regexMask.test(p.val())) {\r\n                       p.val('');\r\n                   }\r\n                });\r\n            },\r\n            getRegexMask: function() {\r\n                var maskChunks = [], translation, pattern, optional, recursive, oRecursive, r;\r\n\r\n                for (var i = 0; i < mask.length; i++) {\r\n                    translation = jMask.translation[mask.charAt(i)];\r\n\r\n                    if (translation) {\r\n\r\n                        pattern = translation.pattern.toString().replace(/.{1}$|^.{1}/g, '');\r\n                        optional = translation.optional;\r\n                        recursive = translation.recursive;\r\n\r\n                        if (recursive) {\r\n                            maskChunks.push(mask.charAt(i));\r\n                            oRecursive = {digit: mask.charAt(i), pattern: pattern};\r\n                        } else {\r\n                            maskChunks.push(!optional && !recursive ? pattern : (pattern + '?'));\r\n                        }\r\n\r\n                    } else {\r\n                        maskChunks.push(mask.charAt(i).replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'));\r\n                    }\r\n                }\r\n\r\n                r = maskChunks.join('');\r\n\r\n                if (oRecursive) {\r\n                    r = r.replace(new RegExp('(' + oRecursive.digit + '(.*' + oRecursive.digit + ')?)'), '($1)?')\r\n                         .replace(new RegExp(oRecursive.digit, 'g'), oRecursive.pattern);\r\n                }\r\n\r\n                return new RegExp(r);\r\n            },\r\n            destroyEvents: function() {\r\n                el.off(['input', 'keydown', 'keyup', 'paste', 'drop', 'blur', 'focusout', ''].join('.mask '));\r\n            },\r\n            val: function(v) {\r\n                var isInput = el.is('input'),\r\n                    method = isInput ? 'val' : 'text',\r\n                    r;\r\n\r\n                if (arguments.length > 0) {\r\n                    if (el[method]() !== v) {\r\n                        el[method](v);\r\n                    }\r\n                    r = el;\r\n                } else {\r\n                    r = el[method]();\r\n                }\r\n\r\n                return r;\r\n            },\r\n            calculateCaretPosition: function() {\r\n                var oldVal = el.data('mask-previus-value') || '',\r\n                    newVal = p.getMasked(),\r\n                    caretPosNew = p.getCaret();\r\n                if (oldVal !== newVal) {\r\n                    var caretPosOld = el.data('mask-previus-caret-pos') || 0,\r\n                        newValL = newVal.length,\r\n                        oldValL = oldVal.length,\r\n                        maskDigitsBeforeCaret = 0,\r\n                        maskDigitsAfterCaret = 0,\r\n                        maskDigitsBeforeCaretAll = 0,\r\n                        maskDigitsBeforeCaretAllOld = 0,\r\n                        i = 0;\r\n\r\n                    for (i = caretPosNew; i < newValL; i++) {\r\n                        if (!p.maskDigitPosMap[i]) {\r\n                            break;\r\n                        }\r\n                        maskDigitsAfterCaret++;\r\n                    }\r\n\r\n                    for (i = caretPosNew - 1; i >= 0; i--) {\r\n                        if (!p.maskDigitPosMap[i]) {\r\n                            break;\r\n                        }\r\n                        maskDigitsBeforeCaret++;\r\n                    }\r\n\r\n                    for (i = caretPosNew - 1; i >= 0; i--) {\r\n                        if (p.maskDigitPosMap[i]) {\r\n                            maskDigitsBeforeCaretAll++;\r\n                        }\r\n                    }\r\n\r\n                    for (i = caretPosOld - 1; i >= 0; i--) {\r\n                        if (p.maskDigitPosMapOld[i]) {\r\n                            maskDigitsBeforeCaretAllOld++;\r\n                        }\r\n                    }\r\n\r\n                    // if the cursor is at the end keep it there\r\n                    if (caretPosNew > oldValL) {\r\n                      caretPosNew = newValL * 10;\r\n                    } else if (caretPosOld >= caretPosNew && caretPosOld !== oldValL) {\r\n                        if (!p.maskDigitPosMapOld[caretPosNew])  {\r\n                          var caretPos = caretPosNew;\r\n                          caretPosNew -= maskDigitsBeforeCaretAllOld - maskDigitsBeforeCaretAll;\r\n                          caretPosNew -= maskDigitsBeforeCaret;\r\n                          if (p.maskDigitPosMap[caretPosNew])  {\r\n                            caretPosNew = caretPos;\r\n                          }\r\n                        }\r\n                    }\r\n                    else if (caretPosNew > caretPosOld) {\r\n                        caretPosNew += maskDigitsBeforeCaretAll - maskDigitsBeforeCaretAllOld;\r\n                        caretPosNew += maskDigitsAfterCaret;\r\n                    }\r\n                }\r\n                return caretPosNew;\r\n            },\r\n            behaviour: function(e) {\r\n                e = e || window.event;\r\n                p.invalid = [];\r\n\r\n                var keyCode = el.data('mask-keycode');\r\n\r\n                if ($.inArray(keyCode, jMask.byPassKeys) === -1) {\r\n                    var newVal = p.getMasked(),\r\n                        caretPos = p.getCaret();\r\n\r\n                    // this is a compensation to devices/browsers that don't compensate\r\n                    // caret positioning the right way\r\n                    setTimeout(function() {\r\n                      p.setCaret(p.calculateCaretPosition());\r\n                    }, $.jMaskGlobals.keyStrokeCompensation);\r\n\r\n                    p.val(newVal);\r\n                    p.setCaret(caretPos);\r\n                    return p.callbacks(e);\r\n                }\r\n            },\r\n            getMasked: function(skipMaskChars, val) {\r\n                var buf = [],\r\n                    value = val === undefined ? p.val() : val + '',\r\n                    m = 0, maskLen = mask.length,\r\n                    v = 0, valLen = value.length,\r\n                    offset = 1, addMethod = 'push',\r\n                    resetPos = -1,\r\n                    maskDigitCount = 0,\r\n                    maskDigitPosArr = [],\r\n                    lastMaskChar,\r\n                    check;\r\n\r\n                if (options.reverse) {\r\n                    addMethod = 'unshift';\r\n                    offset = -1;\r\n                    lastMaskChar = 0;\r\n                    m = maskLen - 1;\r\n                    v = valLen - 1;\r\n                    check = function () {\r\n                        return m > -1 && v > -1;\r\n                    };\r\n                } else {\r\n                    lastMaskChar = maskLen - 1;\r\n                    check = function () {\r\n                        return m < maskLen && v < valLen;\r\n                    };\r\n                }\r\n\r\n                var lastUntranslatedMaskChar;\r\n                while (check()) {\r\n                    var maskDigit = mask.charAt(m),\r\n                        valDigit = value.charAt(v),\r\n                        translation = jMask.translation[maskDigit];\r\n\r\n                    if (translation) {\r\n                        if (valDigit.match(translation.pattern)) {\r\n                            buf[addMethod](valDigit);\r\n                             if (translation.recursive) {\r\n                                if (resetPos === -1) {\r\n                                    resetPos = m;\r\n                                } else if (m === lastMaskChar && m !== resetPos) {\r\n                                    m = resetPos - offset;\r\n                                }\r\n\r\n                                if (lastMaskChar === resetPos) {\r\n                                    m -= offset;\r\n                                }\r\n                            }\r\n                            m += offset;\r\n                        } else if (valDigit === lastUntranslatedMaskChar) {\r\n                            // matched the last untranslated (raw) mask character that we encountered\r\n                            // likely an insert offset the mask character from the last entry; fall\r\n                            // through and only increment v\r\n                            maskDigitCount--;\r\n                            lastUntranslatedMaskChar = undefined;\r\n                        } else if (translation.optional) {\r\n                            m += offset;\r\n                            v -= offset;\r\n                        } else if (translation.fallback) {\r\n                            buf[addMethod](translation.fallback);\r\n                            m += offset;\r\n                            v -= offset;\r\n                        } else {\r\n                          p.invalid.push({p: v, v: valDigit, e: translation.pattern});\r\n                        }\r\n                        v += offset;\r\n                    } else {\r\n                        if (!skipMaskChars) {\r\n                            buf[addMethod](maskDigit);\r\n                        }\r\n\r\n                        if (valDigit === maskDigit) {\r\n                            maskDigitPosArr.push(v);\r\n                            v += offset;\r\n                        } else {\r\n                            lastUntranslatedMaskChar = maskDigit;\r\n                            maskDigitPosArr.push(v + maskDigitCount);\r\n                            maskDigitCount++;\r\n                        }\r\n\r\n                        m += offset;\r\n                    }\r\n                }\r\n\r\n                var lastMaskCharDigit = mask.charAt(lastMaskChar);\r\n                if (maskLen === valLen + 1 && !jMask.translation[lastMaskCharDigit]) {\r\n                    buf.push(lastMaskCharDigit);\r\n                }\r\n\r\n                var newVal = buf.join('');\r\n                p.mapMaskdigitPositions(newVal, maskDigitPosArr, valLen);\r\n                return newVal;\r\n            },\r\n            mapMaskdigitPositions: function(newVal, maskDigitPosArr, valLen) {\r\n              var maskDiff = options.reverse ? newVal.length - valLen : 0;\r\n              p.maskDigitPosMap = {};\r\n              for (var i = 0; i < maskDigitPosArr.length; i++) {\r\n                p.maskDigitPosMap[maskDigitPosArr[i] + maskDiff] = 1;\r\n              }\r\n            },\r\n            callbacks: function (e) {\r\n                var val = p.val(),\r\n                    changed = val !== oldValue,\r\n                    defaultArgs = [val, e, el, options],\r\n                    callback = function(name, criteria, args) {\r\n                        if (typeof options[name] === 'function' && criteria) {\r\n                            options[name].apply(this, args);\r\n                        }\r\n                    };\r\n\r\n                callback('onChange', changed === true, defaultArgs);\r\n                callback('onKeyPress', changed === true, defaultArgs);\r\n                callback('onComplete', val.length === mask.length, defaultArgs);\r\n                callback('onInvalid', p.invalid.length > 0, [val, e, el, p.invalid, options]);\r\n            }\r\n        };\r\n\r\n        el = $(el);\r\n        var jMask = this, oldValue = p.val(), regexMask;\r\n\r\n        mask = typeof mask === 'function' ? mask(p.val(), undefined, el,  options) : mask;\r\n\r\n        // public methods\r\n        jMask.mask = mask;\r\n        jMask.options = options;\r\n        jMask.remove = function() {\r\n            var caret = p.getCaret();\r\n            if (jMask.options.placeholder) {\r\n                el.removeAttr('placeholder');\r\n            }\r\n            if (el.data('mask-maxlength')) {\r\n                el.removeAttr('maxlength');\r\n            }\r\n            p.destroyEvents();\r\n            p.val(jMask.getCleanVal());\r\n            p.setCaret(caret);\r\n            return el;\r\n        };\r\n\r\n        // get value without mask\r\n        jMask.getCleanVal = function() {\r\n           return p.getMasked(true);\r\n        };\r\n\r\n        // get masked value without the value being in the input or element\r\n        jMask.getMaskedVal = function(val) {\r\n           return p.getMasked(false, val);\r\n        };\r\n\r\n       jMask.init = function(onlyMask) {\r\n            onlyMask = onlyMask || false;\r\n            options = options || {};\r\n\r\n            jMask.clearIfNotMatch  = $.jMaskGlobals.clearIfNotMatch;\r\n            jMask.byPassKeys       = $.jMaskGlobals.byPassKeys;\r\n            jMask.translation      = $.extend({}, $.jMaskGlobals.translation, options.translation);\r\n\r\n            jMask = $.extend(true, {}, jMask, options);\r\n\r\n            regexMask = p.getRegexMask();\r\n\r\n            if (onlyMask) {\r\n                p.events();\r\n                p.val(p.getMasked());\r\n            } else {\r\n                if (options.placeholder) {\r\n                    el.attr('placeholder' , options.placeholder);\r\n                }\r\n\r\n                // this is necessary, otherwise if the user submit the form\r\n                // and then press the \"back\" button, the autocomplete will erase\r\n                // the data. Works fine on IE9+, FF, Opera, Safari.\r\n                if (el.data('mask')) {\r\n                  el.attr('autocomplete', 'off');\r\n                }\r\n\r\n                // detect if is necessary let the user type freely.\r\n                // for is a lot faster than forEach.\r\n                for (var i = 0, maxlength = true; i < mask.length; i++) {\r\n                    var translation = jMask.translation[mask.charAt(i)];\r\n                    if (translation && translation.recursive) {\r\n                        maxlength = false;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (maxlength) {\r\n                    el.attr('maxlength', mask.length).data('mask-maxlength', true);\r\n                }\r\n\r\n                p.destroyEvents();\r\n                p.events();\r\n\r\n                var caret = p.getCaret();\r\n                p.val(p.getMasked());\r\n                p.setCaret(caret);\r\n            }\r\n        };\r\n\r\n        jMask.init(!el.is('input'));\r\n    };\r\n\r\n    $.maskWatchers = {};\r\n    var HTMLAttributes = function () {\r\n        var input = $(this),\r\n            options = {},\r\n            prefix = 'data-mask-',\r\n            mask = input.attr('data-mask');\r\n\r\n        if (input.attr(prefix + 'reverse')) {\r\n            options.reverse = true;\r\n        }\r\n\r\n        if (input.attr(prefix + 'clearifnotmatch')) {\r\n            options.clearIfNotMatch = true;\r\n        }\r\n\r\n        if (input.attr(prefix + 'selectonfocus') === 'true') {\r\n           options.selectOnFocus = true;\r\n        }\r\n\r\n        if (notSameMaskObject(input, mask, options)) {\r\n            return input.data('mask', new Mask(this, mask, options));\r\n        }\r\n    },\r\n    notSameMaskObject = function(field, mask, options) {\r\n        options = options || {};\r\n        var maskObject = $(field).data('mask'),\r\n            stringify = JSON.stringify,\r\n            value = $(field).val() || $(field).text();\r\n        try {\r\n            if (typeof mask === 'function') {\r\n                mask = mask(value);\r\n            }\r\n            return typeof maskObject !== 'object' || stringify(maskObject.options) !== stringify(options) || maskObject.mask !== mask;\r\n        } catch (e) {}\r\n    },\r\n    eventSupported = function(eventName) {\r\n        var el = document.createElement('div'), isSupported;\r\n\r\n        eventName = 'on' + eventName;\r\n        isSupported = (eventName in el);\r\n\r\n        if ( !isSupported ) {\r\n            el.setAttribute(eventName, 'return;');\r\n            isSupported = typeof el[eventName] === 'function';\r\n        }\r\n        el = null;\r\n\r\n        return isSupported;\r\n    };\r\n\r\n    $.fn.mask = function(mask, options) {\r\n        options = options || {};\r\n        var selector = this.selector,\r\n            globals = $.jMaskGlobals,\r\n            interval = globals.watchInterval,\r\n            watchInputs = options.watchInputs || globals.watchInputs,\r\n            maskFunction = function() {\r\n                if (notSameMaskObject(this, mask, options)) {\r\n                    return $(this).data('mask', new Mask(this, mask, options));\r\n                }\r\n            };\r\n\r\n        $(this).each(maskFunction);\r\n\r\n        if (selector && selector !== '' && watchInputs) {\r\n            clearInterval($.maskWatchers[selector]);\r\n            $.maskWatchers[selector] = setInterval(function(){\r\n                $(document).find(selector).each(maskFunction);\r\n            }, interval);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    $.fn.masked = function(val) {\r\n        return this.data('mask').getMaskedVal(val);\r\n    };\r\n\r\n    $.fn.unmask = function() {\r\n        clearInterval($.maskWatchers[this.selector]);\r\n        delete $.maskWatchers[this.selector];\r\n        return this.each(function() {\r\n            var dataMask = $(this).data('mask');\r\n            if (dataMask) {\r\n                dataMask.remove().removeData('mask');\r\n            }\r\n        });\r\n    };\r\n\r\n    $.fn.cleanVal = function() {\r\n        return this.data('mask').getCleanVal();\r\n    };\r\n\r\n    $.applyDataMask = function(selector) {\r\n        selector = selector || $.jMaskGlobals.maskElements;\r\n        var $selector = (selector instanceof $) ? selector : $(selector);\r\n        $selector.filter($.jMaskGlobals.dataMaskAttr).each(HTMLAttributes);\r\n    };\r\n\r\n    var globals = {\r\n        maskElements: 'input,td,span,div',\r\n        dataMaskAttr: '*[data-mask]',\r\n        dataMask: true,\r\n        watchInterval: 300,\r\n        watchInputs: true,\r\n        keyStrokeCompensation: 10,\r\n        // old versions of chrome dont work great with input event\r\n        useInput: !/Chrome\\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent) && eventSupported('input'),\r\n        watchDataMask: false,\r\n        byPassKeys: [9, 16, 17, 18, 36, 37, 38, 39, 40, 91],\r\n        translation: {\r\n            '0': {pattern: /\\d/},\r\n            '9': {pattern: /\\d/, optional: true},\r\n            '#': {pattern: /\\d/, recursive: true},\r\n            'A': {pattern: /[a-zA-Z0-9]/},\r\n            'S': {pattern: /[a-zA-Z]/}\r\n        }\r\n    };\r\n\r\n    $.jMaskGlobals = $.jMaskGlobals || {};\r\n    globals = $.jMaskGlobals = $.extend(true, {}, globals, $.jMaskGlobals);\r\n\r\n    // looking for inputs with data-mask attribute\r\n    if (globals.dataMask) {\r\n        $.applyDataMask();\r\n    }\r\n\r\n    setInterval(function() {\r\n        if ($.jMaskGlobals.watchDataMask) {\r\n            $.applyDataMask();\r\n        }\r\n    }, globals.watchInterval);\r\n}, window.jQuery, window.Zepto));\r\n","/*jshint multistr:true, curly: false */\r\n/*global jQuery:false, define: false */\r\n/**\r\n * jRange - Awesome range control\r\n *\r\n * Written by\r\n * ----------\r\n * Nitin Hayaran (nitinhayaran@gmail.com)\r\n *\r\n * Licensed under the MIT (MIT-LICENSE.txt).\r\n *\r\n * @author Nitin Hayaran\r\n * @version 0.1-RELEASE\r\n *\r\n * Dependencies\r\n * ------------\r\n * jQuery (http://jquery.com)\r\n *\r\n **/\r\n;\r\n(function($, window, document, undefined) {\r\n\t'use strict';\r\n\r\n\tvar jRange = function() {\r\n\t\treturn this.init.apply(this, arguments);\r\n\t};\r\n\tjRange.prototype = {\r\n\t\tdefaults: {\r\n\t\t\tonstatechange: function() {},\r\n      ondragend: function() {},\r\n      onbarclicked: function() {},\r\n\t\t\tisRange: false,\r\n\t\t\tshowLabels: true,\r\n\t\t\tshowScale: true,\r\n\t\t\tstep: 1,\r\n\t\t\tformat: '%s',\r\n\t\t\ttheme: 'theme-green',\r\n\t\t\twidth: 300,\r\n\t\t\tdisable: false,\r\n\t\t\tsnap: false\r\n\t\t},\r\n\t\ttemplate: '<div class=\"slider-container\">\\\r\n\t\t\t<div class=\"back-bar\">\\\r\n                <div class=\"selected-bar\"></div>\\\r\n                <div class=\"pointer low\"></div><div class=\"pointer-label low\">123456</div>\\\r\n                <div class=\"pointer high\"></div><div class=\"pointer-label high\">456789</div>\\\r\n                <div class=\"clickable-dummy\"></div>\\\r\n            </div>\\\r\n            <div class=\"scale\"></div>\\\r\n\t\t</div>',\r\n\t\tinit: function(node, options) {\r\n\t\t\tthis.options       = $.extend({}, this.defaults, options);\r\n\t\t\tthis.inputNode     = $(node);\r\n\t\t\tthis.options.value = this.inputNode.val() || (this.options.isRange ? this.options.from + ',' + this.options.from : '' + this.options.from);\r\n\t\t\tthis.domNode       = $(this.template);\r\n\t\t\tthis.domNode.addClass(this.options.theme);\r\n\t\t\tthis.inputNode.after(this.domNode);\r\n\t\t\tthis.domNode.on('change', this.onChange);\r\n\t\t\tthis.pointers      = $('.pointer', this.domNode);\r\n\t\t\tthis.lowPointer    = this.pointers.first();\r\n\t\t\tthis.highPointer   = this.pointers.last();\r\n\t\t\tthis.labels        = $('.pointer-label', this.domNode);\r\n\t\t\tthis.lowLabel      = this.labels.first();\r\n\t\t\tthis.highLabel     = this.labels.last();\r\n\t\t\tthis.scale         = $('.scale', this.domNode);\r\n\t\t\tthis.bar           = $('.selected-bar', this.domNode);\r\n\t\t\tthis.clickableBar  = this.domNode.find('.clickable-dummy');\r\n\t\t\tthis.interval      = this.options.to - this.options.from;\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\trender: function() {\r\n\t\t\t// Check if inputNode is visible, and have some width, so that we can set slider width accordingly.\r\n\t\t\tif (this.inputNode.width() === 0 && !this.options.width) {\r\n\t\t\t\tconsole.log('jRange : no width found, returning');\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tthis.options.width = this.options.width || this.inputNode.width();\r\n\t\t\t\tthis.domNode.width(this.options.width);\r\n\t\t\t\tthis.inputNode.hide();\r\n\t\t\t}\r\n\r\n\t\t\tif (this.isSingle()) {\r\n\t\t\t\tthis.lowPointer.hide();\r\n\t\t\t\tthis.lowLabel.hide();\r\n\t\t\t}\r\n\t\t\tif (!this.options.showLabels) {\r\n\t\t\t\tthis.labels.hide();\r\n\t\t\t}\r\n\t\t\tthis.attachEvents();\r\n\t\t\tif (this.options.showScale) {\r\n\t\t\t\tthis.renderScale();\r\n\t\t\t}\r\n\t\t\tthis.setValue(this.options.value);\r\n\t\t},\r\n\t\tisSingle: function() {\r\n\t\t\tif (typeof(this.options.value) === 'number') {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn (this.options.value.indexOf(',') !== -1 || this.options.isRange) ?\r\n\t\t\t\tfalse : true;\r\n\t\t},\r\n\t\tattachEvents: function() {\r\n\t\t\tthis.clickableBar.click($.proxy(this.barClicked, this));\r\n\t\t\tthis.pointers.on('mousedown touchstart', $.proxy(this.onDragStart, this));\r\n\t\t\tthis.pointers.bind('dragstart', function(event) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t});\r\n\t\t},\r\n\t\tonDragStart: function(e) {\r\n\t\t\tif ( this.options.disable || (e.type === 'mousedown' && e.which !== 1)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tvar pointer = $(e.target);\r\n\t\t\tthis.pointers.removeClass('last-active');\r\n\t\t\tpointer.addClass('focused last-active');\r\n\t\t\tthis[(pointer.hasClass('low') ? 'low' : 'high') + 'Label'].addClass('focused');\r\n\t\t\t$(document).on('mousemove.slider touchmove.slider', $.proxy(this.onDrag, this, pointer));\r\n\t\t\t$(document).on('mouseup.slider touchend.slider touchcancel.slider', $.proxy(this.onDragEnd, this));\r\n\t\t},\r\n\t\tonDrag: function(pointer, e) {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tif (e.originalEvent.touches && e.originalEvent.touches.length) {\r\n\t\t\t\te = e.originalEvent.touches[0];\r\n\t\t\t} else if (e.originalEvent.changedTouches && e.originalEvent.changedTouches.length) {\r\n\t\t\t\te = e.originalEvent.changedTouches[0];\r\n\t\t\t}\r\n\r\n\t\t\tvar position = e.clientX - this.domNode.offset().left;\r\n\t\t\tthis.domNode.trigger('change', [this, pointer, position]);\r\n\t\t},\r\n\t\tonDragEnd: function(e) {\r\n\t\t\tthis.pointers.removeClass('focused')\r\n\t\t\t\t.trigger('rangeslideend');\r\n\t\t\tthis.labels.removeClass('focused');\r\n\t\t\t$(document).off('.slider');\r\n\t\t  this.options.ondragend.call(this, this.options.value);\r\n\t\t},\r\n\t\tbarClicked: function(e) {\r\n\t\t\tif(this.options.disable) return;\r\n\t\t\tvar x = e.pageX - this.clickableBar.offset().left;\r\n\t\t\tif (this.isSingle())\r\n\t\t\t\tthis.setPosition(this.pointers.last(), x, true, true);\r\n\t\t\telse {\r\n\t\t\t\tvar firstLeft      \t= Math.abs(parseFloat(this.pointers.first().css('left'), 10)),\r\n\t\t\t\t\t\tfirstHalfWidth \t= this.pointers.first().width() / 2,\r\n\t\t\t\t\t\tlastLeft \t\t\t \t= Math.abs(parseFloat(this.pointers.last().css('left'), 10)),\r\n\t\t\t\t\t\tlastHalfWidth  \t= this.pointers.first().width() / 2,\r\n\t\t\t\t\t\tleftSide        = Math.abs(firstLeft - x + firstHalfWidth),\r\n\t\t\t\t\t\trightSide       = Math.abs(lastLeft - x + lastHalfWidth),\r\n\t\t\t\t\t\tpointer;\r\n\r\n\t\t\t\tif(leftSide == rightSide) {\r\n\t\t\t\t\tpointer = x < firstLeft ? this.pointers.first() : this.pointers.last();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpointer = leftSide < rightSide ? this.pointers.first() : this.pointers.last();\r\n\t\t\t\t}\r\n\t\t\t\tthis.setPosition(pointer, x, true, true);\r\n\t\t\t}\r\n\t\t\tthis.options.onbarclicked.call(this, this.options.value);\r\n\t\t},\r\n\t\tonChange: function(e, self, pointer, position) {\r\n\t\t\tvar min, max;\r\n\t\t\tmin = 0;\r\n\t\t\tmax = self.domNode.width();\r\n\r\n\t\t\tif (!self.isSingle()) {\r\n\t\t\t\tmin = pointer.hasClass('high') ? parseFloat(self.lowPointer.css(\"left\")) + (self.lowPointer.width() / 2) : 0;\r\n\t\t\t\tmax = pointer.hasClass('low') ? parseFloat(self.highPointer.css(\"left\")) + (self.highPointer.width() / 2) : self.domNode.width();\r\n\t\t\t}\r\n\r\n\t\t\tvar value = Math.min(Math.max(position, min), max);\r\n\t\t\tself.setPosition(pointer, value, true);\r\n\t\t},\r\n\t\tsetPosition: function(pointer, position, isPx, animate) {\r\n\t\t\tvar leftPos, rightPos,\r\n\t\t\t\tlowPos = parseFloat(this.lowPointer.css(\"left\")),\r\n\t\t\t\thighPos = parseFloat(this.highPointer.css(\"left\")) || 0,\r\n\t\t\t\tcircleWidth = this.highPointer.width() / 2;\r\n\t\t\tif (!isPx) {\r\n\t\t\t\tposition = this.prcToPx(position);\r\n\t\t\t}\r\n\t\t\tif(this.options.snap){\r\n\t\t\t\tvar expPos = this.correctPositionForSnap(position);\r\n\t\t\t\tif(expPos === -1){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tposition = expPos;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (pointer[0] === this.highPointer[0]) {\r\n\t\t\t\thighPos = Math.round(position - circleWidth);\r\n\t\t\t} else {\r\n\t\t\t\tlowPos = Math.round(position - circleWidth);\r\n\t\t\t}\r\n\t\t\tpointer[animate ? 'animate' : 'css']({\r\n\t\t\t\t'left': Math.round(position - circleWidth)\r\n\t\t\t});\r\n\t\t\tif (this.isSingle()) {\r\n\t\t\t\tleftPos = 0;\r\n\t\t\t} else {\r\n\t\t\t\tleftPos = lowPos + circleWidth;\r\n\t\t\t\trightPos = highPos + circleWidth;\r\n\t\t\t}\r\n\t\t\tvar w = Math.round(highPos + circleWidth - leftPos);\r\n\t\t\tthis.bar[animate ? 'animate' : 'css']({\r\n\t\t\t\t'width': Math.abs(w),\r\n\t\t\t\t'left': (w>0) ? leftPos : leftPos + w\r\n\t\t\t});\r\n\t\t\tthis.showPointerValue(pointer, position, animate);\r\n\t\t\tthis.isReadonly();\r\n\t\t},\r\n\t\tcorrectPositionForSnap: function(position){\r\n\t\t\tvar currentValue = this.positionToValue(position) - this.options.from;\r\n\t\t\tvar diff = this.options.width / (this.interval / this.options.step),\r\n\t\t\t\texpectedPosition = (currentValue / this.options.step) * diff;\r\n\t\t\tif( position <= expectedPosition + diff / 2 && position >= expectedPosition - diff / 2){\r\n\t\t\t\treturn expectedPosition;\r\n\t\t\t}else{\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// will be called from outside\r\n\t\tsetValue: function(value) {\r\n\t\t\tvar values = value.toString().split(',');\r\n\t\t\tvalues[0] = Math.min(Math.max(values[0], this.options.from), this.options.to) + '';\r\n\t\t\tif (values.length > 1){\r\n\t\t\t\tvalues[1] = Math.min(Math.max(values[1], this.options.from), this.options.to) + '';\r\n\t\t\t}\r\n\t\t\tthis.options.value = value;\r\n\t\t\tvar prc = this.valuesToPrc(values.length === 2 ? values : [0, values[0]]);\r\n\t\t\tif (this.isSingle()) {\r\n\t\t\t\tthis.setPosition(this.highPointer, prc[1]);\r\n\t\t\t} else {\r\n\t\t\t\tthis.setPosition(this.lowPointer, prc[0]);\r\n\t\t\t\tthis.setPosition(this.highPointer, prc[1]);\r\n\t\t\t}\r\n\t\t},\r\n\t\trenderScale: function() {\r\n\t\t\tvar s = this.options.scale || [this.options.from, this.options.to];\r\n\t\t\tvar prc = Math.round((100 / (s.length - 1)) * 10) / 10;\r\n\t\t\tvar str = '';\r\n\t\t\tfor (var i = 0; i < s.length; i++) {\r\n\t\t\t\tstr += '<span style=\"left: ' + i * prc + '%\">' + (s[i] != '|' ? '<ins>' + s[i] + '</ins>' : '') + '</span>';\r\n\t\t\t}\r\n\t\t\tthis.scale.html(str);\r\n\r\n\t\t\t$('ins', this.scale).each(function() {\r\n\t\t\t\t$(this).css({\r\n\t\t\t\t\tmarginLeft: -$(this).outerWidth() / 2\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetBarWidth: function() {\r\n\t\t\tvar values = this.options.value.split(',');\r\n\t\t\tif (values.length > 1) {\r\n\t\t\t\treturn parseFloat(values[1]) - parseFloat(values[0]);\r\n\t\t\t} else {\r\n\t\t\t\treturn parseFloat(values[0]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tshowPointerValue: function(pointer, position, animate) {\r\n\t\t\tvar label = $('.pointer-label', this.domNode)[pointer.hasClass('low') ? 'first' : 'last']();\r\n\t\t\tvar text;\r\n\t\t\tvar value = this.positionToValue(position);\r\n\t\t\t// Is it higer or lower than it should be?\r\n\r\n\t\t\tif ($.isFunction(this.options.format)) {\r\n\t\t\t\tvar type = this.isSingle() ? undefined : (pointer.hasClass('low') ? 'low' : 'high');\r\n\t\t\t\ttext = this.options.format(value, type);\r\n\t\t\t} else {\r\n\t\t\t\ttext = this.options.format.replace('%s', value);\r\n\t\t\t}\r\n\r\n\t\t\tvar width = label.html(text).width(),\r\n\t\t\t\tleft = position - width / 2;\r\n\t\t\tleft = Math.min(Math.max(left, 0), this.options.width - width);\r\n\t\t\tlabel[animate ? 'animate' : 'css']({\r\n\t\t\t\tleft: left\r\n\t\t\t});\r\n\t\t\tthis.setInputValue(pointer, value);\r\n\t\t},\r\n\t\tvaluesToPrc: function(values) {\r\n\t\t\tvar lowPrc = ((parseFloat(values[0]) - parseFloat(this.options.from)) * 100 / this.interval),\r\n\t\t\t\thighPrc = ((parseFloat(values[1]) - parseFloat(this.options.from)) * 100 / this.interval);\r\n\t\t\treturn [lowPrc, highPrc];\r\n\t\t},\r\n\t\tprcToPx: function(prc) {\r\n\t\t\treturn (this.domNode.width() * prc) / 100;\r\n\t\t},\r\n\t\tisDecimal: function() {\r\n\t\t\treturn ((this.options.value + this.options.from + this.options.to).indexOf(\".\")===-1) ? false : true;\r\n\t\t},\r\n\t\tpositionToValue: function(pos) {\r\n\t\t\tvar value = (pos / this.domNode.width()) * this.interval;\r\n\t\t\tvalue = parseFloat(value, 10) + parseFloat(this.options.from, 10);\r\n\t\t\tif (this.isDecimal()) {\r\n\t\t\t\tvar final = Math.round(Math.round(value / this.options.step) * this.options.step *100)/100;\r\n\t\t\t\tif (final!==0.0) {\r\n\t\t\t\t\tfinal = '' + final;\r\n\t\t\t\t\tif (final.indexOf(\".\")===-1) {\r\n\t\t\t\t\t\tfinal = final + \".\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\twhile (final.length - final.indexOf('.')<3) {\r\n\t\t\t\t\t\tfinal = final + \"0\";\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfinal = \"0.00\";\r\n\t\t\t\t}\r\n\t\t\t\treturn final;\r\n\t\t\t} else {\r\n\t\t\t\treturn Math.round(value / this.options.step) * this.options.step;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetInputValue: function(pointer, v) {\r\n\t\t\t// if(!isChanged) return;\r\n\t\t\tif (this.isSingle()) {\r\n\t\t\t\tthis.options.value = v.toString();\r\n\t\t\t} else {\r\n\t\t\t\tvar values = this.options.value.split(',');\r\n\t\t\t\tif (pointer.hasClass('low')) {\r\n\t\t\t\t\tthis.options.value = v + ',' + values[1];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.options.value = values[0] + ',' + v;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.inputNode.val() !== this.options.value) {\r\n\t\t\t\tthis.inputNode.val(this.options.value)\r\n\t\t\t\t\t.trigger('change');\r\n\t\t\t\tthis.options.onstatechange.call(this, this.options.value);\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetValue: function() {\r\n\t\t\treturn this.options.value;\r\n\t\t},\r\n\t\tgetOptions: function() {\r\n\t\t\treturn this.options;\r\n\t\t},\r\n\t\tgetRange: function() {\r\n\t\t\treturn this.options.from + \",\" + this.options.to;\r\n\t\t},\r\n\t\tisReadonly: function(){\r\n\t\t\tthis.domNode.toggleClass('slider-readonly', this.options.disable);\r\n\t\t},\r\n\t\tdisable: function(){\r\n\t\t\tthis.options.disable = true;\r\n\t\t\tthis.isReadonly();\r\n\t\t},\r\n\t\tenable: function(){\r\n\t\t\tthis.options.disable = false;\r\n\t\t\tthis.isReadonly();\r\n\t\t},\r\n\t\ttoggleDisable: function(){\r\n\t\t\tthis.options.disable = !this.options.disable;\r\n\t\t\tthis.isReadonly();\r\n\t\t},\r\n\t\tupdateRange: function(range, value) {\r\n\t\t\tvar values = range.toString().split(',');\r\n\t\t\tthis.interval = parseInt(values[1]) - parseInt(values[0]);\r\n\t\t\tif(value){\r\n\t\t\t\tthis.setValue(value);\r\n\t\t\t}else{\r\n\t\t\t\tthis.setValue(this.getValue());\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar pluginName = 'jRange';\r\n\t// A really lightweight plugin wrapper around the constructor,\r\n\t// preventing against multiple instantiations\r\n\t$.fn[pluginName] = function(option) {\r\n\t\tvar args = arguments,\r\n\t\t\tresult;\r\n\r\n\t\tthis.each(function() {\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\tdata = $.data(this, 'plugin_' + pluginName),\r\n\t\t\t\toptions = typeof option === 'object' && option;\r\n\t\t\tif (!data) {\r\n\t\t\t\t$this.data('plugin_' + pluginName, (data = new jRange(this, options)));\r\n\t\t\t\t$(window).resize(function() {\r\n\t\t\t\t\tdata.setValue(data.getValue());\r\n\t\t\t\t}); // Update slider position when window is resized to keep it in sync with scale\r\n\t\t\t}\r\n\t\t\t// if first argument is a string, call silimarly named function\r\n\t\t\t// this gives flexibility to call functions of the plugin e.g.\r\n\t\t\t//   - $('.dial').plugin('destroy');\r\n\t\t\t//   - $('.dial').plugin('render', $('.new-child'));\r\n\t\t\tif (typeof option === 'string') {\r\n\t\t\t\tresult = data[option].apply(data, Array.prototype.slice.call(args, 1));\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// To enable plugin returns values\r\n\t\treturn result || this;\r\n\t};\r\n\r\n})(jQuery, window, document);\r\n","$.fn.regionSearch = function() {\r\n\tthis.each(function() {\r\n\t\tvar $this = $(this),\r\n\t\tfSearch = $this.find('.js-region-search-input'),\r\n\t\tfSection = $this.find('.category-filter__region-section'),\r\n\t\tfItem = fSection.find('.category-filter__region-item'),\r\n\t\tfNotFound = $this.find('.category-filter__region-notFound');\r\n\t\tif (fSearch.length) {\r\n\t\t\tfSearch.val('').keyup();\r\n\t\t\tfSearch.keyup(function() {\r\n\t\t\t\tvar fQuery = fSearch.val();\r\n\t\t\t\tfItem.each(function() {\r\n\t\t\t\t\tif (!$(this).html().match(new RegExp('.*?' + fQuery + '.*?', 'i'))) {\r\n\t\t\t\t\t\t$(this).hide();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$(this).show();\r\n\t\t\t\t\t\tfSection.removeClass('category-filter__region-section--hidden');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tfSection.each(function() {\r\n\t\t\t\t\tif ($(this).children(':visible').length == 0) {\r\n\t\t\t\t\t\t$(this).addClass('category-filter__region-section--hidden');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$(this).removeClass('category-filter__region-section--hidden');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (fItem.filter(':visible').length < 1) {\r\n\t\t\t\t\tfNotFound.addClass('category-filter__region-notFound--active');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfNotFound.removeClass('category-filter__region-notFound--active');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n}\r\n","$.fn.spinner = function() {\r\n\tthis.each(function() {\r\n\t\tvar el = $(this);\r\n\t\tel.after('<a href=\"#\" class=\"category-product__toCart-plus js-category-product-spinner-plus\" role=\"button\"></a>');\r\n\t\tel.after('<a href=\"#\" class=\"category-product__toCart-minus js-category-product-spinner-minus\" role=\"button\"></a>');\r\n\t\tel.parent().on('click', '.js-category-product-spinner-minus', function (e) {\r\n\t\t\te.preventDefault();\r\n\t\t\tif (el.val() > parseInt(el.attr('min'))) {\r\n\t\t\t\tel.val( function(i, oldval) { return --oldval; });\r\n\t\t\t}\r\n\t\t});\r\n\t\tel.parent().on('click', '.js-category-product-spinner-plus', function (e) {\r\n\t\t\te.preventDefault();\r\n\t\t\tif (el.val() < parseInt(el.attr('max'))) {\r\n\t\t\t\tel.val( function(i, oldval) { return ++oldval; });\r\n\t\t\t}\r\n\t\t});\r\n\t\tel.on('focusout', function() {\r\n\t\t\tif (el.val() > parseInt(el.attr('max'))) {\r\n\t\t\t\tel.val(el.attr('max'));\r\n\t\t\t} else if (el.val() < parseInt(el.attr('min'))) {\r\n\t\t\t\tel.val(el.attr('min'));\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n};","// Generated by CoffeeScript 1.9.2\r\n\r\n/**\r\n@license Sticky-kit v1.1.2 | WTFPL | Leaf Corcoran 2015 | http://leafo.net\r\n */\r\n\r\n(function() {\r\n  var $, win;\r\n\r\n  $ = this.jQuery || window.jQuery;\r\n\r\n  win = $(window);\r\n\r\n  $.fn.stick_in_parent = function(opts) {\r\n    var doc, elm, enable_bottoming, fn, i, inner_scrolling, len, manual_spacer, offset_top, parent_selector, recalc_every, sticky_class;\r\n    if (opts == null) {\r\n      opts = {};\r\n    }\r\n    sticky_class = opts.sticky_class, inner_scrolling = opts.inner_scrolling, recalc_every = opts.recalc_every, parent_selector = opts.parent, offset_top = opts.offset_top, manual_spacer = opts.spacer, enable_bottoming = opts.bottoming;\r\n    if (offset_top == null) {\r\n      offset_top = 0;\r\n    }\r\n    if (parent_selector == null) {\r\n      parent_selector = void 0;\r\n    }\r\n    if (inner_scrolling == null) {\r\n      inner_scrolling = true;\r\n    }\r\n    if (sticky_class == null) {\r\n      sticky_class = \"is_stuck\";\r\n    }\r\n    doc = $(document);\r\n    if (enable_bottoming == null) {\r\n      enable_bottoming = true;\r\n    }\r\n    fn = function(elm, padding_bottom, parent_top, parent_height, top, height, el_float, detached) {\r\n      var bottomed, detach, fixed, last_pos, last_scroll_height, offset, parent, recalc, recalc_and_tick, recalc_counter, spacer, tick;\r\n      if (elm.data(\"sticky_kit\")) {\r\n        return;\r\n      }\r\n      elm.data(\"sticky_kit\", true);\r\n      last_scroll_height = doc.height();\r\n      parent = elm.parent();\r\n      if (parent_selector != null) {\r\n        parent = parent.closest(parent_selector);\r\n      }\r\n      if (!parent.length) {\r\n        throw \"failed to find stick parent\";\r\n      }\r\n      fixed = false;\r\n      bottomed = false;\r\n      spacer = manual_spacer != null ? manual_spacer && elm.closest(manual_spacer) : $(\"<div />\");\r\n      if (spacer) {\r\n        spacer.css('position', elm.css('position'));\r\n      }\r\n      recalc = function() {\r\n        var border_top, padding_top, restore;\r\n        if (detached) {\r\n          return;\r\n        }\r\n        last_scroll_height = doc.height();\r\n        border_top = parseInt(parent.css(\"border-top-width\"), 10);\r\n        padding_top = parseInt(parent.css(\"padding-top\"), 10);\r\n        padding_bottom = parseInt(parent.css(\"padding-bottom\"), 10);\r\n        parent_top = parent.offset().top + border_top + padding_top;\r\n        parent_height = parent.height();\r\n        if (fixed) {\r\n          fixed = false;\r\n          bottomed = false;\r\n          if (manual_spacer == null) {\r\n            elm.insertAfter(spacer);\r\n            spacer.detach();\r\n          }\r\n          elm.css({\r\n            position: \"\",\r\n            top: \"\",\r\n            width: \"\",\r\n            bottom: \"\"\r\n          }).removeClass(sticky_class);\r\n          restore = true;\r\n        }\r\n        top = elm.offset().top - (parseInt(elm.css(\"margin-top\"), 10) || 0) - offset_top;\r\n        height = elm.outerHeight(true);\r\n        el_float = elm.css(\"float\");\r\n        if (spacer) {\r\n          spacer.css({\r\n            width: elm.outerWidth(true),\r\n            height: height,\r\n            display: elm.css(\"display\"),\r\n            \"vertical-align\": elm.css(\"vertical-align\"),\r\n            \"float\": el_float\r\n          });\r\n        }\r\n        if (restore) {\r\n          return tick();\r\n        }\r\n      };\r\n      recalc();\r\n      if (height === parent_height) {\r\n        return;\r\n      }\r\n      last_pos = void 0;\r\n      offset = offset_top;\r\n      recalc_counter = recalc_every;\r\n      tick = function() {\r\n        var css, delta, recalced, scroll, will_bottom, win_height;\r\n        if (detached) {\r\n          return;\r\n        }\r\n        recalced = false;\r\n        if (recalc_counter != null) {\r\n          recalc_counter -= 1;\r\n          if (recalc_counter <= 0) {\r\n            recalc_counter = recalc_every;\r\n            recalc();\r\n            recalced = true;\r\n          }\r\n        }\r\n        if (!recalced && doc.height() !== last_scroll_height) {\r\n          recalc();\r\n          recalced = true;\r\n        }\r\n        scroll = win.scrollTop();\r\n        if (last_pos != null) {\r\n          delta = scroll - last_pos;\r\n        }\r\n        last_pos = scroll;\r\n        if (fixed) {\r\n          if (enable_bottoming) {\r\n            will_bottom = scroll + height + offset > parent_height + parent_top;\r\n            if (bottomed && !will_bottom) {\r\n              bottomed = false;\r\n              elm.css({\r\n                position: \"fixed\",\r\n                bottom: \"\",\r\n                top: offset\r\n              }).trigger(\"sticky_kit:unbottom\");\r\n            }\r\n          }\r\n          if (scroll < top) {\r\n            fixed = false;\r\n            offset = offset_top;\r\n            if (manual_spacer == null) {\r\n              if (el_float === \"left\" || el_float === \"right\") {\r\n                elm.insertAfter(spacer);\r\n              }\r\n              spacer.detach();\r\n            }\r\n            css = {\r\n              position: \"\",\r\n              width: \"\",\r\n              top: \"\"\r\n            };\r\n            elm.css(css).removeClass(sticky_class).trigger(\"sticky_kit:unstick\");\r\n          }\r\n          if (inner_scrolling) {\r\n            win_height = win.height();\r\n            if (height + offset_top > win_height) {\r\n              if (!bottomed) {\r\n                offset -= delta;\r\n                offset = Math.max(win_height - height, offset);\r\n                offset = Math.min(offset_top, offset);\r\n                if (fixed) {\r\n                  elm.css({\r\n                    top: offset + \"px\"\r\n                  });\r\n                }\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          if (scroll > top) {\r\n            fixed = true;\r\n            css = {\r\n              position: \"fixed\",\r\n              top: offset\r\n            };\r\n            css.width = elm.css(\"box-sizing\") === \"border-box\" ? elm.outerWidth() + \"px\" : elm.width() + \"px\";\r\n            elm.css(css).addClass(sticky_class);\r\n            if (manual_spacer == null) {\r\n              elm.after(spacer);\r\n              if (el_float === \"left\" || el_float === \"right\") {\r\n                spacer.append(elm);\r\n              }\r\n            }\r\n            elm.trigger(\"sticky_kit:stick\");\r\n          }\r\n        }\r\n        if (fixed && enable_bottoming) {\r\n          if (will_bottom == null) {\r\n            will_bottom = scroll + height + offset > parent_height + parent_top;\r\n          }\r\n          if (!bottomed && will_bottom) {\r\n            bottomed = true;\r\n            if (parent.css(\"position\") === \"static\") {\r\n              parent.css({\r\n                position: \"relative\"\r\n              });\r\n            }\r\n            return elm.css({\r\n              position: \"absolute\",\r\n              bottom: padding_bottom,\r\n              top: \"auto\"\r\n            }).trigger(\"sticky_kit:bottom\");\r\n          }\r\n        }\r\n      };\r\n      recalc_and_tick = function() {\r\n        recalc();\r\n        return tick();\r\n      };\r\n      detach = function() {\r\n        detached = true;\r\n        win.off(\"touchmove\", tick);\r\n        win.off(\"scroll\", tick);\r\n        win.off(\"resize\", recalc_and_tick);\r\n        $(document.body).off(\"sticky_kit:recalc\", recalc_and_tick);\r\n        elm.off(\"sticky_kit:detach\", detach);\r\n        elm.removeData(\"sticky_kit\");\r\n        elm.css({\r\n          position: \"\",\r\n          bottom: \"\",\r\n          top: \"\",\r\n          width: \"\"\r\n        });\r\n        parent.position(\"position\", \"\");\r\n        if (fixed) {\r\n          if (manual_spacer == null) {\r\n            if (el_float === \"left\" || el_float === \"right\") {\r\n              elm.insertAfter(spacer);\r\n            }\r\n            spacer.remove();\r\n          }\r\n          return elm.removeClass(sticky_class);\r\n        }\r\n      };\r\n      win.on(\"touchmove\", tick);\r\n      win.on(\"scroll\", tick);\r\n      win.on(\"resize\", recalc_and_tick);\r\n      $(document.body).on(\"sticky_kit:recalc\", recalc_and_tick);\r\n      elm.on(\"sticky_kit:detach\", detach);\r\n      return setTimeout(tick, 0);\r\n    };\r\n    for (i = 0, len = this.length; i < len; i++) {\r\n      elm = this[i];\r\n      fn($(elm));\r\n    }\r\n    return this;\r\n  };\r\n\r\n}).call(this);\r\n","/*\r\n\r\n\tjQuery Tags Input Plugin 1.3.3\r\n\r\n\tCopyright (c) 2011 XOXCO, Inc\r\n\r\n\tDocumentation for this plugin lives here:\r\n\thttp://xoxco.com/clickable/jquery-tags-input\r\n\r\n\tLicensed under the MIT license:\r\n\thttp://www.opensource.org/licenses/mit-license.php\r\n\r\n\tben@xoxco.com\r\n\r\n*/\r\n\r\n(function($) {\r\n\r\n\tvar delimiter = new Array();\r\n\tvar tags_callbacks = new Array();\r\n\t$.fn.doAutosize = function(o){\r\n\t    var minWidth = $(this).data('minwidth'),\r\n\t        maxWidth = $(this).data('maxwidth'),\r\n\t        val = '',\r\n\t        input = $(this),\r\n\t        testSubject = $('#'+$(this).data('tester_id'));\r\n\r\n\t    if (val === (val = input.val())) {return;}\r\n\r\n\t    // Enter new content into testSubject\r\n\t    var escaped = val.replace(/&/g, '&amp;').replace(/\\s/g,' ').replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n\t    testSubject.html(escaped);\r\n\t    // Calculate new width + whether to change\r\n\t    var testerWidth = testSubject.width(),\r\n\t        newWidth = (testerWidth + o.comfortZone) >= minWidth ? testerWidth + o.comfortZone : minWidth,\r\n\t        currentWidth = input.width(),\r\n\t        isValidWidthChange = (newWidth < currentWidth && newWidth >= minWidth)\r\n\t                             || (newWidth > minWidth && newWidth < maxWidth);\r\n\r\n\t    // Animate width\r\n\t    if (isValidWidthChange) {\r\n\t        input.width(newWidth);\r\n\t    }\r\n\r\n\r\n  };\r\n  $.fn.resetAutosize = function(options){\r\n    // alert(JSON.stringify(options));\r\n    var minWidth =  $(this).data('minwidth') || options.minInputWidth || $(this).width(),\r\n        maxWidth = $(this).data('maxwidth') || options.maxInputWidth || ($(this).closest('.tagsinput').width() - options.inputPadding),\r\n        val = '',\r\n        input = $(this),\r\n        testSubject = $('<tester/>').css({\r\n            position: 'absolute',\r\n            top: -9999,\r\n            left: -9999,\r\n            width: 'auto',\r\n            fontSize: input.css('fontSize'),\r\n            fontFamily: input.css('fontFamily'),\r\n            fontWeight: input.css('fontWeight'),\r\n            letterSpacing: input.css('letterSpacing'),\r\n            whiteSpace: 'nowrap'\r\n        }),\r\n        testerId = $(this).attr('id')+'_autosize_tester';\r\n    if(! $('#'+testerId).length > 0){\r\n      testSubject.attr('id', testerId);\r\n      testSubject.appendTo('body');\r\n    }\r\n\r\n    input.data('minwidth', minWidth);\r\n    input.data('maxwidth', maxWidth);\r\n    input.data('tester_id', testerId);\r\n    input.css('width', minWidth);\r\n  };\r\n\r\n\t$.fn.addTag = function(value,options) {\r\n\t\t\toptions = jQuery.extend({focus:false,callback:true},options);\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tvar id = $(this).attr('id');\r\n\r\n\t\t\t\tvar tagslist = $(this).val().split(delimiter[id]);\r\n\t\t\t\tif (tagslist[0] == '') {\r\n\t\t\t\t\ttagslist = new Array();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvalue = jQuery.trim(value);\r\n\r\n\t\t\t\tif (options.unique) {\r\n\t\t\t\t\tvar skipTag = $(this).tagExist(value);\r\n\t\t\t\t\tif(skipTag == true) {\r\n\t\t\t\t\t    //Marks fake input as not_valid to let styling it\r\n    \t\t\t\t    $('#'+id+'_tag').addClass('not_valid');\r\n    \t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar skipTag = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (value !='' && skipTag != true) {\r\n                    $('<span>').addClass('tag').append(\r\n                        $('<span>').text(value).append('&nbsp;&nbsp;'),\r\n                        $('<a>', {\r\n                            href  : '#',\r\n                            title : 'Removing tag',\r\n                            text  : 'x'\r\n                        }).click(function () {\r\n                            return $('#' + id).removeTag(escape(value));\r\n                        })\r\n                    ).insertBefore('#' + id + '_addTag');\r\n\r\n\t\t\t\t\ttagslist.push(value);\r\n\r\n\t\t\t\t\t$('#'+id+'_tag').val('');\r\n\t\t\t\t\tif (options.focus) {\r\n\t\t\t\t\t\t$('#'+id+'_tag').focus();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$('#'+id+'_tag').blur();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$.fn.tagsInput.updateTagsField(this,tagslist);\r\n\r\n\t\t\t\t\tif (options.callback && tags_callbacks[id] && tags_callbacks[id]['onAddTag']) {\r\n\t\t\t\t\t\tvar f = tags_callbacks[id]['onAddTag'];\r\n\t\t\t\t\t\tf.call(this, value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(tags_callbacks[id] && tags_callbacks[id]['onChange'])\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar i = tagslist.length;\r\n\t\t\t\t\t\tvar f = tags_callbacks[id]['onChange'];\r\n\t\t\t\t\t\tf.call(this, $(this), tagslist[i-1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\t$.fn.removeTag = function(value) {\r\n\t\t\tvalue = unescape(value);\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tvar id = $(this).attr('id');\r\n\r\n\t\t\t\tvar old = $(this).val().split(delimiter[id]);\r\n\r\n\t\t\t\t$('#'+id+'_tagsinput .tag').remove();\r\n\t\t\t\tstr = '';\r\n\t\t\t\tfor (i=0; i< old.length; i++) {\r\n\t\t\t\t\tif (old[i]!=value) {\r\n\t\t\t\t\t\tstr = str + delimiter[id] +old[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$.fn.tagsInput.importTags(this,str);\r\n\r\n\t\t\t\tif (tags_callbacks[id] && tags_callbacks[id]['onRemoveTag']) {\r\n\t\t\t\t\tvar f = tags_callbacks[id]['onRemoveTag'];\r\n\t\t\t\t\tf.call(this, value);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\t$.fn.tagExist = function(val) {\r\n\t\tvar id = $(this).attr('id');\r\n\t\tvar tagslist = $(this).val().split(delimiter[id]);\r\n\t\treturn (jQuery.inArray(val, tagslist) >= 0); //true when tag exists, false when not\r\n\t};\r\n\r\n   // clear all existing tags and import new ones from a string\r\n   $.fn.importTags = function(str) {\r\n      var id = $(this).attr('id');\r\n      $('#'+id+'_tagsinput .tag').remove();\r\n      $.fn.tagsInput.importTags(this,str);\r\n   }\r\n\r\n\t$.fn.tagsInput = function(options) {\r\n    var settings = jQuery.extend({\r\n      interactive:true,\r\n      defaultText:'add a tag',\r\n      minChars:0,\r\n      width:'300px',\r\n      height:'100px',\r\n      autocomplete: {selectFirst: false },\r\n      hide:true,\r\n      delimiter: ',',\r\n      unique:true,\r\n      removeWithBackspace:true,\r\n      placeholderColor:'#666666',\r\n      autosize: true,\r\n      comfortZone: 20,\r\n      inputPadding: 6*2\r\n    },options);\r\n\r\n    \tvar uniqueIdCounter = 0;\r\n\r\n\t\tthis.each(function() {\r\n         // If we have already initialized the field, do not do it again\r\n         if (typeof $(this).attr('data-tagsinput-init') !== 'undefined') {\r\n            return;\r\n         }\r\n\r\n         // Mark the field as having been initialized\r\n         $(this).attr('data-tagsinput-init', true);\r\n\r\n\t\t\tif (settings.hide) {\r\n\t\t\t\t$(this).hide();\r\n\t\t\t}\r\n\t\t\tvar id = $(this).attr('id');\r\n\t\t\tif (!id || delimiter[$(this).attr('id')]) {\r\n\t\t\t\tid = $(this).attr('id', 'tags' + new Date().getTime() + (uniqueIdCounter++)).attr('id');\r\n\t\t\t}\r\n\r\n\t\t\tvar data = jQuery.extend({\r\n\t\t\t\tpid:id,\r\n\t\t\t\treal_input: '#'+id,\r\n\t\t\t\tholder: '#'+id+'_tagsinput',\r\n\t\t\t\tinput_wrapper: '#'+id+'_addTag',\r\n\t\t\t\tfake_input: '#'+id+'_tag'\r\n\t\t\t},settings);\r\n\r\n\t\t\tdelimiter[id] = data.delimiter;\r\n\r\n\t\t\tif (settings.onAddTag || settings.onRemoveTag || settings.onChange) {\r\n\t\t\t\ttags_callbacks[id] = new Array();\r\n\t\t\t\ttags_callbacks[id]['onAddTag'] = settings.onAddTag;\r\n\t\t\t\ttags_callbacks[id]['onRemoveTag'] = settings.onRemoveTag;\r\n\t\t\t\ttags_callbacks[id]['onChange'] = settings.onChange;\r\n\t\t\t}\r\n\r\n\t\t\tvar markup = '<div id=\"'+id+'_tagsinput\" class=\"tagsinput\"><div id=\"'+id+'_addTag\">';\r\n\r\n\t\t\tif (settings.interactive) {\r\n\t\t\t\tmarkup = markup + '<input id=\"'+id+'_tag\" value=\"\" data-default=\"'+settings.defaultText+'\" />';\r\n\t\t\t}\r\n\r\n\t\t\tmarkup = markup + '</div><div class=\"tags_clear\"></div></div>';\r\n\r\n\t\t\t$(markup).insertAfter(this);\r\n\r\n\t\t\t$(data.holder).css('width',settings.width);\r\n\t\t\t$(data.holder).css('min-height',settings.height);\r\n\t\t\t$(data.holder).css('height',settings.height);\r\n\r\n\t\t\tif ($(data.real_input).val()!='') {\r\n\t\t\t\t$.fn.tagsInput.importTags($(data.real_input),$(data.real_input).val());\r\n\t\t\t}\r\n\t\t\tif (settings.interactive) {\r\n\t\t\t\t$(data.fake_input).val($(data.fake_input).attr('data-default'));\r\n\t\t\t\t$(data.fake_input).css('color',settings.placeholderColor);\r\n\t\t        $(data.fake_input).resetAutosize(settings);\r\n\r\n\t\t\t\t$(data.holder).bind('click',data,function(event) {\r\n\t\t\t\t\t$(event.data.fake_input).focus();\r\n\t\t\t\t});\r\n\r\n\t\t\t\t$(data.fake_input).bind('focus',data,function(event) {\r\n\t\t\t\t\tif ($(event.data.fake_input).val()==$(event.data.fake_input).attr('data-default')) {\r\n\t\t\t\t\t\t$(event.data.fake_input).val('');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$(event.data.fake_input).css('color','#000000');\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (settings.autocomplete_url != undefined) {\r\n\t\t\t\t\tautocomplete_options = {source: settings.autocomplete_url};\r\n\t\t\t\t\tfor (attrname in settings.autocomplete) {\r\n\t\t\t\t\t\tautocomplete_options[attrname] = settings.autocomplete[attrname];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (jQuery.Autocompleter !== undefined) {\r\n\t\t\t\t\t\t$(data.fake_input).autocomplete(settings.autocomplete_url, settings.autocomplete);\r\n\t\t\t\t\t\t$(data.fake_input).bind('result',data,function(event,data,formatted) {\r\n\t\t\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\t\t\t$('#'+id).addTag(data[0] + \"\",{focus:true,unique:(settings.unique)});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t  \t});\r\n\t\t\t\t\t} else if (jQuery.ui.autocomplete !== undefined) {\r\n\t\t\t\t\t\t$(data.fake_input).autocomplete(autocomplete_options);\r\n\t\t\t\t\t\t$(data.fake_input).bind('autocompleteselect',data,function(event,ui) {\r\n\t\t\t\t\t\t\t$(event.data.real_input).addTag(ui.item.value,{focus:true,unique:(settings.unique)});\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\t// if a user tabs out of the field, create a new tag\r\n\t\t\t\t\t\t// this is only available if autocomplete is not used.\r\n\t\t\t\t\t\t$(data.fake_input).bind('blur',data,function(event) {\r\n\t\t\t\t\t\t\tvar d = $(this).attr('data-default');\r\n\t\t\t\t\t\t\tif ($(event.data.fake_input).val()!='' && $(event.data.fake_input).val()!=d) {\r\n\t\t\t\t\t\t\t\tif( (event.data.minChars <= $(event.data.fake_input).val().length) && (!event.data.maxChars || (event.data.maxChars >= $(event.data.fake_input).val().length)) )\r\n\t\t\t\t\t\t\t\t\t$(event.data.real_input).addTag($(event.data.fake_input).val(),{focus:true,unique:(settings.unique)});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t$(event.data.fake_input).val($(event.data.fake_input).attr('data-default'));\r\n\t\t\t\t\t\t\t\t$(event.data.fake_input).css('color',settings.placeholderColor);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// if user types a default delimiter like comma,semicolon and then create a new tag\r\n\t\t\t\t$(data.fake_input).bind('keypress',data,function(event) {\r\n\t\t\t\t\tif (_checkDelimiter(event)) {\r\n\t\t\t\t\t    event.preventDefault();\r\n\t\t\t\t\t\tif( (event.data.minChars <= $(event.data.fake_input).val().length) && (!event.data.maxChars || (event.data.maxChars >= $(event.data.fake_input).val().length)) )\r\n\t\t\t\t\t\t\t$(event.data.real_input).addTag($(event.data.fake_input).val(),{focus:true,unique:(settings.unique)});\r\n\t\t\t\t\t  \t$(event.data.fake_input).resetAutosize(settings);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t} else if (event.data.autosize) {\r\n\t\t\t            $(event.data.fake_input).doAutosize(settings);\r\n\r\n          \t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//Delete last tag on backspace\r\n\t\t\t\tdata.removeWithBackspace && $(data.fake_input).bind('keydown', function(event)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(event.keyCode == 8 && $(this).val() == '')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t event.preventDefault();\r\n\t\t\t\t\t\t var last_tag = $(this).closest('.tagsinput').find('.tag:last').text();\r\n\t\t\t\t\t\t var id = $(this).attr('id').replace(/_tag$/, '');\r\n\t\t\t\t\t\t last_tag = last_tag.replace(/[\\s]+x$/, '');\r\n\t\t\t\t\t\t $('#' + id).removeTag(escape(last_tag));\r\n\t\t\t\t\t\t $(this).trigger('focus');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t$(data.fake_input).blur();\r\n\r\n\t\t\t\t//Removes the not_valid class when user changes the value of the fake input\r\n\t\t\t\tif(data.unique) {\r\n\t\t\t\t    $(data.fake_input).keydown(function(event){\r\n\t\t\t\t        if(event.keyCode == 8 || String.fromCharCode(event.which).match(/\\w+|[áéíóúÁÉÍÓÚñÑ,/]+/)) {\r\n\t\t\t\t            $(this).removeClass('not_valid');\r\n\t\t\t\t        }\r\n\t\t\t\t    });\r\n\t\t\t\t}\r\n\t\t\t} // if settings.interactive\r\n\t\t});\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\t$.fn.tagsInput.updateTagsField = function(obj,tagslist) {\r\n\t\tvar id = $(obj).attr('id');\r\n\t\t$(obj).val(tagslist.join(delimiter[id]));\r\n\t};\r\n\r\n\t$.fn.tagsInput.importTags = function(obj,val) {\r\n\t\t$(obj).val('');\r\n\t\tvar id = $(obj).attr('id');\r\n\t\tvar tags = val.split(delimiter[id]);\r\n\t\tfor (i=0; i<tags.length; i++) {\r\n\t\t\t$(obj).addTag(tags[i],{focus:false,callback:false});\r\n\t\t}\r\n\t\tif(tags_callbacks[id] && tags_callbacks[id]['onChange'])\r\n\t\t{\r\n\t\t\tvar f = tags_callbacks[id]['onChange'];\r\n\t\t\tf.call(obj, obj, tags[i]);\r\n\t\t}\r\n\t};\r\n\r\n   /**\r\n     * check delimiter Array\r\n     * @param event\r\n     * @returns {boolean}\r\n     * @private\r\n     */\r\n   var _checkDelimiter = function(event){\r\n      var found = false;\r\n      if (event.which == 13) {\r\n         return true;\r\n      }\r\n\r\n      if (typeof event.data.delimiter === 'string') {\r\n         if (event.which == event.data.delimiter.charCodeAt(0)) {\r\n            found = true;\r\n         }\r\n      } else {\r\n         $.each(event.data.delimiter, function(index, delimiter) {\r\n            if (event.which == delimiter.charCodeAt(0)) {\r\n               found = true;\r\n            }\r\n         });\r\n      }\r\n\r\n      return found;\r\n   }\r\n})(jQuery);\r\n","$.fn.toggleSidebarRows = function() {\r\n\tthis.each(function() {\r\n\t\tvar $this = $(this);\r\n\t\tvar rowCount = $this.children('div').length,\r\n\t\trowShowed = $this.data('default-rows'),\r\n\t\trowChildren = $this.children('div').attr('class'),\r\n\t\t$thisToggle = $this.find('.js-category-sidebar-togglerows');\r\n\t\tif (rowCount > rowShowed) {\r\n\t\t\t$this.find('.category-sidebar__showrows').removeClass('category-sidebar__showrows--hidden');\r\n\t\t\t$this.children('div:nth-child(n+4)').addClass(rowChildren+'--hidden');\r\n\t\t\t$this.find('.js-category-sidebar-showrows-count').text(+rowCount - rowShowed);\r\n\t\t}\r\n\t\t$thisToggle.on('click', function(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\t$(this).toggleClass('category-sidebar__showrows--collapsed');\r\n\t\t\tvar $text = $this.find('.js-category-sidebar-showrows-text');\r\n\t\t\t$text.text(function(i, text) {\r\n\t\t\t\treturn text == $text.data('default-text') ? $text.data('new-text') : $text.data('default-text');\r\n\t\t\t});\r\n\t\t\t$this.children('div:nth-child(n+4)').toggleClass(rowChildren+'--hidden');\r\n\t\t});\r\n\t});\r\n}"]}