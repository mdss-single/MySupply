{"version":3,"sources":["easyautocomplete.js","fancybox.js","flickity.js","formstyler.js","input-mask.js","range-slider.js","spinner.js","sticky.js","tags-input.js"],"names":["EasyAutocomplete","scope","main","$input","options","requestDelayTimeoutId","consts","Constans","config","Configuration","logger","Logger","template","Template","listBuilderService","ListBuilderService","proccess","checkParam","equals","$field","$container","elementsList","selectedElement","prepareField","$elements_container","highlight","string","phrase","get","escapedPhrase","replace","RegExp","parent","hasClass","getValue","next","remove","unwrap","$wrapper","$","classes","getTemplateClass","addClass","wrap","fieldWidth","outerWidth","css","createWrapper","attr","getContainerId","prepend","on","showAnimation","type","animationTime","time","callback","find","slideDown","fadeIn","show","onShowListEvent","hideAnimation","slideUp","fadeOut","hide","onHideListEvent","removeClass","eq","onSelectItemEvent","event","listBuilders","$item","$listContainer","empty","detach","counter","builderIndex","listBuildersLength","length","listData","data","undefined","header","append","i","listDataLength","maxListSize","j","itemCounter","elementsValue","val","trigger","selectElement","onClickEvent","onChooseEvent","mouseover","onMouseOverEvent","mouseout","onMouseOutEvent","html","build","push","onLoadEvent","after","elementId","showContainer","hideContainer","index","loadElements","list","this","getConstants","getConfiguration","getContainer","getSelectedItemIndex","getItems","getItemData","getSelectedItemData","init","error","checkDataUrlProperties","checkRequiredProperties","bindKeyup","off","keyup","keyCode","preventDefault","inputPhrase","hideOnEmptyPhrase","clearTimeout","setTimeout","loadData","updateCategories","processData","settings","ajaxSettings","set","createAjaxSettings","url","dataType","ajax","done","convertXml","checkIfDataExists","fail","warning","always","focusout","fieldValue","match","caseSensitive","toLowerCase","evt","window","suppressKeypress","keydown","onKeyEnterEvent","focus","blur","bindAllEvents","bindEvents","eacHandles","getHandle","id","inputHasId","input","assignRandomId","fieldId","Math","floor","random","setHandle","handle","_cssClass","emptyStringFunction","buildMethod","_fields","genericTemplates","basic","method","element","cssClass","description","fields","iconLeft","icon","iconRight","iconSrc","links","link","custom","elementValue","listBuilder","sort","enabled","maxNumberOfElements","slice","reduceElementsInList","preparedList","findMatch","value","configuration","proccessResponseData","convertToListBuilder","category","builder","toUpperCase","listLocation","xmlElementName","convertXmlToListBuilder","convertDataToListBuilder","defaultsGetValue","convertXmlToList","simpleList","each","Array","constants","CONTAINER_CLASS","CONTAINER_ID","WRAPPER_CSS_CLASS","propertyName","message","console","log","defaults","autocompleteOff","placeholder","ajaxCallback","matchResponseProperty","a","b","search","highlightPhrase","theme","cssClasses","minCharNumber","requestDelay","adjustWidth","preparePostData","loggerEnabled","categoriesAssigned","categories","externalObjects","printPropertiesThatDoesntExist","consol","optionsToCheck","checkPropertiesIfExist","source","target","property","inArray","name","text","prepareDefaults","mergeObjects","mergedObject","defaultUrl","defaultlistLocation","processAfterMerge","fn","easyAutocomplete","$this","eacHandle","inputId","jQuery","document","fancybox","div","loop","margin","gutter","keyboard","arrows","infobar","toolbar","buttons","idleTime","smallBtn","protect","modal","image","preload","iframe","tpl","scrolling","defaultType","animationEffect","animationDuration","zoomOpacity","transitionEffect","transitionDuration","slideClass","baseClass","baseTpl","spinnerTpl","errorTpl","btnTpl","download","zoom","close","arrowLeft","arrowRight","parentEl","autoFocus","backFocus","trapFocus","fullScreen","autoStart","touch","vertical","momentum","hash","media","slideShow","speed","thumbs","hideOnClose","axis","wheel","onInit","noop","beforeLoad","afterLoad","beforeShow","afterShow","beforeClose","afterClose","onActivate","onDeactivate","clickContent","current","clickSlide","clickOutside","dblclickContent","dblclickSlide","dblclickOutside","mobile","lang","i18n","en","CLOSE","NEXT","PREV","ERROR","PLAY_START","PLAY_STOP","FULL_SCREEN","THUMBS","DOWNLOAD","SHARE","ZOOM","de","$W","$D","called","requestAFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","transitionEnd","t","el","createElement","transitions","transition","OTransition","MozTransition","WebkitTransition","style","forceRedraw","$el","offsetHeight","FancyBox","content","opts","self","extend","isMobile","isArray","group","currIndex","parseInt","prevIndex","prevPos","currPos","firstRun","createGroup","$lastFocus","activeElement","slides","prototype","$scrollDiv","buttonStr","firstItem","firstItemOpts","scrollbarWidth","scrollTop","scrollLeft","getInstance","test","navigator","userAgent","MSStream","body","scrollHeight","innerHeight","appendTo","offsetWidth","clientWidth","translate","$refs","container","forEach","item","activate","jumpTo","obj","str","arr","n","items","makeArray","found","src","srcParts","isPlainObject","$orig","videoFormat","charAt","$thumb","caption","apply","split","shift","filter","addEvents","removeEvents","e","stopPropagation","previous","isScaledDown","originalEvent","update","stage","instance","isClosing","is","has","keycode","which","idleSecondsCounter","isIdle","showControls","idleInterval","setInterval","isDragging","hideControls","clearInterval","duration","pos","slide","canvasWidth","currentPos","transitionProps","groupLen","isAnimating","createSlide","updateControls","getTranslate","$slide","isMoved","left","top","forcedDuration","isNumeric","loadSlide","stop","round","width","animate","removeAttr","complete","children","isLoaded","revealContent","isComplete","updateSlide","scaleToActual","x","y","imgPos","posX","posY","scaleX","scaleY","$what","$content","canvasHeight","height","newImgWidth","newImgHeight","hasError","updateCursor","SlideShow","isActive","scaleToFit","end","getFitPos","minRatio","imgWidth","imgHeight","min","key","setTranslate","centerSlide","opacity","nextWidth","nextHeight","isZoomable","fitPos","isFunction","rez","canPan","abs","ajaxLoad","isLoading","setImage","setIframe","setContent","setError","showLoading","success","textStatus","jqXHR","one","abort","temp","pxRatio","windowWidth","srcset","devicePixelRatio","innerWidth","map","ret","trim","substring","postfix","thumb","$ghost","setBigImage","$img","$image","timouts","naturalWidth","naturalHeight","hideLoading","max","readyState","$iframe","Date","getTime","isReady","scrollWidth","$body","$wrap","frameWidth","frameHeight","contents","ignore","contentWindow","documentElement","ceil","outerHeight","hasOwnProperty","$placeholder","insertAfter","nodeType","$smallBtn","$spinner","first","button","effect","effectClassName","start","getThumbPos","slidePos","thumbPos","offset","ownerDocument","elementRect","getBoundingClientRect","parentRects","parentElement","every","parentRect","visiblePixelX","right","visiblePixelY","bottom","isElementVisible","parseFloat","siblings","prev","isVisible","d","cleanUp","args","call","arguments","unshift","force","$caption","isHiddenControls","prop","toggleClass","toggleControls","version","command","open","all","destroy","createTouch","use3d","getComputedStyle","getPropertyValue","documentMode","matrix","indexOf","transRez","exec","props","position","transform","to","leaveAnimationName","selector","_run","$target","currentTarget","isDefaultPrevented","format","params","param","youtube","matcher","autoplay","autohide","fs","rel","hd","wmode","enablejsapi","html5","paramPlace","vimeo","show_title","show_byline","show_portrait","fullscreen","api","metacafe","dailymotion","additionalInfos","vine","instagram","gmap_place","gmap_search","urlParams","paramObj","provider","providerName","providerOpts","m","p","decodeURIComponent","contentProvider","cancelAFrame","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","pointers","result","touches","changedTouches","pageX","pageY","clientX","clientY","distance","point2","point1","what","sqrt","pow","isClickable","onclick","atts","attributes","nodeName","substr","isScrollable","overflowY","overflowX","horizontal","clientHeight","Guestures","$bg","bg","$stage","proxy","ontouchstart","isTouchDevice","realPoints","startPoints","startEvent","canTap","isPanning","isSwiping","isZooming","isScrolling","sliderStartPos","sliderLastPos","contentStartPos","contentLastPos","startTime","distanceX","distanceY","addEventListener","onscroll","centerPointStartX","centerPointStartY","percentageOfImageAtPinchPointX","percentageOfImageAtPinchPointY","startDistanceBetweenFingers","ontouchmove","newPoints","onSwipe","onPan","onZoom","angle","swiping","requestId","atan2","PI","inTransition","limitMovement","minTranslateX","minTranslateY","maxTranslateX","maxTranslateY","newOffsetX","newOffsetY","currentOffsetX","currentOffsetY","currentWidth","currentHeight","limitPosition","newWidth","newHeight","pinchRatio","translateFromZoomingX","translateFromZoomingY","centerPointEndX","centerPointEndY","translateFromTranslatingX","newPos","ontouchend","dMs","panning","zooming","endPoints","removeEventListener","onTap","velocityX","velocityY","speedX","endPanning","endZooming","endSwiping","len","reset","where","tapX","tapY","process","prefix","action","addBack","tapped","timer","$button","toggle","clear","onInit.fb","beforeShow.fb","afterShow.fb","afterKeydown.fb","keypress","beforeClose.fb onDeactivate.fb","hidden","fnMap","FullScreen","request","elem","requestFullscreen","ALLOW_KEYBOARD_INPUT","exit","exitFullscreen","isFullscreen","Boolean","fullscreenElement","fullscreenEnabled","beforeClose.fb","fullscreenchange","FancyThumbs","$grid","$list","Thumbs","second","create","widthRatio","heightRatio","$parent","thumbWidth","thumbHeight","margin-top","margin-left","share","entityMap","f","location","encodeURIComponent","&","<",">","\"","'","/","`","=","String","s","click","href","escapeSelector","sel","ch","asCodePoint","charCodeAt","toString","shouldCreateHistory","currentHash","timerID","parseUrl","pop","gallery","join","triggerFromUrl","getGalleryID","origHash","history","title","pathname","replaceState","prevTime","currTime","deltaY","deltaX","wheelDelta","detail","factory","define","amd","module","exports","require","jQueryBridget","arraySlice","logError","namespace","PluginClass","option","arg0","pluginMethodStr","methodName","$elems","returnValue","_init","updateJQuery","bridget","global","EvEmitter","proto","eventName","listener","events","_events","listeners","once","onceEvents","_onceEvents","splice","emitEvent","onceListeners","allOff","getSize","getStyleSize","num","isNaN","measurements","measurementsLength","getStyle","isBoxSizeOuter","isSetup","padding","borderStyle","borderWidth","boxSizing","appendChild","removeChild","setup","querySelector","display","size","getZeroSize","isBorderBox","measurement","paddingWidth","paddingLeft","paddingRight","paddingHeight","paddingTop","paddingBottom","marginWidth","marginLeft","marginRight","marginHeight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderHeight","borderTopWidth","borderBottomWidth","isBorderBoxSizeOuter","styleWidth","styleHeight","matchesSelector","matchesMethod","ElemProto","Element","matches","prefixes","fizzyUIUtils","utils","modulo","removeFrom","ary","getParent","parentNode","getQueryElement","handleEvent","filterFindElements","elems","ffElems","HTMLElement","childElems","querySelectorAll","debounceMethod","_class","threshold","timeoutName","timeout","_this","docReady","toDashed","$1","$2","htmlInit","WidgetClass","dashedNamespace","dataAttr","dataAttrElems","jsDashElems","concat","dataOptionsAttr","getAttribute","JSON","parse","className","Flickity","Cell","setAttribute","side","originSide","removeAttribute","setPosition","updateTarget","renderPosition","setDefaultTarget","marginProperty","cellAlign","getPositionValue","wrapShift","slideableWidth","Slide","isOriginLeft","cells","addCell","cell","beginMargin","firstMargin","endMargin","lastCell","getLastCell","lastMargin","slideWidth","select","changeSelected","unselect","isSelected","classMethod","classList","getCellElements","animatePrototype","lastTime","timeToCall","startAnimation","restingFrames","applyDragForce","applySelectedAttraction","previousX","integratePhysics","positionSlider","settle","transformProperty","wrapAround","shiftWrapCells","cursorPosition","rightToLeft","slider","firstSlide","positionX","progress","slidesWidth","dispatchEvent","positionSliderAtSelected","selectedSlide","velocity","percentPosition","isPointerDown","isFreeScrolling","selectedIndex","beforeGap","_shiftCells","beforeShiftCells","afterGap","afterShiftCells","gap","cellShift","_unshiftCells","getFrictionFactor","applyForce","getRestingPosition","isDraggable","dragForce","dragX","selectedAttraction","_Flickity","moveElements","toElem","GUID","instances","queryElement","flickityGUID","$element","constructor","_create","accessibility","freeScrollFriction","friction","namespaceJQueryEvents","resize","setGallerySize","createMethods","guid","viewport","_createSlider","watchCSS","add","_filterFindCellElements","reloadCells","tabIndex","initialIndex","isInitActivated","cellSelector","_makeCells","positionCells","_getWrapShiftCells","cellElem","getLastSlide","_sizeCells","_positionCells","maxCellHeight","cellX","startCell","updateSlides","_containSlides","nextMargin","canCellFit","_getCanCellFit","updateSelectedSlide","groupCells","number","percentMatch","percent","reposition","setCellAlign","cellAlignShorthands","center","shorthand","adaptiveHeight","gapX","cellIndex","_getGapCells","increment","contain","isRightToLeft","contentWidth","isContentSmaller","beginBound","endBound","emitArgs","$event","jQEvent","Event","isWrap","isInstant","_wrapSelect","wrapIndex","delta","backWrapDelta","forewardWrapDelta","isDragSelect","unselectSelectedSlide","selectedCells","selectedElements","selectedCell","selectCell","queryCell","getCellSlideIndex","getCell","getCells","getParentCell","getAdjacentCellElements","adjCount","cellElems","slideIndex","uiChange","childUIPointerDown","onresize","deactivate","onkeydown","isNotFocused","handler","keyboardHandlers","37","leftMethod","39","rightMethod","prevScrollY","pageYOffset","scrollTo","pageXOffset","removeData","setJQuery","jq","Unipointer","Object","bindStartEvent","_bindStartEvent","unbindStartEvent","isBind","bindMethod","PointerEvent","getTouch","identifier","pointerIdentifier","onmousedown","_pointerDown","onpointerdown","pointer","pointerId","pointerDown","_bindPostStartEvents","postStartEvents","mousedown","touchstart","pointerdown","_boundPointerEvents","_unbindPostStartEvents","onmousemove","_pointerMove","onpointermove","pointerMove","onmouseup","_pointerUp","onpointerup","_pointerDone","pointerUp","pointerDone","onpointercancel","_pointerCancel","ontouchcancel","pointerCancel","getPointerPoint","Unidragger","bindHandles","_bindHandles","unbindHandles","handles","touchAction","_touchActionValue","_dragPointerDown","focused","pointerDownPoint","canPreventDefaultOnPointerDown","moveVector","_dragPointerMove","_dragMove","movePoint","hasDragStarted","_dragStart","_dragPointerUp","_dragEnd","_staticClick","dragStartPoint","isPreventingClicks","dragStart","dragMove","bind","dragEnd","isIgnoringMouseUp","staticClick","draggable","dragThreshold","isTouch","isTouchmoveScrollCanceled","_createDrag","onActivateDrag","_uiChangeDrag","_childUIPointerDownDrag","unbindDrag","updateDraggable","onDeactivateDrag","bindDrag","pointerDownFocus","cursorNodes","TEXTAREA","INPUT","OPTION","clickTypes","radio","checkbox","submit","file","pointerDownScroll","getScrollPosition","_pointerDownDefault","getCanPointerDown","focusNodes","SELECT","isTouchStart","isTouchPointer","pointerType","isFocusNode","canPointerDown","isTouchScrolling","dragStartPosition","previousDragX","direction","originBound","dragMoveTime","freeScroll","dragEndRestingSelect","restingX","dragEndBoostSelect","getSlideDistance","positiveResting","_getClosestResting","negativeResting","minDistance","Infinity","condition","md","isWrapAround","clickedCell","scroll","scrollMoveX","scrollMoveY","TapListener","bindTap","unbindTap","tapElement","pointerPoint","boundingRect","scrollX","scrollY","svgURI","PrevNextButton","isEnabled","isPrevious","leftDirection","isLeft","disable","svg","createSVG","createElementNS","path","pathMovements","shape","x0","x1","y1","x2","y2","x3","getArrowMovements","arrowShape","enable","disabled","lastIndex","boundIndex","prevNextButtons","_createPrevNextButtons","prevButton","nextButton","activatePrevNextButtons","deactivatePrevNextButtons","PageDots","holder","dots","setDots","addDots","removeDots","count","fragment","createDocumentFragment","newDots","dot","updateSelected","selectedDot","pageDots","_createPageDots","activatePageDots","updateSelectedPageDots","updatePageDots","deactivatePageDots","hiddenProperty","visibilityEvent","Player","state","onVisibilityChange","visibilityChange","onVisibilityPlay","visibilityPlay","play","isPageHidden","tick","autoPlay","pause","unpause","pauseAutoPlayOnHover","_createPlayer","player","activatePlayer","stopPlayer","deactivatePlayer","playPlayer","pausePlayer","unpausePlayer","onmouseenter","onmouseleave","insert","isAppend","insertCellElement","insertBefore","endCells","cellChange","minCellIndex","cellSizeChange","changedCellIndex","isPositioningSlider","prevSelectedElem","LazyLoader","img","flickity","load","_createLazyload","lazyLoad","lazyImages","lazyCellImages","lazyloadAttr","srcAttr","srcsetAttr","imgs","getCellLazyImages","onload","onerror","_createAsNavFor","activateAsNavFor","deactivateAsNavFor","destroyAsNavFor","asNavForOption","asNavFor","setNavCompanion","companion","navCompanion","onNavCompanionSelect","navCompanionSelect","onNavStaticClick","firstIndex","selectIndex","removeNavSelectedElements","navSelectedElements","changeNavSelectedClass","navElem","cellElement","imagesLoaded","ImagesLoaded","onAlways","queryElem","elements","getImages","jqDeferred","Deferred","check","images","addElementImages","addImage","background","addElementBackgroundImages","elementNodeTypes","childImgs","child","1","9","11","LoadingImage","Background","Image","reURL","backgroundImage","addBackground","loadingImage","onProgress","progressedCount","hasAnyBroken","notify","debug","jqMethod","getIsImageComplete","confirm","proxyImage","unbindEvents","makeJQueryPlugin","promise","_createImagesLoaded","pluginName","idSuffix","filePlaceholder","fileBrowse","fileNumber","selectPlaceholder","selectSearch","selectSearchLimit","selectSearchNotFound","selectSearchPlaceholder","selectVisibleOptions","selectSmartPositioning","locale","locales","onSelectOpened","onSelectClosed","onFormStyled","Plugin","onDocumentClick","parents","selectbox","dropdown","opt","iOS","Android","Attributes","checkboxOutput","att","prependTo","triggerHandler","change","closest","before","radioOutput","commonParents","cachedThis","commonParent","inputName","fileOutput","browse","files","numberOutput","step","interval","Number","changeValue","spin","newValue","decimals","multiplier","selectboxOutput","preventScrolling","scrollDiff","makeList","op","li","liClass","liClasses","dataList","optionClass","optgroupClass","dataJqfsClass","k","ul","ulHeight","liHeight","clkd","ctrlKey","metaKey","shiftKey","prevAll","nextAll","not","arrIndexes","doMultipleSelect","searchHTML","selectzIndex","divSelect","divText","optionSelected","notFound","liWidthInner","liWidth","l","selClone","clone","selCloneWidth","selectHeight","searchHeight","isMaxHeight","liSelected","liOuterHeight","win","topOffset","bottomOffset","visible","minHeight","dropDown","maxHeightBottom","maxHeightTop","dropUp","zIndex","query","hover","liText","registered","doSelect","returns","Zepto","Mask","mask","invalid","getCaret","ctrl","dSel","selection","cSelStart","selectionStart","appVersion","createRange","moveStart","setCaret","range","setSelectionRange","createTextRange","collapse","moveEnd","maskDigitPosMapOld","maskDigitPosMap","jMaskGlobals","useInput","behaviour","oldValue","selectOnFocus","clearIfNotMatch","regexMask","getRegexMask","translation","pattern","optional","recursive","oRecursive","r","maskChunks","jMask","digit","destroyEvents","v","calculateCaretPosition","oldVal","newVal","getMasked","caretPosNew","caretPosOld","newValL","oldValL","maskDigitsBeforeCaret","maskDigitsAfterCaret","maskDigitsBeforeCaretAll","maskDigitsBeforeCaretAllOld","caretPos","byPassKeys","keyStrokeCompensation","callbacks","skipMaskChars","lastMaskChar","lastUntranslatedMaskChar","buf","maskLen","valLen","addMethod","resetPos","maskDigitCount","maskDigitPosArr","reverse","maskDigit","valDigit","fallback","lastMaskCharDigit","mapMaskdigitPositions","maskDiff","changed","defaultArgs","criteria","caret","getCleanVal","getMaskedVal","onlyMask","maxlength","maskWatchers","HTMLAttributes","notSameMaskObject","field","maskObject","stringify","globals","watchInterval","watchInputs","maskFunction","masked","unmask","dataMask","cleanVal","applyDataMask","maskElements","dataMaskAttr","isSupported","watchDataMask","0","#","A","S","jRange","onstatechange","ondragend","onbarclicked","isRange","showLabels","showScale","snap","node","inputNode","from","domNode","onChange","lowPointer","highPointer","last","labels","lowLabel","highLabel","scale","bar","clickableBar","render","isSingle","attachEvents","renderScale","setValue","barClicked","onDragStart","onDrag","onDragEnd","firstLeft","firstHalfWidth","lastLeft","lastHalfWidth","leftSide","rightSide","isPx","leftPos","lowPos","highPos","circleWidth","prcToPx","expPos","correctPositionForSnap","w","showPointerValue","isReadonly","currentValue","positionToValue","diff","expectedPosition","values","prc","valuesToPrc","getBarWidth","label","setInputValue","isDecimal","final","getOptions","getRange","toggleDisable","updateRange","spinner","oldval","stick_in_parent","doc","elm","enable_bottoming","inner_scrolling","manual_spacer","offset_top","parent_selector","recalc_every","sticky_class","spacer","bottoming","padding_bottom","parent_top","parent_height","el_float","detached","bottomed","fixed","last_pos","last_scroll_height","recalc","recalc_and_tick","recalc_counter","border_top","padding_top","restore","vertical-align","float","recalced","will_bottom","win_height","delimiter","tags_callbacks","doAutosize","o","minWidth","maxWidth","testSubject","escaped","testerWidth","comfortZone","resetAutosize","minInputWidth","maxInputWidth","inputPadding","fontSize","fontFamily","fontWeight","letterSpacing","whiteSpace","testerId","addTag","tagslist","unique","skipTag","tagExist","removeTag","escape","tagsInput","updateTagsField","unescape","old","importTags","interactive","defaultText","minChars","autocomplete","selectFirst","removeWithBackspace","placeholderColor","autosize","uniqueIdCounter","pid","real_input","input_wrapper","fake_input","onAddTag","onRemoveTag","markup","autocomplete_url","attrname","autocomplete_options","Autocompleter","formatted","ui","maxChars","_checkDelimiter","last_tag","fromCharCode","tags"],"mappings":"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","file":"plugins.js","sourcesContent":["/*\r\n * easy-autocomplete\r\n * jQuery plugin for autocompletion\r\n * \r\n * @author Łukasz Pawełczak (http://github.com/pawelczak)\r\n * @version 1.3.5\r\n * Copyright  License: \r\n */\r\n\r\n/*\r\n * EasyAutocomplete - Configuration \r\n */\r\nvar EasyAutocomplete = (function(scope){\r\n\r\n\tscope.Configuration = function Configuration(options) {\r\n\t\tvar defaults = {\r\n\t\t\tdata: \"list-required\",\r\n\t\t\turl: \"list-required\",\r\n\t\t\tdataType: \"json\",\r\n\r\n\t\t\tlistLocation: function(data) {\r\n\t\t\t\treturn data;\r\n\t\t\t},\r\n\r\n\t\t\txmlElementName: \"\",\r\n\r\n\t\t\tgetValue: function(element) {\r\n\t\t\t\treturn element;\r\n\t\t\t},\r\n\r\n\t\t\tautocompleteOff: true,\r\n\r\n\t\t\tplaceholder: false,\r\n\r\n\t\t\tajaxCallback: function() {},\r\n\r\n\t\t\tmatchResponseProperty: false,\r\n\r\n\t\t\tlist: {\r\n\t\t\t\tsort: {\r\n\t\t\t\t\tenabled: false,\r\n\t\t\t\t\tmethod: function(a, b) {\r\n\t\t\t\t\t\ta = defaults.getValue(a);\r\n\t\t\t\t\t\tb = defaults.getValue(b);\r\n\t\t\t\t\t\tif (a < b) {\r\n\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (a > b) {\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tmaxNumberOfElements: 6,\r\n\r\n\t\t\t\thideOnEmptyPhrase: true,\r\n\r\n\t\t\t\tmatch: {\r\n\t\t\t\t\tenabled: false,\r\n\t\t\t\t\tcaseSensitive: false,\r\n\t\t\t\t\tmethod: function(element, phrase) {\r\n\r\n\t\t\t\t\t\tif (element.search(phrase) > -1) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tshowAnimation: {\r\n\t\t\t\t\ttype: \"normal\", //normal|slide|fade\r\n\t\t\t\t\ttime: 400,\r\n\t\t\t\t\tcallback: function() {}\r\n\t\t\t\t},\r\n\r\n\t\t\t\thideAnimation: {\r\n\t\t\t\t\ttype: \"normal\",\r\n\t\t\t\t\ttime: 400,\r\n\t\t\t\t\tcallback: function() {}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t/* Events */\r\n\t\t\t\tonClickEvent: function() {},\r\n\t\t\t\tonSelectItemEvent: function() {},\r\n\t\t\t\tonLoadEvent: function() {},\r\n\t\t\t\tonChooseEvent: function() {},\r\n\t\t\t\tonKeyEnterEvent: function() {},\r\n\t\t\t\tonMouseOverEvent: function() {},\r\n\t\t\t\tonMouseOutEvent: function() {},\t\r\n\t\t\t\tonShowListEvent: function() {},\r\n\t\t\t\tonHideListEvent: function() {}\r\n\t\t\t},\r\n\r\n\t\t\thighlightPhrase: true,\r\n\r\n\t\t\ttheme: \"\",\r\n\r\n\t\t\tcssClasses: \"\",\r\n\r\n\t\t\tminCharNumber: 0,\r\n\r\n\t\t\trequestDelay: 0,\r\n\r\n\t\t\tadjustWidth: true,\r\n\r\n\t\t\tajaxSettings: {},\r\n\r\n\t\t\tpreparePostData: function(data, inputPhrase) {return data;},\r\n\r\n\t\t\tloggerEnabled: true,\r\n\r\n\t\t\ttemplate: \"\",\r\n\r\n\t\t\tcategoriesAssigned: false,\r\n\r\n\t\t\tcategories: [{\r\n\t\t\t\tmaxNumberOfElements: 4\r\n\t\t\t}]\r\n\r\n\t\t};\r\n\t\t\r\n\t\tvar externalObjects = [\"ajaxSettings\", \"template\"];\r\n\r\n\t\tthis.get = function(propertyName) {\r\n\t\t\treturn defaults[propertyName];\r\n\t\t};\r\n\r\n\t\tthis.equals = function(name, value) {\r\n\t\t\tif (isAssigned(name)) {\r\n\t\t\t\tif (defaults[name] === value) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t} \r\n\t\t\t\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\t\tthis.checkDataUrlProperties = function() {\r\n\t\t\tif (defaults.url === \"list-required\" && defaults.data === \"list-required\") {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t};\r\n\t\tthis.checkRequiredProperties = function() {\r\n\t\t\tfor (var propertyName in defaults) {\r\n\t\t\t\tif (defaults[propertyName] === \"required\") {\r\n\t\t\t\t\tlogger.error(\"Option \" + propertyName + \" must be defined\");\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\tthis.printPropertiesThatDoesntExist = function(consol, optionsToCheck) {\r\n\t\t\tprintPropertiesThatDoesntExist(consol, optionsToCheck);\r\n\t\t};\r\n\r\n\r\n\t\tprepareDefaults();\r\n\r\n\t\tmergeOptions();\r\n\r\n\t\tif (defaults.loggerEnabled === true) {\r\n\t\t\tprintPropertiesThatDoesntExist(console, options);\t\r\n\t\t}\r\n\r\n\t\taddAjaxSettings();\r\n\r\n\t\tprocessAfterMerge();\r\n\t\tfunction prepareDefaults() {\r\n\r\n\t\t\tif (options.dataType === \"xml\") {\r\n\t\t\t\t\r\n\t\t\t\tif (!options.getValue) {\r\n\r\n\t\t\t\t\toptions.getValue = function(element) {\r\n\t\t\t\t\t\treturn $(element).text();\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\r\n\t\t\t\tif (!options.list) {\r\n\r\n\t\t\t\t\toptions.list = {};\r\n\t\t\t\t} \r\n\r\n\t\t\t\tif (!options.list.sort) {\r\n\t\t\t\t\toptions.list.sort = {};\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\toptions.list.sort.method = function(a, b) {\r\n\t\t\t\t\ta = options.getValue(a);\r\n\t\t\t\t\tb = options.getValue(b);\r\n\t\t\t\t\tif (a < b) {\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (a > b) {\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (!options.list.match) {\r\n\t\t\t\t\toptions.list.match = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions.list.match.method = function(element, phrase) {\r\n\r\n\t\t\t\t\tif (element.search(phrase) > -1) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\t\t\tif (options.categories !== undefined && options.categories instanceof Array) {\r\n\r\n\t\t\t\tvar categories = [];\r\n\r\n\t\t\t\tfor (var i = 0, length = options.categories.length; i < length; i += 1) { \r\n\r\n\t\t\t\t\tvar category = options.categories[i];\r\n\r\n\t\t\t\t\tfor (var property in defaults.categories[0]) {\r\n\r\n\t\t\t\t\t\tif (category[property] === undefined) {\r\n\t\t\t\t\t\t\tcategory[property] = defaults.categories[0][property];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcategories.push(category);\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions.categories = categories;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction mergeOptions() {\r\n\r\n\t\t\tdefaults = mergeObjects(defaults, options);\r\n\r\n\t\t\tfunction mergeObjects(source, target) {\r\n\t\t\t\tvar mergedObject = source || {};\r\n\r\n\t\t\t\tfor (var propertyName in source) {\r\n\t\t\t\t\tif (target[propertyName] !== undefined && target[propertyName] !== null) {\r\n\r\n\t\t\t\t\t\tif (typeof target[propertyName] !== \"object\" || \r\n\t\t\t\t\t\t\t\ttarget[propertyName] instanceof Array) {\r\n\t\t\t\t\t\t\tmergedObject[propertyName] = target[propertyName];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmergeObjects(source[propertyName], target[propertyName]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t/* If data is an object */\r\n\t\t\t\tif (target.data !== undefined && target.data !== null && typeof target.data === \"object\") {\r\n\t\t\t\t\tmergedObject.data = target.data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn mergedObject;\r\n\t\t\t}\r\n\t\t}\t\r\n\r\n\r\n\t\tfunction processAfterMerge() {\r\n\t\t\t\r\n\t\t\tif (defaults.url !== \"list-required\" && typeof defaults.url !== \"function\") {\r\n\t\t\t\tvar defaultUrl = defaults.url;\r\n\t\t\t\tdefaults.url = function() {\r\n\t\t\t\t\treturn defaultUrl;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (defaults.ajaxSettings.url !== undefined && typeof defaults.ajaxSettings.url !== \"function\") {\r\n\t\t\t\tvar defaultUrl = defaults.ajaxSettings.url;\r\n\t\t\t\tdefaults.ajaxSettings.url = function() {\r\n\t\t\t\t\treturn defaultUrl;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof defaults.listLocation === \"string\") {\r\n\t\t\t\tvar defaultlistLocation = defaults.listLocation;\r\n\r\n\t\t\t\tif (defaults.dataType.toUpperCase() === \"XML\") {\r\n\t\t\t\t\tdefaults.listLocation = function(data) {\r\n\t\t\t\t\t\treturn $(data).find(defaultlistLocation);\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdefaults.listLocation = function(data) {\r\n\t\t\t\t\t\treturn data[defaultlistLocation];\r\n\t\t\t\t\t};\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof defaults.getValue === \"string\") {\r\n\t\t\t\tvar defaultsGetValue = defaults.getValue;\r\n\t\t\t\tdefaults.getValue = function(element) {\r\n\t\t\t\t\treturn element[defaultsGetValue];\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (options.categories !== undefined) {\r\n\t\t\t\tdefaults.categoriesAssigned = true;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction addAjaxSettings() {\r\n\r\n\t\t\tif (options.ajaxSettings !== undefined && typeof options.ajaxSettings === \"object\") {\r\n\t\t\t\tdefaults.ajaxSettings = options.ajaxSettings;\r\n\t\t\t} else {\r\n\t\t\t\tdefaults.ajaxSettings = {};\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tfunction isAssigned(name) {\r\n\t\t\tif (defaults[name] !== undefined && defaults[name] !== null) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction printPropertiesThatDoesntExist(consol, optionsToCheck) {\r\n\t\t\t\r\n\t\t\tcheckPropertiesIfExist(defaults, optionsToCheck);\r\n\r\n\t\t\tfunction checkPropertiesIfExist(source, target) {\r\n\t\t\t\tfor(var property in target) {\r\n\t\t\t\t\tif (source[property] === undefined) {\r\n\t\t\t\t\t\tconsol.log(\"Property '\" + property + \"' does not exist in EasyAutocomplete options API.\");\t\t\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (typeof source[property] === \"object\" && $.inArray(property, externalObjects) === -1) {\r\n\t\t\t\t\t\tcheckPropertiesIfExist(source[property], target[property]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n\r\n/*\r\n * EasyAutocomplete - Logger \r\n */\r\nvar EasyAutocomplete = (function(scope){\r\n\t\r\n\tscope.Logger = function Logger() {\r\n\r\n\t\tthis.error = function(message) {\r\n\t\t\tconsole.log(\"ERROR: \" + message);\r\n\t\t};\r\n\r\n\t\tthis.warning = function(message) {\r\n\t\t\tconsole.log(\"WARNING: \" + message);\r\n\t\t};\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\t\r\n\r\n/*\r\n * EasyAutocomplete - Constans\r\n */\r\nvar EasyAutocomplete = (function(scope){\t\r\n\t\r\n\tscope.Constans = function Constans() {\r\n\t\tvar constants = {\r\n\t\t\tCONTAINER_CLASS: \"easy-autocomplete-container\",\r\n\t\t\tCONTAINER_ID: \"eac-container-\",\r\n\r\n\t\t\tWRAPPER_CSS_CLASS: \"easy-autocomplete\"\r\n\t\t};\r\n\r\n\t\tthis.getValue = function(propertyName) {\r\n\t\t\treturn constants[propertyName];\r\n\t\t};\r\n\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n/*\r\n * EasyAutocomplete - ListBuilderService \r\n *\r\n * @author Łukasz Pawełczak \r\n *\r\n */\r\nvar EasyAutocomplete = (function(scope) {\r\n\r\n\tscope.ListBuilderService = function ListBuilderService(configuration, proccessResponseData) {\r\n\r\n\r\n\t\tthis.init = function(data) {\r\n\t\t\tvar listBuilder = [],\r\n\t\t\t\tbuilder = {};\r\n\r\n\t\t\tbuilder.data = configuration.get(\"listLocation\")(data);\r\n\t\t\tbuilder.getValue = configuration.get(\"getValue\");\r\n\t\t\tbuilder.maxListSize = configuration.get(\"list\").maxNumberOfElements;\r\n\r\n\t\t\t\t\r\n\t\t\tlistBuilder.push(builder);\r\n\r\n\t\t\treturn listBuilder;\r\n\t\t};\r\n\r\n\t\tthis.updateCategories = function(listBuilder, data) {\r\n\t\t\t\r\n\t\t\tif (configuration.get(\"categoriesAssigned\")) {\r\n\r\n\t\t\t\tlistBuilder = [];\r\n\r\n\t\t\t\tfor(var i = 0; i < configuration.get(\"categories\").length; i += 1) {\r\n\r\n\t\t\t\t\tvar builder = convertToListBuilder(configuration.get(\"categories\")[i], data);\r\n\r\n\t\t\t\t\tlistBuilder.push(builder);\r\n\t\t\t\t}\r\n\r\n\t\t\t} \r\n\r\n\t\t\treturn listBuilder;\r\n\t\t};\r\n\r\n\t\tthis.convertXml = function(listBuilder) {\r\n\t\t\tif(configuration.get(\"dataType\").toUpperCase() === \"XML\") {\r\n\r\n\t\t\t\tfor(var i = 0; i < listBuilder.length; i += 1) {\r\n\t\t\t\t\tlistBuilder[i].data = convertXmlToList(listBuilder[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn listBuilder;\r\n\t\t};\r\n\r\n\t\tthis.processData = function(listBuilder, inputPhrase) {\r\n\r\n\t\t\tfor(var i = 0, length = listBuilder.length; i < length; i+=1) {\r\n\t\t\t\tlistBuilder[i].data = proccessResponseData(configuration, listBuilder[i], inputPhrase);\r\n\t\t\t}\r\n\r\n\t\t\treturn listBuilder;\r\n\t\t};\r\n\r\n\t\tthis.checkIfDataExists = function(listBuilders) {\r\n\r\n\t\t\tfor(var i = 0, length = listBuilders.length; i < length; i += 1) {\r\n\r\n\t\t\t\tif (listBuilders[i].data !== undefined && listBuilders[i].data instanceof Array) {\r\n\t\t\t\t\tif (listBuilders[i].data.length > 0) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} \r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\r\n\t\tfunction convertToListBuilder(category, data) {\r\n\r\n\t\t\tvar builder = {};\r\n\r\n\t\t\tif(configuration.get(\"dataType\").toUpperCase() === \"XML\") {\r\n\r\n\t\t\t\tbuilder = convertXmlToListBuilder();\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbuilder = convertDataToListBuilder();\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\tif (category.header !== undefined) {\r\n\t\t\t\tbuilder.header = category.header;\r\n\t\t\t}\r\n\r\n\t\t\tif (category.maxNumberOfElements !== undefined) {\r\n\t\t\t\tbuilder.maxNumberOfElements = category.maxNumberOfElements;\r\n\t\t\t}\r\n\r\n\t\t\tif (configuration.get(\"list\").maxNumberOfElements !== undefined) {\r\n\r\n\t\t\t\tbuilder.maxListSize = configuration.get(\"list\").maxNumberOfElements;\r\n\t\t\t}\r\n\r\n\t\t\tif (category.getValue !== undefined) {\r\n\r\n\t\t\t\tif (typeof category.getValue === \"string\") {\r\n\t\t\t\t\tvar defaultsGetValue = category.getValue;\r\n\t\t\t\t\tbuilder.getValue = function(element) {\r\n\t\t\t\t\t\treturn element[defaultsGetValue];\r\n\t\t\t\t\t};\r\n\t\t\t\t} else if (typeof category.getValue === \"function\") {\r\n\t\t\t\t\tbuilder.getValue = category.getValue;\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tbuilder.getValue = configuration.get(\"getValue\");\t\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\treturn builder;\r\n\r\n\r\n\t\t\tfunction convertXmlToListBuilder() {\r\n\r\n\t\t\t\tvar builder = {},\r\n\t\t\t\t\tlistLocation;\r\n\r\n\t\t\t\tif (category.xmlElementName !== undefined) {\r\n\t\t\t\t\tbuilder.xmlElementName = category.xmlElementName;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (category.listLocation !== undefined) {\r\n\r\n\t\t\t\t\tlistLocation = category.listLocation;\r\n\t\t\t\t} else if (configuration.get(\"listLocation\") !== undefined) {\r\n\r\n\t\t\t\t\tlistLocation = configuration.get(\"listLocation\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (listLocation !== undefined) {\r\n\t\t\t\t\tif (typeof listLocation === \"string\") {\r\n\t\t\t\t\t\tbuilder.data = $(data).find(listLocation);\r\n\t\t\t\t\t} else if (typeof listLocation === \"function\") {\r\n\r\n\t\t\t\t\t\tbuilder.data = listLocation(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tbuilder.data = data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn builder;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfunction convertDataToListBuilder() {\r\n\r\n\t\t\t\tvar builder = {};\r\n\r\n\t\t\t\tif (category.listLocation !== undefined) {\r\n\r\n\t\t\t\t\tif (typeof category.listLocation === \"string\") {\r\n\t\t\t\t\t\tbuilder.data = data[category.listLocation];\r\n\t\t\t\t\t} else if (typeof category.listLocation === \"function\") {\r\n\t\t\t\t\t\tbuilder.data = category.listLocation(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbuilder.data = data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn builder;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction convertXmlToList(builder) {\r\n\t\t\tvar simpleList = [];\r\n\r\n\t\t\tif (builder.xmlElementName === undefined) {\r\n\t\t\t\tbuilder.xmlElementName = configuration.get(\"xmlElementName\");\r\n\t\t\t}\r\n\r\n\r\n\t\t\t$(builder.data).find(builder.xmlElementName).each(function() {\r\n\t\t\t\tsimpleList.push(this);\r\n\t\t\t});\r\n\r\n\t\t\treturn simpleList;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n\r\n/*\r\n * EasyAutocomplete - Data proccess module\r\n *\r\n * Process list to display:\r\n * - sort \r\n * - decrease number to specific number\r\n * - show only matching list\r\n *\r\n */\r\nvar EasyAutocomplete = (function(scope) {\r\n\r\n\tscope.proccess = function proccessData(config, listBuilder, phrase) {\r\n\r\n\t\tscope.proccess.match = match;\r\n\r\n\t\tvar list = listBuilder.data,\r\n\t\t\tinputPhrase = phrase;//TODO REFACTOR\r\n\r\n\t\tlist = findMatch(list, inputPhrase);\r\n\t\tlist = reduceElementsInList(list);\r\n\t\tlist = sort(list);\r\n\r\n\t\treturn list;\r\n\r\n\r\n\t\tfunction findMatch(list, phrase) {\r\n\t\t\tvar preparedList = [],\r\n\t\t\t\tvalue = \"\";\r\n\r\n\t\t\tif (config.get(\"list\").match.enabled) {\r\n\r\n\t\t\t\tfor(var i = 0, length = list.length; i < length; i += 1) {\r\n\r\n\t\t\t\t\tvalue = config.get(\"getValue\")(list[i]);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (match(value, phrase)) {\r\n\t\t\t\t\t\tpreparedList.push(list[i]);\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tpreparedList = list;\r\n\t\t\t}\r\n\r\n\t\t\treturn preparedList;\r\n\t\t}\r\n\r\n\t\tfunction match(value, phrase) {\r\n\r\n\t\t\tif (!config.get(\"list\").match.caseSensitive) {\r\n\r\n\t\t\t\tif (typeof value === \"string\") {\r\n\t\t\t\t\tvalue = value.toLowerCase();\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tphrase = phrase.toLowerCase();\r\n\t\t\t}\r\n\t\t\tif (config.get(\"list\").match.method(value, phrase)) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction reduceElementsInList(list) {\r\n\t\t\tif (listBuilder.maxNumberOfElements !== undefined && list.length > listBuilder.maxNumberOfElements) {\r\n\t\t\t\tlist = list.slice(0, listBuilder.maxNumberOfElements);\r\n\t\t\t}\r\n\r\n\t\t\treturn list;\r\n\t\t}\r\n\r\n\t\tfunction sort(list) {\r\n\t\t\tif (config.get(\"list\").sort.enabled) {\r\n\t\t\t\tlist.sort(config.get(\"list\").sort.method);\r\n\t\t\t}\r\n\r\n\t\t\treturn list;\r\n\t\t}\r\n\t\t\r\n\t};\r\n\r\n\r\n\treturn scope;\r\n\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n\r\n/*\r\n * EasyAutocomplete - Template \r\n *\r\n * \r\n *\r\n */\r\nvar EasyAutocomplete = (function(scope){\r\n\r\n\tscope.Template = function Template(options) {\r\n\r\n\r\n\t\tvar genericTemplates = {\r\n\t\t\tbasic: {\r\n\t\t\t\ttype: \"basic\",\r\n\t\t\t\tmethod: function(element) { return element; },\r\n\t\t\t\tcssClass: \"\"\r\n\t\t\t},\r\n\t\t\tdescription: {\r\n\t\t\t\ttype: \"description\",\r\n\t\t\t\tfields: {\r\n\t\t\t\t\tdescription: \"description\"\r\n\t\t\t\t},\r\n\t\t\t\tmethod: function(element) {\treturn element + \" - description\"; },\r\n\t\t\t\tcssClass: \"eac-description\"\r\n\t\t\t},\r\n\t\t\ticonLeft: {\r\n\t\t\t\ttype: \"iconLeft\",\r\n\t\t\t\tfields: {\r\n\t\t\t\t\ticon: \"\"\r\n\t\t\t\t},\r\n\t\t\t\tmethod: function(element) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t},\r\n\t\t\t\tcssClass: \"eac-icon-left\"\r\n\t\t\t},\r\n\t\t\ticonRight: {\r\n\t\t\t\ttype: \"iconRight\",\r\n\t\t\t\tfields: {\r\n\t\t\t\t\ticonSrc: \"\"\r\n\t\t\t\t},\r\n\t\t\t\tmethod: function(element) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t},\r\n\t\t\t\tcssClass: \"eac-icon-right\"\r\n\t\t\t},\r\n\t\t\tlinks: {\r\n\t\t\t\ttype: \"links\",\r\n\t\t\t\tfields: {\r\n\t\t\t\t\tlink: \"\"\r\n\t\t\t\t},\r\n\t\t\t\tmethod: function(element) {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t},\r\n\t\t\t\tcssClass: \"\"\r\n\t\t\t},\r\n\t\t\tcustom: {\r\n\t\t\t\ttype: \"custom\",\r\n\t\t\t\tmethod: function() {},\r\n\t\t\t\tcssClass: \"\"\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\r\n\t\t/*\r\n\t\t * Converts method with {{text}} to function\r\n\t\t */\r\n\t\tconvertTemplateToMethod = function(template) {\r\n\r\n\r\n\t\t\tvar _fields = template.fields,\r\n\t\t\t\tbuildMethod;\r\n\r\n\t\t\tif (template.type === \"description\") {\r\n\r\n\t\t\t\tbuildMethod = genericTemplates.description.method; \r\n\r\n\t\t\t\tif (typeof _fields.description === \"string\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn elementValue + \" - <span>\" + element[_fields.description] + \"</span>\";\r\n\t\t\t\t\t};\t\t\t\t\t\r\n\t\t\t\t} else if (typeof _fields.description === \"function\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn elementValue + \" - <span>\" + _fields.description(element) + \"</span>\";\r\n\t\t\t\t\t};\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn buildMethod;\r\n\t\t\t}\r\n\r\n\t\t\tif (template.type === \"iconRight\") {\r\n\r\n\t\t\t\tif (typeof _fields.iconSrc === \"string\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn elementValue + \"<img class='eac-icon' src='\" + element[_fields.iconSrc] + \"' />\" ;\r\n\t\t\t\t\t};\t\t\t\t\t\r\n\t\t\t\t} else if (typeof _fields.iconSrc === \"function\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn elementValue + \"<img class='eac-icon' src='\" + _fields.iconSrc(element) + \"' />\" ;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn buildMethod;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (template.type === \"iconLeft\") {\r\n\r\n\t\t\t\tif (typeof _fields.iconSrc === \"string\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn \"<img class='eac-icon' src='\" + element[_fields.iconSrc] + \"' />\" + elementValue;\r\n\t\t\t\t\t};\t\t\t\t\t\r\n\t\t\t\t} else if (typeof _fields.iconSrc === \"function\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn \"<img class='eac-icon' src='\" + _fields.iconSrc(element) + \"' />\" + elementValue;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn buildMethod;\r\n\t\t\t}\r\n\r\n\t\t\tif(template.type === \"links\") {\r\n\r\n\t\t\t\tif (typeof _fields.link === \"string\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn \"<a href='\" + element[_fields.link] + \"' >\" + elementValue + \"</a>\";\r\n\t\t\t\t\t};\t\t\t\t\t\r\n\t\t\t\t} else if (typeof _fields.link === \"function\") {\r\n\t\t\t\t\tbuildMethod = function(elementValue, element) {\r\n\t\t\t\t\t\treturn \"<a href='\" + _fields.link(element) + \"' >\" + elementValue + \"</a>\";\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn buildMethod;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (template.type === \"custom\") {\r\n\r\n\t\t\t\treturn template.method;\r\n\t\t\t}\r\n\r\n\t\t\treturn genericTemplates.basic.method;\r\n\r\n\t\t},\r\n\r\n\r\n\t\tprepareBuildMethod = function(options) {\r\n\t\t\tif (!options || !options.type) {\r\n\r\n\t\t\t\treturn genericTemplates.basic.method;\r\n\t\t\t}\r\n\r\n\t\t\tif (options.type && genericTemplates[options.type]) {\r\n\r\n\t\t\t\treturn convertTemplateToMethod(options);\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn genericTemplates.basic.method;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\ttemplateClass = function(options) {\r\n\t\t\tvar emptyStringFunction = function() {return \"\";};\r\n\r\n\t\t\tif (!options || !options.type) {\r\n\r\n\t\t\t\treturn emptyStringFunction;\r\n\t\t\t}\r\n\r\n\t\t\tif (options.type && genericTemplates[options.type]) {\r\n\t\t\t\treturn (function () { \r\n\t\t\t\t\tvar _cssClass = genericTemplates[options.type].cssClass;\r\n\t\t\t\t\treturn function() { return _cssClass;};\r\n\t\t\t\t})();\r\n\t\t\t} else {\r\n\t\t\t\treturn emptyStringFunction;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tthis.getTemplateClass = templateClass(options);\r\n\r\n\t\tthis.build = prepareBuildMethod(options);\r\n\r\n\r\n\t};\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n\r\n/*\r\n * EasyAutocomplete - jQuery plugin for autocompletion\r\n *\r\n */\r\nvar EasyAutocomplete = (function(scope) {\r\n\r\n\t\r\n\tscope.main = function Core($input, options) {\r\n\t\t\t\t\r\n\t\tvar module = {\r\n\t\t\t\tname: \"EasyAutocomplete\",\r\n\t\t\t\tshortcut: \"eac\"\r\n\t\t\t};\r\n\r\n\t\tvar consts = new scope.Constans(),\r\n\t\t\tconfig = new scope.Configuration(options),\r\n\t\t\tlogger = new scope.Logger(),\r\n\t\t\ttemplate = new scope.Template(options.template),\r\n\t\t\tlistBuilderService = new scope.ListBuilderService(config, scope.proccess),\r\n\t\t\tcheckParam = config.equals,\r\n\r\n\t\t\t$field = $input, \r\n\t\t\t$container = \"\",\r\n\t\t\telementsList = [],\r\n\t\t\tselectedElement = -1,\r\n\t\t\trequestDelayTimeoutId;\r\n\r\n\t\tscope.consts = consts;\r\n\r\n\t\tthis.getConstants = function() {\r\n\t\t\treturn consts;\r\n\t\t};\r\n\r\n\t\tthis.getConfiguration = function() {\r\n\t\t\treturn config;\r\n\t\t};\r\n\r\n\t\tthis.getContainer = function() {\r\n\t\t\treturn $container;\r\n\t\t};\r\n\r\n\t\tthis.getSelectedItemIndex = function() {\r\n\t\t\treturn selectedElement;\r\n\t\t};\r\n\r\n\t\tthis.getItems = function () {\r\n\t\t\treturn elementsList;\r\n\t\t};\r\n\r\n\t\tthis.getItemData = function(index) {\r\n\r\n\t\t\tif (elementsList.length < index || elementsList[index] === undefined) {\r\n\t\t\t\treturn -1;\r\n\t\t\t} else {\r\n\t\t\t\treturn elementsList[index];\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.getSelectedItemData = function() {\r\n\t\t\treturn this.getItemData(selectedElement);\r\n\t\t};\r\n\r\n\t\tthis.build = function() {\r\n\t\t\tprepareField();\r\n\t\t};\r\n\r\n\t\tthis.init = function() {\r\n\t\t\tinit();\r\n\t\t};\r\n\t\tfunction init() {\r\n\r\n\t\t\tif ($field.length === 0) {\r\n\t\t\t\tlogger.error(\"Input field doesn't exist.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!config.checkDataUrlProperties()) {\r\n\t\t\t\tlogger.error(\"One of options variables 'data' or 'url' must be defined.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!config.checkRequiredProperties()) {\r\n\t\t\t\tlogger.error(\"Will not work without mentioned properties.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tprepareField();\r\n\t\t\tbindEvents();\t\r\n\r\n\t\t}\r\n\t\tfunction prepareField() {\r\n\r\n\t\t\t\t\r\n\t\t\tif ($field.parent().hasClass(consts.getValue(\"WRAPPER_CSS_CLASS\"))) {\r\n\t\t\t\tremoveContainer();\r\n\t\t\t\tremoveWrapper();\r\n\t\t\t} \r\n\t\t\t\r\n\t\t\tcreateWrapper();\r\n\t\t\tcreateContainer();\t\r\n\r\n\t\t\t$container = $(\"#\" + getContainerId());\r\n\t\t\tif (config.get(\"placeholder\")) {\r\n\t\t\t\t$field.attr(\"placeholder\", config.get(\"placeholder\"));\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfunction createWrapper() {\r\n\t\t\t\tvar $wrapper = $(\"<div>\"),\r\n\t\t\t\t\tclasses = consts.getValue(\"WRAPPER_CSS_CLASS\");\r\n\r\n\t\t\t\r\n\t\t\t\tif (config.get(\"theme\") && config.get(\"theme\") !== \"\") {\r\n\t\t\t\t\tclasses += \" eac-\" + config.get(\"theme\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (config.get(\"cssClasses\") && config.get(\"cssClasses\") !== \"\") {\r\n\t\t\t\t\tclasses += \" \" + config.get(\"cssClasses\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (template.getTemplateClass() !== \"\") {\r\n\t\t\t\t\tclasses += \" \" + template.getTemplateClass();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t\t$wrapper\r\n\t\t\t\t\t.addClass(classes);\r\n\t\t\t\t$field.wrap($wrapper);\r\n\r\n\r\n\t\t\t\tif (config.get(\"adjustWidth\") === true) {\r\n\t\t\t\t\tadjustWrapperWidth();\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction adjustWrapperWidth() {\r\n\t\t\t\tvar fieldWidth = $field.outerWidth();\r\n\r\n\t\t\t\t$field.parent().css(\"width\", fieldWidth);\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tfunction removeWrapper() {\r\n\t\t\t\t$field.unwrap();\r\n\t\t\t}\r\n\r\n\t\t\tfunction createContainer() {\r\n\t\t\t\tvar $elements_container = $(\"<div>\").addClass(consts.getValue(\"CONTAINER_CLASS\"));\r\n\r\n\t\t\t\t$elements_container\r\n\t\t\t\t\t\t.attr(\"id\", getContainerId())\r\n\t\t\t\t\t\t.prepend($(\"<ul>\"));\r\n\r\n\r\n\t\t\t\t(function() {\r\n\r\n\t\t\t\t\t$elements_container\r\n\t\t\t\t\t\t/* List show animation */\r\n\t\t\t\t\t\t.on(\"show.eac\", function() {\r\n\r\n\t\t\t\t\t\t\tswitch(config.get(\"list\").showAnimation.type) {\r\n\r\n\t\t\t\t\t\t\t\tcase \"slide\":\r\n\t\t\t\t\t\t\t\t\tvar animationTime = config.get(\"list\").showAnimation.time,\r\n\t\t\t\t\t\t\t\t\t\tcallback = config.get(\"list\").showAnimation.callback;\r\n\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").slideDown(animationTime, callback);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tcase \"fade\":\r\n\t\t\t\t\t\t\t\t\tvar animationTime = config.get(\"list\").showAnimation.time,\r\n\t\t\t\t\t\t\t\t\t\tcallback = config.get(\"list\").showAnimation.callback;\r\n\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").fadeIn(animationTime), callback;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").show();\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onShowListEvent();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t/* List hide animation */\r\n\t\t\t\t\t\t.on(\"hide.eac\", function() {\r\n\r\n\t\t\t\t\t\t\tswitch(config.get(\"list\").hideAnimation.type) {\r\n\r\n\t\t\t\t\t\t\t\tcase \"slide\":\r\n\t\t\t\t\t\t\t\t\tvar animationTime = config.get(\"list\").hideAnimation.time,\r\n\t\t\t\t\t\t\t\t\t\tcallback = config.get(\"list\").hideAnimation.callback;\r\n\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").slideUp(animationTime, callback);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tcase \"fade\":\r\n\t\t\t\t\t\t\t\t\tvar animationTime = config.get(\"list\").hideAnimation.time,\r\n\t\t\t\t\t\t\t\t\t\tcallback = config.get(\"list\").hideAnimation.callback;\r\n\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").fadeOut(animationTime, callback);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t$elements_container.find(\"ul\").hide();\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onHideListEvent();\r\n\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"selectElement.eac\", function() {\r\n\t\t\t\t\t\t\t$elements_container.find(\"ul li\").removeClass(\"selected\");\r\n\t\t\t\t\t\t\t$elements_container.find(\"ul li\").eq(selectedElement).addClass(\"selected\");\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onSelectItemEvent();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"loadElements.eac\", function(event, listBuilders, phrase) {\r\n\t\t\t\r\n\r\n\t\t\t\t\t\t\tvar $item = \"\",\r\n\t\t\t\t\t\t\t\t$listContainer = $elements_container.find(\"ul\");\r\n\r\n\t\t\t\t\t\t\t$listContainer\r\n\t\t\t\t\t\t\t\t.empty()\r\n\t\t\t\t\t\t\t\t.detach();\r\n\r\n\t\t\t\t\t\t\telementsList = [];\r\n\t\t\t\t\t\t\tvar counter = 0;\r\n\t\t\t\t\t\t\tfor(var builderIndex = 0, listBuildersLength = listBuilders.length; builderIndex < listBuildersLength; builderIndex += 1) {\r\n\r\n\t\t\t\t\t\t\t\tvar listData = listBuilders[builderIndex].data;\r\n\r\n\t\t\t\t\t\t\t\tif (listData.length === 0) {\r\n\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (listBuilders[builderIndex].header !== undefined && listBuilders[builderIndex].header.length > 0) {\r\n\t\t\t\t\t\t\t\t\t$listContainer.append(\"<div class='eac-category' >\" + listBuilders[builderIndex].header + \"</div>\");\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tfor(var i = 0, listDataLength = listData.length; i < listDataLength && counter < listBuilders[builderIndex].maxListSize; i += 1) {\r\n\t\t\t\t\t\t\t\t\t$item = $(\"<li><div class='eac-item'></div></li>\");\r\n\t\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\t\t(function() {\r\n\t\t\t\t\t\t\t\t\t\tvar j = i,\r\n\t\t\t\t\t\t\t\t\t\t\titemCounter = counter,\r\n\t\t\t\t\t\t\t\t\t\t\telementsValue = listBuilders[builderIndex].getValue(listData[j]);\r\n\r\n\t\t\t\t\t\t\t\t\t\t$item.find(\" > div\")\r\n\t\t\t\t\t\t\t\t\t\t\t.on(\"click\", function() {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t$field.val(elementsValue).trigger(\"change\");\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedElement = itemCounter;\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectElement(itemCounter);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfig.get(\"list\").onClickEvent();\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfig.get(\"list\").onChooseEvent();\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.mouseover(function() {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedElement = itemCounter;\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectElement(itemCounter);\t\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfig.get(\"list\").onMouseOverEvent();\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.mouseout(function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfig.get(\"list\").onMouseOutEvent();\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.html(template.build(highlight(elementsValue, phrase), listData[j]));\r\n\t\t\t\t\t\t\t\t\t})();\r\n\r\n\t\t\t\t\t\t\t\t\t$listContainer.append($item);\r\n\t\t\t\t\t\t\t\t\telementsList.push(listData[i]);\r\n\t\t\t\t\t\t\t\t\tcounter += 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t$elements_container.append($listContainer);\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onLoadEvent();\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t})();\r\n\r\n\t\t\t\t$field.after($elements_container);\r\n\t\t\t}\r\n\r\n\t\t\tfunction removeContainer() {\r\n\t\t\t\t$field.next(\".\" + consts.getValue(\"CONTAINER_CLASS\")).remove();\r\n\t\t\t}\r\n\r\n\t\t\tfunction highlight(string, phrase) {\r\n\r\n\t\t\t\tif(config.get(\"highlightPhrase\") && phrase !== \"\") {\r\n\t\t\t\t\treturn highlightPhrase(string, phrase);\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn string;\r\n\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tfunction escapeRegExp(str) {\r\n\t\t\t\treturn str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\r\n \t\t\t}\r\n\r\n\t\t\tfunction highlightPhrase(string, phrase) {\r\n\t\t\t\tvar escapedPhrase = escapeRegExp(phrase);\r\n\t\t\t\treturn (string + \"\").replace(new RegExp(\"(\" + escapedPhrase + \")\", \"gi\") , \"<b>$1</b>\");\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t}\r\n\t\tfunction getContainerId() {\r\n\t\t\t\r\n\t\t\tvar elementId = $field.attr(\"id\");\r\n\r\n\t\t\telementId = consts.getValue(\"CONTAINER_ID\") + elementId;\r\n\r\n\t\t\treturn elementId;\r\n\t\t}\r\n\t\tfunction bindEvents() {\r\n\r\n\t\t\tbindAllEvents();\r\n\t\t\t\r\n\r\n\t\t\tfunction bindAllEvents() {\r\n\t\t\t\tif (checkParam(\"autocompleteOff\", true)) {\r\n\t\t\t\t\tremoveAutocomplete();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbindFocusOut();\r\n\t\t\t\tbindKeyup();\r\n\t\t\t\tbindKeydown();\r\n\t\t\t\tbindKeypress();\r\n\t\t\t\tbindFocus();\r\n\t\t\t\tbindBlur();\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindFocusOut() {\r\n\t\t\t\t$field.focusout(function () {\r\n\r\n\t\t\t\t\tvar fieldValue = $field.val(),\r\n\t\t\t\t\t\tphrase;\r\n\r\n\t\t\t\t\tif (!config.get(\"list\").match.caseSensitive) {\r\n\t\t\t\t\t\tfieldValue = fieldValue.toLowerCase();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (var i = 0, length = elementsList.length; i < length; i += 1) {\r\n\r\n\t\t\t\t\t\tphrase = config.get(\"getValue\")(elementsList[i]);\r\n\t\t\t\t\t\tif (!config.get(\"list\").match.caseSensitive) {\r\n\t\t\t\t\t\t\tphrase = phrase.toLowerCase();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (phrase === fieldValue) {\r\n\t\t\t\t\t\t\tselectedElement = i;\r\n\t\t\t\t\t\t\tselectElement(selectedElement);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindKeyup() {\r\n\t\t\t\t$field\r\n\t\t\t\t.off(\"keyup\")\r\n\t\t\t\t.keyup(function(event) {\r\n\r\n\t\t\t\t\tswitch(event.keyCode) {\r\n\r\n\t\t\t\t\t\tcase 27:\r\n\r\n\t\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t\t\tloseFieldFocus();\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 38:\r\n\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\t\tif(elementsList.length > 0 && selectedElement > 0) {\r\n\r\n\t\t\t\t\t\t\t\tselectedElement -= 1;\r\n\r\n\t\t\t\t\t\t\t\t$field.val(config.get(\"getValue\")(elementsList[selectedElement]));\r\n\r\n\t\t\t\t\t\t\t\tselectElement(selectedElement);\r\n\r\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 40:\r\n\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\t\tif(elementsList.length > 0 && selectedElement < elementsList.length - 1) {\r\n\r\n\t\t\t\t\t\t\t\tselectedElement += 1;\r\n\r\n\t\t\t\t\t\t\t\t$field.val(config.get(\"getValue\")(elementsList[selectedElement]));\r\n\r\n\t\t\t\t\t\t\t\tselectElement(selectedElement);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\tif (event.keyCode > 40 || event.keyCode === 8) {\r\n\r\n\t\t\t\t\t\t\t\tvar inputPhrase = $field.val();\r\n\r\n\t\t\t\t\t\t\t\tif (!(config.get(\"list\").hideOnEmptyPhrase === true && event.keyCode === 8 && inputPhrase === \"\")) {\r\n\r\n\t\t\t\t\t\t\t\t\tif (config.get(\"requestDelay\") > 0) {\r\n\t\t\t\t\t\t\t\t\t\tif (requestDelayTimeoutId !== undefined) {\r\n\t\t\t\t\t\t\t\t\t\t\tclearTimeout(requestDelayTimeoutId);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\trequestDelayTimeoutId = setTimeout(function () { loadData(inputPhrase);}, config.get(\"requestDelay\"));\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tloadData(inputPhrase);\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t\t\tfunction loadData(inputPhrase) {\r\n\r\n\r\n\t\t\t\t\t\tif (inputPhrase.length < config.get(\"minCharNumber\")) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tif (config.get(\"data\") !== \"list-required\") {\r\n\r\n\t\t\t\t\t\t\tvar data = config.get(\"data\");\r\n\r\n\t\t\t\t\t\t\tvar listBuilders = listBuilderService.init(data);\r\n\r\n\t\t\t\t\t\t\tlistBuilders = listBuilderService.updateCategories(listBuilders, data);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlistBuilders = listBuilderService.processData(listBuilders, inputPhrase);\r\n\r\n\t\t\t\t\t\t\tloadElements(listBuilders, inputPhrase);\r\n\r\n\t\t\t\t\t\t\tif ($field.parent().find(\"li\").length > 0) {\r\n\t\t\t\t\t\t\t\tshowContainer();\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar settings = createAjaxSettings();\r\n\r\n\t\t\t\t\t\tif (settings.url === undefined || settings.url === \"\") {\r\n\t\t\t\t\t\t\tsettings.url = config.get(\"url\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (settings.dataType === undefined || settings.dataType === \"\") {\r\n\t\t\t\t\t\t\tsettings.dataType = config.get(\"dataType\");\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tif (settings.url !== undefined && settings.url !== \"list-required\") {\r\n\r\n\t\t\t\t\t\t\tsettings.url = settings.url(inputPhrase);\r\n\r\n\t\t\t\t\t\t\tsettings.data = config.get(\"preparePostData\")(settings.data, inputPhrase);\r\n\r\n\t\t\t\t\t\t\t$.ajax(settings) \r\n\t\t\t\t\t\t\t\t.done(function(data) {\r\n\r\n\t\t\t\t\t\t\t\t\tvar listBuilders = listBuilderService.init(data);\r\n\r\n\t\t\t\t\t\t\t\t\tlistBuilders = listBuilderService.updateCategories(listBuilders, data);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tlistBuilders = listBuilderService.convertXml(listBuilders);\r\n\t\t\t\t\t\t\t\t\tif (checkInputPhraseMatchResponse(inputPhrase, data)) {\r\n\r\n\t\t\t\t\t\t\t\t\t\tlistBuilders = listBuilderService.processData(listBuilders, inputPhrase);\r\n\r\n\t\t\t\t\t\t\t\t\t\tloadElements(listBuilders, inputPhrase);\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tif (listBuilderService.checkIfDataExists(listBuilders) && $field.parent().find(\"li\").length > 0) {\r\n\t\t\t\t\t\t\t\t\t\tshowContainer();\t\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tconfig.get(\"ajaxCallback\")();\r\n\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.fail(function() {\r\n\t\t\t\t\t\t\t\t\tlogger.warning(\"Fail to load response data\");\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.always(function() {\r\n\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\tfunction createAjaxSettings() {\r\n\r\n\t\t\t\t\t\t\tvar settings = {},\r\n\t\t\t\t\t\t\t\tajaxSettings = config.get(\"ajaxSettings\") || {};\r\n\r\n\t\t\t\t\t\t\tfor (var set in ajaxSettings) {\r\n\t\t\t\t\t\t\t\tsettings[set] = ajaxSettings[set];\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\treturn settings;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfunction checkInputPhraseMatchResponse(inputPhrase, data) {\r\n\r\n\t\t\t\t\t\t\tif (config.get(\"matchResponseProperty\") !== false) {\r\n\t\t\t\t\t\t\t\tif (typeof config.get(\"matchResponseProperty\") === \"string\") {\r\n\t\t\t\t\t\t\t\t\treturn (data[config.get(\"matchResponseProperty\")] === inputPhrase);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (typeof config.get(\"matchResponseProperty\") === \"function\") {\r\n\t\t\t\t\t\t\t\t\treturn (config.get(\"matchResponseProperty\")(data) === inputPhrase);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindKeydown() {\r\n\t\t\t\t$field\r\n\t\t\t\t\t.on(\"keydown\", function(evt) {\r\n\t        \t\t    evt = evt || window.event;\r\n\t        \t\t    var keyCode = evt.keyCode;\r\n\t        \t\t    if (keyCode === 38) {\r\n\t        \t\t        suppressKeypress = true; \r\n\t        \t\t        return false;\r\n\t        \t\t    }\r\n\t\t        \t})\r\n\t\t\t\t\t.keydown(function(event) {\r\n\r\n\t\t\t\t\t\tif (event.keyCode === 13 && selectedElement > -1) {\r\n\r\n\t\t\t\t\t\t\t$field.val(config.get(\"getValue\")(elementsList[selectedElement]));\r\n\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onKeyEnterEvent();\r\n\t\t\t\t\t\t\tconfig.get(\"list\").onChooseEvent();\r\n\r\n\t\t\t\t\t\t\tselectedElement = -1;\r\n\t\t\t\t\t\t\thideContainer();\r\n\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindKeypress() {\r\n\t\t\t\t$field\r\n\t\t\t\t.off(\"keypress\");\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindFocus() {\r\n\t\t\t\t$field.focus(function() {\r\n\r\n\t\t\t\t\tif ($field.val() !== \"\" && elementsList.length > 0) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tselectedElement = -1;\r\n\t\t\t\t\t\tshowContainer();\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction bindBlur() {\r\n\t\t\t\t$field.blur(function() {\r\n\t\t\t\t\tsetTimeout(function() { \r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tselectedElement = -1;\r\n\t\t\t\t\t\thideContainer();\r\n\t\t\t\t\t}, 250);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction removeAutocomplete() {\r\n\t\t\t\t$field.attr(\"autocomplete\",\"off\");\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction showContainer() {\r\n\t\t\t$container.trigger(\"show.eac\");\r\n\t\t}\r\n\r\n\t\tfunction hideContainer() {\r\n\t\t\t$container.trigger(\"hide.eac\");\r\n\t\t}\r\n\r\n\t\tfunction selectElement(index) {\r\n\t\t\t\r\n\t\t\t$container.trigger(\"selectElement.eac\", index);\r\n\t\t}\r\n\r\n\t\tfunction loadElements(list, phrase) {\r\n\t\t\t$container.trigger(\"loadElements.eac\", [list, phrase]);\r\n\t\t}\r\n\r\n\t\tfunction loseFieldFocus() {\r\n\t\t\t$field.trigger(\"blur\");\r\n\t\t}\r\n\r\n\r\n\t};\r\n\tscope.eacHandles = [];\r\n\r\n\tscope.getHandle = function(id) {\r\n\t\treturn scope.eacHandles[id];\r\n\t};\r\n\r\n\tscope.inputHasId = function(input) {\r\n\r\n\t\tif($(input).attr(\"id\") !== undefined && $(input).attr(\"id\").length > 0) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tscope.assignRandomId = function(input) {\r\n\r\n\t\tvar fieldId = \"\";\r\n\r\n\t\tdo {\r\n\t\t\tfieldId = \"eac-\" + Math.floor(Math.random() * 10000);\t\t\r\n\t\t} while ($(\"#\" + fieldId).length !== 0);\r\n\t\t\r\n\t\telementId = scope.consts.getValue(\"CONTAINER_ID\") + fieldId;\r\n\r\n\t\t$(input).attr(\"id\", fieldId);\r\n \r\n\t};\r\n\r\n\tscope.setHandle = function(handle, id) {\r\n\t\tscope.eacHandles[id] = handle;\r\n\t};\r\n\r\n\r\n\treturn scope;\r\n\r\n})(EasyAutocomplete || {});\r\n\r\n(function($) {\r\n\r\n\t$.fn.easyAutocomplete = function(options) {\r\n\r\n\t\treturn this.each(function() {\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\teacHandle = new EasyAutocomplete.main($this, options);\r\n\r\n\t\t\tif (!EasyAutocomplete.inputHasId($this)) {\r\n\t\t\t\tEasyAutocomplete.assignRandomId($this);\r\n\t\t\t}\r\n\r\n\t\t\teacHandle.init();\r\n\r\n\t\t\tEasyAutocomplete.setHandle(eacHandle, $this.attr(\"id\"));\r\n\r\n\t\t});\r\n\t};\r\n\r\n\t$.fn.getSelectedItemIndex = function() {\r\n\r\n\t\tvar inputId = $(this).attr(\"id\");\r\n\r\n\t\tif (inputId !== undefined) {\r\n\t\t\treturn EasyAutocomplete.getHandle(inputId).getSelectedItemIndex();\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t};\r\n\r\n\t$.fn.getItems = function () {\r\n\r\n\t\tvar inputId = $(this).attr(\"id\");\r\n\r\n\t\tif (inputId !== undefined) {\r\n\t\t\treturn EasyAutocomplete.getHandle(inputId).getItems();\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t};\r\n\r\n\t$.fn.getItemData = function(index) {\r\n\r\n\t\tvar inputId = $(this).attr(\"id\");\r\n\r\n\t\tif (inputId !== undefined && index > -1) {\r\n\t\t\treturn EasyAutocomplete.getHandle(inputId).getItemData(index);\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t};\r\n\r\n\t$.fn.getSelectedItemData = function() {\r\n\r\n\t\tvar inputId = $(this).attr(\"id\");\r\n\r\n\t\tif (inputId !== undefined) {\r\n\t\t\treturn EasyAutocomplete.getHandle(inputId).getSelectedItemData();\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t};\r\n\r\n})(jQuery);\r\n","// ==================================================\r\n// fancyBox v3.2.10\r\n//\r\n// Licensed GPLv3 for open source use\r\n// or fancyBox Commercial License for commercial use\r\n//\r\n// http://fancyapps.com/fancybox/\r\n// Copyright 2017 fancyApps\r\n//\r\n// ==================================================\r\n;(function (window, document, $, undefined) {\r\n    'use strict';\r\n\r\n    // If there's no jQuery, fancyBox can't work\r\n    // =========================================\r\n\r\n    if ( !$ ) {\r\n        return;\r\n    }\r\n\r\n    // Check if fancyBox is already initialized\r\n    // ========================================\r\n\r\n    if ( $.fn.fancybox ) {\r\n\r\n        if ( 'console' in window ) {\r\n            console.log( 'fancyBox already initialized' );\r\n        }\r\n\r\n        return;\r\n    }\r\n\r\n    // Private default settings\r\n    // ========================\r\n\r\n    var defaults = {\r\n\r\n        // Enable infinite gallery navigation\r\n        loop : false,\r\n\r\n        // Space around image, ignored if zoomed-in or viewport width is smaller than 800px\r\n        margin : [44, 0],\r\n\r\n        // Horizontal space between slides\r\n        gutter : 50,\r\n\r\n        // Enable keyboard navigation\r\n        keyboard : true,\r\n\r\n        // Should display navigation arrows at the screen edges\r\n        arrows : true,\r\n\r\n        // Should display infobar (counter and arrows at the top)\r\n        infobar : true,\r\n\r\n        // Should display toolbar (buttons at the top)\r\n        toolbar : true,\r\n\r\n        // What buttons should appear in the top right corner.\r\n        // Buttons will be created using templates from `btnTpl` option\r\n        // and they will be placed into toolbar (class=\"fancybox-toolbar\"` element)\r\n        buttons : [\r\n            'slideShow',\r\n            'fullScreen',\r\n            'thumbs',\r\n            'share',\r\n            //'download',\r\n            //'zoom',\r\n            'close'\r\n        ],\r\n\r\n        // Detect \"idle\" time in seconds\r\n        idleTime : 3,\r\n\r\n        // Should display buttons at top right corner of the content\r\n        // If 'auto' - they will be created for content having type 'html', 'inline' or 'ajax'\r\n        // Use template from `btnTpl.smallBtn` for customization\r\n        smallBtn : 'auto',\r\n\r\n        // Disable right-click and use simple image protection for images\r\n        protect : false,\r\n\r\n        // Shortcut to make content \"modal\" - disable keyboard navigtion, hide buttons, etc\r\n        modal : false,\r\n\r\n        image : {\r\n\r\n            // Wait for images to load before displaying\r\n            // Requires predefined image dimensions\r\n            // If 'auto' - will zoom in thumbnail if 'width' and 'height' attributes are found\r\n            preload : \"auto\"\r\n\r\n        },\r\n\r\n        ajax : {\r\n\r\n            // Object containing settings for ajax request\r\n            settings : {\r\n\r\n                // This helps to indicate that request comes from the modal\r\n                // Feel free to change naming\r\n                data : {\r\n                    fancybox : true\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        iframe : {\r\n\r\n            // Iframe template\r\n            tpl : '<iframe id=\"fancybox-frame{rnd}\" name=\"fancybox-frame{rnd}\" class=\"fancybox-iframe\" frameborder=\"0\" vspace=\"0\" hspace=\"0\" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency=\"true\" src=\"\"></iframe>',\r\n\r\n            // Preload iframe before displaying it\r\n            // This allows to calculate iframe content width and height\r\n            // (note: Due to \"Same Origin Policy\", you can't get cross domain data).\r\n            preload : true,\r\n\r\n            // Custom CSS styling for iframe wrapping element\r\n            // You can use this to set custom iframe dimensions\r\n            css : {},\r\n\r\n            // Iframe tag attributes\r\n            attr : {\r\n                scrolling : 'auto'\r\n            }\r\n\r\n        },\r\n\r\n        // Default content type if cannot be detected automatically\r\n        defaultType : 'image',\r\n\r\n        // Open/close animation type\r\n        // Possible values:\r\n        //   false            - disable\r\n        //   \"zoom\"           - zoom images from/to thumbnail\r\n        //   \"fade\"\r\n        //   \"zoom-in-out\"\r\n        //\r\n        animationEffect : \"zoom\",\r\n\r\n        // Duration in ms for open/close animation\r\n        animationDuration : 500,\r\n\r\n        // Should image change opacity while zooming\r\n        // If opacity is \"auto\", then opacity will be changed if image and thumbnail have different aspect ratios\r\n        zoomOpacity : \"auto\",\r\n\r\n        // Transition effect between slides\r\n        //\r\n        // Possible values:\r\n        //   false            - disable\r\n        //   \"fade'\r\n        //   \"slide'\r\n        //   \"circular'\r\n        //   \"tube'\r\n        //   \"zoom-in-out'\r\n        //   \"rotate'\r\n        //\r\n        transitionEffect : \"fade\",\r\n\r\n        // Duration in ms for transition animation\r\n        transitionDuration : 366,\r\n\r\n        // Custom CSS class for slide element\r\n        slideClass : '',\r\n\r\n        // Custom CSS class for layout\r\n        baseClass : '',\r\n\r\n        // Base template for layout\r\n        baseTpl\t:\r\n            '<div class=\"fancybox-container\" role=\"dialog\" tabindex=\"-1\">' +\r\n                '<div class=\"fancybox-bg\"></div>' +\r\n                '<div class=\"fancybox-inner\">' +\r\n                    '<div class=\"fancybox-infobar\">' +\r\n                        '<span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span>' +\r\n                    '</div>' +\r\n                    '<div class=\"fancybox-toolbar\">{{buttons}}</div>' +\r\n                    '<div class=\"fancybox-navigation\">{{arrows}}</div>' +\r\n                    '<div class=\"fancybox-stage\"></div>' +\r\n                    '<div class=\"fancybox-caption-wrap\"><div class=\"fancybox-caption\"></div></div>' +\r\n                '</div>' +\r\n            '</div>',\r\n\r\n        // Loading indicator template\r\n        spinnerTpl : '<div class=\"fancybox-loading\"></div>',\r\n\r\n        // Error message template\r\n        errorTpl : '<div class=\"fancybox-error\"><p>{{ERROR}}<p></div>',\r\n\r\n        btnTpl : {\r\n\r\n            download : '<a download data-fancybox-download class=\"fancybox-button fancybox-button--download\" title=\"{{DOWNLOAD}}\">' +\r\n                        '<svg viewBox=\"0 0 40 40\">' +\r\n                            '<path d=\"M20,23 L20,8 L20,23 L13,16 L20,23 L27,16 L20,23 M26,28 L13,28 L27,28 L14,28\" />' +\r\n                        '</svg>' +\r\n                    '</a>',\r\n\r\n            zoom : '<button data-fancybox-zoom class=\"fancybox-button fancybox-button--zoom\" title=\"{{ZOOM}}\">' +\r\n                        '<svg viewBox=\"0 0 40 40\">' +\r\n                            '<path d=\"M 18,17 m-8,0 a 8,8 0 1,0 16,0 a 8,8 0 1,0 -16,0 M25,23 L31,29 L25,23\" />' +\r\n                        '</svg>' +\r\n                    '</button>',\r\n\r\n            close : '<button data-fancybox-close class=\"fancybox-button fancybox-button--close\" title=\"{{CLOSE}}\">' +\r\n                        '<svg viewBox=\"0 0 40 40\">' +\r\n                            '<path d=\"M10,10 L30,30 M30,10 L10,30\" />' +\r\n                        '</svg>' +\r\n                    '</button>',\r\n\r\n            // This small close button will be appended to your html/inline/ajax content by default,\r\n            // if \"smallBtn\" option is not set to false\r\n            smallBtn   : '<button data-fancybox-close class=\"fancybox-close-small\" title=\"{{CLOSE}}\"></button>',\r\n\r\n            // Arrows\r\n            arrowLeft : '<button data-fancybox-prev class=\"fancybox-button fancybox-button--arrow_left\" title=\"{{PREV}}\">' +\r\n                            '<svg viewBox=\"0 0 40 40\">' +\r\n                              '<path d=\"M10,20 L30,20 L10,20 L18,28 L10,20 L18,12 L10,20\"></path>' +\r\n                            '</svg>' +\r\n                          '</button>',\r\n\r\n            arrowRight : '<button data-fancybox-next class=\"fancybox-button fancybox-button--arrow_right\" title=\"{{NEXT}}\">' +\r\n                          '<svg viewBox=\"0 0 40 40\">' +\r\n                            '<path d=\"M30,20 L10,20 L30,20 L22,28 L30,20 L22,12 L30,20\"></path>' +\r\n                          '</svg>' +\r\n                        '</button>'\r\n        },\r\n\r\n        // Container is injected into this element\r\n        parentEl : 'body',\r\n\r\n\r\n        // Focus handling\r\n        // ==============\r\n\r\n        // Try to focus on the first focusable element after opening\r\n        autoFocus : false,\r\n\r\n        // Put focus back to active element after closing\r\n        backFocus : true,\r\n\r\n        // Do not let user to focus on element outside modal content\r\n        trapFocus : true,\r\n\r\n\r\n        // Module specific options\r\n        // =======================\r\n\r\n        fullScreen : {\r\n            autoStart : false,\r\n        },\r\n\r\n        // Set `touch: false` to disable dragging/swiping\r\n        touch : {\r\n            vertical : true,  // Allow to drag content vertically\r\n            momentum : true   // Continue movement after releasing mouse/touch when panning\r\n        },\r\n\r\n        // Hash value when initializing manually,\r\n        // set `false` to disable hash change\r\n        hash : null,\r\n\r\n        // Customize or add new media types\r\n        // Example:\r\n        /*\r\n        media : {\r\n            youtube : {\r\n                params : {\r\n                    autoplay : 0\r\n                }\r\n            }\r\n        }\r\n        */\r\n        media : {},\r\n\r\n        slideShow : {\r\n            autoStart : false,\r\n            speed     : 4000\r\n        },\r\n\r\n        thumbs : {\r\n\t\t\tautoStart   : false,                  // Display thumbnails on opening\r\n\t\t\thideOnClose : true,                   // Hide thumbnail grid when closing animation starts\r\n\t\t\tparentEl    : '.fancybox-container',  // Container is injected into this element\r\n\t\t\taxis        : 'y'                     // Vertical (y) or horizontal (x) scrolling\r\n\t\t},\r\n\r\n        // Use mousewheel to navigate gallery\r\n        // If 'auto' - enabled for images only\r\n        wheel : 'auto',\r\n\r\n        // Callbacks\r\n        //==========\r\n\r\n        // See Documentation/API/Events for more information\r\n        // Example:\r\n        /*\r\n            afterShow: function( instance, current ) {\r\n                 console.info( 'Clicked element:' );\r\n                 console.info( current.opts.$orig );\r\n            }\r\n        */\r\n\r\n        onInit       : $.noop,  // When instance has been initialized\r\n\r\n        beforeLoad   : $.noop,  // Before the content of a slide is being loaded\r\n        afterLoad    : $.noop,  // When the content of a slide is done loading\r\n\r\n        beforeShow   : $.noop,  // Before open animation starts\r\n        afterShow    : $.noop,  // When content is done loading and animating\r\n\r\n        beforeClose  : $.noop,  // Before the instance attempts to close. Return false to cancel the close.\r\n        afterClose   : $.noop,  // After instance has been closed\r\n\r\n        onActivate   : $.noop,  // When instance is brought to front\r\n        onDeactivate : $.noop,  // When other instance has been activated\r\n\r\n\r\n        // Interaction\r\n        // ===========\r\n\r\n        // Use options below to customize taken action when user clicks or double clicks on the fancyBox area,\r\n        // each option can be string or method that returns value.\r\n        //\r\n        // Possible values:\r\n        //   \"close\"           - close instance\r\n        //   \"next\"            - move to next gallery item\r\n        //   \"nextOrClose\"     - move to next gallery item or close if gallery has only one item\r\n        //   \"toggleControls\"  - show/hide controls\r\n        //   \"zoom\"            - zoom image (if loaded)\r\n        //   false             - do nothing\r\n\r\n        // Clicked on the content\r\n        clickContent : function( current, event ) {\r\n            return current.type === 'image' ? 'zoom' : false;\r\n        },\r\n\r\n        // Clicked on the slide\r\n        clickSlide : 'close',\r\n\r\n        // Clicked on the background (backdrop) element\r\n        clickOutside : 'close',\r\n\r\n        // Same as previous two, but for double click\r\n        dblclickContent : false,\r\n        dblclickSlide   : false,\r\n        dblclickOutside : false,\r\n\r\n\r\n        // Custom options when mobile device is detected\r\n        // =============================================\r\n\r\n        mobile : {\r\n            idleTime : false,\r\n            margin   : 0,\r\n\r\n            clickContent : function( current, event ) {\r\n                return current.type === 'image' ? 'toggleControls' : false;\r\n            },\r\n            clickSlide : function( current, event ) {\r\n                return current.type === 'image' ? 'toggleControls' : 'close';\r\n            },\r\n            dblclickContent : function( current, event ) {\r\n                return current.type === 'image' ? 'zoom' : false;\r\n            },\r\n            dblclickSlide : function( current, event ) {\r\n                return current.type === 'image' ? 'zoom' : false;\r\n            }\r\n        },\r\n\r\n\r\n        // Internationalization\r\n        // ============\r\n\r\n        lang : 'en',\r\n        i18n : {\r\n            'en' : {\r\n                CLOSE       : 'Close',\r\n                NEXT        : 'Next',\r\n                PREV        : 'Previous',\r\n                ERROR       : 'The requested content cannot be loaded. <br/> Please try again later.',\r\n                PLAY_START  : 'Start slideshow',\r\n                PLAY_STOP   : 'Pause slideshow',\r\n                FULL_SCREEN : 'Full screen',\r\n                THUMBS      : 'Thumbnails',\r\n                DOWNLOAD    : 'Download',\r\n                SHARE       : 'Share',\r\n                ZOOM        : 'Zoom'\r\n            },\r\n            'de' : {\r\n                CLOSE       : 'Schliessen',\r\n                NEXT        : 'Weiter',\r\n                PREV        : 'Zurück',\r\n                ERROR       : 'Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es später nochmal.',\r\n                PLAY_START  : 'Diaschau starten',\r\n                PLAY_STOP   : 'Diaschau beenden',\r\n                FULL_SCREEN : 'Vollbild',\r\n                THUMBS      : 'Vorschaubilder',\r\n                DOWNLOAD    : 'Herunterladen',\r\n                SHARE       : 'Teilen',\r\n                ZOOM        : 'Maßstab'\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    // Few useful variables and methods\r\n    // ================================\r\n\r\n    var $W = $(window);\r\n    var $D = $(document);\r\n\r\n    var called = 0;\r\n\r\n\r\n    // Check if an object is a jQuery object and not a native JavaScript object\r\n    // ========================================================================\r\n\r\n    var isQuery = function ( obj ) {\r\n        return obj && obj.hasOwnProperty && obj instanceof $;\r\n    };\r\n\r\n\r\n    // Handle multiple browsers for \"requestAnimationFrame\" and \"cancelAnimationFrame\"\r\n    // ===============================================================================\r\n\r\n    var requestAFrame = (function () {\r\n        return window.requestAnimationFrame ||\r\n                window.webkitRequestAnimationFrame ||\r\n                window.mozRequestAnimationFrame ||\r\n                window.oRequestAnimationFrame ||\r\n                // if all else fails, use setTimeout\r\n                function (callback) {\r\n                    return window.setTimeout(callback, 1000 / 60);\r\n                };\r\n    })();\r\n\r\n\r\n    // Detect the supported transition-end event property name\r\n    // =======================================================\r\n\r\n    var transitionEnd = (function () {\r\n        var t, el = document.createElement(\"fakeelement\");\r\n\r\n        var transitions = {\r\n            \"transition\"      : \"transitionend\",\r\n            \"OTransition\"     : \"oTransitionEnd\",\r\n            \"MozTransition\"   : \"transitionend\",\r\n            \"WebkitTransition\": \"webkitTransitionEnd\"\r\n        };\r\n\r\n        for (t in transitions) {\r\n            if (el.style[t] !== undefined){\r\n                return transitions[t];\r\n            }\r\n        }\r\n\r\n        return 'transitionend';\r\n    })();\r\n\r\n\r\n    // Force redraw on an element.\r\n    // This helps in cases where the browser doesn't redraw an updated element properly.\r\n    // =================================================================================\r\n\r\n    var forceRedraw = function( $el ) {\r\n        return ( $el && $el.length && $el[0].offsetHeight );\r\n    };\r\n\r\n\r\n    // Class definition\r\n    // ================\r\n\r\n    var FancyBox = function( content, opts, index ) {\r\n        var self = this;\r\n\r\n        self.opts = $.extend( true, { index : index }, $.fancybox.defaults, opts || {} );\r\n\r\n        if ( $.fancybox.isMobile ) {\r\n            self.opts = $.extend( true, {}, self.opts, self.opts.mobile );\r\n        }\r\n\r\n        // Exclude buttons option from deep merging\r\n        if ( opts && $.isArray( opts.buttons ) ) {\r\n            self.opts.buttons = opts.buttons;\r\n        }\r\n\r\n        self.id    = self.opts.id || ++called;\r\n        self.group = [];\r\n\r\n        self.currIndex = parseInt( self.opts.index, 10 ) || 0;\r\n        self.prevIndex = null;\r\n\r\n        self.prevPos = null;\r\n        self.currPos = 0;\r\n\r\n        self.firstRun = null;\r\n\r\n        // Create group elements from original item collection\r\n        self.createGroup( content );\r\n\r\n        if ( !self.group.length ) {\r\n            return;\r\n        }\r\n\r\n        // Save last active element and current scroll position\r\n        self.$lastFocus = $(document.activeElement).blur();\r\n\r\n        // Collection of gallery objects\r\n        self.slides = {};\r\n\r\n        self.init();\r\n    };\r\n\r\n    $.extend(FancyBox.prototype, {\r\n\r\n        // Create DOM structure\r\n        // ====================\r\n\r\n        init : function() {\r\n            var self = this,\r\n                firstItem      = self.group[ self.currIndex ],\r\n                firstItemOpts  = firstItem.opts,\r\n                scrollbarWidth = $.fancybox.scrollbarWidth,\r\n                $scrollDiv,\r\n                $container,\r\n                buttonStr;\r\n\r\n            self.scrollTop  = $D.scrollTop();\r\n            self.scrollLeft = $D.scrollLeft();\r\n\r\n\r\n            // Hide scrollbars\r\n            // ===============\r\n\r\n            if ( !$.fancybox.getInstance() ) {\r\n\r\n                $( 'body' ).addClass( 'fancybox-active' );\r\n\r\n                // iOS hack\r\n                if ( /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream ) {\r\n\r\n                    // iOS has problems for input elements inside fixed containers,\r\n                    // the workaround is to apply `position: fixed` to `<body>` element,\r\n                    // unfortunately, this makes it lose the scrollbars and forces address bar to appear.\r\n\r\n                    if ( firstItem.type !== 'image' ) {\r\n                        $( 'body' ).css( 'top', $( 'body' ).scrollTop() * -1 ).addClass( 'fancybox-iosfix' );\r\n                    }\r\n\r\n                } else if ( !$.fancybox.isMobile && document.body.scrollHeight > window.innerHeight ) {\r\n\r\n                    if ( scrollbarWidth === undefined ) {\r\n                        $scrollDiv = $('<div style=\"width:50px;height:50px;overflow:scroll;\" />').appendTo( 'body' );\r\n\r\n                        scrollbarWidth = $.fancybox.scrollbarWidth = $scrollDiv[0].offsetWidth - $scrollDiv[0].clientWidth;\r\n\r\n                        $scrollDiv.remove();\r\n                    }\r\n\r\n                    $( 'head' ).append( '<style id=\"fancybox-style-noscroll\" type=\"text/css\">.compensate-for-scrollbar { margin-right: ' + scrollbarWidth + 'px; }</style>' );\r\n                    $( 'body' ).addClass( 'compensate-for-scrollbar' );\r\n                }\r\n            }\r\n\r\n\r\n            // Build html markup and set references\r\n            // ====================================\r\n\r\n            // Build html code for buttons and insert into main template\r\n            buttonStr = '';\r\n\r\n            $.each( firstItemOpts.buttons, function( index, value ) {\r\n                buttonStr += ( firstItemOpts.btnTpl[ value ] || '' );\r\n            });\r\n\r\n            // Create markup from base template, it will be initially hidden to\r\n            // avoid unnecessary work like painting while initializing is not complete\r\n            $container = $(\r\n                self.translate( self,\r\n                    firstItemOpts.baseTpl\r\n                        .replace( '\\{\\{buttons\\}\\}', buttonStr )\r\n                        .replace( '\\{\\{arrows\\}\\}', firstItemOpts.btnTpl.arrowLeft + firstItemOpts.btnTpl.arrowRight )\r\n                )\r\n            )\r\n                .attr( 'id', 'fancybox-container-' + self.id )\r\n                .addClass( 'fancybox-is-hidden' )\r\n                .addClass( firstItemOpts.baseClass )\r\n                .data( 'FancyBox', self )\r\n                .appendTo( firstItemOpts.parentEl );\r\n\r\n            // Create object holding references to jQuery wrapped nodes\r\n            self.$refs = {\r\n                container : $container\r\n            };\r\n\r\n            [ 'bg', 'inner', 'infobar', 'toolbar', 'stage', 'caption', 'navigation' ].forEach(function(item) {\r\n                self.$refs[ item ] = $container.find( '.fancybox-' + item );\r\n            });\r\n\r\n            self.trigger( 'onInit' );\r\n\r\n            // Enable events, deactive previous instances\r\n            self.activate();\r\n\r\n            // Build slides, load and reveal content\r\n            self.jumpTo( self.currIndex );\r\n        },\r\n\r\n\r\n        // Simple i18n support - replaces object keys found in template\r\n        // with corresponding values\r\n        // ============================================================\r\n\r\n        translate : function( obj, str ) {\r\n            var arr = obj.opts.i18n[ obj.opts.lang ];\r\n\r\n            return str.replace(/\\{\\{(\\w+)\\}\\}/g, function(match, n) {\r\n                var value = arr[n];\r\n\r\n                if ( value === undefined ) {\r\n                    return match;\r\n                }\r\n\r\n                return value;\r\n            });\r\n        },\r\n\r\n        // Create array of gally item objects\r\n        // Check if each object has valid type and content\r\n        // ===============================================\r\n\r\n        createGroup : function ( content ) {\r\n            var self  = this;\r\n            var items = $.makeArray( content );\r\n\r\n            $.each(items, function( i, item ) {\r\n                var obj  = {},\r\n                    opts = {},\r\n                    $item,\r\n                    type,\r\n                    found,\r\n                    src,\r\n                    srcParts;\r\n\r\n                // Step 1 - Make sure we have an object\r\n                // ====================================\r\n\r\n                if ( $.isPlainObject( item ) ) {\r\n\r\n                    // We probably have manual usage here, something like\r\n                    // $.fancybox.open( [ { src : \"image.jpg\", type : \"image\" } ] )\r\n\r\n                    obj  = item;\r\n                    opts = item.opts || item;\r\n\r\n                } else if ( $.type( item ) === 'object' && $( item ).length ) {\r\n\r\n                    // Here we probably have jQuery collection returned by some selector\r\n                    $item = $( item );\r\n\r\n                    opts = $item.data();\r\n                    opts = $.extend( {}, opts, opts.options || {} );\r\n\r\n                    // Here we store clicked element\r\n                    opts.$orig = $item;\r\n\r\n                    obj.src = opts.src || $item.attr( 'href' );\r\n\r\n                    // Assume that simple syntax is used, for example:\r\n                    //   `$.fancybox.open( $(\"#test\"), {} );`\r\n                    if ( !obj.type && !obj.src ) {\r\n                        obj.type = 'inline';\r\n                        obj.src  = item;\r\n                    }\r\n\r\n                } else {\r\n\r\n                    // Assume we have a simple html code, for example:\r\n                    //   $.fancybox.open( '<div><h1>Hi!</h1></div>' );\r\n\r\n                    obj = {\r\n                        type : 'html',\r\n                        src  : item + ''\r\n                    };\r\n\r\n                }\r\n\r\n                // Each gallery object has full collection of options\r\n                obj.opts = $.extend( true, {}, self.opts, opts );\r\n\r\n                // Do not merge buttons array\r\n                if ( $.isArray( opts.buttons ) ) {\r\n                    obj.opts.buttons = opts.buttons;\r\n                }\r\n\r\n\r\n                // Step 2 - Make sure we have content type, if not - try to guess\r\n                // ==============================================================\r\n\r\n                type = obj.type || obj.opts.type;\r\n                src  = obj.src || '';\r\n\r\n                if ( !type && src ) {\r\n                    if ( src.match(/(^data:image\\/[a-z0-9+\\/=]*,)|(\\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\\?|#).*)?$)/i) ) {\r\n                        type = 'image';\r\n\r\n                    } else if ( src.match(/\\.(pdf)((\\?|#).*)?$/i) ) {\r\n                        type = 'pdf';\r\n\r\n                    } else if ( found = src.match(/\\.(mp4|mov|ogv)((\\?|#).*)?$/i) ) {\r\n                        type = 'video';\r\n\r\n                        if ( !obj.opts.videoFormat ) {\r\n                            obj.opts.videoFormat = 'video/' + ( found[1] === 'ogv' ? 'ogg' : found[1] );\r\n                        }\r\n\r\n                    } else if ( src.charAt(0) === '#' ) {\r\n                        type = 'inline';\r\n                    }\r\n                }\r\n\r\n                if ( type ) {\r\n                    obj.type = type;\r\n\r\n                } else {\r\n                    self.trigger( 'objectNeedsType', obj );\r\n                }\r\n\r\n\r\n                // Step 3 - Some adjustments\r\n                // =========================\r\n\r\n                obj.index = self.group.length;\r\n\r\n                // Check if $orig and $thumb objects exist\r\n                if ( obj.opts.$orig && !obj.opts.$orig.length ) {\r\n                    delete obj.opts.$orig;\r\n                }\r\n\r\n                if ( !obj.opts.$thumb && obj.opts.$orig ) {\r\n                    obj.opts.$thumb = obj.opts.$orig.find( 'img:first' );\r\n                }\r\n\r\n                if ( obj.opts.$thumb && !obj.opts.$thumb.length ) {\r\n                    delete obj.opts.$thumb;\r\n                }\r\n\r\n                // \"caption\" is a \"special\" option, it can be used to customize caption per gallery item ..\r\n                if ( $.type( obj.opts.caption ) === 'function' ) {\r\n                    obj.opts.caption = obj.opts.caption.apply( item, [ self, obj ] );\r\n                }\r\n\r\n                if ( $.type( self.opts.caption ) === 'function' ) {\r\n                    obj.opts.caption = self.opts.caption.apply( item, [ self, obj ] );\r\n                }\r\n\r\n                // Make sure we have caption as a string or jQuery object\r\n                if ( !( obj.opts.caption instanceof $ ) ) {\r\n                    obj.opts.caption = obj.opts.caption === undefined ? '' : obj.opts.caption + '';\r\n                }\r\n\r\n                // Check if url contains \"filter\" used to filter the content\r\n                // Example: \"ajax.html #something\"\r\n                if ( type === 'ajax' ) {\r\n                    srcParts = src.split(/\\s+/, 2);\r\n\r\n                    if ( srcParts.length > 1 ) {\r\n                        obj.src = srcParts.shift();\r\n\r\n                        obj.opts.filter = srcParts.shift();\r\n                    }\r\n                }\r\n\r\n                if ( obj.opts.smallBtn == 'auto' ) {\r\n\r\n                    if ( $.inArray( type, ['html', 'inline', 'ajax'] ) > -1 ) {\r\n                        obj.opts.toolbar  = false;\r\n                        obj.opts.smallBtn = true;\r\n\r\n                    } else {\r\n                        obj.opts.smallBtn = false;\r\n                    }\r\n\r\n                }\r\n\r\n                // If the type is \"pdf\", then simply load file into iframe\r\n                if ( type === 'pdf' ) {\r\n                    obj.type = 'iframe';\r\n\r\n                    obj.opts.iframe.preload = false;\r\n                }\r\n\r\n                // Hide all buttons and disable interactivity for modal items\r\n                if ( obj.opts.modal ) {\r\n\r\n                    obj.opts = $.extend(true, obj.opts, {\r\n                        // Remove buttons\r\n                        infobar : 0,\r\n                        toolbar : 0,\r\n\r\n                        smallBtn : 0,\r\n\r\n                        // Disable keyboard navigation\r\n                        keyboard : 0,\r\n\r\n                        // Disable some modules\r\n                        slideShow  : 0,\r\n                        fullScreen : 0,\r\n                        thumbs     : 0,\r\n                        touch      : 0,\r\n\r\n                        // Disable click event handlers\r\n                        clickContent    : false,\r\n                        clickSlide      : false,\r\n                        clickOutside    : false,\r\n                        dblclickContent : false,\r\n                        dblclickSlide   : false,\r\n                        dblclickOutside : false\r\n                    });\r\n\r\n                }\r\n\r\n                // Step 4 - Add processed object to group\r\n                // ======================================\r\n\r\n                self.group.push( obj );\r\n\r\n            });\r\n\r\n        },\r\n\r\n\r\n        // Attach an event handler functions for:\r\n        //   - navigation buttons\r\n        //   - browser scrolling, resizing;\r\n        //   - focusing\r\n        //   - keyboard\r\n        //   - detect idle\r\n        // ======================================\r\n\r\n        addEvents : function() {\r\n            var self = this;\r\n\r\n            self.removeEvents();\r\n\r\n            // Make navigation elements clickable\r\n            self.$refs.container.on('click.fb-close', '[data-fancybox-close]', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                self.close( e );\r\n\r\n            }).on( 'click.fb-prev touchend.fb-prev', '[data-fancybox-prev]', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                self.previous();\r\n\r\n            }).on( 'click.fb-next touchend.fb-next', '[data-fancybox-next]', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                self.next();\r\n\r\n            }).on( 'click.fb', '[data-fancybox-zoom]', function(e) {\r\n                // Click handler for zoom button\r\n                self[ self.isScaledDown() ? 'scaleToActual' : 'scaleToFit' ]();\r\n            });\r\n\r\n\r\n            // Handle page scrolling and browser resizing\r\n            $W.on('orientationchange.fb resize.fb', function(e) {\r\n\r\n                if ( e && e.originalEvent && e.originalEvent.type === \"resize\" ) {\r\n\r\n                    requestAFrame(function() {\r\n                        self.update();\r\n                    });\r\n\r\n                } else {\r\n\r\n                    self.$refs.stage.hide();\r\n\r\n                    setTimeout(function() {\r\n                        self.$refs.stage.show();\r\n\r\n                        self.update();\r\n                    }, 600);\r\n\r\n                }\r\n\r\n            });\r\n\r\n            // Trap keyboard focus inside of the modal, so the user does not accidentally tab outside of the modal\r\n            // (a.k.a. \"escaping the modal\")\r\n            $D.on('focusin.fb', function(e) {\r\n                var instance = $.fancybox ? $.fancybox.getInstance() : null;\r\n\r\n                if ( instance.isClosing || !instance.current || !instance.current.opts.trapFocus || $( e.target ).hasClass( 'fancybox-container' ) || $( e.target ).is( document ) ) {\r\n                    return;\r\n                }\r\n\r\n                if ( instance && $( e.target ).css( 'position' ) !== 'fixed' && !instance.$refs.container.has( e.target ).length ) {\r\n                    e.stopPropagation();\r\n\r\n                    instance.focus();\r\n\r\n                    // Sometimes page gets scrolled, set it back\r\n                    $W.scrollTop( self.scrollTop ).scrollLeft( self.scrollLeft );\r\n                }\r\n            });\r\n\r\n\r\n            // Enable keyboard navigation\r\n            $D.on('keydown.fb', function (e) {\r\n                var current = self.current,\r\n                    keycode = e.keyCode || e.which;\r\n\r\n                if ( !current || !current.opts.keyboard ) {\r\n                    return;\r\n                }\r\n\r\n                if ( $(e.target).is('input') || $(e.target).is('textarea') ) {\r\n                    return;\r\n                }\r\n\r\n                // Backspace and Esc keys\r\n                if ( keycode === 8 || keycode === 27 ) {\r\n                    e.preventDefault();\r\n\r\n                    self.close( e );\r\n\r\n                    return;\r\n                }\r\n\r\n                // Left arrow and Up arrow\r\n                if ( keycode === 37 || keycode === 38 ) {\r\n                    e.preventDefault();\r\n\r\n                    self.previous();\r\n\r\n                    return;\r\n                }\r\n\r\n                // Righ arrow and Down arrow\r\n                if ( keycode === 39 || keycode === 40 ) {\r\n                    e.preventDefault();\r\n\r\n                    self.next();\r\n\r\n                    return;\r\n                }\r\n\r\n                self.trigger('afterKeydown', e, keycode);\r\n            });\r\n\r\n\r\n            // Hide controls after some inactivity period\r\n            if ( self.group[ self.currIndex ].opts.idleTime ) {\r\n                self.idleSecondsCounter = 0;\r\n\r\n                $D.on('mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle', function(e) {\r\n                    self.idleSecondsCounter = 0;\r\n\r\n                    if ( self.isIdle ) {\r\n                        self.showControls();\r\n                    }\r\n\r\n                    self.isIdle = false;\r\n                });\r\n\r\n                self.idleInterval = window.setInterval(function() {\r\n                    self.idleSecondsCounter++;\r\n\r\n                    if ( self.idleSecondsCounter >= self.group[ self.currIndex ].opts.idleTime && !self.isDragging ) {\r\n                        self.isIdle = true;\r\n                        self.idleSecondsCounter = 0;\r\n\r\n                        self.hideControls();\r\n                    }\r\n\r\n                }, 1000);\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Remove events added by the core\r\n        // ===============================\r\n\r\n        removeEvents : function() {\r\n            var self = this;\r\n\r\n            $W.off( 'orientationchange.fb resize.fb' );\r\n            $D.off( 'focusin.fb keydown.fb .fb-idle' );\r\n\r\n            this.$refs.container.off( '.fb-close .fb-prev .fb-next' );\r\n\r\n            if ( self.idleInterval ) {\r\n                window.clearInterval( self.idleInterval );\r\n\r\n                self.idleInterval = null;\r\n            }\r\n        },\r\n\r\n\r\n        // Change to previous gallery item\r\n        // ===============================\r\n\r\n        previous : function( duration ) {\r\n            return this.jumpTo( this.currPos - 1, duration );\r\n        },\r\n\r\n\r\n        // Change to next gallery item\r\n        // ===========================\r\n\r\n        next : function( duration ) {\r\n            return this.jumpTo( this.currPos + 1, duration );\r\n        },\r\n\r\n\r\n        // Switch to selected gallery item\r\n        // ===============================\r\n\r\n        jumpTo : function ( pos, duration, slide ) {\r\n            var self = this,\r\n                firstRun,\r\n                loop,\r\n                current,\r\n                previous,\r\n                canvasWidth,\r\n                currentPos,\r\n                transitionProps;\r\n\r\n            var groupLen = self.group.length;\r\n\r\n            if ( self.isDragging || self.isClosing || ( self.isAnimating && self.firstRun ) ) {\r\n                return;\r\n            }\r\n\r\n            pos  = parseInt( pos, 10 );\r\n            loop = self.current ? self.current.opts.loop : self.opts.loop;\r\n\r\n            if ( !loop && ( pos < 0 || pos >= groupLen ) ) {\r\n                return false;\r\n            }\r\n\r\n            firstRun = self.firstRun = ( self.firstRun === null );\r\n\r\n            if ( groupLen < 2 && !firstRun && !!self.isDragging ) {\r\n                return;\r\n            }\r\n\r\n            previous = self.current;\r\n\r\n            self.prevIndex = self.currIndex;\r\n            self.prevPos   = self.currPos;\r\n\r\n            // Create slides\r\n            current = self.createSlide( pos );\r\n\r\n            if ( groupLen > 1 ) {\r\n                if ( loop || current.index > 0 ) {\r\n                    self.createSlide( pos - 1 );\r\n                }\r\n\r\n                if ( loop || current.index < groupLen - 1 ) {\r\n                    self.createSlide( pos + 1 );\r\n                }\r\n            }\r\n\r\n            self.current   = current;\r\n            self.currIndex = current.index;\r\n            self.currPos   = current.pos;\r\n\r\n            self.trigger( 'beforeShow', firstRun );\r\n\r\n            self.updateControls();\r\n\r\n            currentPos = $.fancybox.getTranslate( current.$slide );\r\n\r\n            current.isMoved        = ( currentPos.left !== 0 || currentPos.top !== 0 ) && !current.$slide.hasClass( 'fancybox-animated' );\r\n            current.forcedDuration = undefined;\r\n\r\n            if ( $.isNumeric( duration ) ) {\r\n                current.forcedDuration = duration;\r\n            } else {\r\n                duration = current.opts[ firstRun ? 'animationDuration' : 'transitionDuration' ];\r\n            }\r\n\r\n            duration = parseInt( duration, 10 );\r\n\r\n            // Fresh start - reveal container, current slide and start loading content\r\n            if ( firstRun ) {\r\n\r\n                if ( current.opts.animationEffect && duration ) {\r\n                    self.$refs.container.css( 'transition-duration', duration + 'ms' );\r\n                }\r\n\r\n                self.$refs.container.removeClass( 'fancybox-is-hidden' );\r\n\r\n                forceRedraw( self.$refs.container );\r\n\r\n                self.$refs.container.addClass( 'fancybox-is-open' );\r\n\r\n                // Make first slide visible (to display loading icon, if needed)\r\n                current.$slide.addClass( 'fancybox-slide--current' );\r\n\r\n                self.loadSlide( current );\r\n\r\n                self.preload( 'image' );\r\n\r\n                return;\r\n            }\r\n\r\n            // Clean up\r\n            $.each(self.slides, function( index, slide ) {\r\n                $.fancybox.stop( slide.$slide );\r\n            });\r\n\r\n            // Make current that slide is visible even if content is still loading\r\n            current.$slide.removeClass( 'fancybox-slide--next fancybox-slide--previous' ).addClass( 'fancybox-slide--current' );\r\n\r\n            // If slides have been dragged, animate them to correct position\r\n            if ( current.isMoved ) {\r\n                canvasWidth = Math.round( current.$slide.width() );\r\n\r\n                $.each(self.slides, function( index, slide ) {\r\n                    var pos = slide.pos - current.pos;\r\n\r\n                    $.fancybox.animate( slide.$slide, {\r\n                        top  : 0,\r\n                        left : ( pos * canvasWidth ) + ( pos * slide.opts.gutter )\r\n                    }, duration, function() {\r\n\r\n                        slide.$slide.removeAttr('style').removeClass( 'fancybox-slide--next fancybox-slide--previous' );\r\n\r\n                        if ( slide.pos === self.currPos ) {\r\n                            current.isMoved = false;\r\n\r\n                            self.complete();\r\n                        }\r\n                    });\r\n                });\r\n\r\n            } else {\r\n                self.$refs.stage.children().removeAttr( 'style' );\r\n            }\r\n\r\n            // Start transition that reveals current content\r\n            // or wait when it will be loaded\r\n\r\n            if ( current.isLoaded ) {\r\n                self.revealContent( current );\r\n\r\n            } else {\r\n                self.loadSlide( current );\r\n            }\r\n\r\n            self.preload( 'image' );\r\n\r\n            if ( previous.pos === current.pos ) {\r\n                return;\r\n            }\r\n\r\n            // Handle previous slide\r\n            // =====================\r\n\r\n            transitionProps = 'fancybox-slide--' + ( previous.pos > current.pos ? 'next' : 'previous' );\r\n\r\n            previous.$slide.removeClass( 'fancybox-slide--complete fancybox-slide--current fancybox-slide--next fancybox-slide--previous' );\r\n\r\n            previous.isComplete = false;\r\n\r\n            if ( !duration || ( !current.isMoved && !current.opts.transitionEffect ) ) {\r\n                return;\r\n            }\r\n\r\n            if ( current.isMoved ) {\r\n                previous.$slide.addClass( transitionProps );\r\n\r\n            } else {\r\n\r\n                transitionProps = 'fancybox-animated ' + transitionProps + ' fancybox-fx-' + current.opts.transitionEffect;\r\n\r\n                $.fancybox.animate( previous.$slide, transitionProps, duration, function() {\r\n                    previous.$slide.removeClass( transitionProps ).removeAttr( 'style' );\r\n                });\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Create new \"slide\" element\r\n        // These are gallery items  that are actually added to DOM\r\n        // =======================================================\r\n\r\n        createSlide : function( pos ) {\r\n\r\n            var self = this;\r\n            var $slide;\r\n            var index;\r\n\r\n            index = pos % self.group.length;\r\n            index = index < 0 ? self.group.length + index : index;\r\n\r\n            if ( !self.slides[ pos ] && self.group[ index ] ) {\r\n                $slide = $('<div class=\"fancybox-slide\"></div>').appendTo( self.$refs.stage );\r\n\r\n                self.slides[ pos ] = $.extend( true, {}, self.group[ index ], {\r\n                    pos      : pos,\r\n                    $slide   : $slide,\r\n                    isLoaded : false,\r\n                });\r\n\r\n                self.updateSlide( self.slides[ pos ] );\r\n            }\r\n\r\n            return self.slides[ pos ];\r\n        },\r\n\r\n\r\n        // Scale image to the actual size of the image\r\n        // ===========================================\r\n\r\n        scaleToActual : function( x, y, duration ) {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n\r\n            var imgPos, posX, posY, scaleX, scaleY;\r\n\r\n            var canvasWidth  = parseInt( current.$slide.width(), 10 );\r\n            var canvasHeight = parseInt( current.$slide.height(), 10 );\r\n\r\n            var newImgWidth  = current.width;\r\n            var newImgHeight = current.height;\r\n\r\n            if ( !( current.type == 'image' && !current.hasError) || !$what || self.isAnimating ) {\r\n                return;\r\n            }\r\n\r\n            $.fancybox.stop( $what );\r\n\r\n            self.isAnimating = true;\r\n\r\n            x = x === undefined ? canvasWidth  * 0.5  : x;\r\n            y = y === undefined ? canvasHeight * 0.5  : y;\r\n\r\n            imgPos = $.fancybox.getTranslate( $what );\r\n\r\n            scaleX  = newImgWidth  / imgPos.width;\r\n            scaleY  = newImgHeight / imgPos.height;\r\n\r\n            // Get center position for original image\r\n            posX = ( canvasWidth * 0.5  - newImgWidth * 0.5 );\r\n            posY = ( canvasHeight * 0.5 - newImgHeight * 0.5 );\r\n\r\n            // Make sure image does not move away from edges\r\n            if ( newImgWidth > canvasWidth ) {\r\n                posX = imgPos.left * scaleX - ( ( x * scaleX ) - x );\r\n\r\n                if ( posX > 0 ) {\r\n                    posX = 0;\r\n                }\r\n\r\n                if ( posX <  canvasWidth - newImgWidth ) {\r\n                    posX = canvasWidth - newImgWidth;\r\n                }\r\n            }\r\n\r\n            if ( newImgHeight > canvasHeight) {\r\n                posY = imgPos.top  * scaleY - ( ( y * scaleY ) - y );\r\n\r\n                if ( posY > 0 ) {\r\n                    posY = 0;\r\n                }\r\n\r\n                if ( posY <  canvasHeight - newImgHeight ) {\r\n                    posY = canvasHeight - newImgHeight;\r\n                }\r\n            }\r\n\r\n            self.updateCursor( newImgWidth, newImgHeight );\r\n\r\n            $.fancybox.animate( $what, {\r\n                top    : posY,\r\n                left   : posX,\r\n                scaleX : scaleX,\r\n                scaleY : scaleY\r\n            }, duration || 330, function() {\r\n                self.isAnimating = false;\r\n            });\r\n\r\n            // Stop slideshow\r\n            if ( self.SlideShow && self.SlideShow.isActive ) {\r\n                self.SlideShow.stop();\r\n            }\r\n        },\r\n\r\n\r\n        // Scale image to fit inside parent element\r\n        // ========================================\r\n\r\n        scaleToFit : function( duration ) {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n            var end;\r\n\r\n            if ( !( current.type == 'image' && !current.hasError) || !$what || self.isAnimating ) {\r\n                return;\r\n            }\r\n\r\n            $.fancybox.stop( $what );\r\n\r\n            self.isAnimating = true;\r\n\r\n            end = self.getFitPos( current );\r\n\r\n            self.updateCursor( end.width, end.height );\r\n\r\n            $.fancybox.animate( $what, {\r\n                top    : end.top,\r\n                left   : end.left,\r\n                scaleX : end.width  / $what.width(),\r\n                scaleY : end.height / $what.height()\r\n            }, duration || 330, function() {\r\n                self.isAnimating = false;\r\n            });\r\n\r\n        },\r\n\r\n        // Calculate image size to fit inside viewport\r\n        // ===========================================\r\n\r\n        getFitPos : function( slide ) {\r\n            var self  = this;\r\n            var $what = slide.$content;\r\n\r\n            var imgWidth  = slide.width;\r\n            var imgHeight = slide.height;\r\n\r\n            var margin = slide.opts.margin;\r\n\r\n            var canvasWidth, canvasHeight, minRatio, width, height;\r\n\r\n            if ( !$what || !$what.length || ( !imgWidth && !imgHeight) ) {\r\n                return false;\r\n            }\r\n\r\n            // Convert \"margin to CSS style: [ top, right, bottom, left ]\r\n            if ( $.type( margin ) === \"number\" ) {\r\n                margin = [ margin, margin ];\r\n            }\r\n\r\n            if ( margin.length == 2 ) {\r\n                margin = [ margin[0], margin[1], margin[0], margin[1] ];\r\n            }\r\n\r\n            // We can not use $slide width here, because it can have different diemensions while in transiton\r\n            canvasWidth  = parseInt( self.$refs.stage.width(), 10 )  - ( margin[ 1 ] + margin[ 3 ] );\r\n            canvasHeight = parseInt( self.$refs.stage.height(), 10 ) - ( margin[ 0 ] + margin[ 2 ] );\r\n\r\n            minRatio = Math.min(1, canvasWidth / imgWidth, canvasHeight / imgHeight );\r\n\r\n            width  = Math.floor( minRatio * imgWidth );\r\n            height = Math.floor( minRatio * imgHeight );\r\n\r\n            // Use floor rounding to make sure it really fits\r\n            return {\r\n                top    : Math.floor( ( canvasHeight - height ) * 0.5 ) + margin[ 0 ],\r\n                left   : Math.floor( ( canvasWidth  - width )  * 0.5 ) + margin[ 3 ],\r\n                width  : width,\r\n                height : height\r\n            };\r\n\r\n        },\r\n\r\n\r\n        // Update content size and position for all slides\r\n        // ==============================================\r\n\r\n        update : function() {\r\n            var self = this;\r\n\r\n            $.each( self.slides, function( key, slide ) {\r\n                self.updateSlide( slide );\r\n            });\r\n        },\r\n\r\n\r\n        // Update slide content position and size\r\n        // ======================================\r\n\r\n        updateSlide : function( slide, duration ) {\r\n            var self  = this,\r\n                $what = slide && slide.$content;\r\n\r\n            if ( $what && ( slide.width || slide.height ) ) {\r\n                self.isAnimating = false;\r\n\r\n                $.fancybox.stop( $what );\r\n\r\n                $.fancybox.setTranslate( $what, self.getFitPos( slide ) );\r\n\r\n                if ( slide.pos === self.currPos ) {\r\n                    self.updateCursor();\r\n                }\r\n            }\r\n\r\n            slide.$slide.trigger( 'refresh' );\r\n\r\n            self.trigger( 'onUpdate', slide );\r\n\r\n        },\r\n\r\n\r\n        // Horizontally center slide\r\n        // =========================\r\n\r\n        centerSlide : function( slide, duration ) {\r\n            var self  = this, canvasWidth, pos;\r\n\r\n            if ( self.current ) {\r\n                canvasWidth = Math.round( slide.$slide.width() );\r\n                pos = slide.pos - self.current.pos;\r\n\r\n                $.fancybox.animate( slide.$slide, {\r\n                    top  : 0,\r\n                    left : ( pos * canvasWidth ) + ( pos * slide.opts.gutter ),\r\n                    opacity : 1\r\n                }, duration === undefined ? 0 : duration, null, false);\r\n            }\r\n        },\r\n\r\n\r\n        // Update cursor style depending if content can be zoomed\r\n        // ======================================================\r\n\r\n        updateCursor : function( nextWidth, nextHeight ) {\r\n\r\n            var self = this;\r\n            var isScaledDown;\r\n\r\n            var $container = self.$refs.container.removeClass( 'fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-drag fancybox-can-zoomOut' );\r\n\r\n            if ( !self.current || self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            if ( self.isZoomable() ) {\r\n\r\n                $container.addClass( 'fancybox-is-zoomable' );\r\n\r\n                if ( nextWidth !== undefined && nextHeight !== undefined ) {\r\n                    isScaledDown = nextWidth < self.current.width && nextHeight < self.current.height;\r\n\r\n                } else {\r\n                    isScaledDown = self.isScaledDown();\r\n                }\r\n\r\n                if ( isScaledDown ) {\r\n\r\n                    // If image is scaled down, then, obviously, it can be zoomed to full size\r\n                    $container.addClass( 'fancybox-can-zoomIn' );\r\n\r\n                } else {\r\n\r\n                    if ( self.current.opts.touch ) {\r\n\r\n                        // If image size ir largen than available available and touch module is not disable,\r\n                        // then user can do panning\r\n                        $container.addClass( 'fancybox-can-drag' );\r\n\r\n                    } else {\r\n                        $container.addClass( 'fancybox-can-zoomOut' );\r\n                    }\r\n\r\n                }\r\n\r\n            } else if ( self.current.opts.touch ) {\r\n                $container.addClass( 'fancybox-can-drag' );\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Check if current slide is zoomable\r\n        // ==================================\r\n\r\n        isZoomable : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var fitPos;\r\n\r\n            if ( !current || self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            // Assume that slide is zoomable if\r\n            //   - image is loaded successfuly\r\n            //   - click action is \"zoom\"\r\n            //   - actual size of the image is smaller than available area\r\n            if ( current.type === 'image' && current.isLoaded && !current.hasError &&\r\n                ( current.opts.clickContent === 'zoom' || ( $.isFunction( current.opts.clickContent ) && current.opts.clickContent( current ) ===  \"zoom\" ) )\r\n            ) {\r\n\r\n                fitPos = self.getFitPos( current );\r\n\r\n                if ( current.width > fitPos.width || current.height > fitPos.height ) {\r\n                    return true;\r\n                }\r\n\r\n            }\r\n\r\n            return false;\r\n\r\n        },\r\n\r\n\r\n        // Check if current image dimensions are smaller than actual\r\n        // =========================================================\r\n\r\n        isScaledDown : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n\r\n            var rez = false;\r\n\r\n            if ( $what ) {\r\n                rez = $.fancybox.getTranslate( $what );\r\n                rez = rez.width < current.width || rez.height < current.height;\r\n            }\r\n\r\n            return rez;\r\n\r\n        },\r\n\r\n\r\n        // Check if image dimensions exceed parent element\r\n        // ===============================================\r\n\r\n        canPan : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n\r\n            var rez = false;\r\n\r\n            if ( $what ) {\r\n                rez = self.getFitPos( current );\r\n                rez = Math.abs( $what.width() - rez.width ) > 1  || Math.abs( $what.height() - rez.height ) > 1;\r\n            }\r\n\r\n            return rez;\r\n\r\n        },\r\n\r\n\r\n        // Load content into the slide\r\n        // ===========================\r\n\r\n        loadSlide : function( slide ) {\r\n\r\n            var self = this, type, $slide;\r\n            var ajaxLoad;\r\n\r\n            if ( slide.isLoading ) {\r\n                return;\r\n            }\r\n\r\n            if ( slide.isLoaded ) {\r\n                return;\r\n            }\r\n\r\n            slide.isLoading = true;\r\n\r\n            self.trigger( 'beforeLoad', slide );\r\n\r\n            type   = slide.type;\r\n            $slide = slide.$slide;\r\n\r\n            $slide\r\n                .off( 'refresh' )\r\n                .trigger( 'onReset' )\r\n                .addClass( 'fancybox-slide--' + ( type || 'unknown' ) )\r\n                .addClass( slide.opts.slideClass );\r\n\r\n            // Create content depending on the type\r\n\r\n            switch ( type ) {\r\n\r\n                case 'image':\r\n\r\n                    self.setImage( slide );\r\n\r\n                break;\r\n\r\n                case 'iframe':\r\n\r\n                    self.setIframe( slide );\r\n\r\n                break;\r\n\r\n                case 'html':\r\n\r\n                    self.setContent( slide, slide.src || slide.content );\r\n\r\n                break;\r\n\r\n                case 'inline':\r\n\r\n                    if ( $( slide.src ).length ) {\r\n                        self.setContent( slide, $( slide.src ) );\r\n\r\n                    } else {\r\n                        self.setError( slide );\r\n                    }\r\n\r\n                break;\r\n\r\n                case 'ajax':\r\n\r\n                    self.showLoading( slide );\r\n\r\n                    ajaxLoad = $.ajax( $.extend( {}, slide.opts.ajax.settings, {\r\n                        url : slide.src,\r\n                        success : function ( data, textStatus ) {\r\n\r\n                            if ( textStatus === 'success' ) {\r\n                                self.setContent( slide, data );\r\n                            }\r\n\r\n                        },\r\n                        error : function ( jqXHR, textStatus ) {\r\n\r\n                            if ( jqXHR && textStatus !== 'abort' ) {\r\n                                self.setError( slide );\r\n                            }\r\n\r\n                        }\r\n                    }));\r\n\r\n                    $slide.one( 'onReset', function () {\r\n                        ajaxLoad.abort();\r\n                    });\r\n\r\n                break;\r\n\r\n                case 'video' :\r\n\r\n                    self.setContent( slide,\r\n                        '<video controls>' +\r\n                          '<source src=\"' + slide.src + '\" type=\"' + slide.opts.videoFormat + '\">' +\r\n                            'Your browser doesn\\'t support HTML5 video' +\r\n                        '</video>'\r\n                    );\r\n\r\n                break;\r\n\r\n                default:\r\n\r\n                    self.setError( slide );\r\n\r\n                break;\r\n\r\n            }\r\n\r\n            return true;\r\n\r\n        },\r\n\r\n\r\n        // Use thumbnail image, if possible\r\n        // ================================\r\n\r\n        setImage : function( slide ) {\r\n\r\n            var self   = this;\r\n            var srcset = slide.opts.srcset || slide.opts.image.srcset;\r\n\r\n            var found, temp, pxRatio, windowWidth;\r\n\r\n            // If we have \"srcset\", then we need to find matching \"src\" value.\r\n            // This is necessary, because when you set an src attribute, the browser will preload the image\r\n            // before any javascript or even CSS is applied.\r\n            if ( srcset ) {\r\n                pxRatio     = window.devicePixelRatio || 1;\r\n                windowWidth = window.innerWidth  * pxRatio;\r\n\r\n                temp = srcset.split(',').map(function ( el ) {\r\n            \t\tvar ret = {};\r\n\r\n            \t\tel.trim().split(/\\s+/).forEach(function ( el, i ) {\r\n                        var value = parseInt( el.substring(0, el.length - 1), 10 );\r\n\r\n            \t\t\tif ( i === 0 ) {\r\n            \t\t\t\treturn ( ret.url = el );\r\n            \t\t\t}\r\n\r\n                        if ( value ) {\r\n                            ret.value   = value;\r\n                            ret.postfix = el[ el.length - 1 ];\r\n                        }\r\n\r\n            \t\t});\r\n\r\n            \t\treturn ret;\r\n            \t});\r\n\r\n                // Sort by value\r\n                temp.sort(function (a, b) {\r\n                  return a.value - b.value;\r\n                });\r\n\r\n                // Ok, now we have an array of all srcset values\r\n                for ( var j = 0; j < temp.length; j++ ) {\r\n                    var el = temp[ j ];\r\n\r\n                    if ( ( el.postfix === 'w' && el.value >= windowWidth ) || ( el.postfix === 'x' && el.value >= pxRatio ) ) {\r\n                        found = el;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // If not found, take the last one\r\n                if ( !found && temp.length ) {\r\n                    found = temp[ temp.length - 1 ];\r\n                }\r\n\r\n                if ( found ) {\r\n                    slide.src = found.url;\r\n\r\n                    // If we have default width/height values, we can calculate height for matching source\r\n                    if ( slide.width && slide.height && found.postfix == 'w' ) {\r\n                        slide.height = ( slide.width / slide.height ) * found.value;\r\n                        slide.width  = found.value;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // This will be wrapper containing both ghost and actual image\r\n            slide.$content = $('<div class=\"fancybox-image-wrap\"></div>')\r\n                .addClass( 'fancybox-is-hidden' )\r\n                .appendTo( slide.$slide );\r\n\r\n\r\n            // If we have a thumbnail, we can display it while actual image is loading\r\n            // Users will not stare at black screen and actual image will appear gradually\r\n            if ( slide.opts.preload !== false && slide.opts.width && slide.opts.height && ( slide.opts.thumb || slide.opts.$thumb ) ) {\r\n\r\n                slide.width  = slide.opts.width;\r\n                slide.height = slide.opts.height;\r\n\r\n                slide.$ghost = $('<img />')\r\n                    .one('error', function() {\r\n\r\n                        $(this).remove();\r\n\r\n                        slide.$ghost = null;\r\n\r\n                        self.setBigImage( slide );\r\n\r\n                    })\r\n                    .one('load', function() {\r\n\r\n                        self.afterLoad( slide );\r\n\r\n                        self.setBigImage( slide );\r\n\r\n                    })\r\n                    .addClass( 'fancybox-image' )\r\n                    .appendTo( slide.$content )\r\n                    .attr( 'src', slide.opts.thumb || slide.opts.$thumb.attr( 'src' ) );\r\n\r\n            } else {\r\n\r\n                self.setBigImage( slide );\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Create full-size image\r\n        // ======================\r\n\r\n        setBigImage : function ( slide ) {\r\n            var self = this;\r\n            var $img = $('<img />');\r\n\r\n            slide.$image = $img\r\n                .one('error', function() {\r\n\r\n                    self.setError( slide );\r\n\r\n                })\r\n                .one('load', function() {\r\n\r\n                    // Clear timeout that checks if loading icon needs to be displayed\r\n                    clearTimeout( slide.timouts );\r\n\r\n                    slide.timouts = null;\r\n\r\n                    if ( self.isClosing ) {\r\n                        return;\r\n                    }\r\n\r\n                    slide.width  = slide.opts.width  || this.naturalWidth;\r\n                    slide.height = slide.opts.height || this.naturalHeight;\r\n\r\n                    if ( slide.opts.image.srcset ) {\r\n                        $img.attr( 'sizes', '100vw' ).attr( 'srcset', slide.opts.image.srcset );\r\n                    }\r\n\r\n                    self.hideLoading( slide );\r\n\r\n                    if ( slide.$ghost ) {\r\n\r\n                        slide.timouts = setTimeout(function() {\r\n                            slide.timouts = null;\r\n\r\n                            slide.$ghost.hide();\r\n\r\n                        }, Math.min( 300, Math.max( 1000, slide.height / 1600 ) ) );\r\n\r\n                    } else {\r\n                        self.afterLoad( slide );\r\n                    }\r\n\r\n                })\r\n                .addClass( 'fancybox-image' )\r\n                .attr('src', slide.src)\r\n                .appendTo( slide.$content );\r\n\r\n            if ( ( $img[0].complete || $img[0].readyState == \"complete\" ) && $img[0].naturalWidth && $img[0].naturalHeight ) {\r\n                  $img.trigger( 'load' );\r\n\r\n            } else if( $img[0].error ) {\r\n                 $img.trigger( 'error' );\r\n\r\n            } else {\r\n\r\n                slide.timouts = setTimeout(function() {\r\n                    if ( !$img[0].complete && !slide.hasError ) {\r\n                        self.showLoading( slide );\r\n                    }\r\n\r\n                }, 100);\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Create iframe wrapper, iframe and bindings\r\n        // ==========================================\r\n\r\n        setIframe : function( slide ) {\r\n            var self\t= this,\r\n                opts    = slide.opts.iframe,\r\n                $slide\t= slide.$slide,\r\n                $iframe;\r\n\r\n            slide.$content = $('<div class=\"fancybox-content' + ( opts.preload ? ' fancybox-is-hidden' : '' ) + '\"></div>')\r\n                .css( opts.css )\r\n                .appendTo( $slide );\r\n\r\n            $iframe = $( opts.tpl.replace(/\\{rnd\\}/g, new Date().getTime()) )\r\n                .attr( opts.attr )\r\n                .appendTo( slide.$content );\r\n\r\n            if ( opts.preload ) {\r\n\r\n                self.showLoading( slide );\r\n\r\n                // Unfortunately, it is not always possible to determine if iframe is successfully loaded\r\n                // (due to browser security policy)\r\n\r\n                $iframe.on('load.fb error.fb', function(e) {\r\n                    this.isReady = 1;\r\n\r\n                    slide.$slide.trigger( 'refresh' );\r\n\r\n                    self.afterLoad( slide );\r\n                });\r\n\r\n                // Recalculate iframe content size\r\n                // ===============================\r\n\r\n                $slide.on('refresh.fb', function() {\r\n                    var $wrap = slide.$content,\r\n                        frameWidth  = opts.css.width,\r\n                        frameHeight = opts.css.height,\r\n                        scrollWidth,\r\n                        $contents,\r\n                        $body;\r\n\r\n                    if ( $iframe[0].isReady !== 1 ) {\r\n                        return;\r\n                    }\r\n\r\n                    // Check if content is accessible,\r\n                    // it will fail if frame is not with the same origin\r\n\r\n                    try {\r\n                        $contents = $iframe.contents();\r\n                        $body     = $contents.find('body');\r\n\r\n                    } catch (ignore) {}\r\n\r\n                    // Calculate dimensions for the wrapper\r\n                    if ( $body && $body.length ) {\r\n\r\n                        if ( frameWidth === undefined ) {\r\n                            scrollWidth = $iframe[0].contentWindow.document.documentElement.scrollWidth;\r\n\r\n                            frameWidth = Math.ceil( $body.outerWidth(true) + ( $wrap.width() - scrollWidth ) );\r\n                            frameWidth += $wrap.outerWidth() - $wrap.innerWidth();\r\n                        }\r\n\r\n                        if ( frameHeight === undefined ) {\r\n                            frameHeight = Math.ceil( $body.outerHeight(true) );\r\n                            frameHeight += $wrap.outerHeight() - $wrap.innerHeight();\r\n                        }\r\n\r\n                        // Resize wrapper to fit iframe content\r\n                        if ( frameWidth ) {\r\n                            $wrap.width( frameWidth );\r\n                        }\r\n\r\n                        if ( frameHeight ) {\r\n                            $wrap.height( frameHeight );\r\n                        }\r\n                    }\r\n\r\n                    $wrap.removeClass( 'fancybox-is-hidden' );\r\n\r\n                });\r\n\r\n            } else {\r\n\r\n                this.afterLoad( slide );\r\n\r\n            }\r\n\r\n            $iframe.attr( 'src', slide.src );\r\n\r\n            if ( slide.opts.smallBtn === true ) {\r\n                slide.$content.prepend( self.translate( slide, slide.opts.btnTpl.smallBtn ) );\r\n            }\r\n\r\n            // Remove iframe if closing or changing gallery item\r\n            $slide.one( 'onReset', function () {\r\n\r\n                // This helps IE not to throw errors when closing\r\n                try {\r\n\r\n                    $( this ).find( 'iframe' ).hide().attr( 'src', '//about:blank' );\r\n\r\n                } catch ( ignore ) {}\r\n\r\n                $( this ).empty();\r\n\r\n                slide.isLoaded = false;\r\n\r\n            });\r\n\r\n        },\r\n\r\n\r\n        // Wrap and append content to the slide\r\n        // ======================================\r\n\r\n        setContent : function ( slide, content ) {\r\n\r\n            var self = this;\r\n\r\n            if ( self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            self.hideLoading( slide );\r\n\r\n            slide.$slide.empty();\r\n\r\n            if ( isQuery( content ) && content.parent().length ) {\r\n\r\n                // If content is a jQuery object, then it will be moved to the slide.\r\n                // The placeholder is created so we will know where to put it back.\r\n                // If user is navigating gallery fast, then the content might be already inside fancyBox\r\n                // =====================================================================================\r\n\r\n                // Make sure content is not already moved to fancyBox\r\n                content.parent( '.fancybox-slide--inline' ).trigger( 'onReset' );\r\n\r\n                // Create temporary element marking original place of the content\r\n                slide.$placeholder = $( '<div></div>' ).hide().insertAfter( content );\r\n\r\n                // Make sure content is visible\r\n                content.css('display', 'inline-block');\r\n\r\n            } else if ( !slide.hasError ) {\r\n\r\n                // If content is just a plain text, try to convert it to html\r\n                if ( $.type( content ) === 'string' ) {\r\n                    content = $('<div>').append( $.trim( content ) ).contents();\r\n\r\n                    // If we have text node, then add wrapping element to make vertical alignment work\r\n                    if ( content[0].nodeType === 3 ) {\r\n                        content = $('<div>').html( content );\r\n                    }\r\n                }\r\n\r\n                // If \"filter\" option is provided, then filter content\r\n                if ( slide.opts.filter ) {\r\n                    content = $('<div>').html( content ).find( slide.opts.filter );\r\n                }\r\n\r\n            }\r\n\r\n            slide.$slide.one('onReset', function () {\r\n\r\n                // Pause all html5 video/audio\r\n                $( this ).find( 'video,audio' ).trigger( 'pause' );\r\n\r\n                // Put content back\r\n                if ( slide.$placeholder ) {\r\n                    slide.$placeholder.after( content.hide() ).remove();\r\n\r\n                    slide.$placeholder = null;\r\n                }\r\n\r\n                // Remove custom close button\r\n                if ( slide.$smallBtn ) {\r\n                    slide.$smallBtn.remove();\r\n\r\n                    slide.$smallBtn = null;\r\n                }\r\n\r\n                // Remove content and mark slide as not loaded\r\n                if ( !slide.hasError ) {\r\n                    $(this).empty();\r\n\r\n                    slide.isLoaded = false;\r\n                }\r\n\r\n            });\r\n\r\n            slide.$content = $( content ).appendTo( slide.$slide );\r\n\r\n            this.afterLoad( slide );\r\n        },\r\n\r\n        // Display error message\r\n        // =====================\r\n\r\n        setError : function ( slide ) {\r\n\r\n            slide.hasError = true;\r\n\r\n            slide.$slide.removeClass( 'fancybox-slide--' + slide.type );\r\n\r\n            this.setContent( slide, this.translate( slide, slide.opts.errorTpl ) );\r\n\r\n        },\r\n\r\n\r\n        // Show loading icon inside the slide\r\n        // ==================================\r\n\r\n        showLoading : function( slide ) {\r\n\r\n            var self = this;\r\n\r\n            slide = slide || self.current;\r\n\r\n            if ( slide && !slide.$spinner ) {\r\n                slide.$spinner = $( self.opts.spinnerTpl ).appendTo( slide.$slide );\r\n            }\r\n\r\n        },\r\n\r\n        // Remove loading icon from the slide\r\n        // ==================================\r\n\r\n        hideLoading : function( slide ) {\r\n\r\n            var self = this;\r\n\r\n            slide = slide || self.current;\r\n\r\n            if ( slide && slide.$spinner ) {\r\n                slide.$spinner.remove();\r\n\r\n                delete slide.$spinner;\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Adjustments after slide content has been loaded\r\n        // ===============================================\r\n\r\n        afterLoad : function( slide ) {\r\n\r\n            var self = this;\r\n\r\n            if ( self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            slide.isLoading = false;\r\n            slide.isLoaded  = true;\r\n\r\n            self.trigger( 'afterLoad', slide );\r\n\r\n            self.hideLoading( slide );\r\n\r\n            if ( slide.opts.smallBtn && !slide.$smallBtn ) {\r\n                slide.$smallBtn = $( self.translate( slide, slide.opts.btnTpl.smallBtn ) ).appendTo( slide.$content.filter('div,form').first() );\r\n            }\r\n\r\n            if ( slide.opts.protect && slide.$content && !slide.hasError ) {\r\n\r\n                // Disable right click\r\n                slide.$content.on( 'contextmenu.fb', function( e ) {\r\n                     if ( e.button == 2 ) {\r\n                         e.preventDefault();\r\n                     }\r\n\r\n                    return true;\r\n                });\r\n\r\n                // Add fake element on top of the image\r\n                // This makes a bit harder for user to select image\r\n                if ( slide.type === 'image' ) {\r\n                    $( '<div class=\"fancybox-spaceball\"></div>' ).appendTo( slide.$content );\r\n                }\r\n\r\n            }\r\n\r\n            self.revealContent( slide );\r\n\r\n        },\r\n\r\n\r\n        // Make content visible\r\n        // This method is called right after content has been loaded or\r\n        // user navigates gallery and transition should start\r\n        // ============================================================\r\n\r\n        revealContent : function( slide ) {\r\n\r\n            var self   = this;\r\n            var $slide = slide.$slide;\r\n\r\n            var effect, effectClassName, duration, opacity, end, start = false;\r\n\r\n            effect   = slide.opts[ self.firstRun ? 'animationEffect'   : 'transitionEffect' ];\r\n            duration = slide.opts[ self.firstRun ? 'animationDuration' : 'transitionDuration' ];\r\n\r\n            duration = parseInt( slide.forcedDuration === undefined ? duration : slide.forcedDuration, 10 );\r\n\r\n            if ( slide.isMoved || slide.pos !== self.currPos || !duration ) {\r\n                effect = false;\r\n            }\r\n\r\n            // Check if can zoom\r\n            if ( effect === 'zoom' && !( slide.pos === self.currPos && duration && slide.type === 'image' && !slide.hasError && ( start = self.getThumbPos( slide ) ) ) ) {\r\n                effect = 'fade';\r\n            }\r\n\r\n            // Zoom animation\r\n            // ==============\r\n\r\n            if ( effect === 'zoom' ) {\r\n                end = self.getFitPos( slide );\r\n\r\n                end.scaleX = end.width  / start.width;\r\n                end.scaleY = end.height / start.height;\r\n\r\n                delete end.width;\r\n                delete end.height;\r\n\r\n                // Check if we need to animate opacity\r\n                opacity = slide.opts.zoomOpacity;\r\n\r\n                if ( opacity == 'auto' ) {\r\n                    opacity = Math.abs( slide.width / slide.height - start.width / start.height ) > 0.1;\r\n                }\r\n\r\n                if ( opacity ) {\r\n                    start.opacity = 0.1;\r\n                    end.opacity   = 1;\r\n                }\r\n\r\n                // Draw image at start position\r\n                $.fancybox.setTranslate( slide.$content.removeClass( 'fancybox-is-hidden' ), start );\r\n\r\n                forceRedraw( slide.$content );\r\n\r\n                // Start animation\r\n                $.fancybox.animate( slide.$content, end, duration, function() {\r\n                    self.complete();\r\n                });\r\n\r\n                return;\r\n            }\r\n\r\n            self.updateSlide( slide );\r\n\r\n\r\n            // Simply show content\r\n            // ===================\r\n\r\n            if ( !effect ) {\r\n                forceRedraw( $slide );\r\n\r\n                slide.$content.removeClass( 'fancybox-is-hidden' );\r\n\r\n                if ( slide.pos === self.currPos ) {\r\n                    self.complete();\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            $.fancybox.stop( $slide );\r\n\r\n            effectClassName = 'fancybox-animated fancybox-slide--' + ( slide.pos >= self.prevPos ? 'next' : 'previous' ) + ' fancybox-fx-' + effect;\r\n\r\n            $slide.removeAttr( 'style' ).removeClass( 'fancybox-slide--current fancybox-slide--next fancybox-slide--previous' ).addClass( effectClassName );\r\n\r\n            slide.$content.removeClass( 'fancybox-is-hidden' );\r\n\r\n            //Force reflow for CSS3 transitions\r\n            forceRedraw( $slide );\r\n\r\n            $.fancybox.animate( $slide, 'fancybox-slide--current', duration, function(e) {\r\n                $slide.removeClass( effectClassName ).removeAttr( 'style' );\r\n\r\n                if ( slide.pos === self.currPos ) {\r\n                    self.complete();\r\n                }\r\n\r\n            }, true);\r\n\r\n        },\r\n\r\n\r\n        // Check if we can and have to zoom from thumbnail\r\n        //================================================\r\n\r\n        getThumbPos : function( slide ) {\r\n\r\n            var self = this;\r\n            var rez  = false;\r\n\r\n            // Check if element is inside the viewport by at least 1 pixel\r\n            var isElementVisible = function( $el ) {\r\n                var element = $el[0];\r\n\r\n                var elementRect = element.getBoundingClientRect();\r\n                var parentRects = [];\r\n\r\n                var visibleInAllParents;\r\n\r\n                while ( element.parentElement !== null ) {\r\n                    if ( $(element.parentElement).css('overflow') === 'hidden'  || $(element.parentElement).css('overflow') === 'auto' ) {\r\n                        parentRects.push(element.parentElement.getBoundingClientRect());\r\n                    }\r\n\r\n                    element = element.parentElement;\r\n                }\r\n\r\n                visibleInAllParents = parentRects.every(function(parentRect){\r\n                    var visiblePixelX = Math.min(elementRect.right, parentRect.right) - Math.max(elementRect.left, parentRect.left);\r\n                    var visiblePixelY = Math.min(elementRect.bottom, parentRect.bottom) - Math.max(elementRect.top, parentRect.top);\r\n\r\n                    return visiblePixelX > 0 && visiblePixelY > 0;\r\n                });\r\n\r\n                return visibleInAllParents &&\r\n                    elementRect.bottom > 0 && elementRect.right > 0 &&\r\n                    elementRect.left < $(window).width() && elementRect.top < $(window).height();\r\n            };\r\n\r\n            var $thumb   = slide.opts.$thumb;\r\n            var thumbPos = $thumb ? $thumb.offset() : 0;\r\n            var slidePos;\r\n\r\n            if ( thumbPos && $thumb[0].ownerDocument === document && isElementVisible( $thumb ) ) {\r\n                slidePos = self.$refs.stage.offset();\r\n\r\n                rez = {\r\n                    top    : thumbPos.top  - slidePos.top  + parseFloat( $thumb.css( \"border-top-width\" ) || 0 ),\r\n                    left   : thumbPos.left - slidePos.left + parseFloat( $thumb.css( \"border-left-width\" ) || 0 ),\r\n                    width  : $thumb.width(),\r\n                    height : $thumb.height(),\r\n                    scaleX : 1,\r\n                    scaleY : 1\r\n                };\r\n            }\r\n\r\n            return rez;\r\n        },\r\n\r\n\r\n        // Final adjustments after current gallery item is moved to position\r\n        // and it`s content is loaded\r\n        // ==================================================================\r\n\r\n        complete : function() {\r\n            var self = this,\r\n                current = self.current,\r\n                slides  = {},\r\n                promise;\r\n\r\n            if ( current.isMoved || !current.isLoaded || current.isComplete ) {\r\n                return;\r\n            }\r\n\r\n            current.isComplete = true;\r\n\r\n            current.$slide.siblings().trigger( 'onReset' );\r\n\r\n            self.preload( 'inline' );\r\n\r\n            // Trigger any CSS3 transiton inside the slide\r\n            forceRedraw( current.$slide );\r\n\r\n            current.$slide.addClass( 'fancybox-slide--complete' );\r\n\r\n            // Remove unnecessary slides\r\n            $.each( self.slides, function( key, slide ) {\r\n                if ( slide.pos >= self.currPos - 1 && slide.pos <= self.currPos + 1 ) {\r\n                    slides[ slide.pos ] = slide;\r\n\r\n                } else if ( slide ) {\r\n                    $.fancybox.stop( slide.$slide );\r\n\r\n                    slide.$slide.off().remove();\r\n                }\r\n            });\r\n\r\n            self.slides = slides;\r\n\r\n            self.updateCursor();\r\n\r\n            self.trigger( 'afterShow' );\r\n\r\n            // Play first html5 video/audio\r\n            current.$slide.find( 'video,audio' ).first().trigger( 'play' );\r\n\r\n            // Try to focus on the first focusable element\r\n            if ( $( document.activeElement ).is( '[disabled]' ) || ( current.opts.autoFocus && !( current.type == 'image' || current.type === 'iframe' ) ) ) {\r\n                self.focus();\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Preload next and previous slides\r\n        // ================================\r\n\r\n        preload : function( type ) {\r\n            var self = this,\r\n                next = self.slides[ self.currPos + 1 ],\r\n                prev = self.slides[ self.currPos - 1 ];\r\n\r\n            if ( next && next.type === type ) {\r\n                self.loadSlide( next );\r\n            }\r\n\r\n            if ( prev && prev.type === type ) {\r\n                self.loadSlide( prev );\r\n            }\r\n        },\r\n\r\n\r\n        // Try to find and focus on the first focusable element\r\n        // ====================================================\r\n\r\n        focus : function() {\r\n            var current = this.current;\r\n            var $el;\r\n\r\n            if ( this.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            if ( current && current.isComplete ) {\r\n\r\n                // Look for first input with autofocus attribute\r\n                $el = current.$slide.find('input[autofocus]:enabled:visible:first');\r\n\r\n                if ( !$el.length ) {\r\n                    $el = current.$slide.find('button,:input,[tabindex],a').filter(':enabled:visible:first');\r\n                }\r\n            }\r\n\r\n            $el = $el && $el.length ? $el : this.$refs.container;\r\n\r\n            $el.focus();\r\n        },\r\n\r\n\r\n        // Activates current instance - brings container to the front and enables keyboard,\r\n        // notifies other instances about deactivating\r\n        // =================================================================================\r\n\r\n        activate : function () {\r\n            var self = this;\r\n\r\n            // Deactivate all instances\r\n            $( '.fancybox-container' ).each(function () {\r\n                var instance = $(this).data( 'FancyBox' );\r\n\r\n                // Skip self and closing instances\r\n                if (instance && instance.id !== self.id && !instance.isClosing) {\r\n                    instance.trigger( 'onDeactivate' );\r\n\r\n                    instance.removeEvents();\r\n\r\n                    instance.isVisible = false;\r\n                }\r\n\r\n            });\r\n\r\n            self.isVisible = true;\r\n\r\n            if ( self.current || self.isIdle ) {\r\n                self.update();\r\n\r\n                self.updateControls();\r\n            }\r\n\r\n            self.trigger( 'onActivate' );\r\n\r\n            self.addEvents();\r\n        },\r\n\r\n\r\n        // Start closing procedure\r\n        // This will start \"zoom-out\" animation if needed and clean everything up afterwards\r\n        // =================================================================================\r\n\r\n        close : function( e, d ) {\r\n\r\n            var self    = this;\r\n            var current = self.current;\r\n\r\n            var effect, duration;\r\n            var $what, opacity, start, end;\r\n\r\n            var done = function() {\r\n                self.cleanUp( e );\r\n            };\r\n\r\n            if ( self.isClosing ) {\r\n                return false;\r\n            }\r\n\r\n            self.isClosing = true;\r\n\r\n            // If beforeClose callback prevents closing, make sure content is centered\r\n            if ( self.trigger( 'beforeClose', e ) === false ) {\r\n                self.isClosing = false;\r\n\r\n                requestAFrame(function() {\r\n                    self.update();\r\n                });\r\n\r\n                return false;\r\n            }\r\n\r\n            // Remove all events\r\n            // If there are multiple instances, they will be set again by \"activate\" method\r\n            self.removeEvents();\r\n\r\n            if ( current.timouts ) {\r\n                clearTimeout( current.timouts );\r\n            }\r\n\r\n            $what    = current.$content;\r\n            effect   = current.opts.animationEffect;\r\n            duration = $.isNumeric( d ) ? d : ( effect ? current.opts.animationDuration : 0 );\r\n\r\n            // Remove other slides\r\n            current.$slide.off( transitionEnd ).removeClass( 'fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated' );\r\n\r\n            current.$slide.siblings().trigger( 'onReset' ).remove();\r\n\r\n            // Trigger animations\r\n            if ( duration ) {\r\n                self.$refs.container.removeClass( 'fancybox-is-open' ).addClass( 'fancybox-is-closing' );\r\n            }\r\n\r\n            // Clean up\r\n            self.hideLoading( current );\r\n\r\n            self.hideControls();\r\n\r\n            self.updateCursor();\r\n\r\n            // Check if possible to zoom-out\r\n            if ( effect === 'zoom' && !( e !== true && $what && duration && current.type === 'image' && !current.hasError && ( end = self.getThumbPos( current ) ) ) ) {\r\n                effect = 'fade';\r\n            }\r\n\r\n            if ( effect === 'zoom' ) {\r\n                $.fancybox.stop( $what );\r\n\r\n                start = $.fancybox.getTranslate( $what );\r\n\r\n                start.width  = start.width  * start.scaleX;\r\n                start.height = start.height * start.scaleY;\r\n\r\n                // Check if we need to animate opacity\r\n                opacity = current.opts.zoomOpacity;\r\n\r\n                if ( opacity == 'auto' ) {\r\n                    opacity = Math.abs( current.width / current.height - end.width / end.height ) > 0.1;\r\n                }\r\n\r\n                if ( opacity ) {\r\n                    end.opacity = 0;\r\n                }\r\n\r\n                start.scaleX = start.width  / end.width;\r\n                start.scaleY = start.height / end.height;\r\n\r\n                start.width  = end.width;\r\n                start.height = end.height;\r\n\r\n                $.fancybox.setTranslate( current.$content, start );\r\n\r\n                forceRedraw( current.$content );\r\n\r\n                $.fancybox.animate( current.$content, end, duration, done );\r\n\r\n                return true;\r\n            }\r\n\r\n            if ( effect && duration ) {\r\n\r\n                // If skip animation\r\n                if ( e === true ) {\r\n                    setTimeout( done, duration );\r\n\r\n                } else {\r\n                    $.fancybox.animate( current.$slide.removeClass( 'fancybox-slide--current' ), 'fancybox-animated fancybox-slide--previous fancybox-fx-' + effect, duration, done );\r\n                }\r\n\r\n            } else {\r\n                done();\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n\r\n        // Final adjustments after removing the instance\r\n        // =============================================\r\n\r\n        cleanUp : function( e ) {\r\n            var self  = this,\r\n                $body = $( 'body' ),\r\n                instance,\r\n                offset;\r\n\r\n            self.current.$slide.trigger( 'onReset' );\r\n\r\n            self.$refs.container.empty().remove();\r\n\r\n            self.trigger( 'afterClose', e );\r\n\r\n            // Place back focus\r\n            if ( self.$lastFocus && !!self.current.opts.backFocus ) {\r\n                self.$lastFocus.focus();\r\n            }\r\n\r\n            self.current = null;\r\n\r\n            // Check if there are other instances\r\n            instance = $.fancybox.getInstance();\r\n\r\n            if ( instance ) {\r\n                instance.activate();\r\n\r\n            } else {\r\n\r\n                $W.scrollTop( self.scrollTop ).scrollLeft( self.scrollLeft );\r\n\r\n                $body.removeClass( 'fancybox-active compensate-for-scrollbar' );\r\n\r\n                if ( $body.hasClass( 'fancybox-iosfix' ) ) {\r\n                    offset = parseInt(document.body.style.top, 10);\r\n\r\n                    $body.removeClass( 'fancybox-iosfix' ).css( 'top', '' ).scrollTop( offset * -1 );\r\n                }\r\n\r\n                $( '#fancybox-style-noscroll' ).remove();\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Call callback and trigger an event\r\n        // ==================================\r\n\r\n        trigger : function( name, slide ) {\r\n            var args  = Array.prototype.slice.call(arguments, 1),\r\n                self  = this,\r\n                obj   = slide && slide.opts ? slide : self.current,\r\n                rez;\r\n\r\n            if ( obj ) {\r\n                args.unshift( obj );\r\n\r\n            } else {\r\n                obj = self;\r\n            }\r\n\r\n            args.unshift( self );\r\n\r\n            if ( $.isFunction( obj.opts[ name ] ) ) {\r\n                rez = obj.opts[ name ].apply( obj, args );\r\n            }\r\n\r\n            if ( rez === false ) {\r\n                return rez;\r\n            }\r\n\r\n            if ( name === 'afterClose' || !self.$refs ) {\r\n                $D.trigger( name + '.fb', args );\r\n\r\n            } else {\r\n                self.$refs.container.trigger( name + '.fb', args );\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Update infobar values, navigation button states and reveal caption\r\n        // ==================================================================\r\n\r\n        updateControls : function ( force ) {\r\n\r\n            var self = this;\r\n\r\n            var current  = self.current,\r\n                index    = current.index,\r\n                caption  = current.opts.caption,\r\n                $container = self.$refs.container,\r\n                $caption   = self.$refs.caption;\r\n\r\n            // Recalculate content dimensions\r\n            current.$slide.trigger( 'refresh' );\r\n\r\n            self.$caption = caption && caption.length ? $caption.html( caption ) : null;\r\n\r\n            if ( !self.isHiddenControls && !self.isIdle ) {\r\n                self.showControls();\r\n            }\r\n\r\n            // Update info and navigation elements\r\n            $container.find('[data-fancybox-count]').html( self.group.length );\r\n            $container.find('[data-fancybox-index]').html( index + 1 );\r\n\r\n            $container.find('[data-fancybox-prev]').prop( 'disabled', ( !current.opts.loop && index <= 0 ) );\r\n            $container.find('[data-fancybox-next]').prop( 'disabled', ( !current.opts.loop && index >= self.group.length - 1 ) );\r\n\r\n            if ( current.type === 'image' ) {\r\n\r\n                // Update download button source\r\n                $container.find('[data-fancybox-download]').attr( 'href', current.opts.image.src || current.src ).show();\r\n\r\n            } else {\r\n                $container.find('[data-fancybox-download],[data-fancybox-zoom]').hide();\r\n            }\r\n        },\r\n\r\n        // Hide toolbar and caption\r\n        // ========================\r\n\r\n        hideControls : function () {\r\n\r\n            this.isHiddenControls = true;\r\n\r\n            this.$refs.container.removeClass( 'fancybox-show-infobar fancybox-show-toolbar fancybox-show-caption fancybox-show-nav' );\r\n\r\n        },\r\n\r\n        showControls : function() {\r\n            var self = this;\r\n            var opts = self.current ? self.current.opts : self.opts;\r\n            var $container = self.$refs.container;\r\n\r\n            self.isHiddenControls   = false;\r\n            self.idleSecondsCounter = 0;\r\n\r\n            $container\r\n                .toggleClass( 'fancybox-show-toolbar', !!( opts.toolbar && opts.buttons ) )\r\n                .toggleClass( 'fancybox-show-infobar', !!( opts.infobar && self.group.length > 1 ) )\r\n                .toggleClass( 'fancybox-show-nav',     !!( opts.arrows && self.group.length > 1 ) )\r\n                .toggleClass( 'fancybox-is-modal',     !!opts.modal );\r\n\r\n            if ( self.$caption ) {\r\n                $container.addClass( 'fancybox-show-caption ');\r\n\r\n            } else {\r\n               $container.removeClass( 'fancybox-show-caption' );\r\n           }\r\n\r\n       },\r\n\r\n\r\n       // Toggle toolbar and caption\r\n       // ==========================\r\n\r\n       toggleControls : function() {\r\n           if ( this.isHiddenControls ) {\r\n               this.showControls();\r\n\r\n           } else {\r\n               this.hideControls();\r\n           }\r\n\r\n       },\r\n\r\n\r\n    });\r\n\r\n\r\n    $.fancybox = {\r\n\r\n        version  : \"3.2.10\",\r\n        defaults : defaults,\r\n\r\n\r\n        // Get current instance and execute a command.\r\n        //\r\n        // Examples of usage:\r\n        //\r\n        //   $instance = $.fancybox.getInstance();\r\n        //   $.fancybox.getInstance().jumpTo( 1 );\r\n        //   $.fancybox.getInstance( 'jumpTo', 1 );\r\n        //   $.fancybox.getInstance( function() {\r\n        //       console.info( this.currIndex );\r\n        //   });\r\n        // ======================================================\r\n\r\n        getInstance : function ( command ) {\r\n            var instance = $('.fancybox-container:not(\".fancybox-is-closing\"):last').data( 'FancyBox' );\r\n            var args     = Array.prototype.slice.call(arguments, 1);\r\n\r\n            if ( instance instanceof FancyBox ) {\r\n\r\n                if ( $.type( command ) === 'string' ) {\r\n                    instance[ command ].apply( instance, args );\r\n\r\n                } else if ( $.type( command ) === 'function' ) {\r\n                    command.apply( instance, args );\r\n                }\r\n\r\n                return instance;\r\n            }\r\n\r\n            return false;\r\n\r\n        },\r\n\r\n\r\n        // Create new instance\r\n        // ===================\r\n\r\n        open : function ( items, opts, index ) {\r\n            return new FancyBox( items, opts, index );\r\n        },\r\n\r\n\r\n        // Close current or all instances\r\n        // ==============================\r\n\r\n        close : function ( all ) {\r\n            var instance = this.getInstance();\r\n\r\n            if ( instance ) {\r\n                instance.close();\r\n\r\n                // Try to find and close next instance\r\n\r\n                if ( all === true ) {\r\n                    this.close();\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        // Close instances and unbind all events\r\n        // ==============================\r\n\r\n        destroy : function() {\r\n\r\n            this.close( true );\r\n\r\n            $D.off( 'click.fb-start' );\r\n\r\n        },\r\n\r\n\r\n        // Try to detect mobile devices\r\n        // ============================\r\n\r\n        isMobile : document.createTouch !== undefined && /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),\r\n\r\n\r\n        // Detect if 'translate3d' support is available\r\n        // ============================================\r\n\r\n        use3d : (function() {\r\n            var div = document.createElement('div');\r\n\r\n            return window.getComputedStyle && window.getComputedStyle( div ).getPropertyValue('transform') && !(document.documentMode && document.documentMode < 11);\r\n        }()),\r\n\r\n        // Helper function to get current visual state of an element\r\n        // returns array[ top, left, horizontal-scale, vertical-scale, opacity ]\r\n        // =====================================================================\r\n\r\n        getTranslate : function( $el ) {\r\n            var matrix;\r\n\r\n            if ( !$el || !$el.length ) {\r\n                return false;\r\n            }\r\n\r\n            matrix  = $el.eq( 0 ).css('transform');\r\n\r\n            if ( matrix && matrix.indexOf( 'matrix' ) !== -1 ) {\r\n                matrix = matrix.split('(')[1];\r\n                matrix = matrix.split(')')[0];\r\n                matrix = matrix.split(',');\r\n            } else {\r\n                matrix = [];\r\n            }\r\n\r\n            if ( matrix.length ) {\r\n\r\n                // If IE\r\n                if ( matrix.length > 10 ) {\r\n                    matrix = [ matrix[13], matrix[12], matrix[0], matrix[5] ];\r\n\r\n                } else {\r\n                    matrix = [ matrix[5], matrix[4], matrix[0], matrix[3]];\r\n                }\r\n\r\n                matrix = matrix.map(parseFloat);\r\n\r\n            } else {\r\n                matrix = [ 0, 0, 1, 1 ];\r\n\r\n                var transRegex = /\\.*translate\\((.*)px,(.*)px\\)/i;\r\n                var transRez = transRegex.exec( $el.eq( 0 ).attr('style') );\r\n\r\n                if ( transRez ) {\r\n                    matrix[ 0 ] = parseFloat( transRez[2] );\r\n                    matrix[ 1 ] = parseFloat( transRez[1] );\r\n                }\r\n            }\r\n\r\n            return {\r\n                top     : matrix[ 0 ],\r\n                left    : matrix[ 1 ],\r\n                scaleX  : matrix[ 2 ],\r\n                scaleY  : matrix[ 3 ],\r\n                opacity : parseFloat( $el.css('opacity') ),\r\n                width   : $el.width(),\r\n                height  : $el.height()\r\n            };\r\n\r\n        },\r\n\r\n\r\n        // Shortcut for setting \"translate3d\" properties for element\r\n        // Can set be used to set opacity, too\r\n        // ========================================================\r\n\r\n        setTranslate : function( $el, props ) {\r\n            var str  = '';\r\n            var css  = {};\r\n\r\n            if ( !$el || !props ) {\r\n                return;\r\n            }\r\n\r\n            if ( props.left !== undefined || props.top !== undefined ) {\r\n                str = ( props.left === undefined ? $el.position().left : props.left )  + 'px, ' + ( props.top === undefined ? $el.position().top : props.top ) + 'px';\r\n\r\n                if ( this.use3d ) {\r\n                    str = 'translate3d(' + str + ', 0px)';\r\n\r\n                } else {\r\n                    str = 'translate(' + str + ')';\r\n                }\r\n            }\r\n\r\n            if ( props.scaleX !== undefined && props.scaleY !== undefined ) {\r\n                str = (str.length ? str + ' ' : '') + 'scale(' + props.scaleX + ', ' + props.scaleY + ')';\r\n            }\r\n\r\n            if ( str.length ) {\r\n                css.transform = str;\r\n            }\r\n\r\n            if ( props.opacity !== undefined ) {\r\n                css.opacity = props.opacity;\r\n            }\r\n\r\n            if ( props.width !== undefined ) {\r\n                css.width = props.width;\r\n            }\r\n\r\n            if ( props.height !== undefined ) {\r\n                css.height = props.height;\r\n            }\r\n\r\n            return $el.css( css );\r\n        },\r\n\r\n\r\n        // Simple CSS transition handler\r\n        // =============================\r\n\r\n        animate : function ( $el, to, duration, callback, leaveAnimationName ) {\r\n            if ( $.isFunction( duration ) ) {\r\n                callback = duration;\r\n                duration = null;\r\n            }\r\n\r\n            if ( !$.isPlainObject( to ) ) {\r\n                $el.removeAttr( 'style' );\r\n            }\r\n\r\n            $el.on( transitionEnd, function(e) {\r\n\r\n                // Skip events from child elements and z-index change\r\n                if ( e && e.originalEvent && ( !$el.is( e.originalEvent.target ) || e.originalEvent.propertyName == 'z-index' ) ) {\r\n                    return;\r\n                }\r\n\r\n                $.fancybox.stop( $el );\r\n\r\n                if ( $.isPlainObject( to ) ) {\r\n\r\n                    if ( to.scaleX !== undefined && to.scaleY !== undefined ) {\r\n                        $el.css( 'transition-duration', '' );\r\n\r\n                        to.width  = Math.round( $el.width()  * to.scaleX );\r\n                        to.height = Math.round( $el.height() * to.scaleY );\r\n\r\n                        to.scaleX = 1;\r\n                        to.scaleY = 1;\r\n\r\n                        $.fancybox.setTranslate( $el, to );\r\n                    }\r\n\r\n                    if ( leaveAnimationName === false ) {\r\n                        $el.removeAttr( 'style' );\r\n                    }\r\n\r\n                } else if ( leaveAnimationName !== true ) {\r\n                    $el.removeClass( to );\r\n                }\r\n\r\n                if ( $.isFunction( callback ) ) {\r\n                    callback( e );\r\n                }\r\n\r\n            });\r\n\r\n            if ( $.isNumeric( duration ) ) {\r\n                $el.css( 'transition-duration', duration + 'ms' );\r\n            }\r\n\r\n            if ( $.isPlainObject( to ) ) {\r\n                $.fancybox.setTranslate( $el, to );\r\n\r\n            } else {\r\n                $el.addClass( to );\r\n            }\r\n\r\n            if ( to.scaleX && $el.hasClass( 'fancybox-image-wrap' ) ) {\r\n                $el.parent().addClass( 'fancybox-is-scaling' );\r\n            }\r\n\r\n            // Make sure that `transitionend` callback gets fired\r\n            $el.data(\"timer\", setTimeout(function() {\r\n                $el.trigger( 'transitionend' );\r\n            }, duration + 16));\r\n\r\n        },\r\n\r\n        stop : function( $el ) {\r\n            clearTimeout( $el.data(\"timer\") );\r\n\r\n            $el.off( 'transitionend' ).css( 'transition-duration', '' );\r\n\r\n            if ( $el.hasClass( 'fancybox-image-wrap' ) ) {\r\n                $el.parent().removeClass( 'fancybox-is-scaling' );\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n\r\n    // Default click handler for \"fancyboxed\" links\r\n    // ============================================\r\n\r\n    function _run( e ) {\r\n        var $target\t= $( e.currentTarget ),\r\n            opts\t= e.data ? e.data.options : {},\r\n            value\t= $target.attr( 'data-fancybox' ) || '',\r\n            index\t= 0,\r\n            items   = [];\r\n\r\n        // Avoid opening multiple times\r\n        if ( e.isDefaultPrevented() ) {\r\n            return;\r\n        }\r\n\r\n        e.preventDefault();\r\n\r\n        // Get all related items and find index for clicked one\r\n        if ( value ) {\r\n            items = opts.selector ? $( opts.selector ) : ( e.data ? e.data.items : [] );\r\n            items = items.length ? items.filter( '[data-fancybox=\"' + value + '\"]' ) : $( '[data-fancybox=\"' + value + '\"]' );\r\n\r\n            index = items.index( $target );\r\n\r\n            // Sometimes current item can not be found\r\n            // (for example, when slider clones items)\r\n            if ( index < 0 ) {\r\n                index = 0;\r\n            }\r\n\r\n        } else {\r\n            items = [ $target ];\r\n        }\r\n\r\n        $.fancybox.open( items, opts, index );\r\n    }\r\n\r\n\r\n    // Create a jQuery plugin\r\n    // ======================\r\n\r\n    $.fn.fancybox = function (options) {\r\n        var selector;\r\n\r\n        options  = options || {};\r\n        selector = options.selector || false;\r\n\r\n        if ( selector ) {\r\n\r\n            $( 'body' ).off( 'click.fb-start', selector ).on( 'click.fb-start', selector, {\r\n                options : options\r\n            }, _run );\r\n\r\n        } else {\r\n\r\n            this.off( 'click.fb-start' ).on( 'click.fb-start', {\r\n                items   : this,\r\n                options : options\r\n            }, _run);\r\n\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n\r\n    // Self initializing plugin\r\n    // ========================\r\n\r\n    $D.on( 'click.fb-start', '[data-fancybox]', _run );\r\n\r\n}( window, document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// Media\r\n// Adds additional media type support\r\n//\r\n// ==========================================================================\r\n;(function ($) {\r\n\r\n\t'use strict';\r\n\r\n\t// Formats matching url to final form\r\n\r\n\tvar format = function (url, rez, params) {\r\n\t\tif ( !url ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tparams = params || '';\r\n\r\n\t\tif ( $.type(params) === \"object\" ) {\r\n\t\t\tparams = $.param(params, true);\r\n\t\t}\r\n\r\n\t\t$.each(rez, function (key, value) {\r\n\t\t\turl = url.replace('$' + key, value || '');\r\n\t\t});\r\n\r\n\t\tif (params.length) {\r\n\t\t\turl += (url.indexOf('?') > 0 ? '&' : '?') + params;\r\n\t\t}\r\n\r\n\t\treturn url;\r\n\t};\r\n\r\n\t// Object containing properties for each media type\r\n\r\n\tvar defaults = {\r\n\t\tyoutube : {\r\n\t\t\tmatcher : /(youtube\\.com|youtu\\.be|youtube\\-nocookie\\.com)\\/(watch\\?(.*&)?v=|v\\/|u\\/|embed\\/?)?(videoseries\\?list=(.*)|[\\w-]{11}|\\?listType=(.*)&list=(.*))(.*)/i,\r\n\t\t\tparams  : {\r\n\t\t\t\tautoplay : 1,\r\n\t\t\t\tautohide : 1,\r\n\t\t\t\tfs  : 1,\r\n\t\t\t\trel : 0,\r\n\t\t\t\thd  : 1,\r\n\t\t\t\twmode : 'transparent',\r\n\t\t\t\tenablejsapi : 1,\r\n\t\t\t\thtml5 : 1\r\n\t\t\t},\r\n\t\t\tparamPlace : 8,\r\n\t\t\ttype  : 'iframe',\r\n\t\t\turl   : '//www.youtube.com/embed/$4',\r\n\t\t\tthumb : '//img.youtube.com/vi/$4/hqdefault.jpg'\r\n\t\t},\r\n\r\n\t\tvimeo : {\r\n\t\t\tmatcher : /^.+vimeo.com\\/(.*\\/)?([\\d]+)(.*)?/,\r\n\t\t\tparams  : {\r\n\t\t\t\tautoplay : 1,\r\n\t\t\t\thd : 1,\r\n\t\t\t\tshow_title    : 1,\r\n\t\t\t\tshow_byline   : 1,\r\n\t\t\t\tshow_portrait : 0,\r\n\t\t\t\tfullscreen    : 1,\r\n\t\t\t\tapi : 1\r\n\t\t\t},\r\n\t\t\tparamPlace : 3,\r\n\t\t\ttype : 'iframe',\r\n\t\t\turl : '//player.vimeo.com/video/$2'\r\n\t\t},\r\n\r\n\t\tmetacafe : {\r\n\t\t\tmatcher : /metacafe.com\\/watch\\/(\\d+)\\/(.*)?/,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : '//www.metacafe.com/embed/$1/?ap=1'\r\n\t\t},\r\n\r\n\t\tdailymotion : {\r\n\t\t\tmatcher : /dailymotion.com\\/video\\/(.*)\\/?(.*)/,\r\n\t\t\tparams : {\r\n\t\t\t\tadditionalInfos : 0,\r\n\t\t\t\tautoStart : 1\r\n\t\t\t},\r\n\t\t\ttype : 'iframe',\r\n\t\t\turl  : '//www.dailymotion.com/embed/video/$1'\r\n\t\t},\r\n\r\n\t\tvine : {\r\n\t\t\tmatcher : /vine.co\\/v\\/([a-zA-Z0-9\\?\\=\\-]+)/,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : '//vine.co/v/$1/embed/simple'\r\n\t\t},\r\n\r\n\t\tinstagram : {\r\n\t\t\tmatcher : /(instagr\\.am|instagram\\.com)\\/p\\/([a-zA-Z0-9_\\-]+)\\/?/i,\r\n\t\t\ttype    : 'image',\r\n\t\t\turl     : '//$1/p/$2/media/?size=l'\r\n\t\t},\r\n\r\n\t\t// Examples:\r\n\t\t// http://maps.google.com/?ll=48.857995,2.294297&spn=0.007666,0.021136&t=m&z=16\r\n\t\t// https://www.google.com/maps/@37.7852006,-122.4146355,14.65z\r\n\t\t// https://www.google.com/maps/place/Googleplex/@37.4220041,-122.0833494,17z/data=!4m5!3m4!1s0x0:0x6c296c66619367e0!8m2!3d37.4219998!4d-122.0840572\r\n\t\tgmap_place : {\r\n\t\t\tmatcher : /(maps\\.)?google\\.([a-z]{2,3}(\\.[a-z]{2})?)\\/(((maps\\/(place\\/(.*)\\/)?\\@(.*),(\\d+.?\\d+?)z))|(\\?ll=))(.*)?/i,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : function (rez) {\r\n\t\t\t\treturn '//maps.google.' + rez[2] + '/?ll=' + ( rez[9] ? rez[9] + '&z=' + Math.floor(  rez[10]  ) + ( rez[12] ? rez[12].replace(/^\\//, \"&\") : '' )  : rez[12] ) + '&output=' + ( rez[12] && rez[12].indexOf('layer=c') > 0 ? 'svembed' : 'embed' );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Examples:\r\n\t\t// https://www.google.com/maps/search/Empire+State+Building/\r\n\t\t// https://www.google.com/maps/search/?api=1&query=centurylink+field\r\n\t\t// https://www.google.com/maps/search/?api=1&query=47.5951518,-122.3316393\r\n\t\tgmap_search : {\r\n\t\t\tmatcher : /(maps\\.)?google\\.([a-z]{2,3}(\\.[a-z]{2})?)\\/(maps\\/search\\/)(.*)/i,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : function (rez) {\r\n\t\t\t\treturn '//maps.google.' + rez[2] + '/maps?q=' + rez[5].replace('query=', 'q=').replace('api=1', '') + '&output=embed';\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t$(document).on('objectNeedsType.fb', function (e, instance, item) {\r\n\r\n\t\tvar url\t = item.src || '',\r\n\t\t\ttype = false,\r\n\t\t\tmedia,\r\n\t\t\tthumb,\r\n\t\t\trez,\r\n\t\t\tparams,\r\n\t\t\turlParams,\r\n\t\t\tparamObj,\r\n\t\t\tprovider;\r\n\r\n\t\tmedia = $.extend( true, {}, defaults, item.opts.media );\r\n\r\n\t\t// Look for any matching media type\r\n\t\t$.each(media, function ( providerName, providerOpts ) {\r\n\t\t\trez = url.match( providerOpts.matcher );\r\n\r\n\t\t\tif ( !rez ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\ttype     = providerOpts.type;\r\n\t\t\tparamObj = {};\r\n\r\n\t\t\tif ( providerOpts.paramPlace && rez[ providerOpts.paramPlace ] ) {\r\n\t\t\t\turlParams = rez[ providerOpts.paramPlace ];\r\n\r\n\t\t\t\tif ( urlParams[ 0 ] == '?' ) {\r\n\t\t\t\t\turlParams = urlParams.substring(1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\turlParams = urlParams.split('&');\r\n\r\n\t\t\t\tfor ( var m = 0; m < urlParams.length; ++m ) {\r\n\t\t\t\t\tvar p = urlParams[ m ].split('=', 2);\r\n\r\n\t\t\t\t\tif ( p.length == 2 ) {\r\n\t\t\t\t\t\tparamObj[ p[0] ] = decodeURIComponent( p[1].replace(/\\+/g, \" \") );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tparams = $.extend( true, {}, providerOpts.params, item.opts[ providerName ], paramObj );\r\n\r\n\t\t\turl   = $.type( providerOpts.url ) === \"function\" ? providerOpts.url.call( this, rez, params, item ) : format( providerOpts.url, rez, params );\r\n\t\t\tthumb = $.type( providerOpts.thumb ) === \"function\" ? providerOpts.thumb.call( this, rez, params, item ) : format( providerOpts.thumb, rez );\r\n\r\n\t\t\tif ( providerName === 'vimeo' ) {\r\n\t\t\t\turl = url.replace('&%23', '#');\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t// If it is found, then change content type and update the url\r\n\r\n\t\tif ( type ) {\r\n\t\t\titem.src  = url;\r\n\t\t\titem.type = type;\r\n\r\n\t\t\tif ( !item.opts.thumb && !( item.opts.$thumb && item.opts.$thumb.length ) ) {\r\n\t\t\t\titem.opts.thumb = thumb;\r\n\t\t\t}\r\n\r\n\t\t\tif ( type === 'iframe' ) {\r\n\t\t\t\t$.extend(true, item.opts, {\r\n\t\t\t\t\tiframe : {\r\n\t\t\t\t\t\tpreload : false,\r\n\t\t\t\t\t\tattr : {\r\n\t\t\t\t\t\t\tscrolling : \"no\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\titem.contentProvider = provider;\r\n\r\n\t\t\t\titem.opts.slideClass += ' fancybox-slide--' + ( provider == 'gmap_place' || provider == 'gmap_search' ? 'map' : 'video' );\r\n\t\t\t}\r\n\r\n\t\t} else if ( url ) {\r\n\t\t\titem.type = item.opts.defaultType;\r\n\t\t}\r\n\r\n\t});\r\n\r\n}( window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// Guestures\r\n// Adds touch guestures, handles click and tap events\r\n//\r\n// ==========================================================================\r\n;(function (window, document, $) {\r\n\t'use strict';\r\n\r\n\tvar requestAFrame = (function () {\r\n\t\treturn window.requestAnimationFrame ||\r\n\t\t\twindow.webkitRequestAnimationFrame ||\r\n\t\t\twindow.mozRequestAnimationFrame ||\r\n\t\t\twindow.oRequestAnimationFrame ||\r\n\t\t\t// if all else fails, use setTimeout\r\n\t\t\tfunction (callback) {\r\n\t\t\t\treturn window.setTimeout(callback, 1000 / 60);\r\n\t\t\t};\r\n\t})();\r\n\r\n\tvar cancelAFrame = (function () {\r\n\t\treturn window.cancelAnimationFrame ||\r\n\t\t\twindow.webkitCancelAnimationFrame ||\r\n\t\t\twindow.mozCancelAnimationFrame ||\r\n\t\t\twindow.oCancelAnimationFrame ||\r\n\t\t\tfunction (id) {\r\n\t\t\t\twindow.clearTimeout(id);\r\n\t\t\t};\r\n\t})();\r\n\r\n\tvar pointers = function( e ) {\r\n\t\tvar result = [];\r\n\r\n\t\te = e.originalEvent || e || window.e;\r\n\t\te = e.touches && e.touches.length ? e.touches : ( e.changedTouches && e.changedTouches.length ? e.changedTouches : [ e ] );\r\n\r\n\t\tfor ( var key in e ) {\r\n\r\n\t\t\tif ( e[ key ].pageX ) {\r\n\t\t\t\tresult.push( { x : e[ key ].pageX, y : e[ key ].pageY } );\r\n\r\n\t\t\t} else if ( e[ key ].clientX ) {\r\n\t\t\t\tresult.push( { x : e[ key ].clientX, y : e[ key ].clientY } );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t};\r\n\r\n\tvar distance = function( point2, point1, what ) {\r\n\t\tif ( !point1 || !point2 ) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tif ( what === 'x' ) {\r\n\t\t\treturn point2.x - point1.x;\r\n\r\n\t\t} else if ( what === 'y' ) {\r\n\t\t\treturn point2.y - point1.y;\r\n\t\t}\r\n\r\n\t\treturn Math.sqrt( Math.pow( point2.x - point1.x, 2 ) + Math.pow( point2.y - point1.y, 2 ) );\r\n\t};\r\n\r\n\tvar isClickable = function( $el ) {\r\n\t\tif ( $el.is('a,area,button,[role=\"button\"],input,label,select,summary,textarea') || $.isFunction( $el.get(0).onclick ) || $el.data('selectable') ) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// Check for attributes like data-fancybox-next or data-fancybox-close\r\n\t\tfor ( var i = 0, atts = $el[0].attributes, n = atts.length; i < n; i++ ) {\r\n\t\t\tif ( atts[i].nodeName.substr(0, 14) === 'data-fancybox-' ) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t \treturn false;\r\n\t};\r\n\r\n\tvar hasScrollbars = function( el ) {\r\n\t\tvar overflowY = window.getComputedStyle( el )['overflow-y'];\r\n\t\tvar overflowX = window.getComputedStyle( el )['overflow-x'];\r\n\r\n\t\tvar vertical   = (overflowY === 'scroll' || overflowY === 'auto') && el.scrollHeight > el.clientHeight;\r\n\t\tvar horizontal = (overflowX === 'scroll' || overflowX === 'auto') && el.scrollWidth > el.clientWidth;\r\n\r\n\t\treturn vertical || horizontal;\r\n\t};\r\n\r\n\tvar isScrollable = function ( $el ) {\r\n\t\tvar rez = false;\r\n\r\n\t\twhile ( true ) {\r\n\t\t\trez\t= hasScrollbars( $el.get(0) );\r\n\r\n\t\t\tif ( rez ) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\t$el = $el.parent();\r\n\r\n\t\t\tif ( !$el.length || $el.hasClass( 'fancybox-stage' ) || $el.is( 'body' ) ) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn rez;\r\n\t};\r\n\r\n\r\n\tvar Guestures = function ( instance ) {\r\n\t\tvar self = this;\r\n\r\n\t\tself.instance = instance;\r\n\r\n\t\tself.$bg        = instance.$refs.bg;\r\n\t\tself.$stage     = instance.$refs.stage;\r\n\t\tself.$container = instance.$refs.container;\r\n\r\n\t\tself.destroy();\r\n\r\n\t\tself.$container.on( 'touchstart.fb.touch mousedown.fb.touch', $.proxy(self, 'ontouchstart') );\r\n\t};\r\n\r\n\tGuestures.prototype.destroy = function() {\r\n\t\tthis.$container.off( '.fb.touch' );\r\n\t};\r\n\r\n\tGuestures.prototype.ontouchstart = function( e ) {\r\n\t\tvar self = this;\r\n\r\n\t\tvar $target  = $( e.target );\r\n\t\tvar instance = self.instance;\r\n\t\tvar current  = instance.current;\r\n\t\tvar $content = current.$content;\r\n\r\n\t\tvar isTouchDevice = ( e.type == 'touchstart' );\r\n\r\n\t\t// Do not respond to both (touch and mouse) events\r\n\t\tif ( isTouchDevice ) {\r\n\t\t\tself.$container.off( 'mousedown.fb.touch' );\r\n\t\t}\r\n\r\n\t\t// Ignore right click\r\n\t\tif ( e.originalEvent && e.originalEvent.button == 2 ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore taping on links, buttons, input elements\r\n\t\tif ( !$target.length || isClickable( $target ) || isClickable( $target.parent() ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore clicks on the scrollbar\r\n\t\tif ( !$target.is('img') && e.originalEvent.clientX > $target[0].clientWidth + $target.offset().left ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore clicks while zooming or closing\r\n\t\tif ( !current || self.instance.isAnimating || self.instance.isClosing ) {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tself.realPoints = self.startPoints = pointers( e );\r\n\r\n\t\tif ( !self.startPoints ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\te.stopPropagation();\r\n\r\n\t\tself.startEvent = e;\r\n\r\n\t\tself.canTap   = true;\r\n\t\tself.$target  = $target;\r\n\t\tself.$content = $content;\r\n\t\tself.opts     = current.opts.touch;\r\n\r\n\t\tself.isPanning   = false;\r\n\t\tself.isSwiping   = false;\r\n\t\tself.isZooming   = false;\r\n\t\tself.isScrolling = false;\r\n\r\n\t\tself.sliderStartPos  = self.sliderLastPos || { top: 0, left: 0 };\r\n\t\tself.contentStartPos = $.fancybox.getTranslate( self.$content );\r\n\t\tself.contentLastPos  = null;\r\n\r\n\t\tself.startTime = new Date().getTime();\r\n\t\tself.distanceX = self.distanceY = self.distance = 0;\r\n\r\n\t\tself.canvasWidth  = Math.round( current.$slide[0].clientWidth );\r\n\t\tself.canvasHeight = Math.round( current.$slide[0].clientHeight );\r\n\r\n\t\t$(document)\r\n\t\t\t.off( '.fb.touch' )\r\n\t\t\t.on( isTouchDevice ? 'touchend.fb.touch touchcancel.fb.touch' : 'mouseup.fb.touch mouseleave.fb.touch', $.proxy(self, \"ontouchend\"))\r\n\t\t\t.on( isTouchDevice ? 'touchmove.fb.touch' : 'mousemove.fb.touch', $.proxy(self, \"ontouchmove\"));\r\n\r\n\t\tif ( $.fancybox.isMobile ) {\r\n\t\t\tdocument.addEventListener('scroll', self.onscroll, true);\r\n\t\t}\r\n\r\n\t\tif ( !(self.opts || instance.canPan() ) || !( $target.is( self.$stage ) || self.$stage.find( $target ).length ) ) {\r\n\r\n\t\t\t// Prevent image ghosting while dragging\r\n\t\t\tif ( $target.is('img') ) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( !( $.fancybox.isMobile && ( isScrollable( $target ) || isScrollable( $target.parent() ) ) ) ) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tif ( self.startPoints.length === 1 ) {\r\n\t\t\tif ( current.type === 'image' && ( self.contentStartPos.width > self.canvasWidth + 1 || self.contentStartPos.height > self.canvasHeight + 1 ) ) {\r\n\t\t\t\t$.fancybox.stop( self.$content );\r\n\r\n\t\t\t\tself.$content.css( 'transition-duration', '' );\r\n\r\n\t\t\t\tself.isPanning = true;\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.isSwiping = true;\r\n\t\t\t}\r\n\r\n\t\t\tself.$container.addClass( 'fancybox-controls--isGrabbing' );\r\n\t\t}\r\n\r\n\t\tif ( self.startPoints.length === 2 && !instance.isAnimating && !current.hasError && current.type === 'image' && ( current.isLoaded || current.$ghost ) ) {\r\n\t\t\tself.canTap    = false;\r\n\t\t\tself.isSwiping = false;\r\n\t\t\tself.isPanning = false;\r\n\r\n\t\t\tself.isZooming = true;\r\n\r\n\t\t\t$.fancybox.stop( self.$content );\r\n\r\n\t\t\tself.$content.css( 'transition-duration', '' );\r\n\r\n\t\t\tself.centerPointStartX = ( ( self.startPoints[0].x + self.startPoints[1].x ) * 0.5 ) - $(window).scrollLeft();\r\n\t\t\tself.centerPointStartY = ( ( self.startPoints[0].y + self.startPoints[1].y ) * 0.5 ) - $(window).scrollTop();\r\n\r\n\t\t\tself.percentageOfImageAtPinchPointX = ( self.centerPointStartX - self.contentStartPos.left ) / self.contentStartPos.width;\r\n\t\t\tself.percentageOfImageAtPinchPointY = ( self.centerPointStartY - self.contentStartPos.top  ) / self.contentStartPos.height;\r\n\r\n\t\t\tself.startDistanceBetweenFingers = distance( self.startPoints[0], self.startPoints[1] );\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onscroll = function(e) {\r\n\t\tself.isScrolling = true;\r\n\t};\r\n\r\n\tGuestures.prototype.ontouchmove = function( e ) {\r\n\t\tvar self = this,\r\n\t\t\t$target = $(e.target);\r\n\r\n\t\tif ( self.isScrolling || !( $target.is( self.$stage ) || self.$stage.find( $target ).length ) ) {\r\n\t\t\tself.canTap = false;\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tself.newPoints = pointers( e );\r\n\r\n\t\tif ( !( self.opts || self.instance.canPan() ) || !self.newPoints || !self.newPoints.length ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( !(self.isSwiping && self.isSwiping === true) ) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tself.distanceX = distance( self.newPoints[0], self.startPoints[0], 'x' );\r\n\t\tself.distanceY = distance( self.newPoints[0], self.startPoints[0], 'y' );\r\n\r\n\t\tself.distance = distance( self.newPoints[0], self.startPoints[0] )\r\n\r\n\t\t// Skip false ontouchmove events (Chrome)\r\n\t\tif ( self.distance > 0 ) {\r\n\t\t\tif ( self.isSwiping ) {\r\n\t\t\t\tself.onSwipe(e);\r\n\r\n\t\t\t} else if ( self.isPanning ) {\r\n\t\t\t\tself.onPan();\r\n\r\n\t\t\t} else if ( self.isZooming ) {\r\n\t\t\t\tself.onZoom();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onSwipe = function(e) {\r\n\t\tvar self = this,\r\n\t\t\tswiping = self.isSwiping,\r\n\t\t\tleft    = self.sliderStartPos.left || 0,\r\n\t\t\tangle;\r\n\r\n\t\t// If direction is not yet determined\r\n\t\tif ( swiping === true ) {\r\n\r\n\t\t\t// We need at least 10px distance to correctly calculate an angle\r\n\t\t\tif ( Math.abs( self.distance ) > 10 ) {\r\n\t\t\t\tself.canTap = false;\r\n\r\n\t\t\t\tif ( self.instance.group.length < 2 && self.opts.vertical ) {\r\n\t\t\t\t\tself.isSwiping = 'y';\r\n\r\n\t\t\t\t} else if ( self.instance.isDragging || self.opts.vertical === false || ( self.opts.vertical === 'auto' && $( window ).width() > 800 ) ) {\r\n\t\t\t\t\tself.isSwiping = 'x';\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tangle = Math.abs( Math.atan2( self.distanceY, self.distanceX ) * 180 / Math.PI );\r\n\r\n\t\t\t\t\tself.isSwiping = ( angle > 45 && angle < 135 ) ? 'y' : 'x';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.canTap = false;\r\n\r\n\t\t\t\t if ( self.isSwiping === 'y' && $.fancybox.isMobile && ( isScrollable( self.$target ) || isScrollable( self.$target.parent() ) ) ) {\r\n\t\t\t\t\t self.isScrolling = true;\r\n\r\n\t\t\t\t\t return;\r\n\t\t\t\t }\r\n\r\n\t\t\t\tself.instance.isDragging = self.isSwiping;\r\n\r\n\t\t\t\t// Reset points to avoid jumping, because we dropped first swipes to calculate the angle\r\n\t\t\t\tself.startPoints = self.newPoints;\r\n\r\n\t\t\t\t$.each(self.instance.slides, function( index, slide ) {\r\n\t\t\t\t\t$.fancybox.stop( slide.$slide );\r\n\r\n\t\t\t\t\tslide.$slide.css( 'transition-duration', '' );\r\n\r\n\t\t\t\t\tslide.inTransition = false;\r\n\r\n\t\t\t\t\tif ( slide.pos === self.instance.current.pos ) {\r\n\t\t\t\t\t\tself.sliderStartPos.left = $.fancybox.getTranslate( slide.$slide ).left;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Stop slideshow\r\n\t\t\t\tif ( self.instance.SlideShow && self.instance.SlideShow.isActive ) {\r\n\t\t\t\t\tself.instance.SlideShow.stop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Sticky edges\r\n\t\tif ( swiping == 'x' ) {\r\n\t\t\tif ( self.distanceX > 0 && ( self.instance.group.length < 2 || ( self.instance.current.index === 0 && !self.instance.current.opts.loop ) ) ) {\r\n\t\t\t\tleft = left + Math.pow( self.distanceX, 0.8 );\r\n\r\n\t\t\t} else if ( self.distanceX < 0 && ( self.instance.group.length < 2 || ( self.instance.current.index === self.instance.group.length - 1 && !self.instance.current.opts.loop ) ) ) {\r\n\t\t\t\tleft = left - Math.pow( -self.distanceX, 0.8 );\r\n\r\n\t\t\t} else {\r\n\t\t\t\tleft = left + self.distanceX;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tself.sliderLastPos = {\r\n\t\t\ttop  : swiping == 'x' ? 0 : self.sliderStartPos.top + self.distanceY,\r\n\t\t\tleft : left\r\n\t\t};\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.requestId = requestAFrame(function() {\r\n\r\n\t\t\tif ( self.sliderLastPos ) {\r\n\t\t\t\t$.each(self.instance.slides, function( index, slide ) {\r\n\t\t\t\t\tvar pos = slide.pos - self.instance.currPos;\r\n\r\n\t\t\t\t\t$.fancybox.setTranslate( slide.$slide, {\r\n\t\t\t\t\t\ttop  : self.sliderLastPos.top,\r\n\t\t\t\t\t\tleft : self.sliderLastPos.left + ( pos * self.canvasWidth ) + ( pos * slide.opts.gutter )\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tself.$container.addClass( 'fancybox-is-sliding' );\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onPan = function() {\r\n\t\tvar self = this;\r\n\r\n\t\t// Sometimes, when tapping causally, image can move a bit and that breaks double tapping\r\n\t\tif ( distance( self.newPoints[0], self.realPoints[0] ) < ($.fancybox.isMobile ? 10 : 5) ) {\r\n\t\t\tself.startPoints = self.newPoints;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tself.canTap = false;\r\n\r\n\t\tself.contentLastPos = self.limitMovement();\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.requestId = requestAFrame(function() {\r\n\t\t\t$.fancybox.setTranslate( self.$content, self.contentLastPos );\r\n\t\t});\r\n\t};\r\n\r\n\t// Make panning sticky to the edges\r\n\tGuestures.prototype.limitMovement = function() {\r\n\t\tvar self = this;\r\n\r\n\t\tvar canvasWidth  = self.canvasWidth;\r\n\t\tvar canvasHeight = self.canvasHeight;\r\n\r\n\t\tvar distanceX = self.distanceX;\r\n\t\tvar distanceY = self.distanceY;\r\n\r\n\t\tvar contentStartPos = self.contentStartPos;\r\n\r\n\t\tvar currentOffsetX = contentStartPos.left;\r\n\t\tvar currentOffsetY = contentStartPos.top;\r\n\r\n\t\tvar currentWidth  = contentStartPos.width;\r\n\t\tvar currentHeight = contentStartPos.height;\r\n\r\n\t\tvar minTranslateX, minTranslateY,\r\n\t\t\tmaxTranslateX, maxTranslateY,\r\n\t\t\tnewOffsetX, newOffsetY;\r\n\r\n\t\tif ( currentWidth > canvasWidth ) {\r\n\t\t\tnewOffsetX = currentOffsetX + distanceX;\r\n\r\n\t\t} else {\r\n\t\t\tnewOffsetX = currentOffsetX;\r\n\t\t}\r\n\r\n\t\tnewOffsetY = currentOffsetY + distanceY;\r\n\r\n\t\t// Slow down proportionally to traveled distance\r\n\t\tminTranslateX = Math.max( 0, canvasWidth  * 0.5 - currentWidth  * 0.5 );\r\n\t\tminTranslateY = Math.max( 0, canvasHeight * 0.5 - currentHeight * 0.5 );\r\n\r\n\t\tmaxTranslateX = Math.min( canvasWidth  - currentWidth,  canvasWidth  * 0.5 - currentWidth  * 0.5 );\r\n\t\tmaxTranslateY = Math.min( canvasHeight - currentHeight, canvasHeight * 0.5 - currentHeight * 0.5 );\r\n\r\n\t\tif ( currentWidth > canvasWidth ) {\r\n\r\n\t\t\t//   ->\r\n\t\t\tif ( distanceX > 0 && newOffsetX > minTranslateX ) {\r\n\t\t\t\tnewOffsetX = minTranslateX - 1 + Math.pow( -minTranslateX + currentOffsetX + distanceX, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t\t//    <-\r\n\t\t\tif ( distanceX < 0 && newOffsetX < maxTranslateX ) {\r\n\t\t\t\tnewOffsetX = maxTranslateX + 1 - Math.pow( maxTranslateX - currentOffsetX - distanceX, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( currentHeight > canvasHeight ) {\r\n\r\n\t\t\t//   \\/\r\n\t\t\tif ( distanceY > 0 && newOffsetY > minTranslateY ) {\r\n\t\t\t\tnewOffsetY = minTranslateY - 1 + Math.pow(-minTranslateY + currentOffsetY + distanceY, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t\t//   /\\\r\n\t\t\tif ( distanceY < 0 && newOffsetY < maxTranslateY ) {\r\n\t\t\t\tnewOffsetY = maxTranslateY + 1 - Math.pow ( maxTranslateY - currentOffsetY - distanceY, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttop    : newOffsetY,\r\n\t\t\tleft   : newOffsetX,\r\n\t\t\tscaleX : contentStartPos.scaleX,\r\n\t\t\tscaleY : contentStartPos.scaleY\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.limitPosition = function( newOffsetX, newOffsetY, newWidth, newHeight ) {\r\n\t\tvar self = this;\r\n\r\n\t\tvar canvasWidth  = self.canvasWidth;\r\n\t\tvar canvasHeight = self.canvasHeight;\r\n\r\n\t\tif ( newWidth > canvasWidth ) {\r\n\t\t\tnewOffsetX = newOffsetX > 0 ? 0 : newOffsetX;\r\n\t\t\tnewOffsetX = newOffsetX < canvasWidth - newWidth ? canvasWidth - newWidth : newOffsetX;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Center horizontally\r\n\t\t\tnewOffsetX = Math.max( 0, canvasWidth / 2 - newWidth / 2 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( newHeight > canvasHeight ) {\r\n\t\t\tnewOffsetY = newOffsetY > 0 ? 0 : newOffsetY;\r\n\t\t\tnewOffsetY = newOffsetY < canvasHeight - newHeight ? canvasHeight - newHeight : newOffsetY;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Center vertically\r\n\t\t\tnewOffsetY = Math.max( 0, canvasHeight / 2 - newHeight / 2 );\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttop  : newOffsetY,\r\n\t\t\tleft : newOffsetX\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onZoom = function() {\r\n\t\tvar self = this;\r\n\r\n\t\t// Calculate current distance between points to get pinch ratio and new width and height\r\n\r\n\t\tvar currentWidth  = self.contentStartPos.width;\r\n\t\tvar currentHeight = self.contentStartPos.height;\r\n\r\n\t\tvar currentOffsetX = self.contentStartPos.left;\r\n\t\tvar currentOffsetY = self.contentStartPos.top;\r\n\r\n\t\tvar endDistanceBetweenFingers = distance( self.newPoints[0], self.newPoints[1] );\r\n\r\n\t\tvar pinchRatio = endDistanceBetweenFingers / self.startDistanceBetweenFingers;\r\n\r\n\t\tvar newWidth  = Math.floor( currentWidth  * pinchRatio );\r\n\t\tvar newHeight = Math.floor( currentHeight * pinchRatio );\r\n\r\n\t\t// This is the translation due to pinch-zooming\r\n\t\tvar translateFromZoomingX = (currentWidth  - newWidth)  * self.percentageOfImageAtPinchPointX;\r\n\t\tvar translateFromZoomingY = (currentHeight - newHeight) * self.percentageOfImageAtPinchPointY;\r\n\r\n\t\t//Point between the two touches\r\n\r\n\t\tvar centerPointEndX = ((self.newPoints[0].x + self.newPoints[1].x) / 2) - $(window).scrollLeft();\r\n\t\tvar centerPointEndY = ((self.newPoints[0].y + self.newPoints[1].y) / 2) - $(window).scrollTop();\r\n\r\n\t\t// And this is the translation due to translation of the centerpoint\r\n\t\t// between the two fingers\r\n\r\n\t\tvar translateFromTranslatingX = centerPointEndX - self.centerPointStartX;\r\n\t\tvar translateFromTranslatingY = centerPointEndY - self.centerPointStartY;\r\n\r\n\t\t// The new offset is the old/current one plus the total translation\r\n\r\n\t\tvar newOffsetX = currentOffsetX + ( translateFromZoomingX + translateFromTranslatingX );\r\n\t\tvar newOffsetY = currentOffsetY + ( translateFromZoomingY + translateFromTranslatingY );\r\n\r\n\t\tvar newPos = {\r\n\t\t\ttop    : newOffsetY,\r\n\t\t\tleft   : newOffsetX,\r\n\t\t\tscaleX : self.contentStartPos.scaleX * pinchRatio,\r\n\t\t\tscaleY : self.contentStartPos.scaleY * pinchRatio\r\n\t\t};\r\n\r\n\t\tself.canTap = false;\r\n\r\n\t\tself.newWidth  = newWidth;\r\n\t\tself.newHeight = newHeight;\r\n\r\n\t\tself.contentLastPos = newPos;\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.requestId = requestAFrame(function() {\r\n\t\t\t$.fancybox.setTranslate( self.$content, self.contentLastPos );\r\n\t\t});\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.ontouchend = function( e ) {\r\n\t\tvar self = this;\r\n\t\tvar dMs  = Math.max( (new Date().getTime() ) - self.startTime, 1);\r\n\r\n\t\tvar swiping   = self.isSwiping;\r\n\t\tvar panning   = self.isPanning;\r\n\t\tvar zooming   = self.isZooming;\r\n\t\tvar scrolling = self.isScrolling;\r\n\r\n\t\tself.endPoints = pointers( e );\r\n\r\n\t\tself.$container.removeClass( 'fancybox-controls--isGrabbing' );\r\n\r\n\t\t$(document).off( '.fb.touch' );\r\n\r\n\t\tdocument.removeEventListener('scroll', self.onscroll, true);\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.isSwiping   = false;\r\n\t\tself.isPanning   = false;\r\n\t\tself.isZooming   = false;\r\n\t\tself.isScrolling = false;\r\n\r\n\t\tself.instance.isDragging = false;\r\n\r\n\t\tif ( self.canTap ) {\r\n\t\t\treturn self.onTap( e );\r\n\t\t}\r\n\r\n\t\tself.speed = 366;\r\n\r\n\t\t// Speed in px/ms\r\n\t\tself.velocityX = self.distanceX / dMs * 0.5;\r\n\t\tself.velocityY = self.distanceY / dMs * 0.5;\r\n\r\n\t\tself.speedX = Math.max( self.speed * 0.5, Math.min( self.speed * 1.5, ( 1 / Math.abs( self.velocityX ) ) * self.speed ) );\r\n\r\n\t\tif ( panning ) {\r\n\t\t\tself.endPanning();\r\n\r\n\t\t} else if ( zooming ) {\r\n\t\t\tself.endZooming();\r\n\r\n\t\t} else {\r\n\t\t\tself.endSwiping( swiping, scrolling );\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t};\r\n\r\n\tGuestures.prototype.endSwiping = function( swiping, scrolling ) {\r\n\t\tvar self = this,\r\n\t\t\tret  = false,\r\n\t\t\tlen  = self.instance.group.length;\r\n\r\n\t\tself.sliderLastPos = null;\r\n\r\n\t\t// Close if swiped vertically / navigate if horizontally\r\n\t\tif ( swiping == 'y' && !scrolling && Math.abs( self.distanceY ) > 50 ) {\r\n\r\n\t\t\t// Continue vertical movement\r\n\t\t\t$.fancybox.animate( self.instance.current.$slide, {\r\n\t\t\t\ttop     : self.sliderStartPos.top + self.distanceY + ( self.velocityY * 150 ),\r\n\t\t\t\topacity : 0\r\n\t\t\t}, 150 );\r\n\r\n\t\t\tret = self.instance.close( true, 300 );\r\n\r\n\t\t} else if ( swiping == 'x' && self.distanceX > 50 && len > 1 ) {\r\n\t\t\tret = self.instance.previous( self.speedX );\r\n\r\n\t\t} else if ( swiping == 'x' && self.distanceX < -50 && len > 1 ) {\r\n\t\t\tret = self.instance.next( self.speedX );\r\n\t\t}\r\n\r\n\t\tif ( ret === false && ( swiping == 'x' || swiping == 'y' ) ) {\r\n\t\t\tif ( scrolling || len < 2 ) {\r\n\t\t\t\tself.instance.centerSlide( self.instance.current, 150 );\r\n\t\t\t} else {\r\n\t\t\t\tself.instance.jumpTo( self.instance.current.index );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tself.$container.removeClass( 'fancybox-is-sliding' );\r\n\r\n\t};\r\n\r\n\t// Limit panning from edges\r\n\t// ========================\r\n\r\n\tGuestures.prototype.endPanning = function() {\r\n\r\n\t\tvar self = this;\r\n\t\tvar newOffsetX, newOffsetY, newPos;\r\n\r\n\t\tif ( !self.contentLastPos ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( self.opts.momentum === false ) {\r\n\t\t\tnewOffsetX = self.contentLastPos.left;\r\n\t\t\tnewOffsetY = self.contentLastPos.top;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Continue movement\r\n\t\t\tnewOffsetX = self.contentLastPos.left + ( self.velocityX * self.speed );\r\n\t\t\tnewOffsetY = self.contentLastPos.top  + ( self.velocityY * self.speed );\r\n\t\t}\r\n\r\n\t\tnewPos = self.limitPosition( newOffsetX, newOffsetY, self.contentStartPos.width, self.contentStartPos.height );\r\n\r\n\t\t newPos.width  = self.contentStartPos.width;\r\n\t\t newPos.height = self.contentStartPos.height;\r\n\r\n\t\t$.fancybox.animate( self.$content, newPos, 330 );\r\n\t};\r\n\r\n\r\n\tGuestures.prototype.endZooming = function() {\r\n\t\tvar self = this;\r\n\r\n\t\tvar current = self.instance.current;\r\n\r\n\t\tvar newOffsetX, newOffsetY, newPos, reset;\r\n\r\n\t\tvar newWidth  = self.newWidth;\r\n\t\tvar newHeight = self.newHeight;\r\n\r\n\t\tif ( !self.contentLastPos ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tnewOffsetX = self.contentLastPos.left;\r\n\t\tnewOffsetY = self.contentLastPos.top;\r\n\r\n\t\treset = {\r\n\t\t\ttop    : newOffsetY,\r\n\t\t\tleft   : newOffsetX,\r\n\t\t\twidth  : newWidth,\r\n\t\t\theight : newHeight,\r\n\t\t\tscaleX : 1,\r\n\t\t\tscaleY : 1\r\n\t\t};\r\n\r\n\t\t// Reset scalex/scaleY values; this helps for perfomance and does not break animation\r\n\t\t$.fancybox.setTranslate( self.$content, reset );\r\n\r\n\t\tif ( newWidth < self.canvasWidth && newHeight < self.canvasHeight ) {\r\n\t\t\tself.instance.scaleToFit( 150 );\r\n\r\n\t\t} else if ( newWidth > current.width || newHeight > current.height ) {\r\n\t\t\tself.instance.scaleToActual( self.centerPointStartX, self.centerPointStartY, 150 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnewPos = self.limitPosition( newOffsetX, newOffsetY, newWidth, newHeight );\r\n\r\n\t\t\t// Switch from scale() to width/height or animation will not work correctly\r\n\t\t\t$.fancybox.setTranslate( self.content, $.fancybox.getTranslate( self.$content ) );\r\n\r\n\t\t\t$.fancybox.animate( self.$content, newPos, 150 );\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onTap = function(e) {\r\n\t\tvar self    = this;\r\n\t\tvar $target = $( e.target );\r\n\r\n\t\tvar instance = self.instance;\r\n\t\tvar current  = instance.current;\r\n\r\n\t\tvar endPoints = ( e && pointers( e ) ) || self.startPoints;\r\n\r\n\t\tvar tapX = endPoints[0] ? endPoints[0].x - self.$stage.offset().left : 0;\r\n\t\tvar tapY = endPoints[0] ? endPoints[0].y - self.$stage.offset().top  : 0;\r\n\r\n\t\tvar where;\r\n\r\n\t\tvar process = function ( prefix ) {\r\n\r\n\t\t\tvar action = current.opts[ prefix ];\r\n\r\n\t\t\tif ( $.isFunction( action ) ) {\r\n\t\t\t\taction = action.apply( instance, [ current, e ] );\r\n\t\t\t}\r\n\r\n\t\t\tif ( !action) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( action ) {\r\n\r\n\t\t\t\tcase \"close\" :\r\n\r\n\t\t\t\t\tinstance.close( self.startEvent );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"toggleControls\" :\r\n\r\n\t\t\t\t\tinstance.toggleControls( true );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"next\" :\r\n\r\n\t\t\t\t\tinstance.next();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"nextOrClose\" :\r\n\r\n\t\t\t\t\tif ( instance.group.length > 1 ) {\r\n\t\t\t\t\t\tinstance.next();\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tinstance.close( self.startEvent );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"zoom\" :\r\n\r\n\t\t\t\t\tif ( current.type == 'image' && ( current.isLoaded || current.$ghost ) ) {\r\n\r\n\t\t\t\t\t\tif ( instance.canPan() ) {\r\n\t\t\t\t\t\t\tinstance.scaleToFit();\r\n\r\n\t\t\t\t\t\t} else if ( instance.isScaledDown() ) {\r\n\t\t\t\t\t\t\tinstance.scaleToActual( tapX, tapY );\r\n\r\n\t\t\t\t\t\t} else if ( instance.group.length < 2 ) {\r\n\t\t\t\t\t\t\tinstance.close( self.startEvent );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\t// Ignore right click\r\n\t\tif ( e.originalEvent && e.originalEvent.button == 2 ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Skip if clicked on the scrollbar\r\n\t\tif ( !$target.is('img') && tapX > $target[0].clientWidth + $target.offset().left ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Check where is clicked\r\n\t\tif ( $target.is( '.fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container' ) ) {\r\n\t\t\twhere = 'Outside';\r\n\r\n\t\t} else if ( $target.is( '.fancybox-slide' ) ) {\r\n\t\t\twhere = 'Slide';\r\n\r\n\t\t} else if ( instance.current.$content && instance.current.$content.find( $target ).addBack().filter( $target ).length ) {\r\n\t\t \twhere = 'Content';\r\n\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Check if this is a double tap\r\n\t\tif ( self.tapped ) {\r\n\r\n\t\t\t// Stop previously created single tap\r\n\t\t\tclearTimeout( self.tapped );\r\n\t\t\tself.tapped = null;\r\n\r\n\t\t\t// Skip if distance between taps is too big\r\n\t\t\tif ( Math.abs( tapX - self.tapX ) > 50 || Math.abs( tapY - self.tapY ) > 50 ) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\r\n\t\t\t// OK, now we assume that this is a double-tap\r\n\t\t\tprocess( 'dblclick' + where );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Single tap will be processed if user has not clicked second time within 300ms\r\n\t\t\t// or there is no need to wait for double-tap\r\n\t\t\tself.tapX = tapX;\r\n\t\t\tself.tapY = tapY;\r\n\r\n\t\t\tif ( current.opts[ 'dblclick' + where ] && current.opts[ 'dblclick' + where ] !== current.opts[ 'click' + where ] ) {\r\n\r\n\t\t\t\tself.tapped = setTimeout(function() {\r\n\t\t\t\t\tself.tapped = null;\r\n\r\n\t\t\t\t\tprocess( 'click' + where );\r\n\r\n\t\t\t\t}, 500);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocess( 'click' + where );\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t};\r\n\r\n\t$(document).on('onActivate.fb', function (e, instance) {\r\n\t\tif ( instance && !instance.Guestures ) {\r\n\t\t\tinstance.Guestures = new Guestures( instance );\r\n\t\t}\r\n\t});\r\n\r\n}( window, document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// SlideShow\r\n// Enables slideshow functionality\r\n//\r\n// Example of usage:\r\n// $.fancybox.getInstance().SlideShow.start()\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\t$.extend(true, $.fancybox.defaults, {\r\n\t\tbtnTpl : {\r\n\t\t\tslideShow :\r\n\t\t\t\t'<button data-fancybox-play class=\"fancybox-button fancybox-button--play\" title=\"{{PLAY_START}}\">' +\r\n\t\t\t\t\t'<svg viewBox=\"0 0 40 40\">' +\r\n\t\t\t\t\t\t'<path d=\"M13,12 L27,20 L13,27 Z\" />' +\r\n\t\t\t\t\t\t'<path d=\"M15,10 v19 M23,10 v19\" />' +\r\n\t\t\t\t\t'</svg>' +\r\n\t\t\t\t'</button>'\r\n\t\t},\r\n\t\tslideShow : {\r\n\t\t\tautoStart : false,\r\n            speed     : 3000\r\n\t\t}\r\n\t});\r\n\r\n\tvar SlideShow = function( instance ) {\r\n\t\tthis.instance = instance;\r\n\t\tthis.init();\r\n\t};\r\n\r\n\t$.extend( SlideShow.prototype, {\r\n\t\ttimer    : null,\r\n\t\tisActive : false,\r\n\t\t$button  : null,\r\n\r\n\t\tinit : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tself.$button = self.instance.$refs.toolbar.find('[data-fancybox-play]').on('click', function() {\r\n\t\t\t\tself.toggle();\r\n\t\t\t});\r\n\r\n\t\t\tif ( self.instance.group.length < 2 || !self.instance.group[ self.instance.currIndex ].opts.slideShow ) {\r\n\t\t\t\tself.$button.hide();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tset : function( force ) {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\t// Check if reached last element\r\n\t\t\tif ( self.instance && self.instance.current && (force === true || self.instance.current.opts.loop || self.instance.currIndex < self.instance.group.length - 1 )) {\r\n\t\t\t\tself.timer = setTimeout(function() {\r\n\t\t\t\t\tif ( self.isActive ) {\r\n\t\t\t\t\t\tself.instance.jumpTo( (self.instance.currIndex + 1) % self.instance.group.length );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}, self.instance.current.opts.slideShow.speed);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.stop();\r\n\t\t\t\tself.instance.idleSecondsCounter = 0;\r\n\t\t\t\tself.instance.showControls();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclear : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tclearTimeout( self.timer );\r\n\r\n\t\t\tself.timer = null;\r\n\t\t},\r\n\r\n\t\tstart : function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar current = self.instance.current;\r\n\r\n\t\t\tif ( current ) {\r\n\t\t\t\tself.isActive = true;\r\n\r\n\t\t\t\tself.$button\r\n\t\t\t\t\t.attr( 'title', current.opts.i18n[ current.opts.lang ].PLAY_STOP )\r\n\t\t\t\t\t.removeClass( 'fancybox-button--play' )\r\n\t\t\t\t\t.addClass( 'fancybox-button--pause' );\r\n\r\n\t\t\t\t\tself.set( true );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tstop : function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar current = self.instance.current;\r\n\r\n\t\t\tself.clear();\r\n\r\n\t\t\tself.$button\r\n\t\t\t\t.attr( 'title', current.opts.i18n[ current.opts.lang ].PLAY_START )\r\n\t\t\t\t.removeClass( 'fancybox-button--pause' )\r\n\t\t\t\t.addClass( 'fancybox-button--play' );\r\n\r\n\t\t\tself.isActive = false;\r\n\t\t},\r\n\r\n\t\ttoggle : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tif ( self.isActive ) {\r\n\t\t\t\tself.stop();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.start();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(document).on({\r\n\t\t'onInit.fb' : function(e, instance) {\r\n\t\t\tif ( instance && !instance.SlideShow ) {\r\n\t\t\t\tinstance.SlideShow = new SlideShow( instance );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeShow.fb' : function(e, instance, current, firstRun) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\tif ( firstRun ) {\r\n\r\n\t\t\t\tif ( SlideShow && current.opts.slideShow.autoStart ) {\r\n\t\t\t\t\tSlideShow.start();\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( SlideShow && SlideShow.isActive )  {\r\n\t\t\t\tSlideShow.clear();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'afterShow.fb' : function(e, instance, current) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\tif ( SlideShow && SlideShow.isActive ) {\r\n\t\t\t\tSlideShow.set();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\t// \"P\" or Spacebar\r\n\t\t\tif ( SlideShow && current.opts.slideShow && ( keycode === 80 || keycode === 32 ) && !$(document.activeElement).is( 'button,a,input' ) ) {\r\n\t\t\t\tkeypress.preventDefault();\r\n\r\n\t\t\t\tSlideShow.toggle();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeClose.fb onDeactivate.fb' : function(e, instance) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\tif ( SlideShow ) {\r\n\t\t\t\tSlideShow.stop();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t// Page Visibility API to pause slideshow when window is not active\r\n\t$(document).on(\"visibilitychange\", function() {\r\n\t\tvar instance  = $.fancybox.getInstance();\r\n\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\tif ( SlideShow && SlideShow.isActive ) {\r\n\t\t\tif ( document.hidden ) {\r\n\t\t\t\tSlideShow.clear();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tSlideShow.set();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n}( document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// FullScreen\r\n// Adds fullscreen functionality\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\t// Collection of methods supported by user browser\r\n\tvar fn = (function () {\r\n\r\n\t\tvar fnMap = [\r\n\t\t\t[\r\n\t\t\t\t'requestFullscreen',\r\n\t\t\t\t'exitFullscreen',\r\n\t\t\t\t'fullscreenElement',\r\n\t\t\t\t'fullscreenEnabled',\r\n\t\t\t\t'fullscreenchange',\r\n\t\t\t\t'fullscreenerror'\r\n\t\t\t],\r\n\t\t\t// new WebKit\r\n\t\t\t[\r\n\t\t\t\t'webkitRequestFullscreen',\r\n\t\t\t\t'webkitExitFullscreen',\r\n\t\t\t\t'webkitFullscreenElement',\r\n\t\t\t\t'webkitFullscreenEnabled',\r\n\t\t\t\t'webkitfullscreenchange',\r\n\t\t\t\t'webkitfullscreenerror'\r\n\r\n\t\t\t],\r\n\t\t\t// old WebKit (Safari 5.1)\r\n\t\t\t[\r\n\t\t\t\t'webkitRequestFullScreen',\r\n\t\t\t\t'webkitCancelFullScreen',\r\n\t\t\t\t'webkitCurrentFullScreenElement',\r\n\t\t\t\t'webkitCancelFullScreen',\r\n\t\t\t\t'webkitfullscreenchange',\r\n\t\t\t\t'webkitfullscreenerror'\r\n\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t'mozRequestFullScreen',\r\n\t\t\t\t'mozCancelFullScreen',\r\n\t\t\t\t'mozFullScreenElement',\r\n\t\t\t\t'mozFullScreenEnabled',\r\n\t\t\t\t'mozfullscreenchange',\r\n\t\t\t\t'mozfullscreenerror'\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t'msRequestFullscreen',\r\n\t\t\t\t'msExitFullscreen',\r\n\t\t\t\t'msFullscreenElement',\r\n\t\t\t\t'msFullscreenEnabled',\r\n\t\t\t\t'MSFullscreenChange',\r\n\t\t\t\t'MSFullscreenError'\r\n\t\t\t]\r\n\t\t];\r\n\r\n\t\tvar val;\r\n\t\tvar ret = {};\r\n\t\tvar i, j;\r\n\r\n\t\tfor ( i = 0; i < fnMap.length; i++ ) {\r\n\t\t\tval = fnMap[ i ];\r\n\r\n\t\t\tif ( val && val[ 1 ] in document ) {\r\n\t\t\t\tfor ( j = 0; j < val.length; j++ ) {\r\n\t\t\t\t\tret[ fnMap[ 0 ][ j ] ] = val[ j ];\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn ret;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t})();\r\n\r\n\t// If browser does not have Full Screen API, then simply unset default button template and stop\r\n\tif ( !fn ) {\r\n\r\n\t\tif ( $ && $.fancybox ) {\r\n\t\t\t$.fancybox.defaults.btnTpl.fullScreen = false;\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar FullScreen = {\r\n\r\n\t\trequest : function ( elem ) {\r\n\r\n\t\t\telem = elem || document.documentElement;\r\n\r\n\t\t\telem[ fn.requestFullscreen ]( elem.ALLOW_KEYBOARD_INPUT );\r\n\r\n\t\t},\r\n\t\texit : function () {\r\n\r\n\t\t\tdocument[ fn.exitFullscreen ]();\r\n\r\n\t\t},\r\n\t\ttoggle : function ( elem ) {\r\n\r\n\t\t\telem = elem || document.documentElement;\r\n\r\n\t\t\tif ( this.isFullscreen() ) {\r\n\t\t\t\tthis.exit();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.request( elem );\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tisFullscreen : function()  {\r\n\r\n\t\t\treturn Boolean( document[ fn.fullscreenElement ] );\r\n\r\n\t\t},\r\n\t\tenabled : function()  {\r\n\r\n\t\t\treturn Boolean( document[ fn.fullscreenEnabled ] );\r\n\r\n\t\t}\r\n\t};\r\n\r\n\t$.extend(true, $.fancybox.defaults, {\r\n\t\tbtnTpl : {\r\n\t\t\tfullScreen :\r\n\t\t\t\t'<button data-fancybox-fullscreen class=\"fancybox-button fancybox-button--fullscreen\" title=\"{{FULL_SCREEN}}\">' +\r\n\t\t\t\t\t'<svg viewBox=\"0 0 40 40\">' +\r\n\t\t\t\t\t\t'<path d=\"M9,12 h22 v16 h-22 v-16 v16 h22 v-16 Z\" />' +\r\n\t\t\t\t\t'</svg>' +\r\n\t\t\t\t'</button>'\r\n\t\t},\r\n\t\tfullScreen : {\r\n\t\t\tautoStart : false\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).on({\r\n\t\t'onInit.fb' : function(e, instance) {\r\n\t\t\tvar $container;\r\n\r\n\t\t\tif ( instance && instance.group[ instance.currIndex ].opts.fullScreen ) {\r\n\t\t\t\t$container = instance.$refs.container;\r\n\r\n\t\t\t\t$container.on('click.fb-fullscreen', '[data-fancybox-fullscreen]', function(e) {\r\n\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tFullScreen.toggle( $container[ 0 ] );\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif ( instance.opts.fullScreen && instance.opts.fullScreen.autoStart === true ) {\r\n\t\t\t\t\tFullScreen.request( $container[ 0 ] );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Expose API\r\n\t\t\t\tinstance.FullScreen = FullScreen;\r\n\r\n\t\t\t} else if ( instance ) {\r\n\t\t\t\tinstance.$refs.toolbar.find('[data-fancybox-fullscreen]').hide();\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\r\n\r\n\t\t\t// \"P\" or Spacebar\r\n\t\t\tif ( instance && instance.FullScreen && keycode === 70 ) {\r\n\t\t\t\tkeypress.preventDefault();\r\n\r\n\t\t\t\tinstance.FullScreen.toggle( instance.$refs.container[ 0 ] );\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t'beforeClose.fb' : function( instance ) {\r\n\t\t\tif ( instance && instance.FullScreen ) {\r\n\t\t\t\tFullScreen.exit();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).on(fn.fullscreenchange, function() {\r\n\t\tvar isFullscreen = FullScreen.isFullscreen(),\r\n\t\t\tinstance = $.fancybox.getInstance();\r\n\r\n\t\tif ( instance ) {\r\n\r\n\t\t\t// If image is zooming, then force to stop and reposition properly\r\n\t\t\tif ( instance.current && instance.current.type === 'image' && instance.isAnimating ) {\r\n\t\t\t\tinstance.current.$content.css( 'transition', 'none' );\r\n\r\n\t\t\t\tinstance.isAnimating = false;\r\n\r\n\t\t\t\tinstance.update( true, true, 0 );\r\n\t\t\t}\r\n\r\n\t\t\tinstance.trigger( 'onFullscreenChange', isFullscreen );\r\n\r\n\t\t\tinstance.$refs.container.toggleClass( 'fancybox-is-fullscreen', isFullscreen );\r\n\t\t}\r\n\r\n\t});\r\n\r\n}( document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// Thumbs\r\n// Displays thumbnails in a grid\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\t// Make sure there are default values\r\n\t$.fancybox.defaults = $.extend(true, {\r\n\t\tbtnTpl : {\r\n\t\t\tthumbs :\r\n\t\t\t'<button data-fancybox-thumbs class=\"fancybox-button fancybox-button--thumbs\" title=\"{{THUMBS}}\">' +\r\n\t\t\t\t'<svg viewBox=\"0 0 120 120\">' +\r\n\t\t\t\t\t'<path d=\"M30,30 h14 v14 h-14 Z M50,30 h14 v14 h-14 Z M70,30 h14 v14 h-14 Z M30,50 h14 v14 h-14 Z M50,50 h14 v14 h-14 Z M70,50 h14 v14 h-14 Z M30,70 h14 v14 h-14 Z M50,70 h14 v14 h-14 Z M70,70 h14 v14 h-14 Z\" />' +\r\n\t\t\t\t'</svg>' +\r\n\t\t\t'</button>'\r\n\t\t},\r\n\t\tthumbs : {\r\n\t\t\tautoStart   : false,                  // Display thumbnails on opening\r\n\t\t\thideOnClose : true,                   // Hide thumbnail grid when closing animation starts\r\n\t\t\tparentEl    : '.fancybox-container',  // Container is injected into this element\r\n\t\t\taxis        : 'y'                     // Vertical (y) or horizontal (x) scrolling\r\n\t\t}\r\n\t}, $.fancybox.defaults);\r\n\r\n\tvar FancyThumbs = function( instance ) {\r\n\t\tthis.init( instance );\r\n\t};\r\n\r\n\t$.extend( FancyThumbs.prototype, {\r\n\r\n\t\t$button\t\t: null,\r\n\t\t$grid\t\t: null,\r\n\t\t$list\t\t: null,\r\n\t\tisVisible\t: false,\r\n\t\tisActive\t: false,\r\n\r\n\t\tinit : function( instance ) {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tself.instance = instance;\r\n\r\n\t\t\tinstance.Thumbs = self;\r\n\r\n\t\t\t// Enable thumbs if at least two group items have thumbnails\r\n\t\t\tvar first  = instance.group[0],\r\n\t\t\t\tsecond = instance.group[1];\r\n\r\n\t\t\tself.opts = instance.group[ instance.currIndex ].opts.thumbs;\r\n\r\n\t\t\tself.$button = instance.$refs.toolbar.find( '[data-fancybox-thumbs]' );\r\n\r\n\t\t\tif ( self.opts && first && second && (\r\n\t\t    \t\t( first.type == 'image'  || first.opts.thumb  || first.opts.$thumb ) &&\r\n\t\t    \t\t( second.type == 'image' || second.opts.thumb || second.opts.$thumb )\r\n\t\t\t)) {\r\n\r\n\t\t\t\tself.$button.show().on('click', function() {\r\n\t\t\t\t\tself.toggle();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tself.isActive = true;\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.$button.hide();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcreate : function() {\r\n\t\t\tvar self = this,\r\n\t\t\t\tinstance = self.instance,\r\n\t\t\t\tparentEl = self.opts.parentEl,\r\n\t\t\t\tlist,\r\n\t\t\t\tsrc;\r\n\r\n\t\t\tself.$grid = $('<div class=\"fancybox-thumbs fancybox-thumbs-' + self.opts.axis + '\"></div>').appendTo( instance.$refs.container.find( parentEl ).addBack().filter( parentEl ) );\r\n\r\n\t\t\t// Build list HTML\r\n\t\t\tlist = '<ul>';\r\n\r\n\t\t\t$.each(instance.group, function( i, item ) {\r\n\t\t\t\tsrc = item.opts.thumb || ( item.opts.$thumb ? item.opts.$thumb.attr( 'src' ) : null );\r\n\r\n\t\t\t\tif ( !src && item.type === 'image' ) {\r\n\t\t\t\t\tsrc = item.src;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( src && src.length ) {\r\n\t\t\t\t\tlist += '<li data-index=\"' + i + '\"  tabindex=\"0\" class=\"fancybox-thumbs-loading\"><img data-src=\"' + src + '\" /></li>';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tlist += '</ul>';\r\n\r\n\t\t\tself.$list = $( list ).appendTo( self.$grid ).on('click', 'li', function() {\r\n\t\t\t\tinstance.jumpTo( $(this).data('index') );\r\n\t\t\t});\r\n\r\n\t\t\tself.$list.find( 'img' ).hide().one('load', function() {\r\n\t\t\t\tvar $parent\t\t= $(this).parent().removeClass( 'fancybox-thumbs-loading' ),\r\n\t\t\t\t\tthumbWidth\t= $parent.outerWidth(),\r\n\t\t\t\t\tthumbHeight\t= $parent.outerHeight(),\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight,\r\n\t\t\t\t\twidthRatio,\r\n\t\t\t\t\theightRatio;\r\n\r\n\t\t\t\twidth  = this.naturalWidth\t|| this.width;\r\n\t\t\t\theight = this.naturalHeight\t|| this.height;\r\n\r\n\t\t\t\t// Calculate thumbnail dimensions; center vertically and horizontally\r\n\t\t\t\twidthRatio  = width  / thumbWidth;\r\n\t\t\t\theightRatio = height / thumbHeight;\r\n\r\n\t\t\t\tif (widthRatio >= 1 && heightRatio >= 1) {\r\n\t\t\t\t\tif (widthRatio > heightRatio) {\r\n\t\t\t\t\t\twidth  = width / heightRatio;\r\n\t\t\t\t\t\theight = thumbHeight;\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twidth  = thumbWidth;\r\n\t\t\t\t\t\theight = height / widthRatio;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(this).css({\r\n\t\t\t\t\twidth         : Math.floor(width),\r\n\t\t\t\t\theight        : Math.floor(height),\r\n\t\t\t\t\t'margin-top'  : height > thumbHeight ? ( Math.floor(thumbHeight * 0.3 - height * 0.3 ) ) : Math.floor(thumbHeight * 0.5 - height * 0.5 ),\r\n\t\t\t\t\t'margin-left' : Math.floor(thumbWidth * 0.5 - width * 0.5 )\r\n\t\t\t\t}).show();\r\n\r\n\t\t\t})\r\n\t\t\t.each(function() {\r\n\t\t\t\tthis.src = $( this ).data( 'src' );\r\n\t\t\t});\r\n\r\n\t\t\tif ( self.opts.axis === 'x' ) {\r\n\t\t\t\tself.$list.width( parseInt( self.$grid.css(\"padding-right\") ) + ( instance.group.length * self.$list.children().eq(0).outerWidth(true) ) + 'px' );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfocus : function( duration ) {\r\n\t\t\tvar self = this,\r\n\t\t\t\t$list = self.$list,\r\n\t\t\t\tthumb,\r\n\t\t\t\tthumbPos;\r\n\r\n\t\t\tif ( self.instance.current ) {\r\n\t\t\t\tthumb = $list.children()\r\n\t\t\t\t\t.removeClass( 'fancybox-thumbs-active' )\r\n\t\t\t\t\t.filter('[data-index=\"' + self.instance.current.index  + '\"]')\r\n\t\t\t\t\t.addClass('fancybox-thumbs-active');\r\n\r\n\t\t\t\tthumbPos = thumb.position();\r\n\r\n\t\t\t\t// Check if need to scroll to make current thumb visible\r\n\t\t\t\tif ( self.opts.axis === 'y' && ( thumbPos.top < 0 || thumbPos.top > ( $list.height() - thumb.outerHeight() ) ) ) {\r\n\t\t\t\t\t$list.stop().animate({ 'scrollTop' : $list.scrollTop() + thumbPos.top }, duration);\r\n\r\n\t\t\t\t} else if ( self.opts.axis === 'x' && (\r\n\t\t\t\t\t\tthumbPos.left < $list.parent().scrollLeft() ||\r\n\t\t\t\t\t\tthumbPos.left > ( $list.parent().scrollLeft() + ( $list.parent().width() - thumb.outerWidth() ) )\r\n\t\t\t\t\t)\r\n\t\t\t\t) {\r\n\t\t\t\t\t$list.parent().stop().animate({ 'scrollLeft' : thumbPos.left }, duration);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tupdate : function() {\r\n\t\t\tthis.instance.$refs.container.toggleClass( 'fancybox-show-thumbs', this.isVisible );\r\n\r\n\t\t\tif ( this.isVisible ) {\r\n\t\t\t\tif ( !this.$grid ) {\r\n\t\t\t\t\tthis.create();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.instance.trigger( 'onThumbsShow' );\r\n\r\n\t\t\t\tthis.focus( 0 );\r\n\r\n\t\t\t} else if ( this.$grid ) {\r\n\t\t\t\tthis.instance.trigger( 'onThumbsHide' );\r\n\t\t\t}\r\n\r\n\t\t\t// Update content position\r\n\t\t\tthis.instance.update();\r\n\t\t},\r\n\r\n\t\thide : function() {\r\n\t\t\tthis.isVisible = false;\r\n\t\t\tthis.update();\r\n\t\t},\r\n\r\n\t\tshow : function() {\r\n\t\t\tthis.isVisible = true;\r\n\t\t\tthis.update();\r\n\t\t},\r\n\r\n\t\ttoggle : function() {\r\n\t\t\tthis.isVisible = !this.isVisible;\r\n\t\t\tthis.update();\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).on({\r\n\r\n\t\t'onInit.fb' : function(e, instance) {\r\n\t\t\tvar Thumbs;\r\n\r\n\t\t\tif ( instance && !instance.Thumbs ) {\r\n\t\t\t\tThumbs = new FancyThumbs( instance );\r\n\r\n\t\t\t\tif ( Thumbs.isActive && Thumbs.opts.autoStart === true ) {\r\n\t\t\t\t\tThumbs.show();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeShow.fb' : function(e, instance, item, firstRun) {\r\n\t\t\tvar Thumbs = instance && instance.Thumbs;\r\n\r\n\t\t\tif ( Thumbs && Thumbs.isVisible ) {\r\n\t\t\t\tThumbs.focus( firstRun ? 0 : 250 );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\r\n\t\t\tvar Thumbs = instance && instance.Thumbs;\r\n\r\n\t\t\t// \"G\"\r\n\t\t\tif ( Thumbs && Thumbs.isActive && keycode === 71 ) {\r\n\t\t\t\tkeypress.preventDefault();\r\n\r\n\t\t\t\tThumbs.toggle();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeClose.fb' : function( e, instance ) {\r\n\t\t\tvar Thumbs = instance && instance.Thumbs;\r\n\r\n\t\t\tif ( Thumbs && Thumbs.isVisible && Thumbs.opts.hideOnClose !== false ) {\r\n\t\t\t\tThumbs.$grid.hide();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n}(document, window.jQuery));\r\n\r\n//// ==========================================================================\r\n//\r\n// Share\r\n// Displays simple form for sharing current url\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\t$.extend(true, $.fancybox.defaults, {\r\n\t\tbtnTpl : {\r\n\t\t\tshare :\r\n\t\t\t\t'<button data-fancybox-share class=\"fancybox-button fancybox-button--share\" title=\"{{SHARE}}\">' +\r\n\t\t\t\t\t'<svg viewBox=\"0 0 40 40\">' +\r\n\t\t\t\t\t\t'<path d=\"M6,30 C8,18 19,16 23,16 L23,16 L23,10 L33,20 L23,29 L23,24 C19,24 8,27 6,30 Z\">' +\r\n\t\t\t\t\t'</svg>' +\r\n\t\t\t\t'</button>'\r\n\t\t},\r\n\t\tshare : {\r\n\t\t\ttpl :\r\n\t\t\t\t'<div class=\"fancybox-share\">' +\r\n\t\t\t\t\t'<h1>{{SHARE}}</h1>' +\r\n\t\t\t\t\t'<p class=\"fancybox-share__links\">' +\r\n\t\t\t\t\t\t'<a class=\"fancybox-share__button fancybox-share__button--fb\" href=\"https://www.facebook.com/sharer/sharer.php?u={{url}}\">' +\r\n\t\t\t\t\t\t\t'<svg viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m287 456v-299c0-21 6-35 35-35h38v-63c-7-1-29-3-55-3-54 0-91 33-91 94v306m143-254h-205v72h196\" /></svg>' +\r\n\t\t\t\t\t\t\t'<span>Facebook</span>' +\r\n\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t\t'<a class=\"fancybox-share__button fancybox-share__button--pt\" href=\"https://www.pinterest.com/pin/create/button/?url={{url}}&description={{descr}}&media={{media}}\">' +\r\n\t\t\t\t\t\t\t'<svg viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m265 56c-109 0-164 78-164 144 0 39 15 74 47 87 5 2 10 0 12-5l4-19c2-6 1-8-3-13-9-11-15-25-15-45 0-58 43-110 113-110 62 0 96 38 96 88 0 67-30 122-73 122-24 0-42-19-36-44 6-29 20-60 20-81 0-19-10-35-31-35-25 0-44 26-44 60 0 21 7 36 7 36l-30 125c-8 37-1 83 0 87 0 3 4 4 5 2 2-3 32-39 42-75l16-64c8 16 31 29 56 29 74 0 124-67 124-157 0-69-58-132-146-132z\" fill=\"#fff\"/></svg>' +\r\n\t\t\t\t\t\t\t'<span>Pinterest</span>' +\r\n\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t\t'<a class=\"fancybox-share__button fancybox-share__button--tw\" href=\"https://twitter.com/intent/tweet?url={{url}}&text={{descr}}\">' +\r\n\t\t\t\t\t\t\t'<svg viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m456 133c-14 7-31 11-47 13 17-10 30-27 37-46-15 10-34 16-52 20-61-62-157-7-141 75-68-3-129-35-169-85-22 37-11 86 26 109-13 0-26-4-37-9 0 39 28 72 65 80-12 3-25 4-37 2 10 33 41 57 77 57-42 30-77 38-122 34 170 111 378-32 359-208 16-11 30-25 41-42z\" /></svg>' +\r\n\t\t\t\t\t\t\t'<span>Twitter</span>' +\r\n\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t'</p>' +\r\n\t\t\t\t\t'<p><input class=\"fancybox-share__input\" type=\"text\" value=\"{{url_raw}}\" /></p>' +\r\n\t\t\t\t'</div>'\r\n\t\t}\r\n\t});\r\n\r\n\tfunction escapeHtml(string) {\r\n\t\tvar entityMap = {\r\n\t\t  '&': '&amp;',\r\n\t\t  '<': '&lt;',\r\n\t\t  '>': '&gt;',\r\n\t\t  '\"': '&quot;',\r\n\t\t  \"'\": '&#39;',\r\n\t\t  '/': '&#x2F;',\r\n\t\t  '`': '&#x60;',\r\n\t\t  '=': '&#x3D;'\r\n\t\t};\r\n\r\n\t\treturn String(string).replace(/[&<>\"'`=\\/]/g, function (s) {\r\n\t\t\treturn entityMap[s];\r\n\t\t});\r\n\t}\r\n\r\n\t$(document).on('click', '[data-fancybox-share]', function() {\r\n\t\tvar f = $.fancybox.getInstance(),\r\n\t\t\turl,\r\n\t\t\ttpl;\r\n\r\n\t\tif ( f ) {\r\n\t\t\turl = f.current.opts.hash === false ? f.current.src : window.location;\r\n\t\t\ttpl = f.current.opts.share.tpl\r\n\t\t\t\t\t.replace( /\\{\\{media\\}\\}/g, f.current.type === 'image' ? encodeURIComponent( f.current.src ) : '' )\r\n\t\t\t\t\t.replace( /\\{\\{url\\}\\}/g, encodeURIComponent( url ) )\r\n\t\t\t\t\t.replace( /\\{\\{url_raw\\}\\}/g, escapeHtml( url ) )\r\n\t\t\t\t\t.replace( /\\{\\{descr\\}\\}/g, f.$caption ? encodeURIComponent( f.$caption.text() ) : '' );\r\n\r\n\t\t\t$.fancybox.open({\r\n\t\t\t\tsrc  : f.translate( f, tpl ),\r\n\t\t\t\ttype : 'html',\r\n\t\t\t\topts : {\r\n\t\t\t\t\tanimationEffect   : \"fade\",\r\n\t\t\t\t\tanimationDuration : 250,\r\n\t\t\t\t\tafterLoad : function(instance, current) {\r\n\t\t\t\t\t\t// Opening links in a popup window\r\n\t\t\t\t\t\tcurrent.$content.find('.fancybox-share__links a').click(function() {\r\n\t\t\t\t\t        window.open(this.href, \"Share\", \"width=550, height=450\");\r\n\t\t\t\t\t        return false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t});\r\n\r\n}( document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// Hash\r\n// Enables linking to each modal\r\n//\r\n// ==========================================================================\r\n;(function (document, window, $) {\r\n\t'use strict';\r\n\r\n\t// Simple $.escapeSelector polyfill (for jQuery prior v3)\r\n\tif ( !$.escapeSelector ) {\r\n\t\t$.escapeSelector = function( sel ) {\r\n\t\t\tvar rcssescape = /([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\x80-\\uFFFF\\w-]/g;\r\n\t\t\tvar fcssescape = function( ch, asCodePoint ) {\r\n\t\t\t\tif ( asCodePoint ) {\r\n\t\t\t\t\t// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\r\n\t\t\t\t\tif ( ch === \"\\0\" ) {\r\n\t\t\t\t\t\treturn \"\\uFFFD\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Control characters and (dependent upon position) numbers get escaped as code points\r\n\t\t\t\t\treturn ch.slice( 0, -1 ) + \"\\\\\" + ch.charCodeAt( ch.length - 1 ).toString( 16 ) + \" \";\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Other potentially-special ASCII characters get backslash-escaped\r\n\t\t\t\treturn \"\\\\\" + ch;\r\n\t\t\t};\r\n\r\n\t\t\treturn ( sel + \"\" ).replace( rcssescape, fcssescape );\r\n\t\t};\r\n\t}\r\n\r\n\t// Create new history entry only once\r\n\tvar shouldCreateHistory = true;\r\n\r\n\t// Variable containing last hash value set by fancyBox\r\n\t// It will be used to determine if fancyBox needs to close after hash change is detected\r\n    var currentHash = null;\r\n\r\n\t// Throttling the history change\r\n\tvar timerID = null;\r\n\r\n\t// Get info about gallery name and current index from url\r\n    function parseUrl() {\r\n        var hash    = window.location.hash.substr( 1 );\r\n        var rez     = hash.split( '-' );\r\n        var index   = rez.length > 1 && /^\\+?\\d+$/.test( rez[ rez.length - 1 ] ) ? parseInt( rez.pop( -1 ), 10 ) || 1 : 1;\r\n        var gallery = rez.join( '-' );\r\n\r\n\t\t// Index is starting from 1\r\n\t\tif ( index < 1 ) {\r\n\t\t\tindex = 1;\r\n\t\t}\r\n\r\n        return {\r\n            hash    : hash,\r\n            index   : index,\r\n            gallery : gallery\r\n        };\r\n    }\r\n\r\n\t// Trigger click evnt on links to open new fancyBox instance\r\n\tfunction triggerFromUrl( url ) {\r\n\t\tvar $el;\r\n\r\n        if ( url.gallery !== '' ) {\r\n\r\n\t\t\t// If we can find element matching 'data-fancybox' atribute, then trigger click event for that ..\r\n\t\t\t$el = $( \"[data-fancybox='\" + $.escapeSelector( url.gallery ) + \"']\" ).eq( url.index - 1 );\r\n\r\n            if ( !$el.length ) {\r\n\t\t\t\t// .. if not, try finding element by ID\r\n\t\t\t\t$el = $( \"#\" + $.escapeSelector( url.gallery ) + \"\" );\r\n\t\t\t}\r\n\r\n\t\t\tif ( $el.length ) {\r\n\t\t\t\tshouldCreateHistory = false;\r\n\r\n\t\t\t\t$el.trigger( 'click' );\r\n\t\t\t}\r\n\r\n        }\r\n\t}\r\n\r\n\t// Get gallery name from current instance\r\n\tfunction getGalleryID( instance ) {\r\n\t\tvar opts;\r\n\r\n\t\tif ( !instance ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\topts = instance.current ? instance.current.opts : instance.opts;\r\n\r\n\t\treturn opts.hash || ( opts.$orig ? opts.$orig.data( 'fancybox' ) : ''  );\r\n\t}\r\n\r\n\t// Start when DOM becomes ready\r\n    $(function() {\r\n\r\n\t\t// Check if user has disabled this module\r\n\t\tif ( $.fancybox.defaults.hash === false ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Update hash when opening/closing fancyBox\r\n\t    $(document).on({\r\n\t\t\t'onInit.fb' : function( e, instance ) {\r\n\t\t\t\tvar url, gallery;\r\n\r\n\t\t\t\tif ( instance.group[ instance.currIndex ].opts.hash === false ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\turl     = parseUrl();\r\n\t\t\t\tgallery = getGalleryID( instance );\r\n\r\n\t\t\t\t// Make sure gallery start index matches index from hash\r\n\t\t\t\tif ( gallery && url.gallery && gallery == url.gallery ) {\r\n\t\t\t\t\tinstance.currIndex = url.index - 1;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t'beforeShow.fb' : function( e, instance, current ) {\r\n\t\t\t\tvar gallery;\r\n\r\n\t\t\t\tif ( !current || current.opts.hash === false ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t            gallery = getGalleryID( instance );\r\n\r\n\t            // Update window hash\r\n\t            if ( gallery && gallery !== '' ) {\r\n\r\n\t\t\t\t\tif ( window.location.hash.indexOf( gallery ) < 0 ) {\r\n\t\t                instance.opts.origHash = window.location.hash;\r\n\t\t            }\r\n\r\n\t\t\t\t\tcurrentHash = gallery + ( instance.group.length > 1 ? '-' + ( current.index + 1 ) : '' );\r\n\r\n\t\t\t\t\tif ( 'replaceState' in window.history ) {\r\n\t\t\t\t\t\tif ( timerID ) {\r\n\t\t\t\t\t\t\tclearTimeout( timerID );\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttimerID = setTimeout(function() {\r\n\t\t\t\t\t\t\twindow.history[ shouldCreateHistory ? 'pushState' : 'replaceState' ]( {} , document.title, window.location.pathname + window.location.search + '#' +  currentHash );\r\n\r\n\t\t\t\t\t\t\ttimerID = null;\r\n\r\n\t\t\t\t\t\t\tshouldCreateHistory = false;\r\n\r\n\t\t\t\t\t\t}, 300);\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twindow.location.hash = currentHash;\r\n\t\t\t\t\t}\r\n\r\n\t            }\r\n\r\n\t        },\r\n\r\n\t\t\t'beforeClose.fb' : function( e, instance, current ) {\r\n\t\t\t\tvar gallery, origHash;\r\n\r\n\t\t\t\tif ( timerID ) {\r\n\t\t\t\t\tclearTimeout( timerID );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( current.opts.hash === false ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgallery  = getGalleryID( instance );\r\n\t\t\t\torigHash = instance && instance.opts.origHash ? instance.opts.origHash : '';\r\n\r\n\t            // Remove hash from location bar\r\n\t            if ( gallery && gallery !== '' ) {\r\n\r\n\t                if ( 'replaceState' in history ) {\r\n\t\t\t\t\t\twindow.history.replaceState( {} , document.title, window.location.pathname + window.location.search + origHash );\r\n\r\n\t                } else {\r\n\t\t\t\t\t\twindow.location.hash = origHash;\r\n\r\n\t\t\t\t\t\t// Keep original scroll position\r\n\t\t\t\t\t\t$( window ).scrollTop( instance.scrollTop ).scrollLeft( instance.scrollLeft );\r\n\t                }\r\n\t            }\r\n\r\n\t\t\t\tcurrentHash = null;\r\n\t        }\r\n\t    });\r\n\r\n\t\t// Check if need to close after url has changed\r\n\t\t$(window).on('hashchange.fb', function() {\r\n\t\t\tvar url = parseUrl();\r\n\r\n\t\t\tif ( $.fancybox.getInstance() ) {\r\n\t\t\t\tif ( currentHash && currentHash !== url.gallery + '-' + url.index && !( url.index === 1 && currentHash == url.gallery ) ) {\r\n\t\t\t\t\tcurrentHash = null;\r\n\r\n\t\t\t\t\t$.fancybox.close();\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( url.gallery !== '' ) {\r\n\t\t\t\ttriggerFromUrl( url );\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Check current hash and trigger click event on matching element to start fancyBox, if needed\r\n\t\tsetTimeout(function() {\r\n\t\t\ttriggerFromUrl( parseUrl() );\r\n\t\t}, 50);\r\n    });\r\n\r\n}( document, window, window.jQuery || jQuery ));\r\n\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\tvar prevTime = new Date().getTime();\r\n\r\n    $(document).on({\r\n        'onInit.fb' : function( e, instance, current ) {\r\n\t\t\tinstance.$refs.stage.on('mousewheel DOMMouseScroll wheel MozMousePixelScroll', function(e) {\r\n\t\t\t\tvar current  = instance.current,\r\n\t\t\t\t\tcurrTime = new Date().getTime();\r\n\r\n\t\t\t\tif ( instance.group.length < 1 || current.opts.wheel === false || ( current.opts.wheel === 'auto' && current.type !== 'image' ) ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\r\n\t\t\t\tif ( current.$slide.hasClass( 'fancybox-animated' ) ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\te = e.originalEvent || e;\r\n\r\n\t\t\t\tif ( currTime - prevTime < 250 ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tprevTime = currTime;\r\n\r\n\t\t\t\tinstance[ ( -e.deltaY || -e.deltaX || e.wheelDelta || -e.detail ) < 0 ? 'next' : 'previous' ]();\r\n\r\n\t\t\t});\r\n\t\t}\r\n    });\r\n\r\n}( document, window.jQuery || jQuery ));\r\n","/*!\r\n * Flickity PACKAGED v2.1.0\r\n * Touch, responsive, flickable carousels\r\n *\r\n * Licensed GPLv3 for open source use\r\n * or Flickity Commercial License for commercial use\r\n *\r\n * https://flickity.metafizzy.co\r\n * Copyright 2015-2018 Metafizzy\r\n */\r\n\r\n/**\r\n * Bridget makes jQuery widgets\r\n * v2.0.1\r\n * MIT license\r\n */\r\n\r\n/* jshint browser: true, strict: true, undef: true, unused: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /* globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'jquery-bridget/jquery-bridget',[ 'jquery' ], function( jQuery ) {\r\n      return factory( window, jQuery );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('jquery')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.jQueryBridget = factory(\r\n      window,\r\n      window.jQuery\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, jQuery ) {\r\n'use strict';\r\n\r\n// ----- utils ----- //\r\n\r\nvar arraySlice = Array.prototype.slice;\r\n\r\n// helper function for logging errors\r\n// $.error breaks jQuery chaining\r\nvar console = window.console;\r\nvar logError = typeof console == 'undefined' ? function() {} :\r\n  function( message ) {\r\n    console.error( message );\r\n  };\r\n\r\n// ----- jQueryBridget ----- //\r\n\r\nfunction jQueryBridget( namespace, PluginClass, $ ) {\r\n  $ = $ || jQuery || window.jQuery;\r\n  if ( !$ ) {\r\n    return;\r\n  }\r\n\r\n  // add option method -> $().plugin('option', {...})\r\n  if ( !PluginClass.prototype.option ) {\r\n    // option setter\r\n    PluginClass.prototype.option = function( opts ) {\r\n      // bail out if not an object\r\n      if ( !$.isPlainObject( opts ) ){\r\n        return;\r\n      }\r\n      this.options = $.extend( true, this.options, opts );\r\n    };\r\n  }\r\n\r\n  // make jQuery plugin\r\n  $.fn[ namespace ] = function( arg0 /*, arg1 */ ) {\r\n    if ( typeof arg0 == 'string' ) {\r\n      // method call $().plugin( 'methodName', { options } )\r\n      // shift arguments by 1\r\n      var args = arraySlice.call( arguments, 1 );\r\n      return methodCall( this, arg0, args );\r\n    }\r\n    // just $().plugin({ options })\r\n    plainCall( this, arg0 );\r\n    return this;\r\n  };\r\n\r\n  // $().plugin('methodName')\r\n  function methodCall( $elems, methodName, args ) {\r\n    var returnValue;\r\n    var pluginMethodStr = '$().' + namespace + '(\"' + methodName + '\")';\r\n\r\n    $elems.each( function( i, elem ) {\r\n      // get instance\r\n      var instance = $.data( elem, namespace );\r\n      if ( !instance ) {\r\n        logError( namespace + ' not initialized. Cannot call methods, i.e. ' +\r\n          pluginMethodStr );\r\n        return;\r\n      }\r\n\r\n      var method = instance[ methodName ];\r\n      if ( !method || methodName.charAt(0) == '_' ) {\r\n        logError( pluginMethodStr + ' is not a valid method' );\r\n        return;\r\n      }\r\n\r\n      // apply method, get return value\r\n      var value = method.apply( instance, args );\r\n      // set return value if value is returned, use only first value\r\n      returnValue = returnValue === undefined ? value : returnValue;\r\n    });\r\n\r\n    return returnValue !== undefined ? returnValue : $elems;\r\n  }\r\n\r\n  function plainCall( $elems, options ) {\r\n    $elems.each( function( i, elem ) {\r\n      var instance = $.data( elem, namespace );\r\n      if ( instance ) {\r\n        // set options & init\r\n        instance.option( options );\r\n        instance._init();\r\n      } else {\r\n        // initialize new instance\r\n        instance = new PluginClass( elem, options );\r\n        $.data( elem, namespace, instance );\r\n      }\r\n    });\r\n  }\r\n\r\n  updateJQuery( $ );\r\n\r\n}\r\n\r\n// ----- updateJQuery ----- //\r\n\r\n// set $.bridget for v1 backwards compatibility\r\nfunction updateJQuery( $ ) {\r\n  if ( !$ || ( $ && $.bridget ) ) {\r\n    return;\r\n  }\r\n  $.bridget = jQueryBridget;\r\n}\r\n\r\nupdateJQuery( jQuery || window.jQuery );\r\n\r\n// -----  ----- //\r\n\r\nreturn jQueryBridget;\r\n\r\n}));\r\n\r\n/**\r\n * EvEmitter v1.1.0\r\n * Lil' event emitter\r\n * MIT License\r\n */\r\n\r\n/* jshint unused: true, undef: true, strict: true */\r\n\r\n( function( global, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /* globals define, module, window */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD - RequireJS\r\n    define( 'ev-emitter/ev-emitter',factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS - Browserify, Webpack\r\n    module.exports = factory();\r\n  } else {\r\n    // Browser globals\r\n    global.EvEmitter = factory();\r\n  }\r\n\r\n}( typeof window != 'undefined' ? window : this, function() {\r\n\r\n\r\n\r\nfunction EvEmitter() {}\r\n\r\nvar proto = EvEmitter.prototype;\r\n\r\nproto.on = function( eventName, listener ) {\r\n  if ( !eventName || !listener ) {\r\n    return;\r\n  }\r\n  // set events hash\r\n  var events = this._events = this._events || {};\r\n  // set listeners array\r\n  var listeners = events[ eventName ] = events[ eventName ] || [];\r\n  // only add once\r\n  if ( listeners.indexOf( listener ) == -1 ) {\r\n    listeners.push( listener );\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nproto.once = function( eventName, listener ) {\r\n  if ( !eventName || !listener ) {\r\n    return;\r\n  }\r\n  // add event\r\n  this.on( eventName, listener );\r\n  // set once flag\r\n  // set onceEvents hash\r\n  var onceEvents = this._onceEvents = this._onceEvents || {};\r\n  // set onceListeners object\r\n  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\r\n  // set flag\r\n  onceListeners[ listener ] = true;\r\n\r\n  return this;\r\n};\r\n\r\nproto.off = function( eventName, listener ) {\r\n  var listeners = this._events && this._events[ eventName ];\r\n  if ( !listeners || !listeners.length ) {\r\n    return;\r\n  }\r\n  var index = listeners.indexOf( listener );\r\n  if ( index != -1 ) {\r\n    listeners.splice( index, 1 );\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nproto.emitEvent = function( eventName, args ) {\r\n  var listeners = this._events && this._events[ eventName ];\r\n  if ( !listeners || !listeners.length ) {\r\n    return;\r\n  }\r\n  // copy over to avoid interference if .off() in listener\r\n  listeners = listeners.slice(0);\r\n  args = args || [];\r\n  // once stuff\r\n  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\r\n\r\n  for ( var i=0; i < listeners.length; i++ ) {\r\n    var listener = listeners[i]\r\n    var isOnce = onceListeners && onceListeners[ listener ];\r\n    if ( isOnce ) {\r\n      // remove listener\r\n      // remove before trigger to prevent recursion\r\n      this.off( eventName, listener );\r\n      // unset once flag\r\n      delete onceListeners[ listener ];\r\n    }\r\n    // trigger listener\r\n    listener.apply( this, args );\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nproto.allOff = function() {\r\n  delete this._events;\r\n  delete this._onceEvents;\r\n};\r\n\r\nreturn EvEmitter;\r\n\r\n}));\r\n\r\n/*!\r\n * getSize v2.0.2\r\n * measure size of elements\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, strict: true, undef: true, unused: true */\r\n/*global define: false, module: false, console: false */\r\n\r\n( function( window, factory ) {\r\n  'use strict';\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'get-size/get-size',[],function() {\r\n      return factory();\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory();\r\n  } else {\r\n    // browser global\r\n    window.getSize = factory();\r\n  }\r\n\r\n})( window, function factory() {\r\n'use strict';\r\n\r\n// -------------------------- helpers -------------------------- //\r\n\r\n// get a number from a string, not a percentage\r\nfunction getStyleSize( value ) {\r\n  var num = parseFloat( value );\r\n  // not a percent like '100%', and a number\r\n  var isValid = value.indexOf('%') == -1 && !isNaN( num );\r\n  return isValid && num;\r\n}\r\n\r\nfunction noop() {}\r\n\r\nvar logError = typeof console == 'undefined' ? noop :\r\n  function( message ) {\r\n    console.error( message );\r\n  };\r\n\r\n// -------------------------- measurements -------------------------- //\r\n\r\nvar measurements = [\r\n  'paddingLeft',\r\n  'paddingRight',\r\n  'paddingTop',\r\n  'paddingBottom',\r\n  'marginLeft',\r\n  'marginRight',\r\n  'marginTop',\r\n  'marginBottom',\r\n  'borderLeftWidth',\r\n  'borderRightWidth',\r\n  'borderTopWidth',\r\n  'borderBottomWidth'\r\n];\r\n\r\nvar measurementsLength = measurements.length;\r\n\r\nfunction getZeroSize() {\r\n  var size = {\r\n    width: 0,\r\n    height: 0,\r\n    innerWidth: 0,\r\n    innerHeight: 0,\r\n    outerWidth: 0,\r\n    outerHeight: 0\r\n  };\r\n  for ( var i=0; i < measurementsLength; i++ ) {\r\n    var measurement = measurements[i];\r\n    size[ measurement ] = 0;\r\n  }\r\n  return size;\r\n}\r\n\r\n// -------------------------- getStyle -------------------------- //\r\n\r\n/**\r\n * getStyle, get style of element, check for Firefox bug\r\n * https://bugzilla.mozilla.org/show_bug.cgi?id=548397\r\n */\r\nfunction getStyle( elem ) {\r\n  var style = getComputedStyle( elem );\r\n  if ( !style ) {\r\n    logError( 'Style returned ' + style +\r\n      '. Are you running this code in a hidden iframe on Firefox? ' +\r\n      'See http://bit.ly/getsizebug1' );\r\n  }\r\n  return style;\r\n}\r\n\r\n// -------------------------- setup -------------------------- //\r\n\r\nvar isSetup = false;\r\n\r\nvar isBoxSizeOuter;\r\n\r\n/**\r\n * setup\r\n * check isBoxSizerOuter\r\n * do on first getSize() rather than on page load for Firefox bug\r\n */\r\nfunction setup() {\r\n  // setup once\r\n  if ( isSetup ) {\r\n    return;\r\n  }\r\n  isSetup = true;\r\n\r\n  // -------------------------- box sizing -------------------------- //\r\n\r\n  /**\r\n   * WebKit measures the outer-width on style.width on border-box elems\r\n   * IE & Firefox<29 measures the inner-width\r\n   */\r\n  var div = document.createElement('div');\r\n  div.style.width = '200px';\r\n  div.style.padding = '1px 2px 3px 4px';\r\n  div.style.borderStyle = 'solid';\r\n  div.style.borderWidth = '1px 2px 3px 4px';\r\n  div.style.boxSizing = 'border-box';\r\n\r\n  var body = document.body || document.documentElement;\r\n  body.appendChild( div );\r\n  var style = getStyle( div );\r\n\r\n  getSize.isBoxSizeOuter = isBoxSizeOuter = getStyleSize( style.width ) == 200;\r\n  body.removeChild( div );\r\n\r\n}\r\n\r\n// -------------------------- getSize -------------------------- //\r\n\r\nfunction getSize( elem ) {\r\n  setup();\r\n\r\n  // use querySeletor if elem is string\r\n  if ( typeof elem == 'string' ) {\r\n    elem = document.querySelector( elem );\r\n  }\r\n\r\n  // do not proceed on non-objects\r\n  if ( !elem || typeof elem != 'object' || !elem.nodeType ) {\r\n    return;\r\n  }\r\n\r\n  var style = getStyle( elem );\r\n\r\n  // if hidden, everything is 0\r\n  if ( style.display == 'none' ) {\r\n    return getZeroSize();\r\n  }\r\n\r\n  var size = {};\r\n  size.width = elem.offsetWidth;\r\n  size.height = elem.offsetHeight;\r\n\r\n  var isBorderBox = size.isBorderBox = style.boxSizing == 'border-box';\r\n\r\n  // get all measurements\r\n  for ( var i=0; i < measurementsLength; i++ ) {\r\n    var measurement = measurements[i];\r\n    var value = style[ measurement ];\r\n    var num = parseFloat( value );\r\n    // any 'auto', 'medium' value will be 0\r\n    size[ measurement ] = !isNaN( num ) ? num : 0;\r\n  }\r\n\r\n  var paddingWidth = size.paddingLeft + size.paddingRight;\r\n  var paddingHeight = size.paddingTop + size.paddingBottom;\r\n  var marginWidth = size.marginLeft + size.marginRight;\r\n  var marginHeight = size.marginTop + size.marginBottom;\r\n  var borderWidth = size.borderLeftWidth + size.borderRightWidth;\r\n  var borderHeight = size.borderTopWidth + size.borderBottomWidth;\r\n\r\n  var isBorderBoxSizeOuter = isBorderBox && isBoxSizeOuter;\r\n\r\n  // overwrite width and height if we can get it from style\r\n  var styleWidth = getStyleSize( style.width );\r\n  if ( styleWidth !== false ) {\r\n    size.width = styleWidth +\r\n      // add padding and border unless it's already including it\r\n      ( isBorderBoxSizeOuter ? 0 : paddingWidth + borderWidth );\r\n  }\r\n\r\n  var styleHeight = getStyleSize( style.height );\r\n  if ( styleHeight !== false ) {\r\n    size.height = styleHeight +\r\n      // add padding and border unless it's already including it\r\n      ( isBorderBoxSizeOuter ? 0 : paddingHeight + borderHeight );\r\n  }\r\n\r\n  size.innerWidth = size.width - ( paddingWidth + borderWidth );\r\n  size.innerHeight = size.height - ( paddingHeight + borderHeight );\r\n\r\n  size.outerWidth = size.width + marginWidth;\r\n  size.outerHeight = size.height + marginHeight;\r\n\r\n  return size;\r\n}\r\n\r\nreturn getSize;\r\n\r\n});\r\n\r\n/**\r\n * matchesSelector v2.0.2\r\n * matchesSelector( element, '.selector' )\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, strict: true, undef: true, unused: true */\r\n\r\n( function( window, factory ) {\r\n  /*global define: false, module: false */\r\n  'use strict';\r\n  // universal module definition\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'desandro-matches-selector/matches-selector',factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory();\r\n  } else {\r\n    // browser global\r\n    window.matchesSelector = factory();\r\n  }\r\n\r\n}( window, function factory() {\r\n  'use strict';\r\n\r\n  var matchesMethod = ( function() {\r\n    var ElemProto = window.Element.prototype;\r\n    // check for the standard method name first\r\n    if ( ElemProto.matches ) {\r\n      return 'matches';\r\n    }\r\n    // check un-prefixed\r\n    if ( ElemProto.matchesSelector ) {\r\n      return 'matchesSelector';\r\n    }\r\n    // check vendor prefixes\r\n    var prefixes = [ 'webkit', 'moz', 'ms', 'o' ];\r\n\r\n    for ( var i=0; i < prefixes.length; i++ ) {\r\n      var prefix = prefixes[i];\r\n      var method = prefix + 'MatchesSelector';\r\n      if ( ElemProto[ method ] ) {\r\n        return method;\r\n      }\r\n    }\r\n  })();\r\n\r\n  return function matchesSelector( elem, selector ) {\r\n    return elem[ matchesMethod ]( selector );\r\n  };\r\n\r\n}));\r\n\r\n/**\r\n * Fizzy UI utils v2.0.7\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, undef: true, unused: true, strict: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /*globals define, module, require */\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'fizzy-ui-utils/utils',[\r\n      'desandro-matches-selector/matches-selector'\r\n    ], function( matchesSelector ) {\r\n      return factory( window, matchesSelector );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('desandro-matches-selector')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.fizzyUIUtils = factory(\r\n      window,\r\n      window.matchesSelector\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, matchesSelector ) {\r\n\r\n\r\n\r\nvar utils = {};\r\n\r\n// ----- extend ----- //\r\n\r\n// extends objects\r\nutils.extend = function( a, b ) {\r\n  for ( var prop in b ) {\r\n    a[ prop ] = b[ prop ];\r\n  }\r\n  return a;\r\n};\r\n\r\n// ----- modulo ----- //\r\n\r\nutils.modulo = function( num, div ) {\r\n  return ( ( num % div ) + div ) % div;\r\n};\r\n\r\n// ----- makeArray ----- //\r\n\r\nvar arraySlice = Array.prototype.slice;\r\n\r\n// turn element or nodeList into an array\r\nutils.makeArray = function( obj ) {\r\n  if ( Array.isArray( obj ) ) {\r\n    // use object if already an array\r\n    return obj;\r\n  }\r\n  // return empty array if undefined or null. #6\r\n  if ( obj === null || obj === undefined ) {\r\n    return [];\r\n  }\r\n\r\n  var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\r\n  if ( isArrayLike ) {\r\n    // convert nodeList to array\r\n    return arraySlice.call( obj );\r\n  }\r\n\r\n  // array of single index\r\n  return [ obj ];\r\n};\r\n\r\n// ----- removeFrom ----- //\r\n\r\nutils.removeFrom = function( ary, obj ) {\r\n  var index = ary.indexOf( obj );\r\n  if ( index != -1 ) {\r\n    ary.splice( index, 1 );\r\n  }\r\n};\r\n\r\n// ----- getParent ----- //\r\n\r\nutils.getParent = function( elem, selector ) {\r\n  while ( elem.parentNode && elem != document.body ) {\r\n    elem = elem.parentNode;\r\n    if ( matchesSelector( elem, selector ) ) {\r\n      return elem;\r\n    }\r\n  }\r\n};\r\n\r\n// ----- getQueryElement ----- //\r\n\r\n// use element as selector string\r\nutils.getQueryElement = function( elem ) {\r\n  if ( typeof elem == 'string' ) {\r\n    return document.querySelector( elem );\r\n  }\r\n  return elem;\r\n};\r\n\r\n// ----- handleEvent ----- //\r\n\r\n// enable .ontype to trigger from .addEventListener( elem, 'type' )\r\nutils.handleEvent = function( event ) {\r\n  var method = 'on' + event.type;\r\n  if ( this[ method ] ) {\r\n    this[ method ]( event );\r\n  }\r\n};\r\n\r\n// ----- filterFindElements ----- //\r\n\r\nutils.filterFindElements = function( elems, selector ) {\r\n  // make array of elems\r\n  elems = utils.makeArray( elems );\r\n  var ffElems = [];\r\n\r\n  elems.forEach( function( elem ) {\r\n    // check that elem is an actual element\r\n    if ( !( elem instanceof HTMLElement ) ) {\r\n      return;\r\n    }\r\n    // add elem if no selector\r\n    if ( !selector ) {\r\n      ffElems.push( elem );\r\n      return;\r\n    }\r\n    // filter & find items if we have a selector\r\n    // filter\r\n    if ( matchesSelector( elem, selector ) ) {\r\n      ffElems.push( elem );\r\n    }\r\n    // find children\r\n    var childElems = elem.querySelectorAll( selector );\r\n    // concat childElems to filterFound array\r\n    for ( var i=0; i < childElems.length; i++ ) {\r\n      ffElems.push( childElems[i] );\r\n    }\r\n  });\r\n\r\n  return ffElems;\r\n};\r\n\r\n// ----- debounceMethod ----- //\r\n\r\nutils.debounceMethod = function( _class, methodName, threshold ) {\r\n  threshold = threshold || 100;\r\n  // original method\r\n  var method = _class.prototype[ methodName ];\r\n  var timeoutName = methodName + 'Timeout';\r\n\r\n  _class.prototype[ methodName ] = function() {\r\n    var timeout = this[ timeoutName ];\r\n    clearTimeout( timeout );\r\n\r\n    var args = arguments;\r\n    var _this = this;\r\n    this[ timeoutName ] = setTimeout( function() {\r\n      method.apply( _this, args );\r\n      delete _this[ timeoutName ];\r\n    }, threshold );\r\n  };\r\n};\r\n\r\n// ----- docReady ----- //\r\n\r\nutils.docReady = function( callback ) {\r\n  var readyState = document.readyState;\r\n  if ( readyState == 'complete' || readyState == 'interactive' ) {\r\n    // do async to allow for other scripts to run. metafizzy/flickity#441\r\n    setTimeout( callback );\r\n  } else {\r\n    document.addEventListener( 'DOMContentLoaded', callback );\r\n  }\r\n};\r\n\r\n// ----- htmlInit ----- //\r\n\r\n// http://jamesroberts.name/blog/2010/02/22/string-functions-for-javascript-trim-to-camel-case-to-dashed-and-to-underscore/\r\nutils.toDashed = function( str ) {\r\n  return str.replace( /(.)([A-Z])/g, function( match, $1, $2 ) {\r\n    return $1 + '-' + $2;\r\n  }).toLowerCase();\r\n};\r\n\r\nvar console = window.console;\r\n/**\r\n * allow user to initialize classes via [data-namespace] or .js-namespace class\r\n * htmlInit( Widget, 'widgetName' )\r\n * options are parsed from data-namespace-options\r\n */\r\nutils.htmlInit = function( WidgetClass, namespace ) {\r\n  utils.docReady( function() {\r\n    var dashedNamespace = utils.toDashed( namespace );\r\n    var dataAttr = 'data-' + dashedNamespace;\r\n    var dataAttrElems = document.querySelectorAll( '[' + dataAttr + ']' );\r\n    var jsDashElems = document.querySelectorAll( '.js-' + dashedNamespace );\r\n    var elems = utils.makeArray( dataAttrElems )\r\n      .concat( utils.makeArray( jsDashElems ) );\r\n    var dataOptionsAttr = dataAttr + '-options';\r\n    var jQuery = window.jQuery;\r\n\r\n    elems.forEach( function( elem ) {\r\n      var attr = elem.getAttribute( dataAttr ) ||\r\n        elem.getAttribute( dataOptionsAttr );\r\n      var options;\r\n      try {\r\n        options = attr && JSON.parse( attr );\r\n      } catch ( error ) {\r\n        // log error, do not initialize\r\n        if ( console ) {\r\n          console.error( 'Error parsing ' + dataAttr + ' on ' + elem.className +\r\n          ': ' + error );\r\n        }\r\n        return;\r\n      }\r\n      // initialize\r\n      var instance = new WidgetClass( elem, options );\r\n      // make available via $().data('namespace')\r\n      if ( jQuery ) {\r\n        jQuery.data( elem, namespace, instance );\r\n      }\r\n    });\r\n\r\n  });\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn utils;\r\n\r\n}));\r\n\r\n// Flickity.Cell\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/cell',[\r\n      'get-size/get-size'\r\n    ], function( getSize ) {\r\n      return factory( window, getSize );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('get-size')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = window.Flickity || {};\r\n    window.Flickity.Cell = factory(\r\n      window,\r\n      window.getSize\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, getSize ) {\r\n\r\n\r\n\r\nfunction Cell( elem, parent ) {\r\n  this.element = elem;\r\n  this.parent = parent;\r\n\r\n  this.create();\r\n}\r\n\r\nvar proto = Cell.prototype;\r\n\r\nproto.create = function() {\r\n  this.element.style.position = 'absolute';\r\n  this.element.setAttribute( 'aria-selected', 'false' );\r\n  this.x = 0;\r\n  this.shift = 0;\r\n};\r\n\r\nproto.destroy = function() {\r\n  // reset style\r\n  this.element.style.position = '';\r\n  var side = this.parent.originSide;\r\n  this.element.removeAttribute('aria-selected');\r\n  this.element.style[ side ] = '';\r\n};\r\n\r\nproto.getSize = function() {\r\n  this.size = getSize( this.element );\r\n};\r\n\r\nproto.setPosition = function( x ) {\r\n  this.x = x;\r\n  this.updateTarget();\r\n  this.renderPosition( x );\r\n};\r\n\r\n// setDefaultTarget v1 method, backwards compatibility, remove in v3\r\nproto.updateTarget = proto.setDefaultTarget = function() {\r\n  var marginProperty = this.parent.originSide == 'left' ? 'marginLeft' : 'marginRight';\r\n  this.target = this.x + this.size[ marginProperty ] +\r\n    this.size.width * this.parent.cellAlign;\r\n};\r\n\r\nproto.renderPosition = function( x ) {\r\n  // render position of cell with in slider\r\n  var side = this.parent.originSide;\r\n  this.element.style[ side ] = this.parent.getPositionValue( x );\r\n};\r\n\r\n/**\r\n * @param {Integer} factor - 0, 1, or -1\r\n**/\r\nproto.wrapShift = function( shift ) {\r\n  this.shift = shift;\r\n  this.renderPosition( this.x + this.parent.slideableWidth * shift );\r\n};\r\n\r\nproto.remove = function() {\r\n  this.element.parentNode.removeChild( this.element );\r\n};\r\n\r\nreturn Cell;\r\n\r\n}));\r\n\r\n// slide\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/slide',factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory();\r\n  } else {\r\n    // browser global\r\n    window.Flickity = window.Flickity || {};\r\n    window.Flickity.Slide = factory();\r\n  }\r\n\r\n}( window, function factory() {\r\n'use strict';\r\n\r\nfunction Slide( parent ) {\r\n  this.parent = parent;\r\n  this.isOriginLeft = parent.originSide == 'left';\r\n  this.cells = [];\r\n  this.outerWidth = 0;\r\n  this.height = 0;\r\n}\r\n\r\nvar proto = Slide.prototype;\r\n\r\nproto.addCell = function( cell ) {\r\n  this.cells.push( cell );\r\n  this.outerWidth += cell.size.outerWidth;\r\n  this.height = Math.max( cell.size.outerHeight, this.height );\r\n  // first cell stuff\r\n  if ( this.cells.length == 1 ) {\r\n    this.x = cell.x; // x comes from first cell\r\n    var beginMargin = this.isOriginLeft ? 'marginLeft' : 'marginRight';\r\n    this.firstMargin = cell.size[ beginMargin ];\r\n  }\r\n};\r\n\r\nproto.updateTarget = function() {\r\n  var endMargin = this.isOriginLeft ? 'marginRight' : 'marginLeft';\r\n  var lastCell = this.getLastCell();\r\n  var lastMargin = lastCell ? lastCell.size[ endMargin ] : 0;\r\n  var slideWidth = this.outerWidth - ( this.firstMargin + lastMargin );\r\n  this.target = this.x + this.firstMargin + slideWidth * this.parent.cellAlign;\r\n};\r\n\r\nproto.getLastCell = function() {\r\n  return this.cells[ this.cells.length - 1 ];\r\n};\r\n\r\nproto.select = function() {\r\n  this.changeSelected( true );\r\n};\r\n\r\nproto.unselect = function() {\r\n  this.changeSelected( false );\r\n};\r\n\r\nproto.changeSelected = function( isSelected ) {\r\n  var classMethod = isSelected ? 'add' : 'remove';\r\n  this.cells.forEach( function( cell ) {\r\n    cell.element.classList[ classMethod ]('is-selected');\r\n    cell.element.setAttribute( 'aria-selected', isSelected.toString() );\r\n  });\r\n};\r\n\r\nproto.getCellElements = function() {\r\n  return this.cells.map( function( cell ) {\r\n    return cell.element;\r\n  });\r\n};\r\n\r\nreturn Slide;\r\n\r\n}));\r\n\r\n// animate\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/animate',[\r\n      'fizzy-ui-utils/utils'\r\n    ], function( utils ) {\r\n      return factory( window, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = window.Flickity || {};\r\n    window.Flickity.animatePrototype = factory(\r\n      window,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, utils ) {\r\n\r\n\r\n\r\n// -------------------------- requestAnimationFrame -------------------------- //\r\n\r\n// get rAF, prefixed, if present\r\nvar requestAnimationFrame = window.requestAnimationFrame ||\r\n  window.webkitRequestAnimationFrame;\r\n\r\n// fallback to setTimeout\r\nvar lastTime = 0;\r\nif ( !requestAnimationFrame )  {\r\n  requestAnimationFrame = function( callback ) {\r\n    var currTime = new Date().getTime();\r\n    var timeToCall = Math.max( 0, 16 - ( currTime - lastTime ) );\r\n    var id = setTimeout( callback, timeToCall );\r\n    lastTime = currTime + timeToCall;\r\n    return id;\r\n  };\r\n}\r\n\r\n// -------------------------- animate -------------------------- //\r\n\r\nvar proto = {};\r\n\r\nproto.startAnimation = function() {\r\n  if ( this.isAnimating ) {\r\n    return;\r\n  }\r\n\r\n  this.isAnimating = true;\r\n  this.restingFrames = 0;\r\n  this.animate();\r\n};\r\n\r\nproto.animate = function() {\r\n  this.applyDragForce();\r\n  this.applySelectedAttraction();\r\n\r\n  var previousX = this.x;\r\n\r\n  this.integratePhysics();\r\n  this.positionSlider();\r\n  this.settle( previousX );\r\n  // animate next frame\r\n  if ( this.isAnimating ) {\r\n    var _this = this;\r\n    requestAnimationFrame( function animateFrame() {\r\n      _this.animate();\r\n    });\r\n  }\r\n};\r\n\r\n\r\nvar transformProperty = ( function () {\r\n  var style = document.documentElement.style;\r\n  if ( typeof style.transform == 'string' ) {\r\n    return 'transform';\r\n  }\r\n  return 'WebkitTransform';\r\n})();\r\n\r\nproto.positionSlider = function() {\r\n  var x = this.x;\r\n  // wrap position around\r\n  if ( this.options.wrapAround && this.cells.length > 1 ) {\r\n    x = utils.modulo( x, this.slideableWidth );\r\n    x = x - this.slideableWidth;\r\n    this.shiftWrapCells( x );\r\n  }\r\n\r\n  x = x + this.cursorPosition;\r\n  // reverse if right-to-left and using transform\r\n  x = this.options.rightToLeft && transformProperty ? -x : x;\r\n  var value = this.getPositionValue( x );\r\n  // use 3D tranforms for hardware acceleration on iOS\r\n  // but use 2D when settled, for better font-rendering\r\n  this.slider.style[ transformProperty ] = this.isAnimating ?\r\n    'translate3d(' + value + ',0,0)' : 'translateX(' + value + ')';\r\n\r\n  // scroll event\r\n  var firstSlide = this.slides[0];\r\n  if ( firstSlide ) {\r\n    var positionX = -this.x - firstSlide.target;\r\n    var progress = positionX / this.slidesWidth;\r\n    this.dispatchEvent( 'scroll', null, [ progress, positionX ] );\r\n  }\r\n};\r\n\r\nproto.positionSliderAtSelected = function() {\r\n  if ( !this.cells.length ) {\r\n    return;\r\n  }\r\n  this.x = -this.selectedSlide.target;\r\n  this.velocity = 0; // stop wobble\r\n  this.positionSlider();\r\n};\r\n\r\nproto.getPositionValue = function( position ) {\r\n  if ( this.options.percentPosition ) {\r\n    // percent position, round to 2 digits, like 12.34%\r\n    return ( Math.round( ( position / this.size.innerWidth ) * 10000 ) * 0.01 )+ '%';\r\n  } else {\r\n    // pixel positioning\r\n    return Math.round( position ) + 'px';\r\n  }\r\n};\r\n\r\nproto.settle = function( previousX ) {\r\n  // keep track of frames where x hasn't moved\r\n  if ( !this.isPointerDown && Math.round( this.x * 100 ) == Math.round( previousX * 100 ) ) {\r\n    this.restingFrames++;\r\n  }\r\n  // stop animating if resting for 3 or more frames\r\n  if ( this.restingFrames > 2 ) {\r\n    this.isAnimating = false;\r\n    delete this.isFreeScrolling;\r\n    // render position with translateX when settled\r\n    this.positionSlider();\r\n    this.dispatchEvent( 'settle', null, [ this.selectedIndex ] );\r\n  }\r\n};\r\n\r\nproto.shiftWrapCells = function( x ) {\r\n  // shift before cells\r\n  var beforeGap = this.cursorPosition + x;\r\n  this._shiftCells( this.beforeShiftCells, beforeGap, -1 );\r\n  // shift after cells\r\n  var afterGap = this.size.innerWidth - ( x + this.slideableWidth + this.cursorPosition );\r\n  this._shiftCells( this.afterShiftCells, afterGap, 1 );\r\n};\r\n\r\nproto._shiftCells = function( cells, gap, shift ) {\r\n  for ( var i=0; i < cells.length; i++ ) {\r\n    var cell = cells[i];\r\n    var cellShift = gap > 0 ? shift : 0;\r\n    cell.wrapShift( cellShift );\r\n    gap -= cell.size.outerWidth;\r\n  }\r\n};\r\n\r\nproto._unshiftCells = function( cells ) {\r\n  if ( !cells || !cells.length ) {\r\n    return;\r\n  }\r\n  for ( var i=0; i < cells.length; i++ ) {\r\n    cells[i].wrapShift( 0 );\r\n  }\r\n};\r\n\r\n// -------------------------- physics -------------------------- //\r\n\r\nproto.integratePhysics = function() {\r\n  this.x += this.velocity;\r\n  this.velocity *= this.getFrictionFactor();\r\n};\r\n\r\nproto.applyForce = function( force ) {\r\n  this.velocity += force;\r\n};\r\n\r\nproto.getFrictionFactor = function() {\r\n  return 1 - this.options[ this.isFreeScrolling ? 'freeScrollFriction' : 'friction' ];\r\n};\r\n\r\nproto.getRestingPosition = function() {\r\n  // my thanks to Steven Wittens, who simplified this math greatly\r\n  return this.x + this.velocity / ( 1 - this.getFrictionFactor() );\r\n};\r\n\r\nproto.applyDragForce = function() {\r\n  if ( !this.isDraggable || !this.isPointerDown ) {\r\n    return;\r\n  }\r\n  // change the position to drag position by applying force\r\n  var dragVelocity = this.dragX - this.x;\r\n  var dragForce = dragVelocity - this.velocity;\r\n  this.applyForce( dragForce );\r\n};\r\n\r\nproto.applySelectedAttraction = function() {\r\n  // do not attract if pointer down or no slides\r\n  var dragDown = this.isDraggable && this.isPointerDown;\r\n  if ( dragDown || this.isFreeScrolling || !this.slides.length ) {\r\n    return;\r\n  }\r\n  var distance = this.selectedSlide.target * -1 - this.x;\r\n  var force = distance * this.options.selectedAttraction;\r\n  this.applyForce( force );\r\n};\r\n\r\nreturn proto;\r\n\r\n}));\r\n\r\n// Flickity main\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/flickity',[\r\n      'ev-emitter/ev-emitter',\r\n      'get-size/get-size',\r\n      'fizzy-ui-utils/utils',\r\n      './cell',\r\n      './slide',\r\n      './animate'\r\n    ], function( EvEmitter, getSize, utils, Cell, Slide, animatePrototype ) {\r\n      return factory( window, EvEmitter, getSize, utils, Cell, Slide, animatePrototype );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('ev-emitter'),\r\n      require('get-size'),\r\n      require('fizzy-ui-utils'),\r\n      require('./cell'),\r\n      require('./slide'),\r\n      require('./animate')\r\n    );\r\n  } else {\r\n    // browser global\r\n    var _Flickity = window.Flickity;\r\n\r\n    window.Flickity = factory(\r\n      window,\r\n      window.EvEmitter,\r\n      window.getSize,\r\n      window.fizzyUIUtils,\r\n      _Flickity.Cell,\r\n      _Flickity.Slide,\r\n      _Flickity.animatePrototype\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, EvEmitter, getSize,\r\n  utils, Cell, Slide, animatePrototype ) {\r\n\r\n\r\n\r\n// vars\r\nvar jQuery = window.jQuery;\r\nvar getComputedStyle = window.getComputedStyle;\r\nvar console = window.console;\r\n\r\nfunction moveElements( elems, toElem ) {\r\n  elems = utils.makeArray( elems );\r\n  while ( elems.length ) {\r\n    toElem.appendChild( elems.shift() );\r\n  }\r\n}\r\n\r\n// -------------------------- Flickity -------------------------- //\r\n\r\n// globally unique identifiers\r\nvar GUID = 0;\r\n// internal store of all Flickity intances\r\nvar instances = {};\r\n\r\nfunction Flickity( element, options ) {\r\n  var queryElement = utils.getQueryElement( element );\r\n  if ( !queryElement ) {\r\n    if ( console ) {\r\n      console.error( 'Bad element for Flickity: ' + ( queryElement || element ) );\r\n    }\r\n    return;\r\n  }\r\n  this.element = queryElement;\r\n  // do not initialize twice on same element\r\n  if ( this.element.flickityGUID ) {\r\n    var instance = instances[ this.element.flickityGUID ];\r\n    instance.option( options );\r\n    return instance;\r\n  }\r\n\r\n  // add jQuery\r\n  if ( jQuery ) {\r\n    this.$element = jQuery( this.element );\r\n  }\r\n  // options\r\n  this.options = utils.extend( {}, this.constructor.defaults );\r\n  this.option( options );\r\n\r\n  // kick things off\r\n  this._create();\r\n}\r\n\r\nFlickity.defaults = {\r\n  accessibility: true,\r\n  // adaptiveHeight: false,\r\n  cellAlign: 'center',\r\n  // cellSelector: undefined,\r\n  // contain: false,\r\n  freeScrollFriction: 0.075, // friction when free-scrolling\r\n  friction: 0.28, // friction when selecting\r\n  namespaceJQueryEvents: true,\r\n  // initialIndex: 0,\r\n  percentPosition: true,\r\n  resize: true,\r\n  selectedAttraction: 0.025,\r\n  setGallerySize: true\r\n  // watchCSS: false,\r\n  // wrapAround: false\r\n};\r\n\r\n// hash of methods triggered on _create()\r\nFlickity.createMethods = [];\r\n\r\nvar proto = Flickity.prototype;\r\n// inherit EventEmitter\r\nutils.extend( proto, EvEmitter.prototype );\r\n\r\nproto._create = function() {\r\n  // add id for Flickity.data\r\n  var id = this.guid = ++GUID;\r\n  this.element.flickityGUID = id; // expando\r\n  instances[ id ] = this; // associate via id\r\n  // initial properties\r\n  this.selectedIndex = 0;\r\n  // how many frames slider has been in same position\r\n  this.restingFrames = 0;\r\n  // initial physics properties\r\n  this.x = 0;\r\n  this.velocity = 0;\r\n  this.originSide = this.options.rightToLeft ? 'right' : 'left';\r\n  // create viewport & slider\r\n  this.viewport = document.createElement('div');\r\n  this.viewport.className = 'flickity-viewport';\r\n  this._createSlider();\r\n\r\n  if ( this.options.resize || this.options.watchCSS ) {\r\n    window.addEventListener( 'resize', this );\r\n  }\r\n\r\n  // add listeners from on option\r\n  for ( var eventName in this.options.on ) {\r\n    var listener = this.options.on[ eventName ];\r\n    this.on( eventName, listener );\r\n  }\r\n\r\n  Flickity.createMethods.forEach( function( method ) {\r\n    this[ method ]();\r\n  }, this );\r\n\r\n  if ( this.options.watchCSS ) {\r\n    this.watchCSS();\r\n  } else {\r\n    this.activate();\r\n  }\r\n\r\n};\r\n\r\n/**\r\n * set options\r\n * @param {Object} opts\r\n */\r\nproto.option = function( opts ) {\r\n  utils.extend( this.options, opts );\r\n};\r\n\r\nproto.activate = function() {\r\n  if ( this.isActive ) {\r\n    return;\r\n  }\r\n  this.isActive = true;\r\n  this.element.classList.add('flickity-enabled');\r\n  if ( this.options.rightToLeft ) {\r\n    this.element.classList.add('flickity-rtl');\r\n  }\r\n\r\n  this.getSize();\r\n  // move initial cell elements so they can be loaded as cells\r\n  var cellElems = this._filterFindCellElements( this.element.children );\r\n  moveElements( cellElems, this.slider );\r\n  this.viewport.appendChild( this.slider );\r\n  this.element.appendChild( this.viewport );\r\n  // get cells from children\r\n  this.reloadCells();\r\n\r\n  if ( this.options.accessibility ) {\r\n    // allow element to focusable\r\n    this.element.tabIndex = 0;\r\n    // listen for key presses\r\n    this.element.addEventListener( 'keydown', this );\r\n  }\r\n\r\n  this.emitEvent('activate');\r\n\r\n  var index;\r\n  var initialIndex = this.options.initialIndex;\r\n  if ( this.isInitActivated ) {\r\n    index = this.selectedIndex;\r\n  } else if ( initialIndex !== undefined ) {\r\n    index = this.cells[ initialIndex ] ? initialIndex : 0;\r\n  } else {\r\n    index = 0;\r\n  }\r\n  // select instantly\r\n  this.select( index, false, true );\r\n  // flag for initial activation, for using initialIndex\r\n  this.isInitActivated = true;\r\n  // ready event. #493\r\n  this.dispatchEvent('ready');\r\n};\r\n\r\n// slider positions the cells\r\nproto._createSlider = function() {\r\n  // slider element does all the positioning\r\n  var slider = document.createElement('div');\r\n  slider.className = 'flickity-slider';\r\n  slider.style[ this.originSide ] = 0;\r\n  this.slider = slider;\r\n};\r\n\r\nproto._filterFindCellElements = function( elems ) {\r\n  return utils.filterFindElements( elems, this.options.cellSelector );\r\n};\r\n\r\n// goes through all children\r\nproto.reloadCells = function() {\r\n  // collection of item elements\r\n  this.cells = this._makeCells( this.slider.children );\r\n  this.positionCells();\r\n  this._getWrapShiftCells();\r\n  this.setGallerySize();\r\n};\r\n\r\n/**\r\n * turn elements into Flickity.Cells\r\n * @param {Array or NodeList or HTMLElement} elems\r\n * @returns {Array} items - collection of new Flickity Cells\r\n */\r\nproto._makeCells = function( elems ) {\r\n  var cellElems = this._filterFindCellElements( elems );\r\n\r\n  // create new Flickity for collection\r\n  var cells = cellElems.map( function( cellElem ) {\r\n    return new Cell( cellElem, this );\r\n  }, this );\r\n\r\n  return cells;\r\n};\r\n\r\nproto.getLastCell = function() {\r\n  return this.cells[ this.cells.length - 1 ];\r\n};\r\n\r\nproto.getLastSlide = function() {\r\n  return this.slides[ this.slides.length - 1 ];\r\n};\r\n\r\n// positions all cells\r\nproto.positionCells = function() {\r\n  // size all cells\r\n  this._sizeCells( this.cells );\r\n  // position all cells\r\n  this._positionCells( 0 );\r\n};\r\n\r\n/**\r\n * position certain cells\r\n * @param {Integer} index - which cell to start with\r\n */\r\nproto._positionCells = function( index ) {\r\n  index = index || 0;\r\n  // also measure maxCellHeight\r\n  // start 0 if positioning all cells\r\n  this.maxCellHeight = index ? this.maxCellHeight || 0 : 0;\r\n  var cellX = 0;\r\n  // get cellX\r\n  if ( index > 0 ) {\r\n    var startCell = this.cells[ index - 1 ];\r\n    cellX = startCell.x + startCell.size.outerWidth;\r\n  }\r\n  var len = this.cells.length;\r\n  for ( var i=index; i < len; i++ ) {\r\n    var cell = this.cells[i];\r\n    cell.setPosition( cellX );\r\n    cellX += cell.size.outerWidth;\r\n    this.maxCellHeight = Math.max( cell.size.outerHeight, this.maxCellHeight );\r\n  }\r\n  // keep track of cellX for wrap-around\r\n  this.slideableWidth = cellX;\r\n  // slides\r\n  this.updateSlides();\r\n  // contain slides target\r\n  this._containSlides();\r\n  // update slidesWidth\r\n  this.slidesWidth = len ? this.getLastSlide().target - this.slides[0].target : 0;\r\n};\r\n\r\n/**\r\n * cell.getSize() on multiple cells\r\n * @param {Array} cells\r\n */\r\nproto._sizeCells = function( cells ) {\r\n  cells.forEach( function( cell ) {\r\n    cell.getSize();\r\n  });\r\n};\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nproto.updateSlides = function() {\r\n  this.slides = [];\r\n  if ( !this.cells.length ) {\r\n    return;\r\n  }\r\n\r\n  var slide = new Slide( this );\r\n  this.slides.push( slide );\r\n  var isOriginLeft = this.originSide == 'left';\r\n  var nextMargin = isOriginLeft ? 'marginRight' : 'marginLeft';\r\n\r\n  var canCellFit = this._getCanCellFit();\r\n\r\n  this.cells.forEach( function( cell, i ) {\r\n    // just add cell if first cell in slide\r\n    if ( !slide.cells.length ) {\r\n      slide.addCell( cell );\r\n      return;\r\n    }\r\n\r\n    var slideWidth = ( slide.outerWidth - slide.firstMargin ) +\r\n      ( cell.size.outerWidth - cell.size[ nextMargin ] );\r\n\r\n    if ( canCellFit.call( this, i, slideWidth ) ) {\r\n      slide.addCell( cell );\r\n    } else {\r\n      // doesn't fit, new slide\r\n      slide.updateTarget();\r\n\r\n      slide = new Slide( this );\r\n      this.slides.push( slide );\r\n      slide.addCell( cell );\r\n    }\r\n  }, this );\r\n  // last slide\r\n  slide.updateTarget();\r\n  // update .selectedSlide\r\n  this.updateSelectedSlide();\r\n};\r\n\r\nproto._getCanCellFit = function() {\r\n  var groupCells = this.options.groupCells;\r\n  if ( !groupCells ) {\r\n    return function() {\r\n      return false;\r\n    };\r\n  } else if ( typeof groupCells == 'number' ) {\r\n    // group by number. 3 -> [0,1,2], [3,4,5], ...\r\n    var number = parseInt( groupCells, 10 );\r\n    return function( i ) {\r\n      return ( i % number ) !== 0;\r\n    };\r\n  }\r\n  // default, group by width of slide\r\n  // parse '75%\r\n  var percentMatch = typeof groupCells == 'string' &&\r\n    groupCells.match(/^(\\d+)%$/);\r\n  var percent = percentMatch ? parseInt( percentMatch[1], 10 ) / 100 : 1;\r\n  return function( i, slideWidth ) {\r\n    return slideWidth <= ( this.size.innerWidth + 1 ) * percent;\r\n  };\r\n};\r\n\r\n// alias _init for jQuery plugin .flickity()\r\nproto._init =\r\nproto.reposition = function() {\r\n  this.positionCells();\r\n  this.positionSliderAtSelected();\r\n};\r\n\r\nproto.getSize = function() {\r\n  this.size = getSize( this.element );\r\n  this.setCellAlign();\r\n  this.cursorPosition = this.size.innerWidth * this.cellAlign;\r\n};\r\n\r\nvar cellAlignShorthands = {\r\n  // cell align, then based on origin side\r\n  center: {\r\n    left: 0.5,\r\n    right: 0.5\r\n  },\r\n  left: {\r\n    left: 0,\r\n    right: 1\r\n  },\r\n  right: {\r\n    right: 0,\r\n    left: 1\r\n  }\r\n};\r\n\r\nproto.setCellAlign = function() {\r\n  var shorthand = cellAlignShorthands[ this.options.cellAlign ];\r\n  this.cellAlign = shorthand ? shorthand[ this.originSide ] : this.options.cellAlign;\r\n};\r\n\r\nproto.setGallerySize = function() {\r\n  if ( this.options.setGallerySize ) {\r\n    var height = this.options.adaptiveHeight && this.selectedSlide ?\r\n      this.selectedSlide.height : this.maxCellHeight;\r\n    this.viewport.style.height = height + 'px';\r\n  }\r\n};\r\n\r\nproto._getWrapShiftCells = function() {\r\n  // only for wrap-around\r\n  if ( !this.options.wrapAround ) {\r\n    return;\r\n  }\r\n  // unshift previous cells\r\n  this._unshiftCells( this.beforeShiftCells );\r\n  this._unshiftCells( this.afterShiftCells );\r\n  // get before cells\r\n  // initial gap\r\n  var gapX = this.cursorPosition;\r\n  var cellIndex = this.cells.length - 1;\r\n  this.beforeShiftCells = this._getGapCells( gapX, cellIndex, -1 );\r\n  // get after cells\r\n  // ending gap between last cell and end of gallery viewport\r\n  gapX = this.size.innerWidth - this.cursorPosition;\r\n  // start cloning at first cell, working forwards\r\n  this.afterShiftCells = this._getGapCells( gapX, 0, 1 );\r\n};\r\n\r\nproto._getGapCells = function( gapX, cellIndex, increment ) {\r\n  // keep adding cells until the cover the initial gap\r\n  var cells = [];\r\n  while ( gapX > 0 ) {\r\n    var cell = this.cells[ cellIndex ];\r\n    if ( !cell ) {\r\n      break;\r\n    }\r\n    cells.push( cell );\r\n    cellIndex += increment;\r\n    gapX -= cell.size.outerWidth;\r\n  }\r\n  return cells;\r\n};\r\n\r\n// ----- contain ----- //\r\n\r\n// contain cell targets so no excess sliding\r\nproto._containSlides = function() {\r\n  if ( !this.options.contain || this.options.wrapAround || !this.cells.length ) {\r\n    return;\r\n  }\r\n  var isRightToLeft = this.options.rightToLeft;\r\n  var beginMargin = isRightToLeft ? 'marginRight' : 'marginLeft';\r\n  var endMargin = isRightToLeft ? 'marginLeft' : 'marginRight';\r\n  var contentWidth = this.slideableWidth - this.getLastCell().size[ endMargin ];\r\n  // content is less than gallery size\r\n  var isContentSmaller = contentWidth < this.size.innerWidth;\r\n  // bounds\r\n  var beginBound = this.cursorPosition + this.cells[0].size[ beginMargin ];\r\n  var endBound = contentWidth - this.size.innerWidth * ( 1 - this.cellAlign );\r\n  // contain each cell target\r\n  this.slides.forEach( function( slide ) {\r\n    if ( isContentSmaller ) {\r\n      // all cells fit inside gallery\r\n      slide.target = contentWidth * this.cellAlign;\r\n    } else {\r\n      // contain to bounds\r\n      slide.target = Math.max( slide.target, beginBound );\r\n      slide.target = Math.min( slide.target, endBound );\r\n    }\r\n  }, this );\r\n};\r\n\r\n// -----  ----- //\r\n\r\n/**\r\n * emits events via eventEmitter and jQuery events\r\n * @param {String} type - name of event\r\n * @param {Event} event - original event\r\n * @param {Array} args - extra arguments\r\n */\r\nproto.dispatchEvent = function( type, event, args ) {\r\n  var emitArgs = event ? [ event ].concat( args ) : args;\r\n  this.emitEvent( type, emitArgs );\r\n\r\n  if ( jQuery && this.$element ) {\r\n    // default trigger with type if no event\r\n    type += this.options.namespaceJQueryEvents ? '.flickity' : '';\r\n    var $event = type;\r\n    if ( event ) {\r\n      // create jQuery event\r\n      var jQEvent = jQuery.Event( event );\r\n      jQEvent.type = type;\r\n      $event = jQEvent;\r\n    }\r\n    this.$element.trigger( $event, args );\r\n  }\r\n};\r\n\r\n// -------------------------- select -------------------------- //\r\n\r\n/**\r\n * @param {Integer} index - index of the slide\r\n * @param {Boolean} isWrap - will wrap-around to last/first if at the end\r\n * @param {Boolean} isInstant - will immediately set position at selected cell\r\n */\r\nproto.select = function( index, isWrap, isInstant ) {\r\n  if ( !this.isActive ) {\r\n    return;\r\n  }\r\n  index = parseInt( index, 10 );\r\n  this._wrapSelect( index );\r\n\r\n  if ( this.options.wrapAround || isWrap ) {\r\n    index = utils.modulo( index, this.slides.length );\r\n  }\r\n  // bail if invalid index\r\n  if ( !this.slides[ index ] ) {\r\n    return;\r\n  }\r\n  var prevIndex = this.selectedIndex;\r\n  this.selectedIndex = index;\r\n  this.updateSelectedSlide();\r\n  if ( isInstant ) {\r\n    this.positionSliderAtSelected();\r\n  } else {\r\n    this.startAnimation();\r\n  }\r\n  if ( this.options.adaptiveHeight ) {\r\n    this.setGallerySize();\r\n  }\r\n  // events\r\n  this.dispatchEvent( 'select', null, [ index ] );\r\n  // change event if new index\r\n  if ( index != prevIndex ) {\r\n    this.dispatchEvent( 'change', null, [ index ] );\r\n  }\r\n  // old v1 event name, remove in v3\r\n  this.dispatchEvent('cellSelect');\r\n};\r\n\r\n// wraps position for wrapAround, to move to closest slide. #113\r\nproto._wrapSelect = function( index ) {\r\n  var len = this.slides.length;\r\n  var isWrapping = this.options.wrapAround && len > 1;\r\n  if ( !isWrapping ) {\r\n    return index;\r\n  }\r\n  var wrapIndex = utils.modulo( index, len );\r\n  // go to shortest\r\n  var delta = Math.abs( wrapIndex - this.selectedIndex );\r\n  var backWrapDelta = Math.abs( ( wrapIndex + len ) - this.selectedIndex );\r\n  var forewardWrapDelta = Math.abs( ( wrapIndex - len ) - this.selectedIndex );\r\n  if ( !this.isDragSelect && backWrapDelta < delta ) {\r\n    index += len;\r\n  } else if ( !this.isDragSelect && forewardWrapDelta < delta ) {\r\n    index -= len;\r\n  }\r\n  // wrap position so slider is within normal area\r\n  if ( index < 0 ) {\r\n    this.x -= this.slideableWidth;\r\n  } else if ( index >= len ) {\r\n    this.x += this.slideableWidth;\r\n  }\r\n};\r\n\r\nproto.previous = function( isWrap, isInstant ) {\r\n  this.select( this.selectedIndex - 1, isWrap, isInstant );\r\n};\r\n\r\nproto.next = function( isWrap, isInstant ) {\r\n  this.select( this.selectedIndex + 1, isWrap, isInstant );\r\n};\r\n\r\nproto.updateSelectedSlide = function() {\r\n  var slide = this.slides[ this.selectedIndex ];\r\n  // selectedIndex could be outside of slides, if triggered before resize()\r\n  if ( !slide ) {\r\n    return;\r\n  }\r\n  // unselect previous selected slide\r\n  this.unselectSelectedSlide();\r\n  // update new selected slide\r\n  this.selectedSlide = slide;\r\n  slide.select();\r\n  this.selectedCells = slide.cells;\r\n  this.selectedElements = slide.getCellElements();\r\n  // HACK: selectedCell & selectedElement is first cell in slide, backwards compatibility\r\n  // Remove in v3?\r\n  this.selectedCell = slide.cells[0];\r\n  this.selectedElement = this.selectedElements[0];\r\n};\r\n\r\nproto.unselectSelectedSlide = function() {\r\n  if ( this.selectedSlide ) {\r\n    this.selectedSlide.unselect();\r\n  }\r\n};\r\n\r\n/**\r\n * select slide from number or cell element\r\n * @param {Element or Number} elem\r\n */\r\nproto.selectCell = function( value, isWrap, isInstant ) {\r\n  // get cell\r\n  var cell = this.queryCell( value );\r\n  if ( !cell ) {\r\n    return;\r\n  }\r\n\r\n  var index = this.getCellSlideIndex( cell );\r\n  this.select( index, isWrap, isInstant );\r\n};\r\n\r\nproto.getCellSlideIndex = function( cell ) {\r\n  // get index of slides that has cell\r\n  for ( var i=0; i < this.slides.length; i++ ) {\r\n    var slide = this.slides[i];\r\n    var index = slide.cells.indexOf( cell );\r\n    if ( index != -1 ) {\r\n      return i;\r\n    }\r\n  }\r\n};\r\n\r\n// -------------------------- get cells -------------------------- //\r\n\r\n/**\r\n * get Flickity.Cell, given an Element\r\n * @param {Element} elem\r\n * @returns {Flickity.Cell} item\r\n */\r\nproto.getCell = function( elem ) {\r\n  // loop through cells to get the one that matches\r\n  for ( var i=0; i < this.cells.length; i++ ) {\r\n    var cell = this.cells[i];\r\n    if ( cell.element == elem ) {\r\n      return cell;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * get collection of Flickity.Cells, given Elements\r\n * @param {Element, Array, NodeList} elems\r\n * @returns {Array} cells - Flickity.Cells\r\n */\r\nproto.getCells = function( elems ) {\r\n  elems = utils.makeArray( elems );\r\n  var cells = [];\r\n  elems.forEach( function( elem ) {\r\n    var cell = this.getCell( elem );\r\n    if ( cell ) {\r\n      cells.push( cell );\r\n    }\r\n  }, this );\r\n  return cells;\r\n};\r\n\r\n/**\r\n * get cell elements\r\n * @returns {Array} cellElems\r\n */\r\nproto.getCellElements = function() {\r\n  return this.cells.map( function( cell ) {\r\n    return cell.element;\r\n  });\r\n};\r\n\r\n/**\r\n * get parent cell from an element\r\n * @param {Element} elem\r\n * @returns {Flickit.Cell} cell\r\n */\r\nproto.getParentCell = function( elem ) {\r\n  // first check if elem is cell\r\n  var cell = this.getCell( elem );\r\n  if ( cell ) {\r\n    return cell;\r\n  }\r\n  // try to get parent cell elem\r\n  elem = utils.getParent( elem, '.flickity-slider > *' );\r\n  return this.getCell( elem );\r\n};\r\n\r\n/**\r\n * get cells adjacent to a slide\r\n * @param {Integer} adjCount - number of adjacent slides\r\n * @param {Integer} index - index of slide to start\r\n * @returns {Array} cells - array of Flickity.Cells\r\n */\r\nproto.getAdjacentCellElements = function( adjCount, index ) {\r\n  if ( !adjCount ) {\r\n    return this.selectedSlide.getCellElements();\r\n  }\r\n  index = index === undefined ? this.selectedIndex : index;\r\n\r\n  var len = this.slides.length;\r\n  if ( 1 + ( adjCount * 2 ) >= len ) {\r\n    return this.getCellElements();\r\n  }\r\n\r\n  var cellElems = [];\r\n  for ( var i = index - adjCount; i <= index + adjCount ; i++ ) {\r\n    var slideIndex = this.options.wrapAround ? utils.modulo( i, len ) : i;\r\n    var slide = this.slides[ slideIndex ];\r\n    if ( slide ) {\r\n      cellElems = cellElems.concat( slide.getCellElements() );\r\n    }\r\n  }\r\n  return cellElems;\r\n};\r\n\r\n/**\r\n * select slide from number or cell element\r\n * @param {Element, Selector String, or Number} selector\r\n */\r\nproto.queryCell = function( selector ) {\r\n  if ( typeof selector == 'number' ) {\r\n    // use number as index\r\n    return this.cells[ selector ];\r\n  }\r\n  if ( typeof selector == 'string' ) {\r\n    // use string as selector, get element\r\n    selector = this.element.querySelector( selector );\r\n  }\r\n  // get cell from element\r\n  return this.getCell( selector );\r\n};\r\n\r\n// -------------------------- events -------------------------- //\r\n\r\nproto.uiChange = function() {\r\n  this.emitEvent('uiChange');\r\n};\r\n\r\nproto.childUIPointerDown = function( event ) {\r\n  this.emitEvent( 'childUIPointerDown', [ event ] );\r\n};\r\n\r\n// ----- resize ----- //\r\n\r\nproto.onresize = function() {\r\n  this.watchCSS();\r\n  this.resize();\r\n};\r\n\r\nutils.debounceMethod( Flickity, 'onresize', 150 );\r\n\r\nproto.resize = function() {\r\n  if ( !this.isActive ) {\r\n    return;\r\n  }\r\n  this.getSize();\r\n  // wrap values\r\n  if ( this.options.wrapAround ) {\r\n    this.x = utils.modulo( this.x, this.slideableWidth );\r\n  }\r\n  this.positionCells();\r\n  this._getWrapShiftCells();\r\n  this.setGallerySize();\r\n  this.emitEvent('resize');\r\n  // update selected index for group slides, instant\r\n  // TODO: position can be lost between groups of various numbers\r\n  var selectedElement = this.selectedElements && this.selectedElements[0];\r\n  this.selectCell( selectedElement, false, true );\r\n};\r\n\r\n// watches the :after property, activates/deactivates\r\nproto.watchCSS = function() {\r\n  var watchOption = this.options.watchCSS;\r\n  if ( !watchOption ) {\r\n    return;\r\n  }\r\n\r\n  var afterContent = getComputedStyle( this.element, ':after' ).content;\r\n  // activate if :after { content: 'flickity' }\r\n  if ( afterContent.indexOf('flickity') != -1 ) {\r\n    this.activate();\r\n  } else {\r\n    this.deactivate();\r\n  }\r\n};\r\n\r\n// ----- keydown ----- //\r\n\r\n// go previous/next if left/right keys pressed\r\nproto.onkeydown = function( event ) {\r\n  // only work if element is in focus\r\n  var isNotFocused = document.activeElement && document.activeElement != this.element;\r\n  if ( !this.options.accessibility ||isNotFocused ) {\r\n    return;\r\n  }\r\n\r\n  var handler = Flickity.keyboardHandlers[ event.keyCode ];\r\n  if ( handler ) {\r\n    handler.call( this );\r\n  }\r\n};\r\n\r\nFlickity.keyboardHandlers = {\r\n  // left arrow\r\n  37: function() {\r\n    var leftMethod = this.options.rightToLeft ? 'next' : 'previous';\r\n    this.uiChange();\r\n    this[ leftMethod ]();\r\n  },\r\n  // right arrow\r\n  39: function() {\r\n    var rightMethod = this.options.rightToLeft ? 'previous' : 'next';\r\n    this.uiChange();\r\n    this[ rightMethod ]();\r\n  },\r\n};\r\n\r\n// ----- focus ----- //\r\n\r\nproto.focus = function() {\r\n  var prevScrollY = window.pageYOffset;\r\n  this.element.focus();\r\n  // hack to fix scroll jump after focus, #76\r\n  if ( window.pageYOffset != prevScrollY ) {\r\n    window.scrollTo( window.pageXOffset, prevScrollY );\r\n  }\r\n};\r\n\r\n// -------------------------- destroy -------------------------- //\r\n\r\n// deactivate all Flickity functionality, but keep stuff available\r\nproto.deactivate = function() {\r\n  if ( !this.isActive ) {\r\n    return;\r\n  }\r\n  this.element.classList.remove('flickity-enabled');\r\n  this.element.classList.remove('flickity-rtl');\r\n  this.unselectSelectedSlide();\r\n  // destroy cells\r\n  this.cells.forEach( function( cell ) {\r\n    cell.destroy();\r\n  });\r\n  this.element.removeChild( this.viewport );\r\n  // move child elements back into element\r\n  moveElements( this.slider.children, this.element );\r\n  if ( this.options.accessibility ) {\r\n    this.element.removeAttribute('tabIndex');\r\n    this.element.removeEventListener( 'keydown', this );\r\n  }\r\n  // set flags\r\n  this.isActive = false;\r\n  this.emitEvent('deactivate');\r\n};\r\n\r\nproto.destroy = function() {\r\n  this.deactivate();\r\n  window.removeEventListener( 'resize', this );\r\n  this.emitEvent('destroy');\r\n  if ( jQuery && this.$element ) {\r\n    jQuery.removeData( this.element, 'flickity' );\r\n  }\r\n  delete this.element.flickityGUID;\r\n  delete instances[ this.guid ];\r\n};\r\n\r\n// -------------------------- prototype -------------------------- //\r\n\r\nutils.extend( proto, animatePrototype );\r\n\r\n// -------------------------- extras -------------------------- //\r\n\r\n/**\r\n * get Flickity instance from element\r\n * @param {Element} elem\r\n * @returns {Flickity}\r\n */\r\nFlickity.data = function( elem ) {\r\n  elem = utils.getQueryElement( elem );\r\n  var id = elem && elem.flickityGUID;\r\n  return id && instances[ id ];\r\n};\r\n\r\nutils.htmlInit( Flickity, 'flickity' );\r\n\r\nif ( jQuery && jQuery.bridget ) {\r\n  jQuery.bridget( 'flickity', Flickity );\r\n}\r\n\r\n// set internal jQuery, for Webpack + jQuery v3, #478\r\nFlickity.setJQuery = function( jq ) {\r\n  jQuery = jq;\r\n};\r\n\r\nFlickity.Cell = Cell;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n/*!\r\n * Unipointer v2.2.1\r\n * base class for doing one thing with pointer event\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, undef: true, unused: true, strict: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /*global define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'unipointer/unipointer',[\r\n      'ev-emitter/ev-emitter'\r\n    ], function( EvEmitter ) {\r\n      return factory( window, EvEmitter );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('ev-emitter')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Unipointer = factory(\r\n      window,\r\n      window.EvEmitter\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, EvEmitter ) {\r\n\r\n\r\n\r\nfunction noop() {}\r\n\r\nfunction Unipointer() {}\r\n\r\n// inherit EvEmitter\r\nvar proto = Unipointer.prototype = Object.create( EvEmitter.prototype );\r\n\r\nproto.bindStartEvent = function( elem ) {\r\n  this._bindStartEvent( elem, true );\r\n};\r\n\r\nproto.unbindStartEvent = function( elem ) {\r\n  this._bindStartEvent( elem, false );\r\n};\r\n\r\n/**\r\n * works as unbinder, as you can ._bindStart( false ) to unbind\r\n * @param {Boolean} isBind - will unbind if falsey\r\n */\r\nproto._bindStartEvent = function( elem, isBind ) {\r\n  // munge isBind, default to true\r\n  isBind = isBind === undefined ? true : !!isBind;\r\n  var bindMethod = isBind ? 'addEventListener' : 'removeEventListener';\r\n\r\n  if ( window.PointerEvent ) {\r\n    // Pointer Events. Chrome 55, IE11, Edge 14\r\n    elem[ bindMethod ]( 'pointerdown', this );\r\n  } else {\r\n    // listen for both, for devices like Chrome Pixel\r\n    elem[ bindMethod ]( 'mousedown', this );\r\n    elem[ bindMethod ]( 'touchstart', this );\r\n  }\r\n};\r\n\r\n// trigger handler methods for events\r\nproto.handleEvent = function( event ) {\r\n  var method = 'on' + event.type;\r\n  if ( this[ method ] ) {\r\n    this[ method ]( event );\r\n  }\r\n};\r\n\r\n// returns the touch that we're keeping track of\r\nproto.getTouch = function( touches ) {\r\n  for ( var i=0; i < touches.length; i++ ) {\r\n    var touch = touches[i];\r\n    if ( touch.identifier == this.pointerIdentifier ) {\r\n      return touch;\r\n    }\r\n  }\r\n};\r\n\r\n// ----- start event ----- //\r\n\r\nproto.onmousedown = function( event ) {\r\n  // dismiss clicks from right or middle buttons\r\n  var button = event.button;\r\n  if ( button && ( button !== 0 && button !== 1 ) ) {\r\n    return;\r\n  }\r\n  this._pointerDown( event, event );\r\n};\r\n\r\nproto.ontouchstart = function( event ) {\r\n  this._pointerDown( event, event.changedTouches[0] );\r\n};\r\n\r\nproto.onpointerdown = function( event ) {\r\n  this._pointerDown( event, event );\r\n};\r\n\r\n/**\r\n * pointer start\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto._pointerDown = function( event, pointer ) {\r\n  // dismiss right click and other pointers\r\n  // button = 0 is okay, 1-4 not\r\n  if ( event.button || this.isPointerDown ) {\r\n    return;\r\n  }\r\n\r\n  this.isPointerDown = true;\r\n  // save pointer identifier to match up touch events\r\n  this.pointerIdentifier = pointer.pointerId !== undefined ?\r\n    // pointerId for pointer events, touch.indentifier for touch events\r\n    pointer.pointerId : pointer.identifier;\r\n\r\n  this.pointerDown( event, pointer );\r\n};\r\n\r\nproto.pointerDown = function( event, pointer ) {\r\n  this._bindPostStartEvents( event );\r\n  this.emitEvent( 'pointerDown', [ event, pointer ] );\r\n};\r\n\r\n// hash of events to be bound after start event\r\nvar postStartEvents = {\r\n  mousedown: [ 'mousemove', 'mouseup' ],\r\n  touchstart: [ 'touchmove', 'touchend', 'touchcancel' ],\r\n  pointerdown: [ 'pointermove', 'pointerup', 'pointercancel' ],\r\n};\r\n\r\nproto._bindPostStartEvents = function( event ) {\r\n  if ( !event ) {\r\n    return;\r\n  }\r\n  // get proper events to match start event\r\n  var events = postStartEvents[ event.type ];\r\n  // bind events to node\r\n  events.forEach( function( eventName ) {\r\n    window.addEventListener( eventName, this );\r\n  }, this );\r\n  // save these arguments\r\n  this._boundPointerEvents = events;\r\n};\r\n\r\nproto._unbindPostStartEvents = function() {\r\n  // check for _boundEvents, in case dragEnd triggered twice (old IE8 bug)\r\n  if ( !this._boundPointerEvents ) {\r\n    return;\r\n  }\r\n  this._boundPointerEvents.forEach( function( eventName ) {\r\n    window.removeEventListener( eventName, this );\r\n  }, this );\r\n\r\n  delete this._boundPointerEvents;\r\n};\r\n\r\n// ----- move event ----- //\r\n\r\nproto.onmousemove = function( event ) {\r\n  this._pointerMove( event, event );\r\n};\r\n\r\nproto.onpointermove = function( event ) {\r\n  if ( event.pointerId == this.pointerIdentifier ) {\r\n    this._pointerMove( event, event );\r\n  }\r\n};\r\n\r\nproto.ontouchmove = function( event ) {\r\n  var touch = this.getTouch( event.changedTouches );\r\n  if ( touch ) {\r\n    this._pointerMove( event, touch );\r\n  }\r\n};\r\n\r\n/**\r\n * pointer move\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n * @private\r\n */\r\nproto._pointerMove = function( event, pointer ) {\r\n  this.pointerMove( event, pointer );\r\n};\r\n\r\n// public\r\nproto.pointerMove = function( event, pointer ) {\r\n  this.emitEvent( 'pointerMove', [ event, pointer ] );\r\n};\r\n\r\n// ----- end event ----- //\r\n\r\n\r\nproto.onmouseup = function( event ) {\r\n  this._pointerUp( event, event );\r\n};\r\n\r\nproto.onpointerup = function( event ) {\r\n  if ( event.pointerId == this.pointerIdentifier ) {\r\n    this._pointerUp( event, event );\r\n  }\r\n};\r\n\r\nproto.ontouchend = function( event ) {\r\n  var touch = this.getTouch( event.changedTouches );\r\n  if ( touch ) {\r\n    this._pointerUp( event, touch );\r\n  }\r\n};\r\n\r\n/**\r\n * pointer up\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n * @private\r\n */\r\nproto._pointerUp = function( event, pointer ) {\r\n  this._pointerDone();\r\n  this.pointerUp( event, pointer );\r\n};\r\n\r\n// public\r\nproto.pointerUp = function( event, pointer ) {\r\n  this.emitEvent( 'pointerUp', [ event, pointer ] );\r\n};\r\n\r\n// ----- pointer done ----- //\r\n\r\n// triggered on pointer up & pointer cancel\r\nproto._pointerDone = function() {\r\n  // reset properties\r\n  this.isPointerDown = false;\r\n  delete this.pointerIdentifier;\r\n  // remove events\r\n  this._unbindPostStartEvents();\r\n  this.pointerDone();\r\n};\r\n\r\nproto.pointerDone = noop;\r\n\r\n// ----- pointer cancel ----- //\r\n\r\nproto.onpointercancel = function( event ) {\r\n  if ( event.pointerId == this.pointerIdentifier ) {\r\n    this._pointerCancel( event, event );\r\n  }\r\n};\r\n\r\nproto.ontouchcancel = function( event ) {\r\n  var touch = this.getTouch( event.changedTouches );\r\n  if ( touch ) {\r\n    this._pointerCancel( event, touch );\r\n  }\r\n};\r\n\r\n/**\r\n * pointer cancel\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n * @private\r\n */\r\nproto._pointerCancel = function( event, pointer ) {\r\n  this._pointerDone();\r\n  this.pointerCancel( event, pointer );\r\n};\r\n\r\n// public\r\nproto.pointerCancel = function( event, pointer ) {\r\n  this.emitEvent( 'pointerCancel', [ event, pointer ] );\r\n};\r\n\r\n// -----  ----- //\r\n\r\n// utility function for getting x/y coords from event\r\nUnipointer.getPointerPoint = function( pointer ) {\r\n  return {\r\n    x: pointer.pageX,\r\n    y: pointer.pageY\r\n  };\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn Unipointer;\r\n\r\n}));\r\n\r\n/*!\r\n * Unidragger v2.2.3\r\n * Draggable base class\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, unused: true, undef: true, strict: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /*globals define, module, require */\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'unidragger/unidragger',[\r\n      'unipointer/unipointer'\r\n    ], function( Unipointer ) {\r\n      return factory( window, Unipointer );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('unipointer')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Unidragger = factory(\r\n      window,\r\n      window.Unipointer\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Unipointer ) {\r\n\r\n\r\n\r\n// -------------------------- Unidragger -------------------------- //\r\n\r\nfunction Unidragger() {}\r\n\r\n// inherit Unipointer & EvEmitter\r\nvar proto = Unidragger.prototype = Object.create( Unipointer.prototype );\r\n\r\n// ----- bind start ----- //\r\n\r\nproto.bindHandles = function() {\r\n  this._bindHandles( true );\r\n};\r\n\r\nproto.unbindHandles = function() {\r\n  this._bindHandles( false );\r\n};\r\n\r\n/**\r\n * works as unbinder, as you can .bindHandles( false ) to unbind\r\n * @param {Boolean} isBind - will unbind if falsey\r\n */\r\nproto._bindHandles = function( isBind ) {\r\n  // munge isBind, default to true\r\n  isBind = isBind === undefined ? true : !!isBind;\r\n  // bind each handle\r\n  var bindMethod = isBind ? 'addEventListener' : 'removeEventListener';\r\n  for ( var i=0; i < this.handles.length; i++ ) {\r\n    var handle = this.handles[i];\r\n    this._bindStartEvent( handle, isBind );\r\n    handle[ bindMethod ]( 'click', this );\r\n    // touch-action: none to override browser touch gestures\r\n    // metafizzy/flickity#540\r\n    if ( window.PointerEvent ) {\r\n      handle.style.touchAction = isBind ? this._touchActionValue : '';\r\n    }\r\n  }\r\n};\r\n\r\n// prototype so it can be overwriteable by Flickity\r\nproto._touchActionValue = 'none';\r\n\r\n// ----- start event ----- //\r\n\r\n/**\r\n * pointer start\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto.pointerDown = function( event, pointer ) {\r\n  // dismiss range sliders\r\n  if ( event.target.nodeName == 'INPUT' && event.target.type == 'range' ) {\r\n    // reset pointerDown logic\r\n    this.isPointerDown = false;\r\n    delete this.pointerIdentifier;\r\n    return;\r\n  }\r\n\r\n  this._dragPointerDown( event, pointer );\r\n  // kludge to blur focused inputs in dragger\r\n  var focused = document.activeElement;\r\n  if ( focused && focused.blur ) {\r\n    focused.blur();\r\n  }\r\n  // bind move and end events\r\n  this._bindPostStartEvents( event );\r\n  this.emitEvent( 'pointerDown', [ event, pointer ] );\r\n};\r\n\r\n// base pointer down logic\r\nproto._dragPointerDown = function( event, pointer ) {\r\n  // track to see when dragging starts\r\n  this.pointerDownPoint = Unipointer.getPointerPoint( pointer );\r\n\r\n  var canPreventDefault = this.canPreventDefaultOnPointerDown( event, pointer );\r\n  if ( canPreventDefault ) {\r\n    event.preventDefault();\r\n  }\r\n};\r\n\r\n// overwriteable method so Flickity can prevent for scrolling\r\nproto.canPreventDefaultOnPointerDown = function( event ) {\r\n  // prevent default, unless touchstart or <select>\r\n  return event.target.nodeName != 'SELECT';\r\n};\r\n\r\n// ----- move event ----- //\r\n\r\n/**\r\n * drag move\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto.pointerMove = function( event, pointer ) {\r\n  var moveVector = this._dragPointerMove( event, pointer );\r\n  this.emitEvent( 'pointerMove', [ event, pointer, moveVector ] );\r\n  this._dragMove( event, pointer, moveVector );\r\n};\r\n\r\n// base pointer move logic\r\nproto._dragPointerMove = function( event, pointer ) {\r\n  var movePoint = Unipointer.getPointerPoint( pointer );\r\n  var moveVector = {\r\n    x: movePoint.x - this.pointerDownPoint.x,\r\n    y: movePoint.y - this.pointerDownPoint.y\r\n  };\r\n  // start drag if pointer has moved far enough to start drag\r\n  if ( !this.isDragging && this.hasDragStarted( moveVector ) ) {\r\n    this._dragStart( event, pointer );\r\n  }\r\n  return moveVector;\r\n};\r\n\r\n// condition if pointer has moved far enough to start drag\r\nproto.hasDragStarted = function( moveVector ) {\r\n  return Math.abs( moveVector.x ) > 3 || Math.abs( moveVector.y ) > 3;\r\n};\r\n\r\n\r\n// ----- end event ----- //\r\n\r\n/**\r\n * pointer up\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto.pointerUp = function( event, pointer ) {\r\n  this.emitEvent( 'pointerUp', [ event, pointer ] );\r\n  this._dragPointerUp( event, pointer );\r\n};\r\n\r\nproto._dragPointerUp = function( event, pointer ) {\r\n  if ( this.isDragging ) {\r\n    this._dragEnd( event, pointer );\r\n  } else {\r\n    // pointer didn't move enough for drag to start\r\n    this._staticClick( event, pointer );\r\n  }\r\n};\r\n\r\n// -------------------------- drag -------------------------- //\r\n\r\n// dragStart\r\nproto._dragStart = function( event, pointer ) {\r\n  this.isDragging = true;\r\n  this.dragStartPoint = Unipointer.getPointerPoint( pointer );\r\n  // prevent clicks\r\n  this.isPreventingClicks = true;\r\n\r\n  this.dragStart( event, pointer );\r\n};\r\n\r\nproto.dragStart = function( event, pointer ) {\r\n  this.emitEvent( 'dragStart', [ event, pointer ] );\r\n};\r\n\r\n// dragMove\r\nproto._dragMove = function( event, pointer, moveVector ) {\r\n  // do not drag if not dragging yet\r\n  if ( !this.isDragging ) {\r\n    return;\r\n  }\r\n\r\n  this.dragMove( event, pointer, moveVector );\r\n};\r\n\r\nproto.dragMove = function( event, pointer, moveVector ) {\r\n  event.preventDefault();\r\n  this.emitEvent( 'dragMove', [ event, pointer, moveVector ] );\r\n};\r\n\r\n// dragEnd\r\nproto._dragEnd = function( event, pointer ) {\r\n  // set flags\r\n  this.isDragging = false;\r\n  // re-enable clicking async\r\n  setTimeout( function() {\r\n    delete this.isPreventingClicks;\r\n  }.bind( this ) );\r\n\r\n  this.dragEnd( event, pointer );\r\n};\r\n\r\nproto.dragEnd = function( event, pointer ) {\r\n  this.emitEvent( 'dragEnd', [ event, pointer ] );\r\n};\r\n\r\n// ----- onclick ----- //\r\n\r\n// handle all clicks and prevent clicks when dragging\r\nproto.onclick = function( event ) {\r\n  if ( this.isPreventingClicks ) {\r\n    event.preventDefault();\r\n  }\r\n};\r\n\r\n// ----- staticClick ----- //\r\n\r\n// triggered after pointer down & up with no/tiny movement\r\nproto._staticClick = function( event, pointer ) {\r\n  // ignore emulated mouse up clicks\r\n  if ( this.isIgnoringMouseUp && event.type == 'mouseup' ) {\r\n    return;\r\n  }\r\n\r\n  // allow click in <input>s and <textarea>s\r\n  var nodeName = event.target.nodeName;\r\n  if ( nodeName == 'INPUT' || nodeName == 'TEXTAREA' ) {\r\n    event.target.focus();\r\n  }\r\n  this.staticClick( event, pointer );\r\n\r\n  // set flag for emulated clicks 300ms after touchend\r\n  if ( event.type != 'mouseup' ) {\r\n    this.isIgnoringMouseUp = true;\r\n    // reset flag after 300ms\r\n    setTimeout( function() {\r\n      delete this.isIgnoringMouseUp;\r\n    }.bind( this ), 400 );\r\n  }\r\n};\r\n\r\nproto.staticClick = function( event, pointer ) {\r\n  this.emitEvent( 'staticClick', [ event, pointer ] );\r\n};\r\n\r\n// ----- utils ----- //\r\n\r\nUnidragger.getPointerPoint = Unipointer.getPointerPoint;\r\n\r\n// -----  ----- //\r\n\r\nreturn Unidragger;\r\n\r\n}));\r\n\r\n// drag\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/drag',[\r\n      './flickity',\r\n      'unidragger/unidragger',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, Unidragger, utils ) {\r\n      return factory( window, Flickity, Unidragger, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('unidragger'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = factory(\r\n      window,\r\n      window.Flickity,\r\n      window.Unidragger,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, Unidragger, utils ) {\r\n\r\n\r\n\r\n// ----- defaults ----- //\r\n\r\nutils.extend( Flickity.defaults, {\r\n  draggable: '>1',\r\n  dragThreshold: 3,\r\n});\r\n\r\n// ----- create ----- //\r\n\r\nFlickity.createMethods.push('_createDrag');\r\n\r\n// -------------------------- drag prototype -------------------------- //\r\n\r\nvar proto = Flickity.prototype;\r\nutils.extend( proto, Unidragger.prototype );\r\nproto._touchActionValue = 'pan-y';\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nvar isTouch = 'createTouch' in document;\r\nvar isTouchmoveScrollCanceled = false;\r\n\r\nproto._createDrag = function() {\r\n  this.on( 'activate', this.onActivateDrag );\r\n  this.on( 'uiChange', this._uiChangeDrag );\r\n  this.on( 'childUIPointerDown', this._childUIPointerDownDrag );\r\n  this.on( 'deactivate', this.unbindDrag );\r\n  this.on( 'cellChange', this.updateDraggable );\r\n  // TODO updateDraggable on resize? if groupCells & slides change\r\n  // HACK - add seemingly innocuous handler to fix iOS 10 scroll behavior\r\n  // #457, RubaXa/Sortable#973\r\n  if ( isTouch && !isTouchmoveScrollCanceled ) {\r\n    window.addEventListener( 'touchmove', function() {});\r\n    isTouchmoveScrollCanceled = true;\r\n  }\r\n};\r\n\r\nproto.onActivateDrag = function() {\r\n  this.handles = [ this.viewport ];\r\n  this.bindHandles();\r\n  this.updateDraggable();\r\n};\r\n\r\nproto.onDeactivateDrag = function() {\r\n  this.unbindHandles();\r\n  this.element.classList.remove('is-draggable');\r\n};\r\n\r\nproto.updateDraggable = function() {\r\n  // disable dragging if less than 2 slides. #278\r\n  if ( this.options.draggable == '>1' ) {\r\n    this.isDraggable = this.slides.length > 1;\r\n  } else {\r\n    this.isDraggable = this.options.draggable;\r\n  }\r\n  if ( this.isDraggable ) {\r\n    this.element.classList.add('is-draggable');\r\n  } else {\r\n    this.element.classList.remove('is-draggable');\r\n  }\r\n};\r\n\r\n// backwards compatibility\r\nproto.bindDrag = function() {\r\n  this.options.draggable = true;\r\n  this.updateDraggable();\r\n};\r\n\r\nproto.unbindDrag = function() {\r\n  this.options.draggable = false;\r\n  this.updateDraggable();\r\n};\r\n\r\nproto._uiChangeDrag = function() {\r\n  delete this.isFreeScrolling;\r\n};\r\n\r\nproto._childUIPointerDownDrag = function( event ) {\r\n  if ( !this.isDraggable ) {\r\n    return;\r\n  }\r\n  event.preventDefault();\r\n  this.pointerDownFocus( event );\r\n};\r\n\r\n// -------------------------- pointer events -------------------------- //\r\n\r\n// nodes that have text fields\r\nvar cursorNodes = {\r\n  TEXTAREA: true,\r\n  INPUT: true,\r\n  OPTION: true,\r\n};\r\n\r\n// input types that do not have text fields\r\nvar clickTypes = {\r\n  radio: true,\r\n  checkbox: true,\r\n  button: true,\r\n  submit: true,\r\n  image: true,\r\n  file: true,\r\n};\r\n\r\nproto.pointerDown = function( event, pointer ) {\r\n  if ( !this.isDraggable ) {\r\n    this._pointerDownDefault( event, pointer );\r\n    return;\r\n  }\r\n  // dismiss inputs with text fields. #403, #404\r\n  var isCursorInput = cursorNodes[ event.target.nodeName ] &&\r\n    !clickTypes[ event.target.type ];\r\n  if ( isCursorInput ) {\r\n    // reset pointerDown logic\r\n    this.isPointerDown = false;\r\n    delete this.pointerIdentifier;\r\n    return;\r\n  }\r\n\r\n  // kludge to blur focused inputs in dragger\r\n  var focused = document.activeElement;\r\n  var canBlur = focused && focused.blur && focused != this.element &&\r\n    // do not blur body for IE9 & 10, #117\r\n    focused != document.body;\r\n  if ( canBlur ) {\r\n    focused.blur();\r\n  }\r\n  this.pointerDownFocus( event );\r\n  // stop if it was moving\r\n  this.dragX = this.x;\r\n  this.viewport.classList.add('is-pointer-down');\r\n  // track scrolling\r\n  this.pointerDownScroll = getScrollPosition();\r\n  window.addEventListener( 'scroll', this );\r\n\r\n  this._pointerDownDefault( event, pointer );\r\n};\r\n\r\nproto._pointerDownDefault = function( event, pointer ) {\r\n  this._dragPointerDown( event, pointer );\r\n  // bind move and end events\r\n  this._bindPostStartEvents( event );\r\n  this.dispatchEvent( 'pointerDown', event, [ pointer ] );\r\n};\r\n\r\nproto.pointerDownFocus = function( event ) {\r\n  // focus element, if not touch, and its not an input or select\r\n  var canPointerDown = getCanPointerDown( event );\r\n  if ( !canPointerDown ) {\r\n    this.focus();\r\n  }\r\n};\r\n\r\nvar focusNodes = {\r\n  INPUT: true,\r\n  SELECT: true,\r\n};\r\n\r\nfunction getCanPointerDown( event ) {\r\n  var isTouchStart = event.type == 'touchstart';\r\n  var isTouchPointer = event.pointerType == 'touch';\r\n  var isFocusNode = focusNodes[ event.target.nodeName ];\r\n  return isTouchStart || isTouchPointer || isFocusNode;\r\n}\r\n\r\nproto.canPreventDefaultOnPointerDown = function( event ) {\r\n  // prevent default, unless touchstart or input\r\n  var canPointerDown = getCanPointerDown( event );\r\n  return this.isDraggable && !canPointerDown;\r\n};\r\n\r\n// ----- move ----- //\r\n\r\nproto.hasDragStarted = function( moveVector ) {\r\n  return Math.abs( moveVector.x ) > this.options.dragThreshold;\r\n};\r\n\r\n// ----- up ----- //\r\n\r\nproto.pointerUp = function( event, pointer ) {\r\n  delete this.isTouchScrolling;\r\n  this.viewport.classList.remove('is-pointer-down');\r\n  this.dispatchEvent( 'pointerUp', event, [ pointer ] );\r\n  this._dragPointerUp( event, pointer );\r\n};\r\n\r\nproto.pointerDone = function() {\r\n  window.removeEventListener( 'scroll', this );\r\n  delete this.pointerDownScroll;\r\n};\r\n\r\n// -------------------------- dragging -------------------------- //\r\n\r\nproto.dragStart = function( event, pointer ) {\r\n  if ( !this.isDraggable ) {\r\n    return;\r\n  }\r\n  this.dragStartPosition = this.x;\r\n  this.startAnimation();\r\n  window.removeEventListener( 'scroll', this );\r\n  this.dispatchEvent( 'dragStart', event, [ pointer ] );\r\n};\r\n\r\nproto.pointerMove = function( event, pointer ) {\r\n  var moveVector = this._dragPointerMove( event, pointer );\r\n  this.dispatchEvent( 'pointerMove', event, [ pointer, moveVector ] );\r\n  this._dragMove( event, pointer, moveVector );\r\n};\r\n\r\nproto.dragMove = function( event, pointer, moveVector ) {\r\n  if ( !this.isDraggable ) {\r\n    return;\r\n  }\r\n  event.preventDefault();\r\n\r\n  this.previousDragX = this.dragX;\r\n  // reverse if right-to-left\r\n  var direction = this.options.rightToLeft ? -1 : 1;\r\n  if ( this.options.wrapAround ) {\r\n    // wrap around move. #589\r\n    moveVector.x = moveVector.x % this.slideableWidth;\r\n  }\r\n  var dragX = this.dragStartPosition + moveVector.x * direction;\r\n\r\n  if ( !this.options.wrapAround && this.slides.length ) {\r\n    // slow drag\r\n    var originBound = Math.max( -this.slides[0].target, this.dragStartPosition );\r\n    dragX = dragX > originBound ? ( dragX + originBound ) * 0.5 : dragX;\r\n    var endBound = Math.min( -this.getLastSlide().target, this.dragStartPosition );\r\n    dragX = dragX < endBound ? ( dragX + endBound ) * 0.5 : dragX;\r\n  }\r\n\r\n  this.dragX = dragX;\r\n\r\n  this.dragMoveTime = new Date();\r\n  this.dispatchEvent( 'dragMove', event, [ pointer, moveVector ] );\r\n};\r\n\r\nproto.dragEnd = function( event, pointer ) {\r\n  if ( !this.isDraggable ) {\r\n    return;\r\n  }\r\n  if ( this.options.freeScroll ) {\r\n    this.isFreeScrolling = true;\r\n  }\r\n  // set selectedIndex based on where flick will end up\r\n  var index = this.dragEndRestingSelect();\r\n\r\n  if ( this.options.freeScroll && !this.options.wrapAround ) {\r\n    // if free-scroll & not wrap around\r\n    // do not free-scroll if going outside of bounding slides\r\n    // so bounding slides can attract slider, and keep it in bounds\r\n    var restingX = this.getRestingPosition();\r\n    this.isFreeScrolling = -restingX > this.slides[0].target &&\r\n      -restingX < this.getLastSlide().target;\r\n  } else if ( !this.options.freeScroll && index == this.selectedIndex ) {\r\n    // boost selection if selected index has not changed\r\n    index += this.dragEndBoostSelect();\r\n  }\r\n  delete this.previousDragX;\r\n  // apply selection\r\n  // TODO refactor this, selecting here feels weird\r\n  // HACK, set flag so dragging stays in correct direction\r\n  this.isDragSelect = this.options.wrapAround;\r\n  this.select( index );\r\n  delete this.isDragSelect;\r\n  this.dispatchEvent( 'dragEnd', event, [ pointer ] );\r\n};\r\n\r\nproto.dragEndRestingSelect = function() {\r\n  var restingX = this.getRestingPosition();\r\n  // how far away from selected slide\r\n  var distance = Math.abs( this.getSlideDistance( -restingX, this.selectedIndex ) );\r\n  // get closet resting going up and going down\r\n  var positiveResting = this._getClosestResting( restingX, distance, 1 );\r\n  var negativeResting = this._getClosestResting( restingX, distance, -1 );\r\n  // use closer resting for wrap-around\r\n  var index = positiveResting.distance < negativeResting.distance ?\r\n    positiveResting.index : negativeResting.index;\r\n  return index;\r\n};\r\n\r\n/**\r\n * given resting X and distance to selected cell\r\n * get the distance and index of the closest cell\r\n * @param {Number} restingX - estimated post-flick resting position\r\n * @param {Number} distance - distance to selected cell\r\n * @param {Integer} increment - +1 or -1, going up or down\r\n * @returns {Object} - { distance: {Number}, index: {Integer} }\r\n */\r\nproto._getClosestResting = function( restingX, distance, increment ) {\r\n  var index = this.selectedIndex;\r\n  var minDistance = Infinity;\r\n  var condition = this.options.contain && !this.options.wrapAround ?\r\n    // if contain, keep going if distance is equal to minDistance\r\n    function( d, md ) { return d <= md; } : function( d, md ) { return d < md; };\r\n  while ( condition( distance, minDistance ) ) {\r\n    // measure distance to next cell\r\n    index += increment;\r\n    minDistance = distance;\r\n    distance = this.getSlideDistance( -restingX, index );\r\n    if ( distance === null ) {\r\n      break;\r\n    }\r\n    distance = Math.abs( distance );\r\n  }\r\n  return {\r\n    distance: minDistance,\r\n    // selected was previous index\r\n    index: index - increment\r\n  };\r\n};\r\n\r\n/**\r\n * measure distance between x and a slide target\r\n * @param {Number} x\r\n * @param {Integer} index - slide index\r\n */\r\nproto.getSlideDistance = function( x, index ) {\r\n  var len = this.slides.length;\r\n  // wrap around if at least 2 slides\r\n  var isWrapAround = this.options.wrapAround && len > 1;\r\n  var slideIndex = isWrapAround ? utils.modulo( index, len ) : index;\r\n  var slide = this.slides[ slideIndex ];\r\n  if ( !slide ) {\r\n    return null;\r\n  }\r\n  // add distance for wrap-around slides\r\n  var wrap = isWrapAround ? this.slideableWidth * Math.floor( index / len ) : 0;\r\n  return x - ( slide.target + wrap );\r\n};\r\n\r\nproto.dragEndBoostSelect = function() {\r\n  // do not boost if no previousDragX or dragMoveTime\r\n  if ( this.previousDragX === undefined || !this.dragMoveTime ||\r\n    // or if drag was held for 100 ms\r\n    new Date() - this.dragMoveTime > 100 ) {\r\n    return 0;\r\n  }\r\n\r\n  var distance = this.getSlideDistance( -this.dragX, this.selectedIndex );\r\n  var delta = this.previousDragX - this.dragX;\r\n  if ( distance > 0 && delta > 0 ) {\r\n    // boost to next if moving towards the right, and positive velocity\r\n    return 1;\r\n  } else if ( distance < 0 && delta < 0 ) {\r\n    // boost to previous if moving towards the left, and negative velocity\r\n    return -1;\r\n  }\r\n  return 0;\r\n};\r\n\r\n// ----- staticClick ----- //\r\n\r\nproto.staticClick = function( event, pointer ) {\r\n  // get clickedCell, if cell was clicked\r\n  var clickedCell = this.getParentCell( event.target );\r\n  var cellElem = clickedCell && clickedCell.element;\r\n  var cellIndex = clickedCell && this.cells.indexOf( clickedCell );\r\n  this.dispatchEvent( 'staticClick', event, [ pointer, cellElem, cellIndex ] );\r\n};\r\n\r\n// ----- scroll ----- //\r\n\r\nproto.onscroll = function() {\r\n  var scroll = getScrollPosition();\r\n  var scrollMoveX = this.pointerDownScroll.x - scroll.x;\r\n  var scrollMoveY = this.pointerDownScroll.y - scroll.y;\r\n  // cancel click/tap if scroll is too much\r\n  if ( Math.abs( scrollMoveX ) > 3 || Math.abs( scrollMoveY ) > 3 ) {\r\n    this._pointerDone();\r\n  }\r\n};\r\n\r\n// ----- utils ----- //\r\n\r\nfunction getScrollPosition() {\r\n  return {\r\n    x: window.pageXOffset,\r\n    y: window.pageYOffset\r\n  };\r\n}\r\n\r\n// -----  ----- //\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n/*!\r\n * Tap listener v2.0.0\r\n * listens to taps\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, unused: true, undef: true, strict: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false*/ /*globals define, module, require */\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'tap-listener/tap-listener',[\r\n      'unipointer/unipointer'\r\n    ], function( Unipointer ) {\r\n      return factory( window, Unipointer );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('unipointer')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.TapListener = factory(\r\n      window,\r\n      window.Unipointer\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Unipointer ) {\r\n\r\n\r\n\r\n// --------------------------  TapListener -------------------------- //\r\n\r\nfunction TapListener( elem ) {\r\n  this.bindTap( elem );\r\n}\r\n\r\n// inherit Unipointer & EventEmitter\r\nvar proto = TapListener.prototype = Object.create( Unipointer.prototype );\r\n\r\n/**\r\n * bind tap event to element\r\n * @param {Element} elem\r\n */\r\nproto.bindTap = function( elem ) {\r\n  if ( !elem ) {\r\n    return;\r\n  }\r\n  this.unbindTap();\r\n  this.tapElement = elem;\r\n  this._bindStartEvent( elem, true );\r\n};\r\n\r\nproto.unbindTap = function() {\r\n  if ( !this.tapElement ) {\r\n    return;\r\n  }\r\n  this._bindStartEvent( this.tapElement, true );\r\n  delete this.tapElement;\r\n};\r\n\r\n/**\r\n * pointer up\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto.pointerUp = function( event, pointer ) {\r\n  // ignore emulated mouse up clicks\r\n  if ( this.isIgnoringMouseUp && event.type == 'mouseup' ) {\r\n    return;\r\n  }\r\n\r\n  var pointerPoint = Unipointer.getPointerPoint( pointer );\r\n  var boundingRect = this.tapElement.getBoundingClientRect();\r\n  var scrollX = window.pageXOffset;\r\n  var scrollY = window.pageYOffset;\r\n  // calculate if pointer is inside tapElement\r\n  var isInside = pointerPoint.x >= boundingRect.left + scrollX &&\r\n    pointerPoint.x <= boundingRect.right + scrollX &&\r\n    pointerPoint.y >= boundingRect.top + scrollY &&\r\n    pointerPoint.y <= boundingRect.bottom + scrollY;\r\n  // trigger callback if pointer is inside element\r\n  if ( isInside ) {\r\n    this.emitEvent( 'tap', [ event, pointer ] );\r\n  }\r\n\r\n  // set flag for emulated clicks 300ms after touchend\r\n  if ( event.type != 'mouseup' ) {\r\n    this.isIgnoringMouseUp = true;\r\n    // reset flag after 300ms\r\n    var _this = this;\r\n    setTimeout( function() {\r\n      delete _this.isIgnoringMouseUp;\r\n    }, 400 );\r\n  }\r\n};\r\n\r\nproto.destroy = function() {\r\n  this.pointerDone();\r\n  this.unbindTap();\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn TapListener;\r\n\r\n}));\r\n\r\n// prev/next buttons\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/prev-next-button',[\r\n      './flickity',\r\n      'tap-listener/tap-listener',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, TapListener, utils ) {\r\n      return factory( window, Flickity, TapListener, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('tap-listener'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window,\r\n      window.Flickity,\r\n      window.TapListener,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, TapListener, utils ) {\r\n'use strict';\r\n\r\nvar svgURI = 'http://www.w3.org/2000/svg';\r\n\r\n// -------------------------- PrevNextButton -------------------------- //\r\n\r\nfunction PrevNextButton( direction, parent ) {\r\n  this.direction = direction;\r\n  this.parent = parent;\r\n  this._create();\r\n}\r\n\r\nPrevNextButton.prototype = Object.create( TapListener.prototype );\r\n\r\nPrevNextButton.prototype._create = function() {\r\n  // properties\r\n  this.isEnabled = true;\r\n  this.isPrevious = this.direction == -1;\r\n  var leftDirection = this.parent.options.rightToLeft ? 1 : -1;\r\n  this.isLeft = this.direction == leftDirection;\r\n\r\n  var element = this.element = document.createElement('button');\r\n  element.className = 'flickity-button flickity-prev-next-button';\r\n  element.className += this.isPrevious ? ' previous' : ' next';\r\n  // prevent button from submitting form http://stackoverflow.com/a/10836076/182183\r\n  element.setAttribute( 'type', 'button' );\r\n  // init as disabled\r\n  this.disable();\r\n\r\n  element.setAttribute( 'aria-label', this.isPrevious ? 'Previous' : 'Next' );\r\n\r\n  // create arrow\r\n  var svg = this.createSVG();\r\n  element.appendChild( svg );\r\n  // events\r\n  this.on( 'tap', this.onTap );\r\n  this.parent.on( 'select', this.update.bind( this ) );\r\n  this.on( 'pointerDown', this.parent.childUIPointerDown.bind( this.parent ) );\r\n};\r\n\r\nPrevNextButton.prototype.activate = function() {\r\n  this.bindTap( this.element );\r\n  // click events from keyboard\r\n  this.element.addEventListener( 'click', this );\r\n  // add to DOM\r\n  this.parent.element.appendChild( this.element );\r\n};\r\n\r\nPrevNextButton.prototype.deactivate = function() {\r\n  // remove from DOM\r\n  this.parent.element.removeChild( this.element );\r\n  // do regular TapListener destroy\r\n  TapListener.prototype.destroy.call( this );\r\n  // click events from keyboard\r\n  this.element.removeEventListener( 'click', this );\r\n};\r\n\r\nPrevNextButton.prototype.createSVG = function() {\r\n  var svg = document.createElementNS( svgURI, 'svg');\r\n  svg.setAttribute( 'class', 'flickity-button-icon' );\r\n  svg.setAttribute( 'viewBox', '0 0 100 100' );\r\n  var path = document.createElementNS( svgURI, 'path');\r\n  var pathMovements = getArrowMovements( this.parent.options.arrowShape );\r\n  path.setAttribute( 'd', pathMovements );\r\n  path.setAttribute( 'class', 'arrow' );\r\n  // rotate arrow\r\n  if ( !this.isLeft ) {\r\n    path.setAttribute( 'transform', 'translate(100, 100) rotate(180) ' );\r\n  }\r\n  svg.appendChild( path );\r\n  return svg;\r\n};\r\n\r\n// get SVG path movmement\r\nfunction getArrowMovements( shape ) {\r\n  // use shape as movement if string\r\n  if ( typeof shape == 'string' ) {\r\n    return shape;\r\n  }\r\n  // create movement string\r\n  return 'M ' + shape.x0 + ',50' +\r\n    ' L ' + shape.x1 + ',' + ( shape.y1 + 50 ) +\r\n    ' L ' + shape.x2 + ',' + ( shape.y2 + 50 ) +\r\n    ' L ' + shape.x3 + ',50 ' +\r\n    ' L ' + shape.x2 + ',' + ( 50 - shape.y2 ) +\r\n    ' L ' + shape.x1 + ',' + ( 50 - shape.y1 ) +\r\n    ' Z';\r\n}\r\n\r\nPrevNextButton.prototype.onTap = function() {\r\n  if ( !this.isEnabled ) {\r\n    return;\r\n  }\r\n  this.parent.uiChange();\r\n  var method = this.isPrevious ? 'previous' : 'next';\r\n  this.parent[ method ]();\r\n};\r\n\r\nPrevNextButton.prototype.handleEvent = utils.handleEvent;\r\n\r\nPrevNextButton.prototype.onclick = function() {\r\n  // only allow clicks from keyboard\r\n  var focused = document.activeElement;\r\n  if ( focused && focused == this.element ) {\r\n    this.onTap();\r\n  }\r\n};\r\n\r\n// -----  ----- //\r\n\r\nPrevNextButton.prototype.enable = function() {\r\n  if ( this.isEnabled ) {\r\n    return;\r\n  }\r\n  this.element.disabled = false;\r\n  this.isEnabled = true;\r\n};\r\n\r\nPrevNextButton.prototype.disable = function() {\r\n  if ( !this.isEnabled ) {\r\n    return;\r\n  }\r\n  this.element.disabled = true;\r\n  this.isEnabled = false;\r\n};\r\n\r\nPrevNextButton.prototype.update = function() {\r\n  // index of first or last slide, if previous or next\r\n  var slides = this.parent.slides;\r\n  // enable is wrapAround and at least 2 slides\r\n  if ( this.parent.options.wrapAround && slides.length > 1 ) {\r\n    this.enable();\r\n    return;\r\n  }\r\n  var lastIndex = slides.length ? slides.length - 1 : 0;\r\n  var boundIndex = this.isPrevious ? 0 : lastIndex;\r\n  var method = this.parent.selectedIndex == boundIndex ? 'disable' : 'enable';\r\n  this[ method ]();\r\n};\r\n\r\nPrevNextButton.prototype.destroy = function() {\r\n  this.deactivate();\r\n};\r\n\r\n// -------------------------- Flickity prototype -------------------------- //\r\n\r\nutils.extend( Flickity.defaults, {\r\n  prevNextButtons: true,\r\n  arrowShape: {\r\n    x0: 10,\r\n    x1: 60, y1: 50,\r\n    x2: 70, y2: 40,\r\n    x3: 30\r\n  }\r\n});\r\n\r\nFlickity.createMethods.push('_createPrevNextButtons');\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createPrevNextButtons = function() {\r\n  if ( !this.options.prevNextButtons ) {\r\n    return;\r\n  }\r\n\r\n  this.prevButton = new PrevNextButton( -1, this );\r\n  this.nextButton = new PrevNextButton( 1, this );\r\n\r\n  this.on( 'activate', this.activatePrevNextButtons );\r\n};\r\n\r\nproto.activatePrevNextButtons = function() {\r\n  this.prevButton.activate();\r\n  this.nextButton.activate();\r\n  this.on( 'deactivate', this.deactivatePrevNextButtons );\r\n};\r\n\r\nproto.deactivatePrevNextButtons = function() {\r\n  this.prevButton.deactivate();\r\n  this.nextButton.deactivate();\r\n  this.off( 'deactivate', this.deactivatePrevNextButtons );\r\n};\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nFlickity.PrevNextButton = PrevNextButton;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n// page dots\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/page-dots',[\r\n      './flickity',\r\n      'tap-listener/tap-listener',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, TapListener, utils ) {\r\n      return factory( window, Flickity, TapListener, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('tap-listener'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window,\r\n      window.Flickity,\r\n      window.TapListener,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, TapListener, utils ) {\r\n\r\n// -------------------------- PageDots -------------------------- //\r\n\r\n\r\n\r\nfunction PageDots( parent ) {\r\n  this.parent = parent;\r\n  this._create();\r\n}\r\n\r\nPageDots.prototype = new TapListener();\r\n\r\nPageDots.prototype._create = function() {\r\n  // create holder element\r\n  this.holder = document.createElement('ol');\r\n  this.holder.className = 'flickity-page-dots';\r\n  // create dots, array of elements\r\n  this.dots = [];\r\n  // events\r\n  this.on( 'tap', this.onTap );\r\n  this.on( 'pointerDown', this.parent.childUIPointerDown.bind( this.parent ) );\r\n};\r\n\r\nPageDots.prototype.activate = function() {\r\n  this.setDots();\r\n  this.bindTap( this.holder );\r\n  // add to DOM\r\n  this.parent.element.appendChild( this.holder );\r\n};\r\n\r\nPageDots.prototype.deactivate = function() {\r\n  // remove from DOM\r\n  this.parent.element.removeChild( this.holder );\r\n  TapListener.prototype.destroy.call( this );\r\n};\r\n\r\nPageDots.prototype.setDots = function() {\r\n  // get difference between number of slides and number of dots\r\n  var delta = this.parent.slides.length - this.dots.length;\r\n  if ( delta > 0 ) {\r\n    this.addDots( delta );\r\n  } else if ( delta < 0 ) {\r\n    this.removeDots( -delta );\r\n  }\r\n};\r\n\r\nPageDots.prototype.addDots = function( count ) {\r\n  var fragment = document.createDocumentFragment();\r\n  var newDots = [];\r\n  var length = this.dots.length;\r\n  var max = length + count;\r\n\r\n  for ( var i = length; i < max; i++ ) {\r\n    var dot = document.createElement('li');\r\n    dot.className = 'dot';\r\n    dot.setAttribute( 'aria-label', 'Page dot ' + ( i + 1 ) );\r\n    fragment.appendChild( dot );\r\n    newDots.push( dot );\r\n  }\r\n\r\n  this.holder.appendChild( fragment );\r\n  this.dots = this.dots.concat( newDots );\r\n};\r\n\r\nPageDots.prototype.removeDots = function( count ) {\r\n  // remove from this.dots collection\r\n  var removeDots = this.dots.splice( this.dots.length - count, count );\r\n  // remove from DOM\r\n  removeDots.forEach( function( dot ) {\r\n    this.holder.removeChild( dot );\r\n  }, this );\r\n};\r\n\r\nPageDots.prototype.updateSelected = function() {\r\n  // remove selected class on previous\r\n  if ( this.selectedDot ) {\r\n    this.selectedDot.className = 'dot';\r\n    this.selectedDot.removeAttribute('aria-current');\r\n  }\r\n  // don't proceed if no dots\r\n  if ( !this.dots.length ) {\r\n    return;\r\n  }\r\n  this.selectedDot = this.dots[ this.parent.selectedIndex ];\r\n  this.selectedDot.className = 'dot is-selected';\r\n  this.selectedDot.setAttribute( 'aria-current', 'step' );\r\n};\r\n\r\nPageDots.prototype.onTap = function( event ) {\r\n  var target = event.target;\r\n  // only care about dot clicks\r\n  if ( target.nodeName != 'LI' ) {\r\n    return;\r\n  }\r\n\r\n  this.parent.uiChange();\r\n  var index = this.dots.indexOf( target );\r\n  this.parent.select( index );\r\n};\r\n\r\nPageDots.prototype.destroy = function() {\r\n  this.deactivate();\r\n};\r\n\r\nFlickity.PageDots = PageDots;\r\n\r\n// -------------------------- Flickity -------------------------- //\r\n\r\nutils.extend( Flickity.defaults, {\r\n  pageDots: true\r\n});\r\n\r\nFlickity.createMethods.push('_createPageDots');\r\n\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createPageDots = function() {\r\n  if ( !this.options.pageDots ) {\r\n    return;\r\n  }\r\n  this.pageDots = new PageDots( this );\r\n  // events\r\n  this.on( 'activate', this.activatePageDots );\r\n  this.on( 'select', this.updateSelectedPageDots );\r\n  this.on( 'cellChange', this.updatePageDots );\r\n  this.on( 'resize', this.updatePageDots );\r\n  this.on( 'deactivate', this.deactivatePageDots );\r\n};\r\n\r\nproto.activatePageDots = function() {\r\n  this.pageDots.activate();\r\n};\r\n\r\nproto.updateSelectedPageDots = function() {\r\n  this.pageDots.updateSelected();\r\n};\r\n\r\nproto.updatePageDots = function() {\r\n  this.pageDots.setDots();\r\n};\r\n\r\nproto.deactivatePageDots = function() {\r\n  this.pageDots.deactivate();\r\n};\r\n\r\n// -----  ----- //\r\n\r\nFlickity.PageDots = PageDots;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n// player & autoPlay\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/player',[\r\n      'ev-emitter/ev-emitter',\r\n      'fizzy-ui-utils/utils',\r\n      './flickity'\r\n    ], function( EvEmitter, utils, Flickity ) {\r\n      return factory( EvEmitter, utils, Flickity );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      require('ev-emitter'),\r\n      require('fizzy-ui-utils'),\r\n      require('./flickity')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window.EvEmitter,\r\n      window.fizzyUIUtils,\r\n      window.Flickity\r\n    );\r\n  }\r\n\r\n}( window, function factory( EvEmitter, utils, Flickity ) {\r\n\r\n\r\n\r\n// -------------------------- Page Visibility -------------------------- //\r\n// https://developer.mozilla.org/en-US/docs/Web/Guide/User_experience/Using_the_Page_Visibility_API\r\n\r\nvar hiddenProperty, visibilityEvent;\r\nif ( 'hidden' in document ) {\r\n  hiddenProperty = 'hidden';\r\n  visibilityEvent = 'visibilitychange';\r\n} else if ( 'webkitHidden' in document ) {\r\n  hiddenProperty = 'webkitHidden';\r\n  visibilityEvent = 'webkitvisibilitychange';\r\n}\r\n\r\n// -------------------------- Player -------------------------- //\r\n\r\nfunction Player( parent ) {\r\n  this.parent = parent;\r\n  this.state = 'stopped';\r\n  // visibility change event handler\r\n  if ( visibilityEvent ) {\r\n    this.onVisibilityChange = function() {\r\n      this.visibilityChange();\r\n    }.bind( this );\r\n    this.onVisibilityPlay = function() {\r\n      this.visibilityPlay();\r\n    }.bind( this );\r\n  }\r\n}\r\n\r\nPlayer.prototype = Object.create( EvEmitter.prototype );\r\n\r\n// start play\r\nPlayer.prototype.play = function() {\r\n  if ( this.state == 'playing' ) {\r\n    return;\r\n  }\r\n  // do not play if page is hidden, start playing when page is visible\r\n  var isPageHidden = document[ hiddenProperty ];\r\n  if ( visibilityEvent && isPageHidden ) {\r\n    document.addEventListener( visibilityEvent, this.onVisibilityPlay );\r\n    return;\r\n  }\r\n\r\n  this.state = 'playing';\r\n  // listen to visibility change\r\n  if ( visibilityEvent ) {\r\n    document.addEventListener( visibilityEvent, this.onVisibilityChange );\r\n  }\r\n  // start ticking\r\n  this.tick();\r\n};\r\n\r\nPlayer.prototype.tick = function() {\r\n  // do not tick if not playing\r\n  if ( this.state != 'playing' ) {\r\n    return;\r\n  }\r\n\r\n  var time = this.parent.options.autoPlay;\r\n  // default to 3 seconds\r\n  time = typeof time == 'number' ? time : 3000;\r\n  var _this = this;\r\n  // HACK: reset ticks if stopped and started within interval\r\n  this.clear();\r\n  this.timeout = setTimeout( function() {\r\n    _this.parent.next( true );\r\n    _this.tick();\r\n  }, time );\r\n};\r\n\r\nPlayer.prototype.stop = function() {\r\n  this.state = 'stopped';\r\n  this.clear();\r\n  // remove visibility change event\r\n  if ( visibilityEvent ) {\r\n    document.removeEventListener( visibilityEvent, this.onVisibilityChange );\r\n  }\r\n};\r\n\r\nPlayer.prototype.clear = function() {\r\n  clearTimeout( this.timeout );\r\n};\r\n\r\nPlayer.prototype.pause = function() {\r\n  if ( this.state == 'playing' ) {\r\n    this.state = 'paused';\r\n    this.clear();\r\n  }\r\n};\r\n\r\nPlayer.prototype.unpause = function() {\r\n  // re-start play if paused\r\n  if ( this.state == 'paused' ) {\r\n    this.play();\r\n  }\r\n};\r\n\r\n// pause if page visibility is hidden, unpause if visible\r\nPlayer.prototype.visibilityChange = function() {\r\n  var isPageHidden = document[ hiddenProperty ];\r\n  this[ isPageHidden ? 'pause' : 'unpause' ]();\r\n};\r\n\r\nPlayer.prototype.visibilityPlay = function() {\r\n  this.play();\r\n  document.removeEventListener( visibilityEvent, this.onVisibilityPlay );\r\n};\r\n\r\n// -------------------------- Flickity -------------------------- //\r\n\r\nutils.extend( Flickity.defaults, {\r\n  pauseAutoPlayOnHover: true\r\n});\r\n\r\nFlickity.createMethods.push('_createPlayer');\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createPlayer = function() {\r\n  this.player = new Player( this );\r\n\r\n  this.on( 'activate', this.activatePlayer );\r\n  this.on( 'uiChange', this.stopPlayer );\r\n  this.on( 'pointerDown', this.stopPlayer );\r\n  this.on( 'deactivate', this.deactivatePlayer );\r\n};\r\n\r\nproto.activatePlayer = function() {\r\n  if ( !this.options.autoPlay ) {\r\n    return;\r\n  }\r\n  this.player.play();\r\n  this.element.addEventListener( 'mouseenter', this );\r\n};\r\n\r\n// Player API, don't hate the ... thanks I know where the door is\r\n\r\nproto.playPlayer = function() {\r\n  this.player.play();\r\n};\r\n\r\nproto.stopPlayer = function() {\r\n  this.player.stop();\r\n};\r\n\r\nproto.pausePlayer = function() {\r\n  this.player.pause();\r\n};\r\n\r\nproto.unpausePlayer = function() {\r\n  this.player.unpause();\r\n};\r\n\r\nproto.deactivatePlayer = function() {\r\n  this.player.stop();\r\n  this.element.removeEventListener( 'mouseenter', this );\r\n};\r\n\r\n// ----- mouseenter/leave ----- //\r\n\r\n// pause auto-play on hover\r\nproto.onmouseenter = function() {\r\n  if ( !this.options.pauseAutoPlayOnHover ) {\r\n    return;\r\n  }\r\n  this.player.pause();\r\n  this.element.addEventListener( 'mouseleave', this );\r\n};\r\n\r\n// resume auto-play on hover off\r\nproto.onmouseleave = function() {\r\n  this.player.unpause();\r\n  this.element.removeEventListener( 'mouseleave', this );\r\n};\r\n\r\n// -----  ----- //\r\n\r\nFlickity.Player = Player;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n// add, remove cell\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/add-remove-cell',[\r\n      './flickity',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, utils ) {\r\n      return factory( window, Flickity, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window,\r\n      window.Flickity,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, utils ) {\r\n\r\n\r\n\r\n// append cells to a document fragment\r\nfunction getCellsFragment( cells ) {\r\n  var fragment = document.createDocumentFragment();\r\n  cells.forEach( function( cell ) {\r\n    fragment.appendChild( cell.element );\r\n  });\r\n  return fragment;\r\n}\r\n\r\n// -------------------------- add/remove cell prototype -------------------------- //\r\n\r\nvar proto = Flickity.prototype;\r\n\r\n/**\r\n * Insert, prepend, or append cells\r\n * @param {Element, Array, NodeList} elems\r\n * @param {Integer} index\r\n */\r\nproto.insert = function( elems, index ) {\r\n  var cells = this._makeCells( elems );\r\n  if ( !cells || !cells.length ) {\r\n    return;\r\n  }\r\n  var len = this.cells.length;\r\n  // default to append\r\n  index = index === undefined ? len : index;\r\n  // add cells with document fragment\r\n  var fragment = getCellsFragment( cells );\r\n  // append to slider\r\n  var isAppend = index == len;\r\n  if ( isAppend ) {\r\n    this.slider.appendChild( fragment );\r\n  } else {\r\n    var insertCellElement = this.cells[ index ].element;\r\n    this.slider.insertBefore( fragment, insertCellElement );\r\n  }\r\n  // add to this.cells\r\n  if ( index === 0 ) {\r\n    // prepend, add to start\r\n    this.cells = cells.concat( this.cells );\r\n  } else if ( isAppend ) {\r\n    // append, add to end\r\n    this.cells = this.cells.concat( cells );\r\n  } else {\r\n    // insert in this.cells\r\n    var endCells = this.cells.splice( index, len - index );\r\n    this.cells = this.cells.concat( cells ).concat( endCells );\r\n  }\r\n\r\n  this._sizeCells( cells );\r\n  this.cellChange( index, true );\r\n};\r\n\r\nproto.append = function( elems ) {\r\n  this.insert( elems, this.cells.length );\r\n};\r\n\r\nproto.prepend = function( elems ) {\r\n  this.insert( elems, 0 );\r\n};\r\n\r\n/**\r\n * Remove cells\r\n * @param {Element, Array, NodeList} elems\r\n */\r\nproto.remove = function( elems ) {\r\n  var cells = this.getCells( elems );\r\n  if ( !cells || !cells.length ) {\r\n    return;\r\n  }\r\n\r\n  var minCellIndex = this.cells.length - 1;\r\n  // remove cells from collection & DOM\r\n  cells.forEach( function( cell ) {\r\n    cell.remove();\r\n    var index = this.cells.indexOf( cell );\r\n    minCellIndex = Math.min( index, minCellIndex );\r\n    utils.removeFrom( this.cells, cell );\r\n  }, this );\r\n\r\n  this.cellChange( minCellIndex, true );\r\n};\r\n\r\n/**\r\n * logic to be run after a cell's size changes\r\n * @param {Element} elem - cell's element\r\n */\r\nproto.cellSizeChange = function( elem ) {\r\n  var cell = this.getCell( elem );\r\n  if ( !cell ) {\r\n    return;\r\n  }\r\n  cell.getSize();\r\n\r\n  var index = this.cells.indexOf( cell );\r\n  this.cellChange( index );\r\n};\r\n\r\n/**\r\n * logic any time a cell is changed: added, removed, or size changed\r\n * @param {Integer} changedCellIndex - index of the changed cell, optional\r\n */\r\nproto.cellChange = function( changedCellIndex, isPositioningSlider ) {\r\n  var prevSelectedElem = this.selectedElement;\r\n  this._positionCells( changedCellIndex );\r\n  this._getWrapShiftCells();\r\n  this.setGallerySize();\r\n  // update selectedIndex\r\n  // try to maintain position & select previous selected element\r\n  var cell = this.getCell( prevSelectedElem );\r\n  if ( cell ) {\r\n    this.selectedIndex = this.getCellSlideIndex( cell );\r\n  }\r\n  this.selectedIndex = Math.min( this.slides.length - 1, this.selectedIndex );\r\n\r\n  this.emitEvent( 'cellChange', [ changedCellIndex ] );\r\n  // position slider\r\n  this.select( this.selectedIndex );\r\n  // do not position slider after lazy load\r\n  if ( isPositioningSlider ) {\r\n    this.positionSliderAtSelected();\r\n  }\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n// lazyload\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/lazyload',[\r\n      './flickity',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, utils ) {\r\n      return factory( window, Flickity, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window,\r\n      window.Flickity,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, utils ) {\r\n'use strict';\r\n\r\nFlickity.createMethods.push('_createLazyload');\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createLazyload = function() {\r\n  this.on( 'select', this.lazyLoad );\r\n};\r\n\r\nproto.lazyLoad = function() {\r\n  var lazyLoad = this.options.lazyLoad;\r\n  if ( !lazyLoad ) {\r\n    return;\r\n  }\r\n  // get adjacent cells, use lazyLoad option for adjacent count\r\n  var adjCount = typeof lazyLoad == 'number' ? lazyLoad : 0;\r\n  var cellElems = this.getAdjacentCellElements( adjCount );\r\n  // get lazy images in those cells\r\n  var lazyImages = [];\r\n  cellElems.forEach( function( cellElem ) {\r\n    var lazyCellImages = getCellLazyImages( cellElem );\r\n    lazyImages = lazyImages.concat( lazyCellImages );\r\n  });\r\n  // load lazy images\r\n  lazyImages.forEach( function( img ) {\r\n    new LazyLoader( img, this );\r\n  }, this );\r\n};\r\n\r\nfunction getCellLazyImages( cellElem ) {\r\n  // check if cell element is lazy image\r\n  if ( cellElem.nodeName == 'IMG' ) {\r\n    var lazyloadAttr = cellElem.getAttribute('data-flickity-lazyload');\r\n    var srcAttr = cellElem.getAttribute('data-flickity-lazyload-src');\r\n    var srcsetAttr = cellElem.getAttribute('data-flickity-lazyload-srcset');\r\n    if ( lazyloadAttr || srcAttr || srcsetAttr ) {\r\n      return [ cellElem ];\r\n    }\r\n  }\r\n  // select lazy images in cell\r\n  var lazySelector = 'img[data-flickity-lazyload], ' +\r\n    'img[data-flickity-lazyload-src], img[data-flickity-lazyload-srcset]';\r\n  var imgs = cellElem.querySelectorAll( lazySelector );\r\n  return utils.makeArray( imgs );\r\n}\r\n\r\n// -------------------------- LazyLoader -------------------------- //\r\n\r\n/**\r\n * class to handle loading images\r\n */\r\nfunction LazyLoader( img, flickity ) {\r\n  this.img = img;\r\n  this.flickity = flickity;\r\n  this.load();\r\n}\r\n\r\nLazyLoader.prototype.handleEvent = utils.handleEvent;\r\n\r\nLazyLoader.prototype.load = function() {\r\n  this.img.addEventListener( 'load', this );\r\n  this.img.addEventListener( 'error', this );\r\n  // get src & srcset\r\n  var src = this.img.getAttribute('data-flickity-lazyload') ||\r\n    this.img.getAttribute('data-flickity-lazyload-src');\r\n  var srcset = this.img.getAttribute('data-flickity-lazyload-srcset');\r\n  // set src & serset\r\n  this.img.src = src;\r\n  if ( srcset ) {\r\n    this.img.setAttribute( 'srcset', srcset );\r\n  }\r\n  // remove attr\r\n  this.img.removeAttribute('data-flickity-lazyload');\r\n  this.img.removeAttribute('data-flickity-lazyload-src');\r\n  this.img.removeAttribute('data-flickity-lazyload-srcset');\r\n};\r\n\r\nLazyLoader.prototype.onload = function( event ) {\r\n  this.complete( event, 'flickity-lazyloaded' );\r\n};\r\n\r\nLazyLoader.prototype.onerror = function( event ) {\r\n  this.complete( event, 'flickity-lazyerror' );\r\n};\r\n\r\nLazyLoader.prototype.complete = function( event, className ) {\r\n  // unbind events\r\n  this.img.removeEventListener( 'load', this );\r\n  this.img.removeEventListener( 'error', this );\r\n\r\n  var cell = this.flickity.getParentCell( this.img );\r\n  var cellElem = cell && cell.element;\r\n  this.flickity.cellSizeChange( cellElem );\r\n\r\n  this.img.classList.add( className );\r\n  this.flickity.dispatchEvent( 'lazyLoad', event, cellElem );\r\n};\r\n\r\n// -----  ----- //\r\n\r\nFlickity.LazyLoader = LazyLoader;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n/*!\r\n * Flickity v2.1.0\r\n * Touch, responsive, flickable carousels\r\n *\r\n * Licensed GPLv3 for open source use\r\n * or Flickity Commercial License for commercial use\r\n *\r\n * https://flickity.metafizzy.co\r\n * Copyright 2015-2018 Metafizzy\r\n */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/index',[\r\n      './flickity',\r\n      './drag',\r\n      './prev-next-button',\r\n      './page-dots',\r\n      './player',\r\n      './add-remove-cell',\r\n      './lazyload'\r\n    ], factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      require('./flickity'),\r\n      require('./drag'),\r\n      require('./prev-next-button'),\r\n      require('./page-dots'),\r\n      require('./player'),\r\n      require('./add-remove-cell'),\r\n      require('./lazyload')\r\n    );\r\n  }\r\n\r\n})( window, function factory( Flickity ) {\r\n  /*jshint strict: false*/\r\n  return Flickity;\r\n});\r\n\r\n/*!\r\n * Flickity asNavFor v2.0.1\r\n * enable asNavFor for Flickity\r\n */\r\n\r\n/*jshint browser: true, undef: true, unused: true, strict: true*/\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /*globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity-as-nav-for/as-nav-for',[\r\n      'flickity/js/index',\r\n      'fizzy-ui-utils/utils'\r\n    ], factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      require('flickity'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = factory(\r\n      window.Flickity,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( Flickity, utils ) {\r\n\r\n\r\n\r\n// -------------------------- asNavFor prototype -------------------------- //\r\n\r\n// Flickity.defaults.asNavFor = null;\r\n\r\nFlickity.createMethods.push('_createAsNavFor');\r\n\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createAsNavFor = function() {\r\n  this.on( 'activate', this.activateAsNavFor );\r\n  this.on( 'deactivate', this.deactivateAsNavFor );\r\n  this.on( 'destroy', this.destroyAsNavFor );\r\n\r\n  var asNavForOption = this.options.asNavFor;\r\n  if ( !asNavForOption ) {\r\n    return;\r\n  }\r\n  // HACK do async, give time for other flickity to be initalized\r\n  var _this = this;\r\n  setTimeout( function initNavCompanion() {\r\n    _this.setNavCompanion( asNavForOption );\r\n  });\r\n};\r\n\r\nproto.setNavCompanion = function( elem ) {\r\n  elem = utils.getQueryElement( elem );\r\n  var companion = Flickity.data( elem );\r\n  // stop if no companion or companion is self\r\n  if ( !companion || companion == this ) {\r\n    return;\r\n  }\r\n\r\n  this.navCompanion = companion;\r\n  // companion select\r\n  var _this = this;\r\n  this.onNavCompanionSelect = function() {\r\n    _this.navCompanionSelect();\r\n  };\r\n  companion.on( 'select', this.onNavCompanionSelect );\r\n  // click\r\n  this.on( 'staticClick', this.onNavStaticClick );\r\n\r\n  this.navCompanionSelect( true );\r\n};\r\n\r\nproto.navCompanionSelect = function( isInstant ) {\r\n  if ( !this.navCompanion ) {\r\n    return;\r\n  }\r\n  // select slide that matches first cell of slide\r\n  var selectedCell = this.navCompanion.selectedCells[0];\r\n  var firstIndex = this.navCompanion.cells.indexOf( selectedCell );\r\n  var lastIndex = firstIndex + this.navCompanion.selectedCells.length - 1;\r\n  var selectIndex = Math.floor( lerp( firstIndex, lastIndex,\r\n    this.navCompanion.cellAlign ) );\r\n  this.selectCell( selectIndex, false, isInstant );\r\n  // set nav selected class\r\n  this.removeNavSelectedElements();\r\n  // stop if companion has more cells than this one\r\n  if ( selectIndex >= this.cells.length ) {\r\n    return;\r\n  }\r\n\r\n  var selectedCells = this.cells.slice( firstIndex, lastIndex + 1 );\r\n  this.navSelectedElements = selectedCells.map( function( cell ) {\r\n    return cell.element;\r\n  });\r\n  this.changeNavSelectedClass('add');\r\n};\r\n\r\nfunction lerp( a, b, t ) {\r\n  return ( b - a ) * t + a;\r\n}\r\n\r\nproto.changeNavSelectedClass = function( method ) {\r\n  this.navSelectedElements.forEach( function( navElem ) {\r\n    navElem.classList[ method ]('is-nav-selected');\r\n  });\r\n};\r\n\r\nproto.activateAsNavFor = function() {\r\n  this.navCompanionSelect( true );\r\n};\r\n\r\nproto.removeNavSelectedElements = function() {\r\n  if ( !this.navSelectedElements ) {\r\n    return;\r\n  }\r\n  this.changeNavSelectedClass('remove');\r\n  delete this.navSelectedElements;\r\n};\r\n\r\nproto.onNavStaticClick = function( event, pointer, cellElement, cellIndex ) {\r\n  if ( typeof cellIndex == 'number' ) {\r\n    this.navCompanion.selectCell( cellIndex );\r\n  }\r\n};\r\n\r\nproto.deactivateAsNavFor = function() {\r\n  this.removeNavSelectedElements();\r\n};\r\n\r\nproto.destroyAsNavFor = function() {\r\n  if ( !this.navCompanion ) {\r\n    return;\r\n  }\r\n  this.navCompanion.off( 'select', this.onNavCompanionSelect );\r\n  this.off( 'staticClick', this.onNavStaticClick );\r\n  delete this.navCompanion;\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n/*!\r\n * imagesLoaded v4.1.4\r\n * JavaScript is all like \"You images are done yet or what?\"\r\n * MIT License\r\n */\r\n\r\n( function( window, factory ) { 'use strict';\r\n  // universal module definition\r\n\r\n  /*global define: false, module: false, require: false */\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'imagesloaded/imagesloaded',[\r\n      'ev-emitter/ev-emitter'\r\n    ], function( EvEmitter ) {\r\n      return factory( window, EvEmitter );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('ev-emitter')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.imagesLoaded = factory(\r\n      window,\r\n      window.EvEmitter\r\n    );\r\n  }\r\n\r\n})( typeof window !== 'undefined' ? window : this,\r\n\r\n// --------------------------  factory -------------------------- //\r\n\r\nfunction factory( window, EvEmitter ) {\r\n\r\n\r\n\r\nvar $ = window.jQuery;\r\nvar console = window.console;\r\n\r\n// -------------------------- helpers -------------------------- //\r\n\r\n// extend objects\r\nfunction extend( a, b ) {\r\n  for ( var prop in b ) {\r\n    a[ prop ] = b[ prop ];\r\n  }\r\n  return a;\r\n}\r\n\r\nvar arraySlice = Array.prototype.slice;\r\n\r\n// turn element or nodeList into an array\r\nfunction makeArray( obj ) {\r\n  if ( Array.isArray( obj ) ) {\r\n    // use object if already an array\r\n    return obj;\r\n  }\r\n\r\n  var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\r\n  if ( isArrayLike ) {\r\n    // convert nodeList to array\r\n    return arraySlice.call( obj );\r\n  }\r\n\r\n  // array of single index\r\n  return [ obj ];\r\n}\r\n\r\n// -------------------------- imagesLoaded -------------------------- //\r\n\r\n/**\r\n * @param {Array, Element, NodeList, String} elem\r\n * @param {Object or Function} options - if function, use as callback\r\n * @param {Function} onAlways - callback function\r\n */\r\nfunction ImagesLoaded( elem, options, onAlways ) {\r\n  // coerce ImagesLoaded() without new, to be new ImagesLoaded()\r\n  if ( !( this instanceof ImagesLoaded ) ) {\r\n    return new ImagesLoaded( elem, options, onAlways );\r\n  }\r\n  // use elem as selector string\r\n  var queryElem = elem;\r\n  if ( typeof elem == 'string' ) {\r\n    queryElem = document.querySelectorAll( elem );\r\n  }\r\n  // bail if bad element\r\n  if ( !queryElem ) {\r\n    console.error( 'Bad element for imagesLoaded ' + ( queryElem || elem ) );\r\n    return;\r\n  }\r\n\r\n  this.elements = makeArray( queryElem );\r\n  this.options = extend( {}, this.options );\r\n  // shift arguments if no options set\r\n  if ( typeof options == 'function' ) {\r\n    onAlways = options;\r\n  } else {\r\n    extend( this.options, options );\r\n  }\r\n\r\n  if ( onAlways ) {\r\n    this.on( 'always', onAlways );\r\n  }\r\n\r\n  this.getImages();\r\n\r\n  if ( $ ) {\r\n    // add jQuery Deferred object\r\n    this.jqDeferred = new $.Deferred();\r\n  }\r\n\r\n  // HACK check async to allow time to bind listeners\r\n  setTimeout( this.check.bind( this ) );\r\n}\r\n\r\nImagesLoaded.prototype = Object.create( EvEmitter.prototype );\r\n\r\nImagesLoaded.prototype.options = {};\r\n\r\nImagesLoaded.prototype.getImages = function() {\r\n  this.images = [];\r\n\r\n  // filter & find items if we have an item selector\r\n  this.elements.forEach( this.addElementImages, this );\r\n};\r\n\r\n/**\r\n * @param {Node} element\r\n */\r\nImagesLoaded.prototype.addElementImages = function( elem ) {\r\n  // filter siblings\r\n  if ( elem.nodeName == 'IMG' ) {\r\n    this.addImage( elem );\r\n  }\r\n  // get background image on element\r\n  if ( this.options.background === true ) {\r\n    this.addElementBackgroundImages( elem );\r\n  }\r\n\r\n  // find children\r\n  // no non-element nodes, #143\r\n  var nodeType = elem.nodeType;\r\n  if ( !nodeType || !elementNodeTypes[ nodeType ] ) {\r\n    return;\r\n  }\r\n  var childImgs = elem.querySelectorAll('img');\r\n  // concat childElems to filterFound array\r\n  for ( var i=0; i < childImgs.length; i++ ) {\r\n    var img = childImgs[i];\r\n    this.addImage( img );\r\n  }\r\n\r\n  // get child background images\r\n  if ( typeof this.options.background == 'string' ) {\r\n    var children = elem.querySelectorAll( this.options.background );\r\n    for ( i=0; i < children.length; i++ ) {\r\n      var child = children[i];\r\n      this.addElementBackgroundImages( child );\r\n    }\r\n  }\r\n};\r\n\r\nvar elementNodeTypes = {\r\n  1: true,\r\n  9: true,\r\n  11: true\r\n};\r\n\r\nImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\r\n  var style = getComputedStyle( elem );\r\n  if ( !style ) {\r\n    // Firefox returns null if in a hidden iframe https://bugzil.la/548397\r\n    return;\r\n  }\r\n  // get url inside url(\"...\")\r\n  var reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\r\n  var matches = reURL.exec( style.backgroundImage );\r\n  while ( matches !== null ) {\r\n    var url = matches && matches[2];\r\n    if ( url ) {\r\n      this.addBackground( url, elem );\r\n    }\r\n    matches = reURL.exec( style.backgroundImage );\r\n  }\r\n};\r\n\r\n/**\r\n * @param {Image} img\r\n */\r\nImagesLoaded.prototype.addImage = function( img ) {\r\n  var loadingImage = new LoadingImage( img );\r\n  this.images.push( loadingImage );\r\n};\r\n\r\nImagesLoaded.prototype.addBackground = function( url, elem ) {\r\n  var background = new Background( url, elem );\r\n  this.images.push( background );\r\n};\r\n\r\nImagesLoaded.prototype.check = function() {\r\n  var _this = this;\r\n  this.progressedCount = 0;\r\n  this.hasAnyBroken = false;\r\n  // complete if no images\r\n  if ( !this.images.length ) {\r\n    this.complete();\r\n    return;\r\n  }\r\n\r\n  function onProgress( image, elem, message ) {\r\n    // HACK - Chrome triggers event before object properties have changed. #83\r\n    setTimeout( function() {\r\n      _this.progress( image, elem, message );\r\n    });\r\n  }\r\n\r\n  this.images.forEach( function( loadingImage ) {\r\n    loadingImage.once( 'progress', onProgress );\r\n    loadingImage.check();\r\n  });\r\n};\r\n\r\nImagesLoaded.prototype.progress = function( image, elem, message ) {\r\n  this.progressedCount++;\r\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\r\n  // progress event\r\n  this.emitEvent( 'progress', [ this, image, elem ] );\r\n  if ( this.jqDeferred && this.jqDeferred.notify ) {\r\n    this.jqDeferred.notify( this, image );\r\n  }\r\n  // check if completed\r\n  if ( this.progressedCount == this.images.length ) {\r\n    this.complete();\r\n  }\r\n\r\n  if ( this.options.debug && console ) {\r\n    console.log( 'progress: ' + message, image, elem );\r\n  }\r\n};\r\n\r\nImagesLoaded.prototype.complete = function() {\r\n  var eventName = this.hasAnyBroken ? 'fail' : 'done';\r\n  this.isComplete = true;\r\n  this.emitEvent( eventName, [ this ] );\r\n  this.emitEvent( 'always', [ this ] );\r\n  if ( this.jqDeferred ) {\r\n    var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\r\n    this.jqDeferred[ jqMethod ]( this );\r\n  }\r\n};\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nfunction LoadingImage( img ) {\r\n  this.img = img;\r\n}\r\n\r\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\r\n\r\nLoadingImage.prototype.check = function() {\r\n  // If complete is true and browser supports natural sizes,\r\n  // try to check for image status manually.\r\n  var isComplete = this.getIsImageComplete();\r\n  if ( isComplete ) {\r\n    // report based on naturalWidth\r\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\r\n    return;\r\n  }\r\n\r\n  // If none of the checks above matched, simulate loading on detached element.\r\n  this.proxyImage = new Image();\r\n  this.proxyImage.addEventListener( 'load', this );\r\n  this.proxyImage.addEventListener( 'error', this );\r\n  // bind to image as well for Firefox. #191\r\n  this.img.addEventListener( 'load', this );\r\n  this.img.addEventListener( 'error', this );\r\n  this.proxyImage.src = this.img.src;\r\n};\r\n\r\nLoadingImage.prototype.getIsImageComplete = function() {\r\n  // check for non-zero, non-undefined naturalWidth\r\n  // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\r\n  return this.img.complete && this.img.naturalWidth;\r\n};\r\n\r\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\r\n  this.isLoaded = isLoaded;\r\n  this.emitEvent( 'progress', [ this, this.img, message ] );\r\n};\r\n\r\n// ----- events ----- //\r\n\r\n// trigger specified handler for event type\r\nLoadingImage.prototype.handleEvent = function( event ) {\r\n  var method = 'on' + event.type;\r\n  if ( this[ method ] ) {\r\n    this[ method ]( event );\r\n  }\r\n};\r\n\r\nLoadingImage.prototype.onload = function() {\r\n  this.confirm( true, 'onload' );\r\n  this.unbindEvents();\r\n};\r\n\r\nLoadingImage.prototype.onerror = function() {\r\n  this.confirm( false, 'onerror' );\r\n  this.unbindEvents();\r\n};\r\n\r\nLoadingImage.prototype.unbindEvents = function() {\r\n  this.proxyImage.removeEventListener( 'load', this );\r\n  this.proxyImage.removeEventListener( 'error', this );\r\n  this.img.removeEventListener( 'load', this );\r\n  this.img.removeEventListener( 'error', this );\r\n};\r\n\r\n// -------------------------- Background -------------------------- //\r\n\r\nfunction Background( url, element ) {\r\n  this.url = url;\r\n  this.element = element;\r\n  this.img = new Image();\r\n}\r\n\r\n// inherit LoadingImage prototype\r\nBackground.prototype = Object.create( LoadingImage.prototype );\r\n\r\nBackground.prototype.check = function() {\r\n  this.img.addEventListener( 'load', this );\r\n  this.img.addEventListener( 'error', this );\r\n  this.img.src = this.url;\r\n  // check if image is already complete\r\n  var isComplete = this.getIsImageComplete();\r\n  if ( isComplete ) {\r\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\r\n    this.unbindEvents();\r\n  }\r\n};\r\n\r\nBackground.prototype.unbindEvents = function() {\r\n  this.img.removeEventListener( 'load', this );\r\n  this.img.removeEventListener( 'error', this );\r\n};\r\n\r\nBackground.prototype.confirm = function( isLoaded, message ) {\r\n  this.isLoaded = isLoaded;\r\n  this.emitEvent( 'progress', [ this, this.element, message ] );\r\n};\r\n\r\n// -------------------------- jQuery -------------------------- //\r\n\r\nImagesLoaded.makeJQueryPlugin = function( jQuery ) {\r\n  jQuery = jQuery || window.jQuery;\r\n  if ( !jQuery ) {\r\n    return;\r\n  }\r\n  // set local variable\r\n  $ = jQuery;\r\n  // $().imagesLoaded()\r\n  $.fn.imagesLoaded = function( options, callback ) {\r\n    var instance = new ImagesLoaded( this, options, callback );\r\n    return instance.jqDeferred.promise( $(this) );\r\n  };\r\n};\r\n// try making plugin\r\nImagesLoaded.makeJQueryPlugin();\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nreturn ImagesLoaded;\r\n\r\n});\r\n\r\n/*!\r\n * Flickity imagesLoaded v2.0.0\r\n * enables imagesLoaded option for Flickity\r\n */\r\n\r\n/*jshint browser: true, strict: true, undef: true, unused: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /*globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( [\r\n      'flickity/js/index',\r\n      'imagesloaded/imagesloaded'\r\n    ], function( Flickity, imagesLoaded ) {\r\n      return factory( window, Flickity, imagesLoaded );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('flickity'),\r\n      require('imagesloaded')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = factory(\r\n      window,\r\n      window.Flickity,\r\n      window.imagesLoaded\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, imagesLoaded ) {\r\n'use strict';\r\n\r\nFlickity.createMethods.push('_createImagesLoaded');\r\n\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createImagesLoaded = function() {\r\n  this.on( 'activate', this.imagesLoaded );\r\n};\r\n\r\nproto.imagesLoaded = function() {\r\n  if ( !this.options.imagesLoaded ) {\r\n    return;\r\n  }\r\n  var _this = this;\r\n  function onImagesLoadedProgress( instance, image ) {\r\n    var cell = _this.getParentCell( image.img );\r\n    _this.cellSizeChange( cell && cell.element );\r\n    if ( !_this.options.freeScroll ) {\r\n      _this.positionSliderAtSelected();\r\n    }\r\n  }\r\n  imagesLoaded( this.slider ).on( 'progress', onImagesLoadedProgress );\r\n};\r\n\r\nreturn Flickity;\r\n\r\n}));","/*\r\n * jQuery Form Styler v2.0.2\r\n * https://github.com/Dimox/jQueryFormStyler\r\n *\r\n * Copyright 2012-2017 Dimox (http://dimox.name/)\r\n * Released under the MIT license.\r\n *\r\n * Date: 2017.10.22\r\n *\r\n */\r\n\r\n;(function(factory) {\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\t// AMD\r\n\t\tdefine(['jquery'], factory);\r\n\t} else if (typeof exports === 'object') {\r\n\t\t// CommonJS\r\n\t\tmodule.exports = factory($ || require('jquery'));\r\n\t} else {\r\n\t\tfactory(jQuery);\r\n\t}\r\n}(function($) {\r\n\r\n\t'use strict';\r\n\r\n\tvar pluginName = 'styler',\r\n\t\t\tdefaults = {\r\n\t\t\t\tidSuffix: '-styler',\r\n\t\t\t\tfilePlaceholder: 'Файл не выбран',\r\n\t\t\t\tfileBrowse: 'Обзор...',\r\n\t\t\t\tfileNumber: 'Выбрано файлов: %s',\r\n\t\t\t\tselectPlaceholder: 'Выберите...',\r\n\t\t\t\tselectSearch: false,\r\n\t\t\t\tselectSearchLimit: 10,\r\n\t\t\t\tselectSearchNotFound: 'Совпадений не найдено',\r\n\t\t\t\tselectSearchPlaceholder: 'Поиск...',\r\n\t\t\t\tselectVisibleOptions: 0,\r\n\t\t\t\tselectSmartPositioning: true,\r\n\t\t\t\tlocale: 'ru',\r\n\t\t\t\tlocales: {\r\n\t\t\t\t\t'en': {\r\n\t\t\t\t\t\tfilePlaceholder: 'No file selected',\r\n\t\t\t\t\t\tfileBrowse: 'Browse...',\r\n\t\t\t\t\t\tfileNumber: 'Selected files: %s',\r\n\t\t\t\t\t\tselectPlaceholder: 'Select...',\r\n\t\t\t\t\t\tselectSearchNotFound: 'No matches found',\r\n\t\t\t\t\t\tselectSearchPlaceholder: 'Search...'\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tonSelectOpened: function() {},\r\n\t\t\t\tonSelectClosed: function() {},\r\n\t\t\t\tonFormStyled: function() {}\r\n\t\t\t};\r\n\r\n\tfunction Plugin(element, options) {\r\n\t\tthis.element = element;\r\n\t\tthis.options = $.extend({}, defaults, options);\r\n\t\tvar locale = this.options.locale;\r\n\t\tif (this.options.locales[locale] !== undefined) {\r\n\t\t\t$.extend(this.options, this.options.locales[locale]);\r\n\t\t}\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tPlugin.prototype = {\r\n\r\n\t\t// инициализация\r\n\t\tinit: function() {\r\n\r\n\t\t\tvar el = $(this.element);\r\n\t\t\tvar opt = this.options;\r\n\r\n\t\t\tvar iOS = (navigator.userAgent.match(/(iPad|iPhone|iPod)/i) && !navigator.userAgent.match(/(Windows\\sPhone)/i)) ? true : false;\r\n\t\t\tvar Android = (navigator.userAgent.match(/Android/i) && !navigator.userAgent.match(/(Windows\\sPhone)/i)) ? true : false;\r\n\r\n\t\t\tfunction Attributes() {\r\n\t\t\t\tif (el.attr('id') !== undefined && el.attr('id') !== '') {\r\n\t\t\t\t\tthis.id = el.attr('id') + opt.idSuffix;\r\n\t\t\t\t}\r\n\t\t\t\tthis.title = el.attr('title');\r\n\t\t\t\tthis.classes = el.attr('class');\r\n\t\t\t\tthis.data = el.data();\r\n\t\t\t}\r\n\r\n\t\t\t// checkbox\r\n\t\t\tif (el.is(':checkbox')) {\r\n\r\n\t\t\t\tvar checkboxOutput = function() {\r\n\r\n\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\tvar checkbox = $('<div class=\"jq-checkbox\"><div class=\"jq-checkbox__div\"></div></div>')\r\n\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t;\r\n\r\n\t\t\t\t\tel.after(checkbox).prependTo(checkbox);\r\n\t\t\t\t\tif (el.is(':checked')) checkbox.addClass('checked');\r\n\t\t\t\t\tif (el.is(':disabled')) checkbox.addClass('disabled');\r\n\r\n\t\t\t\t\t// клик на псевдочекбокс\r\n\t\t\t\t\tcheckbox.click(function(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tel.triggerHandler('click');\r\n\t\t\t\t\t\tif (!checkbox.is('.disabled')) {\r\n\t\t\t\t\t\t\tif (el.is(':checked')) {\r\n\t\t\t\t\t\t\t\tel.prop('checked', false);\r\n\t\t\t\t\t\t\t\tcheckbox.removeClass('checked');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tel.prop('checked', true);\r\n\t\t\t\t\t\t\t\tcheckbox.addClass('checked');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tel.focus().change();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// клик на label\r\n\t\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').on('click.styler', function(e) {\r\n\t\t\t\t\t\tif (!$(e.target).is('a') && !$(e.target).closest(checkbox).length) {\r\n\t\t\t\t\t\t\tcheckbox.triggerHandler('click');\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// переключение по Space или Enter\r\n\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\tif (el.is(':checked')) checkbox.addClass('checked');\r\n\t\t\t\t\t\telse checkbox.removeClass('checked');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// чтобы переключался чекбокс, который находится в теге label\r\n\t\t\t\t\t.on('keydown.styler', function(e) {\r\n\t\t\t\t\t\tif (e.which == 32) checkbox.click();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\tif (!checkbox.is('.disabled')) checkbox.addClass('focused');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\tcheckbox.removeClass('focused');\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}; // end checkboxOutput()\r\n\r\n\t\t\t\tcheckboxOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').off('.styler');\r\n\t\t\t\t\tel.off('.styler').parent().before(el).remove();\r\n\t\t\t\t\tcheckboxOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end checkbox\r\n\r\n\t\t\t// radio\r\n\t\t\t} else if (el.is(':radio')) {\r\n\r\n\t\t\t\tvar radioOutput = function() {\r\n\r\n\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\tvar radio = $('<div class=\"jq-radio\"><div class=\"jq-radio__div\"></div></div>')\r\n\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t;\r\n\r\n\t\t\t\t\tel.after(radio).prependTo(radio);\r\n\t\t\t\t\tif (el.is(':checked')) radio.addClass('checked');\r\n\t\t\t\t\tif (el.is(':disabled')) radio.addClass('disabled');\r\n\r\n\t\t\t\t\t// определяем общего родителя у радиокнопок с одинаковым name\r\n\t\t\t\t\t// http://stackoverflow.com/a/27733847\r\n\t\t\t\t\t$.fn.commonParents = function() {\r\n\t\t\t\t\t\tvar cachedThis = this;\r\n\t\t\t\t\t\treturn cachedThis.first().parents().filter(function() {\r\n\t\t\t\t\t\t\treturn $(this).find(cachedThis).length === cachedThis.length;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t\t$.fn.commonParent = function() {\r\n\t\t\t\t\t\treturn $(this).commonParents().first();\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// клик на псевдорадиокнопке\r\n\t\t\t\t\tradio.click(function(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tel.triggerHandler('click');\r\n\t\t\t\t\t\tif (!radio.is('.disabled')) {\r\n\t\t\t\t\t\t\tvar inputName = $('input[name=\"' + el.attr('name') + '\"]');\r\n\t\t\t\t\t\t\tinputName.commonParent().find(inputName).prop('checked', false).parent().removeClass('checked');\r\n\t\t\t\t\t\t\tel.prop('checked', true).parent().addClass('checked');\r\n\t\t\t\t\t\t\tel.focus().change();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// клик на label\r\n\t\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').on('click.styler', function(e) {\r\n\t\t\t\t\t\tif (!$(e.target).is('a') && !$(e.target).closest(radio).length) {\r\n\t\t\t\t\t\t\tradio.triggerHandler('click');\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// переключение стрелками\r\n\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\tel.parent().addClass('checked');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\tif (!radio.is('.disabled')) radio.addClass('focused');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\tradio.removeClass('focused');\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}; // end radioOutput()\r\n\r\n\t\t\t\tradioOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').off('.styler');\r\n\t\t\t\t\tel.off('.styler').parent().before(el).remove();\r\n\t\t\t\t\tradioOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end radio\r\n\r\n\t\t\t// file\r\n\t\t\t} else if (el.is(':file')) {\r\n\r\n\t\t\t\tvar fileOutput = function() {\r\n\r\n\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\tvar placeholder = el.data('placeholder');\r\n\t\t\t\t\tif (placeholder === undefined) placeholder = opt.filePlaceholder;\r\n\t\t\t\t\tvar browse = el.data('browse');\r\n\t\t\t\t\tif (browse === undefined || browse === '') browse = opt.fileBrowse;\r\n\r\n\t\t\t\t\tvar file =\r\n\t\t\t\t\t\t$('<div class=\"jq-file\">' +\r\n\t\t\t\t\t\t\t\t'<div class=\"jq-file__name\">' + placeholder + '</div>' +\r\n\t\t\t\t\t\t\t\t'<div class=\"jq-file__browse\">' + browse + '</div>' +\r\n\t\t\t\t\t\t\t'</div>')\r\n\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t;\r\n\r\n\t\t\t\t\tel.after(file).appendTo(file);\r\n\t\t\t\t\tif (el.is(':disabled')) file.addClass('disabled');\r\n\r\n\t\t\t\t\tvar value = el.val();\r\n\t\t\t\t\tvar name = $('div.jq-file__name', file);\r\n\r\n\t\t\t\t\t// чтобы при динамическом изменении имя файла не сбрасывалось\r\n\t\t\t\t\tif (value) name.text(value.replace(/.+[\\\\\\/]/, ''));\r\n\r\n\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\tvar value = el.val();\r\n\t\t\t\t\t\tif (el.is('[multiple]')) {\r\n\t\t\t\t\t\t\tvalue = '';\r\n\t\t\t\t\t\t\tvar files = el[0].files.length;\r\n\t\t\t\t\t\t\tif (files > 0) {\r\n\t\t\t\t\t\t\t\tvar number = el.data('number');\r\n\t\t\t\t\t\t\t\tif (number === undefined) number = opt.fileNumber;\r\n\t\t\t\t\t\t\t\tnumber = number.replace('%s', files);\r\n\t\t\t\t\t\t\t\tvalue = number;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tname.text(value.replace(/.+[\\\\\\/]/, ''));\r\n\t\t\t\t\t\tif (value === '') {\r\n\t\t\t\t\t\t\tname.text(placeholder);\r\n\t\t\t\t\t\t\tfile.removeClass('changed');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfile.addClass('changed');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\tfile.addClass('focused');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\tfile.removeClass('focused');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('click.styler', function() {\r\n\t\t\t\t\t\tfile.removeClass('focused');\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}; // end fileOutput()\r\n\r\n\t\t\t\tfileOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.off('.styler').parent().before(el).remove();\r\n\t\t\t\t\tfileOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end file\r\n\r\n\t\t\t// number\r\n\t\t\t} else if (el.is('input[type=\"number\"]')) {\r\n\r\n\t\t\t\tvar numberOutput = function() {\r\n\r\n\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\tvar number =\r\n\t\t\t\t\t\t$('<div class=\"jq-number\">' +\r\n\t\t\t\t\t\t\t\t'<div class=\"jq-number__spin minus\"></div>' +\r\n\t\t\t\t\t\t\t\t'<div class=\"jq-number__spin plus\"></div>' +\r\n\t\t\t\t\t\t\t'</div>')\r\n\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t;\r\n\r\n\t\t\t\t\tel.after(number).prependTo(number).wrap('<div class=\"jq-number__field\"></div>');\r\n\t\t\t\t\tif (el.is(':disabled')) number.addClass('disabled');\r\n\r\n\t\t\t\t\tvar min,\r\n\t\t\t\t\t\t\tmax,\r\n\t\t\t\t\t\t\tstep,\r\n\t\t\t\t\t\t\ttimeout = null,\r\n\t\t\t\t\t\t\tinterval = null;\r\n\t\t\t\t\tif (el.attr('min') !== undefined) min = el.attr('min');\r\n\t\t\t\t\tif (el.attr('max') !== undefined) max = el.attr('max');\r\n\t\t\t\t\tif (el.attr('step') !== undefined && $.isNumeric(el.attr('step')))\r\n\t\t\t\t\t\tstep = Number(el.attr('step'));\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tstep = Number(1);\r\n\r\n\t\t\t\t\tvar changeValue = function(spin) {\r\n\t\t\t\t\t\tvar value = el.val(),\r\n\t\t\t\t\t\t\t\tnewValue;\r\n\r\n\t\t\t\t\t\tif (!$.isNumeric(value)) {\r\n\t\t\t\t\t\t\tvalue = 0;\r\n\t\t\t\t\t\t\tel.val('0');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (spin.is('.minus')) {\r\n\t\t\t\t\t\t\tnewValue = Number(value) - step;\r\n\t\t\t\t\t\t} else if (spin.is('.plus')) {\r\n\t\t\t\t\t\t\tnewValue = Number(value) + step;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// определяем количество десятичных знаков после запятой в step\r\n\t\t\t\t\t\tvar decimals = (step.toString().split('.')[1] || []).length;\r\n\t\t\t\t\t\tif (decimals > 0) {\r\n\t\t\t\t\t\t\tvar multiplier = '1';\r\n\t\t\t\t\t\t\twhile (multiplier.length <= decimals) multiplier = multiplier + '0';\r\n\t\t\t\t\t\t\t// избегаем появления лишних знаков после запятой\r\n\t\t\t\t\t\t\tnewValue = Math.round(newValue * multiplier) / multiplier;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ($.isNumeric(min) && $.isNumeric(max)) {\r\n\t\t\t\t\t\t\tif (newValue >= min && newValue <= max) el.val(newValue);\r\n\t\t\t\t\t\t} else if ($.isNumeric(min) && !$.isNumeric(max)) {\r\n\t\t\t\t\t\t\tif (newValue >= min) el.val(newValue);\r\n\t\t\t\t\t\t} else if (!$.isNumeric(min) && $.isNumeric(max)) {\r\n\t\t\t\t\t\t\tif (newValue <= max) el.val(newValue);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tel.val(newValue);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (!number.is('.disabled')) {\r\n\t\t\t\t\t\tnumber.on('mousedown', 'div.jq-number__spin', function() {\r\n\t\t\t\t\t\t\tvar spin = $(this);\r\n\t\t\t\t\t\t\tchangeValue(spin);\r\n\t\t\t\t\t\t\ttimeout = setTimeout(function(){\r\n\t\t\t\t\t\t\t\tinterval = setInterval(function(){ changeValue(spin); }, 40);\r\n\t\t\t\t\t\t\t}, 350);\r\n\t\t\t\t\t\t}).on('mouseup mouseout', 'div.jq-number__spin', function() {\r\n\t\t\t\t\t\t\tclearTimeout(timeout);\r\n\t\t\t\t\t\t\tclearInterval(interval);\r\n\t\t\t\t\t\t}).on('mouseup', 'div.jq-number__spin', function() {\r\n\t\t\t\t\t\t\tel.change().trigger('input');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tel.on('focus.styler', function() {\r\n\t\t\t\t\t\t\tnumber.addClass('focused');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\t\tnumber.removeClass('focused');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}; // end numberOutput()\r\n\r\n\t\t\t\tnumberOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.off('.styler').closest('.jq-number').before(el).remove();\r\n\t\t\t\t\tnumberOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end number\r\n\r\n\t\t\t// select\r\n\t\t\t} else if (el.is('select')) {\r\n\r\n\t\t\t\tvar selectboxOutput = function() {\r\n\r\n\t\t\t\t\t// запрещаем прокрутку страницы при прокрутке селекта\r\n\t\t\t\t\tfunction preventScrolling(selector) {\r\n\r\n\t\t\t\t\t\tvar scrollDiff = selector.prop('scrollHeight') - selector.outerHeight(),\r\n\t\t\t\t\t\t\t\twheelDelta = null,\r\n\t\t\t\t\t\t\t\tscrollTop = null;\r\n\r\n\t\t\t\t\t\tselector.off('mousewheel DOMMouseScroll').on('mousewheel DOMMouseScroll', function(e) {\r\n\r\n\t\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t\t * нормализация направления прокрутки\r\n\t\t\t\t\t\t\t * (firefox < 0 || chrome etc... > 0)\r\n\t\t\t\t\t\t\t * (e.originalEvent.detail < 0 || e.originalEvent.wheelDelta > 0)\r\n\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\twheelDelta = (e.originalEvent.detail < 0 || e.originalEvent.wheelDelta > 0) ? 1 : -1; // направление прокрутки (-1 вниз, 1 вверх)\r\n\t\t\t\t\t\t\tscrollTop = selector.scrollTop(); // позиция скролла\r\n\r\n\t\t\t\t\t\t\tif ((scrollTop >= scrollDiff && wheelDelta < 0) || (scrollTop <= 0 && wheelDelta > 0)) {\r\n\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar option = $('option', el);\r\n\t\t\t\t\tvar list = '';\r\n\t\t\t\t\t// формируем список селекта\r\n\t\t\t\t\tfunction makeList() {\r\n\t\t\t\t\t\tfor (var i = 0; i < option.length; i++) {\r\n\t\t\t\t\t\t\tvar op = option.eq(i);\r\n\t\t\t\t\t\t\tvar li = '',\r\n\t\t\t\t\t\t\t\t\tliClass = '',\r\n\t\t\t\t\t\t\t\t\tliClasses = '',\r\n\t\t\t\t\t\t\t\t\tid = '',\r\n\t\t\t\t\t\t\t\t\ttitle = '',\r\n\t\t\t\t\t\t\t\t\tdataList = '',\r\n\t\t\t\t\t\t\t\t\toptionClass = '',\r\n\t\t\t\t\t\t\t\t\toptgroupClass = '',\r\n\t\t\t\t\t\t\t\t\tdataJqfsClass = '';\r\n\t\t\t\t\t\t\tvar disabled = 'disabled';\r\n\t\t\t\t\t\t\tvar selDis = 'selected sel disabled';\r\n\t\t\t\t\t\t\tif (op.prop('selected')) liClass = 'selected sel';\r\n\t\t\t\t\t\t\tif (op.is(':disabled')) liClass = disabled;\r\n\t\t\t\t\t\t\tif (op.is(':selected:disabled')) liClass = selDis;\r\n\t\t\t\t\t\t\tif (op.attr('id') !== undefined && op.attr('id') !== '') id = ' id=\"' + op.attr('id') + opt.idSuffix + '\"';\r\n\t\t\t\t\t\t\tif (op.attr('title') !== undefined && option.attr('title') !== '') title = ' title=\"' + op.attr('title') + '\"';\r\n\t\t\t\t\t\t\tif (op.attr('class') !== undefined) {\r\n\t\t\t\t\t\t\t\toptionClass = ' ' + op.attr('class');\r\n\t\t\t\t\t\t\t\tdataJqfsClass = ' data-jqfs-class=\"' + op.attr('class') + '\"';\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar data = op.data();\r\n\t\t\t\t\t\t\tfor (var k in data) {\r\n\t\t\t\t\t\t\t\tif (data[k] !== '') dataList += ' data-' + k + '=\"' + data[k] + '\"';\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( (liClass + optionClass) !== '' )   liClasses = ' class=\"' + liClass + optionClass + '\"';\r\n\t\t\t\t\t\t\tli = '<li' + dataJqfsClass + dataList + liClasses + title + id + '>'+ op.html() +'</li>';\r\n\r\n\t\t\t\t\t\t\t// если есть optgroup\r\n\t\t\t\t\t\t\tif (op.parent().is('optgroup')) {\r\n\t\t\t\t\t\t\t\tif (op.parent().attr('class') !== undefined) optgroupClass = ' ' + op.parent().attr('class');\r\n\t\t\t\t\t\t\t\tli = '<li' + dataJqfsClass + dataList + ' class=\"' + liClass + optionClass + ' option' + optgroupClass + '\"' + title + id + '>'+ op.html() +'</li>';\r\n\t\t\t\t\t\t\t\tif (op.is(':first-child')) {\r\n\t\t\t\t\t\t\t\t\tli = '<li class=\"optgroup' + optgroupClass + '\">' + op.parent().attr('label') + '</li>' + li;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tlist += li;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} // end makeList()\r\n\r\n\t\t\t\t\t// одиночный селект\r\n\t\t\t\t\tfunction doSelect() {\r\n\r\n\t\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\t\tvar searchHTML = '';\r\n\t\t\t\t\t\tvar selectPlaceholder = el.data('placeholder');\r\n\t\t\t\t\t\tvar selectSearch = el.data('search');\r\n\t\t\t\t\t\tvar selectSearchLimit = el.data('search-limit');\r\n\t\t\t\t\t\tvar selectSearchNotFound = el.data('search-not-found');\r\n\t\t\t\t\t\tvar selectSearchPlaceholder = el.data('search-placeholder');\r\n\t\t\t\t\t\tvar selectSmartPositioning = el.data('smart-positioning');\r\n\r\n\t\t\t\t\t\tif (selectPlaceholder === undefined) selectPlaceholder = opt.selectPlaceholder;\r\n\t\t\t\t\t\tif (selectSearch === undefined || selectSearch === '') selectSearch = opt.selectSearch;\r\n\t\t\t\t\t\tif (selectSearchLimit === undefined || selectSearchLimit === '') selectSearchLimit = opt.selectSearchLimit;\r\n\t\t\t\t\t\tif (selectSearchNotFound === undefined || selectSearchNotFound === '') selectSearchNotFound = opt.selectSearchNotFound;\r\n\t\t\t\t\t\tif (selectSearchPlaceholder === undefined) selectSearchPlaceholder = opt.selectSearchPlaceholder;\r\n\t\t\t\t\t\tif (selectSmartPositioning === undefined || selectSmartPositioning === '') selectSmartPositioning = opt.selectSmartPositioning;\r\n\r\n\t\t\t\t\t\tvar selectbox =\r\n\t\t\t\t\t\t\t$('<div class=\"jq-selectbox jqselect\">' +\r\n\t\t\t\t\t\t\t\t\t'<div class=\"jq-selectbox__select\">' +\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"jq-selectbox__select-text\"></div>' +\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"jq-selectbox__trigger\">' +\r\n\t\t\t\t\t\t\t\t\t\t\t'<div class=\"jq-selectbox__trigger-arrow\"></div></div>' +\r\n\t\t\t\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t\t\t\t'</div>')\r\n\t\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t\t;\r\n\r\n\t\t\t\t\t\tel.after(selectbox).prependTo(selectbox);\r\n\r\n\t\t\t\t\t\tvar selectzIndex = selectbox.css('z-index');\r\n\t\t\t\t\t\tselectzIndex = (selectzIndex > 0 ) ? selectzIndex : 1;\r\n\t\t\t\t\t\tvar divSelect = $('div.jq-selectbox__select', selectbox);\r\n\t\t\t\t\t\tvar divText = $('div.jq-selectbox__select-text', selectbox);\r\n\t\t\t\t\t\tvar optionSelected = option.filter(':selected');\r\n\r\n\t\t\t\t\t\tmakeList();\r\n\r\n\t\t\t\t\t\tif (selectSearch) searchHTML =\r\n\t\t\t\t\t\t\t'<div class=\"jq-selectbox__search\"><input type=\"search\" autocomplete=\"off\" placeholder=\"' + selectSearchPlaceholder + '\"></div>' +\r\n\t\t\t\t\t\t\t'<div class=\"jq-selectbox__not-found\">' + selectSearchNotFound + '</div>';\r\n\t\t\t\t\t\tvar dropdown =\r\n\t\t\t\t\t\t\t$('<div class=\"jq-selectbox__dropdown\">' +\r\n\t\t\t\t\t\t\t\t\tsearchHTML + '<ul>' + list + '</ul>' +\r\n\t\t\t\t\t\t\t\t'</div>');\r\n\t\t\t\t\t\tselectbox.append(dropdown);\r\n\t\t\t\t\t\tvar ul = $('ul', dropdown);\r\n\t\t\t\t\t\tvar li = $('li', dropdown);\r\n\t\t\t\t\t\tvar search = $('input', dropdown);\r\n\t\t\t\t\t\tvar notFound = $('div.jq-selectbox__not-found', dropdown).hide();\r\n\t\t\t\t\t\tif (li.length < selectSearchLimit) search.parent().hide();\r\n\r\n\t\t\t\t\t\t// показываем опцию по умолчанию\r\n\t\t\t\t\t\t// если у 1-й опции нет текста, она выбрана по умолчанию и параметр selectPlaceholder не false, то показываем плейсхолдер\r\n\t\t\t\t\t\tif (option.first().text() === '' && option.first().is(':selected') && selectPlaceholder !== false) {\r\n\t\t\t\t\t\t\tdivText.text(selectPlaceholder).addClass('placeholder');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdivText.text(optionSelected.text());\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// определяем самый широкий пункт селекта\r\n\t\t\t\t\t\tvar liWidthInner = 0,\r\n\t\t\t\t\t\t\t\tliWidth = 0;\r\n\t\t\t\t\t\tli.css({'display': 'inline-block'});\r\n\t\t\t\t\t\tli.each(function() {\r\n\t\t\t\t\t\t\tvar l = $(this);\r\n\t\t\t\t\t\t\tif (l.innerWidth() > liWidthInner) {\r\n\t\t\t\t\t\t\t\tliWidthInner = l.innerWidth();\r\n\t\t\t\t\t\t\t\tliWidth = l.width();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tli.css({'display': ''});\r\n\r\n\t\t\t\t\t\t// подстраиваем ширину свернутого селекта в зависимости\r\n\t\t\t\t\t\t// от ширины плейсхолдера или самого широкого пункта\r\n\t\t\t\t\t\tif (divText.is('.placeholder') && (divText.width() > liWidthInner)) {\r\n\t\t\t\t\t\t\tdivText.width(divText.width());\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar selClone = selectbox.clone().appendTo('body').width('auto');\r\n\t\t\t\t\t\t\tvar selCloneWidth = selClone.outerWidth();\r\n\t\t\t\t\t\t\tselClone.remove();\r\n\t\t\t\t\t\t\tif (selCloneWidth == selectbox.outerWidth()) {\r\n\t\t\t\t\t\t\t\tdivText.width(liWidth);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// подстраиваем ширину выпадающего списка в зависимости от самого широкого пункта\r\n\t\t\t\t\t\tif (liWidthInner > selectbox.width()) dropdown.width(liWidthInner);\r\n\r\n\t\t\t\t\t\t// прячем 1-ю пустую опцию, если она есть и если атрибут data-placeholder не пустой\r\n\t\t\t\t\t\t// если все же нужно, чтобы первая пустая опция отображалась, то указываем у селекта: data-placeholder=\"\"\r\n\t\t\t\t\t\tif (option.first().text() === '' && el.data('placeholder') !== '') {\r\n\t\t\t\t\t\t\tli.first().hide();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar selectHeight = selectbox.outerHeight(true);\r\n\t\t\t\t\t\tvar searchHeight = search.parent().outerHeight(true) || 0;\r\n\t\t\t\t\t\tvar isMaxHeight = ul.css('max-height');\r\n\t\t\t\t\t\tvar liSelected = li.filter('.selected');\r\n\t\t\t\t\t\tif (liSelected.length < 1) li.first().addClass('selected sel');\r\n\t\t\t\t\t\tif (li.data('li-height') === undefined) {\r\n\t\t\t\t\t\t\tvar liOuterHeight = li.outerHeight();\r\n\t\t\t\t\t\t\tif (selectPlaceholder !== false) liOuterHeight = li.eq(1).outerHeight();\r\n\t\t\t\t\t\t\tli.data('li-height', liOuterHeight);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar position = dropdown.css('top');\r\n\t\t\t\t\t\tif (dropdown.css('left') == 'auto') dropdown.css({left: 0});\r\n\t\t\t\t\t\tif (dropdown.css('top') == 'auto') {\r\n\t\t\t\t\t\t\tdropdown.css({top: selectHeight});\r\n\t\t\t\t\t\t\tposition = selectHeight;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdropdown.hide();\r\n\r\n\t\t\t\t\t\t// если выбран не дефолтный пункт\r\n\t\t\t\t\t\tif (liSelected.length) {\r\n\t\t\t\t\t\t\t// добавляем класс, показывающий изменение селекта\r\n\t\t\t\t\t\t\tif (option.first().text() != optionSelected.text()) {\r\n\t\t\t\t\t\t\t\tselectbox.addClass('changed');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// передаем селекту класс выбранного пункта\r\n\t\t\t\t\t\t\tselectbox.data('jqfs-class', liSelected.data('jqfs-class'));\r\n\t\t\t\t\t\t\tselectbox.addClass(liSelected.data('jqfs-class'));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// если селект неактивный\r\n\t\t\t\t\t\tif (el.is(':disabled')) {\r\n\t\t\t\t\t\t\tselectbox.addClass('disabled');\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// при клике на псевдоселекте\r\n\t\t\t\t\t\tdivSelect.click(function() {\r\n\r\n\t\t\t\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\t\t\t\tif ($('div.jq-selectbox').filter('.opened').length) {\r\n\t\t\t\t\t\t\t\topt.onSelectClosed.call($('div.jq-selectbox').filter('.opened'));\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tel.focus();\r\n\r\n\t\t\t\t\t\t\t// если iOS, то не показываем выпадающий список,\r\n\t\t\t\t\t\t\t// т.к. отображается нативный и неизвестно, как его спрятать\r\n\t\t\t\t\t\t\tif (iOS) return;\r\n\r\n\t\t\t\t\t\t\t// умное позиционирование\r\n\t\t\t\t\t\t\tvar win = $(window);\r\n\t\t\t\t\t\t\tvar liHeight = li.data('li-height');\r\n\t\t\t\t\t\t\tvar topOffset = selectbox.offset().top;\r\n\t\t\t\t\t\t\tvar bottomOffset = win.height() - selectHeight - (topOffset - win.scrollTop());\r\n\t\t\t\t\t\t\tvar visible = el.data('visible-options');\r\n\t\t\t\t\t\t\tif (visible === undefined || visible === '') visible = opt.selectVisibleOptions;\r\n\t\t\t\t\t\t\tvar minHeight = liHeight * 5;\r\n\t\t\t\t\t\t\tvar newHeight = liHeight * visible;\r\n\t\t\t\t\t\t\tif (visible > 0 && visible < 6) minHeight = newHeight;\r\n\t\t\t\t\t\t\tif (visible === 0) newHeight = 'auto';\r\n\r\n\t\t\t\t\t\t\tvar dropDown = function() {\r\n\t\t\t\t\t\t\t\tdropdown.height('auto').css({bottom: 'auto', top: position});\r\n\t\t\t\t\t\t\t\tvar maxHeightBottom = function() {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', Math.floor((bottomOffset - 20 - searchHeight) / liHeight) * liHeight);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tmaxHeightBottom();\r\n\t\t\t\t\t\t\t\tul.css('max-height', newHeight);\r\n\t\t\t\t\t\t\t\tif (isMaxHeight != 'none') {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', isMaxHeight);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (bottomOffset < (dropdown.outerHeight() + 20)) {\r\n\t\t\t\t\t\t\t\t\tmaxHeightBottom();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tvar dropUp = function() {\r\n\t\t\t\t\t\t\t\tdropdown.height('auto').css({top: 'auto', bottom: position});\r\n\t\t\t\t\t\t\t\tvar maxHeightTop = function() {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', Math.floor((topOffset - win.scrollTop() - 20 - searchHeight) / liHeight) * liHeight);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tmaxHeightTop();\r\n\t\t\t\t\t\t\t\tul.css('max-height', newHeight);\r\n\t\t\t\t\t\t\t\tif (isMaxHeight != 'none') {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', isMaxHeight);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif ((topOffset - win.scrollTop() - 20) < (dropdown.outerHeight() + 20)) {\r\n\t\t\t\t\t\t\t\t\tmaxHeightTop();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tif (selectSmartPositioning === true || selectSmartPositioning === 1) {\r\n\t\t\t\t\t\t\t\t// раскрытие вниз\r\n\t\t\t\t\t\t\t\tif (bottomOffset > (minHeight + searchHeight + 20)) {\r\n\t\t\t\t\t\t\t\t\tdropDown();\r\n\t\t\t\t\t\t\t\t\tselectbox.removeClass('dropup').addClass('dropdown');\r\n\t\t\t\t\t\t\t\t// раскрытие вверх\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tdropUp();\r\n\t\t\t\t\t\t\t\t\tselectbox.removeClass('dropdown').addClass('dropup');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (selectSmartPositioning === false || selectSmartPositioning === 0) {\r\n\t\t\t\t\t\t\t\t// раскрытие вниз\r\n\t\t\t\t\t\t\t\tif (bottomOffset > (minHeight + searchHeight + 20)) {\r\n\t\t\t\t\t\t\t\t\tdropDown();\r\n\t\t\t\t\t\t\t\t\tselectbox.removeClass('dropup').addClass('dropdown');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// если умное позиционирование отключено\r\n\t\t\t\t\t\t\t\tdropdown.height('auto').css({bottom: 'auto', top: position});\r\n\t\t\t\t\t\t\t\tul.css('max-height', newHeight);\r\n\t\t\t\t\t\t\t\tif (isMaxHeight != 'none') {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', isMaxHeight);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// если выпадающий список выходит за правый край окна браузера,\r\n\t\t\t\t\t\t\t// то меняем позиционирование с левого на правое\r\n\t\t\t\t\t\t\tif (selectbox.offset().left + dropdown.outerWidth() > win.width()) {\r\n\t\t\t\t\t\t\t\tdropdown.css({left: 'auto', right: 0});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// конец умного позиционирования\r\n\r\n\t\t\t\t\t\t\t$('div.jqselect').css({zIndex: (selectzIndex - 1)}).removeClass('opened');\r\n\t\t\t\t\t\t\tselectbox.css({zIndex: selectzIndex});\r\n\t\t\t\t\t\t\tif (dropdown.is(':hidden')) {\r\n\t\t\t\t\t\t\t\t$('div.jq-selectbox__dropdown:visible').hide();\r\n\t\t\t\t\t\t\t\tdropdown.show();\r\n\t\t\t\t\t\t\t\tselectbox.addClass('opened focused');\r\n\t\t\t\t\t\t\t\t// колбек при открытии селекта\r\n\t\t\t\t\t\t\t\topt.onSelectOpened.call(selectbox);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdropdown.hide();\r\n\t\t\t\t\t\t\t\tselectbox.removeClass('opened dropup dropdown');\r\n\t\t\t\t\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\t\t\t\t\tif ($('div.jq-selectbox').filter('.opened').length) {\r\n\t\t\t\t\t\t\t\t\topt.onSelectClosed.call(selectbox);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// поисковое поле\r\n\t\t\t\t\t\t\tif (search.length) {\r\n\t\t\t\t\t\t\t\tsearch.val('').keyup();\r\n\t\t\t\t\t\t\t\tnotFound.hide();\r\n\t\t\t\t\t\t\t\tsearch.keyup(function() {\r\n\t\t\t\t\t\t\t\t\tvar query = $(this).val();\r\n\t\t\t\t\t\t\t\t\tli.each(function() {\r\n\t\t\t\t\t\t\t\t\t\tif (!$(this).html().match(new RegExp('.*?' + query + '.*?', 'i'))) {\r\n\t\t\t\t\t\t\t\t\t\t\t$(this).hide();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t$(this).show();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t// прячем 1-ю пустую опцию\r\n\t\t\t\t\t\t\t\t\tif (option.first().text() === '' && el.data('placeholder') !== '') {\r\n\t\t\t\t\t\t\t\t\t\tli.first().hide();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (li.filter(':visible').length < 1) {\r\n\t\t\t\t\t\t\t\t\t\tnotFound.show();\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tnotFound.hide();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// прокручиваем до выбранного пункта при открытии списка\r\n\t\t\t\t\t\t\tif (li.filter('.selected').length) {\r\n\t\t\t\t\t\t\t\tif (el.val() === '') {\r\n\t\t\t\t\t\t\t\t\tul.scrollTop(0);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t// если нечетное количество видимых пунктов,\r\n\t\t\t\t\t\t\t\t\t// то высоту пункта делим пополам для последующего расчета\r\n\t\t\t\t\t\t\t\t\tif ( (ul.innerHeight() / liHeight) % 2 !== 0 ) liHeight = liHeight / 2;\r\n\t\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top - ul.innerHeight() / 2 + liHeight);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tpreventScrolling(ul);\r\n\r\n\t\t\t\t\t\t}); // end divSelect.click()\r\n\r\n\t\t\t\t\t\t// при наведении курсора на пункт списка\r\n\t\t\t\t\t\tli.hover(function() {\r\n\t\t\t\t\t\t\t$(this).siblings().removeClass('selected');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvar selectedText = li.filter('.selected').text();\r\n\r\n\t\t\t\t\t\t// при клике на пункт списка\r\n\t\t\t\t\t\tli.filter(':not(.disabled):not(.optgroup)').click(function() {\r\n\t\t\t\t\t\t\tel.focus();\r\n\t\t\t\t\t\t\tvar t = $(this);\r\n\t\t\t\t\t\t\tvar liText = t.text();\r\n\t\t\t\t\t\t\tif (!t.is('.selected')) {\r\n\t\t\t\t\t\t\t\tvar index = t.index();\r\n\t\t\t\t\t\t\t\tindex -= t.prevAll('.optgroup').length;\r\n\t\t\t\t\t\t\t\tt.addClass('selected sel').siblings().removeClass('selected sel');\r\n\t\t\t\t\t\t\t\toption.prop('selected', false).eq(index).prop('selected', true);\r\n\t\t\t\t\t\t\t\tselectedText = liText;\r\n\t\t\t\t\t\t\t\tdivText.text(liText);\r\n\r\n\t\t\t\t\t\t\t\t// передаем селекту класс выбранного пункта\r\n\t\t\t\t\t\t\t\tif (selectbox.data('jqfs-class')) selectbox.removeClass(selectbox.data('jqfs-class'));\r\n\t\t\t\t\t\t\t\tselectbox.data('jqfs-class', t.data('jqfs-class'));\r\n\t\t\t\t\t\t\t\tselectbox.addClass(t.data('jqfs-class'));\r\n\r\n\t\t\t\t\t\t\t\tel.change();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdropdown.hide();\r\n\t\t\t\t\t\t\tselectbox.removeClass('opened dropup dropdown');\r\n\t\t\t\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\t\t\t\topt.onSelectClosed.call(selectbox);\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tdropdown.mouseout(function() {\r\n\t\t\t\t\t\t\t$('li.sel', dropdown).addClass('selected');\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// изменение селекта\r\n\t\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\t\tdivText.text(option.filter(':selected').text()).removeClass('placeholder');\r\n\t\t\t\t\t\t\tli.removeClass('selected sel').not('.optgroup').eq(el[0].selectedIndex).addClass('selected sel');\r\n\t\t\t\t\t\t\t// добавляем класс, показывающий изменение селекта\r\n\t\t\t\t\t\t\tif (option.first().text() != li.filter('.selected').text()) {\r\n\t\t\t\t\t\t\t\tselectbox.addClass('changed');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tselectbox.removeClass('changed');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\t\tselectbox.addClass('focused');\r\n\t\t\t\t\t\t\t$('div.jqselect').not('.focused').removeClass('opened dropup dropdown').find('div.jq-selectbox__dropdown').hide();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\t\tselectbox.removeClass('focused');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// изменение селекта с клавиатуры\r\n\t\t\t\t\t\t.on('keydown.styler keyup.styler', function(e) {\r\n\t\t\t\t\t\t\tvar liHeight = li.data('li-height');\r\n\t\t\t\t\t\t\tif (el.val() === '') {\r\n\t\t\t\t\t\t\t\tdivText.text(selectPlaceholder).addClass('placeholder');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdivText.text(option.filter(':selected').text());\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tli.removeClass('selected sel').not('.optgroup').eq(el[0].selectedIndex).addClass('selected sel');\r\n\t\t\t\t\t\t\t// вверх, влево, Page Up, Home\r\n\t\t\t\t\t\t\tif (e.which == 38 || e.which == 37 || e.which == 33 || e.which == 36) {\r\n\t\t\t\t\t\t\t\tif (el.val() === '') {\r\n\t\t\t\t\t\t\t\t\tul.scrollTop(0);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// вниз, вправо, Page Down, End\r\n\t\t\t\t\t\t\tif (e.which == 40 || e.which == 39 || e.which == 34 || e.which == 35) {\r\n\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top - ul.innerHeight() + liHeight);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// закрываем выпадающий список при нажатии Enter\r\n\t\t\t\t\t\t\tif (e.which == 13) {\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tdropdown.hide();\r\n\t\t\t\t\t\t\t\tselectbox.removeClass('opened dropup dropdown');\r\n\t\t\t\t\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\t\t\t\t\topt.onSelectClosed.call(selectbox);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).on('keydown.styler', function(e) {\r\n\t\t\t\t\t\t\t// открываем выпадающий список при нажатии Space\r\n\t\t\t\t\t\t\tif (e.which == 32) {\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tdivSelect.click();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// прячем выпадающий список при клике за пределами селекта\r\n\t\t\t\t\t\tif (!onDocumentClick.registered) {\r\n\t\t\t\t\t\t\t$(document).on('click', onDocumentClick);\r\n\t\t\t\t\t\t\tonDocumentClick.registered = true;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} // end doSelect()\r\n\r\n\t\t\t\t\t// мультиселект\r\n\t\t\t\t\tfunction doMultipleSelect() {\r\n\r\n\t\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\t\tvar selectbox =\r\n\t\t\t\t\t\t\t$('<div class=\"jq-select-multiple jqselect\"></div>')\r\n\t\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t\t;\r\n\r\n\t\t\t\t\t\tel.after(selectbox);\r\n\r\n\t\t\t\t\t\tmakeList();\r\n\t\t\t\t\t\tselectbox.append('<ul>' + list + '</ul>');\r\n\t\t\t\t\t\tvar ul = $('ul', selectbox);\r\n\t\t\t\t\t\tvar li = $('li', selectbox);\r\n\t\t\t\t\t\tvar size = el.attr('size');\r\n\t\t\t\t\t\tvar ulHeight = ul.outerHeight();\r\n\t\t\t\t\t\tvar liHeight = li.outerHeight();\r\n\t\t\t\t\t\tif (size !== undefined && size > 0) {\r\n\t\t\t\t\t\t\tul.css({'height': liHeight * size});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tul.css({'height': liHeight * 4});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (ulHeight > selectbox.height()) {\r\n\t\t\t\t\t\t\tul.css('overflowY', 'scroll');\r\n\t\t\t\t\t\t\tpreventScrolling(ul);\r\n\t\t\t\t\t\t\t// прокручиваем до выбранного пункта\r\n\t\t\t\t\t\t\tif (li.filter('.selected').length) {\r\n\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// прячем оригинальный селект\r\n\t\t\t\t\t\tel.prependTo(selectbox);\r\n\r\n\t\t\t\t\t\t// если селект неактивный\r\n\t\t\t\t\t\tif (el.is(':disabled')) {\r\n\t\t\t\t\t\t\tselectbox.addClass('disabled');\r\n\t\t\t\t\t\t\toption.each(function() {\r\n\t\t\t\t\t\t\t\tif ($(this).is(':selected')) li.eq($(this).index()).addClass('selected');\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// если селект активный\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t// при клике на пункт списка\r\n\t\t\t\t\t\t\tli.filter(':not(.disabled):not(.optgroup)').click(function(e) {\r\n\t\t\t\t\t\t\t\tel.focus();\r\n\t\t\t\t\t\t\t\tvar clkd = $(this);\r\n\t\t\t\t\t\t\t\tif(!e.ctrlKey && !e.metaKey) clkd.addClass('selected');\r\n\t\t\t\t\t\t\t\tif(!e.shiftKey) clkd.addClass('first');\r\n\t\t\t\t\t\t\t\tif(!e.ctrlKey && !e.metaKey && !e.shiftKey) clkd.siblings().removeClass('selected first');\r\n\r\n\t\t\t\t\t\t\t\t// выделение пунктов при зажатом Ctrl\r\n\t\t\t\t\t\t\t\tif(e.ctrlKey || e.metaKey) {\r\n\t\t\t\t\t\t\t\t\tif (clkd.is('.selected')) clkd.removeClass('selected first');\r\n\t\t\t\t\t\t\t\t\t\telse clkd.addClass('selected first');\r\n\t\t\t\t\t\t\t\t\tclkd.siblings().removeClass('first');\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// выделение пунктов при зажатом Shift\r\n\t\t\t\t\t\t\t\tif(e.shiftKey) {\r\n\t\t\t\t\t\t\t\t\tvar prev = false,\r\n\t\t\t\t\t\t\t\t\t\t\tnext = false;\r\n\t\t\t\t\t\t\t\t\tclkd.siblings().removeClass('selected').siblings('.first').addClass('selected');\r\n\t\t\t\t\t\t\t\t\tclkd.prevAll().each(function() {\r\n\t\t\t\t\t\t\t\t\t\tif ($(this).is('.first')) prev = true;\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tclkd.nextAll().each(function() {\r\n\t\t\t\t\t\t\t\t\t\tif ($(this).is('.first')) next = true;\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tif (prev) {\r\n\t\t\t\t\t\t\t\t\t\tclkd.prevAll().each(function() {\r\n\t\t\t\t\t\t\t\t\t\t\tif ($(this).is('.selected')) return false;\r\n\t\t\t\t\t\t\t\t\t\t\t\telse $(this).not('.disabled, .optgroup').addClass('selected');\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (next) {\r\n\t\t\t\t\t\t\t\t\t\tclkd.nextAll().each(function() {\r\n\t\t\t\t\t\t\t\t\t\t\tif ($(this).is('.selected')) return false;\r\n\t\t\t\t\t\t\t\t\t\t\t\telse $(this).not('.disabled, .optgroup').addClass('selected');\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (li.filter('.selected').length == 1) clkd.addClass('first');\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// отмечаем выбранные мышью\r\n\t\t\t\t\t\t\t\toption.prop('selected', false);\r\n\t\t\t\t\t\t\t\tli.filter('.selected').each(function() {\r\n\t\t\t\t\t\t\t\t\tvar t = $(this);\r\n\t\t\t\t\t\t\t\t\tvar index = t.index();\r\n\t\t\t\t\t\t\t\t\tif (t.is('.option')) index -= t.prevAll('.optgroup').length;\r\n\t\t\t\t\t\t\t\t\toption.eq(index).prop('selected', true);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tel.change();\r\n\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t// отмечаем выбранные с клавиатуры\r\n\t\t\t\t\t\t\toption.each(function(i) {\r\n\t\t\t\t\t\t\t\t$(this).data('optionIndex', i);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\t\t\tli.removeClass('selected');\r\n\t\t\t\t\t\t\t\tvar arrIndexes = [];\r\n\t\t\t\t\t\t\t\toption.filter(':selected').each(function() {\r\n\t\t\t\t\t\t\t\t\tarrIndexes.push($(this).data('optionIndex'));\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tli.not('.optgroup').filter(function(i) {\r\n\t\t\t\t\t\t\t\t\treturn $.inArray(i, arrIndexes) > -1;\r\n\t\t\t\t\t\t\t\t}).addClass('selected');\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\t\t\tselectbox.addClass('focused');\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\t\t\tselectbox.removeClass('focused');\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t// прокручиваем с клавиатуры\r\n\t\t\t\t\t\t\tif (ulHeight > selectbox.height()) {\r\n\t\t\t\t\t\t\t\tel.on('keydown.styler', function(e) {\r\n\t\t\t\t\t\t\t\t\t// вверх, влево, PageUp\r\n\t\t\t\t\t\t\t\t\tif (e.which == 38 || e.which == 37 || e.which == 33) {\r\n\t\t\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top - liHeight);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t// вниз, вправо, PageDown\r\n\t\t\t\t\t\t\t\t\tif (e.which == 40 || e.which == 39 || e.which == 34) {\r\n\t\t\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected:last').position().top - ul.innerHeight() + liHeight * 2);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} // end doMultipleSelect()\r\n\r\n\t\t\t\t\tif (el.is('[multiple]')) {\r\n\r\n\t\t\t\t\t\t// если Android или iOS, то мультиселект не стилизуем\r\n\t\t\t\t\t\t// причина для Android - в стилизованном селекте нет возможности выбрать несколько пунктов\r\n\t\t\t\t\t\t// причина для iOS - в стилизованном селекте неправильно отображаются выбранные пункты\r\n\t\t\t\t\t\tif (Android || iOS) return;\r\n\r\n\t\t\t\t\t\tdoMultipleSelect();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdoSelect();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}; // end selectboxOutput()\r\n\r\n\t\t\t\tselectboxOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.off('.styler').parent().before(el).remove();\r\n\t\t\t\t\tselectboxOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end select\r\n\r\n\t\t\t// reset\r\n\t\t\t} else if (el.is(':reset')) {\r\n\t\t\t\tel.on('click', function() {\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tel.closest('form').find('input, select').trigger('refresh');\r\n\t\t\t\t\t}, 1);\r\n\t\t\t\t});\r\n\t\t\t} // end reset\r\n\r\n\t\t}, // init: function()\r\n\r\n\t\t// деструктор\r\n\t\tdestroy: function() {\r\n\r\n\t\t\tvar el = $(this.element);\r\n\r\n\t\t\tif (el.is(':checkbox') || el.is(':radio')) {\r\n\t\t\t\tel.removeData('_' + pluginName).off('.styler refresh').removeAttr('style').parent().before(el).remove();\r\n\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').off('.styler');\r\n\t\t\t} else if (el.is('input[type=\"number\"]')) {\r\n\t\t\t\tel.removeData('_' + pluginName).off('.styler refresh').closest('.jq-number').before(el).remove();\r\n\t\t\t} else if (el.is(':file') || el.is('select')) {\r\n\t\t\t\tel.removeData('_' + pluginName).off('.styler refresh').removeAttr('style').parent().before(el).remove();\r\n\t\t\t}\r\n\r\n\t\t} // destroy: function()\r\n\r\n\t}; // Plugin.prototype\r\n\r\n\t$.fn[pluginName] = function(options) {\r\n\t\tvar args = arguments;\r\n\t\tif (options === undefined || typeof options === 'object') {\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tif (!$.data(this, '_' + pluginName)) {\r\n\t\t\t\t\t$.data(this, '_' + pluginName, new Plugin(this, options));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// колбек после выполнения плагина\r\n\t\t\t.promise()\r\n\t\t\t.done(function() {\r\n\t\t\t\tvar opt = $(this[0]).data('_' + pluginName);\r\n\t\t\t\tif (opt) opt.options.onFormStyled.call();\r\n\t\t\t});\r\n\t\t\treturn this;\r\n\t\t} else if (typeof options === 'string' && options[0] !== '_' && options !== 'init') {\r\n\t\t\tvar returns;\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tvar instance = $.data(this, '_' + pluginName);\r\n\t\t\t\tif (instance instanceof Plugin && typeof instance[options] === 'function') {\r\n\t\t\t\t\treturns = instance[options].apply(instance, Array.prototype.slice.call(args, 1));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn returns !== undefined ? returns : this;\r\n\t\t}\r\n\t};\r\n\r\n\t// прячем выпадающий список при клике за пределами селекта\r\n\tfunction onDocumentClick(e) {\r\n\t\t// e.target.nodeName != 'OPTION' - добавлено для обхода бага в Opera на движке Presto\r\n\t\t// (при изменении селекта с клавиатуры срабатывает событие onclick)\r\n\t\tif (!$(e.target).parents().hasClass('jq-selectbox') && e.target.nodeName != 'OPTION') {\r\n\t\t\tif ($('div.jq-selectbox.opened').length) {\r\n\t\t\t\tvar selectbox = $('div.jq-selectbox.opened'),\r\n\t\t\t\t\t\tsearch = $('div.jq-selectbox__search input', selectbox),\r\n\t\t\t\t\t\tdropdown = $('div.jq-selectbox__dropdown', selectbox),\r\n\t\t\t\t\t\topt = selectbox.find('select').data('_' + pluginName).options;\r\n\r\n\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\topt.onSelectClosed.call(selectbox);\r\n\r\n\t\t\t\tif (search.length) search.val('').keyup();\r\n\t\t\t\tdropdown.hide().find('li.sel').addClass('selected');\r\n\t\t\t\tselectbox.removeClass('focused opened dropup dropdown');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tonDocumentClick.registered = false;\r\n\r\n}));","/**\r\n * jquery.mask.js\r\n * @version: v1.14.15\r\n * @author: Igor Escobar\r\n *\r\n * Created by Igor Escobar on 2012-03-10. Please report any bug at github.com/igorescobar/jQuery-Mask-Plugin\r\n *\r\n * Copyright (c) 2012 Igor Escobar http://igorescobar.com\r\n *\r\n * The MIT License (http://www.opensource.org/licenses/mit-license.php)\r\n *\r\n * Permission is hereby granted, free of charge, to any person\r\n * obtaining a copy of this software and associated documentation\r\n * files (the \"Software\"), to deal in the Software without\r\n * restriction, including without limitation the rights to use,\r\n * copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the\r\n * Software is furnished to do so, subject to the following\r\n * conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be\r\n * included in all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\r\n * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\r\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\r\n * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\r\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\r\n * OTHER DEALINGS IN THE SOFTWARE.\r\n */\r\n\r\n/* jshint laxbreak: true */\r\n/* jshint maxcomplexity:17 */\r\n/* global define */\r\n\r\n// UMD (Universal Module Definition) patterns for JavaScript modules that work everywhere.\r\n// https://github.com/umdjs/umd/blob/master/templates/jqueryPlugin.js\r\n(function (factory, jQuery, Zepto) {\r\n\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(['jquery'], factory);\r\n    } else if (typeof exports === 'object') {\r\n        module.exports = factory(require('jquery'));\r\n    } else {\r\n        factory(jQuery || Zepto);\r\n    }\r\n\r\n}(function ($) {\r\n    'use strict';\r\n\r\n    var Mask = function (el, mask, options) {\r\n\r\n        var p = {\r\n            invalid: [],\r\n            getCaret: function () {\r\n                try {\r\n                    var sel,\r\n                        pos = 0,\r\n                        ctrl = el.get(0),\r\n                        dSel = document.selection,\r\n                        cSelStart = ctrl.selectionStart;\r\n\r\n                    // IE Support\r\n                    if (dSel && navigator.appVersion.indexOf('MSIE 10') === -1) {\r\n                        sel = dSel.createRange();\r\n                        sel.moveStart('character', -p.val().length);\r\n                        pos = sel.text.length;\r\n                    }\r\n                    // Firefox support\r\n                    else if (cSelStart || cSelStart === '0') {\r\n                        pos = cSelStart;\r\n                    }\r\n\r\n                    return pos;\r\n                } catch (e) {}\r\n            },\r\n            setCaret: function(pos) {\r\n                try {\r\n                    if (el.is(':focus')) {\r\n                        var range, ctrl = el.get(0);\r\n\r\n                        // Firefox, WebKit, etc..\r\n                        if (ctrl.setSelectionRange) {\r\n                            ctrl.setSelectionRange(pos, pos);\r\n                        } else { // IE\r\n                            range = ctrl.createTextRange();\r\n                            range.collapse(true);\r\n                            range.moveEnd('character', pos);\r\n                            range.moveStart('character', pos);\r\n                            range.select();\r\n                        }\r\n                    }\r\n                } catch (e) {}\r\n            },\r\n            events: function() {\r\n                el\r\n                .on('keydown.mask', function(e) {\r\n                    el.data('mask-keycode', e.keyCode || e.which);\r\n                    el.data('mask-previus-value', el.val());\r\n                    el.data('mask-previus-caret-pos', p.getCaret());\r\n                    p.maskDigitPosMapOld = p.maskDigitPosMap;\r\n                })\r\n                .on($.jMaskGlobals.useInput ? 'input.mask' : 'keyup.mask', p.behaviour)\r\n                .on('paste.mask drop.mask', function() {\r\n                    setTimeout(function() {\r\n                        el.keydown().keyup();\r\n                    }, 100);\r\n                })\r\n                .on('change.mask', function(){\r\n                    el.data('changed', true);\r\n                })\r\n                .on('blur.mask', function(){\r\n                    if (oldValue !== p.val() && !el.data('changed')) {\r\n                        el.trigger('change');\r\n                    }\r\n                    el.data('changed', false);\r\n                })\r\n                // it's very important that this callback remains in this position\r\n                // otherwhise oldValue it's going to work buggy\r\n                .on('blur.mask', function() {\r\n                    oldValue = p.val();\r\n                })\r\n                // select all text on focus\r\n                .on('focus.mask', function (e) {\r\n                    if (options.selectOnFocus === true) {\r\n                        $(e.target).select();\r\n                    }\r\n                })\r\n                // clear the value if it not complete the mask\r\n                .on('focusout.mask', function() {\r\n                    if (options.clearIfNotMatch && !regexMask.test(p.val())) {\r\n                       p.val('');\r\n                   }\r\n                });\r\n            },\r\n            getRegexMask: function() {\r\n                var maskChunks = [], translation, pattern, optional, recursive, oRecursive, r;\r\n\r\n                for (var i = 0; i < mask.length; i++) {\r\n                    translation = jMask.translation[mask.charAt(i)];\r\n\r\n                    if (translation) {\r\n\r\n                        pattern = translation.pattern.toString().replace(/.{1}$|^.{1}/g, '');\r\n                        optional = translation.optional;\r\n                        recursive = translation.recursive;\r\n\r\n                        if (recursive) {\r\n                            maskChunks.push(mask.charAt(i));\r\n                            oRecursive = {digit: mask.charAt(i), pattern: pattern};\r\n                        } else {\r\n                            maskChunks.push(!optional && !recursive ? pattern : (pattern + '?'));\r\n                        }\r\n\r\n                    } else {\r\n                        maskChunks.push(mask.charAt(i).replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'));\r\n                    }\r\n                }\r\n\r\n                r = maskChunks.join('');\r\n\r\n                if (oRecursive) {\r\n                    r = r.replace(new RegExp('(' + oRecursive.digit + '(.*' + oRecursive.digit + ')?)'), '($1)?')\r\n                         .replace(new RegExp(oRecursive.digit, 'g'), oRecursive.pattern);\r\n                }\r\n\r\n                return new RegExp(r);\r\n            },\r\n            destroyEvents: function() {\r\n                el.off(['input', 'keydown', 'keyup', 'paste', 'drop', 'blur', 'focusout', ''].join('.mask '));\r\n            },\r\n            val: function(v) {\r\n                var isInput = el.is('input'),\r\n                    method = isInput ? 'val' : 'text',\r\n                    r;\r\n\r\n                if (arguments.length > 0) {\r\n                    if (el[method]() !== v) {\r\n                        el[method](v);\r\n                    }\r\n                    r = el;\r\n                } else {\r\n                    r = el[method]();\r\n                }\r\n\r\n                return r;\r\n            },\r\n            calculateCaretPosition: function() {\r\n                var oldVal = el.data('mask-previus-value') || '',\r\n                    newVal = p.getMasked(),\r\n                    caretPosNew = p.getCaret();\r\n                if (oldVal !== newVal) {\r\n                    var caretPosOld = el.data('mask-previus-caret-pos') || 0,\r\n                        newValL = newVal.length,\r\n                        oldValL = oldVal.length,\r\n                        maskDigitsBeforeCaret = 0,\r\n                        maskDigitsAfterCaret = 0,\r\n                        maskDigitsBeforeCaretAll = 0,\r\n                        maskDigitsBeforeCaretAllOld = 0,\r\n                        i = 0;\r\n\r\n                    for (i = caretPosNew; i < newValL; i++) {\r\n                        if (!p.maskDigitPosMap[i]) {\r\n                            break;\r\n                        }\r\n                        maskDigitsAfterCaret++;\r\n                    }\r\n\r\n                    for (i = caretPosNew - 1; i >= 0; i--) {\r\n                        if (!p.maskDigitPosMap[i]) {\r\n                            break;\r\n                        }\r\n                        maskDigitsBeforeCaret++;\r\n                    }\r\n\r\n                    for (i = caretPosNew - 1; i >= 0; i--) {\r\n                        if (p.maskDigitPosMap[i]) {\r\n                            maskDigitsBeforeCaretAll++;\r\n                        }\r\n                    }\r\n\r\n                    for (i = caretPosOld - 1; i >= 0; i--) {\r\n                        if (p.maskDigitPosMapOld[i]) {\r\n                            maskDigitsBeforeCaretAllOld++;\r\n                        }\r\n                    }\r\n\r\n                    // if the cursor is at the end keep it there\r\n                    if (caretPosNew > oldValL) {\r\n                      caretPosNew = newValL * 10;\r\n                    } else if (caretPosOld >= caretPosNew && caretPosOld !== oldValL) {\r\n                        if (!p.maskDigitPosMapOld[caretPosNew])  {\r\n                          var caretPos = caretPosNew;\r\n                          caretPosNew -= maskDigitsBeforeCaretAllOld - maskDigitsBeforeCaretAll;\r\n                          caretPosNew -= maskDigitsBeforeCaret;\r\n                          if (p.maskDigitPosMap[caretPosNew])  {\r\n                            caretPosNew = caretPos;\r\n                          }\r\n                        }\r\n                    }\r\n                    else if (caretPosNew > caretPosOld) {\r\n                        caretPosNew += maskDigitsBeforeCaretAll - maskDigitsBeforeCaretAllOld;\r\n                        caretPosNew += maskDigitsAfterCaret;\r\n                    }\r\n                }\r\n                return caretPosNew;\r\n            },\r\n            behaviour: function(e) {\r\n                e = e || window.event;\r\n                p.invalid = [];\r\n\r\n                var keyCode = el.data('mask-keycode');\r\n\r\n                if ($.inArray(keyCode, jMask.byPassKeys) === -1) {\r\n                    var newVal = p.getMasked(),\r\n                        caretPos = p.getCaret();\r\n\r\n                    // this is a compensation to devices/browsers that don't compensate\r\n                    // caret positioning the right way\r\n                    setTimeout(function() {\r\n                      p.setCaret(p.calculateCaretPosition());\r\n                    }, $.jMaskGlobals.keyStrokeCompensation);\r\n\r\n                    p.val(newVal);\r\n                    p.setCaret(caretPos);\r\n                    return p.callbacks(e);\r\n                }\r\n            },\r\n            getMasked: function(skipMaskChars, val) {\r\n                var buf = [],\r\n                    value = val === undefined ? p.val() : val + '',\r\n                    m = 0, maskLen = mask.length,\r\n                    v = 0, valLen = value.length,\r\n                    offset = 1, addMethod = 'push',\r\n                    resetPos = -1,\r\n                    maskDigitCount = 0,\r\n                    maskDigitPosArr = [],\r\n                    lastMaskChar,\r\n                    check;\r\n\r\n                if (options.reverse) {\r\n                    addMethod = 'unshift';\r\n                    offset = -1;\r\n                    lastMaskChar = 0;\r\n                    m = maskLen - 1;\r\n                    v = valLen - 1;\r\n                    check = function () {\r\n                        return m > -1 && v > -1;\r\n                    };\r\n                } else {\r\n                    lastMaskChar = maskLen - 1;\r\n                    check = function () {\r\n                        return m < maskLen && v < valLen;\r\n                    };\r\n                }\r\n\r\n                var lastUntranslatedMaskChar;\r\n                while (check()) {\r\n                    var maskDigit = mask.charAt(m),\r\n                        valDigit = value.charAt(v),\r\n                        translation = jMask.translation[maskDigit];\r\n\r\n                    if (translation) {\r\n                        if (valDigit.match(translation.pattern)) {\r\n                            buf[addMethod](valDigit);\r\n                             if (translation.recursive) {\r\n                                if (resetPos === -1) {\r\n                                    resetPos = m;\r\n                                } else if (m === lastMaskChar && m !== resetPos) {\r\n                                    m = resetPos - offset;\r\n                                }\r\n\r\n                                if (lastMaskChar === resetPos) {\r\n                                    m -= offset;\r\n                                }\r\n                            }\r\n                            m += offset;\r\n                        } else if (valDigit === lastUntranslatedMaskChar) {\r\n                            // matched the last untranslated (raw) mask character that we encountered\r\n                            // likely an insert offset the mask character from the last entry; fall\r\n                            // through and only increment v\r\n                            maskDigitCount--;\r\n                            lastUntranslatedMaskChar = undefined;\r\n                        } else if (translation.optional) {\r\n                            m += offset;\r\n                            v -= offset;\r\n                        } else if (translation.fallback) {\r\n                            buf[addMethod](translation.fallback);\r\n                            m += offset;\r\n                            v -= offset;\r\n                        } else {\r\n                          p.invalid.push({p: v, v: valDigit, e: translation.pattern});\r\n                        }\r\n                        v += offset;\r\n                    } else {\r\n                        if (!skipMaskChars) {\r\n                            buf[addMethod](maskDigit);\r\n                        }\r\n\r\n                        if (valDigit === maskDigit) {\r\n                            maskDigitPosArr.push(v);\r\n                            v += offset;\r\n                        } else {\r\n                            lastUntranslatedMaskChar = maskDigit;\r\n                            maskDigitPosArr.push(v + maskDigitCount);\r\n                            maskDigitCount++;\r\n                        }\r\n\r\n                        m += offset;\r\n                    }\r\n                }\r\n\r\n                var lastMaskCharDigit = mask.charAt(lastMaskChar);\r\n                if (maskLen === valLen + 1 && !jMask.translation[lastMaskCharDigit]) {\r\n                    buf.push(lastMaskCharDigit);\r\n                }\r\n\r\n                var newVal = buf.join('');\r\n                p.mapMaskdigitPositions(newVal, maskDigitPosArr, valLen);\r\n                return newVal;\r\n            },\r\n            mapMaskdigitPositions: function(newVal, maskDigitPosArr, valLen) {\r\n              var maskDiff = options.reverse ? newVal.length - valLen : 0;\r\n              p.maskDigitPosMap = {};\r\n              for (var i = 0; i < maskDigitPosArr.length; i++) {\r\n                p.maskDigitPosMap[maskDigitPosArr[i] + maskDiff] = 1;\r\n              }\r\n            },\r\n            callbacks: function (e) {\r\n                var val = p.val(),\r\n                    changed = val !== oldValue,\r\n                    defaultArgs = [val, e, el, options],\r\n                    callback = function(name, criteria, args) {\r\n                        if (typeof options[name] === 'function' && criteria) {\r\n                            options[name].apply(this, args);\r\n                        }\r\n                    };\r\n\r\n                callback('onChange', changed === true, defaultArgs);\r\n                callback('onKeyPress', changed === true, defaultArgs);\r\n                callback('onComplete', val.length === mask.length, defaultArgs);\r\n                callback('onInvalid', p.invalid.length > 0, [val, e, el, p.invalid, options]);\r\n            }\r\n        };\r\n\r\n        el = $(el);\r\n        var jMask = this, oldValue = p.val(), regexMask;\r\n\r\n        mask = typeof mask === 'function' ? mask(p.val(), undefined, el,  options) : mask;\r\n\r\n        // public methods\r\n        jMask.mask = mask;\r\n        jMask.options = options;\r\n        jMask.remove = function() {\r\n            var caret = p.getCaret();\r\n            if (jMask.options.placeholder) {\r\n                el.removeAttr('placeholder');\r\n            }\r\n            if (el.data('mask-maxlength')) {\r\n                el.removeAttr('maxlength');\r\n            }\r\n            p.destroyEvents();\r\n            p.val(jMask.getCleanVal());\r\n            p.setCaret(caret);\r\n            return el;\r\n        };\r\n\r\n        // get value without mask\r\n        jMask.getCleanVal = function() {\r\n           return p.getMasked(true);\r\n        };\r\n\r\n        // get masked value without the value being in the input or element\r\n        jMask.getMaskedVal = function(val) {\r\n           return p.getMasked(false, val);\r\n        };\r\n\r\n       jMask.init = function(onlyMask) {\r\n            onlyMask = onlyMask || false;\r\n            options = options || {};\r\n\r\n            jMask.clearIfNotMatch  = $.jMaskGlobals.clearIfNotMatch;\r\n            jMask.byPassKeys       = $.jMaskGlobals.byPassKeys;\r\n            jMask.translation      = $.extend({}, $.jMaskGlobals.translation, options.translation);\r\n\r\n            jMask = $.extend(true, {}, jMask, options);\r\n\r\n            regexMask = p.getRegexMask();\r\n\r\n            if (onlyMask) {\r\n                p.events();\r\n                p.val(p.getMasked());\r\n            } else {\r\n                if (options.placeholder) {\r\n                    el.attr('placeholder' , options.placeholder);\r\n                }\r\n\r\n                // this is necessary, otherwise if the user submit the form\r\n                // and then press the \"back\" button, the autocomplete will erase\r\n                // the data. Works fine on IE9+, FF, Opera, Safari.\r\n                if (el.data('mask')) {\r\n                  el.attr('autocomplete', 'off');\r\n                }\r\n\r\n                // detect if is necessary let the user type freely.\r\n                // for is a lot faster than forEach.\r\n                for (var i = 0, maxlength = true; i < mask.length; i++) {\r\n                    var translation = jMask.translation[mask.charAt(i)];\r\n                    if (translation && translation.recursive) {\r\n                        maxlength = false;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (maxlength) {\r\n                    el.attr('maxlength', mask.length).data('mask-maxlength', true);\r\n                }\r\n\r\n                p.destroyEvents();\r\n                p.events();\r\n\r\n                var caret = p.getCaret();\r\n                p.val(p.getMasked());\r\n                p.setCaret(caret);\r\n            }\r\n        };\r\n\r\n        jMask.init(!el.is('input'));\r\n    };\r\n\r\n    $.maskWatchers = {};\r\n    var HTMLAttributes = function () {\r\n        var input = $(this),\r\n            options = {},\r\n            prefix = 'data-mask-',\r\n            mask = input.attr('data-mask');\r\n\r\n        if (input.attr(prefix + 'reverse')) {\r\n            options.reverse = true;\r\n        }\r\n\r\n        if (input.attr(prefix + 'clearifnotmatch')) {\r\n            options.clearIfNotMatch = true;\r\n        }\r\n\r\n        if (input.attr(prefix + 'selectonfocus') === 'true') {\r\n           options.selectOnFocus = true;\r\n        }\r\n\r\n        if (notSameMaskObject(input, mask, options)) {\r\n            return input.data('mask', new Mask(this, mask, options));\r\n        }\r\n    },\r\n    notSameMaskObject = function(field, mask, options) {\r\n        options = options || {};\r\n        var maskObject = $(field).data('mask'),\r\n            stringify = JSON.stringify,\r\n            value = $(field).val() || $(field).text();\r\n        try {\r\n            if (typeof mask === 'function') {\r\n                mask = mask(value);\r\n            }\r\n            return typeof maskObject !== 'object' || stringify(maskObject.options) !== stringify(options) || maskObject.mask !== mask;\r\n        } catch (e) {}\r\n    },\r\n    eventSupported = function(eventName) {\r\n        var el = document.createElement('div'), isSupported;\r\n\r\n        eventName = 'on' + eventName;\r\n        isSupported = (eventName in el);\r\n\r\n        if ( !isSupported ) {\r\n            el.setAttribute(eventName, 'return;');\r\n            isSupported = typeof el[eventName] === 'function';\r\n        }\r\n        el = null;\r\n\r\n        return isSupported;\r\n    };\r\n\r\n    $.fn.mask = function(mask, options) {\r\n        options = options || {};\r\n        var selector = this.selector,\r\n            globals = $.jMaskGlobals,\r\n            interval = globals.watchInterval,\r\n            watchInputs = options.watchInputs || globals.watchInputs,\r\n            maskFunction = function() {\r\n                if (notSameMaskObject(this, mask, options)) {\r\n                    return $(this).data('mask', new Mask(this, mask, options));\r\n                }\r\n            };\r\n\r\n        $(this).each(maskFunction);\r\n\r\n        if (selector && selector !== '' && watchInputs) {\r\n            clearInterval($.maskWatchers[selector]);\r\n            $.maskWatchers[selector] = setInterval(function(){\r\n                $(document).find(selector).each(maskFunction);\r\n            }, interval);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    $.fn.masked = function(val) {\r\n        return this.data('mask').getMaskedVal(val);\r\n    };\r\n\r\n    $.fn.unmask = function() {\r\n        clearInterval($.maskWatchers[this.selector]);\r\n        delete $.maskWatchers[this.selector];\r\n        return this.each(function() {\r\n            var dataMask = $(this).data('mask');\r\n            if (dataMask) {\r\n                dataMask.remove().removeData('mask');\r\n            }\r\n        });\r\n    };\r\n\r\n    $.fn.cleanVal = function() {\r\n        return this.data('mask').getCleanVal();\r\n    };\r\n\r\n    $.applyDataMask = function(selector) {\r\n        selector = selector || $.jMaskGlobals.maskElements;\r\n        var $selector = (selector instanceof $) ? selector : $(selector);\r\n        $selector.filter($.jMaskGlobals.dataMaskAttr).each(HTMLAttributes);\r\n    };\r\n\r\n    var globals = {\r\n        maskElements: 'input,td,span,div',\r\n        dataMaskAttr: '*[data-mask]',\r\n        dataMask: true,\r\n        watchInterval: 300,\r\n        watchInputs: true,\r\n        keyStrokeCompensation: 10,\r\n        // old versions of chrome dont work great with input event\r\n        useInput: !/Chrome\\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent) && eventSupported('input'),\r\n        watchDataMask: false,\r\n        byPassKeys: [9, 16, 17, 18, 36, 37, 38, 39, 40, 91],\r\n        translation: {\r\n            '0': {pattern: /\\d/},\r\n            '9': {pattern: /\\d/, optional: true},\r\n            '#': {pattern: /\\d/, recursive: true},\r\n            'A': {pattern: /[a-zA-Z0-9]/},\r\n            'S': {pattern: /[a-zA-Z]/}\r\n        }\r\n    };\r\n\r\n    $.jMaskGlobals = $.jMaskGlobals || {};\r\n    globals = $.jMaskGlobals = $.extend(true, {}, globals, $.jMaskGlobals);\r\n\r\n    // looking for inputs with data-mask attribute\r\n    if (globals.dataMask) {\r\n        $.applyDataMask();\r\n    }\r\n\r\n    setInterval(function() {\r\n        if ($.jMaskGlobals.watchDataMask) {\r\n            $.applyDataMask();\r\n        }\r\n    }, globals.watchInterval);\r\n}, window.jQuery, window.Zepto));\r\n","/*jshint multistr:true, curly: false */\r\n/*global jQuery:false, define: false */\r\n/**\r\n * jRange - Awesome range control\r\n *\r\n * Written by\r\n * ----------\r\n * Nitin Hayaran (nitinhayaran@gmail.com)\r\n *\r\n * Licensed under the MIT (MIT-LICENSE.txt).\r\n *\r\n * @author Nitin Hayaran\r\n * @version 0.1-RELEASE\r\n *\r\n * Dependencies\r\n * ------------\r\n * jQuery (http://jquery.com)\r\n *\r\n **/\r\n;\r\n(function($, window, document, undefined) {\r\n\t'use strict';\r\n\r\n\tvar jRange = function() {\r\n\t\treturn this.init.apply(this, arguments);\r\n\t};\r\n\tjRange.prototype = {\r\n\t\tdefaults: {\r\n\t\t\tonstatechange: function() {},\r\n      ondragend: function() {},\r\n      onbarclicked: function() {},\r\n\t\t\tisRange: false,\r\n\t\t\tshowLabels: true,\r\n\t\t\tshowScale: true,\r\n\t\t\tstep: 1,\r\n\t\t\tformat: '%s',\r\n\t\t\ttheme: 'theme-green',\r\n\t\t\twidth: 300,\r\n\t\t\tdisable: false,\r\n\t\t\tsnap: false\r\n\t\t},\r\n\t\ttemplate: '<div class=\"slider-container\">\\\r\n\t\t\t<div class=\"back-bar\">\\\r\n                <div class=\"selected-bar\"></div>\\\r\n                <div class=\"pointer low\"></div><div class=\"pointer-label low\">123456</div>\\\r\n                <div class=\"pointer high\"></div><div class=\"pointer-label high\">456789</div>\\\r\n                <div class=\"clickable-dummy\"></div>\\\r\n            </div>\\\r\n            <div class=\"scale\"></div>\\\r\n\t\t</div>',\r\n\t\tinit: function(node, options) {\r\n\t\t\tthis.options       = $.extend({}, this.defaults, options);\r\n\t\t\tthis.inputNode     = $(node);\r\n\t\t\tthis.options.value = this.inputNode.val() || (this.options.isRange ? this.options.from + ',' + this.options.from : '' + this.options.from);\r\n\t\t\tthis.domNode       = $(this.template);\r\n\t\t\tthis.domNode.addClass(this.options.theme);\r\n\t\t\tthis.inputNode.after(this.domNode);\r\n\t\t\tthis.domNode.on('change', this.onChange);\r\n\t\t\tthis.pointers      = $('.pointer', this.domNode);\r\n\t\t\tthis.lowPointer    = this.pointers.first();\r\n\t\t\tthis.highPointer   = this.pointers.last();\r\n\t\t\tthis.labels        = $('.pointer-label', this.domNode);\r\n\t\t\tthis.lowLabel      = this.labels.first();\r\n\t\t\tthis.highLabel     = this.labels.last();\r\n\t\t\tthis.scale         = $('.scale', this.domNode);\r\n\t\t\tthis.bar           = $('.selected-bar', this.domNode);\r\n\t\t\tthis.clickableBar  = this.domNode.find('.clickable-dummy');\r\n\t\t\tthis.interval      = this.options.to - this.options.from;\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\trender: function() {\r\n\t\t\t// Check if inputNode is visible, and have some width, so that we can set slider width accordingly.\r\n\t\t\tif (this.inputNode.width() === 0 && !this.options.width) {\r\n\t\t\t\tconsole.log('jRange : no width found, returning');\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tthis.options.width = this.options.width || this.inputNode.width();\r\n\t\t\t\tthis.domNode.width(this.options.width);\r\n\t\t\t\tthis.inputNode.hide();\r\n\t\t\t}\r\n\r\n\t\t\tif (this.isSingle()) {\r\n\t\t\t\tthis.lowPointer.hide();\r\n\t\t\t\tthis.lowLabel.hide();\r\n\t\t\t}\r\n\t\t\tif (!this.options.showLabels) {\r\n\t\t\t\tthis.labels.hide();\r\n\t\t\t}\r\n\t\t\tthis.attachEvents();\r\n\t\t\tif (this.options.showScale) {\r\n\t\t\t\tthis.renderScale();\r\n\t\t\t}\r\n\t\t\tthis.setValue(this.options.value);\r\n\t\t},\r\n\t\tisSingle: function() {\r\n\t\t\tif (typeof(this.options.value) === 'number') {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn (this.options.value.indexOf(',') !== -1 || this.options.isRange) ?\r\n\t\t\t\tfalse : true;\r\n\t\t},\r\n\t\tattachEvents: function() {\r\n\t\t\tthis.clickableBar.click($.proxy(this.barClicked, this));\r\n\t\t\tthis.pointers.on('mousedown touchstart', $.proxy(this.onDragStart, this));\r\n\t\t\tthis.pointers.bind('dragstart', function(event) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t});\r\n\t\t},\r\n\t\tonDragStart: function(e) {\r\n\t\t\tif ( this.options.disable || (e.type === 'mousedown' && e.which !== 1)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tvar pointer = $(e.target);\r\n\t\t\tthis.pointers.removeClass('last-active');\r\n\t\t\tpointer.addClass('focused last-active');\r\n\t\t\tthis[(pointer.hasClass('low') ? 'low' : 'high') + 'Label'].addClass('focused');\r\n\t\t\t$(document).on('mousemove.slider touchmove.slider', $.proxy(this.onDrag, this, pointer));\r\n\t\t\t$(document).on('mouseup.slider touchend.slider touchcancel.slider', $.proxy(this.onDragEnd, this));\r\n\t\t},\r\n\t\tonDrag: function(pointer, e) {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tif (e.originalEvent.touches && e.originalEvent.touches.length) {\r\n\t\t\t\te = e.originalEvent.touches[0];\r\n\t\t\t} else if (e.originalEvent.changedTouches && e.originalEvent.changedTouches.length) {\r\n\t\t\t\te = e.originalEvent.changedTouches[0];\r\n\t\t\t}\r\n\r\n\t\t\tvar position = e.clientX - this.domNode.offset().left;\r\n\t\t\tthis.domNode.trigger('change', [this, pointer, position]);\r\n\t\t},\r\n\t\tonDragEnd: function(e) {\r\n\t\t\tthis.pointers.removeClass('focused')\r\n\t\t\t\t.trigger('rangeslideend');\r\n\t\t\tthis.labels.removeClass('focused');\r\n\t\t\t$(document).off('.slider');\r\n\t\t  this.options.ondragend.call(this, this.options.value);\r\n\t\t},\r\n\t\tbarClicked: function(e) {\r\n\t\t\tif(this.options.disable) return;\r\n\t\t\tvar x = e.pageX - this.clickableBar.offset().left;\r\n\t\t\tif (this.isSingle())\r\n\t\t\t\tthis.setPosition(this.pointers.last(), x, true, true);\r\n\t\t\telse {\r\n\t\t\t\tvar firstLeft      \t= Math.abs(parseFloat(this.pointers.first().css('left'), 10)),\r\n\t\t\t\t\t\tfirstHalfWidth \t= this.pointers.first().width() / 2,\r\n\t\t\t\t\t\tlastLeft \t\t\t \t= Math.abs(parseFloat(this.pointers.last().css('left'), 10)),\r\n\t\t\t\t\t\tlastHalfWidth  \t= this.pointers.first().width() / 2,\r\n\t\t\t\t\t\tleftSide        = Math.abs(firstLeft - x + firstHalfWidth),\r\n\t\t\t\t\t\trightSide       = Math.abs(lastLeft - x + lastHalfWidth),\r\n\t\t\t\t\t\tpointer;\r\n\r\n\t\t\t\tif(leftSide == rightSide) {\r\n\t\t\t\t\tpointer = x < firstLeft ? this.pointers.first() : this.pointers.last();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpointer = leftSide < rightSide ? this.pointers.first() : this.pointers.last();\r\n\t\t\t\t}\r\n\t\t\t\tthis.setPosition(pointer, x, true, true);\r\n\t\t\t}\r\n\t\t\tthis.options.onbarclicked.call(this, this.options.value);\r\n\t\t},\r\n\t\tonChange: function(e, self, pointer, position) {\r\n\t\t\tvar min, max;\r\n\t\t\tmin = 0;\r\n\t\t\tmax = self.domNode.width();\r\n\r\n\t\t\tif (!self.isSingle()) {\r\n\t\t\t\tmin = pointer.hasClass('high') ? parseFloat(self.lowPointer.css(\"left\")) + (self.lowPointer.width() / 2) : 0;\r\n\t\t\t\tmax = pointer.hasClass('low') ? parseFloat(self.highPointer.css(\"left\")) + (self.highPointer.width() / 2) : self.domNode.width();\r\n\t\t\t}\r\n\r\n\t\t\tvar value = Math.min(Math.max(position, min), max);\r\n\t\t\tself.setPosition(pointer, value, true);\r\n\t\t},\r\n\t\tsetPosition: function(pointer, position, isPx, animate) {\r\n\t\t\tvar leftPos, rightPos,\r\n\t\t\t\tlowPos = parseFloat(this.lowPointer.css(\"left\")),\r\n\t\t\t\thighPos = parseFloat(this.highPointer.css(\"left\")) || 0,\r\n\t\t\t\tcircleWidth = this.highPointer.width() / 2;\r\n\t\t\tif (!isPx) {\r\n\t\t\t\tposition = this.prcToPx(position);\r\n\t\t\t}\r\n\t\t\tif(this.options.snap){\r\n\t\t\t\tvar expPos = this.correctPositionForSnap(position);\r\n\t\t\t\tif(expPos === -1){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tposition = expPos;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (pointer[0] === this.highPointer[0]) {\r\n\t\t\t\thighPos = Math.round(position - circleWidth);\r\n\t\t\t} else {\r\n\t\t\t\tlowPos = Math.round(position - circleWidth);\r\n\t\t\t}\r\n\t\t\tpointer[animate ? 'animate' : 'css']({\r\n\t\t\t\t'left': Math.round(position - circleWidth)\r\n\t\t\t});\r\n\t\t\tif (this.isSingle()) {\r\n\t\t\t\tleftPos = 0;\r\n\t\t\t} else {\r\n\t\t\t\tleftPos = lowPos + circleWidth;\r\n\t\t\t\trightPos = highPos + circleWidth;\r\n\t\t\t}\r\n\t\t\tvar w = Math.round(highPos + circleWidth - leftPos);\r\n\t\t\tthis.bar[animate ? 'animate' : 'css']({\r\n\t\t\t\t'width': Math.abs(w),\r\n\t\t\t\t'left': (w>0) ? leftPos : leftPos + w\r\n\t\t\t});\r\n\t\t\tthis.showPointerValue(pointer, position, animate);\r\n\t\t\tthis.isReadonly();\r\n\t\t},\r\n\t\tcorrectPositionForSnap: function(position){\r\n\t\t\tvar currentValue = this.positionToValue(position) - this.options.from;\r\n\t\t\tvar diff = this.options.width / (this.interval / this.options.step),\r\n\t\t\t\texpectedPosition = (currentValue / this.options.step) * diff;\r\n\t\t\tif( position <= expectedPosition + diff / 2 && position >= expectedPosition - diff / 2){\r\n\t\t\t\treturn expectedPosition;\r\n\t\t\t}else{\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// will be called from outside\r\n\t\tsetValue: function(value) {\r\n\t\t\tvar values = value.toString().split(',');\r\n\t\t\tvalues[0] = Math.min(Math.max(values[0], this.options.from), this.options.to) + '';\r\n\t\t\tif (values.length > 1){\r\n\t\t\t\tvalues[1] = Math.min(Math.max(values[1], this.options.from), this.options.to) + '';\r\n\t\t\t}\r\n\t\t\tthis.options.value = value;\r\n\t\t\tvar prc = this.valuesToPrc(values.length === 2 ? values : [0, values[0]]);\r\n\t\t\tif (this.isSingle()) {\r\n\t\t\t\tthis.setPosition(this.highPointer, prc[1]);\r\n\t\t\t} else {\r\n\t\t\t\tthis.setPosition(this.lowPointer, prc[0]);\r\n\t\t\t\tthis.setPosition(this.highPointer, prc[1]);\r\n\t\t\t}\r\n\t\t},\r\n\t\trenderScale: function() {\r\n\t\t\tvar s = this.options.scale || [this.options.from, this.options.to];\r\n\t\t\tvar prc = Math.round((100 / (s.length - 1)) * 10) / 10;\r\n\t\t\tvar str = '';\r\n\t\t\tfor (var i = 0; i < s.length; i++) {\r\n\t\t\t\tstr += '<span style=\"left: ' + i * prc + '%\">' + (s[i] != '|' ? '<ins>' + s[i] + '</ins>' : '') + '</span>';\r\n\t\t\t}\r\n\t\t\tthis.scale.html(str);\r\n\r\n\t\t\t$('ins', this.scale).each(function() {\r\n\t\t\t\t$(this).css({\r\n\t\t\t\t\tmarginLeft: -$(this).outerWidth() / 2\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetBarWidth: function() {\r\n\t\t\tvar values = this.options.value.split(',');\r\n\t\t\tif (values.length > 1) {\r\n\t\t\t\treturn parseFloat(values[1]) - parseFloat(values[0]);\r\n\t\t\t} else {\r\n\t\t\t\treturn parseFloat(values[0]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tshowPointerValue: function(pointer, position, animate) {\r\n\t\t\tvar label = $('.pointer-label', this.domNode)[pointer.hasClass('low') ? 'first' : 'last']();\r\n\t\t\tvar text;\r\n\t\t\tvar value = this.positionToValue(position);\r\n\t\t\t// Is it higer or lower than it should be?\r\n\r\n\t\t\tif ($.isFunction(this.options.format)) {\r\n\t\t\t\tvar type = this.isSingle() ? undefined : (pointer.hasClass('low') ? 'low' : 'high');\r\n\t\t\t\ttext = this.options.format(value, type);\r\n\t\t\t} else {\r\n\t\t\t\ttext = this.options.format.replace('%s', value);\r\n\t\t\t}\r\n\r\n\t\t\tvar width = label.html(text).width(),\r\n\t\t\t\tleft = position - width / 2;\r\n\t\t\tleft = Math.min(Math.max(left, 0), this.options.width - width);\r\n\t\t\tlabel[animate ? 'animate' : 'css']({\r\n\t\t\t\tleft: left\r\n\t\t\t});\r\n\t\t\tthis.setInputValue(pointer, value);\r\n\t\t},\r\n\t\tvaluesToPrc: function(values) {\r\n\t\t\tvar lowPrc = ((parseFloat(values[0]) - parseFloat(this.options.from)) * 100 / this.interval),\r\n\t\t\t\thighPrc = ((parseFloat(values[1]) - parseFloat(this.options.from)) * 100 / this.interval);\r\n\t\t\treturn [lowPrc, highPrc];\r\n\t\t},\r\n\t\tprcToPx: function(prc) {\r\n\t\t\treturn (this.domNode.width() * prc) / 100;\r\n\t\t},\r\n\t\tisDecimal: function() {\r\n\t\t\treturn ((this.options.value + this.options.from + this.options.to).indexOf(\".\")===-1) ? false : true;\r\n\t\t},\r\n\t\tpositionToValue: function(pos) {\r\n\t\t\tvar value = (pos / this.domNode.width()) * this.interval;\r\n\t\t\tvalue = parseFloat(value, 10) + parseFloat(this.options.from, 10);\r\n\t\t\tif (this.isDecimal()) {\r\n\t\t\t\tvar final = Math.round(Math.round(value / this.options.step) * this.options.step *100)/100;\r\n\t\t\t\tif (final!==0.0) {\r\n\t\t\t\t\tfinal = '' + final;\r\n\t\t\t\t\tif (final.indexOf(\".\")===-1) {\r\n\t\t\t\t\t\tfinal = final + \".\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\twhile (final.length - final.indexOf('.')<3) {\r\n\t\t\t\t\t\tfinal = final + \"0\";\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfinal = \"0.00\";\r\n\t\t\t\t}\r\n\t\t\t\treturn final;\r\n\t\t\t} else {\r\n\t\t\t\treturn Math.round(value / this.options.step) * this.options.step;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetInputValue: function(pointer, v) {\r\n\t\t\t// if(!isChanged) return;\r\n\t\t\tif (this.isSingle()) {\r\n\t\t\t\tthis.options.value = v.toString();\r\n\t\t\t} else {\r\n\t\t\t\tvar values = this.options.value.split(',');\r\n\t\t\t\tif (pointer.hasClass('low')) {\r\n\t\t\t\t\tthis.options.value = v + ',' + values[1];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.options.value = values[0] + ',' + v;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.inputNode.val() !== this.options.value) {\r\n\t\t\t\tthis.inputNode.val(this.options.value)\r\n\t\t\t\t\t.trigger('change');\r\n\t\t\t\tthis.options.onstatechange.call(this, this.options.value);\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetValue: function() {\r\n\t\t\treturn this.options.value;\r\n\t\t},\r\n\t\tgetOptions: function() {\r\n\t\t\treturn this.options;\r\n\t\t},\r\n\t\tgetRange: function() {\r\n\t\t\treturn this.options.from + \",\" + this.options.to;\r\n\t\t},\r\n\t\tisReadonly: function(){\r\n\t\t\tthis.domNode.toggleClass('slider-readonly', this.options.disable);\r\n\t\t},\r\n\t\tdisable: function(){\r\n\t\t\tthis.options.disable = true;\r\n\t\t\tthis.isReadonly();\r\n\t\t},\r\n\t\tenable: function(){\r\n\t\t\tthis.options.disable = false;\r\n\t\t\tthis.isReadonly();\r\n\t\t},\r\n\t\ttoggleDisable: function(){\r\n\t\t\tthis.options.disable = !this.options.disable;\r\n\t\t\tthis.isReadonly();\r\n\t\t},\r\n\t\tupdateRange: function(range, value) {\r\n\t\t\tvar values = range.toString().split(',');\r\n\t\t\tthis.interval = parseInt(values[1]) - parseInt(values[0]);\r\n\t\t\tif(value){\r\n\t\t\t\tthis.setValue(value);\r\n\t\t\t}else{\r\n\t\t\t\tthis.setValue(this.getValue());\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar pluginName = 'jRange';\r\n\t// A really lightweight plugin wrapper around the constructor,\r\n\t// preventing against multiple instantiations\r\n\t$.fn[pluginName] = function(option) {\r\n\t\tvar args = arguments,\r\n\t\t\tresult;\r\n\r\n\t\tthis.each(function() {\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\tdata = $.data(this, 'plugin_' + pluginName),\r\n\t\t\t\toptions = typeof option === 'object' && option;\r\n\t\t\tif (!data) {\r\n\t\t\t\t$this.data('plugin_' + pluginName, (data = new jRange(this, options)));\r\n\t\t\t\t$(window).resize(function() {\r\n\t\t\t\t\tdata.setValue(data.getValue());\r\n\t\t\t\t}); // Update slider position when window is resized to keep it in sync with scale\r\n\t\t\t}\r\n\t\t\t// if first argument is a string, call silimarly named function\r\n\t\t\t// this gives flexibility to call functions of the plugin e.g.\r\n\t\t\t//   - $('.dial').plugin('destroy');\r\n\t\t\t//   - $('.dial').plugin('render', $('.new-child'));\r\n\t\t\tif (typeof option === 'string') {\r\n\t\t\t\tresult = data[option].apply(data, Array.prototype.slice.call(args, 1));\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// To enable plugin returns values\r\n\t\treturn result || this;\r\n\t};\r\n\r\n})(jQuery, window, document);\r\n","\t$.fn.spinner = function() {\r\n\t\tthis.each(function() {\r\n\t\t\tvar el = $(this);\r\n\t\t\tel.after('<a href=\"#\" class=\"category-product__toCart-plus js-category-product-spinner-plus\" role=\"button\"></a>');\r\n\t\t\tel.after('<a href=\"#\" class=\"category-product__toCart-minus js-category-product-spinner-minus\" role=\"button\"></a>');\r\n\t\t\tel.parent().on('click', '.js-category-product-spinner-minus', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tif (el.val() > parseInt(el.attr('min'))) {\r\n\t\t\t\t\tel.val( function(i, oldval) { return --oldval; });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tel.parent().on('click', '.js-category-product-spinner-plus', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tif (el.val() < parseInt(el.attr('max'))) {\r\n\t\t\t\t\tel.val( function(i, oldval) { return ++oldval; });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tel.on('focusout', function() {\r\n\t\t\t\tif (el.val() > parseInt(el.attr('max'))) {\r\n\t\t\t\t\tel.val(el.attr('max'));\r\n\t\t\t\t} else if (el.val() < parseInt(el.attr('min'))) {\r\n\t\t\t\t\tel.val(el.attr('min'));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t};","// Generated by CoffeeScript 1.9.2\r\n\r\n/**\r\n@license Sticky-kit v1.1.2 | WTFPL | Leaf Corcoran 2015 | http://leafo.net\r\n */\r\n\r\n(function() {\r\n  var $, win;\r\n\r\n  $ = this.jQuery || window.jQuery;\r\n\r\n  win = $(window);\r\n\r\n  $.fn.stick_in_parent = function(opts) {\r\n    var doc, elm, enable_bottoming, fn, i, inner_scrolling, len, manual_spacer, offset_top, parent_selector, recalc_every, sticky_class;\r\n    if (opts == null) {\r\n      opts = {};\r\n    }\r\n    sticky_class = opts.sticky_class, inner_scrolling = opts.inner_scrolling, recalc_every = opts.recalc_every, parent_selector = opts.parent, offset_top = opts.offset_top, manual_spacer = opts.spacer, enable_bottoming = opts.bottoming;\r\n    if (offset_top == null) {\r\n      offset_top = 0;\r\n    }\r\n    if (parent_selector == null) {\r\n      parent_selector = void 0;\r\n    }\r\n    if (inner_scrolling == null) {\r\n      inner_scrolling = true;\r\n    }\r\n    if (sticky_class == null) {\r\n      sticky_class = \"is_stuck\";\r\n    }\r\n    doc = $(document);\r\n    if (enable_bottoming == null) {\r\n      enable_bottoming = true;\r\n    }\r\n    fn = function(elm, padding_bottom, parent_top, parent_height, top, height, el_float, detached) {\r\n      var bottomed, detach, fixed, last_pos, last_scroll_height, offset, parent, recalc, recalc_and_tick, recalc_counter, spacer, tick;\r\n      if (elm.data(\"sticky_kit\")) {\r\n        return;\r\n      }\r\n      elm.data(\"sticky_kit\", true);\r\n      last_scroll_height = doc.height();\r\n      parent = elm.parent();\r\n      if (parent_selector != null) {\r\n        parent = parent.closest(parent_selector);\r\n      }\r\n      if (!parent.length) {\r\n        throw \"failed to find stick parent\";\r\n      }\r\n      fixed = false;\r\n      bottomed = false;\r\n      spacer = manual_spacer != null ? manual_spacer && elm.closest(manual_spacer) : $(\"<div />\");\r\n      if (spacer) {\r\n        spacer.css('position', elm.css('position'));\r\n      }\r\n      recalc = function() {\r\n        var border_top, padding_top, restore;\r\n        if (detached) {\r\n          return;\r\n        }\r\n        last_scroll_height = doc.height();\r\n        border_top = parseInt(parent.css(\"border-top-width\"), 10);\r\n        padding_top = parseInt(parent.css(\"padding-top\"), 10);\r\n        padding_bottom = parseInt(parent.css(\"padding-bottom\"), 10);\r\n        parent_top = parent.offset().top + border_top + padding_top;\r\n        parent_height = parent.height();\r\n        if (fixed) {\r\n          fixed = false;\r\n          bottomed = false;\r\n          if (manual_spacer == null) {\r\n            elm.insertAfter(spacer);\r\n            spacer.detach();\r\n          }\r\n          elm.css({\r\n            position: \"\",\r\n            top: \"\",\r\n            width: \"\",\r\n            bottom: \"\"\r\n          }).removeClass(sticky_class);\r\n          restore = true;\r\n        }\r\n        top = elm.offset().top - (parseInt(elm.css(\"margin-top\"), 10) || 0) - offset_top;\r\n        height = elm.outerHeight(true);\r\n        el_float = elm.css(\"float\");\r\n        if (spacer) {\r\n          spacer.css({\r\n            width: elm.outerWidth(true),\r\n            height: height,\r\n            display: elm.css(\"display\"),\r\n            \"vertical-align\": elm.css(\"vertical-align\"),\r\n            \"float\": el_float\r\n          });\r\n        }\r\n        if (restore) {\r\n          return tick();\r\n        }\r\n      };\r\n      recalc();\r\n      if (height === parent_height) {\r\n        return;\r\n      }\r\n      last_pos = void 0;\r\n      offset = offset_top;\r\n      recalc_counter = recalc_every;\r\n      tick = function() {\r\n        var css, delta, recalced, scroll, will_bottom, win_height;\r\n        if (detached) {\r\n          return;\r\n        }\r\n        recalced = false;\r\n        if (recalc_counter != null) {\r\n          recalc_counter -= 1;\r\n          if (recalc_counter <= 0) {\r\n            recalc_counter = recalc_every;\r\n            recalc();\r\n            recalced = true;\r\n          }\r\n        }\r\n        if (!recalced && doc.height() !== last_scroll_height) {\r\n          recalc();\r\n          recalced = true;\r\n        }\r\n        scroll = win.scrollTop();\r\n        if (last_pos != null) {\r\n          delta = scroll - last_pos;\r\n        }\r\n        last_pos = scroll;\r\n        if (fixed) {\r\n          if (enable_bottoming) {\r\n            will_bottom = scroll + height + offset > parent_height + parent_top;\r\n            if (bottomed && !will_bottom) {\r\n              bottomed = false;\r\n              elm.css({\r\n                position: \"fixed\",\r\n                bottom: \"\",\r\n                top: offset\r\n              }).trigger(\"sticky_kit:unbottom\");\r\n            }\r\n          }\r\n          if (scroll < top) {\r\n            fixed = false;\r\n            offset = offset_top;\r\n            if (manual_spacer == null) {\r\n              if (el_float === \"left\" || el_float === \"right\") {\r\n                elm.insertAfter(spacer);\r\n              }\r\n              spacer.detach();\r\n            }\r\n            css = {\r\n              position: \"\",\r\n              width: \"\",\r\n              top: \"\"\r\n            };\r\n            elm.css(css).removeClass(sticky_class).trigger(\"sticky_kit:unstick\");\r\n          }\r\n          if (inner_scrolling) {\r\n            win_height = win.height();\r\n            if (height + offset_top > win_height) {\r\n              if (!bottomed) {\r\n                offset -= delta;\r\n                offset = Math.max(win_height - height, offset);\r\n                offset = Math.min(offset_top, offset);\r\n                if (fixed) {\r\n                  elm.css({\r\n                    top: offset + \"px\"\r\n                  });\r\n                }\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          if (scroll > top) {\r\n            fixed = true;\r\n            css = {\r\n              position: \"fixed\",\r\n              top: offset\r\n            };\r\n            css.width = elm.css(\"box-sizing\") === \"border-box\" ? elm.outerWidth() + \"px\" : elm.width() + \"px\";\r\n            elm.css(css).addClass(sticky_class);\r\n            if (manual_spacer == null) {\r\n              elm.after(spacer);\r\n              if (el_float === \"left\" || el_float === \"right\") {\r\n                spacer.append(elm);\r\n              }\r\n            }\r\n            elm.trigger(\"sticky_kit:stick\");\r\n          }\r\n        }\r\n        if (fixed && enable_bottoming) {\r\n          if (will_bottom == null) {\r\n            will_bottom = scroll + height + offset > parent_height + parent_top;\r\n          }\r\n          if (!bottomed && will_bottom) {\r\n            bottomed = true;\r\n            if (parent.css(\"position\") === \"static\") {\r\n              parent.css({\r\n                position: \"relative\"\r\n              });\r\n            }\r\n            return elm.css({\r\n              position: \"absolute\",\r\n              bottom: padding_bottom,\r\n              top: \"auto\"\r\n            }).trigger(\"sticky_kit:bottom\");\r\n          }\r\n        }\r\n      };\r\n      recalc_and_tick = function() {\r\n        recalc();\r\n        return tick();\r\n      };\r\n      detach = function() {\r\n        detached = true;\r\n        win.off(\"touchmove\", tick);\r\n        win.off(\"scroll\", tick);\r\n        win.off(\"resize\", recalc_and_tick);\r\n        $(document.body).off(\"sticky_kit:recalc\", recalc_and_tick);\r\n        elm.off(\"sticky_kit:detach\", detach);\r\n        elm.removeData(\"sticky_kit\");\r\n        elm.css({\r\n          position: \"\",\r\n          bottom: \"\",\r\n          top: \"\",\r\n          width: \"\"\r\n        });\r\n        parent.position(\"position\", \"\");\r\n        if (fixed) {\r\n          if (manual_spacer == null) {\r\n            if (el_float === \"left\" || el_float === \"right\") {\r\n              elm.insertAfter(spacer);\r\n            }\r\n            spacer.remove();\r\n          }\r\n          return elm.removeClass(sticky_class);\r\n        }\r\n      };\r\n      win.on(\"touchmove\", tick);\r\n      win.on(\"scroll\", tick);\r\n      win.on(\"resize\", recalc_and_tick);\r\n      $(document.body).on(\"sticky_kit:recalc\", recalc_and_tick);\r\n      elm.on(\"sticky_kit:detach\", detach);\r\n      return setTimeout(tick, 0);\r\n    };\r\n    for (i = 0, len = this.length; i < len; i++) {\r\n      elm = this[i];\r\n      fn($(elm));\r\n    }\r\n    return this;\r\n  };\r\n\r\n}).call(this);\r\n","/*\r\n\r\n\tjQuery Tags Input Plugin 1.3.3\r\n\r\n\tCopyright (c) 2011 XOXCO, Inc\r\n\r\n\tDocumentation for this plugin lives here:\r\n\thttp://xoxco.com/clickable/jquery-tags-input\r\n\r\n\tLicensed under the MIT license:\r\n\thttp://www.opensource.org/licenses/mit-license.php\r\n\r\n\tben@xoxco.com\r\n\r\n*/\r\n\r\n(function($) {\r\n\r\n\tvar delimiter = new Array();\r\n\tvar tags_callbacks = new Array();\r\n\t$.fn.doAutosize = function(o){\r\n\t    var minWidth = $(this).data('minwidth'),\r\n\t        maxWidth = $(this).data('maxwidth'),\r\n\t        val = '',\r\n\t        input = $(this),\r\n\t        testSubject = $('#'+$(this).data('tester_id'));\r\n\r\n\t    if (val === (val = input.val())) {return;}\r\n\r\n\t    // Enter new content into testSubject\r\n\t    var escaped = val.replace(/&/g, '&amp;').replace(/\\s/g,' ').replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n\t    testSubject.html(escaped);\r\n\t    // Calculate new width + whether to change\r\n\t    var testerWidth = testSubject.width(),\r\n\t        newWidth = (testerWidth + o.comfortZone) >= minWidth ? testerWidth + o.comfortZone : minWidth,\r\n\t        currentWidth = input.width(),\r\n\t        isValidWidthChange = (newWidth < currentWidth && newWidth >= minWidth)\r\n\t                             || (newWidth > minWidth && newWidth < maxWidth);\r\n\r\n\t    // Animate width\r\n\t    if (isValidWidthChange) {\r\n\t        input.width(newWidth);\r\n\t    }\r\n\r\n\r\n  };\r\n  $.fn.resetAutosize = function(options){\r\n    // alert(JSON.stringify(options));\r\n    var minWidth =  $(this).data('minwidth') || options.minInputWidth || $(this).width(),\r\n        maxWidth = $(this).data('maxwidth') || options.maxInputWidth || ($(this).closest('.tagsinput').width() - options.inputPadding),\r\n        val = '',\r\n        input = $(this),\r\n        testSubject = $('<tester/>').css({\r\n            position: 'absolute',\r\n            top: -9999,\r\n            left: -9999,\r\n            width: 'auto',\r\n            fontSize: input.css('fontSize'),\r\n            fontFamily: input.css('fontFamily'),\r\n            fontWeight: input.css('fontWeight'),\r\n            letterSpacing: input.css('letterSpacing'),\r\n            whiteSpace: 'nowrap'\r\n        }),\r\n        testerId = $(this).attr('id')+'_autosize_tester';\r\n    if(! $('#'+testerId).length > 0){\r\n      testSubject.attr('id', testerId);\r\n      testSubject.appendTo('body');\r\n    }\r\n\r\n    input.data('minwidth', minWidth);\r\n    input.data('maxwidth', maxWidth);\r\n    input.data('tester_id', testerId);\r\n    input.css('width', minWidth);\r\n  };\r\n\r\n\t$.fn.addTag = function(value,options) {\r\n\t\t\toptions = jQuery.extend({focus:false,callback:true},options);\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tvar id = $(this).attr('id');\r\n\r\n\t\t\t\tvar tagslist = $(this).val().split(delimiter[id]);\r\n\t\t\t\tif (tagslist[0] == '') {\r\n\t\t\t\t\ttagslist = new Array();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvalue = jQuery.trim(value);\r\n\r\n\t\t\t\tif (options.unique) {\r\n\t\t\t\t\tvar skipTag = $(this).tagExist(value);\r\n\t\t\t\t\tif(skipTag == true) {\r\n\t\t\t\t\t    //Marks fake input as not_valid to let styling it\r\n    \t\t\t\t    $('#'+id+'_tag').addClass('not_valid');\r\n    \t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar skipTag = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (value !='' && skipTag != true) {\r\n                    $('<span>').addClass('tag').append(\r\n                        $('<span>').text(value).append('&nbsp;&nbsp;'),\r\n                        $('<a>', {\r\n                            href  : '#',\r\n                            title : 'Removing tag',\r\n                            text  : 'x'\r\n                        }).click(function () {\r\n                            return $('#' + id).removeTag(escape(value));\r\n                        })\r\n                    ).insertBefore('#' + id + '_addTag');\r\n\r\n\t\t\t\t\ttagslist.push(value);\r\n\r\n\t\t\t\t\t$('#'+id+'_tag').val('');\r\n\t\t\t\t\tif (options.focus) {\r\n\t\t\t\t\t\t$('#'+id+'_tag').focus();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$('#'+id+'_tag').blur();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$.fn.tagsInput.updateTagsField(this,tagslist);\r\n\r\n\t\t\t\t\tif (options.callback && tags_callbacks[id] && tags_callbacks[id]['onAddTag']) {\r\n\t\t\t\t\t\tvar f = tags_callbacks[id]['onAddTag'];\r\n\t\t\t\t\t\tf.call(this, value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(tags_callbacks[id] && tags_callbacks[id]['onChange'])\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar i = tagslist.length;\r\n\t\t\t\t\t\tvar f = tags_callbacks[id]['onChange'];\r\n\t\t\t\t\t\tf.call(this, $(this), tagslist[i-1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\t$.fn.removeTag = function(value) {\r\n\t\t\tvalue = unescape(value);\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tvar id = $(this).attr('id');\r\n\r\n\t\t\t\tvar old = $(this).val().split(delimiter[id]);\r\n\r\n\t\t\t\t$('#'+id+'_tagsinput .tag').remove();\r\n\t\t\t\tstr = '';\r\n\t\t\t\tfor (i=0; i< old.length; i++) {\r\n\t\t\t\t\tif (old[i]!=value) {\r\n\t\t\t\t\t\tstr = str + delimiter[id] +old[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$.fn.tagsInput.importTags(this,str);\r\n\r\n\t\t\t\tif (tags_callbacks[id] && tags_callbacks[id]['onRemoveTag']) {\r\n\t\t\t\t\tvar f = tags_callbacks[id]['onRemoveTag'];\r\n\t\t\t\t\tf.call(this, value);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\t$.fn.tagExist = function(val) {\r\n\t\tvar id = $(this).attr('id');\r\n\t\tvar tagslist = $(this).val().split(delimiter[id]);\r\n\t\treturn (jQuery.inArray(val, tagslist) >= 0); //true when tag exists, false when not\r\n\t};\r\n\r\n   // clear all existing tags and import new ones from a string\r\n   $.fn.importTags = function(str) {\r\n      var id = $(this).attr('id');\r\n      $('#'+id+'_tagsinput .tag').remove();\r\n      $.fn.tagsInput.importTags(this,str);\r\n   }\r\n\r\n\t$.fn.tagsInput = function(options) {\r\n    var settings = jQuery.extend({\r\n      interactive:true,\r\n      defaultText:'add a tag',\r\n      minChars:0,\r\n      width:'300px',\r\n      height:'100px',\r\n      autocomplete: {selectFirst: false },\r\n      hide:true,\r\n      delimiter: ',',\r\n      unique:true,\r\n      removeWithBackspace:true,\r\n      placeholderColor:'#666666',\r\n      autosize: true,\r\n      comfortZone: 20,\r\n      inputPadding: 6*2\r\n    },options);\r\n\r\n    \tvar uniqueIdCounter = 0;\r\n\r\n\t\tthis.each(function() {\r\n         // If we have already initialized the field, do not do it again\r\n         if (typeof $(this).attr('data-tagsinput-init') !== 'undefined') {\r\n            return;\r\n         }\r\n\r\n         // Mark the field as having been initialized\r\n         $(this).attr('data-tagsinput-init', true);\r\n\r\n\t\t\tif (settings.hide) {\r\n\t\t\t\t$(this).hide();\r\n\t\t\t}\r\n\t\t\tvar id = $(this).attr('id');\r\n\t\t\tif (!id || delimiter[$(this).attr('id')]) {\r\n\t\t\t\tid = $(this).attr('id', 'tags' + new Date().getTime() + (uniqueIdCounter++)).attr('id');\r\n\t\t\t}\r\n\r\n\t\t\tvar data = jQuery.extend({\r\n\t\t\t\tpid:id,\r\n\t\t\t\treal_input: '#'+id,\r\n\t\t\t\tholder: '#'+id+'_tagsinput',\r\n\t\t\t\tinput_wrapper: '#'+id+'_addTag',\r\n\t\t\t\tfake_input: '#'+id+'_tag'\r\n\t\t\t},settings);\r\n\r\n\t\t\tdelimiter[id] = data.delimiter;\r\n\r\n\t\t\tif (settings.onAddTag || settings.onRemoveTag || settings.onChange) {\r\n\t\t\t\ttags_callbacks[id] = new Array();\r\n\t\t\t\ttags_callbacks[id]['onAddTag'] = settings.onAddTag;\r\n\t\t\t\ttags_callbacks[id]['onRemoveTag'] = settings.onRemoveTag;\r\n\t\t\t\ttags_callbacks[id]['onChange'] = settings.onChange;\r\n\t\t\t}\r\n\r\n\t\t\tvar markup = '<div id=\"'+id+'_tagsinput\" class=\"tagsinput\"><div id=\"'+id+'_addTag\">';\r\n\r\n\t\t\tif (settings.interactive) {\r\n\t\t\t\tmarkup = markup + '<input id=\"'+id+'_tag\" value=\"\" data-default=\"'+settings.defaultText+'\" />';\r\n\t\t\t}\r\n\r\n\t\t\tmarkup = markup + '</div><div class=\"tags_clear\"></div></div>';\r\n\r\n\t\t\t$(markup).insertAfter(this);\r\n\r\n\t\t\t$(data.holder).css('width',settings.width);\r\n\t\t\t$(data.holder).css('min-height',settings.height);\r\n\t\t\t$(data.holder).css('height',settings.height);\r\n\r\n\t\t\tif ($(data.real_input).val()!='') {\r\n\t\t\t\t$.fn.tagsInput.importTags($(data.real_input),$(data.real_input).val());\r\n\t\t\t}\r\n\t\t\tif (settings.interactive) {\r\n\t\t\t\t$(data.fake_input).val($(data.fake_input).attr('data-default'));\r\n\t\t\t\t$(data.fake_input).css('color',settings.placeholderColor);\r\n\t\t        $(data.fake_input).resetAutosize(settings);\r\n\r\n\t\t\t\t$(data.holder).bind('click',data,function(event) {\r\n\t\t\t\t\t$(event.data.fake_input).focus();\r\n\t\t\t\t});\r\n\r\n\t\t\t\t$(data.fake_input).bind('focus',data,function(event) {\r\n\t\t\t\t\tif ($(event.data.fake_input).val()==$(event.data.fake_input).attr('data-default')) {\r\n\t\t\t\t\t\t$(event.data.fake_input).val('');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$(event.data.fake_input).css('color','#000000');\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (settings.autocomplete_url != undefined) {\r\n\t\t\t\t\tautocomplete_options = {source: settings.autocomplete_url};\r\n\t\t\t\t\tfor (attrname in settings.autocomplete) {\r\n\t\t\t\t\t\tautocomplete_options[attrname] = settings.autocomplete[attrname];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (jQuery.Autocompleter !== undefined) {\r\n\t\t\t\t\t\t$(data.fake_input).autocomplete(settings.autocomplete_url, settings.autocomplete);\r\n\t\t\t\t\t\t$(data.fake_input).bind('result',data,function(event,data,formatted) {\r\n\t\t\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\t\t\t$('#'+id).addTag(data[0] + \"\",{focus:true,unique:(settings.unique)});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t  \t});\r\n\t\t\t\t\t} else if (jQuery.ui.autocomplete !== undefined) {\r\n\t\t\t\t\t\t$(data.fake_input).autocomplete(autocomplete_options);\r\n\t\t\t\t\t\t$(data.fake_input).bind('autocompleteselect',data,function(event,ui) {\r\n\t\t\t\t\t\t\t$(event.data.real_input).addTag(ui.item.value,{focus:true,unique:(settings.unique)});\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\t// if a user tabs out of the field, create a new tag\r\n\t\t\t\t\t\t// this is only available if autocomplete is not used.\r\n\t\t\t\t\t\t$(data.fake_input).bind('blur',data,function(event) {\r\n\t\t\t\t\t\t\tvar d = $(this).attr('data-default');\r\n\t\t\t\t\t\t\tif ($(event.data.fake_input).val()!='' && $(event.data.fake_input).val()!=d) {\r\n\t\t\t\t\t\t\t\tif( (event.data.minChars <= $(event.data.fake_input).val().length) && (!event.data.maxChars || (event.data.maxChars >= $(event.data.fake_input).val().length)) )\r\n\t\t\t\t\t\t\t\t\t$(event.data.real_input).addTag($(event.data.fake_input).val(),{focus:true,unique:(settings.unique)});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t$(event.data.fake_input).val($(event.data.fake_input).attr('data-default'));\r\n\t\t\t\t\t\t\t\t$(event.data.fake_input).css('color',settings.placeholderColor);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// if user types a default delimiter like comma,semicolon and then create a new tag\r\n\t\t\t\t$(data.fake_input).bind('keypress',data,function(event) {\r\n\t\t\t\t\tif (_checkDelimiter(event)) {\r\n\t\t\t\t\t    event.preventDefault();\r\n\t\t\t\t\t\tif( (event.data.minChars <= $(event.data.fake_input).val().length) && (!event.data.maxChars || (event.data.maxChars >= $(event.data.fake_input).val().length)) )\r\n\t\t\t\t\t\t\t$(event.data.real_input).addTag($(event.data.fake_input).val(),{focus:true,unique:(settings.unique)});\r\n\t\t\t\t\t  \t$(event.data.fake_input).resetAutosize(settings);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t} else if (event.data.autosize) {\r\n\t\t\t            $(event.data.fake_input).doAutosize(settings);\r\n\r\n          \t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//Delete last tag on backspace\r\n\t\t\t\tdata.removeWithBackspace && $(data.fake_input).bind('keydown', function(event)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(event.keyCode == 8 && $(this).val() == '')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t event.preventDefault();\r\n\t\t\t\t\t\t var last_tag = $(this).closest('.tagsinput').find('.tag:last').text();\r\n\t\t\t\t\t\t var id = $(this).attr('id').replace(/_tag$/, '');\r\n\t\t\t\t\t\t last_tag = last_tag.replace(/[\\s]+x$/, '');\r\n\t\t\t\t\t\t $('#' + id).removeTag(escape(last_tag));\r\n\t\t\t\t\t\t $(this).trigger('focus');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t$(data.fake_input).blur();\r\n\r\n\t\t\t\t//Removes the not_valid class when user changes the value of the fake input\r\n\t\t\t\tif(data.unique) {\r\n\t\t\t\t    $(data.fake_input).keydown(function(event){\r\n\t\t\t\t        if(event.keyCode == 8 || String.fromCharCode(event.which).match(/\\w+|[áéíóúÁÉÍÓÚñÑ,/]+/)) {\r\n\t\t\t\t            $(this).removeClass('not_valid');\r\n\t\t\t\t        }\r\n\t\t\t\t    });\r\n\t\t\t\t}\r\n\t\t\t} // if settings.interactive\r\n\t\t});\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\t$.fn.tagsInput.updateTagsField = function(obj,tagslist) {\r\n\t\tvar id = $(obj).attr('id');\r\n\t\t$(obj).val(tagslist.join(delimiter[id]));\r\n\t};\r\n\r\n\t$.fn.tagsInput.importTags = function(obj,val) {\r\n\t\t$(obj).val('');\r\n\t\tvar id = $(obj).attr('id');\r\n\t\tvar tags = val.split(delimiter[id]);\r\n\t\tfor (i=0; i<tags.length; i++) {\r\n\t\t\t$(obj).addTag(tags[i],{focus:false,callback:false});\r\n\t\t}\r\n\t\tif(tags_callbacks[id] && tags_callbacks[id]['onChange'])\r\n\t\t{\r\n\t\t\tvar f = tags_callbacks[id]['onChange'];\r\n\t\t\tf.call(obj, obj, tags[i]);\r\n\t\t}\r\n\t};\r\n\r\n   /**\r\n     * check delimiter Array\r\n     * @param event\r\n     * @returns {boolean}\r\n     * @private\r\n     */\r\n   var _checkDelimiter = function(event){\r\n      var found = false;\r\n      if (event.which == 13) {\r\n         return true;\r\n      }\r\n\r\n      if (typeof event.data.delimiter === 'string') {\r\n         if (event.which == event.data.delimiter.charCodeAt(0)) {\r\n            found = true;\r\n         }\r\n      } else {\r\n         $.each(event.data.delimiter, function(index, delimiter) {\r\n            if (event.which == delimiter.charCodeAt(0)) {\r\n               found = true;\r\n            }\r\n         });\r\n      }\r\n\r\n      return found;\r\n   }\r\n})(jQuery);\r\n"]}